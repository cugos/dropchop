/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */
( function( global, factory ) {

	"use strict";

	if ( typeof module === "object" && typeof module.exports === "object" ) {

		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
} )( typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
// enough that all such attempts are guarded in a try block.
"use strict";

var arr = [];

var getProto = Object.getPrototypeOf;

var slice = arr.slice;

var flat = arr.flat ? function( array ) {
	return arr.flat.call( array );
} : function( array ) {
	return arr.concat.apply( [], array );
};


var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var fnToString = hasOwn.toString;

var ObjectFunctionString = fnToString.call( Object );

var support = {};

var isFunction = function isFunction( obj ) {

      // Support: Chrome <=57, Firefox <=52
      // In some browsers, typeof returns "function" for HTML <object> elements
      // (i.e., `typeof document.createElement( "object" ) === "function"`).
      // We don't want to classify *any* DOM node as a function.
      return typeof obj === "function" && typeof obj.nodeType !== "number";
  };


var isWindow = function isWindow( obj ) {
		return obj != null && obj === obj.window;
	};


var document = window.document;



	var preservedScriptAttributes = {
		type: true,
		src: true,
		nonce: true,
		noModule: true
	};

	function DOMEval( code, node, doc ) {
		doc = doc || document;

		var i, val,
			script = doc.createElement( "script" );

		script.text = code;
		if ( node ) {
			for ( i in preservedScriptAttributes ) {

				// Support: Firefox 64+, Edge 18+
				// Some browsers don't support the "nonce" property on scripts.
				// On the other hand, just using `getAttribute` is not enough as
				// the `nonce` attribute is reset to an empty string whenever it
				// becomes browsing-context connected.
				// See https://github.com/whatwg/html/issues/2369
				// See https://html.spec.whatwg.org/#nonce-attributes
				// The `node.getAttribute` check was added for the sake of
				// `jQuery.globalEval` so that it can fake a nonce-containing node
				// via an object.
				val = node[ i ] || node.getAttribute && node.getAttribute( i );
				if ( val ) {
					script.setAttribute( i, val );
				}
			}
		}
		doc.head.appendChild( script ).parentNode.removeChild( script );
	}


function toType( obj ) {
	if ( obj == null ) {
		return obj + "";
	}

	// Support: Android <=2.3 only (functionish RegExp)
	return typeof obj === "object" || typeof obj === "function" ?
		class2type[ toString.call( obj ) ] || "object" :
		typeof obj;
}
/* global Symbol */
// Defining this global in .eslintrc.json would create a danger of using the global
// unguarded in another place, it seems safer to define global only for this module



var
	version = "3.5.1",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	};

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {

		// Return all the elements in a clean array
		if ( num == null ) {
			return slice.call( this );
		}

		// Return just the one element from the set
		return num < 0 ? this[ num + this.length ] : this[ num ];
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	even: function() {
		return this.pushStack( jQuery.grep( this, function( _elem, i ) {
			return ( i + 1 ) % 2;
		} ) );
	},

	odd: function() {
		return this.pushStack( jQuery.grep( this, function( _elem, i ) {
			return i % 2;
		} ) );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction( target ) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				copy = options[ name ];

				// Prevent Object.prototype pollution
				// Prevent never-ending loop
				if ( name === "__proto__" || target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = Array.isArray( copy ) ) ) ) {
					src = target[ name ];

					// Ensure proper type for the source value
					if ( copyIsArray && !Array.isArray( src ) ) {
						clone = [];
					} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {
						clone = {};
					} else {
						clone = src;
					}
					copyIsArray = false;

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isPlainObject: function( obj ) {
		var proto, Ctor;

		// Detect obvious negatives
		// Use toString instead of jQuery.type to catch host objects
		if ( !obj || toString.call( obj ) !== "[object Object]" ) {
			return false;
		}

		proto = getProto( obj );

		// Objects with no prototype (e.g., `Object.create( null )`) are plain
		if ( !proto ) {
			return true;
		}

		// Objects with prototype are plain iff they were constructed by a global Object function
		Ctor = hasOwn.call( proto, "constructor" ) && proto.constructor;
		return typeof Ctor === "function" && fnToString.call( Ctor ) === ObjectFunctionString;
	},

	isEmptyObject: function( obj ) {
		var name;

		for ( name in obj ) {
			return false;
		}
		return true;
	},

	// Evaluates a script in a provided context; falls back to the global one
	// if not specified.
	globalEval: function( code, options, doc ) {
		DOMEval( code, { nonce: options && options.nonce }, doc );
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	// Support: Android <=4.0 only, PhantomJS 1 only
	// push.apply(_, arraylike) throws on ancient WebKit
	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return flat( ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];
}

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
function( _i, name ) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
} );

function isArrayLike( obj ) {

	// Support: real iOS 8.2 only (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = toType( obj );

	if ( isFunction( obj ) || isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
( function( window ) {
var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	nonnativeSelectorCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// Instance methods
	hasOwn = ( {} ).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	pushNative = arr.push,
	push = arr.push,
	slice = arr.slice,

	// Use a stripped-down indexOf as it's faster than native
	// https://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[ i ] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|" +
		"ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram
	identifier = "(?:\\\\[\\da-fA-F]{1,6}" + whitespace +
		"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +

		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +

		// "Attribute values must be CSS identifiers [capture 5]
		// or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" +
		whitespace + "*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +

		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +

		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +

		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" +
		whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace +
		"*" ),
	rdescend = new RegExp( whitespace + "|>" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" +
			whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" +
			whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),

		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace +
			"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace +
			"*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rhtml = /HTML$/i,
	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,

	// CSS escapes
	// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\[\\da-fA-F]{1,6}" + whitespace + "?|\\\\([^\\r\\n\\f])", "g" ),
	funescape = function( escape, nonHex ) {
		var high = "0x" + escape.slice( 1 ) - 0x10000;

		return nonHex ?

			// Strip the backslash prefix from a non-hex escape sequence
			nonHex :

			// Replace a hexadecimal escape sequence with the encoded Unicode code point
			// Support: IE <=11+
			// For values outside the Basic Multilingual Plane (BMP), manually construct a
			// surrogate pair
			high < 0 ?
				String.fromCharCode( high + 0x10000 ) :
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// CSS string/identifier serialization
	// https://drafts.csswg.org/cssom/#common-serializing-idioms
	rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
	fcssescape = function( ch, asCodePoint ) {
		if ( asCodePoint ) {

			// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
			if ( ch === "\0" ) {
				return "\uFFFD";
			}

			// Control characters and (dependent upon position) numbers get escaped as code points
			return ch.slice( 0, -1 ) + "\\" +
				ch.charCodeAt( ch.length - 1 ).toString( 16 ) + " ";
		}

		// Other potentially-special ASCII characters get backslash-escaped
		return "\\" + ch;
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	},

	inDisabledFieldset = addCombinator(
		function( elem ) {
			return elem.disabled === true && elem.nodeName.toLowerCase() === "fieldset";
		},
		{ dir: "parentNode", next: "legend" }
	);

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		( arr = slice.call( preferredDoc.childNodes ) ),
		preferredDoc.childNodes
	);

	// Support: Android<4.0
	// Detect silently failing push.apply
	// eslint-disable-next-line no-unused-expressions
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			pushNative.apply( target, slice.call( els ) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;

			// Can't trust NodeList.length
			while ( ( target[ j++ ] = els[ i++ ] ) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {
		setDocument( context );
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {

				// ID selector
				if ( ( m = match[ 1 ] ) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( ( elem = context.getElementById( m ) ) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && ( elem = newContext.getElementById( m ) ) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[ 2 ] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( ( m = match[ 3 ] ) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!nonnativeSelectorCache[ selector + " " ] &&
				( !rbuggyQSA || !rbuggyQSA.test( selector ) ) &&

				// Support: IE 8 only
				// Exclude object elements
				( nodeType !== 1 || context.nodeName.toLowerCase() !== "object" ) ) {

				newSelector = selector;
				newContext = context;

				// qSA considers elements outside a scoping root when evaluating child or
				// descendant combinators, which is not what we want.
				// In such cases, we work around the behavior by prefixing every selector in the
				// list with an ID selector referencing the scope context.
				// The technique has to be used as well when a leading combinator is used
				// as such selectors are not recognized by querySelectorAll.
				// Thanks to Andrew Dupont for this technique.
				if ( nodeType === 1 &&
					( rdescend.test( selector ) || rcombinators.test( selector ) ) ) {

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;

					// We can use :scope instead of the ID hack if the browser
					// supports it & if we're not changing the context.
					if ( newContext !== context || !support.scope ) {

						// Capture the context ID, setting it first if necessary
						if ( ( nid = context.getAttribute( "id" ) ) ) {
							nid = nid.replace( rcssescape, fcssescape );
						} else {
							context.setAttribute( "id", ( nid = expando ) );
						}
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					while ( i-- ) {
						groups[ i ] = ( nid ? "#" + nid : ":scope" ) + " " +
							toSelector( groups[ i ] );
					}
					newSelector = groups.join( "," );
				}

				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch ( qsaError ) {
					nonnativeSelectorCache( selector, true );
				} finally {
					if ( nid === expando ) {
						context.removeAttribute( "id" );
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {

		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {

			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return ( cache[ key + " " ] = value );
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created element and returns a boolean result
 */
function assert( fn ) {
	var el = document.createElement( "fieldset" );

	try {
		return !!fn( el );
	} catch ( e ) {
		return false;
	} finally {

		// Remove from its parent by default
		if ( el.parentNode ) {
			el.parentNode.removeChild( el );
		}

		// release memory in IE
		el = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split( "|" ),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[ i ] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			a.sourceIndex - b.sourceIndex;

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( ( cur = cur.nextSibling ) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return ( name === "input" || name === "button" ) && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for :enabled/:disabled
 * @param {Boolean} disabled true for :disabled; false for :enabled
 */
function createDisabledPseudo( disabled ) {

	// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
	return function( elem ) {

		// Only certain elements can match :enabled or :disabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
		if ( "form" in elem ) {

			// Check for inherited disabledness on relevant non-disabled elements:
			// * listed form-associated elements in a disabled fieldset
			//   https://html.spec.whatwg.org/multipage/forms.html#category-listed
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
			// * option elements in a disabled optgroup
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
			// All such elements have a "form" property.
			if ( elem.parentNode && elem.disabled === false ) {

				// Option elements defer to a parent optgroup if present
				if ( "label" in elem ) {
					if ( "label" in elem.parentNode ) {
						return elem.parentNode.disabled === disabled;
					} else {
						return elem.disabled === disabled;
					}
				}

				// Support: IE 6 - 11
				// Use the isDisabled shortcut property to check for disabled fieldset ancestors
				return elem.isDisabled === disabled ||

					// Where there is no isDisabled, check manually
					/* jshint -W018 */
					elem.isDisabled !== !disabled &&
					inDisabledFieldset( elem ) === disabled;
			}

			return elem.disabled === disabled;

		// Try to winnow out elements that can't be disabled before trusting the disabled property.
		// Some victims get caught in our net (label, legend, menu, track), but it shouldn't
		// even exist on them, let alone have a boolean value.
		} else if ( "label" in elem ) {
			return elem.disabled === disabled;
		}

		// Remaining elements are neither :enabled nor :disabled
		return false;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction( function( argument ) {
		argument = +argument;
		return markFunction( function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ ( j = matchIndexes[ i ] ) ] ) {
					seed[ j ] = !( matches[ j ] = seed[ j ] );
				}
			}
		} );
	} );
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	var namespace = elem.namespaceURI,
		docElem = ( elem.ownerDocument || elem ).documentElement;

	// Support: IE <=8
	// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes
	// https://bugs.jquery.com/ticket/4833
	return !rhtml.test( namespace || docElem && docElem.nodeName || "HTML" );
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, subWindow,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9 - 11+, Edge 12 - 18+
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( preferredDoc != document &&
		( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {

		// Support: IE 11, Edge
		if ( subWindow.addEventListener ) {
			subWindow.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( subWindow.attachEvent ) {
			subWindow.attachEvent( "onunload", unloadHandler );
		}
	}

	// Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,
	// Safari 4 - 5 only, Opera <=11.6 - 12.x only
	// IE/Edge & older browsers don't support the :scope pseudo-class.
	// Support: Safari 6.0 only
	// Safari 6.0 supports :scope but it's an alias of :root there.
	support.scope = assert( function( el ) {
		docElem.appendChild( el ).appendChild( document.createElement( "div" ) );
		return typeof el.querySelectorAll !== "undefined" &&
			!el.querySelectorAll( ":scope fieldset div" ).length;
	} );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert( function( el ) {
		el.className = "i";
		return !el.getAttribute( "className" );
	} );

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert( function( el ) {
		el.appendChild( document.createComment( "" ) );
		return !el.getElementsByTagName( "*" ).length;
	} );

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programmatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert( function( el ) {
		docElem.appendChild( el ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	} );

	// ID filter and find
	if ( support.getById ) {
		Expr.filter[ "ID" ] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute( "id" ) === attrId;
			};
		};
		Expr.find[ "ID" ] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var elem = context.getElementById( id );
				return elem ? [ elem ] : [];
			}
		};
	} else {
		Expr.filter[ "ID" ] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode( "id" );
				return node && node.value === attrId;
			};
		};

		// Support: IE 6 - 7 only
		// getElementById is not reliable as a find shortcut
		Expr.find[ "ID" ] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var node, i, elems,
					elem = context.getElementById( id );

				if ( elem ) {

					// Verify the id attribute
					node = elem.getAttributeNode( "id" );
					if ( node && node.value === id ) {
						return [ elem ];
					}

					// Fall back on getElementsByName
					elems = context.getElementsByName( id );
					i = 0;
					while ( ( elem = elems[ i++ ] ) ) {
						node = elem.getAttributeNode( "id" );
						if ( node && node.value === id ) {
							return [ elem ];
						}
					}
				}

				return [];
			}
		};
	}

	// Tag
	Expr.find[ "TAG" ] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,

				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( ( elem = results[ i++ ] ) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find[ "CLASS" ] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See https://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( ( support.qsa = rnative.test( document.querySelectorAll ) ) ) {

		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert( function( el ) {

			var input;

			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// https://bugs.jquery.com/ticket/12359
			docElem.appendChild( el ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( el.querySelectorAll( "[msallowcapture^='']" ).length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !el.querySelectorAll( "[selected]" ).length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !el.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push( "~=" );
			}

			// Support: IE 11+, Edge 15 - 18+
			// IE 11/Edge don't find elements on a `[name='']` query in some cases.
			// Adding a temporary attribute to the document before the selection works
			// around the issue.
			// Interestingly, IE 10 & older don't seem to have the issue.
			input = document.createElement( "input" );
			input.setAttribute( "name", "" );
			el.appendChild( input );
			if ( !el.querySelectorAll( "[name='']" ).length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*name" + whitespace + "*=" +
					whitespace + "*(?:''|\"\")" );
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !el.querySelectorAll( ":checked" ).length ) {
				rbuggyQSA.push( ":checked" );
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibling-combinator selector` fails
			if ( !el.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push( ".#.+[+~]" );
			}

			// Support: Firefox <=3.6 - 5 only
			// Old Firefox doesn't throw on a badly-escaped identifier.
			el.querySelectorAll( "\\\f" );
			rbuggyQSA.push( "[\\r\\n\\f]" );
		} );

		assert( function( el ) {
			el.innerHTML = "<a href='' disabled='disabled'></a>" +
				"<select disabled='disabled'><option/></select>";

			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement( "input" );
			input.setAttribute( "type", "hidden" );
			el.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( el.querySelectorAll( "[name=d]" ).length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( el.querySelectorAll( ":enabled" ).length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: IE9-11+
			// IE's :disabled selector does not pick up the children of disabled fieldsets
			docElem.appendChild( el ).disabled = true;
			if ( el.querySelectorAll( ":disabled" ).length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: Opera 10 - 11 only
			// Opera 10-11 does not throw on post-comma invalid pseudos
			el.querySelectorAll( "*,:x" );
			rbuggyQSA.push( ",.*:" );
		} );
	}

	if ( ( support.matchesSelector = rnative.test( ( matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector ) ) ) ) {

		assert( function( el ) {

			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( el, "*" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( el, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		} );
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( "|" ) );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join( "|" ) );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			) );
		} :
		function( a, b ) {
			if ( b ) {
				while ( ( b = b.parentNode ) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		// Support: IE 11+, Edge 17 - 18+
		// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
		// two documents; shallow comparisons work.
		// eslint-disable-next-line eqeqeq
		compare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {

			// Choose the first element that is related to our preferred document
			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			// eslint-disable-next-line eqeqeq
			if ( a == document || a.ownerDocument == preferredDoc &&
				contains( preferredDoc, a ) ) {
				return -1;
			}

			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			// eslint-disable-next-line eqeqeq
			if ( b == document || b.ownerDocument == preferredDoc &&
				contains( preferredDoc, b ) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {

		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {

			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			/* eslint-disable eqeqeq */
			return a == document ? -1 :
				b == document ? 1 :
				/* eslint-enable eqeqeq */
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( ( cur = cur.parentNode ) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( ( cur = cur.parentNode ) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[ i ] === bp[ i ] ) {
			i++;
		}

		return i ?

			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[ i ], bp[ i ] ) :

			// Otherwise nodes in our document sort first
			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			/* eslint-disable eqeqeq */
			ap[ i ] == preferredDoc ? -1 :
			bp[ i ] == preferredDoc ? 1 :
			/* eslint-enable eqeqeq */
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	setDocument( elem );

	if ( support.matchesSelector && documentIsHTML &&
		!nonnativeSelectorCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||

				// As well, disconnected nodes are said to be in a document
				// fragment in IE 9
				elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch ( e ) {
			nonnativeSelectorCache( expr, true );
		}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {

	// Set document vars if needed
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( ( context.ownerDocument || context ) != document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {

	// Set document vars if needed
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( ( elem.ownerDocument || elem ) != document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],

		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			( val = elem.getAttributeNode( name ) ) && val.specified ?
				val.value :
				null;
};

Sizzle.escape = function( sel ) {
	return ( sel + "" ).replace( rcssescape, fcssescape );
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( ( elem = results[ i++ ] ) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {

		// If no nodeType, this is expected to be an array
		while ( ( node = elem[ i++ ] ) ) {

			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {

		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {

			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}

	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[ 1 ] = match[ 1 ].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[ 3 ] = ( match[ 3 ] || match[ 4 ] ||
				match[ 5 ] || "" ).replace( runescape, funescape );

			if ( match[ 2 ] === "~=" ) {
				match[ 3 ] = " " + match[ 3 ] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {

			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[ 1 ] = match[ 1 ].toLowerCase();

			if ( match[ 1 ].slice( 0, 3 ) === "nth" ) {

				// nth-* requires argument
				if ( !match[ 3 ] ) {
					Sizzle.error( match[ 0 ] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[ 4 ] = +( match[ 4 ] ?
					match[ 5 ] + ( match[ 6 ] || 1 ) :
					2 * ( match[ 3 ] === "even" || match[ 3 ] === "odd" ) );
				match[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === "odd" );

				// other types prohibit arguments
			} else if ( match[ 3 ] ) {
				Sizzle.error( match[ 0 ] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[ 6 ] && match[ 2 ];

			if ( matchExpr[ "CHILD" ].test( match[ 0 ] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[ 3 ] ) {
				match[ 2 ] = match[ 4 ] || match[ 5 ] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&

				// Get excess from tokenize (recursively)
				( excess = tokenize( unquoted, true ) ) &&

				// advance to the next closing parenthesis
				( excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length ) ) {

				// excess is a negative index
				match[ 0 ] = match[ 0 ].slice( 0, excess );
				match[ 2 ] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() {
					return true;
				} :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				( pattern = new RegExp( "(^|" + whitespace +
					")" + className + "(" + whitespace + "|$)" ) ) && classCache(
						className, function( elem ) {
							return pattern.test(
								typeof elem.className === "string" && elem.className ||
								typeof elem.getAttribute !== "undefined" &&
									elem.getAttribute( "class" ) ||
								""
							);
				} );
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				/* eslint-disable max-len */

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
				/* eslint-enable max-len */

			};
		},

		"CHILD": function( type, what, _argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, _context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( ( node = node[ dir ] ) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}

								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || ( node[ expando ] = {} );

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								( outerCache[ node.uniqueID ] = {} );

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( ( node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								( diff = nodeIndex = 0 ) || start.pop() ) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {

							// Use previously-cached element index if available
							if ( useCache ) {

								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || ( node[ expando ] = {} );

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									( outerCache[ node.uniqueID ] = {} );

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {

								// Use the same loop as above to seek `elem` from the start
								while ( ( node = ++nodeIndex && node && node[ dir ] ||
									( diff = nodeIndex = 0 ) || start.pop() ) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] ||
												( node[ expando ] = {} );

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												( outerCache[ node.uniqueID ] = {} );

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {

			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction( function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[ i ] );
							seed[ idx ] = !( matches[ idx ] = matched[ i ] );
						}
					} ) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {

		// Potentially complex pseudos
		"not": markFunction( function( selector ) {

			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction( function( seed, matches, _context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( ( elem = unmatched[ i ] ) ) {
							seed[ i ] = !( matches[ i ] = elem );
						}
					}
				} ) :
				function( elem, _context, xml ) {
					input[ 0 ] = elem;
					matcher( input, null, xml, results );

					// Don't keep the element (issue #299)
					input[ 0 ] = null;
					return !results.pop();
				};
		} ),

		"has": markFunction( function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		} ),

		"contains": markFunction( function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;
			};
		} ),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {

			// lang value must be a valid identifier
			if ( !ridentifier.test( lang || "" ) ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( ( elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute( "xml:lang" ) || elem.getAttribute( "lang" ) ) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );
				return false;
			};
		} ),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement &&
				( !document.hasFocus || document.hasFocus() ) &&
				!!( elem.type || elem.href || ~elem.tabIndex );
		},

		// Boolean properties
		"enabled": createDisabledPseudo( false ),
		"disabled": createDisabledPseudo( true ),

		"checked": function( elem ) {

			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return ( nodeName === "input" && !!elem.checked ) ||
				( nodeName === "option" && !!elem.selected );
		},

		"selected": function( elem ) {

			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				// eslint-disable-next-line no-unused-expressions
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {

			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos[ "empty" ]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( ( attr = elem.getAttribute( "type" ) ) == null ||
					attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo( function() {
			return [ 0 ];
		} ),

		"last": createPositionalPseudo( function( _matchIndexes, length ) {
			return [ length - 1 ];
		} ),

		"eq": createPositionalPseudo( function( _matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		} ),

		"even": createPositionalPseudo( function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} ),

		"odd": createPositionalPseudo( function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} ),

		"lt": createPositionalPseudo( function( matchIndexes, length, argument ) {
			var i = argument < 0 ?
				argument + length :
				argument > length ?
					length :
					argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} ),

		"gt": createPositionalPseudo( function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} )
	}
};

Expr.pseudos[ "nth" ] = Expr.pseudos[ "eq" ];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || ( match = rcomma.exec( soFar ) ) ) {
			if ( match ) {

				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[ 0 ].length ) || soFar;
			}
			groups.push( ( tokens = [] ) );
		}

		matched = false;

		// Combinators
		if ( ( match = rcombinators.exec( soFar ) ) ) {
			matched = match.shift();
			tokens.push( {
				value: matched,

				// Cast descendant combinators to space
				type: match[ 0 ].replace( rtrim, " " )
			} );
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||
				( match = preFilters[ type ]( match ) ) ) ) {
				matched = match.shift();
				tokens.push( {
					value: matched,
					type: type,
					matches: match
				} );
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :

			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[ i ].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		skip = combinator.next,
		key = skip || dir,
		checkNonElements = base && key === "parentNode",
		doneName = done++;

	return combinator.first ?

		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( ( elem = elem[ dir ] ) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
			return false;
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( ( elem = elem[ dir ] ) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( ( elem = elem[ dir ] ) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || ( elem[ expando ] = {} );

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] ||
							( outerCache[ elem.uniqueID ] = {} );

						if ( skip && skip === elem.nodeName.toLowerCase() ) {
							elem = elem[ dir ] || elem;
						} else if ( ( oldCache = uniqueCache[ key ] ) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return ( newCache[ 2 ] = oldCache[ 2 ] );
						} else {

							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ key ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {
								return true;
							}
						}
					}
				}
			}
			return false;
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[ i ]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[ 0 ];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[ i ], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( ( elem = unmatched[ i ] ) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction( function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts(
				selector || "*",
				context.nodeType ? [ context ] : context,
				[]
			),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?

				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( ( elem = temp[ i ] ) ) {
					matcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {

					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( ( elem = matcherOut[ i ] ) ) {

							// Restore matcherIn since elem is not yet a final match
							temp.push( ( matcherIn[ i ] = elem ) );
						}
					}
					postFinder( null, ( matcherOut = [] ), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( ( elem = matcherOut[ i ] ) &&
						( temp = postFinder ? indexOf( seed, elem ) : preMap[ i ] ) > -1 ) {

						seed[ temp ] = !( results[ temp ] = elem );
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	} );
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[ 0 ].type ],
		implicitRelative = leadingRelative || Expr.relative[ " " ],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				( checkContext = context ).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );

			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {
			matchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];
		} else {
			matcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {

				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[ j ].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(

					// If the preceding token was a descendant combinator, insert an implicit any-element `*`
					tokens
						.slice( 0, i - 1 )
						.concat( { value: tokens[ i - 2 ].type === " " ? "*" : "" } )
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,

				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find[ "TAG" ]( "*", outermost ),

				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),
				len = elems.length;

			if ( outermost ) {

				// Support: IE 11+, Edge 17 - 18+
				// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
				// two documents; shallow comparisons work.
				// eslint-disable-next-line eqeqeq
				outermostContext = context == document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;

					// Support: IE 11+, Edge 17 - 18+
					// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
					// two documents; shallow comparisons work.
					// eslint-disable-next-line eqeqeq
					if ( !context && elem.ownerDocument != document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( ( matcher = elementMatchers[ j++ ] ) ) {
						if ( matcher( elem, context || document, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {

					// They will have gone through all possible matchers
					if ( ( elem = !matcher && elem ) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( ( matcher = setMatchers[ j++ ] ) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {

					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !( unmatched[ i ] || setMatched[ i ] ) ) {
								setMatched[ i ] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {

		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[ i ] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache(
			selector,
			matcherFromGroupMatchers( elementMatchers, setMatchers )
		);

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( ( selector = compiled.selector || selector ) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[ 0 ] = match[ 0 ].slice( 0 );
		if ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === "ID" &&
			context.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {

			context = ( Expr.find[ "ID" ]( token.matches[ 0 ]
				.replace( runescape, funescape ), context ) || [] )[ 0 ];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr[ "needsContext" ].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[ i ];

			// Abort if we hit a combinator
			if ( Expr.relative[ ( type = token.type ) ] ) {
				break;
			}
			if ( ( find = Expr.find[ type ] ) ) {

				// Search, expanding context for leading sibling combinators
				if ( ( seed = find(
					token.matches[ 0 ].replace( runescape, funescape ),
					rsibling.test( tokens[ 0 ].type ) && testContext( context.parentNode ) ||
						context
				) ) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split( "" ).sort( sortOrder ).join( "" ) === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert( function( el ) {

	// Should return 1, but returns 4 (following)
	return el.compareDocumentPosition( document.createElement( "fieldset" ) ) & 1;
} );

// Support: IE<8
// Prevent attribute/property "interpolation"
// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert( function( el ) {
	el.innerHTML = "<a href='#'></a>";
	return el.firstChild.getAttribute( "href" ) === "#";
} ) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	} );
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert( function( el ) {
	el.innerHTML = "<input/>";
	el.firstChild.setAttribute( "value", "" );
	return el.firstChild.getAttribute( "value" ) === "";
} ) ) {
	addHandle( "value", function( elem, _name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	} );
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert( function( el ) {
	return el.getAttribute( "disabled" ) == null;
} ) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
				( val = elem.getAttributeNode( name ) ) && val.specified ?
					val.value :
					null;
		}
	} );
}

return Sizzle;

} )( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;

// Deprecated
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;
jQuery.escapeSelector = Sizzle.escape;




var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;



function nodeName( elem, name ) {

  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();

};
var rsingleTag = ( /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i );



// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			return !!qualifier.call( elem, i, elem ) !== not;
		} );
	}

	// Single element
	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );
	}

	// Arraylike of elements (jQuery, arguments, Array)
	if ( typeof qualifier !== "string" ) {
		return jQuery.grep( elements, function( elem ) {
			return ( indexOf.call( qualifier, elem ) > -1 ) !== not;
		} );
	}

	// Filtered directly for both simple and complex selectors
	return jQuery.filter( qualifier, elements, not );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	if ( elems.length === 1 && elem.nodeType === 1 ) {
		return jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];
	}

	return jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
		return elem.nodeType === 1;
	} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i, ret,
			len = this.length,
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		ret = this.pushStack( [] );

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		return len > 1 ? jQuery.uniqueSort( ret ) : ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	// Shortcut simple #id case for speed
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Method init() accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[ 0 ] === "<" &&
				selector[ selector.length - 1 ] === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					if ( elem ) {

						// Inject the element directly into the jQuery object
						this[ 0 ] = elem;
						this.length = 1;
					}
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( isFunction( selector ) ) {
			return root.ready !== undefined ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter( function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			targets = typeof selectors !== "string" && jQuery( selectors );

		// Positional selectors never match, since there's no _selection_ context
		if ( !rneedsContext.test( selectors ) ) {
			for ( ; i < l; i++ ) {
				for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

					// Always skip document fragments
					if ( cur.nodeType < 11 && ( targets ?
						targets.index( cur ) > -1 :

						// Don't pass non-elements to Sizzle
						cur.nodeType === 1 &&
							jQuery.find.matchesSelector( cur, selectors ) ) ) {

						matched.push( cur );
						break;
					}
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	while ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, _i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, _i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, _i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
		if ( elem.contentDocument != null &&

			// Support: IE 11+
			// <object> elements with no `data` attribute has an object
			// `contentDocument` with a `null` prototype.
			getProto( elem.contentDocument ) ) {

			return elem.contentDocument;
		}

		// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
		// Treat the template element as a regular one in browsers that
		// don't support it.
		if ( nodeName( elem, "template" ) ) {
			elem = elem.content || elem;
		}

		return jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.uniqueSort( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
} );
var rnothtmlwhite = ( /[^\x20\t\r\n\f]+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = locked || options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && toType( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = queue = [];
				if ( !memory && !firing ) {
					list = memory = "";
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


function Identity( v ) {
	return v;
}
function Thrower( ex ) {
	throw ex;
}

function adoptValue( value, resolve, reject, noValue ) {
	var method;

	try {

		// Check for promise aspect first to privilege synchronous behavior
		if ( value && isFunction( ( method = value.promise ) ) ) {
			method.call( value ).done( resolve ).fail( reject );

		// Other thenables
		} else if ( value && isFunction( ( method = value.then ) ) ) {
			method.call( value, resolve, reject );

		// Other non-thenables
		} else {

			// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
			// * false: [ value ].slice( 0 ) => resolve( value )
			// * true: [ value ].slice( 1 ) => resolve()
			resolve.apply( undefined, [ value ].slice( noValue ) );
		}

	// For Promises/A+, convert exceptions into rejections
	// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
	// Deferred#then to conditionally suppress rejection.
	} catch ( value ) {

		// Support: Android 4.0 only
		// Strict mode functions invoked without .call/.apply get global-object context
		reject.apply( undefined, [ value ] );
	}
}

jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, callbacks,
				// ... .then handlers, argument index, [final state]
				[ "notify", "progress", jQuery.Callbacks( "memory" ),
					jQuery.Callbacks( "memory" ), 2 ],
				[ "resolve", "done", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 0, "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 1, "rejected" ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				"catch": function( fn ) {
					return promise.then( null, fn );
				},

				// Keep pipe for back-compat
				pipe: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;

					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( _i, tuple ) {

							// Map tuples (progress, done, fail) to arguments (done, fail, progress)
							var fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];

							// deferred.progress(function() { bind to newDefer or newDefer.notify })
							// deferred.done(function() { bind to newDefer or newDefer.resolve })
							// deferred.fail(function() { bind to newDefer or newDefer.reject })
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},
				then: function( onFulfilled, onRejected, onProgress ) {
					var maxDepth = 0;
					function resolve( depth, deferred, handler, special ) {
						return function() {
							var that = this,
								args = arguments,
								mightThrow = function() {
									var returned, then;

									// Support: Promises/A+ section 2.3.3.3.3
									// https://promisesaplus.com/#point-59
									// Ignore double-resolution attempts
									if ( depth < maxDepth ) {
										return;
									}

									returned = handler.apply( that, args );

									// Support: Promises/A+ section 2.3.1
									// https://promisesaplus.com/#point-48
									if ( returned === deferred.promise() ) {
										throw new TypeError( "Thenable self-resolution" );
									}

									// Support: Promises/A+ sections 2.3.3.1, 3.5
									// https://promisesaplus.com/#point-54
									// https://promisesaplus.com/#point-75
									// Retrieve `then` only once
									then = returned &&

										// Support: Promises/A+ section 2.3.4
										// https://promisesaplus.com/#point-64
										// Only check objects and functions for thenability
										( typeof returned === "object" ||
											typeof returned === "function" ) &&
										returned.then;

									// Handle a returned thenable
									if ( isFunction( then ) ) {

										// Special processors (notify) just wait for resolution
										if ( special ) {
											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special )
											);

										// Normal processors (resolve) also hook into progress
										} else {

											// ...and disregard older resolution values
											maxDepth++;

											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special ),
												resolve( maxDepth, deferred, Identity,
													deferred.notifyWith )
											);
										}

									// Handle all other returned values
									} else {

										// Only substitute handlers pass on context
										// and multiple values (non-spec behavior)
										if ( handler !== Identity ) {
											that = undefined;
											args = [ returned ];
										}

										// Process the value(s)
										// Default process is resolve
										( special || deferred.resolveWith )( that, args );
									}
								},

								// Only normal processors (resolve) catch and reject exceptions
								process = special ?
									mightThrow :
									function() {
										try {
											mightThrow();
										} catch ( e ) {

											if ( jQuery.Deferred.exceptionHook ) {
												jQuery.Deferred.exceptionHook( e,
													process.stackTrace );
											}

											// Support: Promises/A+ section 2.3.3.3.4.1
											// https://promisesaplus.com/#point-61
											// Ignore post-resolution exceptions
											if ( depth + 1 >= maxDepth ) {

												// Only substitute handlers pass on context
												// and multiple values (non-spec behavior)
												if ( handler !== Thrower ) {
													that = undefined;
													args = [ e ];
												}

												deferred.rejectWith( that, args );
											}
										}
									};

							// Support: Promises/A+ section 2.3.3.3.1
							// https://promisesaplus.com/#point-57
							// Re-resolve promises immediately to dodge false rejection from
							// subsequent errors
							if ( depth ) {
								process();
							} else {

								// Call an optional hook to record the stack, in case of exception
								// since it's otherwise lost when execution goes async
								if ( jQuery.Deferred.getStackHook ) {
									process.stackTrace = jQuery.Deferred.getStackHook();
								}
								window.setTimeout( process );
							}
						};
					}

					return jQuery.Deferred( function( newDefer ) {

						// progress_handlers.add( ... )
						tuples[ 0 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onProgress ) ?
									onProgress :
									Identity,
								newDefer.notifyWith
							)
						);

						// fulfilled_handlers.add( ... )
						tuples[ 1 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onFulfilled ) ?
									onFulfilled :
									Identity
							)
						);

						// rejected_handlers.add( ... )
						tuples[ 2 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onRejected ) ?
									onRejected :
									Thrower
							)
						);
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 5 ];

			// promise.progress = list.add
			// promise.done = list.add
			// promise.fail = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(
					function() {

						// state = "resolved" (i.e., fulfilled)
						// state = "rejected"
						state = stateString;
					},

					// rejected_callbacks.disable
					// fulfilled_callbacks.disable
					tuples[ 3 - i ][ 2 ].disable,

					// rejected_handlers.disable
					// fulfilled_handlers.disable
					tuples[ 3 - i ][ 3 ].disable,

					// progress_callbacks.lock
					tuples[ 0 ][ 2 ].lock,

					// progress_handlers.lock
					tuples[ 0 ][ 3 ].lock
				);
			}

			// progress_handlers.fire
			// fulfilled_handlers.fire
			// rejected_handlers.fire
			list.add( tuple[ 3 ].fire );

			// deferred.notify = function() { deferred.notifyWith(...) }
			// deferred.resolve = function() { deferred.resolveWith(...) }
			// deferred.reject = function() { deferred.rejectWith(...) }
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? undefined : this, arguments );
				return this;
			};

			// deferred.notifyWith = list.fireWith
			// deferred.resolveWith = list.fireWith
			// deferred.rejectWith = list.fireWith
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( singleValue ) {
		var

			// count of uncompleted subordinates
			remaining = arguments.length,

			// count of unprocessed arguments
			i = remaining,

			// subordinate fulfillment data
			resolveContexts = Array( i ),
			resolveValues = slice.call( arguments ),

			// the master Deferred
			master = jQuery.Deferred(),

			// subordinate callback factory
			updateFunc = function( i ) {
				return function( value ) {
					resolveContexts[ i ] = this;
					resolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( !( --remaining ) ) {
						master.resolveWith( resolveContexts, resolveValues );
					}
				};
			};

		// Single- and empty arguments are adopted like Promise.resolve
		if ( remaining <= 1 ) {
			adoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,
				!remaining );

			// Use .then() to unwrap secondary thenables (cf. gh-3000)
			if ( master.state() === "pending" ||
				isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {

				return master.then();
			}
		}

		// Multiple arguments are aggregated like Promise.all array elements
		while ( i-- ) {
			adoptValue( resolveValues[ i ], updateFunc( i ), master.reject );
		}

		return master.promise();
	}
} );


// These usually indicate a programmer mistake during development,
// warn about them ASAP rather than swallowing them by default.
var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;

jQuery.Deferred.exceptionHook = function( error, stack ) {

	// Support: IE 8 - 9 only
	// Console exists when dev tools are open, which can happen at any time
	if ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {
		window.console.warn( "jQuery.Deferred exception: " + error.message, error.stack, stack );
	}
};




jQuery.readyException = function( error ) {
	window.setTimeout( function() {
		throw error;
	} );
};




// The deferred used on DOM ready
var readyList = jQuery.Deferred();

jQuery.fn.ready = function( fn ) {

	readyList
		.then( fn )

		// Wrap jQuery.readyException in a function so that the lookup
		// happens at the time of error handling instead of callback
		// registration.
		.catch( function( error ) {
			jQuery.readyException( error );
		} );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );
	}
} );

jQuery.ready.then = readyList.then;

// The ready event handler and self cleanup method
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed );
	window.removeEventListener( "load", completed );
	jQuery.ready();
}

// Catch cases where $(document).ready() is called
// after the browser event has already occurred.
// Support: IE <=9 - 10 only
// Older IE sometimes signals "interactive" too soon
if ( document.readyState === "complete" ||
	( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

	// Handle it asynchronously to allow scripts the opportunity to delay ready
	window.setTimeout( jQuery.ready );

} else {

	// Use the handy event callback
	document.addEventListener( "DOMContentLoaded", completed );

	// A fallback to window.onload, that will always work
	window.addEventListener( "load", completed );
}




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( toType( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, _key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn(
					elems[ i ], key, raw ?
					value :
					value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	if ( chainable ) {
		return elems;
	}

	// Gets
	if ( bulk ) {
		return fn.call( elems );
	}

	return len ? fn( elems[ 0 ], key ) : emptyGet;
};


// Matches dashed string for camelizing
var rmsPrefix = /^-ms-/,
	rdashAlpha = /-([a-z])/g;

// Used by camelCase as callback to replace()
function fcamelCase( _all, letter ) {
	return letter.toUpperCase();
}

// Convert dashed to camelCase; used by the css and data modules
// Support: IE <=9 - 11, Edge 12 - 15
// Microsoft forgot to hump their vendor prefix (#9572)
function camelCase( string ) {
	return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
}
var acceptData = function( owner ) {

	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};




function Data() {
	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;

Data.prototype = {

	cache: function( owner ) {

		// Check if the owner object already has a cache
		var value = owner[ this.expando ];

		// If not, create one
		if ( !value ) {
			value = {};

			// We can accept data for non-element nodes in modern browsers,
			// but we should not, see #8335.
			// Always return an empty object.
			if ( acceptData( owner ) ) {

				// If it is a node unlikely to be stringify-ed or looped over
				// use plain assignment
				if ( owner.nodeType ) {
					owner[ this.expando ] = value;

				// Otherwise secure it in a non-enumerable property
				// configurable must be true to allow the property to be
				// deleted when data is removed
				} else {
					Object.defineProperty( owner, this.expando, {
						value: value,
						configurable: true
					} );
				}
			}
		}

		return value;
	},
	set: function( owner, data, value ) {
		var prop,
			cache = this.cache( owner );

		// Handle: [ owner, key, value ] args
		// Always use camelCase key (gh-2257)
		if ( typeof data === "string" ) {
			cache[ camelCase( data ) ] = value;

		// Handle: [ owner, { properties } ] args
		} else {

			// Copy the properties one-by-one to the cache object
			for ( prop in data ) {
				cache[ camelCase( prop ) ] = data[ prop ];
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		return key === undefined ?
			this.cache( owner ) :

			// Always use camelCase key (gh-2257)
			owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];
	},
	access: function( owner, key, value ) {

		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				( ( key && typeof key === "string" ) && value === undefined ) ) {

			return this.get( owner, key );
		}

		// When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i,
			cache = owner[ this.expando ];

		if ( cache === undefined ) {
			return;
		}

		if ( key !== undefined ) {

			// Support array or space separated string of keys
			if ( Array.isArray( key ) ) {

				// If key is an array of keys...
				// We always set camelCase keys, so remove that.
				key = key.map( camelCase );
			} else {
				key = camelCase( key );

				// If a key with the spaces exists, use it.
				// Otherwise, create an array by matching non-whitespace
				key = key in cache ?
					[ key ] :
					( key.match( rnothtmlwhite ) || [] );
			}

			i = key.length;

			while ( i-- ) {
				delete cache[ key[ i ] ];
			}
		}

		// Remove the expando if there's no more data
		if ( key === undefined || jQuery.isEmptyObject( cache ) ) {

			// Support: Chrome <=35 - 45
			// Webkit & Blink performance suffers when deleting properties
			// from DOM nodes, so set to undefined instead
			// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
			if ( owner.nodeType ) {
				owner[ this.expando ] = undefined;
			} else {
				delete owner[ this.expando ];
			}
		}
	},
	hasData: function( owner ) {
		var cache = owner[ this.expando ];
		return cache !== undefined && !jQuery.isEmptyObject( cache );
	}
};
var dataPriv = new Data();

var dataUser = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /[A-Z]/g;

function getData( data ) {
	if ( data === "true" ) {
		return true;
	}

	if ( data === "false" ) {
		return false;
	}

	if ( data === "null" ) {
		return null;
	}

	// Only convert to a number if it doesn't change the string
	if ( data === +data + "" ) {
		return +data;
	}

	if ( rbrace.test( data ) ) {
		return JSON.parse( data );
	}

	return data;
}

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$&" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = getData( data );
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			dataUser.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend( {
	hasData: function( elem ) {
		return dataUser.hasData( elem ) || dataPriv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return dataUser.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		dataUser.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to dataPriv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return dataPriv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		dataPriv.remove( elem, name );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = dataUser.get( elem );

				if ( elem.nodeType === 1 && !dataPriv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE 11 only
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					dataPriv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				dataUser.set( this, key );
			} );
		}

		return access( this, function( value ) {
			var data;

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {

				// Attempt to get data from the cache
				// The key will always be camelCased in Data
				data = dataUser.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each( function() {

				// We always store the camelCased key
				dataUser.set( this, key, value );
			} );
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each( function() {
			dataUser.remove( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = dataPriv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || Array.isArray( data ) ) {
					queue = dataPriv.access( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return dataPriv.get( elem, key ) || dataPriv.access( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				dataPriv.remove( elem, [ type + "queue", key ] );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = dataPriv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var documentElement = document.documentElement;



	var isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem );
		},
		composed = { composed: true };

	// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only
	// Check attachment across shadow DOM boundaries when possible (gh-3504)
	// Support: iOS 10.0-10.2 only
	// Early iOS 10 versions support `attachShadow` but not `getRootNode`,
	// leading to errors. We need to check for `getRootNode`.
	if ( documentElement.getRootNode ) {
		isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem ) ||
				elem.getRootNode( composed ) === elem.ownerDocument;
		};
	}
var isHiddenWithinTree = function( elem, el ) {

		// isHiddenWithinTree might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;

		// Inline style trumps all
		return elem.style.display === "none" ||
			elem.style.display === "" &&

			// Otherwise, check computed style
			// Support: Firefox <=43 - 45
			// Disconnected elements can have computed display: none, so first confirm that elem is
			// in the document.
			isAttached( elem ) &&

			jQuery.css( elem, "display" ) === "none";
	};



function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted, scale,
		maxIterations = 20,
		currentValue = tween ?
			function() {
				return tween.cur();
			} :
			function() {
				return jQuery.css( elem, prop, "" );
			},
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = elem.nodeType &&
			( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Support: Firefox <=54
		// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
		initial = initial / 2;

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		while ( maxIterations-- ) {

			// Evaluate and update our best guess (doubling guesses that zero out).
			// Finish if the scale equals or crosses 1 (making the old*new product non-positive).
			jQuery.style( elem, prop, initialInUnit + unit );
			if ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {
				maxIterations = 0;
			}
			initialInUnit = initialInUnit / scale;

		}

		initialInUnit = initialInUnit * 2;
		jQuery.style( elem, prop, initialInUnit + unit );

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


var defaultDisplayMap = {};

function getDefaultDisplay( elem ) {
	var temp,
		doc = elem.ownerDocument,
		nodeName = elem.nodeName,
		display = defaultDisplayMap[ nodeName ];

	if ( display ) {
		return display;
	}

	temp = doc.body.appendChild( doc.createElement( nodeName ) );
	display = jQuery.css( temp, "display" );

	temp.parentNode.removeChild( temp );

	if ( display === "none" ) {
		display = "block";
	}
	defaultDisplayMap[ nodeName ] = display;

	return display;
}

function showHide( elements, show ) {
	var display, elem,
		values = [],
		index = 0,
		length = elements.length;

	// Determine new display value for elements that need to change
	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		display = elem.style.display;
		if ( show ) {

			// Since we force visibility upon cascade-hidden elements, an immediate (and slow)
			// check is required in this first loop unless we have a nonempty display value (either
			// inline or about-to-be-restored)
			if ( display === "none" ) {
				values[ index ] = dataPriv.get( elem, "display" ) || null;
				if ( !values[ index ] ) {
					elem.style.display = "";
				}
			}
			if ( elem.style.display === "" && isHiddenWithinTree( elem ) ) {
				values[ index ] = getDefaultDisplay( elem );
			}
		} else {
			if ( display !== "none" ) {
				values[ index ] = "none";

				// Remember what we're overwriting
				dataPriv.set( elem, "display", display );
			}
		}
	}

	// Set the display of the elements in a second loop to avoid constant reflow
	for ( index = 0; index < length; index++ ) {
		if ( values[ index ] != null ) {
			elements[ index ].style.display = values[ index ];
		}
	}

	return elements;
}

jQuery.fn.extend( {
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHiddenWithinTree( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([a-z][^\/\0>\x20\t\r\n\f]*)/i );

var rscriptType = ( /^$|^module$|\/(?:java|ecma)script/i );



( function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Android 4.0 - 4.3 only
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Android <=4.1 only
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE <=11 only
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;

	// Support: IE <=9 only
	// IE <=9 replaces <option> tags with their contents when inserted outside of
	// the select element.
	div.innerHTML = "<option></option>";
	support.option = !!div.lastChild;
} )();


// We have to close these tags to support XHTML (#13200)
var wrapMap = {

	// XHTML parsers do not magically insert elements in the
	// same way that tag soup parsers do. So we cannot shorten
	// this by omitting <tbody> or other required elements.
	thead: [ 1, "<table>", "</table>" ],
	col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	_default: [ 0, "", "" ]
};

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: IE <=9 only
if ( !support.option ) {
	wrapMap.optgroup = wrapMap.option = [ 1, "<select multiple='multiple'>", "</select>" ];
}


function getAll( context, tag ) {

	// Support: IE <=9 - 11 only
	// Use typeof to avoid zero-argument method invocation on host objects (#15151)
	var ret;

	if ( typeof context.getElementsByTagName !== "undefined" ) {
		ret = context.getElementsByTagName( tag || "*" );

	} else if ( typeof context.querySelectorAll !== "undefined" ) {
		ret = context.querySelectorAll( tag || "*" );

	} else {
		ret = [];
	}

	if ( tag === undefined || tag && nodeName( context, tag ) ) {
		return jQuery.merge( [ context ], ret );
	}

	return ret;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		dataPriv.set(
			elems[ i ],
			"globalEval",
			!refElements || dataPriv.get( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/;

function buildFragment( elems, context, scripts, selection, ignored ) {
	var elem, tmp, tag, wrap, attached, j,
		fragment = context.createDocumentFragment(),
		nodes = [],
		i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( toType( elem ) === "object" ) {

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || fragment.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;
				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, tmp.childNodes );

				// Remember the top-level container
				tmp = fragment.firstChild;

				// Ensure the created nodes are orphaned (#12392)
				tmp.textContent = "";
			}
		}
	}

	// Remove wrapper from fragment
	fragment.textContent = "";

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}
			continue;
		}

		attached = isAttached( elem );

		// Append to fragment
		tmp = getAll( fragment.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( attached ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	return fragment;
}


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE <=9 - 11+
// focus() and blur() are asynchronous, except when they are no-op.
// So expect focus to be synchronous when the element is already active,
// and blur to be synchronous when the element is not already active.
// (focus and blur are always synchronous in other supported browsers,
// this just defines when we can count on it).
function expectSync( elem, type ) {
	return ( elem === safeActiveElement() ) === ( type === "focus" );
}

// Support: IE <=9 only
// Accessing document.activeElement can throw unexpectedly
// https://bugs.jquery.com/ticket/13393
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.get( elem );

		// Only attach events to objects that accept data
		if ( !acceptData( elem ) ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Ensure that invalid selectors throw exceptions at attach time
		// Evaluate against documentElement in case elem is a non-element node (e.g., document)
		if ( selector ) {
			jQuery.find.matchesSelector( documentElement, selector );
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = Object.create( null );
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.hasData( elem ) && dataPriv.get( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove data and the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			dataPriv.remove( elem, "handle events" );
		}
	},

	dispatch: function( nativeEvent ) {

		var i, j, ret, matched, handleObj, handlerQueue,
			args = new Array( arguments.length ),

			// Make a writable jQuery.Event from the native event object
			event = jQuery.event.fix( nativeEvent ),

			handlers = (
					dataPriv.get( this, "events" ) || Object.create( null )
				)[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;

		for ( i = 1; i < arguments.length; i++ ) {
			args[ i ] = arguments[ i ];
		}

		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// If the event is namespaced, then each handler is only invoked if it is
				// specially universal or its namespaces are a superset of the event's.
				if ( !event.rnamespace || handleObj.namespace === false ||
					event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, handleObj, sel, matchedHandlers, matchedSelectors,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		if ( delegateCount &&

			// Support: IE <=9
			// Black-hole SVG <use> instance trees (trac-13180)
			cur.nodeType &&

			// Support: Firefox <=42
			// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
			// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
			// Support: IE 11 only
			// ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
			!( event.type === "click" && event.button >= 1 ) ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && !( event.type === "click" && cur.disabled === true ) ) {
					matchedHandlers = [];
					matchedSelectors = {};
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matchedSelectors[ sel ] === undefined ) {
							matchedSelectors[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matchedSelectors[ sel ] ) {
							matchedHandlers.push( handleObj );
						}
					}
					if ( matchedHandlers.length ) {
						handlerQueue.push( { elem: cur, handlers: matchedHandlers } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		cur = this;
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	addProp: function( name, hook ) {
		Object.defineProperty( jQuery.Event.prototype, name, {
			enumerable: true,
			configurable: true,

			get: isFunction( hook ) ?
				function() {
					if ( this.originalEvent ) {
							return hook( this.originalEvent );
					}
				} :
				function() {
					if ( this.originalEvent ) {
							return this.originalEvent[ name ];
					}
				},

			set: function( value ) {
				Object.defineProperty( this, name, {
					enumerable: true,
					configurable: true,
					writable: true,
					value: value
				} );
			}
		} );
	},

	fix: function( originalEvent ) {
		return originalEvent[ jQuery.expando ] ?
			originalEvent :
			new jQuery.Event( originalEvent );
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		click: {

			// Utilize native event to ensure correct state for checkable inputs
			setup: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Claim the first handler
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					// dataPriv.set( el, "click", ... )
					leverageNative( el, "click", returnTrue );
				}

				// Return false to allow normal processing in the caller
				return false;
			},
			trigger: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Force setup before triggering a click
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					leverageNative( el, "click" );
				}

				// Return non-false to allow normal event-path propagation
				return true;
			},

			// For cross-browser consistency, suppress native .click() on links
			// Also prevent it if we're currently inside a leveraged native-event stack
			_default: function( event ) {
				var target = event.target;
				return rcheckableType.test( target.type ) &&
					target.click && nodeName( target, "input" ) &&
					dataPriv.get( target, "click" ) ||
					nodeName( target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	}
};

// Ensure the presence of an event listener that handles manually-triggered
// synthetic events by interrupting progress until reinvoked in response to
// *native* events that it fires directly, ensuring that state changes have
// already occurred before other listeners are invoked.
function leverageNative( el, type, expectSync ) {

	// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add
	if ( !expectSync ) {
		if ( dataPriv.get( el, type ) === undefined ) {
			jQuery.event.add( el, type, returnTrue );
		}
		return;
	}

	// Register the controller as a special universal handler for all event namespaces
	dataPriv.set( el, type, false );
	jQuery.event.add( el, type, {
		namespace: false,
		handler: function( event ) {
			var notAsync, result,
				saved = dataPriv.get( this, type );

			if ( ( event.isTrigger & 1 ) && this[ type ] ) {

				// Interrupt processing of the outer synthetic .trigger()ed event
				// Saved data should be false in such cases, but might be a leftover capture object
				// from an async native handler (gh-4350)
				if ( !saved.length ) {

					// Store arguments for use when handling the inner native event
					// There will always be at least one argument (an event object), so this array
					// will not be confused with a leftover capture object.
					saved = slice.call( arguments );
					dataPriv.set( this, type, saved );

					// Trigger the native event and capture its result
					// Support: IE <=9 - 11+
					// focus() and blur() are asynchronous
					notAsync = expectSync( this, type );
					this[ type ]();
					result = dataPriv.get( this, type );
					if ( saved !== result || notAsync ) {
						dataPriv.set( this, type, false );
					} else {
						result = {};
					}
					if ( saved !== result ) {

						// Cancel the outer synthetic event
						event.stopImmediatePropagation();
						event.preventDefault();
						return result.value;
					}

				// If this is an inner synthetic event for an event with a bubbling surrogate
				// (focus or blur), assume that the surrogate already propagated from triggering the
				// native event and prevent that from happening again here.
				// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the
				// bubbling surrogate propagates *after* the non-bubbling base), but that seems
				// less bad than duplication.
				} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {
					event.stopPropagation();
				}

			// If this is a native event triggered above, everything is now in order
			// Fire an inner synthetic event with the original arguments
			} else if ( saved.length ) {

				// ...and capture the result
				dataPriv.set( this, type, {
					value: jQuery.event.trigger(

						// Support: IE <=9 - 11+
						// Extend with the prototype to reset the above stopImmediatePropagation()
						jQuery.extend( saved[ 0 ], jQuery.Event.prototype ),
						saved.slice( 1 ),
						this
					)
				} );

				// Abort handling of the native event
				event.stopImmediatePropagation();
			}
		}
	} );
}

jQuery.removeEvent = function( elem, type, handle ) {

	// This "if" is needed for plain objects
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle );
	}
};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: Android <=2.3 only
				src.returnValue === false ?
			returnTrue :
			returnFalse;

		// Create target properties
		// Support: Safari <=6 - 7 only
		// Target should not be a text node (#504, #13143)
		this.target = ( src.target && src.target.nodeType === 3 ) ?
			src.target.parentNode :
			src.target;

		this.currentTarget = src.currentTarget;
		this.relatedTarget = src.relatedTarget;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || Date.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,
	isSimulated: false,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && !this.isSimulated ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Includes all common event props including KeyEvent and MouseEvent specific props
jQuery.each( {
	altKey: true,
	bubbles: true,
	cancelable: true,
	changedTouches: true,
	ctrlKey: true,
	detail: true,
	eventPhase: true,
	metaKey: true,
	pageX: true,
	pageY: true,
	shiftKey: true,
	view: true,
	"char": true,
	code: true,
	charCode: true,
	key: true,
	keyCode: true,
	button: true,
	buttons: true,
	clientX: true,
	clientY: true,
	offsetX: true,
	offsetY: true,
	pointerId: true,
	pointerType: true,
	screenX: true,
	screenY: true,
	targetTouches: true,
	toElement: true,
	touches: true,

	which: function( event ) {
		var button = event.button;

		// Add which for key events
		if ( event.which == null && rkeyEvent.test( event.type ) ) {
			return event.charCode != null ? event.charCode : event.keyCode;
		}

		// Add which for click: 1 === left; 2 === middle; 3 === right
		if ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {
			if ( button & 1 ) {
				return 1;
			}

			if ( button & 2 ) {
				return 3;
			}

			if ( button & 4 ) {
				return 2;
			}

			return 0;
		}

		return event.which;
	}
}, jQuery.event.addProp );

jQuery.each( { focus: "focusin", blur: "focusout" }, function( type, delegateType ) {
	jQuery.event.special[ type ] = {

		// Utilize native event if possible so blur/focus sequence is correct
		setup: function() {

			// Claim the first handler
			// dataPriv.set( this, "focus", ... )
			// dataPriv.set( this, "blur", ... )
			leverageNative( this, type, expectSync );

			// Return false to allow normal processing in the caller
			return false;
		},
		trigger: function() {

			// Force setup before trigger
			leverageNative( this, type );

			// Return non-false to allow normal event-path propagation
			return true;
		},

		delegateType: delegateType
	};
} );

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://bugs.chromium.org/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	}
} );


var

	// Support: IE <=10 - 11, Edge 12 - 13 only
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

// Prefer a tbody over its parent table for containing new rows
function manipulationTarget( elem, content ) {
	if ( nodeName( elem, "table" ) &&
		nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ) {

		return jQuery( elem ).children( "tbody" )[ 0 ] || elem;
	}

	return elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( elem.getAttribute( "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	if ( ( elem.type || "" ).slice( 0, 5 ) === "true/" ) {
		elem.type = elem.type.slice( 5 );
	} else {
		elem.removeAttribute( "type" );
	}

	return elem;
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( dataPriv.hasData( src ) ) {
		pdataOld = dataPriv.get( src );
		events = pdataOld.events;

		if ( events ) {
			dataPriv.remove( dest, "handle events" );

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( dataUser.hasData( src ) ) {
		udataOld = dataUser.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		dataUser.set( dest, udataCur );
	}
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = flat( args );

	var fragment, first, scripts, hasScripts, node, doc,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		valueIsFunction = isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( valueIsFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( valueIsFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android <=4.0 only, PhantomJS 1 only
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!dataPriv.access( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src && ( node.type || "" ).toLowerCase()  !== "module" ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl && !node.noModule ) {
								jQuery._evalUrl( node.src, {
									nonce: node.nonce || node.getAttribute( "nonce" )
								}, doc );
							}
						} else {
							DOMEval( node.textContent.replace( rcleanScript, "" ), node, doc );
						}
					}
				}
			}
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		nodes = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = nodes[ i ] ) != null; i++ ) {
		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && isAttached( node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html;
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = isAttached( elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems ) {
		var data, elem, type,
			special = jQuery.event.special,
			i = 0;

		for ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {
			if ( acceptData( elem ) ) {
				if ( ( data = elem[ dataPriv.expando ] ) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataPriv.expando ] = undefined;
				}
				if ( elem[ dataUser.expando ] ) {

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataUser.expando ] = undefined;
				}
			}
		}
	}
} );

jQuery.fn.extend( {
	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each( function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				} );
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: Android <=4.0 only, PhantomJS 1 only
			// .get() because push.apply(_, arraylike) throws on ancient WebKit
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );
var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {

		// Support: IE <=11 only, Firefox <=30 (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

var swap = function( elem, options, callback ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.call( elem );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var rboxStyle = new RegExp( cssExpand.join( "|" ), "i" );



( function() {

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computeStyleTests() {

		// This is a singleton, we need to execute it only once
		if ( !div ) {
			return;
		}

		container.style.cssText = "position:absolute;left:-11111px;width:60px;" +
			"margin-top:1px;padding:0;border:0";
		div.style.cssText =
			"position:relative;display:block;box-sizing:border-box;overflow:scroll;" +
			"margin:auto;border:1px;padding:1px;" +
			"width:60%;top:1%";
		documentElement.appendChild( container ).appendChild( div );

		var divStyle = window.getComputedStyle( div );
		pixelPositionVal = divStyle.top !== "1%";

		// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
		reliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;

		// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
		// Some styles come back with percentage values, even though they shouldn't
		div.style.right = "60%";
		pixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;

		// Support: IE 9 - 11 only
		// Detect misreporting of content dimensions for box-sizing:border-box elements
		boxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;

		// Support: IE 9 only
		// Detect overflow:scroll screwiness (gh-3699)
		// Support: Chrome <=64
		// Don't get tricked when zoom affects offsetWidth (gh-4029)
		div.style.position = "absolute";
		scrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;

		documentElement.removeChild( container );

		// Nullify the div so it wouldn't be stored in the memory and
		// it will also be a sign that checks already performed
		div = null;
	}

	function roundPixelMeasures( measure ) {
		return Math.round( parseFloat( measure ) );
	}

	var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,
		reliableTrDimensionsVal, reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	// Support: IE <=9 - 11 only
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	jQuery.extend( support, {
		boxSizingReliable: function() {
			computeStyleTests();
			return boxSizingReliableVal;
		},
		pixelBoxStyles: function() {
			computeStyleTests();
			return pixelBoxStylesVal;
		},
		pixelPosition: function() {
			computeStyleTests();
			return pixelPositionVal;
		},
		reliableMarginLeft: function() {
			computeStyleTests();
			return reliableMarginLeftVal;
		},
		scrollboxSize: function() {
			computeStyleTests();
			return scrollboxSizeVal;
		},

		// Support: IE 9 - 11+, Edge 15 - 18+
		// IE/Edge misreport `getComputedStyle` of table rows with width/height
		// set in CSS while `offset*` properties report correct values.
		// Behavior in IE 9 is more subtle than in newer versions & it passes
		// some versions of this test; make sure not to make it pass there!
		reliableTrDimensions: function() {
			var table, tr, trChild, trStyle;
			if ( reliableTrDimensionsVal == null ) {
				table = document.createElement( "table" );
				tr = document.createElement( "tr" );
				trChild = document.createElement( "div" );

				table.style.cssText = "position:absolute;left:-11111px";
				tr.style.height = "1px";
				trChild.style.height = "9px";

				documentElement
					.appendChild( table )
					.appendChild( tr )
					.appendChild( trChild );

				trStyle = window.getComputedStyle( tr );
				reliableTrDimensionsVal = parseInt( trStyle.height ) > 3;

				documentElement.removeChild( table );
			}
			return reliableTrDimensionsVal;
		}
	} );
} )();


function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,

		// Support: Firefox 51+
		// Retrieving style before computed somehow
		// fixes an issue with getting wrong values
		// on detached elements
		style = elem.style;

	computed = computed || getStyles( elem );

	// getPropertyValue is needed for:
	//   .css('filter') (IE 9 only, #12537)
	//   .css('--customProperty) (#3144)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];

		if ( ret === "" && !isAttached( elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// A tribute to the "awesome hack by Dean Edwards"
		// Android Browser returns percentage for some values,
		// but width seems to be reliably pixels.
		// This is against the CSSOM draft spec:
		// https://drafts.csswg.org/cssom/#resolved-values
		if ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?

		// Support: IE <=9 - 11 only
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var cssPrefixes = [ "Webkit", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style,
	vendorProps = {};

// Return a vendor-prefixed property or undefined
function vendorPropName( name ) {

	// Check for vendor prefixed names
	var capName = name[ 0 ].toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

// Return a potentially-mapped jQuery.cssProps or vendor prefixed property
function finalPropName( name ) {
	var final = jQuery.cssProps[ name ] || vendorProps[ name ];

	if ( final ) {
		return final;
	}
	if ( name in emptyStyle ) {
		return name;
	}
	return vendorProps[ name ] = vendorPropName( name ) || name;
}


var

	// Swappable if display is none or starts with table
	// except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rcustomProp = /^--/,
	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	};

function setPositiveNumber( _elem, value, subtract ) {

	// Any relative (+/-) values have already been
	// normalized at this point
	var matches = rcssNum.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || "px" ) :
		value;
}

function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {
	var i = dimension === "width" ? 1 : 0,
		extra = 0,
		delta = 0;

	// Adjustment may not be necessary
	if ( box === ( isBorderBox ? "border" : "content" ) ) {
		return 0;
	}

	for ( ; i < 4; i += 2 ) {

		// Both box models exclude margin
		if ( box === "margin" ) {
			delta += jQuery.css( elem, box + cssExpand[ i ], true, styles );
		}

		// If we get here with a content-box, we're seeking "padding" or "border" or "margin"
		if ( !isBorderBox ) {

			// Add padding
			delta += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// For "border" or "margin", add border
			if ( box !== "padding" ) {
				delta += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );

			// But still keep track of it otherwise
			} else {
				extra += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}

		// If we get here with a border-box (content + padding + border), we're seeking "content" or
		// "padding" or "margin"
		} else {

			// For "content", subtract padding
			if ( box === "content" ) {
				delta -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// For "content" or "padding", subtract border
			if ( box !== "margin" ) {
				delta -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	// Account for positive content-box scroll gutter when requested by providing computedVal
	if ( !isBorderBox && computedVal >= 0 ) {

		// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
		// Assuming integer scroll gutter, subtract the rest and round down
		delta += Math.max( 0, Math.ceil(
			elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
			computedVal -
			delta -
			extra -
			0.5

		// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter
		// Use an explicit zero to avoid NaN (gh-3964)
		) ) || 0;
	}

	return delta;
}

function getWidthOrHeight( elem, dimension, extra ) {

	// Start with computed style
	var styles = getStyles( elem ),

		// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).
		// Fake content-box until we know it's needed to know the true value.
		boxSizingNeeded = !support.boxSizingReliable() || extra,
		isBorderBox = boxSizingNeeded &&
			jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
		valueIsBorderBox = isBorderBox,

		val = curCSS( elem, dimension, styles ),
		offsetProp = "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );

	// Support: Firefox <=54
	// Return a confounding non-pixel value or feign ignorance, as appropriate.
	if ( rnumnonpx.test( val ) ) {
		if ( !extra ) {
			return val;
		}
		val = "auto";
	}


	// Support: IE 9 - 11 only
	// Use offsetWidth/offsetHeight for when box sizing is unreliable.
	// In those cases, the computed value can be trusted to be border-box.
	if ( ( !support.boxSizingReliable() && isBorderBox ||

		// Support: IE 10 - 11+, Edge 15 - 18+
		// IE/Edge misreport `getComputedStyle` of table rows with width/height
		// set in CSS while `offset*` properties report correct values.
		// Interestingly, in some cases IE 9 doesn't suffer from this issue.
		!support.reliableTrDimensions() && nodeName( elem, "tr" ) ||

		// Fall back to offsetWidth/offsetHeight when value is "auto"
		// This happens for inline elements with no explicit setting (gh-3571)
		val === "auto" ||

		// Support: Android <=4.1 - 4.3 only
		// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
		!parseFloat( val ) && jQuery.css( elem, "display", false, styles ) === "inline" ) &&

		// Make sure the element is visible & connected
		elem.getClientRects().length ) {

		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

		// Where available, offsetWidth/offsetHeight approximate border box dimensions.
		// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the
		// retrieved value as a content box dimension.
		valueIsBorderBox = offsetProp in elem;
		if ( valueIsBorderBox ) {
			val = elem[ offsetProp ];
		}
	}

	// Normalize "" and auto
	val = parseFloat( val ) || 0;

	// Adjust for the element's box model
	return ( val +
		boxModelAdjustment(
			elem,
			dimension,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles,

			// Provide the current computed size to request scroll gutter calculation (gh-3589)
			val
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"gridArea": true,
		"gridColumn": true,
		"gridColumnEnd": true,
		"gridColumnStart": true,
		"gridRow": true,
		"gridRowEnd": true,
		"gridRowStart": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name ),
			style = elem.style;

		// Make sure that we're working with the right name. We don't
		// want to query the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append
			// "px" to a few hardcoded values.
			if ( type === "number" && !isCustomProp ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				if ( isCustomProp ) {
					style.setProperty( name, value );
				} else {
					style[ name ] = value;
				}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name );

		// Make sure that we're working with the right name. We don't
		// want to modify the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}

		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( _i, dimension ) {
	jQuery.cssHooks[ dimension ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&

					// Support: Safari 8+
					// Table columns in Safari have non-zero offsetWidth & zero
					// getBoundingClientRect().width unless display is changed.
					// Support: IE <=11 only
					// Running getBoundingClientRect on a disconnected node
					// in IE throws an error.
					( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?
						swap( elem, cssShow, function() {
							return getWidthOrHeight( elem, dimension, extra );
						} ) :
						getWidthOrHeight( elem, dimension, extra );
			}
		},

		set: function( elem, value, extra ) {
			var matches,
				styles = getStyles( elem ),

				// Only read styles.position if the test has a chance to fail
				// to avoid forcing a reflow.
				scrollboxSizeBuggy = !support.scrollboxSize() &&
					styles.position === "absolute",

				// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)
				boxSizingNeeded = scrollboxSizeBuggy || extra,
				isBorderBox = boxSizingNeeded &&
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
				subtract = extra ?
					boxModelAdjustment(
						elem,
						dimension,
						extra,
						isBorderBox,
						styles
					) :
					0;

			// Account for unreliable border-box dimensions by comparing offset* to computed and
			// faking a content-box to get border and padding (gh-3699)
			if ( isBorderBox && scrollboxSizeBuggy ) {
				subtract -= Math.ceil(
					elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
					parseFloat( styles[ dimension ] ) -
					boxModelAdjustment( elem, dimension, "border", false, styles ) -
					0.5
				);
			}

			// Convert to pixels if value adjustment is needed
			if ( subtract && ( matches = rcssNum.exec( value ) ) &&
				( matches[ 3 ] || "px" ) !== "px" ) {

				elem.style[ dimension ] = value;
				value = jQuery.css( elem, dimension );
			}

			return setPositiveNumber( elem, value, subtract );
		}
	};
} );

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return ( parseFloat( curCSS( elem, "marginLeft" ) ) ||
				elem.getBoundingClientRect().left -
					swap( elem, { marginLeft: 0 }, function() {
						return elem.getBoundingClientRect().left;
					} )
				) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( prefix !== "margin" ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( Array.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 && (
					jQuery.cssHooks[ tween.prop ] ||
					tween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9 only
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, inProgress,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

function schedule() {
	if ( inProgress ) {
		if ( document.hidden === false && window.requestAnimationFrame ) {
			window.requestAnimationFrame( schedule );
		} else {
			window.setTimeout( schedule, jQuery.fx.interval );
		}

		jQuery.fx.tick();
	}
}

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = Date.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,
		isBox = "width" in props || "height" in props,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHiddenWithinTree( elem ),
		dataShow = dataPriv.get( elem, "fxshow" );

	// Queue-skipping animations hijack the fx hooks
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// Ensure the complete handler is called before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// Detect show/hide animations
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.test( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// Pretend to be hidden if this is a "show" and
				// there is still data from a stopped show/hide
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;

				// Ignore all other no-op show/hide data
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	// Bail out if this is a no-op like .hide().hide()
	propTween = !jQuery.isEmptyObject( props );
	if ( !propTween && jQuery.isEmptyObject( orig ) ) {
		return;
	}

	// Restrict "overflow" and "display" styles during box animations
	if ( isBox && elem.nodeType === 1 ) {

		// Support: IE <=9 - 11, Edge 12 - 15
		// Record all 3 overflow attributes because IE does not infer the shorthand
		// from identically-valued overflowX and overflowY and Edge just mirrors
		// the overflowX value there.
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Identify a display type, preferring old show/hide data over the CSS cascade
		restoreDisplay = dataShow && dataShow.display;
		if ( restoreDisplay == null ) {
			restoreDisplay = dataPriv.get( elem, "display" );
		}
		display = jQuery.css( elem, "display" );
		if ( display === "none" ) {
			if ( restoreDisplay ) {
				display = restoreDisplay;
			} else {

				// Get nonempty value(s) by temporarily forcing visibility
				showHide( [ elem ], true );
				restoreDisplay = elem.style.display || restoreDisplay;
				display = jQuery.css( elem, "display" );
				showHide( [ elem ] );
			}
		}

		// Animate inline elements as inline-block
		if ( display === "inline" || display === "inline-block" && restoreDisplay != null ) {
			if ( jQuery.css( elem, "float" ) === "none" ) {

				// Restore the original display value at the end of pure show/hide animations
				if ( !propTween ) {
					anim.done( function() {
						style.display = restoreDisplay;
					} );
					if ( restoreDisplay == null ) {
						display = style.display;
						restoreDisplay = display === "none" ? "" : display;
					}
				}
				style.display = "inline-block";
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always( function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		} );
	}

	// Implement show/hide animations
	propTween = false;
	for ( prop in orig ) {

		// General show/hide setup for this element animation
		if ( !propTween ) {
			if ( dataShow ) {
				if ( "hidden" in dataShow ) {
					hidden = dataShow.hidden;
				}
			} else {
				dataShow = dataPriv.access( elem, "fxshow", { display: restoreDisplay } );
			}

			// Store hidden/visible for toggle so `.stop().toggle()` "reverses"
			if ( toggle ) {
				dataShow.hidden = !hidden;
			}

			// Show elements before animating them
			if ( hidden ) {
				showHide( [ elem ], true );
			}

			/* eslint-disable no-loop-func */

			anim.done( function() {

			/* eslint-enable no-loop-func */

				// The final step of a "hide" animation is actually hiding the element
				if ( !hidden ) {
					showHide( [ elem ] );
				}
				dataPriv.remove( elem, "fxshow" );
				for ( prop in orig ) {
					jQuery.style( elem, prop, orig[ prop ] );
				}
			} );
		}

		// Per-property setup
		propTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
		if ( !( prop in dataShow ) ) {
			dataShow[ prop ] = propTween.start;
			if ( hidden ) {
				propTween.end = propTween.start;
				propTween.start = 0;
			}
		}
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( Array.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// Don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3 only
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			// If there's more to do, yield
			if ( percent < 1 && length ) {
				return remaining;
			}

			// If this was an empty animation, synthesize a final progress notification
			if ( !length ) {
				deferred.notifyWith( elem, [ animation, 1, 0 ] );
			}

			// Resolve the animation and report its conclusion
			deferred.resolveWith( elem, [ animation ] );
			return false;
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					result.stop.bind( result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	// Attach callbacks from options
	animation
		.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	return animation;
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnothtmlwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !isFunction( easing ) && easing
	};

	// Go to the end state if fx are off
	if ( jQuery.fx.off ) {
		opt.duration = 0;

	} else {
		if ( typeof opt.duration !== "number" ) {
			if ( opt.duration in jQuery.fx.speeds ) {
				opt.duration = jQuery.fx.speeds[ opt.duration ];

			} else {
				opt.duration = jQuery.fx.speeds._default;
			}
		}
	}

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHiddenWithinTree ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || dataPriv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = dataPriv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = dataPriv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( _i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = Date.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Run the timer and safely remove it when done (allowing for external removal)
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	jQuery.fx.start();
};

jQuery.fx.interval = 13;
jQuery.fx.start = function() {
	if ( inProgress ) {
		return;
	}

	inProgress = true;
	schedule();
};

jQuery.fx.stop = function() {
	inProgress = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: Android <=4.3 only
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE <=11 only
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: IE <=11 only
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
} )();


var boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// Attribute hooks are determined by the lowercase version
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			hooks = jQuery.attrHooks[ name.toLowerCase() ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name,
			i = 0,

			// Attribute names can contain non-HTML whitespace characters
			// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
			attrNames = value && value.match( rnothtmlwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				elem.removeAttribute( name );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( _i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle,
			lowercaseName = name.toLowerCase();

		if ( !isXML ) {

			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ lowercaseName ];
			attrHandle[ lowercaseName ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				lowercaseName :
				null;
			attrHandle[ lowercaseName ] = handle;
		}
		return ret;
	};
} );




var rfocusable = /^(?:input|select|textarea|button)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each( function() {
			delete this[ jQuery.propFix[ name ] || name ];
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// Support: IE <=9 - 11 only
				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				if ( tabindex ) {
					return parseInt( tabindex, 10 );
				}

				if (
					rfocusable.test( elem.nodeName ) ||
					rclickable.test( elem.nodeName ) &&
					elem.href
				) {
					return 0;
				}

				return -1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Support: IE <=11 only
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
// eslint rule "no-unused-expressions" is disabled for this code
// since it considers such accessions noop
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		},
		set: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );




	// Strip and collapse whitespace according to HTML spec
	// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
	function stripAndCollapse( value ) {
		var tokens = value.match( rnothtmlwhite ) || [];
		return tokens.join( " " );
	}


function getClass( elem ) {
	return elem.getAttribute && elem.getAttribute( "class" ) || "";
}

function classesToArray( value ) {
	if ( Array.isArray( value ) ) {
		return value;
	}
	if ( typeof value === "string" ) {
		return value.match( rnothtmlwhite ) || [];
	}
	return [];
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isValidValue = type === "string" || Array.isArray( value );

		if ( typeof stateVal === "boolean" && isValidValue ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( isValidValue ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = classesToArray( value );

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// Store className if set
					dataPriv.set( this, "__className__", className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				if ( this.setAttribute ) {
					this.setAttribute( "class",
						className || value === false ?
						"" :
						dataPriv.get( this, "__className__" ) || ""
					);
				}
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + stripAndCollapse( getClass( elem ) ) + " " ).indexOf( className ) > -1 ) {
					return true;
			}
		}

		return false;
	}
} );




var rreturn = /\r/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, valueIsFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				// Handle most common string cases
				if ( typeof ret === "string" ) {
					return ret.replace( rreturn, "" );
				}

				// Handle cases where value is null/undef or number
				return ret == null ? "" : ret;
			}

			return;
		}

		valueIsFunction = isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( valueIsFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( Array.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {

				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE <=10 - 11 only
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					stripAndCollapse( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option, i,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one",
					values = one ? null : [],
					max = one ? index + 1 : options.length;

				if ( index < 0 ) {
					i = max;

				} else {
					i = one ? index : 0;
				}

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// Support: IE <=9 only
					// IE8-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							!option.disabled &&
							( !option.parentNode.disabled ||
								!nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					/* eslint-disable no-cond-assign */

					if ( option.selected =
						jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1
					) {
						optionSet = true;
					}

					/* eslint-enable no-cond-assign */
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( Array.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




// Return jQuery for attributes-only inclusion


support.focusin = "onfocusin" in window;


var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	stopPropagationCallback = function( e ) {
		e.stopPropagation();
	};

jQuery.extend( jQuery.event, {

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = lastElement = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {
			lastElement = cur;
			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = (
					dataPriv.get( cur, "events" ) || Object.create( null )
				)[ event.type ] &&
				dataPriv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( ( !special._default ||
				special._default.apply( eventPath.pop(), data ) === false ) &&
				acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;

					if ( event.isPropagationStopped() ) {
						lastElement.addEventListener( type, stopPropagationCallback );
					}

					elem[ type ]();

					if ( event.isPropagationStopped() ) {
						lastElement.removeEventListener( type, stopPropagationCallback );
					}

					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	// Piggyback on a donor event to simulate a different one
	// Used only for `focus(in | out)` events
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true
			}
		);

		jQuery.event.trigger( e, null, elem );
	}

} );

jQuery.fn.extend( {

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


// Support: Firefox <=44
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {

				// Handle: regular nodes (via `this.ownerDocument`), window
				// (via `this.document`) & document (via `this`).
				var doc = this.ownerDocument || this.document || this,
					attaches = dataPriv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				dataPriv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this.document || this,
					attaches = dataPriv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					dataPriv.remove( doc, fix );

				} else {
					dataPriv.access( doc, fix, attaches );
				}
			}
		};
	} );
}
var location = window.location;

var nonce = { guid: Date.now() };

var rquery = ( /\?/ );



// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE 9 - 11 only
	// IE throws on parseFromString with invalid input.
	try {
		xml = ( new window.DOMParser() ).parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( Array.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && toType( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, valueOrFunction ) {

			// If value is a function, invoke it and use its return value
			var value = isFunction( valueOrFunction ) ?
				valueOrFunction() :
				valueOrFunction;

			s[ s.length ] = encodeURIComponent( key ) + "=" +
				encodeURIComponent( value == null ? "" : value );
		};

	if ( a == null ) {
		return "";
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} )
		.filter( function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} )
		.map( function( _i, elem ) {
			var val = jQuery( this ).val();

			if ( val == null ) {
				return null;
			}

			if ( Array.isArray( val ) ) {
				return jQuery.map( val, function( val ) {
					return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
				} );
			}

			return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


var
	r20 = /%20/g,
	rhash = /#.*$/,
	rantiCache = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Anchor tag for parsing the document origin
	originAnchor = document.createElement( "a" );
	originAnchor.href = location.href;

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];

		if ( isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType[ 0 ] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s.throws ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: location.href,
		type: "GET",
		isLocal: rlocalProtocol.test( location.protocol ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",

		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": JSON.parse,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,

			// URL without anti-cache param
			cacheURL,

			// Response headers
			responseHeadersString,
			responseHeaders,

			// timeout handle
			timeoutTimer,

			// Url cleanup var
			urlAnchor,

			// Request state (becomes false upon send and true upon completion)
			completed,

			// To know if global events are to be dispatched
			fireGlobals,

			// Loop variable
			i,

			// uncached part of the url
			uncached,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
					jQuery( callbackContext ) :
					jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( completed ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() + " " ] =
									( responseHeaders[ match[ 1 ].toLowerCase() + " " ] || [] )
										.concat( match[ 2 ] );
							}
						}
						match = responseHeaders[ key.toLowerCase() + " " ];
					}
					return match == null ? null : match.join( ", " );
				},

				// Raw string
				getAllResponseHeaders: function() {
					return completed ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					if ( completed == null ) {
						name = requestHeadersNames[ name.toLowerCase() ] =
							requestHeadersNames[ name.toLowerCase() ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( completed == null ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( completed ) {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						} else {

							// Lazy-add the new callbacks in a way that preserves old ones
							for ( code in map ) {
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR );

		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || location.href ) + "" )
			.replace( rprotocol, location.protocol + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = ( s.dataType || "*" ).toLowerCase().match( rnothtmlwhite ) || [ "" ];

		// A cross-domain request is in order when the origin doesn't match the current origin.
		if ( s.crossDomain == null ) {
			urlAnchor = document.createElement( "a" );

			// Support: IE <=8 - 11, Edge 12 - 15
			// IE throws exception on accessing the href property if url is malformed,
			// e.g. http://example.com:80x/
			try {
				urlAnchor.href = s.url;

				// Support: IE <=8 - 11 only
				// Anchor's host property isn't correctly set when s.url is relative
				urlAnchor.href = urlAnchor.href;
				s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !==
					urlAnchor.protocol + "//" + urlAnchor.host;
			} catch ( e ) {

				// If there is an error parsing the URL, assume it is crossDomain,
				// it can be rejected by the transport if it is invalid
				s.crossDomain = true;
			}
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( completed ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		// Remove hash to simplify url manipulation
		cacheURL = s.url.replace( rhash, "" );

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// Remember the hash so we can put it back
			uncached = s.url.slice( cacheURL.length );

			// If data is available and should be processed, append data to url
			if ( s.data && ( s.processData || typeof s.data === "string" ) ) {
				cacheURL += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data;

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add or update anti-cache param if needed
			if ( s.cache === false ) {
				cacheURL = cacheURL.replace( rantiCache, "$1" );
				uncached = ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ( nonce.guid++ ) +
					uncached;
			}

			// Put hash and anti-cache on the URL that will be requested (gh-1732)
			s.url = cacheURL + uncached;

		// Change '%20' to '+' if this is encoded form body content (gh-2658)
		} else if ( s.data && s.processData &&
			( s.contentType || "" ).indexOf( "application/x-www-form-urlencoded" ) === 0 ) {
			s.data = s.data.replace( r20, "+" );
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		completeDeferred.add( s.complete );
		jqXHR.done( s.success );
		jqXHR.fail( s.error );

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( completed ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				completed = false;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Rethrow post-completion exceptions
				if ( completed ) {
					throw e;
				}

				// Propagate others as results
				done( -1, e );
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Ignore repeat invocations
			if ( completed ) {
				return;
			}

			completed = true;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Use a noop converter for missing script
			if ( !isSuccess && jQuery.inArray( "script", s.dataTypes ) > -1 ) {
				s.converters[ "text script" ] = function() {};
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( _i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// Shift arguments if data argument was omitted
		if ( isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );

jQuery.ajaxPrefilter( function( s ) {
	var i;
	for ( i in s.headers ) {
		if ( i.toLowerCase() === "content-type" ) {
			s.contentType = s.headers[ i ] || "";
		}
	}
} );


jQuery._evalUrl = function( url, options, doc ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,

		// Only evaluate the response if it is successful (gh-4126)
		// dataFilter is not invoked for failure responses, so using it instead
		// of the default converter is kludgy but it works.
		converters: {
			"text script": function() {}
		},
		dataFilter: function( response ) {
			jQuery.globalEval( response, options, doc );
		}
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		var wrap;

		if ( this[ 0 ] ) {
			if ( isFunction( html ) ) {
				html = html.call( this[ 0 ] );
			}

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var htmlIsFunction = isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function( selector ) {
		this.parent( selector ).not( "body" ).each( function() {
			jQuery( this ).replaceWith( this.childNodes );
		} );
		return this;
	}
} );


jQuery.expr.pseudos.hidden = function( elem ) {
	return !jQuery.expr.pseudos.visible( elem );
};
jQuery.expr.pseudos.visible = function( elem ) {
	return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );
};




jQuery.ajaxSettings.xhr = function() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
};

var xhrSuccessStatus = {

		// File protocol always yields status code 0, assume 200
		0: 200,

		// Support: IE <=9 only
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport( function( options ) {
	var callback, errorCallback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr();

				xhr.open(
					options.type,
					options.url,
					options.async,
					options.username,
					options.password
				);

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
					headers[ "X-Requested-With" ] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							callback = errorCallback = xhr.onload =
								xhr.onerror = xhr.onabort = xhr.ontimeout =
									xhr.onreadystatechange = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {

								// Support: IE <=9 only
								// On a manual native abort, IE9 throws
								// errors on any property access that is not readyState
								if ( typeof xhr.status !== "number" ) {
									complete( 0, "error" );
								} else {
									complete(

										// File: protocol always yields status 0; see #8605, #14207
										xhr.status,
										xhr.statusText
									);
								}
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,

									// Support: IE <=9 only
									// IE9 has no XHR2 but throws on binary (trac-11426)
									// For XHR2 non-text, let the caller handle it (gh-2498)
									( xhr.responseType || "text" ) !== "text"  ||
									typeof xhr.responseText !== "string" ?
										{ binary: xhr.response } :
										{ text: xhr.responseText },
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				errorCallback = xhr.onerror = xhr.ontimeout = callback( "error" );

				// Support: IE 9 only
				// Use onreadystatechange to replace onabort
				// to handle uncaught aborts
				if ( xhr.onabort !== undefined ) {
					xhr.onabort = errorCallback;
				} else {
					xhr.onreadystatechange = function() {

						// Check readyState before timeout as it changes
						if ( xhr.readyState === 4 ) {

							// Allow onerror to be called first,
							// but that will not handle a native abort
							// Also, save errorCallback to a variable
							// as xhr.onerror cannot be accessed
							window.setTimeout( function() {
								if ( callback ) {
									errorCallback();
								}
							} );
						}
					};
				}

				// Create the abort callback
				callback = callback( "abort" );

				try {

					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {

					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
jQuery.ajaxPrefilter( function( s ) {
	if ( s.crossDomain ) {
		s.contents.script = false;
	}
} );

// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain or forced-by-attrs requests
	if ( s.crossDomain || s.scriptAttrs ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery( "<script>" )
					.attr( s.scriptAttrs || {} )
					.prop( { charset: s.scriptCharset, src: s.url } )
					.on( "load error", callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					} );

				// Use native DOM manipulation to avoid our domManip AJAX trickery
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce.guid++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// Force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// Make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// Save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// Support: Safari 8 only
// In Safari 8 documents created via document.implementation.createHTMLDocument
// collapse sibling forms: the second one becomes a child of the first one.
// Because of that, this security measure has to be disabled in Safari 8.
// https://bugs.webkit.org/show_bug.cgi?id=137337
support.createHTMLDocument = ( function() {
	var body = document.implementation.createHTMLDocument( "" ).body;
	body.innerHTML = "<form></form><form></form>";
	return body.childNodes.length === 2;
} )();


// Argument "data" should be string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( typeof data !== "string" ) {
		return [];
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}

	var base, parsed, scripts;

	if ( !context ) {

		// Stop scripts or inline event handlers from being executed immediately
		// by using document.implementation
		if ( support.createHTMLDocument ) {
			context = document.implementation.createHTMLDocument( "" );

			// Set the base href for the created document
			// so any parsed elements with URLs
			// are based on the document's URL (gh-2965)
			base = context.createElement( "base" );
			base.href = document.location.href;
			context.head.appendChild( base );
		} else {
			context = document;
		}
	}

	parsed = rsingleTag.exec( data );
	scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = stripAndCollapse( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




jQuery.expr.pseudos.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};




jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf( "auto" ) > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			if ( typeof props.top === "number" ) {
				props.top += "px";
			}
			if ( typeof props.left === "number" ) {
				props.left += "px";
			}
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {

	// offset() relates an element's border box to the document origin
	offset: function( options ) {

		// Preserve chaining for setter
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var rect, win,
			elem = this[ 0 ];

		if ( !elem ) {
			return;
		}

		// Return zeros for disconnected and hidden (display: none) elements (gh-2310)
		// Support: IE <=11 only
		// Running getBoundingClientRect on a
		// disconnected node in IE throws an error
		if ( !elem.getClientRects().length ) {
			return { top: 0, left: 0 };
		}

		// Get document-relative position by adding viewport scroll to viewport-relative gBCR
		rect = elem.getBoundingClientRect();
		win = elem.ownerDocument.defaultView;
		return {
			top: rect.top + win.pageYOffset,
			left: rect.left + win.pageXOffset
		};
	},

	// position() relates an element's margin box to its offset parent's padding box
	// This corresponds to the behavior of CSS absolute positioning
	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset, doc,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// position:fixed elements are offset from the viewport, which itself always has zero offset
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// Assume position:fixed implies availability of getBoundingClientRect
			offset = elem.getBoundingClientRect();

		} else {
			offset = this.offset();

			// Account for the *real* offset parent, which can be the document or its root element
			// when a statically positioned element is identified
			doc = elem.ownerDocument;
			offsetParent = elem.offsetParent || doc.documentElement;
			while ( offsetParent &&
				( offsetParent === doc.body || offsetParent === doc.documentElement ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) {

				offsetParent = offsetParent.parentNode;
			}
			if ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {

				// Incorporate borders into its offset, since they are outside its content origin
				parentOffset = jQuery( offsetParent ).offset();
				parentOffset.top += jQuery.css( offsetParent, "borderTopWidth", true );
				parentOffset.left += jQuery.css( offsetParent, "borderLeftWidth", true );
			}
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	// This method will return documentElement in the following cases:
	// 1) For the element inside the iframe without offsetParent, this method will return
	//    documentElement of the parent window
	// 2) For the hidden or detached element
	// 3) For body or html element, i.e. in case of the html node - it will return itself
	//
	// but those exceptions were never presented as a real life use-cases
	// and might be considered as more preferable results.
	//
	// This logic, however, is not guaranteed and can change at any point in the future
	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && jQuery.css( offsetParent, "position" ) === "static" ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {

			// Coalesce documents and windows
			var win;
			if ( isWindow( elem ) ) {
				win = elem;
			} else if ( elem.nodeType === 9 ) {
				win = elem.defaultView;
			}

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : win.pageXOffset,
					top ? val : win.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length );
	};
} );

// Support: Safari <=7 - 9.1, Chrome <=37 - 49
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( _i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name },
		function( defaultExtra, funcName ) {

		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( isWindow( elem ) ) {

					// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
					return funcName.indexOf( "outer" ) === 0 ?
						elem[ "inner" + name ] :
						elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable );
		};
	} );
} );


jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( _i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	},

	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );

jQuery.each( ( "blur focus focusin focusout resize scroll click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup contextmenu" ).split( " " ),
	function( _i, name ) {

		// Handle event binding
		jQuery.fn[ name ] = function( data, fn ) {
			return arguments.length > 0 ?
				this.on( name, null, data, fn ) :
				this.trigger( name );
		};
	} );




// Support: Android <=4.0 only
// Make sure we trim BOM and NBSP
var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

// Bind a function to a context, optionally partially applying any
// arguments.
// jQuery.proxy is deprecated to promote standards (specifically Function#bind)
// However, it is not slated for removal any time soon
jQuery.proxy = function( fn, context ) {
	var tmp, args, proxy;

	if ( typeof context === "string" ) {
		tmp = fn[ context ];
		context = fn;
		fn = tmp;
	}

	// Quick check to determine if target is callable, in the spec
	// this throws a TypeError, but we will just return undefined.
	if ( !isFunction( fn ) ) {
		return undefined;
	}

	// Simulated bind
	args = slice.call( arguments, 2 );
	proxy = function() {
		return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
	};

	// Set the guid of unique handler to the same of original handler, so it can be removed
	proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	return proxy;
};

jQuery.holdReady = function( hold ) {
	if ( hold ) {
		jQuery.readyWait++;
	} else {
		jQuery.ready( true );
	}
};
jQuery.isArray = Array.isArray;
jQuery.parseJSON = JSON.parse;
jQuery.nodeName = nodeName;
jQuery.isFunction = isFunction;
jQuery.isWindow = isWindow;
jQuery.camelCase = camelCase;
jQuery.type = toType;

jQuery.now = Date.now;

jQuery.isNumeric = function( obj ) {

	// As of jQuery 3.0, isNumeric is limited to
	// strings and numbers (primitives or objects)
	// that can be coerced to finite numbers (gh-2662)
	var type = jQuery.type( obj );
	return ( type === "number" || type === "string" ) &&

		// parseFloat NaNs numeric-cast false positives ("")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		!isNaN( obj - parseFloat( obj ) );
};

jQuery.trim = function( text ) {
	return text == null ?
		"" :
		( text + "" ).replace( rtrim, "" );
};



// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	} );
}




var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === "undefined" ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;
} );

/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 1.1.20160328
 *
 * By Eli Grey, http://eligrey.com
 * License: MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */

/*global self */
/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

var saveAs = saveAs || (function(view) {
	"use strict";
	// IE <10 is explicitly unsupported
	if (typeof navigator !== "undefined" && /MSIE [1-9]\./.test(navigator.userAgent)) {
		return;
	}
	var
		  doc = view.document
		  // only get URL when necessary in case Blob.js hasn't overridden it yet
		, get_URL = function() {
			return view.URL || view.webkitURL || view;
		}
		, save_link = doc.createElementNS("http://www.w3.org/1999/xhtml", "a")
		, can_use_save_link = "download" in save_link
		, click = function(node) {
			var event = new MouseEvent("click");
			node.dispatchEvent(event);
		}
		, is_safari = /Version\/[\d\.]+.*Safari/.test(navigator.userAgent)
		, webkit_req_fs = view.webkitRequestFileSystem
		, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem
		, throw_outside = function(ex) {
			(view.setImmediate || view.setTimeout)(function() {
				throw ex;
			}, 0);
		}
		, force_saveable_type = "application/octet-stream"
		, fs_min_size = 0
		// the Blob API is fundamentally broken as there is no "downloadfinished" event to subscribe to
		, arbitrary_revoke_timeout = 1000 * 40 // in ms
		, revoke = function(file) {
			var revoker = function() {
				if (typeof file === "string") { // file is an object URL
					get_URL().revokeObjectURL(file);
				} else { // file is a File
					file.remove();
				}
			};
			/* // Take note W3C:
			var
			  uri = typeof file === "string" ? file : file.toURL()
			, revoker = function(evt) {
				// idealy DownloadFinishedEvent.data would be the URL requested
				if (evt.data === uri) {
					if (typeof file === "string") { // file is an object URL
						get_URL().revokeObjectURL(file);
					} else { // file is a File
						file.remove();
					}
				}
			}
			;
			view.addEventListener("downloadfinished", revoker);
			*/
			setTimeout(revoker, arbitrary_revoke_timeout);
		}
		, dispatch = function(filesaver, event_types, event) {
			event_types = [].concat(event_types);
			var i = event_types.length;
			while (i--) {
				var listener = filesaver["on" + event_types[i]];
				if (typeof listener === "function") {
					try {
						listener.call(filesaver, event || filesaver);
					} catch (ex) {
						throw_outside(ex);
					}
				}
			}
		}
		, auto_bom = function(blob) {
			// prepend BOM for UTF-8 XML and text/* types (including HTML)
			if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
				return new Blob(["\ufeff", blob], {type: blob.type});
			}
			return blob;
		}
		, FileSaver = function(blob, name, no_auto_bom) {
			if (!no_auto_bom) {
				blob = auto_bom(blob);
			}
			// First try a.download, then web filesystem, then object URLs
			var
				  filesaver = this
				, type = blob.type
				, blob_changed = false
				, object_url
				, target_view
				, dispatch_all = function() {
					dispatch(filesaver, "writestart progress write writeend".split(" "));
				}
				// on any filesys errors revert to saving with object URLs
				, fs_error = function() {
					if (target_view && is_safari && typeof FileReader !== "undefined") {
						// Safari doesn't allow downloading of blob urls
						var reader = new FileReader();
						reader.onloadend = function() {
							var base64Data = reader.result;
							target_view.location.href = "data:attachment/file" + base64Data.slice(base64Data.search(/[,;]/));
							filesaver.readyState = filesaver.DONE;
							dispatch_all();
						};
						reader.readAsDataURL(blob);
						filesaver.readyState = filesaver.INIT;
						return;
					}
					// don't create more object URLs than needed
					if (blob_changed || !object_url) {
						object_url = get_URL().createObjectURL(blob);
					}
					if (target_view) {
						target_view.location.href = object_url;
					} else {
						var new_tab = view.open(object_url, "_blank");
						if (new_tab === undefined && is_safari) {
							//Apple do not allow window.open, see http://bit.ly/1kZffRI
							view.location.href = object_url
						}
					}
					filesaver.readyState = filesaver.DONE;
					dispatch_all();
					revoke(object_url);
				}
				, abortable = function(func) {
					return function() {
						if (filesaver.readyState !== filesaver.DONE) {
							return func.apply(this, arguments);
						}
					};
				}
				, create_if_not_found = {create: true, exclusive: false}
				, slice
			;
			filesaver.readyState = filesaver.INIT;
			if (!name) {
				name = "download";
			}
			if (can_use_save_link) {
				object_url = get_URL().createObjectURL(blob);
				setTimeout(function() {
					save_link.href = object_url;
					save_link.download = name;
					click(save_link);
					dispatch_all();
					revoke(object_url);
					filesaver.readyState = filesaver.DONE;
				});
				return;
			}
			// Object and web filesystem URLs have a problem saving in Google Chrome when
			// viewed in a tab, so I force save with application/octet-stream
			// http://code.google.com/p/chromium/issues/detail?id=91158
			// Update: Google errantly closed 91158, I submitted it again:
			// https://code.google.com/p/chromium/issues/detail?id=389642
			if (view.chrome && type && type !== force_saveable_type) {
				slice = blob.slice || blob.webkitSlice;
				blob = slice.call(blob, 0, blob.size, force_saveable_type);
				blob_changed = true;
			}
			// Since I can't be sure that the guessed media type will trigger a download
			// in WebKit, I append .download to the filename.
			// https://bugs.webkit.org/show_bug.cgi?id=65440
			if (webkit_req_fs && name !== "download") {
				name += ".download";
			}
			if (type === force_saveable_type || webkit_req_fs) {
				target_view = view;
			}
			if (!req_fs) {
				fs_error();
				return;
			}
			fs_min_size += blob.size;
			req_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {
				fs.root.getDirectory("saved", create_if_not_found, abortable(function(dir) {
					var save = function() {
						dir.getFile(name, create_if_not_found, abortable(function(file) {
							file.createWriter(abortable(function(writer) {
								writer.onwriteend = function(event) {
									target_view.location.href = file.toURL();
									filesaver.readyState = filesaver.DONE;
									dispatch(filesaver, "writeend", event);
									revoke(file);
								};
								writer.onerror = function() {
									var error = writer.error;
									if (error.code !== error.ABORT_ERR) {
										fs_error();
									}
								};
								"writestart progress write abort".split(" ").forEach(function(event) {
									writer["on" + event] = filesaver["on" + event];
								});
								writer.write(blob);
								filesaver.abort = function() {
									writer.abort();
									filesaver.readyState = filesaver.DONE;
								};
								filesaver.readyState = filesaver.WRITING;
							}), fs_error);
						}), fs_error);
					};
					dir.getFile(name, {create: false}, abortable(function(file) {
						// delete file if it already exists
						file.remove();
						save();
					}), abortable(function(ex) {
						if (ex.code === ex.NOT_FOUND_ERR) {
							save();
						} else {
							fs_error();
						}
					}));
				}), fs_error);
			}), fs_error);
		}
		, FS_proto = FileSaver.prototype
		, saveAs = function(blob, name, no_auto_bom) {
			return new FileSaver(blob, name, no_auto_bom);
		}
	;
	// IE 10+ (native saveAs)
	if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
		return function(blob, name, no_auto_bom) {
			if (!no_auto_bom) {
				blob = auto_bom(blob);
			}
			return navigator.msSaveOrOpenBlob(blob, name || "download");
		};
	}

	FS_proto.abort = function() {
		var filesaver = this;
		filesaver.readyState = filesaver.DONE;
		dispatch(filesaver, "abort");
	};
	FS_proto.readyState = FS_proto.INIT = 0;
	FS_proto.WRITING = 1;
	FS_proto.DONE = 2;

	FS_proto.error =
	FS_proto.onwritestart =
	FS_proto.onprogress =
	FS_proto.onwrite =
	FS_proto.onabort =
	FS_proto.onerror =
	FS_proto.onwriteend =
		null;

	return saveAs;
}(
	   typeof self !== "undefined" && self
	|| typeof window !== "undefined" && window
	|| this.content
));
// `self` is undefined in Firefox for Android content script context
// while `this` is nsIContentFrameMessageManager
// with an attribute `content` that corresponds to the window

if (typeof module !== "undefined" && module.exports) {
  module.exports.saveAs = saveAs;
} else if ((typeof define !== "undefined" && define !== null) && (define.amd !== null)) {
  define([], function() {
    return saveAs;
  });
}

/*global define:false */
/**
 * Copyright 2012-2017 Craig Campbell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Mousetrap is a simple keyboard shortcut library for Javascript with
 * no external dependencies
 *
 * @version 1.6.5
 * @url craig.is/killing/mice
 */
(function(window, document, undefined) {

    // Check if mousetrap is used inside browser, if not, return
    if (!window) {
        return;
    }

    /**
     * mapping of special keycodes to their corresponding keys
     *
     * everything in this dictionary cannot use keypress events
     * so it has to be here to map to the correct keycodes for
     * keyup/keydown events
     *
     * @type {Object}
     */
    var _MAP = {
        8: 'backspace',
        9: 'tab',
        13: 'enter',
        16: 'shift',
        17: 'ctrl',
        18: 'alt',
        20: 'capslock',
        27: 'esc',
        32: 'space',
        33: 'pageup',
        34: 'pagedown',
        35: 'end',
        36: 'home',
        37: 'left',
        38: 'up',
        39: 'right',
        40: 'down',
        45: 'ins',
        46: 'del',
        91: 'meta',
        93: 'meta',
        224: 'meta'
    };

    /**
     * mapping for special characters so they can support
     *
     * this dictionary is only used incase you want to bind a
     * keyup or keydown event to one of these keys
     *
     * @type {Object}
     */
    var _KEYCODE_MAP = {
        106: '*',
        107: '+',
        109: '-',
        110: '.',
        111 : '/',
        186: ';',
        187: '=',
        188: ',',
        189: '-',
        190: '.',
        191: '/',
        192: '`',
        219: '[',
        220: '\\',
        221: ']',
        222: '\''
    };

    /**
     * this is a mapping of keys that require shift on a US keypad
     * back to the non shift equivelents
     *
     * this is so you can use keyup events with these keys
     *
     * note that this will only work reliably on US keyboards
     *
     * @type {Object}
     */
    var _SHIFT_MAP = {
        '~': '`',
        '!': '1',
        '@': '2',
        '#': '3',
        '$': '4',
        '%': '5',
        '^': '6',
        '&': '7',
        '*': '8',
        '(': '9',
        ')': '0',
        '_': '-',
        '+': '=',
        ':': ';',
        '\"': '\'',
        '<': ',',
        '>': '.',
        '?': '/',
        '|': '\\'
    };

    /**
     * this is a list of special strings you can use to map
     * to modifier keys when you specify your keyboard shortcuts
     *
     * @type {Object}
     */
    var _SPECIAL_ALIASES = {
        'option': 'alt',
        'command': 'meta',
        'return': 'enter',
        'escape': 'esc',
        'plus': '+',
        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'
    };

    /**
     * variable to store the flipped version of _MAP from above
     * needed to check if we should use keypress or not when no action
     * is specified
     *
     * @type {Object|undefined}
     */
    var _REVERSE_MAP;

    /**
     * loop through the f keys, f1 to f19 and add them to the map
     * programatically
     */
    for (var i = 1; i < 20; ++i) {
        _MAP[111 + i] = 'f' + i;
    }

    /**
     * loop through to map numbers on the numeric keypad
     */
    for (i = 0; i <= 9; ++i) {

        // This needs to use a string cause otherwise since 0 is falsey
        // mousetrap will never fire for numpad 0 pressed as part of a keydown
        // event.
        //
        // @see https://github.com/ccampbell/mousetrap/pull/258
        _MAP[i + 96] = i.toString();
    }

    /**
     * cross browser add event method
     *
     * @param {Element|HTMLDocument} object
     * @param {string} type
     * @param {Function} callback
     * @returns void
     */
    function _addEvent(object, type, callback) {
        if (object.addEventListener) {
            object.addEventListener(type, callback, false);
            return;
        }

        object.attachEvent('on' + type, callback);
    }

    /**
     * takes the event and returns the key character
     *
     * @param {Event} e
     * @return {string}
     */
    function _characterFromEvent(e) {

        // for keypress events we should return the character as is
        if (e.type == 'keypress') {
            var character = String.fromCharCode(e.which);

            // if the shift key is not pressed then it is safe to assume
            // that we want the character to be lowercase.  this means if
            // you accidentally have caps lock on then your key bindings
            // will continue to work
            //
            // the only side effect that might not be desired is if you
            // bind something like 'A' cause you want to trigger an
            // event when capital A is pressed caps lock will no longer
            // trigger the event.  shift+a will though.
            if (!e.shiftKey) {
                character = character.toLowerCase();
            }

            return character;
        }

        // for non keypress events the special maps are needed
        if (_MAP[e.which]) {
            return _MAP[e.which];
        }

        if (_KEYCODE_MAP[e.which]) {
            return _KEYCODE_MAP[e.which];
        }

        // if it is not in the special map

        // with keydown and keyup events the character seems to always
        // come in as an uppercase character whether you are pressing shift
        // or not.  we should make sure it is always lowercase for comparisons
        return String.fromCharCode(e.which).toLowerCase();
    }

    /**
     * checks if two arrays are equal
     *
     * @param {Array} modifiers1
     * @param {Array} modifiers2
     * @returns {boolean}
     */
    function _modifiersMatch(modifiers1, modifiers2) {
        return modifiers1.sort().join(',') === modifiers2.sort().join(',');
    }

    /**
     * takes a key event and figures out what the modifiers are
     *
     * @param {Event} e
     * @returns {Array}
     */
    function _eventModifiers(e) {
        var modifiers = [];

        if (e.shiftKey) {
            modifiers.push('shift');
        }

        if (e.altKey) {
            modifiers.push('alt');
        }

        if (e.ctrlKey) {
            modifiers.push('ctrl');
        }

        if (e.metaKey) {
            modifiers.push('meta');
        }

        return modifiers;
    }

    /**
     * prevents default for this event
     *
     * @param {Event} e
     * @returns void
     */
    function _preventDefault(e) {
        if (e.preventDefault) {
            e.preventDefault();
            return;
        }

        e.returnValue = false;
    }

    /**
     * stops propogation for this event
     *
     * @param {Event} e
     * @returns void
     */
    function _stopPropagation(e) {
        if (e.stopPropagation) {
            e.stopPropagation();
            return;
        }

        e.cancelBubble = true;
    }

    /**
     * determines if the keycode specified is a modifier key or not
     *
     * @param {string} key
     * @returns {boolean}
     */
    function _isModifier(key) {
        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';
    }

    /**
     * reverses the map lookup so that we can look for specific keys
     * to see what can and can't use keypress
     *
     * @return {Object}
     */
    function _getReverseMap() {
        if (!_REVERSE_MAP) {
            _REVERSE_MAP = {};
            for (var key in _MAP) {

                // pull out the numeric keypad from here cause keypress should
                // be able to detect the keys from the character
                if (key > 95 && key < 112) {
                    continue;
                }

                if (_MAP.hasOwnProperty(key)) {
                    _REVERSE_MAP[_MAP[key]] = key;
                }
            }
        }
        return _REVERSE_MAP;
    }

    /**
     * picks the best action based on the key combination
     *
     * @param {string} key - character for key
     * @param {Array} modifiers
     * @param {string=} action passed in
     */
    function _pickBestAction(key, modifiers, action) {

        // if no action was picked in we should try to pick the one
        // that we think would work best for this key
        if (!action) {
            action = _getReverseMap()[key] ? 'keydown' : 'keypress';
        }

        // modifier keys don't work as expected with keypress,
        // switch to keydown
        if (action == 'keypress' && modifiers.length) {
            action = 'keydown';
        }

        return action;
    }

    /**
     * Converts from a string key combination to an array
     *
     * @param  {string} combination like "command+shift+l"
     * @return {Array}
     */
    function _keysFromString(combination) {
        if (combination === '+') {
            return ['+'];
        }

        combination = combination.replace(/\+{2}/g, '+plus');
        return combination.split('+');
    }

    /**
     * Gets info for a specific key combination
     *
     * @param  {string} combination key combination ("command+s" or "a" or "*")
     * @param  {string=} action
     * @returns {Object}
     */
    function _getKeyInfo(combination, action) {
        var keys;
        var key;
        var i;
        var modifiers = [];

        // take the keys from this pattern and figure out what the actual
        // pattern is all about
        keys = _keysFromString(combination);

        for (i = 0; i < keys.length; ++i) {
            key = keys[i];

            // normalize key names
            if (_SPECIAL_ALIASES[key]) {
                key = _SPECIAL_ALIASES[key];
            }

            // if this is not a keypress event then we should
            // be smart about using shift keys
            // this will only work for US keyboards however
            if (action && action != 'keypress' && _SHIFT_MAP[key]) {
                key = _SHIFT_MAP[key];
                modifiers.push('shift');
            }

            // if this key is a modifier then add it to the list of modifiers
            if (_isModifier(key)) {
                modifiers.push(key);
            }
        }

        // depending on what the key combination is
        // we will try to pick the best event for it
        action = _pickBestAction(key, modifiers, action);

        return {
            key: key,
            modifiers: modifiers,
            action: action
        };
    }

    function _belongsTo(element, ancestor) {
        if (element === null || element === document) {
            return false;
        }

        if (element === ancestor) {
            return true;
        }

        return _belongsTo(element.parentNode, ancestor);
    }

    function Mousetrap(targetElement) {
        var self = this;

        targetElement = targetElement || document;

        if (!(self instanceof Mousetrap)) {
            return new Mousetrap(targetElement);
        }

        /**
         * element to attach key events to
         *
         * @type {Element}
         */
        self.target = targetElement;

        /**
         * a list of all the callbacks setup via Mousetrap.bind()
         *
         * @type {Object}
         */
        self._callbacks = {};

        /**
         * direct map of string combinations to callbacks used for trigger()
         *
         * @type {Object}
         */
        self._directMap = {};

        /**
         * keeps track of what level each sequence is at since multiple
         * sequences can start out with the same sequence
         *
         * @type {Object}
         */
        var _sequenceLevels = {};

        /**
         * variable to store the setTimeout call
         *
         * @type {null|number}
         */
        var _resetTimer;

        /**
         * temporary state where we will ignore the next keyup
         *
         * @type {boolean|string}
         */
        var _ignoreNextKeyup = false;

        /**
         * temporary state where we will ignore the next keypress
         *
         * @type {boolean}
         */
        var _ignoreNextKeypress = false;

        /**
         * are we currently inside of a sequence?
         * type of action ("keyup" or "keydown" or "keypress") or false
         *
         * @type {boolean|string}
         */
        var _nextExpectedAction = false;

        /**
         * resets all sequence counters except for the ones passed in
         *
         * @param {Object} doNotReset
         * @returns void
         */
        function _resetSequences(doNotReset) {
            doNotReset = doNotReset || {};

            var activeSequences = false,
                key;

            for (key in _sequenceLevels) {
                if (doNotReset[key]) {
                    activeSequences = true;
                    continue;
                }
                _sequenceLevels[key] = 0;
            }

            if (!activeSequences) {
                _nextExpectedAction = false;
            }
        }

        /**
         * finds all callbacks that match based on the keycode, modifiers,
         * and action
         *
         * @param {string} character
         * @param {Array} modifiers
         * @param {Event|Object} e
         * @param {string=} sequenceName - name of the sequence we are looking for
         * @param {string=} combination
         * @param {number=} level
         * @returns {Array}
         */
        function _getMatches(character, modifiers, e, sequenceName, combination, level) {
            var i;
            var callback;
            var matches = [];
            var action = e.type;

            // if there are no events related to this keycode
            if (!self._callbacks[character]) {
                return [];
            }

            // if a modifier key is coming up on its own we should allow it
            if (action == 'keyup' && _isModifier(character)) {
                modifiers = [character];
            }

            // loop through all callbacks for the key that was pressed
            // and see if any of them match
            for (i = 0; i < self._callbacks[character].length; ++i) {
                callback = self._callbacks[character][i];

                // if a sequence name is not specified, but this is a sequence at
                // the wrong level then move onto the next match
                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {
                    continue;
                }

                // if the action we are looking for doesn't match the action we got
                // then we should keep going
                if (action != callback.action) {
                    continue;
                }

                // if this is a keypress event and the meta key and control key
                // are not pressed that means that we need to only look at the
                // character, otherwise check the modifiers as well
                //
                // chrome will not fire a keypress if meta or control is down
                // safari will fire a keypress if meta or meta+shift is down
                // firefox will fire a keypress if meta or control is down
                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {

                    // when you bind a combination or sequence a second time it
                    // should overwrite the first one.  if a sequenceName or
                    // combination is specified in this call it does just that
                    //
                    // @todo make deleting its own method?
                    var deleteCombo = !sequenceName && callback.combo == combination;
                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;
                    if (deleteCombo || deleteSequence) {
                        self._callbacks[character].splice(i, 1);
                    }

                    matches.push(callback);
                }
            }

            return matches;
        }

        /**
         * actually calls the callback function
         *
         * if your callback function returns false this will use the jquery
         * convention - prevent default and stop propogation on the event
         *
         * @param {Function} callback
         * @param {Event} e
         * @returns void
         */
        function _fireCallback(callback, e, combo, sequence) {

            // if this event should not happen stop here
            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {
                return;
            }

            if (callback(e, combo) === false) {
                _preventDefault(e);
                _stopPropagation(e);
            }
        }

        /**
         * handles a character key event
         *
         * @param {string} character
         * @param {Array} modifiers
         * @param {Event} e
         * @returns void
         */
        self._handleKey = function(character, modifiers, e) {
            var callbacks = _getMatches(character, modifiers, e);
            var i;
            var doNotReset = {};
            var maxLevel = 0;
            var processedSequenceCallback = false;

            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence
            for (i = 0; i < callbacks.length; ++i) {
                if (callbacks[i].seq) {
                    maxLevel = Math.max(maxLevel, callbacks[i].level);
                }
            }

            // loop through matching callbacks for this key event
            for (i = 0; i < callbacks.length; ++i) {

                // fire for all sequence callbacks
                // this is because if for example you have multiple sequences
                // bound such as "g i" and "g t" they both need to fire the
                // callback for matching g cause otherwise you can only ever
                // match the first one
                if (callbacks[i].seq) {

                    // only fire callbacks for the maxLevel to prevent
                    // subsequences from also firing
                    //
                    // for example 'a option b' should not cause 'option b' to fire
                    // even though 'option b' is part of the other sequence
                    //
                    // any sequences that do not match here will be discarded
                    // below by the _resetSequences call
                    if (callbacks[i].level != maxLevel) {
                        continue;
                    }

                    processedSequenceCallback = true;

                    // keep a list of which sequences were matches for later
                    doNotReset[callbacks[i].seq] = 1;
                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);
                    continue;
                }

                // if there were no sequence matches but we are still here
                // that means this is a regular match so we should fire that
                if (!processedSequenceCallback) {
                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);
                }
            }

            // if the key you pressed matches the type of sequence without
            // being a modifier (ie "keyup" or "keypress") then we should
            // reset all sequences that were not matched by this event
            //
            // this is so, for example, if you have the sequence "h a t" and you
            // type "h e a r t" it does not match.  in this case the "e" will
            // cause the sequence to reset
            //
            // modifier keys are ignored because you can have a sequence
            // that contains modifiers such as "enter ctrl+space" and in most
            // cases the modifier key will be pressed before the next key
            //
            // also if you have a sequence such as "ctrl+b a" then pressing the
            // "b" key will trigger a "keypress" and a "keydown"
            //
            // the "keydown" is expected when there is a modifier, but the
            // "keypress" ends up matching the _nextExpectedAction since it occurs
            // after and that causes the sequence to reset
            //
            // we ignore keypresses in a sequence that directly follow a keydown
            // for the same character
            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;
            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {
                _resetSequences(doNotReset);
            }

            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';
        };

        /**
         * handles a keydown event
         *
         * @param {Event} e
         * @returns void
         */
        function _handleKeyEvent(e) {

            // normalize e.which for key events
            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion
            if (typeof e.which !== 'number') {
                e.which = e.keyCode;
            }

            var character = _characterFromEvent(e);

            // no character found then stop
            if (!character) {
                return;
            }

            // need to use === for the character check because the character can be 0
            if (e.type == 'keyup' && _ignoreNextKeyup === character) {
                _ignoreNextKeyup = false;
                return;
            }

            self.handleKey(character, _eventModifiers(e), e);
        }

        /**
         * called to set a 1 second timeout on the specified sequence
         *
         * this is so after each key press in the sequence you have 1 second
         * to press the next key before you have to start over
         *
         * @returns void
         */
        function _resetSequenceTimer() {
            clearTimeout(_resetTimer);
            _resetTimer = setTimeout(_resetSequences, 1000);
        }

        /**
         * binds a key sequence to an event
         *
         * @param {string} combo - combo specified in bind call
         * @param {Array} keys
         * @param {Function} callback
         * @param {string=} action
         * @returns void
         */
        function _bindSequence(combo, keys, callback, action) {

            // start off by adding a sequence level record for this combination
            // and setting the level to 0
            _sequenceLevels[combo] = 0;

            /**
             * callback to increase the sequence level for this sequence and reset
             * all other sequences that were active
             *
             * @param {string} nextAction
             * @returns {Function}
             */
            function _increaseSequence(nextAction) {
                return function() {
                    _nextExpectedAction = nextAction;
                    ++_sequenceLevels[combo];
                    _resetSequenceTimer();
                };
            }

            /**
             * wraps the specified callback inside of another function in order
             * to reset all sequence counters as soon as this sequence is done
             *
             * @param {Event} e
             * @returns void
             */
            function _callbackAndReset(e) {
                _fireCallback(callback, e, combo);

                // we should ignore the next key up if the action is key down
                // or keypress.  this is so if you finish a sequence and
                // release the key the final key will not trigger a keyup
                if (action !== 'keyup') {
                    _ignoreNextKeyup = _characterFromEvent(e);
                }

                // weird race condition if a sequence ends with the key
                // another sequence begins with
                setTimeout(_resetSequences, 10);
            }

            // loop through keys one at a time and bind the appropriate callback
            // function.  for any key leading up to the final one it should
            // increase the sequence. after the final, it should reset all sequences
            //
            // if an action is specified in the original bind call then that will
            // be used throughout.  otherwise we will pass the action that the
            // next key in the sequence should match.  this allows a sequence
            // to mix and match keypress and keydown events depending on which
            // ones are better suited to the key provided
            for (var i = 0; i < keys.length; ++i) {
                var isFinal = i + 1 === keys.length;
                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);
                _bindSingle(keys[i], wrappedCallback, action, combo, i);
            }
        }

        /**
         * binds a single keyboard combination
         *
         * @param {string} combination
         * @param {Function} callback
         * @param {string=} action
         * @param {string=} sequenceName - name of sequence if part of sequence
         * @param {number=} level - what part of the sequence the command is
         * @returns void
         */
        function _bindSingle(combination, callback, action, sequenceName, level) {

            // store a direct mapped reference for use with Mousetrap.trigger
            self._directMap[combination + ':' + action] = callback;

            // make sure multiple spaces in a row become a single space
            combination = combination.replace(/\s+/g, ' ');

            var sequence = combination.split(' ');
            var info;

            // if this pattern is a sequence of keys then run through this method
            // to reprocess each pattern one key at a time
            if (sequence.length > 1) {
                _bindSequence(combination, sequence, callback, action);
                return;
            }

            info = _getKeyInfo(combination, action);

            // make sure to initialize array if this is the first time
            // a callback is added for this key
            self._callbacks[info.key] = self._callbacks[info.key] || [];

            // remove an existing match if there is one
            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);

            // add this call back to the array
            // if it is a sequence put it at the beginning
            // if not put it at the end
            //
            // this is important because the way these are processed expects
            // the sequence ones to come first
            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({
                callback: callback,
                modifiers: info.modifiers,
                action: info.action,
                seq: sequenceName,
                level: level,
                combo: combination
            });
        }

        /**
         * binds multiple combinations to the same callback
         *
         * @param {Array} combinations
         * @param {Function} callback
         * @param {string|undefined} action
         * @returns void
         */
        self._bindMultiple = function(combinations, callback, action) {
            for (var i = 0; i < combinations.length; ++i) {
                _bindSingle(combinations[i], callback, action);
            }
        };

        // start!
        _addEvent(targetElement, 'keypress', _handleKeyEvent);
        _addEvent(targetElement, 'keydown', _handleKeyEvent);
        _addEvent(targetElement, 'keyup', _handleKeyEvent);
    }

    /**
     * binds an event to mousetrap
     *
     * can be a single key, a combination of keys separated with +,
     * an array of keys, or a sequence of keys separated by spaces
     *
     * be sure to list the modifier keys first to make sure that the
     * correct key ends up getting bound (the last key in the pattern)
     *
     * @param {string|Array} keys
     * @param {Function} callback
     * @param {string=} action - 'keypress', 'keydown', or 'keyup'
     * @returns void
     */
    Mousetrap.prototype.bind = function(keys, callback, action) {
        var self = this;
        keys = keys instanceof Array ? keys : [keys];
        self._bindMultiple.call(self, keys, callback, action);
        return self;
    };

    /**
     * unbinds an event to mousetrap
     *
     * the unbinding sets the callback function of the specified key combo
     * to an empty function and deletes the corresponding key in the
     * _directMap dict.
     *
     * TODO: actually remove this from the _callbacks dictionary instead
     * of binding an empty function
     *
     * the keycombo+action has to be exactly the same as
     * it was defined in the bind method
     *
     * @param {string|Array} keys
     * @param {string} action
     * @returns void
     */
    Mousetrap.prototype.unbind = function(keys, action) {
        var self = this;
        return self.bind.call(self, keys, function() {}, action);
    };

    /**
     * triggers an event that has already been bound
     *
     * @param {string} keys
     * @param {string=} action
     * @returns void
     */
    Mousetrap.prototype.trigger = function(keys, action) {
        var self = this;
        if (self._directMap[keys + ':' + action]) {
            self._directMap[keys + ':' + action]({}, keys);
        }
        return self;
    };

    /**
     * resets the library back to its initial state.  this is useful
     * if you want to clear out the current keyboard shortcuts and bind
     * new ones - for example if you switch to another page
     *
     * @returns void
     */
    Mousetrap.prototype.reset = function() {
        var self = this;
        self._callbacks = {};
        self._directMap = {};
        return self;
    };

    /**
     * should we stop this event before firing off callbacks
     *
     * @param {Event} e
     * @param {Element} element
     * @return {boolean}
     */
    Mousetrap.prototype.stopCallback = function(e, element) {
        var self = this;

        // if the element has the class "mousetrap" then no need to stop
        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {
            return false;
        }

        if (_belongsTo(element, self.target)) {
            return false;
        }

        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,
        // not the initial event target in the shadow tree. Note that not all events cross the
        // shadow boundary.
        // For shadow trees with `mode: 'open'`, the initial event target is the first element in
        // the events composed path. For shadow trees with `mode: 'closed'`, the initial event
        // target cannot be obtained.
        if ('composedPath' in e && typeof e.composedPath === 'function') {
            // For open shadow trees, update `element` so that the following check works.
            var initialEventTarget = e.composedPath()[0];
            if (initialEventTarget !== e.target) {
                element = initialEventTarget;
            }
        }

        // stop for input, select, and textarea
        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;
    };

    /**
     * exposes _handleKey publicly so it can be overwritten by extensions
     */
    Mousetrap.prototype.handleKey = function() {
        var self = this;
        return self._handleKey.apply(self, arguments);
    };

    /**
     * allow custom key mappings
     */
    Mousetrap.addKeycodes = function(object) {
        for (var key in object) {
            if (object.hasOwnProperty(key)) {
                _MAP[key] = object[key];
            }
        }
        _REVERSE_MAP = null;
    };

    /**
     * Init the global mousetrap functions
     *
     * This method is needed to allow the global mousetrap functions to work
     * now that mousetrap is a constructor function.
     */
    Mousetrap.init = function() {
        var documentMousetrap = Mousetrap(document);
        for (var method in documentMousetrap) {
            if (method.charAt(0) !== '_') {
                Mousetrap[method] = (function(method) {
                    return function() {
                        return documentMousetrap[method].apply(documentMousetrap, arguments);
                    };
                } (method));
            }
        }
    };

    Mousetrap.init();

    // expose mousetrap to the global object
    window.Mousetrap = Mousetrap;

    // expose as a common js module
    if (typeof module !== 'undefined' && module.exports) {
        module.exports = Mousetrap;
    }

    // expose mousetrap as an AMD module
    if (typeof define === 'function' && define.amd) {
        define(function() {
            return Mousetrap;
        });
    }
}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);

var esri2geo = {};
(function () {
  function toGeoJSON(data, cb){
    if(typeof data === 'string'){
      if(cb){
        ajax(data, function(err, d){
        	toGeoJSON(d,cb);
        });
        return;
      }else{
        throw new TypeError('callback needed for url');
      }
    }
    var outPut = { "type": "FeatureCollection","features": []};
    var fl = data.features.length;
    var i = 0;
    while(fl>i){
      var ft = data.features[i];
      /* as only ESRI based products care if all the features are the same type of geometry, check for geometry type at a feature level*/
      var outFT = {
        "type": "Feature",
        "properties":prop(ft.attributes)
      };
      if(ft.geometry.x){
        //check if it's a point
        outFT.geometry=point(ft.geometry);
      }else if(ft.geometry.points){
        //check if it is a multipoint
        outFT.geometry=points(ft.geometry);
      }else if(ft.geometry.paths){
        //check if a line (or "ARC" in ESRI terms)
        outFT.geometry=line(ft.geometry);
      }else if(ft.geometry.rings){
        //check if a poly.
        outFT.geometry=poly(ft.geometry);
      }
      outPut.features.push(outFT);
      i++;
    }
    cb(null, outPut);
  }
  function point(geometry){
    //this one is easy
    return {"type": "Point","coordinates": [geometry.x,geometry.y]};  
  }
  function points(geometry){
    //checks if the multipoint only has one point, if so exports as point instead
    if(geometry.points.length===1){
      return {"type": "Point","coordinates": geometry.points[0]};
    }else{
      return { "type": "MultiPoint","coordinates":geometry.points}; 
    }
  }
  function line(geometry){
    //checks if their are multiple paths or just one
    if(geometry.paths.length===1){
      return {"type": "LineString","coordinates": geometry.paths[0]};
    }else{
      return { "type": "MultiLineString","coordinates":geometry.paths}; 
    }
  }
  function poly(geometry){
    //first we check for some easy cases, like if their is only one ring
    if(geometry.rings.length===1){
      return {"type": "Polygon","coordinates": geometry.rings};
    }else{
      /*if it isn't that easy then we have to start checking ring direction, basically the ring goes clockwise its part of the polygon,
      if it goes counterclockwise it is a hole in the polygon, but geojson does it by haveing an array with the first element be the polygons 
      and the next elements being holes in it*/
      return decodePolygon(geometry.rings);
    }
  }
  function decodePolygon(a){
    //returns the feature
    var coords = [],type;
    var len = a.length;
    var i = 0;
    var len2 = coords.length-1;
    while(len>i){
      if(ringIsClockwise(a[i])){
        coords.push([a[i]]);
        len2++;
      }else{
        coords[len2].push(a[i]);
      }
      i++;
    }
    if(coords.length===1){
      type="Polygon";
    }else{
      type="MultiPolygon";
    }
    return {"type":type,"coordinates":(coords.length===1)?coords[0]:coords};
  }
  /*determine if polygon ring coordinates are clockwise. clockwise signifies outer ring, counter-clockwise an inner ring
  or hole. this logic was found at http://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-
  points-are-in-clockwise-order
  this code taken from http://esri.github.com/geojson-utils/src/jsonConverters.js by James Cardona (MIT lisense)
  */
  function ringIsClockwise(ringToTest) {
    var total = 0,
      i = 0,
      rLength = ringToTest.length,
      pt1 = ringToTest[i],
      pt2;
    for (i; i < rLength - 1; i++) {
      pt2 = ringToTest[i + 1];
      total += (pt2[0] - pt1[0]) * (pt2[1] + pt1[1]);
      pt1 = pt2;
    }
    return (total >= 0);
  }
  function prop(a){
    var p = {};
    for(var k in a){
      if(a[k]){
        p[k]=a[k];  
      }
    }
    return p;
  }


  function ajax(url, cb){
    if(typeof module !== "undefined"){
        var request = require("request");
        request(url,{json:true},function(e,r,b){
          cb(e,b);
        });
        return;
    }
    // the following is from JavaScript: The Definitive Guide
    var response;
    var req = new XMLHttpRequest();
    req.onreadystatechange = function() {
      if (req.readyState === 4 && req.status === 200) {
          cb(null, JSON.parse(req.responseText));
      }
    };
    req.open("GET", url);
    req.send();
  }
  if (typeof module !== "undefined"){
    module.exports = toGeoJSON;
  } else {
    esri2geo.toGeoJSON = toGeoJSON;
  }
}());
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.osmtogeojson=e()}}(function(){return function e(n,t,r){function o(i,s){if(!t[i]){if(!n[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[i]={exports:{}};n[i][0].call(c.exports,function(e){var t=n[i][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,n,t){var r=e("./lodash.custom.js"),o=e("geojson-rewind"),a={};e("osm-polygon-features").forEach(function(e){if("all"===e.polygon)a[e.key]=!0;else{var n="whitelist"===e.polygon?"included_values":"excluded_values",t={};e.values.forEach(function(e){t[e]=!0}),a[e.key]={},a[e.key][n]=t}});var i={};i=function(e,n){function t(e){function n(e){var n=r.clone(e);n.lat=e.center.lat,n.lon=e.center.lon,n.__is_center_placeholder=!0,i.push(n)}function t(e){function n(e,n,r){var o={type:"node",id:"_"+t.type+"/"+t.id+"bounds"+r,lat:e,lon:n};t.nodes.push(o.id),i.push(o)}var t=r.clone(e);t.nodes=[],n(t.bounds.minlat,t.bounds.minlon,1),n(t.bounds.maxlat,t.bounds.minlon,2),n(t.bounds.maxlat,t.bounds.maxlon,3),n(t.bounds.minlat,t.bounds.maxlon,4),t.nodes.push(t.nodes[0]),t.__is_bounds_placeholder=!0,l.push(t)}function o(e){function n(e,n,t){var r={type:"node",id:t,lat:e,lon:n,__is_uninteresting:!0};i.push(r)}r.isArray(e.nodes)||(e.nodes=e.geometry.map(function(e){return null!==e?"_anonymous@"+e.lat+"/"+e.lon:"_anonymous@unknown_location"})),e.geometry.forEach(function(t,r){t&&n(t.lat,t.lon,e.nodes[r])})}function a(e){function n(e,n,t){var r={type:"node",id:t,lat:e,lon:n};i.push(r)}function t(e,n){function t(e,n){var t={type:"node",id:"_anonymous@"+e+"/"+n,lat:e,lon:n,__is_uninteresting:!0};r.nodes.push(t.id),i.push(t)}if(!l.some(function(e){return"way"==e.type&&e.id==n})){var r={type:"way",id:n,nodes:[]};e.forEach(function(e){e?t(e.lat,e.lon):r.nodes.push(void 0)}),l.push(r)}}e.members.forEach(function(e,r){"node"==e.type?e.lat&&n(e.lat,e.lon,e.ref):"way"==e.type&&e.geometry&&(e.ref="_fullGeom"+e.ref,t(e.geometry,e.ref))})}for(var i=new Array,l=new Array,u=new Array,c=0;c<e.elements.length;c++)switch(e.elements[c].type){case"node":var f=e.elements[c];i.push(f);break;case"way":var p=r.clone(e.elements[c]);p.nodes=r.clone(p.nodes),l.push(p),p.center&&n(p),p.geometry?o(p):p.bounds&&t(p);break;case"relation":var y=r.clone(e.elements[c]);y.members=r.clone(y.members),u.push(y);var g=y.members&&y.members.some(function(e){return"node"==e.type&&e.lat||"way"==e.type&&e.geometry&&e.geometry.length>0});y.center&&n(y),g?a(y):y.bounds&&t(y)}return s(i,l,u)}function i(e){function n(e,n,t){e.hasAttribute(t)&&(n[t]=e.getAttribute(t))}function t(e,t){var o=r.clone(e);n(t,o,"lat"),n(t,o,"lon"),o.__is_center_placeholder=!0,l.push(o)}function o(e,n){function t(e,n,t){var r={type:"node",id:"_"+o.type+"/"+o.id+"bounds"+t,lat:e,lon:n};o.nodes.push(r.id),l.push(r)}var o=r.clone(e);o.nodes=[],t(n.getAttribute("minlat"),n.getAttribute("minlon"),1),t(n.getAttribute("maxlat"),n.getAttribute("minlon"),2),t(n.getAttribute("maxlat"),n.getAttribute("maxlon"),3),t(n.getAttribute("minlat"),n.getAttribute("maxlon"),4),o.nodes.push(o.nodes[0]),o.__is_bounds_placeholder=!0,u.push(o)}function a(e,n){function t(e,n,t){var r={type:"node",id:t,lat:e,lon:n,__is_uninteresting:!0};return l.push(r),r.id}r.isArray(e.nodes)||(e.nodes=[],r.each(n,function(n,t){e.nodes.push("_anonymous@"+n.getAttribute("lat")+"/"+n.getAttribute("lon"))})),r.each(n,function(n,r){n.getAttribute("lat")&&t(n.getAttribute("lat"),n.getAttribute("lon"),e.nodes[r])})}function i(e,n){function t(e,n,t){var r={type:"node",id:t,lat:e,lon:n};l.push(r)}function o(e,n){function t(e,n){var t={type:"node",id:"_anonymous@"+e+"/"+n,lat:e,lon:n,__is_uninteresting:!0};o.nodes.push(t.id),l.push(t)}if(!u.some(function(e){return"way"==e.type&&e.id==n})){var o={type:"way",id:n,nodes:[]};r.each(e,function(e){e.getAttribute("lat")?t(e.getAttribute("lat"),e.getAttribute("lon")):o.nodes.push(void 0)}),u.push(o)}}r.each(n,function(n,r){"node"==e.members[r].type?n.getAttribute("lat")&&t(n.getAttribute("lat"),n.getAttribute("lon"),e.members[r].ref):"way"==e.members[r].type&&n.getElementsByTagName("nd").length>0&&(e.members[r].ref="_fullGeom"+e.members[r].ref,o(n.getElementsByTagName("nd"),e.members[r].ref))})}var l=new Array,u=new Array,c=new Array;r.each(e.getElementsByTagName("node"),function(e,t){var o={};r.each(e.getElementsByTagName("tag"),function(e){o[e.getAttribute("k")]=e.getAttribute("v")});var a={type:"node"};n(e,a,"id"),n(e,a,"lat"),n(e,a,"lon"),n(e,a,"version"),n(e,a,"timestamp"),n(e,a,"changeset"),n(e,a,"uid"),n(e,a,"user"),r.isEmpty(o)||(a.tags=o),l.push(a)});var f,p;return r.each(e.getElementsByTagName("way"),function(e,i){var s={},l=[];r.each(e.getElementsByTagName("tag"),function(e){s[e.getAttribute("k")]=e.getAttribute("v")});var c=!1;r.each(e.getElementsByTagName("nd"),function(e,n){var t;(t=e.getAttribute("ref"))&&(l[n]=t),!c&&e.getAttribute("lat")&&(c=!0)});var y={type:"way"};n(e,y,"id"),n(e,y,"version"),n(e,y,"timestamp"),n(e,y,"changeset"),n(e,y,"uid"),n(e,y,"user"),l.length>0&&(y.nodes=l),r.isEmpty(s)||(y.tags=s),(f=e.getElementsByTagName("center")[0])&&t(y,f),c?a(y,e.getElementsByTagName("nd")):(p=e.getElementsByTagName("bounds")[0])&&o(y,p),u.push(y)}),r.each(e.getElementsByTagName("relation"),function(e,a){var s={},l=[];r.each(e.getElementsByTagName("tag"),function(e){s[e.getAttribute("k")]=e.getAttribute("v")});var u=!1;r.each(e.getElementsByTagName("member"),function(e,t){l[t]={},n(e,l[t],"ref"),n(e,l[t],"role"),n(e,l[t],"type"),(!u&&"node"==l[t].type&&e.getAttribute("lat")||"way"==l[t].type&&e.getElementsByTagName("nd").length>0)&&(u=!0)});var y={type:"relation"};n(e,y,"id"),n(e,y,"version"),n(e,y,"timestamp"),n(e,y,"changeset"),n(e,y,"uid"),n(e,y,"user"),l.length>0&&(y.members=l),r.isEmpty(s)||(y.tags=s),(f=e.getElementsByTagName("center")[0])&&t(y,f),u?i(y,e.getElementsByTagName("member")):(p=e.getElementsByTagName("bounds")[0])&&o(y,p),c.push(y)}),s(l,u,c)}function s(e,t,a){function i(e,t){if("object"!=typeof t&&(t={}),"function"==typeof n.uninterestingTags)return!n.uninterestingTags(e,t);for(var r in e)if(n.uninterestingTags[r]!==!0&&t[r]!==!0&&t[r]!==e[r])return!0;return!1}function s(e){var n={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(var t in n)void 0===n[t]&&delete n[t];return n}function u(e,t){function o(e){for(var t,r,o,a,i,s,l=function(e){return e[0]},f=function(e){return e[e.length-1]},p=[];e.length;)for(t=e.pop().nodes.slice(),p.push(t);e.length&&l(t)!==f(t);){for(r=l(t),o=f(t),a=0;a<e.length;a++){if(s=e[a].nodes,o===l(s)){i=t.push,s=s.slice(1);break}if(o===f(s)){i=t.push,s=s.slice(0,-1).reverse();break}if(r==f(s)){i=t.unshift,s=s.slice(0,-1);break}if(r==l(s)){i=t.unshift,s=s.slice(1).reverse();break}s=i=null}if(!s){n.verbose&&console.warn("Multipolygon",u+"/"+c,"contains unclosed ring geometry");break}e.splice(a,1),i.apply(t,s)}return p}function a(e){var n,t,r=function(e,n){for(var t=0;t<n.length;t++)if(a(n[t],e))return!0;return!1},o=function(e){return e.map(function(e){return[+e.lat,+e.lon]})},a=function(e,n){for(var t=e[0],r=e[1],o=!1,a=0,i=n.length-1;a<n.length;i=a++){var s=n[a][0],l=n[a][1],u=n[i][0],c=n[i][1],f=l>r!=c>r&&t<(u-s)*(r-l)/(c-l)+s;f&&(o=!o)}return o};for(e=o(e),n=0;n<f.length;n++)if(t=o(f[n]),r(t,e))return n}var i,l=!1,u=P?"way":"relation",c="number"==typeof e.id?e.id:+e.id.replace("_fullGeom","");i=t.members.filter(function(e){return"way"===e.type}),i=i.map(function(e){var t=g[e.ref];return void 0===t?(n.verbose&&console.warn("Multipolygon",u+"/"+c,"tainted by a missing way",e.type+"/"+e.ref),void(l=!0)):{id:e.ref,role:e.role||"outer",way:t,nodes:t.nodes.filter(function(t){return void 0!==t||(l=!0,n.verbose&&console.warn("Multipolygon",u+"/"+c,"tainted by a way",e.type+"/"+e.ref,"with a missing node"),!1)})}}),i=r.compact(i);var f,p;f=o(i.filter(function(e){return"outer"===e.role})),p=o(i.filter(function(e){return"inner"===e.role}));var y;y=f.map(function(e){return[e]});for(var d=0;d<p.length;d++){var b=a(p[d]);void 0!==b?y[b].push(p[d]):n.verbose&&console.warn("Multipolygon",u+"/"+c,"contains an inner ring with no containing outer")}var m=[];if(m=r.compact(y.map(function(e){var t=r.compact(e.map(function(e){return e.length<4?void(n.verbose&&console.warn("Multipolygon",u+"/"+c,"contains a ring with less than four nodes")):r.compact(e.map(function(e){return[+e.lon,+e.lat]}))}));return 0==t.length?void(n.verbose&&console.warn("Multipolygon",u+"/"+c,"contains an empty ring cluster")):t})),0==m.length)return n.verbose&&console.warn("Multipolygon",u+"/"+c,"contains no coordinates"),!1;var v="MultiPolygon";1===m.length&&(v="Polygon",m=m[0]);var w={type:"Feature",id:e.type+"/"+c,properties:{type:e.type,id:c,tags:e.tags||{},relations:h[e.type][e.id]||[],meta:s(e)},geometry:{type:v,coordinates:m}};return l&&(n.verbose&&console.warn("Multipolygon",u+"/"+c,"is tainted"),w.properties.tainted=!0),w}for(var c=new Object,f=0;f<e.length;f++)void 0!==e[f].lat?c[e[f].id]=e[f]:n.verbose&&console.warn("Node",e[f].type+"/"+e[f].id,"ignored because it has no coordinates");for(var p=new Object,f=0;f<e.length;f++)"undefined"!=typeof e[f].tags&&i(e[f].tags)&&(p[e[f].id]=!0);for(var f=0;f<a.length;f++)if(r.isArray(a[f].members))for(var y=0;y<a[f].members.length;y++)"node"==a[f].members[y].type&&(p[a[f].members[y].ref]=!0);else n.verbose&&console.warn("Relation",a[f].type+"/"+a[f].id,"ignored because it has no members");for(var g=new Object,d=new Object,f=0;f<t.length;f++)if(r.isArray(t[f].nodes)){g[t[f].id]=t[f];for(var y=0;y<t[f].nodes.length;y++)d[t[f].nodes[y]]=!0,t[f].nodes[y]=c[t[f].nodes[y]]}else n.verbose&&console.warn("Way",t[f].type+"/"+t[f].id,"ignored because it has no nodes");for(var b=new Array,f=0;f<e.length;f++)d[e[f].id]&&!p[e[f].id]||e[f].__is_uninteresting||b.push(e[f]);for(var m=new Array,f=0;f<a.length;f++)r.isArray(a[f].members)?m[a[f].id]=a[f]:n.verbose&&console.warn("Relation",a[f].type+"/"+a[f].id,"ignored because it has no members");for(var h={node:{},way:{},relation:{}},f=0;f<a.length;f++)if(r.isArray(a[f].members))for(var y=0;y<a[f].members.length;y++){var v=a[f].members[y].type,w=a[f].members[y].ref;"number"!=typeof w&&(w=w.replace("_fullGeom","")),h[v]?("undefined"==typeof h[v][w]&&(h[v][w]=[]),h[v][w].push({role:a[f].members[y].role,rel:a[f].id,reltags:a[f].tags})):n.verbose&&console.warn("Relation",a[f].type+"/"+a[f].id,"member",v+"/"+w,"ignored because it has an invalid type")}else n.verbose&&console.warn("Relation",a[f].type+"/"+a[f].id,"ignored because it has no members");var _,x={type:"FeatureCollection",features:new Array};for(f=0;f<b.length;f++)if("undefined"!=typeof b[f].lon&&"undefined"!=typeof b[f].lat){var k={type:"Feature",id:b[f].type+"/"+b[f].id,properties:{type:b[f].type,id:b[f].id,tags:b[f].tags||{},relations:h.node[b[f].id]||[],meta:s(b[f])},geometry:{type:"Point",coordinates:[+b[f].lon,+b[f].lat]}};b[f].__is_center_placeholder&&(k.properties.geometry="center"),x.features.push(k)}else n.verbose&&console.warn("POI",b[f].type+"/"+b[f].id,"ignored because it lacks coordinates");for(var A={type:"FeatureCollection",features:new Array},j={type:"FeatureCollection",features:new Array},f=0;f<a.length;f++)if("undefined"!=typeof a[f].tags&&("multipolygon"==a[f].tags.type||"boundary"==a[f].tags.type)){if(!r.isArray(a[f].members)){n.verbose&&console.warn("Multipolygon",a[f].type+"/"+a[f].id,"ignored because it has no members");continue}for(var E=0,y=0;y<a[f].members.length;y++)"outer"==a[f].members[y].role?E++:n.verbose&&"inner"!=a[f].members[y].role&&console.warn("Multipolygon",a[f].type+"/"+a[f].id,"member",a[f].members[y].type+"/"+a[f].members[y].ref,'ignored because it has an invalid role: "'+a[f].members[y].role+'"');if(a[f].members.forEach(function(e){g[e.ref]&&("outer"!==e.role||i(g[e.ref].tags,a[f].tags)||(g[e.ref].is_multipolygon_outline=!0),"inner"!==e.role||i(g[e.ref].tags)||(g[e.ref].is_multipolygon_outline=!0))}),0==E){n.verbose&&console.warn("Multipolygon relation",a[f].type+"/"+a[f].id,"ignored because it has no outer ways");continue}var P=!1;1!=E||i(a[f].tags,{type:!0})||(P=!0);var k=null;if(P){var O=a[f].members.filter(function(e){return"outer"===e.role})[0];if(O=g[O.ref],void 0===O){n.verbose&&console.warn("Multipolygon relation",a[f].type+"/"+a[f].id,"ignored because outer way",O.type+"/"+O.ref,"is missing");continue}O.is_multipolygon_outline=!0,k=u(O,a[f])}else k=u(a[f],a[f]);if(k===!1){n.verbose&&console.warn("Multipolygon relation",a[f].type+"/"+a[f].id,"ignored because it has invalid geometry");continue}j.features.push(k)}for(var f=0;f<t.length;f++)if(r.isArray(t[f].nodes)){if(!t[f].is_multipolygon_outline){"number"!=typeof t[f].id&&(t[f].id=+t[f].id.replace("_fullGeom","")),t[f].tainted=!1,t[f].hidden=!1;var T=new Array;for(y=0;y<t[f].nodes.length;y++)"object"==typeof t[f].nodes[y]?T.push([+t[f].nodes[y].lon,+t[f].nodes[y].lat]):(n.verbose&&console.warn("Way",t[f].type+"/"+t[f].id,"is tainted by an invalid node"),t[f].tainted=!0);if(T.length<=1)n.verbose&&console.warn("Way",t[f].type+"/"+t[f].id,"ignored because it contains too few nodes");else{var N="LineString";"undefined"!=typeof t[f].nodes[0]&&t[f].nodes[0]===t[f].nodes[t[f].nodes.length-1]&&("undefined"!=typeof t[f].tags&&l(t[f].tags)||t[f].__is_bounds_placeholder)&&(N="Polygon",T=[T]);var k={type:"Feature",id:t[f].type+"/"+t[f].id,properties:{type:t[f].type,id:t[f].id,tags:t[f].tags||{},relations:h.way[t[f].id]||[],meta:s(t[f])},geometry:{type:N,coordinates:T}};t[f].tainted&&(n.verbose&&console.warn("Way",t[f].type+"/"+t[f].id,"is tainted"),k.properties.tainted=!0),t[f].__is_bounds_placeholder&&(k.properties.geometry="bounds"),"LineString"==N?A.features.push(k):j.features.push(k)}}}else n.verbose&&console.warn("Way",t[f].type+"/"+t[f].id,"ignored because it has no nodes");return _={type:"FeatureCollection",features:[]},_.features=_.features.concat(j.features),_.features=_.features.concat(A.features),_.features=_.features.concat(x.features),n.flatProperties&&_.features.forEach(function(e){e.properties=r.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})}),_=o(_,!0)}function l(e){var t=n.polygonFeatures;if("function"==typeof t)return t(e);if("no"===e.area)return!1;for(var r in e){var o=e[r],a=t[r];if("undefined"!=typeof a&&"no"!==o){if(a===!0)return!0;if(a.included_values&&a.included_values[o]===!0)return!0;if(a.excluded_values&&a.excluded_values[o]!==!0)return!0}}return!1}n=r.merge({verbose:!1,flatProperties:!1,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:a},n);var u;return u="undefined"!=typeof XMLDocument&&e instanceof XMLDocument||"undefined"==typeof XMLDocument&&e.childNodes?i(e):t(e)},i.toGeojson=i,n.exports=i},{"./lodash.custom.js":2,"geojson-rewind":3,"osm-polygon-features":6}],2:[function(e,n,t){(function(e){(function(){function r(){return S.pop()||[]}function o(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function a(e){e.length=0,S.length<M&&S.push(e)}function i(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,a=Array(o<0?0:o);++r<o;)a[r]=e[n+r];return a}function s(){}function l(e){function n(){if(r){var e=i(r);pe.apply(e,arguments)}if(this instanceof n){var a=c(t.prototype),s=t.apply(a,e||arguments);return x(s)?s:a}return t.apply(o,e||arguments)}var t=e[0],r=e[2],o=e[4];return ke(n,e),n}function u(e,n,t,s,l){if(t){var c=t(e);if("undefined"!=typeof c)return c}var f=x(e);if(!f)return e;var p=se.call(e);if(!z[p]||!_e.nodeClass&&o(e))return e;var y=ve[p];switch(p){case G:case H:return new y((+e));case q:case V:return new y(e);case X:return c=y(e.source,L.exec(e)),c.lastIndex=e.lastIndex,c}var g=Ae(e);if(n){var d=!s;s||(s=r()),l||(l=r());for(var b=s.length;b--;)if(s[b]==e)return l[b];c=g?y(e.length):{}}else c=g?i(e):Se({},e);return g&&(fe.call(e,"index")&&(c.index=e.index),fe.call(e,"input")&&(c.input=e.input)),n?(s.push(e),l.push(c),(g?Ne:Me)(e,function(e,r){c[r]=u(e,n,t,s,l)}),d&&(a(s),a(l)),c):c}function c(e,n){return x(e)?be(e):{}}function f(e,n,t){if("function"!=typeof e)return T;if("undefined"==typeof n||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(_e.funcNames&&(r=!e.name),r=r||!_e.funcDecomp,!r)){var o=ue.call(e);_e.funcNames||(r=!B.test(o)),r||(r=F.test(o),ke(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)};case 4:return function(t,r,o,a){return e.call(n,t,r,o,a)}}return O(e,n)}function p(e){function n(){var e=u?s:this;if(o){var b=i(o);pe.apply(b,arguments)}if((a||y)&&(b||(b=i(arguments)),a&&pe.apply(b,a),y&&b.length<l))return r|=16,p([t,g?r:r&-4,b,null,s,l]);if(b||(b=arguments),f&&(t=e[d]),this instanceof n){e=c(t.prototype);var m=t.apply(e,b);return x(m)?m:e}return t.apply(e,b)}var t=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=1&r,f=2&r,y=4&r,g=8&r,d=t;return ke(n,e),n}function y(e,n,t,r,o){(Ae(n)?E:Me)(n,function(n,a){var i,s,l=n,u=e[a];if(n&&((s=Ae(n))||Le(n))){for(var c=r.length;c--;)if(i=r[c]==n){u=o[c];break}if(!i){var f;t&&(l=t(u,n),(f="undefined"!=typeof l)&&(u=l)),f||(u=s?Ae(u)?u:[]:Le(u)?u:{}),r.push(n),o.push(u),f||y(u,n,t,r,o)}}else t&&(l=t(u,n),"undefined"==typeof l&&(l=n)),"undefined"!=typeof l&&(u=l);e[a]=u})}function g(e,n,t,r,o,a){var s=1&n,u=2&n,c=4&n,f=16&n,y=32&n;if(!u&&!_(e))throw new TypeError;f&&!t.length&&(n&=-17,f=t=!1),y&&!r.length&&(n&=-33,y=r=!1);var d=e&&e.__bindData__;if(d&&d!==!0)return d=i(d),d[2]&&(d[2]=i(d[2])),d[3]&&(d[3]=i(d[3])),!s||1&d[1]||(d[4]=o),!s&&1&d[1]&&(n|=8),!c||4&d[1]||(d[5]=a),f&&pe.apply(d[2]||(d[2]=[]),t),y&&ge.apply(d[3]||(d[3]=[]),r),d[1]|=n,g.apply(null,d);var b=1==n||17===n?l:p;return b([e,n,t,r,o,a])}function d(){K.shadowedProps=I,K.array=K.bottom=K.loop=K.top="",K.init="iterable",K.useHas=!0;for(var e,n=0;e=arguments[n];n++)for(var t in e)K[t]=e[t];var r=K.args;K.firstArg=/^[^,]+/.exec(r)[0];var o=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+xe(K)+"\n}");return o(f,U,oe,fe,C,h,Ae,A,K.keys,ae,Q,we,V,ie,se)}function b(e){return"function"==typeof e&&le.test(e)}function m(e){var n,t;return!(!(e&&se.call(e)==$&&(n=e.constructor,!_(n)||n instanceof n))||!_e.argsClass&&h(e)||!_e.nodeClass&&o(e))&&(_e.ownLast?(Ce(e,function(e,n,r){return t=fe.call(r,n),!1}),t!==!1):(Ce(e,function(e,n){t=n}),"undefined"==typeof t||fe.call(e,t)))}function h(e){return e&&"object"==typeof e&&"number"==typeof e.length&&se.call(e)==D||!1}function v(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t=n,n=!1),u(e,n,"function"==typeof t&&f(t,r,1))}function w(e){var n=!0;if(!e)return n;var t=se.call(e),r=e.length;return t==R||t==V||(_e.argsClass?t==D:h(e))||t==$&&"number"==typeof r&&_(e.splice)?!r:(Me(e,function(){return n=!1}),n)}function _(e){return"function"==typeof e}function x(e){return!(!e||!Q[typeof e])}function A(e){return"string"==typeof e||e&&"object"==typeof e&&se.call(e)==V||!1}function j(e){var n=arguments,t=2;if(!x(e))return e;if("number"!=typeof n[2]&&(t=n.length),t>3&&"function"==typeof n[t-2])var o=f(n[--t-1],n[t--],2);else t>2&&"function"==typeof n[t-1]&&(o=n[--t]);for(var s=i(arguments,1,t),l=-1,u=r(),c=r();++l<t;)y(e,s[l],o,u,c);return a(u),a(c),e}function E(e,n,t){if(n&&"undefined"==typeof t&&Ae(e))for(var r=-1,o=e.length;++r<o&&n(e[r],r,e)!==!1;);else Ne(e,n,t);return e}function P(e){for(var n=-1,t=e?e.length:0,r=[];++n<t;){var o=e[n];o&&r.push(o)}return r}function O(e,n){return arguments.length>2?g(e,17,i(arguments,2),null,n):g(e,1,null,null,n)}function T(e){return e}function N(){}var S=[],C={},M=40,L=/\w*$/,B=/^\s*function[ \n\r\t]+\w/,F=/\bthis\b/,I=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],D="[object Arguments]",R="[object Array]",G="[object Boolean]",H="[object Date]",U="[object Error]",W="[object Function]",q="[object Number]",$="[object Object]",X="[object RegExp]",V="[object String]",z={};z[W]=!1,z[D]=z[R]=z[G]=z[H]=z[q]=z[$]=z[X]=z[V]=!0;var J={configurable:!1,enumerable:!1,value:null,writable:!1},K={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Q={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Y=Q[typeof window]&&window||this,Z=Q[typeof t]&&t&&!t.nodeType&&t,ee=Q[typeof n]&&n&&!n.nodeType&&n,ne=ee&&ee.exports===Z&&Z,te=Q[typeof e]&&e;!te||te.global!==te&&te.window!==te||(Y=te);var re=[],oe=Error.prototype,ae=Object.prototype,ie=String.prototype,se=ae.toString,le=RegExp("^"+String(se).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ue=Function.prototype.toString,ce=b(ce=Object.getPrototypeOf)&&ce,fe=ae.hasOwnProperty,pe=re.push,ye=ae.propertyIsEnumerable,ge=re.unshift,de=function(){try{var e={},n=b(n=Object.defineProperty)&&n,t=n(e,e,e)&&n}catch(e){}return t}(),be=b(be=Object.create)&&be,me=b(me=Array.isArray)&&me,he=b(he=Object.keys)&&he,ve={};ve[R]=Array,ve[G]=Boolean,ve[H]=Date,ve[W]=Function,ve[$]=Object,ve[q]=Number,ve[X]=RegExp,ve[V]=String;var we={};we[R]=we[H]=we[q]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},we[G]=we[V]={constructor:!0,toString:!0,valueOf:!0},we[U]=we[W]=we[X]={constructor:!0,toString:!0},we[$]={constructor:!0},function(){for(var e=I.length;e--;){var n=I[e];for(var t in we)fe.call(we,t)&&!fe.call(we[t],n)&&(we[t][n]=!1)}}();var _e=s.support={};!function(){var e=function(){this.x=1},n={0:1,length:1},t=[];e.prototype={valueOf:1,y:1};for(var r in new e)t.push(r);for(r in arguments);_e.argsClass=se.call(arguments)==D,_e.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),_e.enumErrorProps=ye.call(oe,"message")||ye.call(oe,"name"),_e.enumPrototypes=ye.call(e,"prototype"),_e.funcDecomp=!b(Y.WinRTError)&&F.test(function(){return this}),_e.funcNames="string"==typeof Function.name,_e.nonEnumArgs=0!=r,_e.nonEnumShadows=!/valueOf/.test(t),_e.ownLast="x"!=t[0],_e.spliceObjects=(re.splice.call(n,0,1),!n[0]),_e.unindexedChars="x"[0]+Object("x")[0]!="xx";try{_e.nodeClass=!(se.call(document)==$&&!({toString:0}+""))}catch(e){_e.nodeClass=!0}}(1);var xe=function(e){var n="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(n+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",_e.unindexedChars&&(n+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),n+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):_e.nonEnumArgs&&(n+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),_e.enumPrototypes&&(n+="\n  var skipProto = typeof iterable == 'function';\n  "),_e.enumErrorProps&&(n+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var t=[];if(_e.enumPrototypes&&t.push('!(skipProto && index == "prototype")'),_e.enumErrorProps&&t.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)n+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",t.length&&(n+="    if ("+t.join(" && ")+") {\n  "),n+=e.loop+";    ",t.length&&(n+="\n    }"),n+="\n  }  ";else if(n+="\n  for (index in iterable) {\n",e.useHas&&t.push("hasOwnProperty.call(iterable, index)"),t.length&&(n+="    if ("+t.join(" && ")+") {\n  "),n+=e.loop+";    ",t.length&&(n+="\n    }"),n+="\n  }    ",_e.nonEnumShadows){for(n+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)n+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(n+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),n+=") {\n      "+e.loop+";\n    }      ";n+="\n  }    "}return(e.array||_e.nonEnumArgs)&&(n+="\n}"),n+=e.bottom+";\nreturn result"};be||(c=function(){function e(){}return function(n){if(x(n)){e.prototype=n;var t=new e;e.prototype=null}return t||Y.Object()}}());var ke=de?function(e,n){J.value=n,de(e,"__bindData__",J)}:N;_e.argsClass||(h=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&fe.call(e,"callee")&&!ye.call(e,"callee")||!1});var Ae=me||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&se.call(e)==R||!1},je=d({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),Ee=he?function(e){return x(e)?_e.enumPrototypes&&"function"==typeof e||_e.nonEnumArgs&&e.length&&h(e)?je(e):he(e):[]}:je,Pe={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:Ee,loop:"if (callback(iterable[index], index, collection) === false) return result"},Oe={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:Ee,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Te={top:"if (!objectTypes[typeof iterable]) return result;\n"+Pe.top,array:!1},Ne=d(Pe),Se=d(Oe,{top:Oe.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Ce=d(Pe,Te,{useHas:!1}),Me=d(Pe,Te);_(/x/)&&(_=function(e){return"function"==typeof e&&se.call(e)==W});var Le=ce?function(e){if(!e||se.call(e)!=$||!_e.argsClass&&h(e))return!1;var n=e.valueOf,t=b(n)&&(t=ce(n))&&ce(t);return t?e==t||ce(e)==t:m(e)}:m;s.assign=Se,s.bind=O,s.compact=P,s.forEach=E,s.forIn=Ce,s.forOwn=Me,s.keys=Ee,s.merge=j,s.each=E,s.extend=Se,s.clone=v,s.identity=T,s.isArguments=h,s.isArray=Ae,s.isEmpty=w,s.isFunction=_,s.isObject=x,s.isPlainObject=Le,s.isString=A,s.noop=N,s.VERSION="2.4.1",Z&&ee&&ne&&((ee.exports=s)._=s)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){function r(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(o(r,n)),e;case"Feature":return e.geometry=r(e.geometry,n),e;case"Polygon":case"MultiPolygon":return a(e,n);default:return e}}function o(e,n){return function(t){return e(t,n)}}function a(e,n){return"Polygon"===e.type?e.coordinates=i(e.coordinates,n):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(o(i,n))),e}function i(e,n){n=!!n,e[0]=s(e[0],!n);for(var t=1;t<e.length;t++)e[t]=s(e[t],n);return e}function s(e,n){return l(e)===n?e:e.reverse()}function l(e){return u.ring(e)>=0}var u=e("geojson-area");n.exports=r},{"geojson-area":4}],4:[function(e,n,t){function r(e){if("Polygon"===e.type)return o(e.coordinates);if("MultiPolygon"===e.type){for(var n=0,t=0;t<e.coordinates.length;t++)n+=o(e.coordinates[t]);return n}return null}function o(e){var n=0;if(e&&e.length>0){n+=Math.abs(a(e[0]));for(var t=1;t<e.length;t++)n-=Math.abs(a(e[t]))}return n}function a(e){var n=0;if(e.length>2){for(var t,r,o=0;o<e.length-1;o++)t=e[o],r=e[o+1],n+=i(r[0]-t[0])*(2+Math.sin(i(t[1]))+Math.sin(i(r[1])));n=n*s.RADIUS*s.RADIUS/2}return n}function i(e){return e*Math.PI/180}var s=e("wgs84");n.exports.geometry=r,n.exports.ring=a},{wgs84:5}],5:[function(e,n,t){n.exports.RADIUS=6378137,n.exports.FLATTENING=1/298.257223563,n.exports.POLAR_RADIUS=6356752.3142},{}],6:[function(e,n,t){n.exports=e("./polygon-features.json")},{"./polygon-features.json":7}],7:[function(e,n,t){n.exports=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"}]},{}]},{},[1])(1)});
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.shpwrite = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

// when used in node, this will actually load the util module we depend on
// versus loading the builtin util module as happens otherwise
// this is a bug in node module loading as far as I am concerned
var util = require('util/');

var pSlice = Array.prototype.slice;
var hasOwn = Object.prototype.hasOwnProperty;

// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  }
  else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = stackStartFunction.name;
      var idx = out.indexOf('\n' + fn_name);
      if (idx >= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function replacer(key, value) {
  if (util.isUndefined(value)) {
    return '' + value;
  }
  if (util.isNumber(value) && !isFinite(value)) {
    return value.toString();
  }
  if (util.isFunction(value) || util.isRegExp(value)) {
    return value.toString();
  }
  return value;
}

function truncate(s, n) {
  if (util.isString(s)) {
    return s.length < n ? s : s.slice(0, n);
  } else {
    return s;
  }
}

function getMessage(self) {
  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +
         self.operator + ' ' +
         truncate(JSON.stringify(self.expected, replacer), 128);
}

// At present only the three keys mentioned above are used and
// understood by the spec. Implementations or sub modules can pass
// other keys to the AssertionError's constructor - they will be
// ignored.

// 3. All of the following functions must throw an AssertionError
// when a corresponding condition is not met, with a message that
// may be undefined if not provided.  All assertion methods provide
// both the actual and expected values to the assertion error for
// display purposes.

function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, !!guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};

function _deepEqual(actual, expected) {
  // 7.1. All identical values are equivalent, as determined by ===.
  if (actual === expected) {
    return true;

  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {
    if (actual.length != expected.length) return false;

    for (var i = 0; i < actual.length; i++) {
      if (actual[i] !== expected[i]) return false;
    }

    return true;

  // 7.2. If the expected value is a Date object, the actual value is
  // equivalent if it is also a Date object that refers to the same time.
  } else if (util.isDate(actual) && util.isDate(expected)) {
    return actual.getTime() === expected.getTime();

  // 7.3 If the expected value is a RegExp object, the actual value is
  // equivalent if it is also a RegExp object with the same source and
  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {
    return actual.source === expected.source &&
           actual.global === expected.global &&
           actual.multiline === expected.multiline &&
           actual.lastIndex === expected.lastIndex &&
           actual.ignoreCase === expected.ignoreCase;

  // 7.4. Other pairs that do not both pass typeof value == 'object',
  // equivalence is determined by ==.
  } else if (!util.isObject(actual) && !util.isObject(expected)) {
    return actual == expected;

  // 7.5 For all other Object pairs, including Array objects, equivalence is
  // determined by having the same number of owned properties (as verified
  // with Object.prototype.hasOwnProperty.call), the same set of keys
  // (although not necessarily the same order), equivalent values for every
  // corresponding key, and an identical 'prototype' property. Note: this
  // accounts for both named and indexed properties on Arrays.
  } else {
    return objEquiv(actual, expected);
  }
}

function isArguments(object) {
  return Object.prototype.toString.call(object) == '[object Arguments]';
}

function objEquiv(a, b) {
  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))
    return false;
  // an identical 'prototype' property.
  if (a.prototype !== b.prototype) return false;
  // if one is a primitive, the other must be same
  if (util.isPrimitive(a) || util.isPrimitive(b)) {
    return a === b;
  }
  var aIsArgs = isArguments(a),
      bIsArgs = isArguments(b);
  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))
    return false;
  if (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    return _deepEqual(a, b);
  }
  var ka = objectKeys(a),
      kb = objectKeys(b),
      key, i;
  // having the same number of owned properties (keys incorporates
  // hasOwnProperty)
  if (ka.length != kb.length)
    return false;
  //the same set of keys (although not necessarily the same order),
  ka.sort();
  kb.sort();
  //~~~cheap key test
  for (i = ka.length - 1; i >= 0; i--) {
    if (ka[i] != kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i >= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key])) return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  } else if (actual instanceof expected) {
    return true;
  } else if (expected.call({}, actual) === true) {
    return true;
  }

  return false;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (util.isString(expected)) {
    message = expected;
    expected = null;
  }

  try {
    block();
  } catch (e) {
    actual = e;
  }

  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow && !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  if (!shouldThrow && expectedException(actual, expected)) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow && actual && expected &&
      !expectedException(actual, expected)) || (!shouldThrow && actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/message) {
  _throws.apply(this, [false].concat(pSlice.call(arguments)));
};

assert.ifError = function(err) { if (err) {throw err;}};

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};

},{"util/":53}],2:[function(require,module,exports){
;(function (exports) {
  'use strict'

  var i
  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
  var lookup = []
  for (i = 0; i < code.length; i++) {
    lookup[i] = code[i]
  }
  var revLookup = []

  for (i = 0; i < code.length; ++i) {
    revLookup[code.charCodeAt(i)] = i
  }
  revLookup['-'.charCodeAt(0)] = 62
  revLookup['_'.charCodeAt(0)] = 63

  var Arr = (typeof Uint8Array !== 'undefined')
    ? Uint8Array
    : Array

  function decode (elt) {
    var v = revLookup[elt.charCodeAt(0)]
    return v !== undefined ? v : -1
  }

  function b64ToByteArray (b64) {
    var i, j, l, tmp, placeHolders, arr

    if (b64.length % 4 > 0) {
      throw new Error('Invalid string. Length must be a multiple of 4')
    }

    // the number of equal signs (place holders)
    // if there are two placeholders, than the two characters before it
    // represent one byte
    // if there is only one, then the three characters before it represent 2 bytes
    // this is just a cheap hack to not do indexOf twice
    var len = b64.length
    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0

    // base64 is 4/3 + up to two characters of the original data
    arr = new Arr(b64.length * 3 / 4 - placeHolders)

    // if there are placeholders, only get up to the last complete 4 chars
    l = placeHolders > 0 ? b64.length - 4 : b64.length

    var L = 0

    function push (v) {
      arr[L++] = v
    }

    for (i = 0, j = 0; i < l; i += 4, j += 3) {
      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))
      push((tmp & 0xFF0000) >> 16)
      push((tmp & 0xFF00) >> 8)
      push(tmp & 0xFF)
    }

    if (placeHolders === 2) {
      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)
      push(tmp & 0xFF)
    } else if (placeHolders === 1) {
      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)
      push((tmp >> 8) & 0xFF)
      push(tmp & 0xFF)
    }

    return arr
  }

  function encode (num) {
    return lookup[num]
  }

  function tripletToBase64 (num) {
    return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)
  }

  function encodeChunk (uint8, start, end) {
    var temp
    var output = []
    for (var i = start; i < end; i += 3) {
      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
      output.push(tripletToBase64(temp))
    }
    return output.join('')
  }

  function uint8ToBase64 (uint8) {
    var i
    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes
    var output = ''
    var parts = []
    var temp, length
    var maxChunkLength = 16383 // must be multiple of 3

    // go through the array every three bytes, we'll deal with trailing stuff later

    for (i = 0, length = uint8.length - extraBytes; i < length; i += maxChunkLength) {
      parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > length ? length : (i + maxChunkLength)))
    }

    // pad the end with zeros, but make sure to not forget the extra bytes
    switch (extraBytes) {
      case 1:
        temp = uint8[uint8.length - 1]
        output += encode(temp >> 2)
        output += encode((temp << 4) & 0x3F)
        output += '=='
        break
      case 2:
        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])
        output += encode(temp >> 10)
        output += encode((temp >> 4) & 0x3F)
        output += encode((temp << 2) & 0x3F)
        output += '='
        break
      default:
        break
    }

    parts.push(output)

    return parts.join('')
  }

  exports.toByteArray = b64ToByteArray
  exports.fromByteArray = uint8ToBase64
}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))

},{}],3:[function(require,module,exports){
(function (global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

'use strict'

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('isarray')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50
Buffer.poolSize = 8192 // not used by this implementation

var rootParent = {}

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.foo = function () { return 42 }
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */
function Buffer (arg) {
  if (!(this instanceof Buffer)) {
    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.
    if (arguments.length > 1) return new Buffer(arg, arguments[1])
    return new Buffer(arg)
  }

  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    this.length = 0
    this.parent = undefined
  }

  // Common case.
  if (typeof arg === 'number') {
    return fromNumber(this, arg)
  }

  // Slightly less common case.
  if (typeof arg === 'string') {
    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')
  }

  // Unusual.
  return fromObject(this, arg)
}

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function fromNumber (that, length) {
  that = allocate(that, length < 0 ? 0 : checked(length) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < length; i++) {
      that[i] = 0
    }
  }
  return that
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'

  // Assumption: byteLength() return value is always < kMaxLength.
  var length = byteLength(string, encoding) | 0
  that = allocate(that, length)

  that.write(string, encoding)
  return that
}

function fromObject (that, object) {
  if (Buffer.isBuffer(object)) return fromBuffer(that, object)

  if (isArray(object)) return fromArray(that, object)

  if (object == null) {
    throw new TypeError('must start with number, buffer, array or string')
  }

  if (typeof ArrayBuffer !== 'undefined') {
    if (object.buffer instanceof ArrayBuffer) {
      return fromTypedArray(that, object)
    }
    if (object instanceof ArrayBuffer) {
      return fromArrayBuffer(that, object)
    }
  }

  if (object.length) return fromArrayLike(that, object)

  return fromJsonObject(that, object)
}

function fromBuffer (that, buffer) {
  var length = checked(buffer.length) | 0
  that = allocate(that, length)
  buffer.copy(that, 0, 0, length)
  return that
}

function fromArray (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

// Duplicate of fromArray() to keep fromArray() monomorphic.
function fromTypedArray (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  // Truncating the elements is probably not what people expect from typed
  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior
  // of the old Buffer constructor.
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(array)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromTypedArray(that, new Uint8Array(array))
  }
  return that
}

function fromArrayLike (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.
// Returns a zero-length buffer for inputs that don't conform to the spec.
function fromJsonObject (that, object) {
  var array
  var length = 0

  if (object.type === 'Buffer' && isArray(object.data)) {
    array = object.data
    length = checked(array.length) | 0
  }
  that = allocate(that, length)

  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
} else {
  // pre-set for values that may exist in the future
  Buffer.prototype.length = undefined
  Buffer.prototype.parent = undefined
}

function allocate (that, length) {
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that.length = length
  }

  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1
  if (fromPool) that.parent = rootParent

  return that
}

function checked (length) {
  // Note: cannot use `length < kMaxLength` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (subject, encoding) {
  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)

  var buf = new Buffer(subject, encoding)
  delete buf.parent
  return buf
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  var i = 0
  var len = Math.min(x, y)
  while (i < len) {
    if (a[i] !== b[i]) break

    ++i
  }

  if (i !== len) {
    x = a[i]
    y = b[i]
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'raw':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')

  if (list.length === 0) {
    return new Buffer(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; i++) {
      length += list[i].length
    }
  }

  var buf = new Buffer(length)
  var pos = 0
  for (i = 0; i < list.length; i++) {
    var item = list[i]
    item.copy(buf, pos)
    pos += item.length
  }
  return buf
}

function byteLength (string, encoding) {
  if (typeof string !== 'string') string = '' + string

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'binary':
      // Deprecated
      case 'raw':
      case 'raws':
        return len
      case 'utf8':
      case 'utf-8':
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  start = start | 0
  end = end === undefined || end === Infinity ? this.length : end | 0

  if (!encoding) encoding = 'utf8'
  if (start < 0) start = 0
  if (end > this.length) end = this.length
  if (end <= start) return ''

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'binary':
        return binarySlice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return 0
  return Buffer.compare(this, b)
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset) {
  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff
  else if (byteOffset < -0x80000000) byteOffset = -0x80000000
  byteOffset >>= 0

  if (this.length === 0) return -1
  if (byteOffset >= this.length) return -1

  // Negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)

  if (typeof val === 'string') {
    if (val.length === 0) return -1 // special case: looking for empty string always fails
    return String.prototype.indexOf.call(this, val, byteOffset)
  }
  if (Buffer.isBuffer(val)) {
    return arrayIndexOf(this, val, byteOffset)
  }
  if (typeof val === 'number') {
    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {
      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)
    }
    return arrayIndexOf(this, [ val ], byteOffset)
  }

  function arrayIndexOf (arr, val, byteOffset) {
    var foundIndex = -1
    for (var i = 0; byteOffset + i < arr.length; i++) {
      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex
      } else {
        foundIndex = -1
      }
    }
    return -1
  }

  throw new TypeError('val must be string, number or Buffer')
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new Error('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; i++) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) throw new Error('Invalid hex string')
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function binaryWrite (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    var swap = encoding
    encoding = offset
    offset = length | 0
    length = swap
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'binary':
        return binaryWrite(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function binarySlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; i++) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; i++) {
      newBuf[i] = this[i + start]
    }
  }

  if (newBuf.length) newBuf.parent = this.parent || this

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('index out of range')
  if (offset < 0) throw new RangeError('index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; i--) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; i++) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// fill(value, start=0, end=buffer.length)
Buffer.prototype.fill = function fill (value, start, end) {
  if (!value) value = 0
  if (!start) start = 0
  if (!end) end = this.length

  if (end < start) throw new RangeError('end < start')

  // Fill 0 bytes; we're done
  if (end === start) return
  if (this.length === 0) return

  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')
  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')

  var i
  if (typeof value === 'number') {
    for (i = start; i < end; i++) {
      this[i] = value
    }
  } else {
    var bytes = utf8ToBytes(value.toString())
    var len = bytes.length
    for (i = start; i < end; i++) {
      this[i] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; i++) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; i++) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"base64-js":2,"ieee754":10,"isarray":4}],4:[function(require,module,exports){
var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};

},{}],5:[function(require,module,exports){
module.exports.structure = require('./src/structure');

},{"./src/structure":9}],6:[function(require,module,exports){
var fieldSize = require('./fieldsize');

var types = {
    string: 'C',
    number: 'N',
    boolean: 'L',
    // type to use if all values of a field are null
    null: 'C'
};

module.exports.multi = multi;
module.exports.bytesPer = bytesPer;
module.exports.obj = obj;

function multi(features) {
    var fields = {};
    features.forEach(collect);
    function collect(f) { inherit(fields, f); }
    return obj(fields);
}

/**
 * @param {Object} a
 * @param {Object} b
 * @returns {Object}
 */
function inherit(a, b) {
    for (var i in b) {
        var isDef = typeof b[i] !== 'undefined' && b[i] !== null;
        if (typeof a[i] === 'undefined' || isDef) {
          a[i] = b[i];
        }
    }
    return a;
}

function obj(_) {
    var fields = {}, o = [];
    for (var p in _) fields[p] = _[p] === null ? 'null' : typeof _[p];
    for (var n in fields) {
        var t = types[fields[n]];
        if(t){
             o.push({
                name: n,
                type: t,
                size: fieldSize[t]
            });
        }
    }
    return o;
}

/**
 * @param {Array} fields
 * @returns {Array}
 */
function bytesPer(fields) {
    // deleted flag
    return fields.reduce(function(memo, f) { return memo + f.size; }, 1);
}

},{"./fieldsize":7}],7:[function(require,module,exports){
module.exports = {
    // string
    C: 254,
    // boolean
    L: 1,
    // date
    D: 8,
    // number
    N: 18,
    // number
    M: 18,
    // number, float
    F: 18,
    // number
    B: 8,
};

},{}],8:[function(require,module,exports){
/**
 * @param {string} str
 * @param {number} len
 * @param {string} char
 * @returns {string}
 */
module.exports.lpad = function lpad(str, len, char) {
    while (str.length < len) { str = char + str; } return str;
};

/**
 * @param {string} str
 * @param {number} len
 * @param {string} char
 * @returns {string}
 */
module.exports.rpad = function rpad(str, len, char) {
    while (str.length < len) { str = str + char; } return str;
};

/**
 * @param {object} view
 * @param {number} fieldLength
 * @param {string} str
 * @param {number} offset
 * @returns {number}
 */
module.exports.writeField = function writeField(view, fieldLength, str, offset) {
    for (var i = 0; i < fieldLength; i++) {
        view.setUint8(offset, str.charCodeAt(i)); offset++;
    }
    return offset;
};

},{}],9:[function(require,module,exports){
var fieldSize = require('./fieldsize'),
    lib = require('./lib'),
    fields = require('./fields');

/**
 * @param {Array} data
 * @param {Array} meta
 * @returns {Object} view
 */
module.exports = function structure(data, meta) {

    var field_meta = meta || fields.multi(data),
        fieldDescLength = (32 * field_meta.length) + 1,
        bytesPerRecord = fields.bytesPer(field_meta), // deleted flag
        buffer = new ArrayBuffer(
            // field header
            fieldDescLength +
            // header
            32 +
            // contents
            (bytesPerRecord * data.length) +
            // EOF marker
            1
    ),
        now = new Date(),
        view = new DataView(buffer);

    // version number - dBase III
    view.setUint8(0, 0x03);
    // date of last update
    view.setUint8(1, now.getFullYear() - 1900);
    view.setUint8(2, now.getMonth());
    view.setUint8(3, now.getDate());
    // number of records
    view.setUint32(4, data.length, true);

    // length of header
    var headerLength = fieldDescLength + 32;
    view.setUint16(8, headerLength, true);
    // length of each record
    view.setUint16(10, bytesPerRecord, true);

    // Terminator
    view.setInt8(32 + fieldDescLength - 1, 0x0D);

    field_meta.forEach(function(f, i) {
        // field name
        f.name.split('').slice(0, 8).forEach(function(c, x) {
            view.setInt8(32 + i * 32 + x, c.charCodeAt(0));
        });
        // field type
        view.setInt8(32 + i * 32 + 11, f.type.charCodeAt(0));
        // field length
        view.setInt8(32 + i * 32 + 16, f.size);
        if (f.type == 'N') view.setInt8(32 + i * 32 + 17, 0);
    });

    offset = fieldDescLength + 32;

    data.forEach(function(row, num) {
        // delete flag: this is not deleted
        view.setUint8(offset, 32);
        offset++;
        field_meta.forEach(function(f) {
            var val = row[f.name];
            if (val === null || typeof val === 'undefined') val = '';

            switch (f.type) {
                // boolean
                case 'L':
                    view.setUint8(offset, val ? 84 : 70);
                    offset++;
                    break;

                // date
                case 'D':
                    offset = lib.writeField(view, 8,
                        lib.lpad(val.toString(), 8, ' '), offset);
                    break;

                // number
                case 'N':
                    offset = lib.writeField(view, f.size,
                        lib.lpad(val.toString(), f.size, ' ').substr(0, 18),
                        offset);
                    break;

                // string
                case 'C':
                    offset = lib.writeField(view, f.size,
                        lib.rpad(val.toString(), f.size, ' '), offset);
                    break;

                default:
                    throw new Error('Unknown field type');
            }
        });
    });

    // EOF flag
    view.setUint8(offset, 0x1A);

    return view;
};

},{"./fields":6,"./fieldsize":7,"./lib":8}],10:[function(require,module,exports){
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],11:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],12:[function(require,module,exports){
'use strict';
// private property
var _keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";


// public method for encoding
exports.encode = function(input, utf8) {
    var output = "";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    while (i < input.length) {

        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;

        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        }
        else if (isNaN(chr3)) {
            enc4 = 64;
        }

        output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4);

    }

    return output;
};

// public method for decoding
exports.decode = function(input, utf8) {
    var output = "";
    var chr1, chr2, chr3;
    var enc1, enc2, enc3, enc4;
    var i = 0;

    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

    while (i < input.length) {

        enc1 = _keyStr.indexOf(input.charAt(i++));
        enc2 = _keyStr.indexOf(input.charAt(i++));
        enc3 = _keyStr.indexOf(input.charAt(i++));
        enc4 = _keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
            output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
            output = output + String.fromCharCode(chr3);
        }

    }

    return output;

};

},{}],13:[function(require,module,exports){
'use strict';
function CompressedObject() {
    this.compressedSize = 0;
    this.uncompressedSize = 0;
    this.crc32 = 0;
    this.compressionMethod = null;
    this.compressedContent = null;
}

CompressedObject.prototype = {
    /**
     * Return the decompressed content in an unspecified format.
     * The format will depend on the decompressor.
     * @return {Object} the decompressed content.
     */
    getContent: function() {
        return null; // see implementation
    },
    /**
     * Return the compressed content in an unspecified format.
     * The format will depend on the compressed conten source.
     * @return {Object} the compressed content.
     */
    getCompressedContent: function() {
        return null; // see implementation
    }
};
module.exports = CompressedObject;

},{}],14:[function(require,module,exports){
'use strict';
exports.STORE = {
    magic: "\x00\x00",
    compress: function(content, compressionOptions) {
        return content; // no compression
    },
    uncompress: function(content) {
        return content; // no compression
    },
    compressInputType: null,
    uncompressInputType: null
};
exports.DEFLATE = require('./flate');

},{"./flate":19}],15:[function(require,module,exports){
'use strict';

var utils = require('./utils');

var table = [
    0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA,
    0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3,
    0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988,
    0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91,
    0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,
    0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7,
    0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC,
    0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5,
    0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172,
    0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,
    0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940,
    0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59,
    0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116,
    0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,
    0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,
    0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D,
    0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A,
    0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433,
    0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818,
    0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,
    0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E,
    0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457,
    0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C,
    0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65,
    0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,
    0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB,
    0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0,
    0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9,
    0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086,
    0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,
    0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4,
    0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD,
    0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A,
    0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683,
    0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,
    0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1,
    0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE,
    0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7,
    0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC,
    0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,
    0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252,
    0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B,
    0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60,
    0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79,
    0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,
    0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F,
    0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04,
    0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D,
    0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A,
    0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,
    0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38,
    0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21,
    0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E,
    0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777,
    0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,
    0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45,
    0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2,
    0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB,
    0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0,
    0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,
    0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6,
    0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF,
    0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94,
    0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D
];

/**
 *
 *  Javascript crc32
 *  http://www.webtoolkit.info/
 *
 */
module.exports = function crc32(input, crc) {
    if (typeof input === "undefined" || !input.length) {
        return 0;
    }

    var isArray = utils.getTypeOf(input) !== "string";

    if (typeof(crc) == "undefined") {
        crc = 0;
    }
    var x = 0;
    var y = 0;
    var b = 0;

    crc = crc ^ (-1);
    for (var i = 0, iTop = input.length; i < iTop; i++) {
        b = isArray ? input[i] : input.charCodeAt(i);
        y = (crc ^ b) & 0xFF;
        x = table[y];
        crc = (crc >>> 8) ^ x;
    }

    return crc ^ (-1);
};
// vim: set shiftwidth=4 softtabstop=4:

},{"./utils":32}],16:[function(require,module,exports){
'use strict';
var utils = require('./utils');

function DataReader(data) {
    this.data = null; // type : see implementation
    this.length = 0;
    this.index = 0;
}
DataReader.prototype = {
    /**
     * Check that the offset will not go too far.
     * @param {string} offset the additional offset to check.
     * @throws {Error} an Error if the offset is out of bounds.
     */
    checkOffset: function(offset) {
        this.checkIndex(this.index + offset);
    },
    /**
     * Check that the specifed index will not be too far.
     * @param {string} newIndex the index to check.
     * @throws {Error} an Error if the index is out of bounds.
     */
    checkIndex: function(newIndex) {
        if (this.length < newIndex || newIndex < 0) {
            throw new Error("End of data reached (data length = " + this.length + ", asked index = " + (newIndex) + "). Corrupted zip ?");
        }
    },
    /**
     * Change the index.
     * @param {number} newIndex The new index.
     * @throws {Error} if the new index is out of the data.
     */
    setIndex: function(newIndex) {
        this.checkIndex(newIndex);
        this.index = newIndex;
    },
    /**
     * Skip the next n bytes.
     * @param {number} n the number of bytes to skip.
     * @throws {Error} if the new index is out of the data.
     */
    skip: function(n) {
        this.setIndex(this.index + n);
    },
    /**
     * Get the byte at the specified index.
     * @param {number} i the index to use.
     * @return {number} a byte.
     */
    byteAt: function(i) {
        // see implementations
    },
    /**
     * Get the next number with a given byte size.
     * @param {number} size the number of bytes to read.
     * @return {number} the corresponding number.
     */
    readInt: function(size) {
        var result = 0,
            i;
        this.checkOffset(size);
        for (i = this.index + size - 1; i >= this.index; i--) {
            result = (result << 8) + this.byteAt(i);
        }
        this.index += size;
        return result;
    },
    /**
     * Get the next string with a given byte size.
     * @param {number} size the number of bytes to read.
     * @return {string} the corresponding string.
     */
    readString: function(size) {
        return utils.transformTo("string", this.readData(size));
    },
    /**
     * Get raw data without conversion, <size> bytes.
     * @param {number} size the number of bytes to read.
     * @return {Object} the raw data, implementation specific.
     */
    readData: function(size) {
        // see implementations
    },
    /**
     * Find the last occurence of a zip signature (4 bytes).
     * @param {string} sig the signature to find.
     * @return {number} the index of the last occurence, -1 if not found.
     */
    lastIndexOfSignature: function(sig) {
        // see implementations
    },
    /**
     * Get the next date.
     * @return {Date} the date.
     */
    readDate: function() {
        var dostime = this.readInt(4);
        return new Date(
        ((dostime >> 25) & 0x7f) + 1980, // year
        ((dostime >> 21) & 0x0f) - 1, // month
        (dostime >> 16) & 0x1f, // day
        (dostime >> 11) & 0x1f, // hour
        (dostime >> 5) & 0x3f, // minute
        (dostime & 0x1f) << 1); // second
    }
};
module.exports = DataReader;

},{"./utils":32}],17:[function(require,module,exports){
'use strict';
exports.base64 = false;
exports.binary = false;
exports.dir = false;
exports.createFolders = false;
exports.date = null;
exports.compression = null;
exports.compressionOptions = null;
exports.comment = null;
exports.unixPermissions = null;
exports.dosPermissions = null;

},{}],18:[function(require,module,exports){
'use strict';
var utils = require('./utils');

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.string2binary = function(str) {
    return utils.string2binary(str);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.string2Uint8Array = function(str) {
    return utils.transformTo("uint8array", str);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.uint8Array2String = function(array) {
    return utils.transformTo("string", array);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.string2Blob = function(str) {
    var buffer = utils.transformTo("arraybuffer", str);
    return utils.arrayBuffer2Blob(buffer);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.arrayBuffer2Blob = function(buffer) {
    return utils.arrayBuffer2Blob(buffer);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.transformTo = function(outputType, input) {
    return utils.transformTo(outputType, input);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.getTypeOf = function(input) {
    return utils.getTypeOf(input);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.checkSupport = function(type) {
    return utils.checkSupport(type);
};

/**
 * @deprecated
 * This value will be removed in a future version without replacement.
 */
exports.MAX_VALUE_16BITS = utils.MAX_VALUE_16BITS;

/**
 * @deprecated
 * This value will be removed in a future version without replacement.
 */
exports.MAX_VALUE_32BITS = utils.MAX_VALUE_32BITS;


/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.pretty = function(str) {
    return utils.pretty(str);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.findCompression = function(compressionMethod) {
    return utils.findCompression(compressionMethod);
};

/**
 * @deprecated
 * This function will be removed in a future version without replacement.
 */
exports.isRegExp = function (object) {
    return utils.isRegExp(object);
};


},{"./utils":32}],19:[function(require,module,exports){
'use strict';
var USE_TYPEDARRAY = (typeof Uint8Array !== 'undefined') && (typeof Uint16Array !== 'undefined') && (typeof Uint32Array !== 'undefined');

var pako = require("pako");
exports.uncompressInputType = USE_TYPEDARRAY ? "uint8array" : "array";
exports.compressInputType = USE_TYPEDARRAY ? "uint8array" : "array";

exports.magic = "\x08\x00";
exports.compress = function(input, compressionOptions) {
    return pako.deflateRaw(input, {
        level : compressionOptions.level || -1 // default compression
    });
};
exports.uncompress =  function(input) {
    return pako.inflateRaw(input);
};

},{"pako":35}],20:[function(require,module,exports){
'use strict';

var base64 = require('./base64');

/**
Usage:
   zip = new JSZip();
   zip.file("hello.txt", "Hello, World!").file("tempfile", "nothing");
   zip.folder("images").file("smile.gif", base64Data, {base64: true});
   zip.file("Xmas.txt", "Ho ho ho !", {date : new Date("December 25, 2007 00:00:01")});
   zip.remove("tempfile");

   base64zip = zip.generate();

**/

/**
 * Representation a of zip file in js
 * @constructor
 * @param {String=|ArrayBuffer=|Uint8Array=} data the data to load, if any (optional).
 * @param {Object=} options the options for creating this objects (optional).
 */
function JSZip(data, options) {
    // if this constructor isused without`new`, itadds `new` beforeitself:
    if(!(this instanceof JSZip)) return new JSZip(data, options);

    // object containing the files :
    // {
    //   "folder/" : {...},
    //   "folder/data.txt" : {...}
    // }
    this.files = {};

    this.comment = null;

    // Where we are in the hierarchy
    this.root = "";
    if (data) {
        this.load(data, options);
    }
    this.clone = function() {
        var newObj = new JSZip();
        for (var i in this) {
            if (typeof this[i] !== "function") {
                newObj[i] = this[i];
            }
        }
        return newObj;
    };
}
JSZip.prototype = require('./object');
JSZip.prototype.load = require('./load');
JSZip.support = require('./support');
JSZip.defaults = require('./defaults');

/**
 * @deprecated
 * This namespace will be removed in a future version without replacement.
 */
JSZip.utils = require('./deprecatedPublicUtils');

JSZip.base64 = {
    /**
     * @deprecated
     * This method will be removed in a future version without replacement.
     */
    encode : function(input) {
        return base64.encode(input);
    },
    /**
     * @deprecated
     * This method will be removed in a future version without replacement.
     */
    decode : function(input) {
        return base64.decode(input);
    }
};
JSZip.compressions = require('./compressions');
module.exports = JSZip;

},{"./base64":12,"./compressions":14,"./defaults":17,"./deprecatedPublicUtils":18,"./load":21,"./object":24,"./support":28}],21:[function(require,module,exports){
'use strict';
var base64 = require('./base64');
var ZipEntries = require('./zipEntries');
module.exports = function(data, options) {
    var files, zipEntries, i, input;
    options = options || {};
    if (options.base64) {
        data = base64.decode(data);
    }

    zipEntries = new ZipEntries(data, options);
    files = zipEntries.files;
    for (i = 0; i < files.length; i++) {
        input = files[i];
        this.file(input.fileName, input.decompressed, {
            binary: true,
            optimizedBinaryString: true,
            date: input.date,
            dir: input.dir,
            comment : input.fileComment.length ? input.fileComment : null,
            unixPermissions : input.unixPermissions,
            dosPermissions : input.dosPermissions,
            createFolders: options.createFolders
        });
    }
    if (zipEntries.zipComment.length) {
        this.comment = zipEntries.zipComment;
    }

    return this;
};

},{"./base64":12,"./zipEntries":33}],22:[function(require,module,exports){
(function (Buffer){
'use strict';
module.exports = function(data, encoding){
    return new Buffer(data, encoding);
};
module.exports.test = function(b){
    return Buffer.isBuffer(b);
};

}).call(this,require("buffer").Buffer)
},{"buffer":3}],23:[function(require,module,exports){
'use strict';
var Uint8ArrayReader = require('./uint8ArrayReader');

function NodeBufferReader(data) {
    this.data = data;
    this.length = this.data.length;
    this.index = 0;
}
NodeBufferReader.prototype = new Uint8ArrayReader();

/**
 * @see DataReader.readData
 */
NodeBufferReader.prototype.readData = function(size) {
    this.checkOffset(size);
    var result = this.data.slice(this.index, this.index + size);
    this.index += size;
    return result;
};
module.exports = NodeBufferReader;

},{"./uint8ArrayReader":29}],24:[function(require,module,exports){
'use strict';
var support = require('./support');
var utils = require('./utils');
var crc32 = require('./crc32');
var signature = require('./signature');
var defaults = require('./defaults');
var base64 = require('./base64');
var compressions = require('./compressions');
var CompressedObject = require('./compressedObject');
var nodeBuffer = require('./nodeBuffer');
var utf8 = require('./utf8');
var StringWriter = require('./stringWriter');
var Uint8ArrayWriter = require('./uint8ArrayWriter');

/**
 * Returns the raw data of a ZipObject, decompress the content if necessary.
 * @param {ZipObject} file the file to use.
 * @return {String|ArrayBuffer|Uint8Array|Buffer} the data.
 */
var getRawData = function(file) {
    if (file._data instanceof CompressedObject) {
        file._data = file._data.getContent();
        file.options.binary = true;
        file.options.base64 = false;

        if (utils.getTypeOf(file._data) === "uint8array") {
            var copy = file._data;
            // when reading an arraybuffer, the CompressedObject mechanism will keep it and subarray() a Uint8Array.
            // if we request a file in the same format, we might get the same Uint8Array or its ArrayBuffer (the original zip file).
            file._data = new Uint8Array(copy.length);
            // with an empty Uint8Array, Opera fails with a "Offset larger than array size"
            if (copy.length !== 0) {
                file._data.set(copy, 0);
            }
        }
    }
    return file._data;
};

/**
 * Returns the data of a ZipObject in a binary form. If the content is an unicode string, encode it.
 * @param {ZipObject} file the file to use.
 * @return {String|ArrayBuffer|Uint8Array|Buffer} the data.
 */
var getBinaryData = function(file) {
    var result = getRawData(file),
        type = utils.getTypeOf(result);
    if (type === "string") {
        if (!file.options.binary) {
            // unicode text !
            // unicode string => binary string is a painful process, check if we can avoid it.
            if (support.nodebuffer) {
                return nodeBuffer(result, "utf-8");
            }
        }
        return file.asBinary();
    }
    return result;
};

/**
 * Transform this._data into a string.
 * @param {function} filter a function String -> String, applied if not null on the result.
 * @return {String} the string representing this._data.
 */
var dataToString = function(asUTF8) {
    var result = getRawData(this);
    if (result === null || typeof result === "undefined") {
        return "";
    }
    // if the data is a base64 string, we decode it before checking the encoding !
    if (this.options.base64) {
        result = base64.decode(result);
    }
    if (asUTF8 && this.options.binary) {
        // JSZip.prototype.utf8decode supports arrays as input
        // skip to array => string step, utf8decode will do it.
        result = out.utf8decode(result);
    }
    else {
        // no utf8 transformation, do the array => string step.
        result = utils.transformTo("string", result);
    }

    if (!asUTF8 && !this.options.binary) {
        result = utils.transformTo("string", out.utf8encode(result));
    }
    return result;
};
/**
 * A simple object representing a file in the zip file.
 * @constructor
 * @param {string} name the name of the file
 * @param {String|ArrayBuffer|Uint8Array|Buffer} data the data
 * @param {Object} options the options of the file
 */
var ZipObject = function(name, data, options) {
    this.name = name;
    this.dir = options.dir;
    this.date = options.date;
    this.comment = options.comment;
    this.unixPermissions = options.unixPermissions;
    this.dosPermissions = options.dosPermissions;

    this._data = data;
    this.options = options;

    /*
     * This object contains initial values for dir and date.
     * With them, we can check if the user changed the deprecated metadata in
     * `ZipObject#options` or not.
     */
    this._initialMetadata = {
      dir : options.dir,
      date : options.date
    };
};

ZipObject.prototype = {
    /**
     * Return the content as UTF8 string.
     * @return {string} the UTF8 string.
     */
    asText: function() {
        return dataToString.call(this, true);
    },
    /**
     * Returns the binary content.
     * @return {string} the content as binary.
     */
    asBinary: function() {
        return dataToString.call(this, false);
    },
    /**
     * Returns the content as a nodejs Buffer.
     * @return {Buffer} the content as a Buffer.
     */
    asNodeBuffer: function() {
        var result = getBinaryData(this);
        return utils.transformTo("nodebuffer", result);
    },
    /**
     * Returns the content as an Uint8Array.
     * @return {Uint8Array} the content as an Uint8Array.
     */
    asUint8Array: function() {
        var result = getBinaryData(this);
        return utils.transformTo("uint8array", result);
    },
    /**
     * Returns the content as an ArrayBuffer.
     * @return {ArrayBuffer} the content as an ArrayBufer.
     */
    asArrayBuffer: function() {
        return this.asUint8Array().buffer;
    }
};

/**
 * Transform an integer into a string in hexadecimal.
 * @private
 * @param {number} dec the number to convert.
 * @param {number} bytes the number of bytes to generate.
 * @returns {string} the result.
 */
var decToHex = function(dec, bytes) {
    var hex = "",
        i;
    for (i = 0; i < bytes; i++) {
        hex += String.fromCharCode(dec & 0xff);
        dec = dec >>> 8;
    }
    return hex;
};

/**
 * Merge the objects passed as parameters into a new one.
 * @private
 * @param {...Object} var_args All objects to merge.
 * @return {Object} a new object with the data of the others.
 */
var extend = function() {
    var result = {}, i, attr;
    for (i = 0; i < arguments.length; i++) { // arguments is not enumerable in some browsers
        for (attr in arguments[i]) {
            if (arguments[i].hasOwnProperty(attr) && typeof result[attr] === "undefined") {
                result[attr] = arguments[i][attr];
            }
        }
    }
    return result;
};

/**
 * Transforms the (incomplete) options from the user into the complete
 * set of options to create a file.
 * @private
 * @param {Object} o the options from the user.
 * @return {Object} the complete set of options.
 */
var prepareFileAttrs = function(o) {
    o = o || {};
    if (o.base64 === true && (o.binary === null || o.binary === undefined)) {
        o.binary = true;
    }
    o = extend(o, defaults);
    o.date = o.date || new Date();
    if (o.compression !== null) o.compression = o.compression.toUpperCase();

    return o;
};

/**
 * Add a file in the current folder.
 * @private
 * @param {string} name the name of the file
 * @param {String|ArrayBuffer|Uint8Array|Buffer} data the data of the file
 * @param {Object} o the options of the file
 * @return {Object} the new file.
 */
var fileAdd = function(name, data, o) {
    // be sure sub folders exist
    var dataType = utils.getTypeOf(data),
        parent;

    o = prepareFileAttrs(o);

    if (typeof o.unixPermissions === "string") {
        o.unixPermissions = parseInt(o.unixPermissions, 8);
    }

    // UNX_IFDIR  0040000 see zipinfo.c
    if (o.unixPermissions && (o.unixPermissions & 0x4000)) {
        o.dir = true;
    }
    // Bit 4    Directory
    if (o.dosPermissions && (o.dosPermissions & 0x0010)) {
        o.dir = true;
    }

    if (o.dir) {
        name = forceTrailingSlash(name);
    }

    if (o.createFolders && (parent = parentFolder(name))) {
        folderAdd.call(this, parent, true);
    }

    if (o.dir || data === null || typeof data === "undefined") {
        o.base64 = false;
        o.binary = false;
        data = null;
        dataType = null;
    }
    else if (dataType === "string") {
        if (o.binary && !o.base64) {
            // optimizedBinaryString == true means that the file has already been filtered with a 0xFF mask
            if (o.optimizedBinaryString !== true) {
                // this is a string, not in a base64 format.
                // Be sure that this is a correct "binary string"
                data = utils.string2binary(data);
            }
        }
    }
    else { // arraybuffer, uint8array, ...
        o.base64 = false;
        o.binary = true;

        if (!dataType && !(data instanceof CompressedObject)) {
            throw new Error("The data of '" + name + "' is in an unsupported format !");
        }

        // special case : it's way easier to work with Uint8Array than with ArrayBuffer
        if (dataType === "arraybuffer") {
            data = utils.transformTo("uint8array", data);
        }
    }

    var object = new ZipObject(name, data, o);
    this.files[name] = object;
    return object;
};

/**
 * Find the parent folder of the path.
 * @private
 * @param {string} path the path to use
 * @return {string} the parent folder, or ""
 */
var parentFolder = function (path) {
    if (path.slice(-1) == '/') {
        path = path.substring(0, path.length - 1);
    }
    var lastSlash = path.lastIndexOf('/');
    return (lastSlash > 0) ? path.substring(0, lastSlash) : "";
};


/**
 * Returns the path with a slash at the end.
 * @private
 * @param {String} path the path to check.
 * @return {String} the path with a trailing slash.
 */
var forceTrailingSlash = function(path) {
    // Check the name ends with a /
    if (path.slice(-1) != "/") {
        path += "/"; // IE doesn't like substr(-1)
    }
    return path;
};
/**
 * Add a (sub) folder in the current folder.
 * @private
 * @param {string} name the folder's name
 * @param {boolean=} [createFolders] If true, automatically create sub
 *  folders. Defaults to false.
 * @return {Object} the new folder.
 */
var folderAdd = function(name, createFolders) {
    createFolders = (typeof createFolders !== 'undefined') ? createFolders : false;

    name = forceTrailingSlash(name);

    // Does this folder already exist?
    if (!this.files[name]) {
        fileAdd.call(this, name, null, {
            dir: true,
            createFolders: createFolders
        });
    }
    return this.files[name];
};

/**
 * Generate a JSZip.CompressedObject for a given zipOject.
 * @param {ZipObject} file the object to read.
 * @param {JSZip.compression} compression the compression to use.
 * @param {Object} compressionOptions the options to use when compressing.
 * @return {JSZip.CompressedObject} the compressed result.
 */
var generateCompressedObjectFrom = function(file, compression, compressionOptions) {
    var result = new CompressedObject(),
        content;

    // the data has not been decompressed, we might reuse things !
    if (file._data instanceof CompressedObject) {
        result.uncompressedSize = file._data.uncompressedSize;
        result.crc32 = file._data.crc32;

        if (result.uncompressedSize === 0 || file.dir) {
            compression = compressions['STORE'];
            result.compressedContent = "";
            result.crc32 = 0;
        }
        else if (file._data.compressionMethod === compression.magic) {
            result.compressedContent = file._data.getCompressedContent();
        }
        else {
            content = file._data.getContent();
            // need to decompress / recompress
            result.compressedContent = compression.compress(utils.transformTo(compression.compressInputType, content), compressionOptions);
        }
    }
    else {
        // have uncompressed data
        content = getBinaryData(file);
        if (!content || content.length === 0 || file.dir) {
            compression = compressions['STORE'];
            content = "";
        }
        result.uncompressedSize = content.length;
        result.crc32 = crc32(content);
        result.compressedContent = compression.compress(utils.transformTo(compression.compressInputType, content), compressionOptions);
    }

    result.compressedSize = result.compressedContent.length;
    result.compressionMethod = compression.magic;

    return result;
};




/**
 * Generate the UNIX part of the external file attributes.
 * @param {Object} unixPermissions the unix permissions or null.
 * @param {Boolean} isDir true if the entry is a directory, false otherwise.
 * @return {Number} a 32 bit integer.
 *
 * adapted from http://unix.stackexchange.com/questions/14705/the-zip-formats-external-file-attribute :
 *
 * TTTTsstrwxrwxrwx0000000000ADVSHR
 * ^^^^____________________________ file type, see zipinfo.c (UNX_*)
 *     ^^^_________________________ setuid, setgid, sticky
 *        ^^^^^^^^^________________ permissions
 *                 ^^^^^^^^^^______ not used ?
 *                           ^^^^^^ DOS attribute bits : Archive, Directory, Volume label, System file, Hidden, Read only
 */
var generateUnixExternalFileAttr = function (unixPermissions, isDir) {

    var result = unixPermissions;
    if (!unixPermissions) {
        // I can't use octal values in strict mode, hence the hexa.
        //  040775 => 0x41fd
        // 0100664 => 0x81b4
        result = isDir ? 0x41fd : 0x81b4;
    }

    return (result & 0xFFFF) << 16;
};

/**
 * Generate the DOS part of the external file attributes.
 * @param {Object} dosPermissions the dos permissions or null.
 * @param {Boolean} isDir true if the entry is a directory, false otherwise.
 * @return {Number} a 32 bit integer.
 *
 * Bit 0     Read-Only
 * Bit 1     Hidden
 * Bit 2     System
 * Bit 3     Volume Label
 * Bit 4     Directory
 * Bit 5     Archive
 */
var generateDosExternalFileAttr = function (dosPermissions, isDir) {

    // the dir flag is already set for compatibility

    return (dosPermissions || 0)  & 0x3F;
};

/**
 * Generate the various parts used in the construction of the final zip file.
 * @param {string} name the file name.
 * @param {ZipObject} file the file content.
 * @param {JSZip.CompressedObject} compressedObject the compressed object.
 * @param {number} offset the current offset from the start of the zip file.
 * @param {String} platform let's pretend we are this platform (change platform dependents fields)
 * @return {object} the zip parts.
 */
var generateZipParts = function(name, file, compressedObject, offset, platform) {
    var data = compressedObject.compressedContent,
        utfEncodedFileName = utils.transformTo("string", utf8.utf8encode(file.name)),
        comment = file.comment || "",
        utfEncodedComment = utils.transformTo("string", utf8.utf8encode(comment)),
        useUTF8ForFileName = utfEncodedFileName.length !== file.name.length,
        useUTF8ForComment = utfEncodedComment.length !== comment.length,
        o = file.options,
        dosTime,
        dosDate,
        extraFields = "",
        unicodePathExtraField = "",
        unicodeCommentExtraField = "",
        dir, date;


    // handle the deprecated options.dir
    if (file._initialMetadata.dir !== file.dir) {
        dir = file.dir;
    } else {
        dir = o.dir;
    }

    // handle the deprecated options.date
    if(file._initialMetadata.date !== file.date) {
        date = file.date;
    } else {
        date = o.date;
    }

    var extFileAttr = 0;
    var versionMadeBy = 0;
    if (dir) {
        // dos or unix, we set the dos dir flag
        extFileAttr |= 0x00010;
    }
    if(platform === "UNIX") {
        versionMadeBy = 0x031E; // UNIX, version 3.0
        extFileAttr |= generateUnixExternalFileAttr(file.unixPermissions, dir);
    } else { // DOS or other, fallback to DOS
        versionMadeBy = 0x0014; // DOS, version 2.0
        extFileAttr |= generateDosExternalFileAttr(file.dosPermissions, dir);
    }

    // date
    // @see http://www.delorie.com/djgpp/doc/rbinter/it/52/13.html
    // @see http://www.delorie.com/djgpp/doc/rbinter/it/65/16.html
    // @see http://www.delorie.com/djgpp/doc/rbinter/it/66/16.html

    dosTime = date.getHours();
    dosTime = dosTime << 6;
    dosTime = dosTime | date.getMinutes();
    dosTime = dosTime << 5;
    dosTime = dosTime | date.getSeconds() / 2;

    dosDate = date.getFullYear() - 1980;
    dosDate = dosDate << 4;
    dosDate = dosDate | (date.getMonth() + 1);
    dosDate = dosDate << 5;
    dosDate = dosDate | date.getDate();

    if (useUTF8ForFileName) {
        // set the unicode path extra field. unzip needs at least one extra
        // field to correctly handle unicode path, so using the path is as good
        // as any other information. This could improve the situation with
        // other archive managers too.
        // This field is usually used without the utf8 flag, with a non
        // unicode path in the header (winrar, winzip). This helps (a bit)
        // with the messy Windows' default compressed folders feature but
        // breaks on p7zip which doesn't seek the unicode path extra field.
        // So for now, UTF-8 everywhere !
        unicodePathExtraField =
            // Version
            decToHex(1, 1) +
            // NameCRC32
            decToHex(crc32(utfEncodedFileName), 4) +
            // UnicodeName
            utfEncodedFileName;

        extraFields +=
            // Info-ZIP Unicode Path Extra Field
            "\x75\x70" +
            // size
            decToHex(unicodePathExtraField.length, 2) +
            // content
            unicodePathExtraField;
    }

    if(useUTF8ForComment) {

        unicodeCommentExtraField =
            // Version
            decToHex(1, 1) +
            // CommentCRC32
            decToHex(this.crc32(utfEncodedComment), 4) +
            // UnicodeName
            utfEncodedComment;

        extraFields +=
            // Info-ZIP Unicode Path Extra Field
            "\x75\x63" +
            // size
            decToHex(unicodeCommentExtraField.length, 2) +
            // content
            unicodeCommentExtraField;
    }

    var header = "";

    // version needed to extract
    header += "\x0A\x00";
    // general purpose bit flag
    // set bit 11 if utf8
    header += (useUTF8ForFileName || useUTF8ForComment) ? "\x00\x08" : "\x00\x00";
    // compression method
    header += compressedObject.compressionMethod;
    // last mod file time
    header += decToHex(dosTime, 2);
    // last mod file date
    header += decToHex(dosDate, 2);
    // crc-32
    header += decToHex(compressedObject.crc32, 4);
    // compressed size
    header += decToHex(compressedObject.compressedSize, 4);
    // uncompressed size
    header += decToHex(compressedObject.uncompressedSize, 4);
    // file name length
    header += decToHex(utfEncodedFileName.length, 2);
    // extra field length
    header += decToHex(extraFields.length, 2);


    var fileRecord = signature.LOCAL_FILE_HEADER + header + utfEncodedFileName + extraFields;

    var dirRecord = signature.CENTRAL_FILE_HEADER +
    // version made by (00: DOS)
    decToHex(versionMadeBy, 2) +
    // file header (common to file and central directory)
    header +
    // file comment length
    decToHex(utfEncodedComment.length, 2) +
    // disk number start
    "\x00\x00" +
    // internal file attributes TODO
    "\x00\x00" +
    // external file attributes
    decToHex(extFileAttr, 4) +
    // relative offset of local header
    decToHex(offset, 4) +
    // file name
    utfEncodedFileName +
    // extra field
    extraFields +
    // file comment
    utfEncodedComment;

    return {
        fileRecord: fileRecord,
        dirRecord: dirRecord,
        compressedObject: compressedObject
    };
};


// return the actual prototype of JSZip
var out = {
    /**
     * Read an existing zip and merge the data in the current JSZip object.
     * The implementation is in jszip-load.js, don't forget to include it.
     * @param {String|ArrayBuffer|Uint8Array|Buffer} stream  The stream to load
     * @param {Object} options Options for loading the stream.
     *  options.base64 : is the stream in base64 ? default : false
     * @return {JSZip} the current JSZip object
     */
    load: function(stream, options) {
        throw new Error("Load method is not defined. Is the file jszip-load.js included ?");
    },

    /**
     * Filter nested files/folders with the specified function.
     * @param {Function} search the predicate to use :
     * function (relativePath, file) {...}
     * It takes 2 arguments : the relative path and the file.
     * @return {Array} An array of matching elements.
     */
    filter: function(search) {
        var result = [],
            filename, relativePath, file, fileClone;
        for (filename in this.files) {
            if (!this.files.hasOwnProperty(filename)) {
                continue;
            }
            file = this.files[filename];
            // return a new object, don't let the user mess with our internal objects :)
            fileClone = new ZipObject(file.name, file._data, extend(file.options));
            relativePath = filename.slice(this.root.length, filename.length);
            if (filename.slice(0, this.root.length) === this.root && // the file is in the current root
            search(relativePath, fileClone)) { // and the file matches the function
                result.push(fileClone);
            }
        }
        return result;
    },

    /**
     * Add a file to the zip file, or search a file.
     * @param   {string|RegExp} name The name of the file to add (if data is defined),
     * the name of the file to find (if no data) or a regex to match files.
     * @param   {String|ArrayBuffer|Uint8Array|Buffer} data  The file data, either raw or base64 encoded
     * @param   {Object} o     File options
     * @return  {JSZip|Object|Array} this JSZip object (when adding a file),
     * a file (when searching by string) or an array of files (when searching by regex).
     */
    file: function(name, data, o) {
        if (arguments.length === 1) {
            if (utils.isRegExp(name)) {
                var regexp = name;
                return this.filter(function(relativePath, file) {
                    return !file.dir && regexp.test(relativePath);
                });
            }
            else { // text
                return this.filter(function(relativePath, file) {
                    return !file.dir && relativePath === name;
                })[0] || null;
            }
        }
        else { // more than one argument : we have data !
            name = this.root + name;
            fileAdd.call(this, name, data, o);
        }
        return this;
    },

    /**
     * Add a directory to the zip file, or search.
     * @param   {String|RegExp} arg The name of the directory to add, or a regex to search folders.
     * @return  {JSZip} an object with the new directory as the root, or an array containing matching folders.
     */
    folder: function(arg) {
        if (!arg) {
            return this;
        }

        if (utils.isRegExp(arg)) {
            return this.filter(function(relativePath, file) {
                return file.dir && arg.test(relativePath);
            });
        }

        // else, name is a new folder
        var name = this.root + arg;
        var newFolder = folderAdd.call(this, name);

        // Allow chaining by returning a new object with this folder as the root
        var ret = this.clone();
        ret.root = newFolder.name;
        return ret;
    },

    /**
     * Delete a file, or a directory and all sub-files, from the zip
     * @param {string} name the name of the file to delete
     * @return {JSZip} this JSZip object
     */
    remove: function(name) {
        name = this.root + name;
        var file = this.files[name];
        if (!file) {
            // Look for any folders
            if (name.slice(-1) != "/") {
                name += "/";
            }
            file = this.files[name];
        }

        if (file && !file.dir) {
            // file
            delete this.files[name];
        } else {
            // maybe a folder, delete recursively
            var kids = this.filter(function(relativePath, file) {
                return file.name.slice(0, name.length) === name;
            });
            for (var i = 0; i < kids.length; i++) {
                delete this.files[kids[i].name];
            }
        }

        return this;
    },

    /**
     * Generate the complete zip file
     * @param {Object} options the options to generate the zip file :
     * - base64, (deprecated, use type instead) true to generate base64.
     * - compression, "STORE" by default.
     * - type, "base64" by default. Values are : string, base64, uint8array, arraybuffer, blob.
     * @return {String|Uint8Array|ArrayBuffer|Buffer|Blob} the zip file
     */
    generate: function(options) {
        options = extend(options || {}, {
            base64: true,
            compression: "STORE",
            compressionOptions : null,
            type: "base64",
            platform: "DOS",
            comment: null,
            mimeType: 'application/zip'
        });

        utils.checkSupport(options.type);

        // accept nodejs `process.platform`
        if(
          options.platform === 'darwin' ||
          options.platform === 'freebsd' ||
          options.platform === 'linux' ||
          options.platform === 'sunos'
        ) {
          options.platform = "UNIX";
        }
        if (options.platform === 'win32') {
          options.platform = "DOS";
        }

        var zipData = [],
            localDirLength = 0,
            centralDirLength = 0,
            writer, i,
            utfEncodedComment = utils.transformTo("string", this.utf8encode(options.comment || this.comment || ""));

        // first, generate all the zip parts.
        for (var name in this.files) {
            if (!this.files.hasOwnProperty(name)) {
                continue;
            }
            var file = this.files[name];

            var compressionName = file.options.compression || options.compression.toUpperCase();
            var compression = compressions[compressionName];
            if (!compression) {
                throw new Error(compressionName + " is not a valid compression method !");
            }
            var compressionOptions = file.options.compressionOptions || options.compressionOptions || {};

            var compressedObject = generateCompressedObjectFrom.call(this, file, compression, compressionOptions);

            var zipPart = generateZipParts.call(this, name, file, compressedObject, localDirLength, options.platform);
            localDirLength += zipPart.fileRecord.length + compressedObject.compressedSize;
            centralDirLength += zipPart.dirRecord.length;
            zipData.push(zipPart);
        }

        var dirEnd = "";

        // end of central dir signature
        dirEnd = signature.CENTRAL_DIRECTORY_END +
        // number of this disk
        "\x00\x00" +
        // number of the disk with the start of the central directory
        "\x00\x00" +
        // total number of entries in the central directory on this disk
        decToHex(zipData.length, 2) +
        // total number of entries in the central directory
        decToHex(zipData.length, 2) +
        // size of the central directory   4 bytes
        decToHex(centralDirLength, 4) +
        // offset of start of central directory with respect to the starting disk number
        decToHex(localDirLength, 4) +
        // .ZIP file comment length
        decToHex(utfEncodedComment.length, 2) +
        // .ZIP file comment
        utfEncodedComment;


        // we have all the parts (and the total length)
        // time to create a writer !
        var typeName = options.type.toLowerCase();
        if(typeName==="uint8array"||typeName==="arraybuffer"||typeName==="blob"||typeName==="nodebuffer") {
            writer = new Uint8ArrayWriter(localDirLength + centralDirLength + dirEnd.length);
        }else{
            writer = new StringWriter(localDirLength + centralDirLength + dirEnd.length);
        }

        for (i = 0; i < zipData.length; i++) {
            writer.append(zipData[i].fileRecord);
            writer.append(zipData[i].compressedObject.compressedContent);
        }
        for (i = 0; i < zipData.length; i++) {
            writer.append(zipData[i].dirRecord);
        }

        writer.append(dirEnd);

        var zip = writer.finalize();



        switch(options.type.toLowerCase()) {
            // case "zip is an Uint8Array"
            case "uint8array" :
            case "arraybuffer" :
            case "nodebuffer" :
               return utils.transformTo(options.type.toLowerCase(), zip);
            case "blob" :
               return utils.arrayBuffer2Blob(utils.transformTo("arraybuffer", zip), options.mimeType);
            // case "zip is a string"
            case "base64" :
               return (options.base64) ? base64.encode(zip) : zip;
            default : // case "string" :
               return zip;
         }

    },

    /**
     * @deprecated
     * This method will be removed in a future version without replacement.
     */
    crc32: function (input, crc) {
        return crc32(input, crc);
    },

    /**
     * @deprecated
     * This method will be removed in a future version without replacement.
     */
    utf8encode: function (string) {
        return utils.transformTo("string", utf8.utf8encode(string));
    },

    /**
     * @deprecated
     * This method will be removed in a future version without replacement.
     */
    utf8decode: function (input) {
        return utf8.utf8decode(input);
    }
};
module.exports = out;

},{"./base64":12,"./compressedObject":13,"./compressions":14,"./crc32":15,"./defaults":17,"./nodeBuffer":22,"./signature":25,"./stringWriter":27,"./support":28,"./uint8ArrayWriter":30,"./utf8":31,"./utils":32}],25:[function(require,module,exports){
'use strict';
exports.LOCAL_FILE_HEADER = "PK\x03\x04";
exports.CENTRAL_FILE_HEADER = "PK\x01\x02";
exports.CENTRAL_DIRECTORY_END = "PK\x05\x06";
exports.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x06\x07";
exports.ZIP64_CENTRAL_DIRECTORY_END = "PK\x06\x06";
exports.DATA_DESCRIPTOR = "PK\x07\x08";

},{}],26:[function(require,module,exports){
'use strict';
var DataReader = require('./dataReader');
var utils = require('./utils');

function StringReader(data, optimizedBinaryString) {
    this.data = data;
    if (!optimizedBinaryString) {
        this.data = utils.string2binary(this.data);
    }
    this.length = this.data.length;
    this.index = 0;
}
StringReader.prototype = new DataReader();
/**
 * @see DataReader.byteAt
 */
StringReader.prototype.byteAt = function(i) {
    return this.data.charCodeAt(i);
};
/**
 * @see DataReader.lastIndexOfSignature
 */
StringReader.prototype.lastIndexOfSignature = function(sig) {
    return this.data.lastIndexOf(sig);
};
/**
 * @see DataReader.readData
 */
StringReader.prototype.readData = function(size) {
    this.checkOffset(size);
    // this will work because the constructor applied the "& 0xff" mask.
    var result = this.data.slice(this.index, this.index + size);
    this.index += size;
    return result;
};
module.exports = StringReader;

},{"./dataReader":16,"./utils":32}],27:[function(require,module,exports){
'use strict';

var utils = require('./utils');

/**
 * An object to write any content to a string.
 * @constructor
 */
var StringWriter = function() {
    this.data = [];
};
StringWriter.prototype = {
    /**
     * Append any content to the current string.
     * @param {Object} input the content to add.
     */
    append: function(input) {
        input = utils.transformTo("string", input);
        this.data.push(input);
    },
    /**
     * Finalize the construction an return the result.
     * @return {string} the generated string.
     */
    finalize: function() {
        return this.data.join("");
    }
};

module.exports = StringWriter;

},{"./utils":32}],28:[function(require,module,exports){
(function (Buffer){
'use strict';
exports.base64 = true;
exports.array = true;
exports.string = true;
exports.arraybuffer = typeof ArrayBuffer !== "undefined" && typeof Uint8Array !== "undefined";
// contains true if JSZip can read/generate nodejs Buffer, false otherwise.
// Browserify will provide a Buffer implementation for browsers, which is
// an augmented Uint8Array (i.e., can be used as either Buffer or U8).
exports.nodebuffer = typeof Buffer !== "undefined";
// contains true if JSZip can read/generate Uint8Array, false otherwise.
exports.uint8array = typeof Uint8Array !== "undefined";

if (typeof ArrayBuffer === "undefined") {
    exports.blob = false;
}
else {
    var buffer = new ArrayBuffer(0);
    try {
        exports.blob = new Blob([buffer], {
            type: "application/zip"
        }).size === 0;
    }
    catch (e) {
        try {
            var Builder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
            var builder = new Builder();
            builder.append(buffer);
            exports.blob = builder.getBlob('application/zip').size === 0;
        }
        catch (e) {
            exports.blob = false;
        }
    }
}

}).call(this,require("buffer").Buffer)
},{"buffer":3}],29:[function(require,module,exports){
'use strict';
var DataReader = require('./dataReader');

function Uint8ArrayReader(data) {
    if (data) {
        this.data = data;
        this.length = this.data.length;
        this.index = 0;
    }
}
Uint8ArrayReader.prototype = new DataReader();
/**
 * @see DataReader.byteAt
 */
Uint8ArrayReader.prototype.byteAt = function(i) {
    return this.data[i];
};
/**
 * @see DataReader.lastIndexOfSignature
 */
Uint8ArrayReader.prototype.lastIndexOfSignature = function(sig) {
    var sig0 = sig.charCodeAt(0),
        sig1 = sig.charCodeAt(1),
        sig2 = sig.charCodeAt(2),
        sig3 = sig.charCodeAt(3);
    for (var i = this.length - 4; i >= 0; --i) {
        if (this.data[i] === sig0 && this.data[i + 1] === sig1 && this.data[i + 2] === sig2 && this.data[i + 3] === sig3) {
            return i;
        }
    }

    return -1;
};
/**
 * @see DataReader.readData
 */
Uint8ArrayReader.prototype.readData = function(size) {
    this.checkOffset(size);
    if(size === 0) {
        // in IE10, when using subarray(idx, idx), we get the array [0x00] instead of [].
        return new Uint8Array(0);
    }
    var result = this.data.subarray(this.index, this.index + size);
    this.index += size;
    return result;
};
module.exports = Uint8ArrayReader;

},{"./dataReader":16}],30:[function(require,module,exports){
'use strict';

var utils = require('./utils');

/**
 * An object to write any content to an Uint8Array.
 * @constructor
 * @param {number} length The length of the array.
 */
var Uint8ArrayWriter = function(length) {
    this.data = new Uint8Array(length);
    this.index = 0;
};
Uint8ArrayWriter.prototype = {
    /**
     * Append any content to the current array.
     * @param {Object} input the content to add.
     */
    append: function(input) {
        if (input.length !== 0) {
            // with an empty Uint8Array, Opera fails with a "Offset larger than array size"
            input = utils.transformTo("uint8array", input);
            this.data.set(input, this.index);
            this.index += input.length;
        }
    },
    /**
     * Finalize the construction an return the result.
     * @return {Uint8Array} the generated array.
     */
    finalize: function() {
        return this.data;
    }
};

module.exports = Uint8ArrayWriter;

},{"./utils":32}],31:[function(require,module,exports){
'use strict';

var utils = require('./utils');
var support = require('./support');
var nodeBuffer = require('./nodeBuffer');

/**
 * The following functions come from pako, from pako/lib/utils/strings
 * released under the MIT license, see pako https://github.com/nodeca/pako/
 */

// Table with utf8 lengths (calculated by first byte of sequence)
// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,
// because max possible codepoint is 0x10ffff
var _utf8len = new Array(256);
for (var i=0; i<256; i++) {
  _utf8len[i] = (i >= 252 ? 6 : i >= 248 ? 5 : i >= 240 ? 4 : i >= 224 ? 3 : i >= 192 ? 2 : 1);
}
_utf8len[254]=_utf8len[254]=1; // Invalid sequence start

// convert string to array (typed, when possible)
var string2buf = function (str) {
    var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;

    // count binary size
    for (m_pos = 0; m_pos < str_len; m_pos++) {
        c = str.charCodeAt(m_pos);
        if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {
            c2 = str.charCodeAt(m_pos+1);
            if ((c2 & 0xfc00) === 0xdc00) {
                c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);
                m_pos++;
            }
        }
        buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;
    }

    // allocate buffer
    if (support.uint8array) {
        buf = new Uint8Array(buf_len);
    } else {
        buf = new Array(buf_len);
    }

    // convert
    for (i=0, m_pos = 0; i < buf_len; m_pos++) {
        c = str.charCodeAt(m_pos);
        if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {
            c2 = str.charCodeAt(m_pos+1);
            if ((c2 & 0xfc00) === 0xdc00) {
                c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);
                m_pos++;
            }
        }
        if (c < 0x80) {
            /* one byte */
            buf[i++] = c;
        } else if (c < 0x800) {
            /* two bytes */
            buf[i++] = 0xC0 | (c >>> 6);
            buf[i++] = 0x80 | (c & 0x3f);
        } else if (c < 0x10000) {
            /* three bytes */
            buf[i++] = 0xE0 | (c >>> 12);
            buf[i++] = 0x80 | (c >>> 6 & 0x3f);
            buf[i++] = 0x80 | (c & 0x3f);
        } else {
            /* four bytes */
            buf[i++] = 0xf0 | (c >>> 18);
            buf[i++] = 0x80 | (c >>> 12 & 0x3f);
            buf[i++] = 0x80 | (c >>> 6 & 0x3f);
            buf[i++] = 0x80 | (c & 0x3f);
        }
    }

    return buf;
};

// Calculate max possible position in utf8 buffer,
// that will not break sequence. If that's not possible
// - (very small limits) return max size as is.
//
// buf[] - utf8 bytes array
// max   - length limit (mandatory);
var utf8border = function(buf, max) {
    var pos;

    max = max || buf.length;
    if (max > buf.length) { max = buf.length; }

    // go back from last position, until start of sequence found
    pos = max-1;
    while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }

    // Fuckup - very small and broken sequence,
    // return max, because we should return something anyway.
    if (pos < 0) { return max; }

    // If we came to start of buffer - that means vuffer is too small,
    // return max too.
    if (pos === 0) { return max; }

    return (pos + _utf8len[buf[pos]] > max) ? pos : max;
};

// convert array to string
var buf2string = function (buf) {
    var str, i, out, c, c_len;
    var len = buf.length;

    // Reserve max possible length (2 words per char)
    // NB: by unknown reasons, Array is significantly faster for
    //     String.fromCharCode.apply than Uint16Array.
    var utf16buf = new Array(len*2);

    for (out=0, i=0; i<len;) {
        c = buf[i++];
        // quick process ascii
        if (c < 0x80) { utf16buf[out++] = c; continue; }

        c_len = _utf8len[c];
        // skip 5 & 6 byte codes
        if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len-1; continue; }

        // apply mask on first byte
        c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;
        // join the rest
        while (c_len > 1 && i < len) {
            c = (c << 6) | (buf[i++] & 0x3f);
            c_len--;
        }

        // terminated by end of string?
        if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }

        if (c < 0x10000) {
            utf16buf[out++] = c;
        } else {
            c -= 0x10000;
            utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);
            utf16buf[out++] = 0xdc00 | (c & 0x3ff);
        }
    }

    // shrinkBuf(utf16buf, out)
    if (utf16buf.length !== out) {
        if(utf16buf.subarray) {
            utf16buf = utf16buf.subarray(0, out);
        } else {
            utf16buf.length = out;
        }
    }

    // return String.fromCharCode.apply(null, utf16buf);
    return utils.applyFromCharCode(utf16buf);
};


// That's all for the pako functions.


/**
 * Transform a javascript string into an array (typed if possible) of bytes,
 * UTF-8 encoded.
 * @param {String} str the string to encode
 * @return {Array|Uint8Array|Buffer} the UTF-8 encoded string.
 */
exports.utf8encode = function utf8encode(str) {
    if (support.nodebuffer) {
        return nodeBuffer(str, "utf-8");
    }

    return string2buf(str);
};


/**
 * Transform a bytes array (or a representation) representing an UTF-8 encoded
 * string into a javascript string.
 * @param {Array|Uint8Array|Buffer} buf the data de decode
 * @return {String} the decoded string.
 */
exports.utf8decode = function utf8decode(buf) {
    if (support.nodebuffer) {
        return utils.transformTo("nodebuffer", buf).toString("utf-8");
    }

    buf = utils.transformTo(support.uint8array ? "uint8array" : "array", buf);

    // return buf2string(buf);
    // Chrome prefers to work with "small" chunks of data
    // for the method buf2string.
    // Firefox and Chrome has their own shortcut, IE doesn't seem to really care.
    var result = [], k = 0, len = buf.length, chunk = 65536;
    while (k < len) {
        var nextBoundary = utf8border(buf, Math.min(k + chunk, len));
        if (support.uint8array) {
            result.push(buf2string(buf.subarray(k, nextBoundary)));
        } else {
            result.push(buf2string(buf.slice(k, nextBoundary)));
        }
        k = nextBoundary;
    }
    return result.join("");

};
// vim: set shiftwidth=4 softtabstop=4:

},{"./nodeBuffer":22,"./support":28,"./utils":32}],32:[function(require,module,exports){
'use strict';
var support = require('./support');
var compressions = require('./compressions');
var nodeBuffer = require('./nodeBuffer');
/**
 * Convert a string to a "binary string" : a string containing only char codes between 0 and 255.
 * @param {string} str the string to transform.
 * @return {String} the binary string.
 */
exports.string2binary = function(str) {
    var result = "";
    for (var i = 0; i < str.length; i++) {
        result += String.fromCharCode(str.charCodeAt(i) & 0xff);
    }
    return result;
};
exports.arrayBuffer2Blob = function(buffer, mimeType) {
    exports.checkSupport("blob");
	mimeType = mimeType || 'application/zip';

    try {
        // Blob constructor
        return new Blob([buffer], {
            type: mimeType
        });
    }
    catch (e) {

        try {
            // deprecated, browser only, old way
            var Builder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
            var builder = new Builder();
            builder.append(buffer);
            return builder.getBlob(mimeType);
        }
        catch (e) {

            // well, fuck ?!
            throw new Error("Bug : can't construct the Blob.");
        }
    }


};
/**
 * The identity function.
 * @param {Object} input the input.
 * @return {Object} the same input.
 */
function identity(input) {
    return input;
}

/**
 * Fill in an array with a string.
 * @param {String} str the string to use.
 * @param {Array|ArrayBuffer|Uint8Array|Buffer} array the array to fill in (will be mutated).
 * @return {Array|ArrayBuffer|Uint8Array|Buffer} the updated array.
 */
function stringToArrayLike(str, array) {
    for (var i = 0; i < str.length; ++i) {
        array[i] = str.charCodeAt(i) & 0xFF;
    }
    return array;
}

/**
 * Transform an array-like object to a string.
 * @param {Array|ArrayBuffer|Uint8Array|Buffer} array the array to transform.
 * @return {String} the result.
 */
function arrayLikeToString(array) {
    // Performances notes :
    // --------------------
    // String.fromCharCode.apply(null, array) is the fastest, see
    // see http://jsperf.com/converting-a-uint8array-to-a-string/2
    // but the stack is limited (and we can get huge arrays !).
    //
    // result += String.fromCharCode(array[i]); generate too many strings !
    //
    // This code is inspired by http://jsperf.com/arraybuffer-to-string-apply-performance/2
    var chunk = 65536;
    var result = [],
        len = array.length,
        type = exports.getTypeOf(array),
        k = 0,
        canUseApply = true;
      try {
         switch(type) {
            case "uint8array":
               String.fromCharCode.apply(null, new Uint8Array(0));
               break;
            case "nodebuffer":
               String.fromCharCode.apply(null, nodeBuffer(0));
               break;
         }
      } catch(e) {
         canUseApply = false;
      }

      // no apply : slow and painful algorithm
      // default browser on android 4.*
      if (!canUseApply) {
         var resultStr = "";
         for(var i = 0; i < array.length;i++) {
            resultStr += String.fromCharCode(array[i]);
         }
    return resultStr;
    }
    while (k < len && chunk > 1) {
        try {
            if (type === "array" || type === "nodebuffer") {
                result.push(String.fromCharCode.apply(null, array.slice(k, Math.min(k + chunk, len))));
            }
            else {
                result.push(String.fromCharCode.apply(null, array.subarray(k, Math.min(k + chunk, len))));
            }
            k += chunk;
        }
        catch (e) {
            chunk = Math.floor(chunk / 2);
        }
    }
    return result.join("");
}

exports.applyFromCharCode = arrayLikeToString;


/**
 * Copy the data from an array-like to an other array-like.
 * @param {Array|ArrayBuffer|Uint8Array|Buffer} arrayFrom the origin array.
 * @param {Array|ArrayBuffer|Uint8Array|Buffer} arrayTo the destination array which will be mutated.
 * @return {Array|ArrayBuffer|Uint8Array|Buffer} the updated destination array.
 */
function arrayLikeToArrayLike(arrayFrom, arrayTo) {
    for (var i = 0; i < arrayFrom.length; i++) {
        arrayTo[i] = arrayFrom[i];
    }
    return arrayTo;
}

// a matrix containing functions to transform everything into everything.
var transform = {};

// string to ?
transform["string"] = {
    "string": identity,
    "array": function(input) {
        return stringToArrayLike(input, new Array(input.length));
    },
    "arraybuffer": function(input) {
        return transform["string"]["uint8array"](input).buffer;
    },
    "uint8array": function(input) {
        return stringToArrayLike(input, new Uint8Array(input.length));
    },
    "nodebuffer": function(input) {
        return stringToArrayLike(input, nodeBuffer(input.length));
    }
};

// array to ?
transform["array"] = {
    "string": arrayLikeToString,
    "array": identity,
    "arraybuffer": function(input) {
        return (new Uint8Array(input)).buffer;
    },
    "uint8array": function(input) {
        return new Uint8Array(input);
    },
    "nodebuffer": function(input) {
        return nodeBuffer(input);
    }
};

// arraybuffer to ?
transform["arraybuffer"] = {
    "string": function(input) {
        return arrayLikeToString(new Uint8Array(input));
    },
    "array": function(input) {
        return arrayLikeToArrayLike(new Uint8Array(input), new Array(input.byteLength));
    },
    "arraybuffer": identity,
    "uint8array": function(input) {
        return new Uint8Array(input);
    },
    "nodebuffer": function(input) {
        return nodeBuffer(new Uint8Array(input));
    }
};

// uint8array to ?
transform["uint8array"] = {
    "string": arrayLikeToString,
    "array": function(input) {
        return arrayLikeToArrayLike(input, new Array(input.length));
    },
    "arraybuffer": function(input) {
        return input.buffer;
    },
    "uint8array": identity,
    "nodebuffer": function(input) {
        return nodeBuffer(input);
    }
};

// nodebuffer to ?
transform["nodebuffer"] = {
    "string": arrayLikeToString,
    "array": function(input) {
        return arrayLikeToArrayLike(input, new Array(input.length));
    },
    "arraybuffer": function(input) {
        return transform["nodebuffer"]["uint8array"](input).buffer;
    },
    "uint8array": function(input) {
        return arrayLikeToArrayLike(input, new Uint8Array(input.length));
    },
    "nodebuffer": identity
};

/**
 * Transform an input into any type.
 * The supported output type are : string, array, uint8array, arraybuffer, nodebuffer.
 * If no output type is specified, the unmodified input will be returned.
 * @param {String} outputType the output type.
 * @param {String|Array|ArrayBuffer|Uint8Array|Buffer} input the input to convert.
 * @throws {Error} an Error if the browser doesn't support the requested output type.
 */
exports.transformTo = function(outputType, input) {
    if (!input) {
        // undefined, null, etc
        // an empty string won't harm.
        input = "";
    }
    if (!outputType) {
        return input;
    }
    exports.checkSupport(outputType);
    var inputType = exports.getTypeOf(input);
    var result = transform[inputType][outputType](input);
    return result;
};

/**
 * Return the type of the input.
 * The type will be in a format valid for JSZip.utils.transformTo : string, array, uint8array, arraybuffer.
 * @param {Object} input the input to identify.
 * @return {String} the (lowercase) type of the input.
 */
exports.getTypeOf = function(input) {
    if (typeof input === "string") {
        return "string";
    }
    if (Object.prototype.toString.call(input) === "[object Array]") {
        return "array";
    }
    if (support.nodebuffer && nodeBuffer.test(input)) {
        return "nodebuffer";
    }
    if (support.uint8array && input instanceof Uint8Array) {
        return "uint8array";
    }
    if (support.arraybuffer && input instanceof ArrayBuffer) {
        return "arraybuffer";
    }
};

/**
 * Throw an exception if the type is not supported.
 * @param {String} type the type to check.
 * @throws {Error} an Error if the browser doesn't support the requested type.
 */
exports.checkSupport = function(type) {
    var supported = support[type.toLowerCase()];
    if (!supported) {
        throw new Error(type + " is not supported by this browser");
    }
};
exports.MAX_VALUE_16BITS = 65535;
exports.MAX_VALUE_32BITS = -1; // well, "\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF" is parsed as -1

/**
 * Prettify a string read as binary.
 * @param {string} str the string to prettify.
 * @return {string} a pretty string.
 */
exports.pretty = function(str) {
    var res = '',
        code, i;
    for (i = 0; i < (str || "").length; i++) {
        code = str.charCodeAt(i);
        res += '\\x' + (code < 16 ? "0" : "") + code.toString(16).toUpperCase();
    }
    return res;
};

/**
 * Find a compression registered in JSZip.
 * @param {string} compressionMethod the method magic to find.
 * @return {Object|null} the JSZip compression object, null if none found.
 */
exports.findCompression = function(compressionMethod) {
    for (var method in compressions) {
        if (!compressions.hasOwnProperty(method)) {
            continue;
        }
        if (compressions[method].magic === compressionMethod) {
            return compressions[method];
        }
    }
    return null;
};
/**
* Cross-window, cross-Node-context regular expression detection
* @param  {Object}  object Anything
* @return {Boolean}        true if the object is a regular expression,
* false otherwise
*/
exports.isRegExp = function (object) {
    return Object.prototype.toString.call(object) === "[object RegExp]";
};


},{"./compressions":14,"./nodeBuffer":22,"./support":28}],33:[function(require,module,exports){
'use strict';
var StringReader = require('./stringReader');
var NodeBufferReader = require('./nodeBufferReader');
var Uint8ArrayReader = require('./uint8ArrayReader');
var utils = require('./utils');
var sig = require('./signature');
var ZipEntry = require('./zipEntry');
var support = require('./support');
var jszipProto = require('./object');
//  class ZipEntries {{{
/**
 * All the entries in the zip file.
 * @constructor
 * @param {String|ArrayBuffer|Uint8Array} data the binary stream to load.
 * @param {Object} loadOptions Options for loading the stream.
 */
function ZipEntries(data, loadOptions) {
    this.files = [];
    this.loadOptions = loadOptions;
    if (data) {
        this.load(data);
    }
}
ZipEntries.prototype = {
    /**
     * Check that the reader is on the speficied signature.
     * @param {string} expectedSignature the expected signature.
     * @throws {Error} if it is an other signature.
     */
    checkSignature: function(expectedSignature) {
        var signature = this.reader.readString(4);
        if (signature !== expectedSignature) {
            throw new Error("Corrupted zip or bug : unexpected signature " + "(" + utils.pretty(signature) + ", expected " + utils.pretty(expectedSignature) + ")");
        }
    },
    /**
     * Read the end of the central directory.
     */
    readBlockEndOfCentral: function() {
        this.diskNumber = this.reader.readInt(2);
        this.diskWithCentralDirStart = this.reader.readInt(2);
        this.centralDirRecordsOnThisDisk = this.reader.readInt(2);
        this.centralDirRecords = this.reader.readInt(2);
        this.centralDirSize = this.reader.readInt(4);
        this.centralDirOffset = this.reader.readInt(4);

        this.zipCommentLength = this.reader.readInt(2);
        // warning : the encoding depends of the system locale
        // On a linux machine with LANG=en_US.utf8, this field is utf8 encoded.
        // On a windows machine, this field is encoded with the localized windows code page.
        this.zipComment = this.reader.readString(this.zipCommentLength);
        // To get consistent behavior with the generation part, we will assume that
        // this is utf8 encoded.
        this.zipComment = jszipProto.utf8decode(this.zipComment);
    },
    /**
     * Read the end of the Zip 64 central directory.
     * Not merged with the method readEndOfCentral :
     * The end of central can coexist with its Zip64 brother,
     * I don't want to read the wrong number of bytes !
     */
    readBlockZip64EndOfCentral: function() {
        this.zip64EndOfCentralSize = this.reader.readInt(8);
        this.versionMadeBy = this.reader.readString(2);
        this.versionNeeded = this.reader.readInt(2);
        this.diskNumber = this.reader.readInt(4);
        this.diskWithCentralDirStart = this.reader.readInt(4);
        this.centralDirRecordsOnThisDisk = this.reader.readInt(8);
        this.centralDirRecords = this.reader.readInt(8);
        this.centralDirSize = this.reader.readInt(8);
        this.centralDirOffset = this.reader.readInt(8);

        this.zip64ExtensibleData = {};
        var extraDataSize = this.zip64EndOfCentralSize - 44,
            index = 0,
            extraFieldId,
            extraFieldLength,
            extraFieldValue;
        while (index < extraDataSize) {
            extraFieldId = this.reader.readInt(2);
            extraFieldLength = this.reader.readInt(4);
            extraFieldValue = this.reader.readString(extraFieldLength);
            this.zip64ExtensibleData[extraFieldId] = {
                id: extraFieldId,
                length: extraFieldLength,
                value: extraFieldValue
            };
        }
    },
    /**
     * Read the end of the Zip 64 central directory locator.
     */
    readBlockZip64EndOfCentralLocator: function() {
        this.diskWithZip64CentralDirStart = this.reader.readInt(4);
        this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8);
        this.disksCount = this.reader.readInt(4);
        if (this.disksCount > 1) {
            throw new Error("Multi-volumes zip are not supported");
        }
    },
    /**
     * Read the local files, based on the offset read in the central part.
     */
    readLocalFiles: function() {
        var i, file;
        for (i = 0; i < this.files.length; i++) {
            file = this.files[i];
            this.reader.setIndex(file.localHeaderOffset);
            this.checkSignature(sig.LOCAL_FILE_HEADER);
            file.readLocalPart(this.reader);
            file.handleUTF8();
            file.processAttributes();
        }
    },
    /**
     * Read the central directory.
     */
    readCentralDir: function() {
        var file;

        this.reader.setIndex(this.centralDirOffset);
        while (this.reader.readString(4) === sig.CENTRAL_FILE_HEADER) {
            file = new ZipEntry({
                zip64: this.zip64
            }, this.loadOptions);
            file.readCentralPart(this.reader);
            this.files.push(file);
        }
    },
    /**
     * Read the end of central directory.
     */
    readEndOfCentral: function() {
        var offset = this.reader.lastIndexOfSignature(sig.CENTRAL_DIRECTORY_END);
        if (offset === -1) {
            // Check if the content is a truncated zip or complete garbage.
            // A "LOCAL_FILE_HEADER" is not required at the beginning (auto
            // extractible zip for example) but it can give a good hint.
            // If an ajax request was used without responseType, we will also
            // get unreadable data.
            var isGarbage = true;
            try {
                this.reader.setIndex(0);
                this.checkSignature(sig.LOCAL_FILE_HEADER);
                isGarbage = false;
            } catch (e) {}

            if (isGarbage) {
                throw new Error("Can't find end of central directory : is this a zip file ? " +
                                "If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");
            } else {
                throw new Error("Corrupted zip : can't find end of central directory");
            }
        }
        this.reader.setIndex(offset);
        this.checkSignature(sig.CENTRAL_DIRECTORY_END);
        this.readBlockEndOfCentral();


        /* extract from the zip spec :
            4)  If one of the fields in the end of central directory
                record is too small to hold required data, the field
                should be set to -1 (0xFFFF or 0xFFFFFFFF) and the
                ZIP64 format record should be created.
            5)  The end of central directory record and the
                Zip64 end of central directory locator record must
                reside on the same disk when splitting or spanning
                an archive.
         */
        if (this.diskNumber === utils.MAX_VALUE_16BITS || this.diskWithCentralDirStart === utils.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === utils.MAX_VALUE_16BITS || this.centralDirRecords === utils.MAX_VALUE_16BITS || this.centralDirSize === utils.MAX_VALUE_32BITS || this.centralDirOffset === utils.MAX_VALUE_32BITS) {
            this.zip64 = true;

            /*
            Warning : the zip64 extension is supported, but ONLY if the 64bits integer read from
            the zip file can fit into a 32bits integer. This cannot be solved : Javascript represents
            all numbers as 64-bit double precision IEEE 754 floating point numbers.
            So, we have 53bits for integers and bitwise operations treat everything as 32bits.
            see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators
            and http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf section 8.5
            */

            // should look for a zip64 EOCD locator
            offset = this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR);
            if (offset === -1) {
                throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");
            }
            this.reader.setIndex(offset);
            this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR);
            this.readBlockZip64EndOfCentralLocator();

            // now the zip64 EOCD record
            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);
            this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_END);
            this.readBlockZip64EndOfCentral();
        }
    },
    prepareReader: function(data) {
        var type = utils.getTypeOf(data);
        if (type === "string" && !support.uint8array) {
            this.reader = new StringReader(data, this.loadOptions.optimizedBinaryString);
        }
        else if (type === "nodebuffer") {
            this.reader = new NodeBufferReader(data);
        }
        else {
            this.reader = new Uint8ArrayReader(utils.transformTo("uint8array", data));
        }
    },
    /**
     * Read a zip file and create ZipEntries.
     * @param {String|ArrayBuffer|Uint8Array|Buffer} data the binary string representing a zip file.
     */
    load: function(data) {
        this.prepareReader(data);
        this.readEndOfCentral();
        this.readCentralDir();
        this.readLocalFiles();
    }
};
// }}} end of ZipEntries
module.exports = ZipEntries;

},{"./nodeBufferReader":23,"./object":24,"./signature":25,"./stringReader":26,"./support":28,"./uint8ArrayReader":29,"./utils":32,"./zipEntry":34}],34:[function(require,module,exports){
'use strict';
var StringReader = require('./stringReader');
var utils = require('./utils');
var CompressedObject = require('./compressedObject');
var jszipProto = require('./object');

var MADE_BY_DOS = 0x00;
var MADE_BY_UNIX = 0x03;

// class ZipEntry {{{
/**
 * An entry in the zip file.
 * @constructor
 * @param {Object} options Options of the current file.
 * @param {Object} loadOptions Options for loading the stream.
 */
function ZipEntry(options, loadOptions) {
    this.options = options;
    this.loadOptions = loadOptions;
}
ZipEntry.prototype = {
    /**
     * say if the file is encrypted.
     * @return {boolean} true if the file is encrypted, false otherwise.
     */
    isEncrypted: function() {
        // bit 1 is set
        return (this.bitFlag & 0x0001) === 0x0001;
    },
    /**
     * say if the file has utf-8 filename/comment.
     * @return {boolean} true if the filename/comment is in utf-8, false otherwise.
     */
    useUTF8: function() {
        // bit 11 is set
        return (this.bitFlag & 0x0800) === 0x0800;
    },
    /**
     * Prepare the function used to generate the compressed content from this ZipFile.
     * @param {DataReader} reader the reader to use.
     * @param {number} from the offset from where we should read the data.
     * @param {number} length the length of the data to read.
     * @return {Function} the callback to get the compressed content (the type depends of the DataReader class).
     */
    prepareCompressedContent: function(reader, from, length) {
        return function() {
            var previousIndex = reader.index;
            reader.setIndex(from);
            var compressedFileData = reader.readData(length);
            reader.setIndex(previousIndex);

            return compressedFileData;
        };
    },
    /**
     * Prepare the function used to generate the uncompressed content from this ZipFile.
     * @param {DataReader} reader the reader to use.
     * @param {number} from the offset from where we should read the data.
     * @param {number} length the length of the data to read.
     * @param {JSZip.compression} compression the compression used on this file.
     * @param {number} uncompressedSize the uncompressed size to expect.
     * @return {Function} the callback to get the uncompressed content (the type depends of the DataReader class).
     */
    prepareContent: function(reader, from, length, compression, uncompressedSize) {
        return function() {

            var compressedFileData = utils.transformTo(compression.uncompressInputType, this.getCompressedContent());
            var uncompressedFileData = compression.uncompress(compressedFileData);

            if (uncompressedFileData.length !== uncompressedSize) {
                throw new Error("Bug : uncompressed data size mismatch");
            }

            return uncompressedFileData;
        };
    },
    /**
     * Read the local part of a zip file and add the info in this object.
     * @param {DataReader} reader the reader to use.
     */
    readLocalPart: function(reader) {
        var compression, localExtraFieldsLength;

        // we already know everything from the central dir !
        // If the central dir data are false, we are doomed.
        // On the bright side, the local part is scary  : zip64, data descriptors, both, etc.
        // The less data we get here, the more reliable this should be.
        // Let's skip the whole header and dash to the data !
        reader.skip(22);
        // in some zip created on windows, the filename stored in the central dir contains \ instead of /.
        // Strangely, the filename here is OK.
        // I would love to treat these zip files as corrupted (see http://www.info-zip.org/FAQ.html#backslashes
        // or APPNOTE#4.4.17.1, "All slashes MUST be forward slashes '/'") but there are a lot of bad zip generators...
        // Search "unzip mismatching "local" filename continuing with "central" filename version" on
        // the internet.
        //
        // I think I see the logic here : the central directory is used to display
        // content and the local directory is used to extract the files. Mixing / and \
        // may be used to display \ to windows users and use / when extracting the files.
        // Unfortunately, this lead also to some issues : http://seclists.org/fulldisclosure/2009/Sep/394
        this.fileNameLength = reader.readInt(2);
        localExtraFieldsLength = reader.readInt(2); // can't be sure this will be the same as the central dir
        this.fileName = reader.readString(this.fileNameLength);
        reader.skip(localExtraFieldsLength);

        if (this.compressedSize == -1 || this.uncompressedSize == -1) {
            throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory " + "(compressedSize == -1 || uncompressedSize == -1)");
        }

        compression = utils.findCompression(this.compressionMethod);
        if (compression === null) { // no compression found
            throw new Error("Corrupted zip : compression " + utils.pretty(this.compressionMethod) + " unknown (inner file : " + this.fileName + ")");
        }
        this.decompressed = new CompressedObject();
        this.decompressed.compressedSize = this.compressedSize;
        this.decompressed.uncompressedSize = this.uncompressedSize;
        this.decompressed.crc32 = this.crc32;
        this.decompressed.compressionMethod = this.compressionMethod;
        this.decompressed.getCompressedContent = this.prepareCompressedContent(reader, reader.index, this.compressedSize, compression);
        this.decompressed.getContent = this.prepareContent(reader, reader.index, this.compressedSize, compression, this.uncompressedSize);

        // we need to compute the crc32...
        if (this.loadOptions.checkCRC32) {
            this.decompressed = utils.transformTo("string", this.decompressed.getContent());
            if (jszipProto.crc32(this.decompressed) !== this.crc32) {
                throw new Error("Corrupted zip : CRC32 mismatch");
            }
        }
    },

    /**
     * Read the central part of a zip file and add the info in this object.
     * @param {DataReader} reader the reader to use.
     */
    readCentralPart: function(reader) {
        this.versionMadeBy = reader.readInt(2);
        this.versionNeeded = reader.readInt(2);
        this.bitFlag = reader.readInt(2);
        this.compressionMethod = reader.readString(2);
        this.date = reader.readDate();
        this.crc32 = reader.readInt(4);
        this.compressedSize = reader.readInt(4);
        this.uncompressedSize = reader.readInt(4);
        this.fileNameLength = reader.readInt(2);
        this.extraFieldsLength = reader.readInt(2);
        this.fileCommentLength = reader.readInt(2);
        this.diskNumberStart = reader.readInt(2);
        this.internalFileAttributes = reader.readInt(2);
        this.externalFileAttributes = reader.readInt(4);
        this.localHeaderOffset = reader.readInt(4);

        if (this.isEncrypted()) {
            throw new Error("Encrypted zip are not supported");
        }

        this.fileName = reader.readString(this.fileNameLength);
        this.readExtraFields(reader);
        this.parseZIP64ExtraField(reader);
        this.fileComment = reader.readString(this.fileCommentLength);
    },

    /**
     * Parse the external file attributes and get the unix/dos permissions.
     */
    processAttributes: function () {
        this.unixPermissions = null;
        this.dosPermissions = null;
        var madeBy = this.versionMadeBy >> 8;

        // Check if we have the DOS directory flag set.
        // We look for it in the DOS and UNIX permissions
        // but some unknown platform could set it as a compatibility flag.
        this.dir = this.externalFileAttributes & 0x0010 ? true : false;

        if(madeBy === MADE_BY_DOS) {
            // first 6 bits (0 to 5)
            this.dosPermissions = this.externalFileAttributes & 0x3F;
        }

        if(madeBy === MADE_BY_UNIX) {
            this.unixPermissions = (this.externalFileAttributes >> 16) & 0xFFFF;
            // the octal permissions are in (this.unixPermissions & 0x01FF).toString(8);
        }

        // fail safe : if the name ends with a / it probably means a folder
        if (!this.dir && this.fileName.slice(-1) === '/') {
            this.dir = true;
        }
    },

    /**
     * Parse the ZIP64 extra field and merge the info in the current ZipEntry.
     * @param {DataReader} reader the reader to use.
     */
    parseZIP64ExtraField: function(reader) {

        if (!this.extraFields[0x0001]) {
            return;
        }

        // should be something, preparing the extra reader
        var extraReader = new StringReader(this.extraFields[0x0001].value);

        // I really hope that these 64bits integer can fit in 32 bits integer, because js
        // won't let us have more.
        if (this.uncompressedSize === utils.MAX_VALUE_32BITS) {
            this.uncompressedSize = extraReader.readInt(8);
        }
        if (this.compressedSize === utils.MAX_VALUE_32BITS) {
            this.compressedSize = extraReader.readInt(8);
        }
        if (this.localHeaderOffset === utils.MAX_VALUE_32BITS) {
            this.localHeaderOffset = extraReader.readInt(8);
        }
        if (this.diskNumberStart === utils.MAX_VALUE_32BITS) {
            this.diskNumberStart = extraReader.readInt(4);
        }
    },
    /**
     * Read the central part of a zip file and add the info in this object.
     * @param {DataReader} reader the reader to use.
     */
    readExtraFields: function(reader) {
        var start = reader.index,
            extraFieldId,
            extraFieldLength,
            extraFieldValue;

        this.extraFields = this.extraFields || {};

        while (reader.index < start + this.extraFieldsLength) {
            extraFieldId = reader.readInt(2);
            extraFieldLength = reader.readInt(2);
            extraFieldValue = reader.readString(extraFieldLength);

            this.extraFields[extraFieldId] = {
                id: extraFieldId,
                length: extraFieldLength,
                value: extraFieldValue
            };
        }
    },
    /**
     * Apply an UTF8 transformation if needed.
     */
    handleUTF8: function() {
        if (this.useUTF8()) {
            this.fileName = jszipProto.utf8decode(this.fileName);
            this.fileComment = jszipProto.utf8decode(this.fileComment);
        } else {
            var upath = this.findExtraFieldUnicodePath();
            if (upath !== null) {
                this.fileName = upath;
            }
            var ucomment = this.findExtraFieldUnicodeComment();
            if (ucomment !== null) {
                this.fileComment = ucomment;
            }
        }
    },

    /**
     * Find the unicode path declared in the extra field, if any.
     * @return {String} the unicode path, null otherwise.
     */
    findExtraFieldUnicodePath: function() {
        var upathField = this.extraFields[0x7075];
        if (upathField) {
            var extraReader = new StringReader(upathField.value);

            // wrong version
            if (extraReader.readInt(1) !== 1) {
                return null;
            }

            // the crc of the filename changed, this field is out of date.
            if (jszipProto.crc32(this.fileName) !== extraReader.readInt(4)) {
                return null;
            }

            return jszipProto.utf8decode(extraReader.readString(upathField.length - 5));
        }
        return null;
    },

    /**
     * Find the unicode comment declared in the extra field, if any.
     * @return {String} the unicode comment, null otherwise.
     */
    findExtraFieldUnicodeComment: function() {
        var ucommentField = this.extraFields[0x6375];
        if (ucommentField) {
            var extraReader = new StringReader(ucommentField.value);

            // wrong version
            if (extraReader.readInt(1) !== 1) {
                return null;
            }

            // the crc of the comment changed, this field is out of date.
            if (jszipProto.crc32(this.fileComment) !== extraReader.readInt(4)) {
                return null;
            }

            return jszipProto.utf8decode(extraReader.readString(ucommentField.length - 5));
        }
        return null;
    }
};
module.exports = ZipEntry;

},{"./compressedObject":13,"./object":24,"./stringReader":26,"./utils":32}],35:[function(require,module,exports){
// Top level file is just a mixin of submodules & constants
'use strict';

var assign    = require('./lib/utils/common').assign;

var deflate   = require('./lib/deflate');
var inflate   = require('./lib/inflate');
var constants = require('./lib/zlib/constants');

var pako = {};

assign(pako, deflate, inflate, constants);

module.exports = pako;

},{"./lib/deflate":36,"./lib/inflate":37,"./lib/utils/common":38,"./lib/zlib/constants":41}],36:[function(require,module,exports){
'use strict';


var zlib_deflate = require('./zlib/deflate.js');
var utils = require('./utils/common');
var strings = require('./utils/strings');
var msg = require('./zlib/messages');
var zstream = require('./zlib/zstream');

var toString = Object.prototype.toString;

/* Public constants ==========================================================*/
/* ===========================================================================*/

var Z_NO_FLUSH      = 0;
var Z_FINISH        = 4;

var Z_OK            = 0;
var Z_STREAM_END    = 1;
var Z_SYNC_FLUSH    = 2;

var Z_DEFAULT_COMPRESSION = -1;

var Z_DEFAULT_STRATEGY    = 0;

var Z_DEFLATED  = 8;

/* ===========================================================================*/


/**
 * class Deflate
 *
 * Generic JS-style wrapper for zlib calls. If you don't need
 * streaming behaviour - use more simple functions: [[deflate]],
 * [[deflateRaw]] and [[gzip]].
 **/

/* internal
 * Deflate.chunks -> Array
 *
 * Chunks of output data, if [[Deflate#onData]] not overriden.
 **/

/**
 * Deflate.result -> Uint8Array|Array
 *
 * Compressed result, generated by default [[Deflate#onData]]
 * and [[Deflate#onEnd]] handlers. Filled after you push last chunk
 * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you
 * push a chunk with explicit flush (call [[Deflate#push]] with
 * `Z_SYNC_FLUSH` param).
 **/

/**
 * Deflate.err -> Number
 *
 * Error code after deflate finished. 0 (Z_OK) on success.
 * You will not need it in real life, because deflate errors
 * are possible only on wrong options or bad `onData` / `onEnd`
 * custom handlers.
 **/

/**
 * Deflate.msg -> String
 *
 * Error message, if [[Deflate.err]] != 0
 **/


/**
 * new Deflate(options)
 * - options (Object): zlib deflate options.
 *
 * Creates new deflator instance with specified params. Throws exception
 * on bad params. Supported options:
 *
 * - `level`
 * - `windowBits`
 * - `memLevel`
 * - `strategy`
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information on these.
 *
 * Additional options, for internal needs:
 *
 * - `chunkSize` - size of generated data chunks (16K by default)
 * - `raw` (Boolean) - do raw deflate
 * - `gzip` (Boolean) - create gzip wrapper
 * - `to` (String) - if equal to 'string', then result will be "binary string"
 *    (each char code [0..255])
 * - `header` (Object) - custom header for gzip
 *   - `text` (Boolean) - true if compressed data believed to be text
 *   - `time` (Number) - modification time, unix timestamp
 *   - `os` (Number) - operation system code
 *   - `extra` (Array) - array of bytes with extra data (max 65536)
 *   - `name` (String) - file name (binary string)
 *   - `comment` (String) - comment (binary string)
 *   - `hcrc` (Boolean) - true if header crc should be added
 *
 * ##### Example:
 *
 * ```javascript
 * var pako = require('pako')
 *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])
 *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);
 *
 * var deflate = new pako.Deflate({ level: 3});
 *
 * deflate.push(chunk1, false);
 * deflate.push(chunk2, true);  // true -> last chunk
 *
 * if (deflate.err) { throw new Error(deflate.err); }
 *
 * console.log(deflate.result);
 * ```
 **/
var Deflate = function(options) {

  this.options = utils.assign({
    level: Z_DEFAULT_COMPRESSION,
    method: Z_DEFLATED,
    chunkSize: 16384,
    windowBits: 15,
    memLevel: 8,
    strategy: Z_DEFAULT_STRATEGY,
    to: ''
  }, options || {});

  var opt = this.options;

  if (opt.raw && (opt.windowBits > 0)) {
    opt.windowBits = -opt.windowBits;
  }

  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {
    opt.windowBits += 16;
  }

  this.err    = 0;      // error code, if happens (0 = Z_OK)
  this.msg    = '';     // error message
  this.ended  = false;  // used to avoid multiple onEnd() calls
  this.chunks = [];     // chunks of compressed data

  this.strm = new zstream();
  this.strm.avail_out = 0;

  var status = zlib_deflate.deflateInit2(
    this.strm,
    opt.level,
    opt.method,
    opt.windowBits,
    opt.memLevel,
    opt.strategy
  );

  if (status !== Z_OK) {
    throw new Error(msg[status]);
  }

  if (opt.header) {
    zlib_deflate.deflateSetHeader(this.strm, opt.header);
  }
};

/**
 * Deflate#push(data[, mode]) -> Boolean
 * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be
 *   converted to utf8 byte sequence.
 * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.
 *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` meansh Z_FINISH.
 *
 * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with
 * new compressed chunks. Returns `true` on success. The last data block must have
 * mode Z_FINISH (or `true`). That will flush internal pending buffers and call
 * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you
 * can use mode Z_SYNC_FLUSH, keeping the compression context.
 *
 * On fail call [[Deflate#onEnd]] with error code and return false.
 *
 * We strongly recommend to use `Uint8Array` on input for best speed (output
 * array format is detected automatically). Also, don't skip last param and always
 * use the same type in your code (boolean or number). That will improve JS speed.
 *
 * For regular `Array`-s make sure all elements are [0..255].
 *
 * ##### Example
 *
 * ```javascript
 * push(chunk, false); // push one of data chunks
 * ...
 * push(chunk, true);  // push last chunk
 * ```
 **/
Deflate.prototype.push = function(data, mode) {
  var strm = this.strm;
  var chunkSize = this.options.chunkSize;
  var status, _mode;

  if (this.ended) { return false; }

  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);

  // Convert data if needed
  if (typeof data === 'string') {
    // If we need to compress text, change encoding to utf8.
    strm.input = strings.string2buf(data);
  } else if (toString.call(data) === '[object ArrayBuffer]') {
    strm.input = new Uint8Array(data);
  } else {
    strm.input = data;
  }

  strm.next_in = 0;
  strm.avail_in = strm.input.length;

  do {
    if (strm.avail_out === 0) {
      strm.output = new utils.Buf8(chunkSize);
      strm.next_out = 0;
      strm.avail_out = chunkSize;
    }
    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */

    if (status !== Z_STREAM_END && status !== Z_OK) {
      this.onEnd(status);
      this.ended = true;
      return false;
    }
    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {
      if (this.options.to === 'string') {
        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));
      } else {
        this.onData(utils.shrinkBuf(strm.output, strm.next_out));
      }
    }
  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);

  // Finalize on the last chunk.
  if (_mode === Z_FINISH) {
    status = zlib_deflate.deflateEnd(this.strm);
    this.onEnd(status);
    this.ended = true;
    return status === Z_OK;
  }

  // callback interim results if Z_SYNC_FLUSH.
  if (_mode === Z_SYNC_FLUSH) {
    this.onEnd(Z_OK);
    strm.avail_out = 0;
    return true;
  }

  return true;
};


/**
 * Deflate#onData(chunk) -> Void
 * - chunk (Uint8Array|Array|String): ouput data. Type of array depends
 *   on js engine support. When string output requested, each chunk
 *   will be string.
 *
 * By default, stores data blocks in `chunks[]` property and glue
 * those in `onEnd`. Override this handler, if you need another behaviour.
 **/
Deflate.prototype.onData = function(chunk) {
  this.chunks.push(chunk);
};


/**
 * Deflate#onEnd(status) -> Void
 * - status (Number): deflate status. 0 (Z_OK) on success,
 *   other if not.
 *
 * Called once after you tell deflate that the input stream is
 * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)
 * or if an error happened. By default - join collected chunks,
 * free memory and fill `results` / `err` properties.
 **/
Deflate.prototype.onEnd = function(status) {
  // On success - join
  if (status === Z_OK) {
    if (this.options.to === 'string') {
      this.result = this.chunks.join('');
    } else {
      this.result = utils.flattenChunks(this.chunks);
    }
  }
  this.chunks = [];
  this.err = status;
  this.msg = this.strm.msg;
};


/**
 * deflate(data[, options]) -> Uint8Array|Array|String
 * - data (Uint8Array|Array|String): input data to compress.
 * - options (Object): zlib deflate options.
 *
 * Compress `data` with deflate alrorythm and `options`.
 *
 * Supported options are:
 *
 * - level
 * - windowBits
 * - memLevel
 * - strategy
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information on these.
 *
 * Sugar (options):
 *
 * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify
 *   negative windowBits implicitly.
 * - `to` (String) - if equal to 'string', then result will be "binary string"
 *    (each char code [0..255])
 *
 * ##### Example:
 *
 * ```javascript
 * var pako = require('pako')
 *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);
 *
 * console.log(pako.deflate(data));
 * ```
 **/
function deflate(input, options) {
  var deflator = new Deflate(options);

  deflator.push(input, true);

  // That will never happens, if you don't cheat with options :)
  if (deflator.err) { throw deflator.msg; }

  return deflator.result;
}


/**
 * deflateRaw(data[, options]) -> Uint8Array|Array|String
 * - data (Uint8Array|Array|String): input data to compress.
 * - options (Object): zlib deflate options.
 *
 * The same as [[deflate]], but creates raw data, without wrapper
 * (header and adler32 crc).
 **/
function deflateRaw(input, options) {
  options = options || {};
  options.raw = true;
  return deflate(input, options);
}


/**
 * gzip(data[, options]) -> Uint8Array|Array|String
 * - data (Uint8Array|Array|String): input data to compress.
 * - options (Object): zlib deflate options.
 *
 * The same as [[deflate]], but create gzip wrapper instead of
 * deflate one.
 **/
function gzip(input, options) {
  options = options || {};
  options.gzip = true;
  return deflate(input, options);
}


exports.Deflate = Deflate;
exports.deflate = deflate;
exports.deflateRaw = deflateRaw;
exports.gzip = gzip;

},{"./utils/common":38,"./utils/strings":39,"./zlib/deflate.js":43,"./zlib/messages":48,"./zlib/zstream":50}],37:[function(require,module,exports){
'use strict';


var zlib_inflate = require('./zlib/inflate.js');
var utils = require('./utils/common');
var strings = require('./utils/strings');
var c = require('./zlib/constants');
var msg = require('./zlib/messages');
var zstream = require('./zlib/zstream');
var gzheader = require('./zlib/gzheader');

var toString = Object.prototype.toString;

/**
 * class Inflate
 *
 * Generic JS-style wrapper for zlib calls. If you don't need
 * streaming behaviour - use more simple functions: [[inflate]]
 * and [[inflateRaw]].
 **/

/* internal
 * inflate.chunks -> Array
 *
 * Chunks of output data, if [[Inflate#onData]] not overriden.
 **/

/**
 * Inflate.result -> Uint8Array|Array|String
 *
 * Uncompressed result, generated by default [[Inflate#onData]]
 * and [[Inflate#onEnd]] handlers. Filled after you push last chunk
 * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you
 * push a chunk with explicit flush (call [[Inflate#push]] with
 * `Z_SYNC_FLUSH` param).
 **/

/**
 * Inflate.err -> Number
 *
 * Error code after inflate finished. 0 (Z_OK) on success.
 * Should be checked if broken data possible.
 **/

/**
 * Inflate.msg -> String
 *
 * Error message, if [[Inflate.err]] != 0
 **/


/**
 * new Inflate(options)
 * - options (Object): zlib inflate options.
 *
 * Creates new inflator instance with specified params. Throws exception
 * on bad params. Supported options:
 *
 * - `windowBits`
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information on these.
 *
 * Additional options, for internal needs:
 *
 * - `chunkSize` - size of generated data chunks (16K by default)
 * - `raw` (Boolean) - do raw inflate
 * - `to` (String) - if equal to 'string', then result will be converted
 *   from utf8 to utf16 (javascript) string. When string output requested,
 *   chunk length can differ from `chunkSize`, depending on content.
 *
 * By default, when no options set, autodetect deflate/gzip data format via
 * wrapper header.
 *
 * ##### Example:
 *
 * ```javascript
 * var pako = require('pako')
 *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])
 *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);
 *
 * var inflate = new pako.Inflate({ level: 3});
 *
 * inflate.push(chunk1, false);
 * inflate.push(chunk2, true);  // true -> last chunk
 *
 * if (inflate.err) { throw new Error(inflate.err); }
 *
 * console.log(inflate.result);
 * ```
 **/
var Inflate = function(options) {

  this.options = utils.assign({
    chunkSize: 16384,
    windowBits: 0,
    to: ''
  }, options || {});

  var opt = this.options;

  // Force window size for `raw` data, if not set directly,
  // because we have no header for autodetect.
  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {
    opt.windowBits = -opt.windowBits;
    if (opt.windowBits === 0) { opt.windowBits = -15; }
  }

  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate
  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&
      !(options && options.windowBits)) {
    opt.windowBits += 32;
  }

  // Gzip header has no info about windows size, we can do autodetect only
  // for deflate. So, if window size not set, force it to max when gzip possible
  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {
    // bit 3 (16) -> gzipped data
    // bit 4 (32) -> autodetect gzip/deflate
    if ((opt.windowBits & 15) === 0) {
      opt.windowBits |= 15;
    }
  }

  this.err    = 0;      // error code, if happens (0 = Z_OK)
  this.msg    = '';     // error message
  this.ended  = false;  // used to avoid multiple onEnd() calls
  this.chunks = [];     // chunks of compressed data

  this.strm   = new zstream();
  this.strm.avail_out = 0;

  var status  = zlib_inflate.inflateInit2(
    this.strm,
    opt.windowBits
  );

  if (status !== c.Z_OK) {
    throw new Error(msg[status]);
  }

  this.header = new gzheader();

  zlib_inflate.inflateGetHeader(this.strm, this.header);
};

/**
 * Inflate#push(data[, mode]) -> Boolean
 * - data (Uint8Array|Array|ArrayBuffer|String): input data
 * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.
 *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` meansh Z_FINISH.
 *
 * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with
 * new output chunks. Returns `true` on success. The last data block must have
 * mode Z_FINISH (or `true`). That will flush internal pending buffers and call
 * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you
 * can use mode Z_SYNC_FLUSH, keeping the decompression context.
 *
 * On fail call [[Inflate#onEnd]] with error code and return false.
 *
 * We strongly recommend to use `Uint8Array` on input for best speed (output
 * format is detected automatically). Also, don't skip last param and always
 * use the same type in your code (boolean or number). That will improve JS speed.
 *
 * For regular `Array`-s make sure all elements are [0..255].
 *
 * ##### Example
 *
 * ```javascript
 * push(chunk, false); // push one of data chunks
 * ...
 * push(chunk, true);  // push last chunk
 * ```
 **/
Inflate.prototype.push = function(data, mode) {
  var strm = this.strm;
  var chunkSize = this.options.chunkSize;
  var status, _mode;
  var next_out_utf8, tail, utf8str;

  // Flag to properly process Z_BUF_ERROR on testing inflate call
  // when we check that all output data was flushed.
  var allowBufError = false;

  if (this.ended) { return false; }
  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);

  // Convert data if needed
  if (typeof data === 'string') {
    // Only binary strings can be decompressed on practice
    strm.input = strings.binstring2buf(data);
  } else if (toString.call(data) === '[object ArrayBuffer]') {
    strm.input = new Uint8Array(data);
  } else {
    strm.input = data;
  }

  strm.next_in = 0;
  strm.avail_in = strm.input.length;

  do {
    if (strm.avail_out === 0) {
      strm.output = new utils.Buf8(chunkSize);
      strm.next_out = 0;
      strm.avail_out = chunkSize;
    }

    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */

    if (status === c.Z_BUF_ERROR && allowBufError === true) {
      status = c.Z_OK;
      allowBufError = false;
    }

    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {
      this.onEnd(status);
      this.ended = true;
      return false;
    }

    if (strm.next_out) {
      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {

        if (this.options.to === 'string') {

          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);

          tail = strm.next_out - next_out_utf8;
          utf8str = strings.buf2string(strm.output, next_out_utf8);

          // move tail
          strm.next_out = tail;
          strm.avail_out = chunkSize - tail;
          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }

          this.onData(utf8str);

        } else {
          this.onData(utils.shrinkBuf(strm.output, strm.next_out));
        }
      }
    }

    // When no more input data, we should check that internal inflate buffers
    // are flushed. The only way to do it when avail_out = 0 - run one more
    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.
    // Here we set flag to process this error properly.
    //
    // NOTE. Deflate does not return error in this case and does not needs such
    // logic.
    if (strm.avail_in === 0 && strm.avail_out === 0) {
      allowBufError = true;
    }

  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);

  if (status === c.Z_STREAM_END) {
    _mode = c.Z_FINISH;
  }

  // Finalize on the last chunk.
  if (_mode === c.Z_FINISH) {
    status = zlib_inflate.inflateEnd(this.strm);
    this.onEnd(status);
    this.ended = true;
    return status === c.Z_OK;
  }

  // callback interim results if Z_SYNC_FLUSH.
  if (_mode === c.Z_SYNC_FLUSH) {
    this.onEnd(c.Z_OK);
    strm.avail_out = 0;
    return true;
  }

  return true;
};


/**
 * Inflate#onData(chunk) -> Void
 * - chunk (Uint8Array|Array|String): ouput data. Type of array depends
 *   on js engine support. When string output requested, each chunk
 *   will be string.
 *
 * By default, stores data blocks in `chunks[]` property and glue
 * those in `onEnd`. Override this handler, if you need another behaviour.
 **/
Inflate.prototype.onData = function(chunk) {
  this.chunks.push(chunk);
};


/**
 * Inflate#onEnd(status) -> Void
 * - status (Number): inflate status. 0 (Z_OK) on success,
 *   other if not.
 *
 * Called either after you tell inflate that the input stream is
 * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)
 * or if an error happened. By default - join collected chunks,
 * free memory and fill `results` / `err` properties.
 **/
Inflate.prototype.onEnd = function(status) {
  // On success - join
  if (status === c.Z_OK) {
    if (this.options.to === 'string') {
      // Glue & convert here, until we teach pako to send
      // utf8 alligned strings to onData
      this.result = this.chunks.join('');
    } else {
      this.result = utils.flattenChunks(this.chunks);
    }
  }
  this.chunks = [];
  this.err = status;
  this.msg = this.strm.msg;
};


/**
 * inflate(data[, options]) -> Uint8Array|Array|String
 * - data (Uint8Array|Array|String): input data to decompress.
 * - options (Object): zlib inflate options.
 *
 * Decompress `data` with inflate/ungzip and `options`. Autodetect
 * format via wrapper header by default. That's why we don't provide
 * separate `ungzip` method.
 *
 * Supported options are:
 *
 * - windowBits
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information.
 *
 * Sugar (options):
 *
 * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify
 *   negative windowBits implicitly.
 * - `to` (String) - if equal to 'string', then result will be converted
 *   from utf8 to utf16 (javascript) string. When string output requested,
 *   chunk length can differ from `chunkSize`, depending on content.
 *
 *
 * ##### Example:
 *
 * ```javascript
 * var pako = require('pako')
 *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])
 *   , output;
 *
 * try {
 *   output = pako.inflate(input);
 * } catch (err)
 *   console.log(err);
 * }
 * ```
 **/
function inflate(input, options) {
  var inflator = new Inflate(options);

  inflator.push(input, true);

  // That will never happens, if you don't cheat with options :)
  if (inflator.err) { throw inflator.msg; }

  return inflator.result;
}


/**
 * inflateRaw(data[, options]) -> Uint8Array|Array|String
 * - data (Uint8Array|Array|String): input data to decompress.
 * - options (Object): zlib inflate options.
 *
 * The same as [[inflate]], but creates raw data, without wrapper
 * (header and adler32 crc).
 **/
function inflateRaw(input, options) {
  options = options || {};
  options.raw = true;
  return inflate(input, options);
}


/**
 * ungzip(data[, options]) -> Uint8Array|Array|String
 * - data (Uint8Array|Array|String): input data to decompress.
 * - options (Object): zlib inflate options.
 *
 * Just shortcut to [[inflate]], because it autodetects format
 * by header.content. Done for convenience.
 **/


exports.Inflate = Inflate;
exports.inflate = inflate;
exports.inflateRaw = inflateRaw;
exports.ungzip  = inflate;

},{"./utils/common":38,"./utils/strings":39,"./zlib/constants":41,"./zlib/gzheader":44,"./zlib/inflate.js":46,"./zlib/messages":48,"./zlib/zstream":50}],38:[function(require,module,exports){
'use strict';


var TYPED_OK =  (typeof Uint8Array !== 'undefined') &&
                (typeof Uint16Array !== 'undefined') &&
                (typeof Int32Array !== 'undefined');


exports.assign = function (obj /*from1, from2, from3, ...*/) {
  var sources = Array.prototype.slice.call(arguments, 1);
  while (sources.length) {
    var source = sources.shift();
    if (!source) { continue; }

    if (typeof source !== 'object') {
      throw new TypeError(source + 'must be non-object');
    }

    for (var p in source) {
      if (source.hasOwnProperty(p)) {
        obj[p] = source[p];
      }
    }
  }

  return obj;
};


// reduce buffer size, avoiding mem copy
exports.shrinkBuf = function (buf, size) {
  if (buf.length === size) { return buf; }
  if (buf.subarray) { return buf.subarray(0, size); }
  buf.length = size;
  return buf;
};


var fnTyped = {
  arraySet: function (dest, src, src_offs, len, dest_offs) {
    if (src.subarray && dest.subarray) {
      dest.set(src.subarray(src_offs, src_offs+len), dest_offs);
      return;
    }
    // Fallback to ordinary array
    for (var i=0; i<len; i++) {
      dest[dest_offs + i] = src[src_offs + i];
    }
  },
  // Join array of chunks to single array.
  flattenChunks: function(chunks) {
    var i, l, len, pos, chunk, result;

    // calculate data length
    len = 0;
    for (i=0, l=chunks.length; i<l; i++) {
      len += chunks[i].length;
    }

    // join chunks
    result = new Uint8Array(len);
    pos = 0;
    for (i=0, l=chunks.length; i<l; i++) {
      chunk = chunks[i];
      result.set(chunk, pos);
      pos += chunk.length;
    }

    return result;
  }
};

var fnUntyped = {
  arraySet: function (dest, src, src_offs, len, dest_offs) {
    for (var i=0; i<len; i++) {
      dest[dest_offs + i] = src[src_offs + i];
    }
  },
  // Join array of chunks to single array.
  flattenChunks: function(chunks) {
    return [].concat.apply([], chunks);
  }
};


// Enable/Disable typed arrays use, for testing
//
exports.setTyped = function (on) {
  if (on) {
    exports.Buf8  = Uint8Array;
    exports.Buf16 = Uint16Array;
    exports.Buf32 = Int32Array;
    exports.assign(exports, fnTyped);
  } else {
    exports.Buf8  = Array;
    exports.Buf16 = Array;
    exports.Buf32 = Array;
    exports.assign(exports, fnUntyped);
  }
};

exports.setTyped(TYPED_OK);

},{}],39:[function(require,module,exports){
// String encode/decode helpers
'use strict';


var utils = require('./common');


// Quick check if we can use fast array to bin string conversion
//
// - apply(Array) can fail on Android 2.2
// - apply(Uint8Array) can fail on iOS 5.1 Safary
//
var STR_APPLY_OK = true;
var STR_APPLY_UIA_OK = true;

try { String.fromCharCode.apply(null, [0]); } catch(__) { STR_APPLY_OK = false; }
try { String.fromCharCode.apply(null, new Uint8Array(1)); } catch(__) { STR_APPLY_UIA_OK = false; }


// Table with utf8 lengths (calculated by first byte of sequence)
// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,
// because max possible codepoint is 0x10ffff
var _utf8len = new utils.Buf8(256);
for (var q=0; q<256; q++) {
  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);
}
_utf8len[254]=_utf8len[254]=1; // Invalid sequence start


// convert string to array (typed, when possible)
exports.string2buf = function (str) {
  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;

  // count binary size
  for (m_pos = 0; m_pos < str_len; m_pos++) {
    c = str.charCodeAt(m_pos);
    if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {
      c2 = str.charCodeAt(m_pos+1);
      if ((c2 & 0xfc00) === 0xdc00) {
        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);
        m_pos++;
      }
    }
    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;
  }

  // allocate buffer
  buf = new utils.Buf8(buf_len);

  // convert
  for (i=0, m_pos = 0; i < buf_len; m_pos++) {
    c = str.charCodeAt(m_pos);
    if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {
      c2 = str.charCodeAt(m_pos+1);
      if ((c2 & 0xfc00) === 0xdc00) {
        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);
        m_pos++;
      }
    }
    if (c < 0x80) {
      /* one byte */
      buf[i++] = c;
    } else if (c < 0x800) {
      /* two bytes */
      buf[i++] = 0xC0 | (c >>> 6);
      buf[i++] = 0x80 | (c & 0x3f);
    } else if (c < 0x10000) {
      /* three bytes */
      buf[i++] = 0xE0 | (c >>> 12);
      buf[i++] = 0x80 | (c >>> 6 & 0x3f);
      buf[i++] = 0x80 | (c & 0x3f);
    } else {
      /* four bytes */
      buf[i++] = 0xf0 | (c >>> 18);
      buf[i++] = 0x80 | (c >>> 12 & 0x3f);
      buf[i++] = 0x80 | (c >>> 6 & 0x3f);
      buf[i++] = 0x80 | (c & 0x3f);
    }
  }

  return buf;
};

// Helper (used in 2 places)
function buf2binstring(buf, len) {
  // use fallback for big arrays to avoid stack overflow
  if (len < 65537) {
    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {
      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));
    }
  }

  var result = '';
  for (var i=0; i < len; i++) {
    result += String.fromCharCode(buf[i]);
  }
  return result;
}


// Convert byte array to binary string
exports.buf2binstring = function(buf) {
  return buf2binstring(buf, buf.length);
};


// Convert binary string (typed, when possible)
exports.binstring2buf = function(str) {
  var buf = new utils.Buf8(str.length);
  for (var i=0, len=buf.length; i < len; i++) {
    buf[i] = str.charCodeAt(i);
  }
  return buf;
};


// convert array to string
exports.buf2string = function (buf, max) {
  var i, out, c, c_len;
  var len = max || buf.length;

  // Reserve max possible length (2 words per char)
  // NB: by unknown reasons, Array is significantly faster for
  //     String.fromCharCode.apply than Uint16Array.
  var utf16buf = new Array(len*2);

  for (out=0, i=0; i<len;) {
    c = buf[i++];
    // quick process ascii
    if (c < 0x80) { utf16buf[out++] = c; continue; }

    c_len = _utf8len[c];
    // skip 5 & 6 byte codes
    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len-1; continue; }

    // apply mask on first byte
    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;
    // join the rest
    while (c_len > 1 && i < len) {
      c = (c << 6) | (buf[i++] & 0x3f);
      c_len--;
    }

    // terminated by end of string?
    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }

    if (c < 0x10000) {
      utf16buf[out++] = c;
    } else {
      c -= 0x10000;
      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);
      utf16buf[out++] = 0xdc00 | (c & 0x3ff);
    }
  }

  return buf2binstring(utf16buf, out);
};


// Calculate max possible position in utf8 buffer,
// that will not break sequence. If that's not possible
// - (very small limits) return max size as is.
//
// buf[] - utf8 bytes array
// max   - length limit (mandatory);
exports.utf8border = function(buf, max) {
  var pos;

  max = max || buf.length;
  if (max > buf.length) { max = buf.length; }

  // go back from last position, until start of sequence found
  pos = max-1;
  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }

  // Fuckup - very small and broken sequence,
  // return max, because we should return something anyway.
  if (pos < 0) { return max; }

  // If we came to start of buffer - that means vuffer is too small,
  // return max too.
  if (pos === 0) { return max; }

  return (pos + _utf8len[buf[pos]] > max) ? pos : max;
};

},{"./common":38}],40:[function(require,module,exports){
'use strict';

// Note: adler32 takes 12% for level 0 and 2% for level 6.
// It doesn't worth to make additional optimizationa as in original.
// Small size is preferable.

function adler32(adler, buf, len, pos) {
  var s1 = (adler & 0xffff) |0,
      s2 = ((adler >>> 16) & 0xffff) |0,
      n = 0;

  while (len !== 0) {
    // Set limit ~ twice less than 5552, to keep
    // s2 in 31-bits, because we force signed ints.
    // in other case %= will fail.
    n = len > 2000 ? 2000 : len;
    len -= n;

    do {
      s1 = (s1 + buf[pos++]) |0;
      s2 = (s2 + s1) |0;
    } while (--n);

    s1 %= 65521;
    s2 %= 65521;
  }

  return (s1 | (s2 << 16)) |0;
}


module.exports = adler32;

},{}],41:[function(require,module,exports){
module.exports = {

  /* Allowed flush values; see deflate() and inflate() below for details */
  Z_NO_FLUSH:         0,
  Z_PARTIAL_FLUSH:    1,
  Z_SYNC_FLUSH:       2,
  Z_FULL_FLUSH:       3,
  Z_FINISH:           4,
  Z_BLOCK:            5,
  Z_TREES:            6,

  /* Return codes for the compression/decompression functions. Negative values
  * are errors, positive values are used for special but normal events.
  */
  Z_OK:               0,
  Z_STREAM_END:       1,
  Z_NEED_DICT:        2,
  Z_ERRNO:           -1,
  Z_STREAM_ERROR:    -2,
  Z_DATA_ERROR:      -3,
  //Z_MEM_ERROR:     -4,
  Z_BUF_ERROR:       -5,
  //Z_VERSION_ERROR: -6,

  /* compression levels */
  Z_NO_COMPRESSION:         0,
  Z_BEST_SPEED:             1,
  Z_BEST_COMPRESSION:       9,
  Z_DEFAULT_COMPRESSION:   -1,


  Z_FILTERED:               1,
  Z_HUFFMAN_ONLY:           2,
  Z_RLE:                    3,
  Z_FIXED:                  4,
  Z_DEFAULT_STRATEGY:       0,

  /* Possible values of the data_type field (though see inflate()) */
  Z_BINARY:                 0,
  Z_TEXT:                   1,
  //Z_ASCII:                1, // = Z_TEXT (deprecated)
  Z_UNKNOWN:                2,

  /* The deflate compression method */
  Z_DEFLATED:               8
  //Z_NULL:                 null // Use -1 or null inline, depending on var type
};

},{}],42:[function(require,module,exports){
'use strict';

// Note: we can't get significant speed boost here.
// So write code to minimize size - no pregenerated tables
// and array tools dependencies.


// Use ordinary array, since untyped makes no boost here
function makeTable() {
  var c, table = [];

  for (var n =0; n < 256; n++) {
    c = n;
    for (var k =0; k < 8; k++) {
      c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));
    }
    table[n] = c;
  }

  return table;
}

// Create table on load. Just 255 signed longs. Not a problem.
var crcTable = makeTable();


function crc32(crc, buf, len, pos) {
  var t = crcTable,
      end = pos + len;

  crc = crc ^ (-1);

  for (var i = pos; i < end; i++) {
    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];
  }

  return (crc ^ (-1)); // >>> 0;
}


module.exports = crc32;

},{}],43:[function(require,module,exports){
'use strict';

var utils   = require('../utils/common');
var trees   = require('./trees');
var adler32 = require('./adler32');
var crc32   = require('./crc32');
var msg   = require('./messages');

/* Public constants ==========================================================*/
/* ===========================================================================*/


/* Allowed flush values; see deflate() and inflate() below for details */
var Z_NO_FLUSH      = 0;
var Z_PARTIAL_FLUSH = 1;
//var Z_SYNC_FLUSH    = 2;
var Z_FULL_FLUSH    = 3;
var Z_FINISH        = 4;
var Z_BLOCK         = 5;
//var Z_TREES         = 6;


/* Return codes for the compression/decompression functions. Negative values
 * are errors, positive values are used for special but normal events.
 */
var Z_OK            = 0;
var Z_STREAM_END    = 1;
//var Z_NEED_DICT     = 2;
//var Z_ERRNO         = -1;
var Z_STREAM_ERROR  = -2;
var Z_DATA_ERROR    = -3;
//var Z_MEM_ERROR     = -4;
var Z_BUF_ERROR     = -5;
//var Z_VERSION_ERROR = -6;


/* compression levels */
//var Z_NO_COMPRESSION      = 0;
//var Z_BEST_SPEED          = 1;
//var Z_BEST_COMPRESSION    = 9;
var Z_DEFAULT_COMPRESSION = -1;


var Z_FILTERED            = 1;
var Z_HUFFMAN_ONLY        = 2;
var Z_RLE                 = 3;
var Z_FIXED               = 4;
var Z_DEFAULT_STRATEGY    = 0;

/* Possible values of the data_type field (though see inflate()) */
//var Z_BINARY              = 0;
//var Z_TEXT                = 1;
//var Z_ASCII               = 1; // = Z_TEXT
var Z_UNKNOWN             = 2;


/* The deflate compression method */
var Z_DEFLATED  = 8;

/*============================================================================*/


var MAX_MEM_LEVEL = 9;
/* Maximum value for memLevel in deflateInit2 */
var MAX_WBITS = 15;
/* 32K LZ77 window */
var DEF_MEM_LEVEL = 8;


var LENGTH_CODES  = 29;
/* number of length codes, not counting the special END_BLOCK code */
var LITERALS      = 256;
/* number of literal bytes 0..255 */
var L_CODES       = LITERALS + 1 + LENGTH_CODES;
/* number of Literal or Length codes, including the END_BLOCK code */
var D_CODES       = 30;
/* number of distance codes */
var BL_CODES      = 19;
/* number of codes used to transfer the bit lengths */
var HEAP_SIZE     = 2*L_CODES + 1;
/* maximum heap size */
var MAX_BITS  = 15;
/* All codes must not exceed MAX_BITS bits */

var MIN_MATCH = 3;
var MAX_MATCH = 258;
var MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);

var PRESET_DICT = 0x20;

var INIT_STATE = 42;
var EXTRA_STATE = 69;
var NAME_STATE = 73;
var COMMENT_STATE = 91;
var HCRC_STATE = 103;
var BUSY_STATE = 113;
var FINISH_STATE = 666;

var BS_NEED_MORE      = 1; /* block not completed, need more input or more output */
var BS_BLOCK_DONE     = 2; /* block flush performed */
var BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */
var BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */

var OS_CODE = 0x03; // Unix :) . Don't detect, use this default.

function err(strm, errorCode) {
  strm.msg = msg[errorCode];
  return errorCode;
}

function rank(f) {
  return ((f) << 1) - ((f) > 4 ? 9 : 0);
}

function zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }


/* =========================================================================
 * Flush as much pending output as possible. All deflate() output goes
 * through this function so some applications may wish to modify it
 * to avoid allocating a large strm->output buffer and copying into it.
 * (See also read_buf()).
 */
function flush_pending(strm) {
  var s = strm.state;

  //_tr_flush_bits(s);
  var len = s.pending;
  if (len > strm.avail_out) {
    len = strm.avail_out;
  }
  if (len === 0) { return; }

  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);
  strm.next_out += len;
  s.pending_out += len;
  strm.total_out += len;
  strm.avail_out -= len;
  s.pending -= len;
  if (s.pending === 0) {
    s.pending_out = 0;
  }
}


function flush_block_only (s, last) {
  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);
  s.block_start = s.strstart;
  flush_pending(s.strm);
}


function put_byte(s, b) {
  s.pending_buf[s.pending++] = b;
}


/* =========================================================================
 * Put a short in the pending buffer. The 16-bit value is put in MSB order.
 * IN assertion: the stream state is correct and there is enough room in
 * pending_buf.
 */
function putShortMSB(s, b) {
//  put_byte(s, (Byte)(b >> 8));
//  put_byte(s, (Byte)(b & 0xff));
  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;
  s.pending_buf[s.pending++] = b & 0xff;
}


/* ===========================================================================
 * Read a new buffer from the current input stream, update the adler32
 * and total number of bytes read.  All deflate() input goes through
 * this function so some applications may wish to modify it to avoid
 * allocating a large strm->input buffer and copying from it.
 * (See also flush_pending()).
 */
function read_buf(strm, buf, start, size) {
  var len = strm.avail_in;

  if (len > size) { len = size; }
  if (len === 0) { return 0; }

  strm.avail_in -= len;

  utils.arraySet(buf, strm.input, strm.next_in, len, start);
  if (strm.state.wrap === 1) {
    strm.adler = adler32(strm.adler, buf, len, start);
  }

  else if (strm.state.wrap === 2) {
    strm.adler = crc32(strm.adler, buf, len, start);
  }

  strm.next_in += len;
  strm.total_in += len;

  return len;
}


/* ===========================================================================
 * Set match_start to the longest match starting at the given string and
 * return its length. Matches shorter or equal to prev_length are discarded,
 * in which case the result is equal to prev_length and match_start is
 * garbage.
 * IN assertions: cur_match is the head of the hash chain for the current
 *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1
 * OUT assertion: the match length is not greater than s->lookahead.
 */
function longest_match(s, cur_match) {
  var chain_length = s.max_chain_length;      /* max hash chain length */
  var scan = s.strstart; /* current string */
  var match;                       /* matched string */
  var len;                           /* length of current match */
  var best_len = s.prev_length;              /* best match length so far */
  var nice_match = s.nice_match;             /* stop if match long enough */
  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?
      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;

  var _win = s.window; // shortcut

  var wmask = s.w_mask;
  var prev  = s.prev;

  /* Stop when cur_match becomes <= limit. To simplify the code,
   * we prevent matches with the string of window index 0.
   */

  var strend = s.strstart + MAX_MATCH;
  var scan_end1  = _win[scan + best_len - 1];
  var scan_end   = _win[scan + best_len];

  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.
   * It is easy to get rid of this optimization if necessary.
   */
  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, "Code too clever");

  /* Do not waste too much time if we already have a good match: */
  if (s.prev_length >= s.good_match) {
    chain_length >>= 2;
  }
  /* Do not look for matches beyond the end of the input. This is necessary
   * to make deflate deterministic.
   */
  if (nice_match > s.lookahead) { nice_match = s.lookahead; }

  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, "need lookahead");

  do {
    // Assert(cur_match < s->strstart, "no future");
    match = cur_match;

    /* Skip to next match if the match length cannot increase
     * or if the match length is less than 2.  Note that the checks below
     * for insufficient lookahead only occur occasionally for performance
     * reasons.  Therefore uninitialized memory will be accessed, and
     * conditional jumps will be made that depend on those values.
     * However the length of the match is limited to the lookahead, so
     * the output of deflate is not affected by the uninitialized values.
     */

    if (_win[match + best_len]     !== scan_end  ||
        _win[match + best_len - 1] !== scan_end1 ||
        _win[match]                !== _win[scan] ||
        _win[++match]              !== _win[scan + 1]) {
      continue;
    }

    /* The check at best_len-1 can be removed because it will be made
     * again later. (This heuristic is not always a win.)
     * It is not necessary to compare scan[2] and match[2] since they
     * are always equal when the other bytes match, given that
     * the hash keys are equal and that HASH_BITS >= 8.
     */
    scan += 2;
    match++;
    // Assert(*scan == *match, "match[2]?");

    /* We check for insufficient lookahead only every 8th comparison;
     * the 256th check will be made at strstart+258.
     */
    do {
      /*jshint noempty:false*/
    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             scan < strend);

    // Assert(scan <= s->window+(unsigned)(s->window_size-1), "wild scan");

    len = MAX_MATCH - (strend - scan);
    scan = strend - MAX_MATCH;

    if (len > best_len) {
      s.match_start = cur_match;
      best_len = len;
      if (len >= nice_match) {
        break;
      }
      scan_end1  = _win[scan + best_len - 1];
      scan_end   = _win[scan + best_len];
    }
  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);

  if (best_len <= s.lookahead) {
    return best_len;
  }
  return s.lookahead;
}


/* ===========================================================================
 * Fill the window when the lookahead becomes insufficient.
 * Updates strstart and lookahead.
 *
 * IN assertion: lookahead < MIN_LOOKAHEAD
 * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD
 *    At least one byte has been read, or avail_in == 0; reads are
 *    performed for at least two bytes (required for the zip translate_eol
 *    option -- not supported here).
 */
function fill_window(s) {
  var _w_size = s.w_size;
  var p, n, m, more, str;

  //Assert(s->lookahead < MIN_LOOKAHEAD, "already enough lookahead");

  do {
    more = s.window_size - s.lookahead - s.strstart;

    // JS ints have 32 bit, block below not needed
    /* Deal with !@#$% 64K limit: */
    //if (sizeof(int) <= 2) {
    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {
    //        more = wsize;
    //
    //  } else if (more == (unsigned)(-1)) {
    //        /* Very unlikely, but possible on 16 bit machine if
    //         * strstart == 0 && lookahead == 1 (input done a byte at time)
    //         */
    //        more--;
    //    }
    //}


    /* If the window is almost full and there is insufficient lookahead,
     * move the upper half to the lower one to make room in the upper half.
     */
    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {

      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);
      s.match_start -= _w_size;
      s.strstart -= _w_size;
      /* we now have strstart >= MAX_DIST */
      s.block_start -= _w_size;

      /* Slide the hash table (could be avoided with 32 bit values
       at the expense of memory usage). We slide even when level == 0
       to keep the hash table consistent if we switch back to level > 0
       later. (Using level 0 permanently is not an optimal usage of
       zlib, so we don't care about this pathological case.)
       */

      n = s.hash_size;
      p = n;
      do {
        m = s.head[--p];
        s.head[p] = (m >= _w_size ? m - _w_size : 0);
      } while (--n);

      n = _w_size;
      p = n;
      do {
        m = s.prev[--p];
        s.prev[p] = (m >= _w_size ? m - _w_size : 0);
        /* If n is not on any hash chain, prev[n] is garbage but
         * its value will never be used.
         */
      } while (--n);

      more += _w_size;
    }
    if (s.strm.avail_in === 0) {
      break;
    }

    /* If there was no sliding:
     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&
     *    more == window_size - lookahead - strstart
     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)
     * => more >= window_size - 2*WSIZE + 2
     * In the BIG_MEM or MMAP case (not yet supported),
     *   window_size == input_size + MIN_LOOKAHEAD  &&
     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.
     * Otherwise, window_size == 2*WSIZE so more >= 2.
     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.
     */
    //Assert(more >= 2, "more < 2");
    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);
    s.lookahead += n;

    /* Initialize the hash value now that we have some input: */
    if (s.lookahead + s.insert >= MIN_MATCH) {
      str = s.strstart - s.insert;
      s.ins_h = s.window[str];

      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */
      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;
//#if MIN_MATCH != 3
//        Call update_hash() MIN_MATCH-3 more times
//#endif
      while (s.insert) {
        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */
        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH-1]) & s.hash_mask;

        s.prev[str & s.w_mask] = s.head[s.ins_h];
        s.head[s.ins_h] = str;
        str++;
        s.insert--;
        if (s.lookahead + s.insert < MIN_MATCH) {
          break;
        }
      }
    }
    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,
     * but this is not important since only literal bytes will be emitted.
     */

  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);

  /* If the WIN_INIT bytes after the end of the current data have never been
   * written, then zero those bytes in order to avoid memory check reports of
   * the use of uninitialized (or uninitialised as Julian writes) bytes by
   * the longest match routines.  Update the high water mark for the next
   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match
   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.
   */
//  if (s.high_water < s.window_size) {
//    var curr = s.strstart + s.lookahead;
//    var init = 0;
//
//    if (s.high_water < curr) {
//      /* Previous high water mark below current data -- zero WIN_INIT
//       * bytes or up to end of window, whichever is less.
//       */
//      init = s.window_size - curr;
//      if (init > WIN_INIT)
//        init = WIN_INIT;
//      zmemzero(s->window + curr, (unsigned)init);
//      s->high_water = curr + init;
//    }
//    else if (s->high_water < (ulg)curr + WIN_INIT) {
//      /* High water mark at or above current data, but below current data
//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up
//       * to end of window, whichever is less.
//       */
//      init = (ulg)curr + WIN_INIT - s->high_water;
//      if (init > s->window_size - s->high_water)
//        init = s->window_size - s->high_water;
//      zmemzero(s->window + s->high_water, (unsigned)init);
//      s->high_water += init;
//    }
//  }
//
//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,
//    "not enough room for search");
}

/* ===========================================================================
 * Copy without compression as much as possible from the input stream, return
 * the current block state.
 * This function does not insert new strings in the dictionary since
 * uncompressible data is probably not useful. This function is used
 * only for the level=0 compression option.
 * NOTE: this function should be optimized to avoid extra copying from
 * window to pending_buf.
 */
function deflate_stored(s, flush) {
  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited
   * to pending_buf_size, and each stored block has a 5 byte header:
   */
  var max_block_size = 0xffff;

  if (max_block_size > s.pending_buf_size - 5) {
    max_block_size = s.pending_buf_size - 5;
  }

  /* Copy as much as possible from input to output: */
  for (;;) {
    /* Fill the window as much as possible: */
    if (s.lookahead <= 1) {

      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||
      //  s->block_start >= (long)s->w_size, "slide too late");
//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||
//        s.block_start >= s.w_size)) {
//        throw  new Error("slide too late");
//      }

      fill_window(s);
      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }

      if (s.lookahead === 0) {
        break;
      }
      /* flush the current block */
    }
    //Assert(s->block_start >= 0L, "block gone");
//    if (s.block_start < 0) throw new Error("block gone");

    s.strstart += s.lookahead;
    s.lookahead = 0;

    /* Emit a stored block if pending_buf will be full: */
    var max_start = s.block_start + max_block_size;

    if (s.strstart === 0 || s.strstart >= max_start) {
      /* strstart == 0 is possible when wraparound on 16-bit machine */
      s.lookahead = s.strstart - max_start;
      s.strstart = max_start;
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/


    }
    /* Flush if we may have to slide, otherwise block_start may become
     * negative and the data will be gone:
     */
    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }

  s.insert = 0;

  if (flush === Z_FINISH) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }

  if (s.strstart > s.block_start) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }

  return BS_NEED_MORE;
}

/* ===========================================================================
 * Compress as much as possible from the input stream, return the current
 * block state.
 * This function does not perform lazy evaluation of matches and inserts
 * new strings in the dictionary only for unmatched strings or for short
 * matches. It is used only for the fast compression options.
 */
function deflate_fast(s, flush) {
  var hash_head;        /* head of the hash chain */
  var bflush;           /* set if current block must be flushed */

  for (;;) {
    /* Make sure that we always have enough lookahead, except
     * at the end of the input file. We need MAX_MATCH bytes
     * for the next match, plus MIN_MATCH bytes to insert the
     * string following the next match.
     */
    if (s.lookahead < MIN_LOOKAHEAD) {
      fill_window(s);
      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) {
        break; /* flush the current block */
      }
    }

    /* Insert the string window[strstart .. strstart+2] in the
     * dictionary, and set hash_head to the head of the hash chain:
     */
    hash_head = 0/*NIL*/;
    if (s.lookahead >= MIN_MATCH) {
      /*** INSERT_STRING(s, s.strstart, hash_head); ***/
      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;
      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
      s.head[s.ins_h] = s.strstart;
      /***/
    }

    /* Find the longest match, discarding those <= prev_length.
     * At this point we have always match_length < MIN_MATCH
     */
    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {
      /* To simplify the code, we prevent matches with the string
       * of window index 0 (in particular we have to avoid a match
       * of the string with itself at the start of the input file).
       */
      s.match_length = longest_match(s, hash_head);
      /* longest_match() sets match_start */
    }
    if (s.match_length >= MIN_MATCH) {
      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only

      /*** _tr_tally_dist(s, s.strstart - s.match_start,
                     s.match_length - MIN_MATCH, bflush); ***/
      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);

      s.lookahead -= s.match_length;

      /* Insert new strings in the hash table only if the match length
       * is not too large. This saves time but degrades compression.
       */
      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {
        s.match_length--; /* string at strstart already in table */
        do {
          s.strstart++;
          /*** INSERT_STRING(s, s.strstart, hash_head); ***/
          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;
          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
          s.head[s.ins_h] = s.strstart;
          /***/
          /* strstart never exceeds WSIZE-MAX_MATCH, so there are
           * always MIN_MATCH bytes ahead.
           */
        } while (--s.match_length !== 0);
        s.strstart++;
      } else
      {
        s.strstart += s.match_length;
        s.match_length = 0;
        s.ins_h = s.window[s.strstart];
        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */
        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;

//#if MIN_MATCH != 3
//                Call UPDATE_HASH() MIN_MATCH-3 more times
//#endif
        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not
         * matter since it will be recomputed at next deflate call.
         */
      }
    } else {
      /* No match, output a literal byte */
      //Tracevv((stderr,"%c", s.window[s.strstart]));
      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/
      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);

      s.lookahead--;
      s.strstart++;
    }
    if (bflush) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }
  s.insert = ((s.strstart < (MIN_MATCH-1)) ? s.strstart : MIN_MATCH-1);
  if (flush === Z_FINISH) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }
  return BS_BLOCK_DONE;
}

/* ===========================================================================
 * Same as above, but achieves better compression. We use a lazy
 * evaluation for matches: a match is finally adopted only if there is
 * no better match at the next window position.
 */
function deflate_slow(s, flush) {
  var hash_head;          /* head of hash chain */
  var bflush;              /* set if current block must be flushed */

  var max_insert;

  /* Process the input block. */
  for (;;) {
    /* Make sure that we always have enough lookahead, except
     * at the end of the input file. We need MAX_MATCH bytes
     * for the next match, plus MIN_MATCH bytes to insert the
     * string following the next match.
     */
    if (s.lookahead < MIN_LOOKAHEAD) {
      fill_window(s);
      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) { break; } /* flush the current block */
    }

    /* Insert the string window[strstart .. strstart+2] in the
     * dictionary, and set hash_head to the head of the hash chain:
     */
    hash_head = 0/*NIL*/;
    if (s.lookahead >= MIN_MATCH) {
      /*** INSERT_STRING(s, s.strstart, hash_head); ***/
      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;
      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
      s.head[s.ins_h] = s.strstart;
      /***/
    }

    /* Find the longest match, discarding those <= prev_length.
     */
    s.prev_length = s.match_length;
    s.prev_match = s.match_start;
    s.match_length = MIN_MATCH-1;

    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&
        s.strstart - hash_head <= (s.w_size-MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {
      /* To simplify the code, we prevent matches with the string
       * of window index 0 (in particular we have to avoid a match
       * of the string with itself at the start of the input file).
       */
      s.match_length = longest_match(s, hash_head);
      /* longest_match() sets match_start */

      if (s.match_length <= 5 &&
         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {

        /* If prev_match is also MIN_MATCH, match_start is garbage
         * but we will ignore the current match anyway.
         */
        s.match_length = MIN_MATCH-1;
      }
    }
    /* If there was a match at the previous step and the current
     * match is not better, output the previous match:
     */
    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {
      max_insert = s.strstart + s.lookahead - MIN_MATCH;
      /* Do not insert strings in hash table beyond this. */

      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);

      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,
                     s.prev_length - MIN_MATCH, bflush);***/
      bflush = trees._tr_tally(s, s.strstart - 1- s.prev_match, s.prev_length - MIN_MATCH);
      /* Insert in hash table all strings up to the end of the match.
       * strstart-1 and strstart are already inserted. If there is not
       * enough lookahead, the last two strings are not inserted in
       * the hash table.
       */
      s.lookahead -= s.prev_length-1;
      s.prev_length -= 2;
      do {
        if (++s.strstart <= max_insert) {
          /*** INSERT_STRING(s, s.strstart, hash_head); ***/
          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;
          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
          s.head[s.ins_h] = s.strstart;
          /***/
        }
      } while (--s.prev_length !== 0);
      s.match_available = 0;
      s.match_length = MIN_MATCH-1;
      s.strstart++;

      if (bflush) {
        /*** FLUSH_BLOCK(s, 0); ***/
        flush_block_only(s, false);
        if (s.strm.avail_out === 0) {
          return BS_NEED_MORE;
        }
        /***/
      }

    } else if (s.match_available) {
      /* If there was no match at the previous position, output a
       * single literal. If there was a match but the current match
       * is longer, truncate the previous match to a single literal.
       */
      //Tracevv((stderr,"%c", s->window[s->strstart-1]));
      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/
      bflush = trees._tr_tally(s, 0, s.window[s.strstart-1]);

      if (bflush) {
        /*** FLUSH_BLOCK_ONLY(s, 0) ***/
        flush_block_only(s, false);
        /***/
      }
      s.strstart++;
      s.lookahead--;
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    } else {
      /* There is no previous match to compare with, wait for
       * the next step to decide.
       */
      s.match_available = 1;
      s.strstart++;
      s.lookahead--;
    }
  }
  //Assert (flush != Z_NO_FLUSH, "no flush?");
  if (s.match_available) {
    //Tracevv((stderr,"%c", s->window[s->strstart-1]));
    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/
    bflush = trees._tr_tally(s, 0, s.window[s.strstart-1]);

    s.match_available = 0;
  }
  s.insert = s.strstart < MIN_MATCH-1 ? s.strstart : MIN_MATCH-1;
  if (flush === Z_FINISH) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }

  return BS_BLOCK_DONE;
}


/* ===========================================================================
 * For Z_RLE, simply look for runs of bytes, generate matches only of distance
 * one.  Do not maintain a hash table.  (It will be regenerated if this run of
 * deflate switches away from Z_RLE.)
 */
function deflate_rle(s, flush) {
  var bflush;            /* set if current block must be flushed */
  var prev;              /* byte at distance one to match */
  var scan, strend;      /* scan goes up to strend for length of run */

  var _win = s.window;

  for (;;) {
    /* Make sure that we always have enough lookahead, except
     * at the end of the input file. We need MAX_MATCH bytes
     * for the longest run, plus one for the unrolled loop.
     */
    if (s.lookahead <= MAX_MATCH) {
      fill_window(s);
      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) { break; } /* flush the current block */
    }

    /* See how many times the previous byte repeats */
    s.match_length = 0;
    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {
      scan = s.strstart - 1;
      prev = _win[scan];
      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {
        strend = s.strstart + MAX_MATCH;
        do {
          /*jshint noempty:false*/
        } while (prev === _win[++scan] && prev === _win[++scan] &&
                 prev === _win[++scan] && prev === _win[++scan] &&
                 prev === _win[++scan] && prev === _win[++scan] &&
                 prev === _win[++scan] && prev === _win[++scan] &&
                 scan < strend);
        s.match_length = MAX_MATCH - (strend - scan);
        if (s.match_length > s.lookahead) {
          s.match_length = s.lookahead;
        }
      }
      //Assert(scan <= s->window+(uInt)(s->window_size-1), "wild scan");
    }

    /* Emit match if have run of MIN_MATCH or longer, else emit literal */
    if (s.match_length >= MIN_MATCH) {
      //check_match(s, s.strstart, s.strstart - 1, s.match_length);

      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/
      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);

      s.lookahead -= s.match_length;
      s.strstart += s.match_length;
      s.match_length = 0;
    } else {
      /* No match, output a literal byte */
      //Tracevv((stderr,"%c", s->window[s->strstart]));
      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/
      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);

      s.lookahead--;
      s.strstart++;
    }
    if (bflush) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }
  return BS_BLOCK_DONE;
}

/* ===========================================================================
 * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.
 * (It will be regenerated if this run of deflate switches away from Huffman.)
 */
function deflate_huff(s, flush) {
  var bflush;             /* set if current block must be flushed */

  for (;;) {
    /* Make sure that we have a literal to write. */
    if (s.lookahead === 0) {
      fill_window(s);
      if (s.lookahead === 0) {
        if (flush === Z_NO_FLUSH) {
          return BS_NEED_MORE;
        }
        break;      /* flush the current block */
      }
    }

    /* Output a literal byte */
    s.match_length = 0;
    //Tracevv((stderr,"%c", s->window[s->strstart]));
    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/
    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);
    s.lookahead--;
    s.strstart++;
    if (bflush) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }
  return BS_BLOCK_DONE;
}

/* Values for max_lazy_match, good_match and max_chain_length, depending on
 * the desired pack level (0..9). The values given below have been tuned to
 * exclude worst case performance for pathological files. Better values may be
 * found for specific files.
 */
var Config = function (good_length, max_lazy, nice_length, max_chain, func) {
  this.good_length = good_length;
  this.max_lazy = max_lazy;
  this.nice_length = nice_length;
  this.max_chain = max_chain;
  this.func = func;
};

var configuration_table;

configuration_table = [
  /*      good lazy nice chain */
  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */
  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */
  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */
  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */

  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */
  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */
  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */
  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */
  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */
  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */
];


/* ===========================================================================
 * Initialize the "longest match" routines for a new zlib stream
 */
function lm_init(s) {
  s.window_size = 2 * s.w_size;

  /*** CLEAR_HASH(s); ***/
  zero(s.head); // Fill with NIL (= 0);

  /* Set the default configuration parameters:
   */
  s.max_lazy_match = configuration_table[s.level].max_lazy;
  s.good_match = configuration_table[s.level].good_length;
  s.nice_match = configuration_table[s.level].nice_length;
  s.max_chain_length = configuration_table[s.level].max_chain;

  s.strstart = 0;
  s.block_start = 0;
  s.lookahead = 0;
  s.insert = 0;
  s.match_length = s.prev_length = MIN_MATCH - 1;
  s.match_available = 0;
  s.ins_h = 0;
}


function DeflateState() {
  this.strm = null;            /* pointer back to this zlib stream */
  this.status = 0;            /* as the name implies */
  this.pending_buf = null;      /* output still pending */
  this.pending_buf_size = 0;  /* size of pending_buf */
  this.pending_out = 0;       /* next pending byte to output to the stream */
  this.pending = 0;           /* nb of bytes in the pending buffer */
  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */
  this.gzhead = null;         /* gzip header information to write */
  this.gzindex = 0;           /* where in extra, name, or comment */
  this.method = Z_DEFLATED; /* can only be DEFLATED */
  this.last_flush = -1;   /* value of flush param for previous deflate call */

  this.w_size = 0;  /* LZ77 window size (32K by default) */
  this.w_bits = 0;  /* log2(w_size)  (8..16) */
  this.w_mask = 0;  /* w_size - 1 */

  this.window = null;
  /* Sliding window. Input bytes are read into the second half of the window,
   * and move to the first half later to keep a dictionary of at least wSize
   * bytes. With this organization, matches are limited to a distance of
   * wSize-MAX_MATCH bytes, but this ensures that IO is always
   * performed with a length multiple of the block size.
   */

  this.window_size = 0;
  /* Actual size of window: 2*wSize, except when the user input buffer
   * is directly used as sliding window.
   */

  this.prev = null;
  /* Link to older string with same hash index. To limit the size of this
   * array to 64K, this link is maintained only for the last 32K strings.
   * An index in this array is thus a window index modulo 32K.
   */

  this.head = null;   /* Heads of the hash chains or NIL. */

  this.ins_h = 0;       /* hash index of string to be inserted */
  this.hash_size = 0;   /* number of elements in hash table */
  this.hash_bits = 0;   /* log2(hash_size) */
  this.hash_mask = 0;   /* hash_size-1 */

  this.hash_shift = 0;
  /* Number of bits by which ins_h must be shifted at each input
   * step. It must be such that after MIN_MATCH steps, the oldest
   * byte no longer takes part in the hash key, that is:
   *   hash_shift * MIN_MATCH >= hash_bits
   */

  this.block_start = 0;
  /* Window position at the beginning of the current output block. Gets
   * negative when the window is moved backwards.
   */

  this.match_length = 0;      /* length of best match */
  this.prev_match = 0;        /* previous match */
  this.match_available = 0;   /* set if previous match exists */
  this.strstart = 0;          /* start of string to insert */
  this.match_start = 0;       /* start of matching string */
  this.lookahead = 0;         /* number of valid bytes ahead in window */

  this.prev_length = 0;
  /* Length of the best match at previous step. Matches not greater than this
   * are discarded. This is used in the lazy match evaluation.
   */

  this.max_chain_length = 0;
  /* To speed up deflation, hash chains are never searched beyond this
   * length.  A higher limit improves compression ratio but degrades the
   * speed.
   */

  this.max_lazy_match = 0;
  /* Attempt to find a better match only when the current match is strictly
   * smaller than this value. This mechanism is used only for compression
   * levels >= 4.
   */
  // That's alias to max_lazy_match, don't use directly
  //this.max_insert_length = 0;
  /* Insert new strings in the hash table only if the match length is not
   * greater than this length. This saves time but degrades compression.
   * max_insert_length is used only for compression levels <= 3.
   */

  this.level = 0;     /* compression level (1..9) */
  this.strategy = 0;  /* favor or force Huffman coding*/

  this.good_match = 0;
  /* Use a faster search when the previous match is longer than this */

  this.nice_match = 0; /* Stop searching when current match exceeds this */

              /* used by trees.c: */

  /* Didn't use ct_data typedef below to suppress compiler warning */

  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */
  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */
  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */

  // Use flat array of DOUBLE size, with interleaved fata,
  // because JS does not support effective
  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);
  this.dyn_dtree  = new utils.Buf16((2*D_CODES+1) * 2);
  this.bl_tree    = new utils.Buf16((2*BL_CODES+1) * 2);
  zero(this.dyn_ltree);
  zero(this.dyn_dtree);
  zero(this.bl_tree);

  this.l_desc   = null;         /* desc. for literal tree */
  this.d_desc   = null;         /* desc. for distance tree */
  this.bl_desc  = null;         /* desc. for bit length tree */

  //ush bl_count[MAX_BITS+1];
  this.bl_count = new utils.Buf16(MAX_BITS+1);
  /* number of codes at each bit length for an optimal tree */

  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */
  this.heap = new utils.Buf16(2*L_CODES+1);  /* heap used to build the Huffman trees */
  zero(this.heap);

  this.heap_len = 0;               /* number of elements in the heap */
  this.heap_max = 0;               /* element of largest frequency */
  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.
   * The same heap array is used to build all trees.
   */

  this.depth = new utils.Buf16(2*L_CODES+1); //uch depth[2*L_CODES+1];
  zero(this.depth);
  /* Depth of each subtree used as tie breaker for trees of equal frequency
   */

  this.l_buf = 0;          /* buffer index for literals or lengths */

  this.lit_bufsize = 0;
  /* Size of match buffer for literals/lengths.  There are 4 reasons for
   * limiting lit_bufsize to 64K:
   *   - frequencies can be kept in 16 bit counters
   *   - if compression is not successful for the first block, all input
   *     data is still in the window so we can still emit a stored block even
   *     when input comes from standard input.  (This can also be done for
   *     all blocks if lit_bufsize is not greater than 32K.)
   *   - if compression is not successful for a file smaller than 64K, we can
   *     even emit a stored file instead of a stored block (saving 5 bytes).
   *     This is applicable only for zip (not gzip or zlib).
   *   - creating new Huffman trees less frequently may not provide fast
   *     adaptation to changes in the input data statistics. (Take for
   *     example a binary file with poorly compressible code followed by
   *     a highly compressible string table.) Smaller buffer sizes give
   *     fast adaptation but have of course the overhead of transmitting
   *     trees more frequently.
   *   - I can't count above 4
   */

  this.last_lit = 0;      /* running index in l_buf */

  this.d_buf = 0;
  /* Buffer index for distances. To simplify the code, d_buf and l_buf have
   * the same number of elements. To use different lengths, an extra flag
   * array would be necessary.
   */

  this.opt_len = 0;       /* bit length of current block with optimal trees */
  this.static_len = 0;    /* bit length of current block with static trees */
  this.matches = 0;       /* number of string matches in current block */
  this.insert = 0;        /* bytes at end of window left to insert */


  this.bi_buf = 0;
  /* Output buffer. bits are inserted starting at the bottom (least
   * significant bits).
   */
  this.bi_valid = 0;
  /* Number of valid bits in bi_buf.  All bits above the last valid bit
   * are always zero.
   */

  // Used for window memory init. We safely ignore it for JS. That makes
  // sense only for pointers and memory check tools.
  //this.high_water = 0;
  /* High water mark offset in window for initialized bytes -- bytes above
   * this are set to zero in order to avoid memory check warnings when
   * longest match routines access bytes past the input.  This is then
   * updated to the new high water mark.
   */
}


function deflateResetKeep(strm) {
  var s;

  if (!strm || !strm.state) {
    return err(strm, Z_STREAM_ERROR);
  }

  strm.total_in = strm.total_out = 0;
  strm.data_type = Z_UNKNOWN;

  s = strm.state;
  s.pending = 0;
  s.pending_out = 0;

  if (s.wrap < 0) {
    s.wrap = -s.wrap;
    /* was made negative by deflate(..., Z_FINISH); */
  }
  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);
  strm.adler = (s.wrap === 2) ?
    0  // crc32(0, Z_NULL, 0)
  :
    1; // adler32(0, Z_NULL, 0)
  s.last_flush = Z_NO_FLUSH;
  trees._tr_init(s);
  return Z_OK;
}


function deflateReset(strm) {
  var ret = deflateResetKeep(strm);
  if (ret === Z_OK) {
    lm_init(strm.state);
  }
  return ret;
}


function deflateSetHeader(strm, head) {
  if (!strm || !strm.state) { return Z_STREAM_ERROR; }
  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }
  strm.state.gzhead = head;
  return Z_OK;
}


function deflateInit2(strm, level, method, windowBits, memLevel, strategy) {
  if (!strm) { // === Z_NULL
    return Z_STREAM_ERROR;
  }
  var wrap = 1;

  if (level === Z_DEFAULT_COMPRESSION) {
    level = 6;
  }

  if (windowBits < 0) { /* suppress zlib wrapper */
    wrap = 0;
    windowBits = -windowBits;
  }

  else if (windowBits > 15) {
    wrap = 2;           /* write gzip wrapper instead */
    windowBits -= 16;
  }


  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||
    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||
    strategy < 0 || strategy > Z_FIXED) {
    return err(strm, Z_STREAM_ERROR);
  }


  if (windowBits === 8) {
    windowBits = 9;
  }
  /* until 256-byte window bug fixed */

  var s = new DeflateState();

  strm.state = s;
  s.strm = strm;

  s.wrap = wrap;
  s.gzhead = null;
  s.w_bits = windowBits;
  s.w_size = 1 << s.w_bits;
  s.w_mask = s.w_size - 1;

  s.hash_bits = memLevel + 7;
  s.hash_size = 1 << s.hash_bits;
  s.hash_mask = s.hash_size - 1;
  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);

  s.window = new utils.Buf8(s.w_size * 2);
  s.head = new utils.Buf16(s.hash_size);
  s.prev = new utils.Buf16(s.w_size);

  // Don't need mem init magic for JS.
  //s.high_water = 0;  /* nothing written to s->window yet */

  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */

  s.pending_buf_size = s.lit_bufsize * 4;
  s.pending_buf = new utils.Buf8(s.pending_buf_size);

  s.d_buf = s.lit_bufsize >> 1;
  s.l_buf = (1 + 2) * s.lit_bufsize;

  s.level = level;
  s.strategy = strategy;
  s.method = method;

  return deflateReset(strm);
}

function deflateInit(strm, level) {
  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);
}


function deflate(strm, flush) {
  var old_flush, s;
  var beg, val; // for gzip header write only

  if (!strm || !strm.state ||
    flush > Z_BLOCK || flush < 0) {
    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;
  }

  s = strm.state;

  if (!strm.output ||
      (!strm.input && strm.avail_in !== 0) ||
      (s.status === FINISH_STATE && flush !== Z_FINISH)) {
    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);
  }

  s.strm = strm; /* just in case */
  old_flush = s.last_flush;
  s.last_flush = flush;

  /* Write the header */
  if (s.status === INIT_STATE) {

    if (s.wrap === 2) { // GZIP header
      strm.adler = 0;  //crc32(0L, Z_NULL, 0);
      put_byte(s, 31);
      put_byte(s, 139);
      put_byte(s, 8);
      if (!s.gzhead) { // s->gzhead == Z_NULL
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, s.level === 9 ? 2 :
                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?
                     4 : 0));
        put_byte(s, OS_CODE);
        s.status = BUSY_STATE;
      }
      else {
        put_byte(s, (s.gzhead.text ? 1 : 0) +
                    (s.gzhead.hcrc ? 2 : 0) +
                    (!s.gzhead.extra ? 0 : 4) +
                    (!s.gzhead.name ? 0 : 8) +
                    (!s.gzhead.comment ? 0 : 16)
                );
        put_byte(s, s.gzhead.time & 0xff);
        put_byte(s, (s.gzhead.time >> 8) & 0xff);
        put_byte(s, (s.gzhead.time >> 16) & 0xff);
        put_byte(s, (s.gzhead.time >> 24) & 0xff);
        put_byte(s, s.level === 9 ? 2 :
                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?
                     4 : 0));
        put_byte(s, s.gzhead.os & 0xff);
        if (s.gzhead.extra && s.gzhead.extra.length) {
          put_byte(s, s.gzhead.extra.length & 0xff);
          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);
        }
        if (s.gzhead.hcrc) {
          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);
        }
        s.gzindex = 0;
        s.status = EXTRA_STATE;
      }
    }
    else // DEFLATE header
    {
      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;
      var level_flags = -1;

      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {
        level_flags = 0;
      } else if (s.level < 6) {
        level_flags = 1;
      } else if (s.level === 6) {
        level_flags = 2;
      } else {
        level_flags = 3;
      }
      header |= (level_flags << 6);
      if (s.strstart !== 0) { header |= PRESET_DICT; }
      header += 31 - (header % 31);

      s.status = BUSY_STATE;
      putShortMSB(s, header);

      /* Save the adler32 of the preset dictionary: */
      if (s.strstart !== 0) {
        putShortMSB(s, strm.adler >>> 16);
        putShortMSB(s, strm.adler & 0xffff);
      }
      strm.adler = 1; // adler32(0L, Z_NULL, 0);
    }
  }

//#ifdef GZIP
  if (s.status === EXTRA_STATE) {
    if (s.gzhead.extra/* != Z_NULL*/) {
      beg = s.pending;  /* start of bytes to update crc */

      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {
        if (s.pending === s.pending_buf_size) {
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          flush_pending(strm);
          beg = s.pending;
          if (s.pending === s.pending_buf_size) {
            break;
          }
        }
        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);
        s.gzindex++;
      }
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      if (s.gzindex === s.gzhead.extra.length) {
        s.gzindex = 0;
        s.status = NAME_STATE;
      }
    }
    else {
      s.status = NAME_STATE;
    }
  }
  if (s.status === NAME_STATE) {
    if (s.gzhead.name/* != Z_NULL*/) {
      beg = s.pending;  /* start of bytes to update crc */
      //int val;

      do {
        if (s.pending === s.pending_buf_size) {
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          flush_pending(strm);
          beg = s.pending;
          if (s.pending === s.pending_buf_size) {
            val = 1;
            break;
          }
        }
        // JS specific: little magic to add zero terminator to end of string
        if (s.gzindex < s.gzhead.name.length) {
          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;
        } else {
          val = 0;
        }
        put_byte(s, val);
      } while (val !== 0);

      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      if (val === 0) {
        s.gzindex = 0;
        s.status = COMMENT_STATE;
      }
    }
    else {
      s.status = COMMENT_STATE;
    }
  }
  if (s.status === COMMENT_STATE) {
    if (s.gzhead.comment/* != Z_NULL*/) {
      beg = s.pending;  /* start of bytes to update crc */
      //int val;

      do {
        if (s.pending === s.pending_buf_size) {
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          flush_pending(strm);
          beg = s.pending;
          if (s.pending === s.pending_buf_size) {
            val = 1;
            break;
          }
        }
        // JS specific: little magic to add zero terminator to end of string
        if (s.gzindex < s.gzhead.comment.length) {
          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;
        } else {
          val = 0;
        }
        put_byte(s, val);
      } while (val !== 0);

      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      if (val === 0) {
        s.status = HCRC_STATE;
      }
    }
    else {
      s.status = HCRC_STATE;
    }
  }
  if (s.status === HCRC_STATE) {
    if (s.gzhead.hcrc) {
      if (s.pending + 2 > s.pending_buf_size) {
        flush_pending(strm);
      }
      if (s.pending + 2 <= s.pending_buf_size) {
        put_byte(s, strm.adler & 0xff);
        put_byte(s, (strm.adler >> 8) & 0xff);
        strm.adler = 0; //crc32(0L, Z_NULL, 0);
        s.status = BUSY_STATE;
      }
    }
    else {
      s.status = BUSY_STATE;
    }
  }
//#endif

  /* Flush as much pending output as possible */
  if (s.pending !== 0) {
    flush_pending(strm);
    if (strm.avail_out === 0) {
      /* Since avail_out is 0, deflate will be called again with
       * more output space, but possibly with both pending and
       * avail_in equal to zero. There won't be anything to do,
       * but this is not an error situation so make sure we
       * return OK instead of BUF_ERROR at next call of deflate:
       */
      s.last_flush = -1;
      return Z_OK;
    }

    /* Make sure there is something to do and avoid duplicate consecutive
     * flushes. For repeated and useless calls with Z_FINISH, we keep
     * returning Z_STREAM_END instead of Z_BUF_ERROR.
     */
  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&
    flush !== Z_FINISH) {
    return err(strm, Z_BUF_ERROR);
  }

  /* User must not provide more input after the first FINISH: */
  if (s.status === FINISH_STATE && strm.avail_in !== 0) {
    return err(strm, Z_BUF_ERROR);
  }

  /* Start a new block or continue the current one.
   */
  if (strm.avail_in !== 0 || s.lookahead !== 0 ||
    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {
    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :
      (s.strategy === Z_RLE ? deflate_rle(s, flush) :
        configuration_table[s.level].func(s, flush));

    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {
      s.status = FINISH_STATE;
    }
    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {
      if (strm.avail_out === 0) {
        s.last_flush = -1;
        /* avoid BUF_ERROR next call, see above */
      }
      return Z_OK;
      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call
       * of deflate should use the same flush parameter to make sure
       * that the flush is complete. So we don't have to output an
       * empty block here, this will be done at next call. This also
       * ensures that for a very small output buffer, we emit at most
       * one empty block.
       */
    }
    if (bstate === BS_BLOCK_DONE) {
      if (flush === Z_PARTIAL_FLUSH) {
        trees._tr_align(s);
      }
      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */

        trees._tr_stored_block(s, 0, 0, false);
        /* For a full flush, this empty block will be recognized
         * as a special marker by inflate_sync().
         */
        if (flush === Z_FULL_FLUSH) {
          /*** CLEAR_HASH(s); ***/             /* forget history */
          zero(s.head); // Fill with NIL (= 0);

          if (s.lookahead === 0) {
            s.strstart = 0;
            s.block_start = 0;
            s.insert = 0;
          }
        }
      }
      flush_pending(strm);
      if (strm.avail_out === 0) {
        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */
        return Z_OK;
      }
    }
  }
  //Assert(strm->avail_out > 0, "bug2");
  //if (strm.avail_out <= 0) { throw new Error("bug2");}

  if (flush !== Z_FINISH) { return Z_OK; }
  if (s.wrap <= 0) { return Z_STREAM_END; }

  /* Write the trailer */
  if (s.wrap === 2) {
    put_byte(s, strm.adler & 0xff);
    put_byte(s, (strm.adler >> 8) & 0xff);
    put_byte(s, (strm.adler >> 16) & 0xff);
    put_byte(s, (strm.adler >> 24) & 0xff);
    put_byte(s, strm.total_in & 0xff);
    put_byte(s, (strm.total_in >> 8) & 0xff);
    put_byte(s, (strm.total_in >> 16) & 0xff);
    put_byte(s, (strm.total_in >> 24) & 0xff);
  }
  else
  {
    putShortMSB(s, strm.adler >>> 16);
    putShortMSB(s, strm.adler & 0xffff);
  }

  flush_pending(strm);
  /* If avail_out is zero, the application will call deflate again
   * to flush the rest.
   */
  if (s.wrap > 0) { s.wrap = -s.wrap; }
  /* write the trailer only once! */
  return s.pending !== 0 ? Z_OK : Z_STREAM_END;
}

function deflateEnd(strm) {
  var status;

  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {
    return Z_STREAM_ERROR;
  }

  status = strm.state.status;
  if (status !== INIT_STATE &&
    status !== EXTRA_STATE &&
    status !== NAME_STATE &&
    status !== COMMENT_STATE &&
    status !== HCRC_STATE &&
    status !== BUSY_STATE &&
    status !== FINISH_STATE
  ) {
    return err(strm, Z_STREAM_ERROR);
  }

  strm.state = null;

  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;
}

/* =========================================================================
 * Copy the source state to the destination state
 */
//function deflateCopy(dest, source) {
//
//}

exports.deflateInit = deflateInit;
exports.deflateInit2 = deflateInit2;
exports.deflateReset = deflateReset;
exports.deflateResetKeep = deflateResetKeep;
exports.deflateSetHeader = deflateSetHeader;
exports.deflate = deflate;
exports.deflateEnd = deflateEnd;
exports.deflateInfo = 'pako deflate (from Nodeca project)';

/* Not implemented
exports.deflateBound = deflateBound;
exports.deflateCopy = deflateCopy;
exports.deflateSetDictionary = deflateSetDictionary;
exports.deflateParams = deflateParams;
exports.deflatePending = deflatePending;
exports.deflatePrime = deflatePrime;
exports.deflateTune = deflateTune;
*/

},{"../utils/common":38,"./adler32":40,"./crc32":42,"./messages":48,"./trees":49}],44:[function(require,module,exports){
'use strict';


function GZheader() {
  /* true if compressed data believed to be text */
  this.text       = 0;
  /* modification time */
  this.time       = 0;
  /* extra flags (not used when writing a gzip file) */
  this.xflags     = 0;
  /* operating system */
  this.os         = 0;
  /* pointer to extra field or Z_NULL if none */
  this.extra      = null;
  /* extra field length (valid if extra != Z_NULL) */
  this.extra_len  = 0; // Actually, we don't need it in JS,
                       // but leave for few code modifications

  //
  // Setup limits is not necessary because in js we should not preallocate memory
  // for inflate use constant limit in 65536 bytes
  //

  /* space at extra (only when reading header) */
  // this.extra_max  = 0;
  /* pointer to zero-terminated file name or Z_NULL */
  this.name       = '';
  /* space at name (only when reading header) */
  // this.name_max   = 0;
  /* pointer to zero-terminated comment or Z_NULL */
  this.comment    = '';
  /* space at comment (only when reading header) */
  // this.comm_max   = 0;
  /* true if there was or will be a header crc */
  this.hcrc       = 0;
  /* true when done reading gzip header (not used when writing a gzip file) */
  this.done       = false;
}

module.exports = GZheader;

},{}],45:[function(require,module,exports){
'use strict';

// See state defs from inflate.js
var BAD = 30;       /* got a data error -- remain here until reset */
var TYPE = 12;      /* i: waiting for type bits, including last-flag bit */

/*
   Decode literal, length, and distance codes and write out the resulting
   literal and match bytes until either not enough input or output is
   available, an end-of-block is encountered, or a data error is encountered.
   When large enough input and output buffers are supplied to inflate(), for
   example, a 16K input buffer and a 64K output buffer, more than 95% of the
   inflate execution time is spent in this routine.

   Entry assumptions:

        state.mode === LEN
        strm.avail_in >= 6
        strm.avail_out >= 258
        start >= strm.avail_out
        state.bits < 8

   On return, state.mode is one of:

        LEN -- ran out of enough output space or enough available input
        TYPE -- reached end of block code, inflate() to interpret next block
        BAD -- error in block data

   Notes:

    - The maximum input bits used by a length/distance pair is 15 bits for the
      length code, 5 bits for the length extra, 15 bits for the distance code,
      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.
      Therefore if strm.avail_in >= 6, then there is enough input to avoid
      checking for available input while decoding.

    - The maximum bytes that a single length/distance pair can output is 258
      bytes, which is the maximum length that can be coded.  inflate_fast()
      requires strm.avail_out >= 258 for each loop to avoid checking for
      output space.
 */
module.exports = function inflate_fast(strm, start) {
  var state;
  var _in;                    /* local strm.input */
  var last;                   /* have enough input while in < last */
  var _out;                   /* local strm.output */
  var beg;                    /* inflate()'s initial strm.output */
  var end;                    /* while out < end, enough space available */
//#ifdef INFLATE_STRICT
  var dmax;                   /* maximum distance from zlib header */
//#endif
  var wsize;                  /* window size or zero if not using window */
  var whave;                  /* valid bytes in the window */
  var wnext;                  /* window write index */
  // Use `s_window` instead `window`, avoid conflict with instrumentation tools
  var s_window;               /* allocated sliding window, if wsize != 0 */
  var hold;                   /* local strm.hold */
  var bits;                   /* local strm.bits */
  var lcode;                  /* local strm.lencode */
  var dcode;                  /* local strm.distcode */
  var lmask;                  /* mask for first level of length codes */
  var dmask;                  /* mask for first level of distance codes */
  var here;                   /* retrieved table entry */
  var op;                     /* code bits, operation, extra bits, or */
                              /*  window position, window bytes to copy */
  var len;                    /* match length, unused bytes */
  var dist;                   /* match distance */
  var from;                   /* where to copy match from */
  var from_source;


  var input, output; // JS specific, because we have no pointers

  /* copy state to local variables */
  state = strm.state;
  //here = state.here;
  _in = strm.next_in;
  input = strm.input;
  last = _in + (strm.avail_in - 5);
  _out = strm.next_out;
  output = strm.output;
  beg = _out - (start - strm.avail_out);
  end = _out + (strm.avail_out - 257);
//#ifdef INFLATE_STRICT
  dmax = state.dmax;
//#endif
  wsize = state.wsize;
  whave = state.whave;
  wnext = state.wnext;
  s_window = state.window;
  hold = state.hold;
  bits = state.bits;
  lcode = state.lencode;
  dcode = state.distcode;
  lmask = (1 << state.lenbits) - 1;
  dmask = (1 << state.distbits) - 1;


  /* decode literals and length/distances until end-of-block or not enough
     input data or output space */

  top:
  do {
    if (bits < 15) {
      hold += input[_in++] << bits;
      bits += 8;
      hold += input[_in++] << bits;
      bits += 8;
    }

    here = lcode[hold & lmask];

    dolen:
    for (;;) { // Goto emulation
      op = here >>> 24/*here.bits*/;
      hold >>>= op;
      bits -= op;
      op = (here >>> 16) & 0xff/*here.op*/;
      if (op === 0) {                          /* literal */
        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?
        //        "inflate:         literal '%c'\n" :
        //        "inflate:         literal 0x%02x\n", here.val));
        output[_out++] = here & 0xffff/*here.val*/;
      }
      else if (op & 16) {                     /* length base */
        len = here & 0xffff/*here.val*/;
        op &= 15;                           /* number of extra bits */
        if (op) {
          if (bits < op) {
            hold += input[_in++] << bits;
            bits += 8;
          }
          len += hold & ((1 << op) - 1);
          hold >>>= op;
          bits -= op;
        }
        //Tracevv((stderr, "inflate:         length %u\n", len));
        if (bits < 15) {
          hold += input[_in++] << bits;
          bits += 8;
          hold += input[_in++] << bits;
          bits += 8;
        }
        here = dcode[hold & dmask];

        dodist:
        for (;;) { // goto emulation
          op = here >>> 24/*here.bits*/;
          hold >>>= op;
          bits -= op;
          op = (here >>> 16) & 0xff/*here.op*/;

          if (op & 16) {                      /* distance base */
            dist = here & 0xffff/*here.val*/;
            op &= 15;                       /* number of extra bits */
            if (bits < op) {
              hold += input[_in++] << bits;
              bits += 8;
              if (bits < op) {
                hold += input[_in++] << bits;
                bits += 8;
              }
            }
            dist += hold & ((1 << op) - 1);
//#ifdef INFLATE_STRICT
            if (dist > dmax) {
              strm.msg = 'invalid distance too far back';
              state.mode = BAD;
              break top;
            }
//#endif
            hold >>>= op;
            bits -= op;
            //Tracevv((stderr, "inflate:         distance %u\n", dist));
            op = _out - beg;                /* max distance in output */
            if (dist > op) {                /* see if copy from window */
              op = dist - op;               /* distance back in window */
              if (op > whave) {
                if (state.sane) {
                  strm.msg = 'invalid distance too far back';
                  state.mode = BAD;
                  break top;
                }

// (!) This block is disabled in zlib defailts,
// don't enable it for binary compatibility
//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR
//                if (len <= op - whave) {
//                  do {
//                    output[_out++] = 0;
//                  } while (--len);
//                  continue top;
//                }
//                len -= op - whave;
//                do {
//                  output[_out++] = 0;
//                } while (--op > whave);
//                if (op === 0) {
//                  from = _out - dist;
//                  do {
//                    output[_out++] = output[from++];
//                  } while (--len);
//                  continue top;
//                }
//#endif
              }
              from = 0; // window index
              from_source = s_window;
              if (wnext === 0) {           /* very common case */
                from += wsize - op;
                if (op < len) {         /* some from window */
                  len -= op;
                  do {
                    output[_out++] = s_window[from++];
                  } while (--op);
                  from = _out - dist;  /* rest from output */
                  from_source = output;
                }
              }
              else if (wnext < op) {      /* wrap around window */
                from += wsize + wnext - op;
                op -= wnext;
                if (op < len) {         /* some from end of window */
                  len -= op;
                  do {
                    output[_out++] = s_window[from++];
                  } while (--op);
                  from = 0;
                  if (wnext < len) {  /* some from start of window */
                    op = wnext;
                    len -= op;
                    do {
                      output[_out++] = s_window[from++];
                    } while (--op);
                    from = _out - dist;      /* rest from output */
                    from_source = output;
                  }
                }
              }
              else {                      /* contiguous in window */
                from += wnext - op;
                if (op < len) {         /* some from window */
                  len -= op;
                  do {
                    output[_out++] = s_window[from++];
                  } while (--op);
                  from = _out - dist;  /* rest from output */
                  from_source = output;
                }
              }
              while (len > 2) {
                output[_out++] = from_source[from++];
                output[_out++] = from_source[from++];
                output[_out++] = from_source[from++];
                len -= 3;
              }
              if (len) {
                output[_out++] = from_source[from++];
                if (len > 1) {
                  output[_out++] = from_source[from++];
                }
              }
            }
            else {
              from = _out - dist;          /* copy direct from output */
              do {                        /* minimum length is three */
                output[_out++] = output[from++];
                output[_out++] = output[from++];
                output[_out++] = output[from++];
                len -= 3;
              } while (len > 2);
              if (len) {
                output[_out++] = output[from++];
                if (len > 1) {
                  output[_out++] = output[from++];
                }
              }
            }
          }
          else if ((op & 64) === 0) {          /* 2nd level distance code */
            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];
            continue dodist;
          }
          else {
            strm.msg = 'invalid distance code';
            state.mode = BAD;
            break top;
          }

          break; // need to emulate goto via "continue"
        }
      }
      else if ((op & 64) === 0) {              /* 2nd level length code */
        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];
        continue dolen;
      }
      else if (op & 32) {                     /* end-of-block */
        //Tracevv((stderr, "inflate:         end of block\n"));
        state.mode = TYPE;
        break top;
      }
      else {
        strm.msg = 'invalid literal/length code';
        state.mode = BAD;
        break top;
      }

      break; // need to emulate goto via "continue"
    }
  } while (_in < last && _out < end);

  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */
  len = bits >> 3;
  _in -= len;
  bits -= len << 3;
  hold &= (1 << bits) - 1;

  /* update state and return */
  strm.next_in = _in;
  strm.next_out = _out;
  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));
  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));
  state.hold = hold;
  state.bits = bits;
  return;
};

},{}],46:[function(require,module,exports){
'use strict';


var utils = require('../utils/common');
var adler32 = require('./adler32');
var crc32   = require('./crc32');
var inflate_fast = require('./inffast');
var inflate_table = require('./inftrees');

var CODES = 0;
var LENS = 1;
var DISTS = 2;

/* Public constants ==========================================================*/
/* ===========================================================================*/


/* Allowed flush values; see deflate() and inflate() below for details */
//var Z_NO_FLUSH      = 0;
//var Z_PARTIAL_FLUSH = 1;
//var Z_SYNC_FLUSH    = 2;
//var Z_FULL_FLUSH    = 3;
var Z_FINISH        = 4;
var Z_BLOCK         = 5;
var Z_TREES         = 6;


/* Return codes for the compression/decompression functions. Negative values
 * are errors, positive values are used for special but normal events.
 */
var Z_OK            = 0;
var Z_STREAM_END    = 1;
var Z_NEED_DICT     = 2;
//var Z_ERRNO         = -1;
var Z_STREAM_ERROR  = -2;
var Z_DATA_ERROR    = -3;
var Z_MEM_ERROR     = -4;
var Z_BUF_ERROR     = -5;
//var Z_VERSION_ERROR = -6;

/* The deflate compression method */
var Z_DEFLATED  = 8;


/* STATES ====================================================================*/
/* ===========================================================================*/


var    HEAD = 1;       /* i: waiting for magic header */
var    FLAGS = 2;      /* i: waiting for method and flags (gzip) */
var    TIME = 3;       /* i: waiting for modification time (gzip) */
var    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */
var    EXLEN = 5;      /* i: waiting for extra length (gzip) */
var    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */
var    NAME = 7;       /* i: waiting for end of file name (gzip) */
var    COMMENT = 8;    /* i: waiting for end of comment (gzip) */
var    HCRC = 9;       /* i: waiting for header crc (gzip) */
var    DICTID = 10;    /* i: waiting for dictionary check value */
var    DICT = 11;      /* waiting for inflateSetDictionary() call */
var        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */
var        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */
var        STORED = 14;    /* i: waiting for stored size (length and complement) */
var        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */
var        COPY = 16;      /* i/o: waiting for input or output to copy stored block */
var        TABLE = 17;     /* i: waiting for dynamic block table lengths */
var        LENLENS = 18;   /* i: waiting for code length code lengths */
var        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */
var            LEN_ = 20;      /* i: same as LEN below, but only first time in */
var            LEN = 21;       /* i: waiting for length/lit/eob code */
var            LENEXT = 22;    /* i: waiting for length extra bits */
var            DIST = 23;      /* i: waiting for distance code */
var            DISTEXT = 24;   /* i: waiting for distance extra bits */
var            MATCH = 25;     /* o: waiting for output space to copy string */
var            LIT = 26;       /* o: waiting for output space to write literal */
var    CHECK = 27;     /* i: waiting for 32-bit check value */
var    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */
var    DONE = 29;      /* finished check, done -- remain here until reset */
var    BAD = 30;       /* got a data error -- remain here until reset */
var    MEM = 31;       /* got an inflate() memory error -- remain here until reset */
var    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */

/* ===========================================================================*/



var ENOUGH_LENS = 852;
var ENOUGH_DISTS = 592;
//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);

var MAX_WBITS = 15;
/* 32K LZ77 window */
var DEF_WBITS = MAX_WBITS;


function ZSWAP32(q) {
  return  (((q >>> 24) & 0xff) +
          ((q >>> 8) & 0xff00) +
          ((q & 0xff00) << 8) +
          ((q & 0xff) << 24));
}


function InflateState() {
  this.mode = 0;             /* current inflate mode */
  this.last = false;          /* true if processing last block */
  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */
  this.havedict = false;      /* true if dictionary provided */
  this.flags = 0;             /* gzip header method and flags (0 if zlib) */
  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */
  this.check = 0;             /* protected copy of check value */
  this.total = 0;             /* protected copy of output count */
  // TODO: may be {}
  this.head = null;           /* where to save gzip header information */

  /* sliding window */
  this.wbits = 0;             /* log base 2 of requested window size */
  this.wsize = 0;             /* window size or zero if not using window */
  this.whave = 0;             /* valid bytes in the window */
  this.wnext = 0;             /* window write index */
  this.window = null;         /* allocated sliding window, if needed */

  /* bit accumulator */
  this.hold = 0;              /* input bit accumulator */
  this.bits = 0;              /* number of bits in "in" */

  /* for string and stored block copying */
  this.length = 0;            /* literal or length of data to copy */
  this.offset = 0;            /* distance back to copy string from */

  /* for table and code decoding */
  this.extra = 0;             /* extra bits needed */

  /* fixed and dynamic code tables */
  this.lencode = null;          /* starting table for length/literal codes */
  this.distcode = null;         /* starting table for distance codes */
  this.lenbits = 0;           /* index bits for lencode */
  this.distbits = 0;          /* index bits for distcode */

  /* dynamic table building */
  this.ncode = 0;             /* number of code length code lengths */
  this.nlen = 0;              /* number of length code lengths */
  this.ndist = 0;             /* number of distance code lengths */
  this.have = 0;              /* number of code lengths in lens[] */
  this.next = null;              /* next available space in codes[] */

  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */
  this.work = new utils.Buf16(288); /* work area for code table building */

  /*
   because we don't have pointers in js, we use lencode and distcode directly
   as buffers so we don't need codes
  */
  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */
  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */
  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */
  this.sane = 0;                   /* if false, allow invalid distance too far */
  this.back = 0;                   /* bits back of last unprocessed length/lit */
  this.was = 0;                    /* initial length of match */
}

function inflateResetKeep(strm) {
  var state;

  if (!strm || !strm.state) { return Z_STREAM_ERROR; }
  state = strm.state;
  strm.total_in = strm.total_out = state.total = 0;
  strm.msg = ''; /*Z_NULL*/
  if (state.wrap) {       /* to support ill-conceived Java test suite */
    strm.adler = state.wrap & 1;
  }
  state.mode = HEAD;
  state.last = 0;
  state.havedict = 0;
  state.dmax = 32768;
  state.head = null/*Z_NULL*/;
  state.hold = 0;
  state.bits = 0;
  //state.lencode = state.distcode = state.next = state.codes;
  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);
  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);

  state.sane = 1;
  state.back = -1;
  //Tracev((stderr, "inflate: reset\n"));
  return Z_OK;
}

function inflateReset(strm) {
  var state;

  if (!strm || !strm.state) { return Z_STREAM_ERROR; }
  state = strm.state;
  state.wsize = 0;
  state.whave = 0;
  state.wnext = 0;
  return inflateResetKeep(strm);

}

function inflateReset2(strm, windowBits) {
  var wrap;
  var state;

  /* get the state */
  if (!strm || !strm.state) { return Z_STREAM_ERROR; }
  state = strm.state;

  /* extract wrap request from windowBits parameter */
  if (windowBits < 0) {
    wrap = 0;
    windowBits = -windowBits;
  }
  else {
    wrap = (windowBits >> 4) + 1;
    if (windowBits < 48) {
      windowBits &= 15;
    }
  }

  /* set number of window bits, free window if different */
  if (windowBits && (windowBits < 8 || windowBits > 15)) {
    return Z_STREAM_ERROR;
  }
  if (state.window !== null && state.wbits !== windowBits) {
    state.window = null;
  }

  /* update state and reset the rest of it */
  state.wrap = wrap;
  state.wbits = windowBits;
  return inflateReset(strm);
}

function inflateInit2(strm, windowBits) {
  var ret;
  var state;

  if (!strm) { return Z_STREAM_ERROR; }
  //strm.msg = Z_NULL;                 /* in case we return an error */

  state = new InflateState();

  //if (state === Z_NULL) return Z_MEM_ERROR;
  //Tracev((stderr, "inflate: allocated\n"));
  strm.state = state;
  state.window = null/*Z_NULL*/;
  ret = inflateReset2(strm, windowBits);
  if (ret !== Z_OK) {
    strm.state = null/*Z_NULL*/;
  }
  return ret;
}

function inflateInit(strm) {
  return inflateInit2(strm, DEF_WBITS);
}


/*
 Return state with length and distance decoding tables and index sizes set to
 fixed code decoding.  Normally this returns fixed tables from inffixed.h.
 If BUILDFIXED is defined, then instead this routine builds the tables the
 first time it's called, and returns those tables the first time and
 thereafter.  This reduces the size of the code by about 2K bytes, in
 exchange for a little execution time.  However, BUILDFIXED should not be
 used for threaded applications, since the rewriting of the tables and virgin
 may not be thread-safe.
 */
var virgin = true;

var lenfix, distfix; // We have no pointers in JS, so keep tables separate

function fixedtables(state) {
  /* build fixed huffman tables if first call (may not be thread safe) */
  if (virgin) {
    var sym;

    lenfix = new utils.Buf32(512);
    distfix = new utils.Buf32(32);

    /* literal/length table */
    sym = 0;
    while (sym < 144) { state.lens[sym++] = 8; }
    while (sym < 256) { state.lens[sym++] = 9; }
    while (sym < 280) { state.lens[sym++] = 7; }
    while (sym < 288) { state.lens[sym++] = 8; }

    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, {bits: 9});

    /* distance table */
    sym = 0;
    while (sym < 32) { state.lens[sym++] = 5; }

    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, {bits: 5});

    /* do this just once */
    virgin = false;
  }

  state.lencode = lenfix;
  state.lenbits = 9;
  state.distcode = distfix;
  state.distbits = 5;
}


/*
 Update the window with the last wsize (normally 32K) bytes written before
 returning.  If window does not exist yet, create it.  This is only called
 when a window is already in use, or when output has been written during this
 inflate call, but the end of the deflate stream has not been reached yet.
 It is also called to create a window for dictionary data when a dictionary
 is loaded.

 Providing output buffers larger than 32K to inflate() should provide a speed
 advantage, since only the last 32K of output is copied to the sliding window
 upon return from inflate(), and since all distances after the first 32K of
 output will fall in the output data, making match copies simpler and faster.
 The advantage may be dependent on the size of the processor's data caches.
 */
function updatewindow(strm, src, end, copy) {
  var dist;
  var state = strm.state;

  /* if it hasn't been done already, allocate space for the window */
  if (state.window === null) {
    state.wsize = 1 << state.wbits;
    state.wnext = 0;
    state.whave = 0;

    state.window = new utils.Buf8(state.wsize);
  }

  /* copy state->wsize or less output bytes into the circular window */
  if (copy >= state.wsize) {
    utils.arraySet(state.window,src, end - state.wsize, state.wsize, 0);
    state.wnext = 0;
    state.whave = state.wsize;
  }
  else {
    dist = state.wsize - state.wnext;
    if (dist > copy) {
      dist = copy;
    }
    //zmemcpy(state->window + state->wnext, end - copy, dist);
    utils.arraySet(state.window,src, end - copy, dist, state.wnext);
    copy -= dist;
    if (copy) {
      //zmemcpy(state->window, end - copy, copy);
      utils.arraySet(state.window,src, end - copy, copy, 0);
      state.wnext = copy;
      state.whave = state.wsize;
    }
    else {
      state.wnext += dist;
      if (state.wnext === state.wsize) { state.wnext = 0; }
      if (state.whave < state.wsize) { state.whave += dist; }
    }
  }
  return 0;
}

function inflate(strm, flush) {
  var state;
  var input, output;          // input/output buffers
  var next;                   /* next input INDEX */
  var put;                    /* next output INDEX */
  var have, left;             /* available input and output */
  var hold;                   /* bit buffer */
  var bits;                   /* bits in bit buffer */
  var _in, _out;              /* save starting available input and output */
  var copy;                   /* number of stored or match bytes to copy */
  var from;                   /* where to copy match bytes from */
  var from_source;
  var here = 0;               /* current decoding table entry */
  var here_bits, here_op, here_val; // paked "here" denormalized (JS specific)
  //var last;                   /* parent table entry */
  var last_bits, last_op, last_val; // paked "last" denormalized (JS specific)
  var len;                    /* length to copy for repeats, bits to drop */
  var ret;                    /* return code */
  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */
  var opts;

  var n; // temporary var for NEED_BITS

  var order = /* permutation of code lengths */
    [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];


  if (!strm || !strm.state || !strm.output ||
      (!strm.input && strm.avail_in !== 0)) {
    return Z_STREAM_ERROR;
  }

  state = strm.state;
  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */


  //--- LOAD() ---
  put = strm.next_out;
  output = strm.output;
  left = strm.avail_out;
  next = strm.next_in;
  input = strm.input;
  have = strm.avail_in;
  hold = state.hold;
  bits = state.bits;
  //---

  _in = have;
  _out = left;
  ret = Z_OK;

  inf_leave: // goto emulation
  for (;;) {
    switch (state.mode) {
    case HEAD:
      if (state.wrap === 0) {
        state.mode = TYPEDO;
        break;
      }
      //=== NEEDBITS(16);
      while (bits < 16) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */
        state.check = 0/*crc32(0L, Z_NULL, 0)*/;
        //=== CRC2(state.check, hold);
        hbuf[0] = hold & 0xff;
        hbuf[1] = (hold >>> 8) & 0xff;
        state.check = crc32(state.check, hbuf, 2, 0);
        //===//

        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        state.mode = FLAGS;
        break;
      }
      state.flags = 0;           /* expect zlib header */
      if (state.head) {
        state.head.done = false;
      }
      if (!(state.wrap & 1) ||   /* check if zlib header allowed */
        (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {
        strm.msg = 'incorrect header check';
        state.mode = BAD;
        break;
      }
      if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {
        strm.msg = 'unknown compression method';
        state.mode = BAD;
        break;
      }
      //--- DROPBITS(4) ---//
      hold >>>= 4;
      bits -= 4;
      //---//
      len = (hold & 0x0f)/*BITS(4)*/ + 8;
      if (state.wbits === 0) {
        state.wbits = len;
      }
      else if (len > state.wbits) {
        strm.msg = 'invalid window size';
        state.mode = BAD;
        break;
      }
      state.dmax = 1 << len;
      //Tracev((stderr, "inflate:   zlib header ok\n"));
      strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;
      state.mode = hold & 0x200 ? DICTID : TYPE;
      //=== INITBITS();
      hold = 0;
      bits = 0;
      //===//
      break;
    case FLAGS:
      //=== NEEDBITS(16); */
      while (bits < 16) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      state.flags = hold;
      if ((state.flags & 0xff) !== Z_DEFLATED) {
        strm.msg = 'unknown compression method';
        state.mode = BAD;
        break;
      }
      if (state.flags & 0xe000) {
        strm.msg = 'unknown header flags set';
        state.mode = BAD;
        break;
      }
      if (state.head) {
        state.head.text = ((hold >> 8) & 1);
      }
      if (state.flags & 0x0200) {
        //=== CRC2(state.check, hold);
        hbuf[0] = hold & 0xff;
        hbuf[1] = (hold >>> 8) & 0xff;
        state.check = crc32(state.check, hbuf, 2, 0);
        //===//
      }
      //=== INITBITS();
      hold = 0;
      bits = 0;
      //===//
      state.mode = TIME;
      /* falls through */
    case TIME:
      //=== NEEDBITS(32); */
      while (bits < 32) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      if (state.head) {
        state.head.time = hold;
      }
      if (state.flags & 0x0200) {
        //=== CRC4(state.check, hold)
        hbuf[0] = hold & 0xff;
        hbuf[1] = (hold >>> 8) & 0xff;
        hbuf[2] = (hold >>> 16) & 0xff;
        hbuf[3] = (hold >>> 24) & 0xff;
        state.check = crc32(state.check, hbuf, 4, 0);
        //===
      }
      //=== INITBITS();
      hold = 0;
      bits = 0;
      //===//
      state.mode = OS;
      /* falls through */
    case OS:
      //=== NEEDBITS(16); */
      while (bits < 16) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      if (state.head) {
        state.head.xflags = (hold & 0xff);
        state.head.os = (hold >> 8);
      }
      if (state.flags & 0x0200) {
        //=== CRC2(state.check, hold);
        hbuf[0] = hold & 0xff;
        hbuf[1] = (hold >>> 8) & 0xff;
        state.check = crc32(state.check, hbuf, 2, 0);
        //===//
      }
      //=== INITBITS();
      hold = 0;
      bits = 0;
      //===//
      state.mode = EXLEN;
      /* falls through */
    case EXLEN:
      if (state.flags & 0x0400) {
        //=== NEEDBITS(16); */
        while (bits < 16) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.length = hold;
        if (state.head) {
          state.head.extra_len = hold;
        }
        if (state.flags & 0x0200) {
          //=== CRC2(state.check, hold);
          hbuf[0] = hold & 0xff;
          hbuf[1] = (hold >>> 8) & 0xff;
          state.check = crc32(state.check, hbuf, 2, 0);
          //===//
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
      }
      else if (state.head) {
        state.head.extra = null/*Z_NULL*/;
      }
      state.mode = EXTRA;
      /* falls through */
    case EXTRA:
      if (state.flags & 0x0400) {
        copy = state.length;
        if (copy > have) { copy = have; }
        if (copy) {
          if (state.head) {
            len = state.head.extra_len - state.length;
            if (!state.head.extra) {
              // Use untyped array for more conveniend processing later
              state.head.extra = new Array(state.head.extra_len);
            }
            utils.arraySet(
              state.head.extra,
              input,
              next,
              // extra field is limited to 65536 bytes
              // - no need for additional size check
              copy,
              /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/
              len
            );
            //zmemcpy(state.head.extra + len, next,
            //        len + copy > state.head.extra_max ?
            //        state.head.extra_max - len : copy);
          }
          if (state.flags & 0x0200) {
            state.check = crc32(state.check, input, copy, next);
          }
          have -= copy;
          next += copy;
          state.length -= copy;
        }
        if (state.length) { break inf_leave; }
      }
      state.length = 0;
      state.mode = NAME;
      /* falls through */
    case NAME:
      if (state.flags & 0x0800) {
        if (have === 0) { break inf_leave; }
        copy = 0;
        do {
          // TODO: 2 or 1 bytes?
          len = input[next + copy++];
          /* use constant limit because in js we should not preallocate memory */
          if (state.head && len &&
              (state.length < 65536 /*state.head.name_max*/)) {
            state.head.name += String.fromCharCode(len);
          }
        } while (len && copy < have);

        if (state.flags & 0x0200) {
          state.check = crc32(state.check, input, copy, next);
        }
        have -= copy;
        next += copy;
        if (len) { break inf_leave; }
      }
      else if (state.head) {
        state.head.name = null;
      }
      state.length = 0;
      state.mode = COMMENT;
      /* falls through */
    case COMMENT:
      if (state.flags & 0x1000) {
        if (have === 0) { break inf_leave; }
        copy = 0;
        do {
          len = input[next + copy++];
          /* use constant limit because in js we should not preallocate memory */
          if (state.head && len &&
              (state.length < 65536 /*state.head.comm_max*/)) {
            state.head.comment += String.fromCharCode(len);
          }
        } while (len && copy < have);
        if (state.flags & 0x0200) {
          state.check = crc32(state.check, input, copy, next);
        }
        have -= copy;
        next += copy;
        if (len) { break inf_leave; }
      }
      else if (state.head) {
        state.head.comment = null;
      }
      state.mode = HCRC;
      /* falls through */
    case HCRC:
      if (state.flags & 0x0200) {
        //=== NEEDBITS(16); */
        while (bits < 16) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        if (hold !== (state.check & 0xffff)) {
          strm.msg = 'header crc mismatch';
          state.mode = BAD;
          break;
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
      }
      if (state.head) {
        state.head.hcrc = ((state.flags >> 9) & 1);
        state.head.done = true;
      }
      strm.adler = state.check = 0 /*crc32(0L, Z_NULL, 0)*/;
      state.mode = TYPE;
      break;
    case DICTID:
      //=== NEEDBITS(32); */
      while (bits < 32) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      strm.adler = state.check = ZSWAP32(hold);
      //=== INITBITS();
      hold = 0;
      bits = 0;
      //===//
      state.mode = DICT;
      /* falls through */
    case DICT:
      if (state.havedict === 0) {
        //--- RESTORE() ---
        strm.next_out = put;
        strm.avail_out = left;
        strm.next_in = next;
        strm.avail_in = have;
        state.hold = hold;
        state.bits = bits;
        //---
        return Z_NEED_DICT;
      }
      strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;
      state.mode = TYPE;
      /* falls through */
    case TYPE:
      if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }
      /* falls through */
    case TYPEDO:
      if (state.last) {
        //--- BYTEBITS() ---//
        hold >>>= bits & 7;
        bits -= bits & 7;
        //---//
        state.mode = CHECK;
        break;
      }
      //=== NEEDBITS(3); */
      while (bits < 3) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      state.last = (hold & 0x01)/*BITS(1)*/;
      //--- DROPBITS(1) ---//
      hold >>>= 1;
      bits -= 1;
      //---//

      switch ((hold & 0x03)/*BITS(2)*/) {
      case 0:                             /* stored block */
        //Tracev((stderr, "inflate:     stored block%s\n",
        //        state.last ? " (last)" : ""));
        state.mode = STORED;
        break;
      case 1:                             /* fixed block */
        fixedtables(state);
        //Tracev((stderr, "inflate:     fixed codes block%s\n",
        //        state.last ? " (last)" : ""));
        state.mode = LEN_;             /* decode codes */
        if (flush === Z_TREES) {
          //--- DROPBITS(2) ---//
          hold >>>= 2;
          bits -= 2;
          //---//
          break inf_leave;
        }
        break;
      case 2:                             /* dynamic block */
        //Tracev((stderr, "inflate:     dynamic codes block%s\n",
        //        state.last ? " (last)" : ""));
        state.mode = TABLE;
        break;
      case 3:
        strm.msg = 'invalid block type';
        state.mode = BAD;
      }
      //--- DROPBITS(2) ---//
      hold >>>= 2;
      bits -= 2;
      //---//
      break;
    case STORED:
      //--- BYTEBITS() ---// /* go to byte boundary */
      hold >>>= bits & 7;
      bits -= bits & 7;
      //---//
      //=== NEEDBITS(32); */
      while (bits < 32) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {
        strm.msg = 'invalid stored block lengths';
        state.mode = BAD;
        break;
      }
      state.length = hold & 0xffff;
      //Tracev((stderr, "inflate:       stored length %u\n",
      //        state.length));
      //=== INITBITS();
      hold = 0;
      bits = 0;
      //===//
      state.mode = COPY_;
      if (flush === Z_TREES) { break inf_leave; }
      /* falls through */
    case COPY_:
      state.mode = COPY;
      /* falls through */
    case COPY:
      copy = state.length;
      if (copy) {
        if (copy > have) { copy = have; }
        if (copy > left) { copy = left; }
        if (copy === 0) { break inf_leave; }
        //--- zmemcpy(put, next, copy); ---
        utils.arraySet(output, input, next, copy, put);
        //---//
        have -= copy;
        next += copy;
        left -= copy;
        put += copy;
        state.length -= copy;
        break;
      }
      //Tracev((stderr, "inflate:       stored end\n"));
      state.mode = TYPE;
      break;
    case TABLE:
      //=== NEEDBITS(14); */
      while (bits < 14) {
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
      }
      //===//
      state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;
      //--- DROPBITS(5) ---//
      hold >>>= 5;
      bits -= 5;
      //---//
      state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;
      //--- DROPBITS(5) ---//
      hold >>>= 5;
      bits -= 5;
      //---//
      state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;
      //--- DROPBITS(4) ---//
      hold >>>= 4;
      bits -= 4;
      //---//
//#ifndef PKZIP_BUG_WORKAROUND
      if (state.nlen > 286 || state.ndist > 30) {
        strm.msg = 'too many length or distance symbols';
        state.mode = BAD;
        break;
      }
//#endif
      //Tracev((stderr, "inflate:       table sizes ok\n"));
      state.have = 0;
      state.mode = LENLENS;
      /* falls through */
    case LENLENS:
      while (state.have < state.ncode) {
        //=== NEEDBITS(3);
        while (bits < 3) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);
        //--- DROPBITS(3) ---//
        hold >>>= 3;
        bits -= 3;
        //---//
      }
      while (state.have < 19) {
        state.lens[order[state.have++]] = 0;
      }
      // We have separate tables & no pointers. 2 commented lines below not needed.
      //state.next = state.codes;
      //state.lencode = state.next;
      // Switch to use dynamic table
      state.lencode = state.lendyn;
      state.lenbits = 7;

      opts = {bits: state.lenbits};
      ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);
      state.lenbits = opts.bits;

      if (ret) {
        strm.msg = 'invalid code lengths set';
        state.mode = BAD;
        break;
      }
      //Tracev((stderr, "inflate:       code lengths ok\n"));
      state.have = 0;
      state.mode = CODELENS;
      /* falls through */
    case CODELENS:
      while (state.have < state.nlen + state.ndist) {
        for (;;) {
          here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/
          here_bits = here >>> 24;
          here_op = (here >>> 16) & 0xff;
          here_val = here & 0xffff;

          if ((here_bits) <= bits) { break; }
          //--- PULLBYTE() ---//
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
          //---//
        }
        if (here_val < 16) {
          //--- DROPBITS(here.bits) ---//
          hold >>>= here_bits;
          bits -= here_bits;
          //---//
          state.lens[state.have++] = here_val;
        }
        else {
          if (here_val === 16) {
            //=== NEEDBITS(here.bits + 2);
            n = here_bits + 2;
            while (bits < n) {
              if (have === 0) { break inf_leave; }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            //===//
            //--- DROPBITS(here.bits) ---//
            hold >>>= here_bits;
            bits -= here_bits;
            //---//
            if (state.have === 0) {
              strm.msg = 'invalid bit length repeat';
              state.mode = BAD;
              break;
            }
            len = state.lens[state.have - 1];
            copy = 3 + (hold & 0x03);//BITS(2);
            //--- DROPBITS(2) ---//
            hold >>>= 2;
            bits -= 2;
            //---//
          }
          else if (here_val === 17) {
            //=== NEEDBITS(here.bits + 3);
            n = here_bits + 3;
            while (bits < n) {
              if (have === 0) { break inf_leave; }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            //===//
            //--- DROPBITS(here.bits) ---//
            hold >>>= here_bits;
            bits -= here_bits;
            //---//
            len = 0;
            copy = 3 + (hold & 0x07);//BITS(3);
            //--- DROPBITS(3) ---//
            hold >>>= 3;
            bits -= 3;
            //---//
          }
          else {
            //=== NEEDBITS(here.bits + 7);
            n = here_bits + 7;
            while (bits < n) {
              if (have === 0) { break inf_leave; }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            //===//
            //--- DROPBITS(here.bits) ---//
            hold >>>= here_bits;
            bits -= here_bits;
            //---//
            len = 0;
            copy = 11 + (hold & 0x7f);//BITS(7);
            //--- DROPBITS(7) ---//
            hold >>>= 7;
            bits -= 7;
            //---//
          }
          if (state.have + copy > state.nlen + state.ndist) {
            strm.msg = 'invalid bit length repeat';
            state.mode = BAD;
            break;
          }
          while (copy--) {
            state.lens[state.have++] = len;
          }
        }
      }

      /* handle error breaks in while */
      if (state.mode === BAD) { break; }

      /* check for end-of-block code (better have one) */
      if (state.lens[256] === 0) {
        strm.msg = 'invalid code -- missing end-of-block';
        state.mode = BAD;
        break;
      }

      /* build code tables -- note: do not change the lenbits or distbits
         values here (9 and 6) without reading the comments in inftrees.h
         concerning the ENOUGH constants, which depend on those values */
      state.lenbits = 9;

      opts = {bits: state.lenbits};
      ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);
      // We have separate tables & no pointers. 2 commented lines below not needed.
      // state.next_index = opts.table_index;
      state.lenbits = opts.bits;
      // state.lencode = state.next;

      if (ret) {
        strm.msg = 'invalid literal/lengths set';
        state.mode = BAD;
        break;
      }

      state.distbits = 6;
      //state.distcode.copy(state.codes);
      // Switch to use dynamic table
      state.distcode = state.distdyn;
      opts = {bits: state.distbits};
      ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);
      // We have separate tables & no pointers. 2 commented lines below not needed.
      // state.next_index = opts.table_index;
      state.distbits = opts.bits;
      // state.distcode = state.next;

      if (ret) {
        strm.msg = 'invalid distances set';
        state.mode = BAD;
        break;
      }
      //Tracev((stderr, 'inflate:       codes ok\n'));
      state.mode = LEN_;
      if (flush === Z_TREES) { break inf_leave; }
      /* falls through */
    case LEN_:
      state.mode = LEN;
      /* falls through */
    case LEN:
      if (have >= 6 && left >= 258) {
        //--- RESTORE() ---
        strm.next_out = put;
        strm.avail_out = left;
        strm.next_in = next;
        strm.avail_in = have;
        state.hold = hold;
        state.bits = bits;
        //---
        inflate_fast(strm, _out);
        //--- LOAD() ---
        put = strm.next_out;
        output = strm.output;
        left = strm.avail_out;
        next = strm.next_in;
        input = strm.input;
        have = strm.avail_in;
        hold = state.hold;
        bits = state.bits;
        //---

        if (state.mode === TYPE) {
          state.back = -1;
        }
        break;
      }
      state.back = 0;
      for (;;) {
        here = state.lencode[hold & ((1 << state.lenbits) -1)];  /*BITS(state.lenbits)*/
        here_bits = here >>> 24;
        here_op = (here >>> 16) & 0xff;
        here_val = here & 0xffff;

        if (here_bits <= bits) { break; }
        //--- PULLBYTE() ---//
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
        //---//
      }
      if (here_op && (here_op & 0xf0) === 0) {
        last_bits = here_bits;
        last_op = here_op;
        last_val = here_val;
        for (;;) {
          here = state.lencode[last_val +
                  ((hold & ((1 << (last_bits + last_op)) -1))/*BITS(last.bits + last.op)*/ >> last_bits)];
          here_bits = here >>> 24;
          here_op = (here >>> 16) & 0xff;
          here_val = here & 0xffff;

          if ((last_bits + here_bits) <= bits) { break; }
          //--- PULLBYTE() ---//
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
          //---//
        }
        //--- DROPBITS(last.bits) ---//
        hold >>>= last_bits;
        bits -= last_bits;
        //---//
        state.back += last_bits;
      }
      //--- DROPBITS(here.bits) ---//
      hold >>>= here_bits;
      bits -= here_bits;
      //---//
      state.back += here_bits;
      state.length = here_val;
      if (here_op === 0) {
        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?
        //        "inflate:         literal '%c'\n" :
        //        "inflate:         literal 0x%02x\n", here.val));
        state.mode = LIT;
        break;
      }
      if (here_op & 32) {
        //Tracevv((stderr, "inflate:         end of block\n"));
        state.back = -1;
        state.mode = TYPE;
        break;
      }
      if (here_op & 64) {
        strm.msg = 'invalid literal/length code';
        state.mode = BAD;
        break;
      }
      state.extra = here_op & 15;
      state.mode = LENEXT;
      /* falls through */
    case LENEXT:
      if (state.extra) {
        //=== NEEDBITS(state.extra);
        n = state.extra;
        while (bits < n) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.length += hold & ((1 << state.extra) -1)/*BITS(state.extra)*/;
        //--- DROPBITS(state.extra) ---//
        hold >>>= state.extra;
        bits -= state.extra;
        //---//
        state.back += state.extra;
      }
      //Tracevv((stderr, "inflate:         length %u\n", state.length));
      state.was = state.length;
      state.mode = DIST;
      /* falls through */
    case DIST:
      for (;;) {
        here = state.distcode[hold & ((1 << state.distbits) -1)];/*BITS(state.distbits)*/
        here_bits = here >>> 24;
        here_op = (here >>> 16) & 0xff;
        here_val = here & 0xffff;

        if ((here_bits) <= bits) { break; }
        //--- PULLBYTE() ---//
        if (have === 0) { break inf_leave; }
        have--;
        hold += input[next++] << bits;
        bits += 8;
        //---//
      }
      if ((here_op & 0xf0) === 0) {
        last_bits = here_bits;
        last_op = here_op;
        last_val = here_val;
        for (;;) {
          here = state.distcode[last_val +
                  ((hold & ((1 << (last_bits + last_op)) -1))/*BITS(last.bits + last.op)*/ >> last_bits)];
          here_bits = here >>> 24;
          here_op = (here >>> 16) & 0xff;
          here_val = here & 0xffff;

          if ((last_bits + here_bits) <= bits) { break; }
          //--- PULLBYTE() ---//
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
          //---//
        }
        //--- DROPBITS(last.bits) ---//
        hold >>>= last_bits;
        bits -= last_bits;
        //---//
        state.back += last_bits;
      }
      //--- DROPBITS(here.bits) ---//
      hold >>>= here_bits;
      bits -= here_bits;
      //---//
      state.back += here_bits;
      if (here_op & 64) {
        strm.msg = 'invalid distance code';
        state.mode = BAD;
        break;
      }
      state.offset = here_val;
      state.extra = (here_op) & 15;
      state.mode = DISTEXT;
      /* falls through */
    case DISTEXT:
      if (state.extra) {
        //=== NEEDBITS(state.extra);
        n = state.extra;
        while (bits < n) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.offset += hold & ((1 << state.extra) -1)/*BITS(state.extra)*/;
        //--- DROPBITS(state.extra) ---//
        hold >>>= state.extra;
        bits -= state.extra;
        //---//
        state.back += state.extra;
      }
//#ifdef INFLATE_STRICT
      if (state.offset > state.dmax) {
        strm.msg = 'invalid distance too far back';
        state.mode = BAD;
        break;
      }
//#endif
      //Tracevv((stderr, "inflate:         distance %u\n", state.offset));
      state.mode = MATCH;
      /* falls through */
    case MATCH:
      if (left === 0) { break inf_leave; }
      copy = _out - left;
      if (state.offset > copy) {         /* copy from window */
        copy = state.offset - copy;
        if (copy > state.whave) {
          if (state.sane) {
            strm.msg = 'invalid distance too far back';
            state.mode = BAD;
            break;
          }
// (!) This block is disabled in zlib defailts,
// don't enable it for binary compatibility
//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR
//          Trace((stderr, "inflate.c too far\n"));
//          copy -= state.whave;
//          if (copy > state.length) { copy = state.length; }
//          if (copy > left) { copy = left; }
//          left -= copy;
//          state.length -= copy;
//          do {
//            output[put++] = 0;
//          } while (--copy);
//          if (state.length === 0) { state.mode = LEN; }
//          break;
//#endif
        }
        if (copy > state.wnext) {
          copy -= state.wnext;
          from = state.wsize - copy;
        }
        else {
          from = state.wnext - copy;
        }
        if (copy > state.length) { copy = state.length; }
        from_source = state.window;
      }
      else {                              /* copy from output */
        from_source = output;
        from = put - state.offset;
        copy = state.length;
      }
      if (copy > left) { copy = left; }
      left -= copy;
      state.length -= copy;
      do {
        output[put++] = from_source[from++];
      } while (--copy);
      if (state.length === 0) { state.mode = LEN; }
      break;
    case LIT:
      if (left === 0) { break inf_leave; }
      output[put++] = state.length;
      left--;
      state.mode = LEN;
      break;
    case CHECK:
      if (state.wrap) {
        //=== NEEDBITS(32);
        while (bits < 32) {
          if (have === 0) { break inf_leave; }
          have--;
          // Use '|' insdead of '+' to make sure that result is signed
          hold |= input[next++] << bits;
          bits += 8;
        }
        //===//
        _out -= left;
        strm.total_out += _out;
        state.total += _out;
        if (_out) {
          strm.adler = state.check =
              /*UPDATE(state.check, put - _out, _out);*/
              (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));

        }
        _out = left;
        // NB: crc32 stored as signed 32-bit int, ZSWAP32 returns signed too
        if ((state.flags ? hold : ZSWAP32(hold)) !== state.check) {
          strm.msg = 'incorrect data check';
          state.mode = BAD;
          break;
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        //Tracev((stderr, "inflate:   check matches trailer\n"));
      }
      state.mode = LENGTH;
      /* falls through */
    case LENGTH:
      if (state.wrap && state.flags) {
        //=== NEEDBITS(32);
        while (bits < 32) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        if (hold !== (state.total & 0xffffffff)) {
          strm.msg = 'incorrect length check';
          state.mode = BAD;
          break;
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        //Tracev((stderr, "inflate:   length matches trailer\n"));
      }
      state.mode = DONE;
      /* falls through */
    case DONE:
      ret = Z_STREAM_END;
      break inf_leave;
    case BAD:
      ret = Z_DATA_ERROR;
      break inf_leave;
    case MEM:
      return Z_MEM_ERROR;
    case SYNC:
      /* falls through */
    default:
      return Z_STREAM_ERROR;
    }
  }

  // inf_leave <- here is real place for "goto inf_leave", emulated via "break inf_leave"

  /*
     Return from inflate(), updating the total counts and the check value.
     If there was no progress during the inflate() call, return a buffer
     error.  Call updatewindow() to create and/or update the window state.
     Note: a memory error from inflate() is non-recoverable.
   */

  //--- RESTORE() ---
  strm.next_out = put;
  strm.avail_out = left;
  strm.next_in = next;
  strm.avail_in = have;
  state.hold = hold;
  state.bits = bits;
  //---

  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&
                      (state.mode < CHECK || flush !== Z_FINISH))) {
    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {
      state.mode = MEM;
      return Z_MEM_ERROR;
    }
  }
  _in -= strm.avail_in;
  _out -= strm.avail_out;
  strm.total_in += _in;
  strm.total_out += _out;
  state.total += _out;
  if (state.wrap && _out) {
    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/
      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));
  }
  strm.data_type = state.bits + (state.last ? 64 : 0) +
                    (state.mode === TYPE ? 128 : 0) +
                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);
  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {
    ret = Z_BUF_ERROR;
  }
  return ret;
}

function inflateEnd(strm) {

  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {
    return Z_STREAM_ERROR;
  }

  var state = strm.state;
  if (state.window) {
    state.window = null;
  }
  strm.state = null;
  return Z_OK;
}

function inflateGetHeader(strm, head) {
  var state;

  /* check state */
  if (!strm || !strm.state) { return Z_STREAM_ERROR; }
  state = strm.state;
  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }

  /* save header structure */
  state.head = head;
  head.done = false;
  return Z_OK;
}


exports.inflateReset = inflateReset;
exports.inflateReset2 = inflateReset2;
exports.inflateResetKeep = inflateResetKeep;
exports.inflateInit = inflateInit;
exports.inflateInit2 = inflateInit2;
exports.inflate = inflate;
exports.inflateEnd = inflateEnd;
exports.inflateGetHeader = inflateGetHeader;
exports.inflateInfo = 'pako inflate (from Nodeca project)';

/* Not implemented
exports.inflateCopy = inflateCopy;
exports.inflateGetDictionary = inflateGetDictionary;
exports.inflateMark = inflateMark;
exports.inflatePrime = inflatePrime;
exports.inflateSetDictionary = inflateSetDictionary;
exports.inflateSync = inflateSync;
exports.inflateSyncPoint = inflateSyncPoint;
exports.inflateUndermine = inflateUndermine;
*/

},{"../utils/common":38,"./adler32":40,"./crc32":42,"./inffast":45,"./inftrees":47}],47:[function(require,module,exports){
'use strict';


var utils = require('../utils/common');

var MAXBITS = 15;
var ENOUGH_LENS = 852;
var ENOUGH_DISTS = 592;
//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);

var CODES = 0;
var LENS = 1;
var DISTS = 2;

var lbase = [ /* Length codes 257..285 base */
  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
];

var lext = [ /* Length codes 257..285 extra */
  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,
  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78
];

var dbase = [ /* Distance codes 0..29 base */
  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
  8193, 12289, 16385, 24577, 0, 0
];

var dext = [ /* Distance codes 0..29 extra */
  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,
  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,
  28, 28, 29, 29, 64, 64
];

module.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)
{
  var bits = opts.bits;
      //here = opts.here; /* table entry for duplication */

  var len = 0;               /* a code's length in bits */
  var sym = 0;               /* index of code symbols */
  var min = 0, max = 0;          /* minimum and maximum code lengths */
  var root = 0;              /* number of index bits for root table */
  var curr = 0;              /* number of index bits for current table */
  var drop = 0;              /* code bits to drop for sub-table */
  var left = 0;                   /* number of prefix codes available */
  var used = 0;              /* code entries in table used */
  var huff = 0;              /* Huffman code */
  var incr;              /* for incrementing code, index */
  var fill;              /* index for replicating entries */
  var low;               /* low bits for current root entry */
  var mask;              /* mask for low root bits */
  var next;             /* next available space in table */
  var base = null;     /* base value table to use */
  var base_index = 0;
//  var shoextra;    /* extra bits table to use */
  var end;                    /* use base and extra for symbol > end */
  var count = new utils.Buf16(MAXBITS+1); //[MAXBITS+1];    /* number of codes of each length */
  var offs = new utils.Buf16(MAXBITS+1); //[MAXBITS+1];     /* offsets in table for each length */
  var extra = null;
  var extra_index = 0;

  var here_bits, here_op, here_val;

  /*
   Process a set of code lengths to create a canonical Huffman code.  The
   code lengths are lens[0..codes-1].  Each length corresponds to the
   symbols 0..codes-1.  The Huffman code is generated by first sorting the
   symbols by length from short to long, and retaining the symbol order
   for codes with equal lengths.  Then the code starts with all zero bits
   for the first code of the shortest length, and the codes are integer
   increments for the same length, and zeros are appended as the length
   increases.  For the deflate format, these bits are stored backwards
   from their more natural integer increment ordering, and so when the
   decoding tables are built in the large loop below, the integer codes
   are incremented backwards.

   This routine assumes, but does not check, that all of the entries in
   lens[] are in the range 0..MAXBITS.  The caller must assure this.
   1..MAXBITS is interpreted as that code length.  zero means that that
   symbol does not occur in this code.

   The codes are sorted by computing a count of codes for each length,
   creating from that a table of starting indices for each length in the
   sorted table, and then entering the symbols in order in the sorted
   table.  The sorted table is work[], with that space being provided by
   the caller.

   The length counts are used for other purposes as well, i.e. finding
   the minimum and maximum length codes, determining if there are any
   codes at all, checking for a valid set of lengths, and looking ahead
   at length counts to determine sub-table sizes when building the
   decoding tables.
   */

  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */
  for (len = 0; len <= MAXBITS; len++) {
    count[len] = 0;
  }
  for (sym = 0; sym < codes; sym++) {
    count[lens[lens_index + sym]]++;
  }

  /* bound code lengths, force root to be within code lengths */
  root = bits;
  for (max = MAXBITS; max >= 1; max--) {
    if (count[max] !== 0) { break; }
  }
  if (root > max) {
    root = max;
  }
  if (max === 0) {                     /* no symbols to code at all */
    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */
    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;
    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;
    table[table_index++] = (1 << 24) | (64 << 16) | 0;


    //table.op[opts.table_index] = 64;
    //table.bits[opts.table_index] = 1;
    //table.val[opts.table_index++] = 0;
    table[table_index++] = (1 << 24) | (64 << 16) | 0;

    opts.bits = 1;
    return 0;     /* no symbols, but wait for decoding to report error */
  }
  for (min = 1; min < max; min++) {
    if (count[min] !== 0) { break; }
  }
  if (root < min) {
    root = min;
  }

  /* check for an over-subscribed or incomplete set of lengths */
  left = 1;
  for (len = 1; len <= MAXBITS; len++) {
    left <<= 1;
    left -= count[len];
    if (left < 0) {
      return -1;
    }        /* over-subscribed */
  }
  if (left > 0 && (type === CODES || max !== 1)) {
    return -1;                      /* incomplete set */
  }

  /* generate offsets into symbol table for each length for sorting */
  offs[1] = 0;
  for (len = 1; len < MAXBITS; len++) {
    offs[len + 1] = offs[len] + count[len];
  }

  /* sort symbols by length, by symbol order within each length */
  for (sym = 0; sym < codes; sym++) {
    if (lens[lens_index + sym] !== 0) {
      work[offs[lens[lens_index + sym]]++] = sym;
    }
  }

  /*
   Create and fill in decoding tables.  In this loop, the table being
   filled is at next and has curr index bits.  The code being used is huff
   with length len.  That code is converted to an index by dropping drop
   bits off of the bottom.  For codes where len is less than drop + curr,
   those top drop + curr - len bits are incremented through all values to
   fill the table with replicated entries.

   root is the number of index bits for the root table.  When len exceeds
   root, sub-tables are created pointed to by the root entry with an index
   of the low root bits of huff.  This is saved in low to check for when a
   new sub-table should be started.  drop is zero when the root table is
   being filled, and drop is root when sub-tables are being filled.

   When a new sub-table is needed, it is necessary to look ahead in the
   code lengths to determine what size sub-table is needed.  The length
   counts are used for this, and so count[] is decremented as codes are
   entered in the tables.

   used keeps track of how many table entries have been allocated from the
   provided *table space.  It is checked for LENS and DIST tables against
   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in
   the initial root table size constants.  See the comments in inftrees.h
   for more information.

   sym increments through all symbols, and the loop terminates when
   all codes of length max, i.e. all codes, have been processed.  This
   routine permits incomplete codes, so another loop after this one fills
   in the rest of the decoding tables with invalid code markers.
   */

  /* set up for code type */
  // poor man optimization - use if-else instead of switch,
  // to avoid deopts in old v8
  if (type === CODES) {
    base = extra = work;    /* dummy value--not used */
    end = 19;

  } else if (type === LENS) {
    base = lbase;
    base_index -= 257;
    extra = lext;
    extra_index -= 257;
    end = 256;

  } else {                    /* DISTS */
    base = dbase;
    extra = dext;
    end = -1;
  }

  /* initialize opts for loop */
  huff = 0;                   /* starting code */
  sym = 0;                    /* starting code symbol */
  len = min;                  /* starting code length */
  next = table_index;              /* current table to fill in */
  curr = root;                /* current table index bits */
  drop = 0;                   /* current bits to drop from code for index */
  low = -1;                   /* trigger new sub-table when len > root */
  used = 1 << root;          /* use root table entries */
  mask = used - 1;            /* mask for comparing low */

  /* check available table space */
  if ((type === LENS && used > ENOUGH_LENS) ||
    (type === DISTS && used > ENOUGH_DISTS)) {
    return 1;
  }

  var i=0;
  /* process all codes and make table entries */
  for (;;) {
    i++;
    /* create table entry */
    here_bits = len - drop;
    if (work[sym] < end) {
      here_op = 0;
      here_val = work[sym];
    }
    else if (work[sym] > end) {
      here_op = extra[extra_index + work[sym]];
      here_val = base[base_index + work[sym]];
    }
    else {
      here_op = 32 + 64;         /* end of block */
      here_val = 0;
    }

    /* replicate for those indices with low len bits equal to huff */
    incr = 1 << (len - drop);
    fill = 1 << curr;
    min = fill;                 /* save offset to next table */
    do {
      fill -= incr;
      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;
    } while (fill !== 0);

    /* backwards increment the len-bit code huff */
    incr = 1 << (len - 1);
    while (huff & incr) {
      incr >>= 1;
    }
    if (incr !== 0) {
      huff &= incr - 1;
      huff += incr;
    } else {
      huff = 0;
    }

    /* go to next symbol, update count, len */
    sym++;
    if (--count[len] === 0) {
      if (len === max) { break; }
      len = lens[lens_index + work[sym]];
    }

    /* create new sub-table if needed */
    if (len > root && (huff & mask) !== low) {
      /* if first time, transition to sub-tables */
      if (drop === 0) {
        drop = root;
      }

      /* increment past last table */
      next += min;            /* here min is 1 << curr */

      /* determine length of next table */
      curr = len - drop;
      left = 1 << curr;
      while (curr + drop < max) {
        left -= count[curr + drop];
        if (left <= 0) { break; }
        curr++;
        left <<= 1;
      }

      /* check for enough space */
      used += 1 << curr;
      if ((type === LENS && used > ENOUGH_LENS) ||
        (type === DISTS && used > ENOUGH_DISTS)) {
        return 1;
      }

      /* point entry in root table to sub-table */
      low = huff & mask;
      /*table.op[low] = curr;
      table.bits[low] = root;
      table.val[low] = next - opts.table_index;*/
      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;
    }
  }

  /* fill in remaining table entry if code is incomplete (guaranteed to have
   at most one remaining entry, since if the code is incomplete, the
   maximum code length that was allowed to get this far is one bit) */
  if (huff !== 0) {
    //table.op[next + huff] = 64;            /* invalid code marker */
    //table.bits[next + huff] = len - drop;
    //table.val[next + huff] = 0;
    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;
  }

  /* set return parameters */
  //opts.table_index += used;
  opts.bits = root;
  return 0;
};

},{"../utils/common":38}],48:[function(require,module,exports){
'use strict';

module.exports = {
  '2':    'need dictionary',     /* Z_NEED_DICT       2  */
  '1':    'stream end',          /* Z_STREAM_END      1  */
  '0':    '',                    /* Z_OK              0  */
  '-1':   'file error',          /* Z_ERRNO         (-1) */
  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */
  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */
  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */
  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */
  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */
};

},{}],49:[function(require,module,exports){
'use strict';


var utils = require('../utils/common');

/* Public constants ==========================================================*/
/* ===========================================================================*/


//var Z_FILTERED          = 1;
//var Z_HUFFMAN_ONLY      = 2;
//var Z_RLE               = 3;
var Z_FIXED               = 4;
//var Z_DEFAULT_STRATEGY  = 0;

/* Possible values of the data_type field (though see inflate()) */
var Z_BINARY              = 0;
var Z_TEXT                = 1;
//var Z_ASCII             = 1; // = Z_TEXT
var Z_UNKNOWN             = 2;

/*============================================================================*/


function zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }

// From zutil.h

var STORED_BLOCK = 0;
var STATIC_TREES = 1;
var DYN_TREES    = 2;
/* The three kinds of block type */

var MIN_MATCH    = 3;
var MAX_MATCH    = 258;
/* The minimum and maximum match lengths */

// From deflate.h
/* ===========================================================================
 * Internal compression state.
 */

var LENGTH_CODES  = 29;
/* number of length codes, not counting the special END_BLOCK code */

var LITERALS      = 256;
/* number of literal bytes 0..255 */

var L_CODES       = LITERALS + 1 + LENGTH_CODES;
/* number of Literal or Length codes, including the END_BLOCK code */

var D_CODES       = 30;
/* number of distance codes */

var BL_CODES      = 19;
/* number of codes used to transfer the bit lengths */

var HEAP_SIZE     = 2*L_CODES + 1;
/* maximum heap size */

var MAX_BITS      = 15;
/* All codes must not exceed MAX_BITS bits */

var Buf_size      = 16;
/* size of bit buffer in bi_buf */


/* ===========================================================================
 * Constants
 */

var MAX_BL_BITS = 7;
/* Bit length codes must not exceed MAX_BL_BITS bits */

var END_BLOCK   = 256;
/* end of block literal code */

var REP_3_6     = 16;
/* repeat previous bit length 3-6 times (2 bits of repeat count) */

var REPZ_3_10   = 17;
/* repeat a zero length 3-10 times  (3 bits of repeat count) */

var REPZ_11_138 = 18;
/* repeat a zero length 11-138 times  (7 bits of repeat count) */

var extra_lbits =   /* extra bits for each length code */
  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];

var extra_dbits =   /* extra bits for each distance code */
  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];

var extra_blbits =  /* extra bits for each bit length code */
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];

var bl_order =
  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];
/* The lengths of the bit length codes are sent in order of decreasing
 * probability, to avoid transmitting the lengths for unused bit length codes.
 */

/* ===========================================================================
 * Local data. These are initialized only once.
 */

// We pre-fill arrays with 0 to avoid uninitialized gaps

var DIST_CODE_LEN = 512; /* see definition of array dist_code below */

// !!!! Use flat array insdead of structure, Freq = i*2, Len = i*2+1
var static_ltree  = new Array((L_CODES+2) * 2);
zero(static_ltree);
/* The static literal tree. Since the bit lengths are imposed, there is no
 * need for the L_CODES extra codes used during heap construction. However
 * The codes 286 and 287 are needed to build a canonical tree (see _tr_init
 * below).
 */

var static_dtree  = new Array(D_CODES * 2);
zero(static_dtree);
/* The static distance tree. (Actually a trivial tree since all codes use
 * 5 bits.)
 */

var _dist_code    = new Array(DIST_CODE_LEN);
zero(_dist_code);
/* Distance codes. The first 256 values correspond to the distances
 * 3 .. 258, the last 256 values correspond to the top 8 bits of
 * the 15 bit distances.
 */

var _length_code  = new Array(MAX_MATCH-MIN_MATCH+1);
zero(_length_code);
/* length code for each normalized match length (0 == MIN_MATCH) */

var base_length   = new Array(LENGTH_CODES);
zero(base_length);
/* First normalized length for each code (0 = MIN_MATCH) */

var base_dist     = new Array(D_CODES);
zero(base_dist);
/* First normalized distance for each code (0 = distance of 1) */


var StaticTreeDesc = function (static_tree, extra_bits, extra_base, elems, max_length) {

  this.static_tree  = static_tree;  /* static tree or NULL */
  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */
  this.extra_base   = extra_base;   /* base index for extra_bits */
  this.elems        = elems;        /* max number of elements in the tree */
  this.max_length   = max_length;   /* max bit length for the codes */

  // show if `static_tree` has data or dummy - needed for monomorphic objects
  this.has_stree    = static_tree && static_tree.length;
};


var static_l_desc;
var static_d_desc;
var static_bl_desc;


var TreeDesc = function(dyn_tree, stat_desc) {
  this.dyn_tree = dyn_tree;     /* the dynamic tree */
  this.max_code = 0;            /* largest code with non zero frequency */
  this.stat_desc = stat_desc;   /* the corresponding static tree */
};



function d_code(dist) {
  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];
}


/* ===========================================================================
 * Output a short LSB first on the stream.
 * IN assertion: there is enough room in pendingBuf.
 */
function put_short (s, w) {
//    put_byte(s, (uch)((w) & 0xff));
//    put_byte(s, (uch)((ush)(w) >> 8));
  s.pending_buf[s.pending++] = (w) & 0xff;
  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;
}


/* ===========================================================================
 * Send a value on a given number of bits.
 * IN assertion: length <= 16 and value fits in length bits.
 */
function send_bits(s, value, length) {
  if (s.bi_valid > (Buf_size - length)) {
    s.bi_buf |= (value << s.bi_valid) & 0xffff;
    put_short(s, s.bi_buf);
    s.bi_buf = value >> (Buf_size - s.bi_valid);
    s.bi_valid += length - Buf_size;
  } else {
    s.bi_buf |= (value << s.bi_valid) & 0xffff;
    s.bi_valid += length;
  }
}


function send_code(s, c, tree) {
  send_bits(s, tree[c*2]/*.Code*/, tree[c*2 + 1]/*.Len*/);
}


/* ===========================================================================
 * Reverse the first len bits of a code, using straightforward code (a faster
 * method would use a table)
 * IN assertion: 1 <= len <= 15
 */
function bi_reverse(code, len) {
  var res = 0;
  do {
    res |= code & 1;
    code >>>= 1;
    res <<= 1;
  } while (--len > 0);
  return res >>> 1;
}


/* ===========================================================================
 * Flush the bit buffer, keeping at most 7 bits in it.
 */
function bi_flush(s) {
  if (s.bi_valid === 16) {
    put_short(s, s.bi_buf);
    s.bi_buf = 0;
    s.bi_valid = 0;

  } else if (s.bi_valid >= 8) {
    s.pending_buf[s.pending++] = s.bi_buf & 0xff;
    s.bi_buf >>= 8;
    s.bi_valid -= 8;
  }
}


/* ===========================================================================
 * Compute the optimal bit lengths for a tree and update the total bit length
 * for the current block.
 * IN assertion: the fields freq and dad are set, heap[heap_max] and
 *    above are the tree nodes sorted by increasing frequency.
 * OUT assertions: the field len is set to the optimal bit length, the
 *     array bl_count contains the frequencies for each bit length.
 *     The length opt_len is updated; static_len is also updated if stree is
 *     not null.
 */
function gen_bitlen(s, desc)
//    deflate_state *s;
//    tree_desc *desc;    /* the tree descriptor */
{
  var tree            = desc.dyn_tree;
  var max_code        = desc.max_code;
  var stree           = desc.stat_desc.static_tree;
  var has_stree       = desc.stat_desc.has_stree;
  var extra           = desc.stat_desc.extra_bits;
  var base            = desc.stat_desc.extra_base;
  var max_length      = desc.stat_desc.max_length;
  var h;              /* heap index */
  var n, m;           /* iterate over the tree elements */
  var bits;           /* bit length */
  var xbits;          /* extra bits */
  var f;              /* frequency */
  var overflow = 0;   /* number of elements with bit length too large */

  for (bits = 0; bits <= MAX_BITS; bits++) {
    s.bl_count[bits] = 0;
  }

  /* In a first pass, compute the optimal bit lengths (which may
   * overflow in the case of the bit length tree).
   */
  tree[s.heap[s.heap_max]*2 + 1]/*.Len*/ = 0; /* root of the heap */

  for (h = s.heap_max+1; h < HEAP_SIZE; h++) {
    n = s.heap[h];
    bits = tree[tree[n*2 +1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;
    if (bits > max_length) {
      bits = max_length;
      overflow++;
    }
    tree[n*2 + 1]/*.Len*/ = bits;
    /* We overwrite tree[n].Dad which is no longer needed */

    if (n > max_code) { continue; } /* not a leaf node */

    s.bl_count[bits]++;
    xbits = 0;
    if (n >= base) {
      xbits = extra[n-base];
    }
    f = tree[n * 2]/*.Freq*/;
    s.opt_len += f * (bits + xbits);
    if (has_stree) {
      s.static_len += f * (stree[n*2 + 1]/*.Len*/ + xbits);
    }
  }
  if (overflow === 0) { return; }

  // Trace((stderr,"\nbit length overflow\n"));
  /* This happens for example on obj2 and pic of the Calgary corpus */

  /* Find the first bit length which could increase: */
  do {
    bits = max_length-1;
    while (s.bl_count[bits] === 0) { bits--; }
    s.bl_count[bits]--;      /* move one leaf down the tree */
    s.bl_count[bits+1] += 2; /* move one overflow item as its brother */
    s.bl_count[max_length]--;
    /* The brother of the overflow item also moves one step up,
     * but this does not affect bl_count[max_length]
     */
    overflow -= 2;
  } while (overflow > 0);

  /* Now recompute all bit lengths, scanning in increasing frequency.
   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all
   * lengths instead of fixing only the wrong ones. This idea is taken
   * from 'ar' written by Haruhiko Okumura.)
   */
  for (bits = max_length; bits !== 0; bits--) {
    n = s.bl_count[bits];
    while (n !== 0) {
      m = s.heap[--h];
      if (m > max_code) { continue; }
      if (tree[m*2 + 1]/*.Len*/ !== bits) {
        // Trace((stderr,"code %d bits %d->%d\n", m, tree[m].Len, bits));
        s.opt_len += (bits - tree[m*2 + 1]/*.Len*/)*tree[m*2]/*.Freq*/;
        tree[m*2 + 1]/*.Len*/ = bits;
      }
      n--;
    }
  }
}


/* ===========================================================================
 * Generate the codes for a given tree and bit counts (which need not be
 * optimal).
 * IN assertion: the array bl_count contains the bit length statistics for
 * the given tree and the field len is set for all tree elements.
 * OUT assertion: the field code is set for all tree elements of non
 *     zero code length.
 */
function gen_codes(tree, max_code, bl_count)
//    ct_data *tree;             /* the tree to decorate */
//    int max_code;              /* largest code with non zero frequency */
//    ushf *bl_count;            /* number of codes at each bit length */
{
  var next_code = new Array(MAX_BITS+1); /* next code value for each bit length */
  var code = 0;              /* running code value */
  var bits;                  /* bit index */
  var n;                     /* code index */

  /* The distribution counts are first used to generate the code values
   * without bit reversal.
   */
  for (bits = 1; bits <= MAX_BITS; bits++) {
    next_code[bits] = code = (code + bl_count[bits-1]) << 1;
  }
  /* Check that the bit counts in bl_count are consistent. The last code
   * must be all ones.
   */
  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,
  //        "inconsistent bit counts");
  //Tracev((stderr,"\ngen_codes: max_code %d ", max_code));

  for (n = 0;  n <= max_code; n++) {
    var len = tree[n*2 + 1]/*.Len*/;
    if (len === 0) { continue; }
    /* Now reverse the bits */
    tree[n*2]/*.Code*/ = bi_reverse(next_code[len]++, len);

    //Tracecv(tree != static_ltree, (stderr,"\nn %3d %c l %2d c %4x (%x) ",
    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));
  }
}


/* ===========================================================================
 * Initialize the various 'constant' tables.
 */
function tr_static_init() {
  var n;        /* iterates over tree elements */
  var bits;     /* bit counter */
  var length;   /* length value */
  var code;     /* code value */
  var dist;     /* distance index */
  var bl_count = new Array(MAX_BITS+1);
  /* number of codes at each bit length for an optimal tree */

  // do check in _tr_init()
  //if (static_init_done) return;

  /* For some embedded targets, global variables are not initialized: */
/*#ifdef NO_INIT_GLOBAL_POINTERS
  static_l_desc.static_tree = static_ltree;
  static_l_desc.extra_bits = extra_lbits;
  static_d_desc.static_tree = static_dtree;
  static_d_desc.extra_bits = extra_dbits;
  static_bl_desc.extra_bits = extra_blbits;
#endif*/

  /* Initialize the mapping length (0..255) -> length code (0..28) */
  length = 0;
  for (code = 0; code < LENGTH_CODES-1; code++) {
    base_length[code] = length;
    for (n = 0; n < (1<<extra_lbits[code]); n++) {
      _length_code[length++] = code;
    }
  }
  //Assert (length == 256, "tr_static_init: length != 256");
  /* Note that the length 255 (match length 258) can be represented
   * in two different ways: code 284 + 5 bits or code 285, so we
   * overwrite length_code[255] to use the best encoding:
   */
  _length_code[length-1] = code;

  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */
  dist = 0;
  for (code = 0 ; code < 16; code++) {
    base_dist[code] = dist;
    for (n = 0; n < (1<<extra_dbits[code]); n++) {
      _dist_code[dist++] = code;
    }
  }
  //Assert (dist == 256, "tr_static_init: dist != 256");
  dist >>= 7; /* from now on, all distances are divided by 128 */
  for (; code < D_CODES; code++) {
    base_dist[code] = dist << 7;
    for (n = 0; n < (1<<(extra_dbits[code]-7)); n++) {
      _dist_code[256 + dist++] = code;
    }
  }
  //Assert (dist == 256, "tr_static_init: 256+dist != 512");

  /* Construct the codes of the static literal tree */
  for (bits = 0; bits <= MAX_BITS; bits++) {
    bl_count[bits] = 0;
  }

  n = 0;
  while (n <= 143) {
    static_ltree[n*2 + 1]/*.Len*/ = 8;
    n++;
    bl_count[8]++;
  }
  while (n <= 255) {
    static_ltree[n*2 + 1]/*.Len*/ = 9;
    n++;
    bl_count[9]++;
  }
  while (n <= 279) {
    static_ltree[n*2 + 1]/*.Len*/ = 7;
    n++;
    bl_count[7]++;
  }
  while (n <= 287) {
    static_ltree[n*2 + 1]/*.Len*/ = 8;
    n++;
    bl_count[8]++;
  }
  /* Codes 286 and 287 do not exist, but we must include them in the
   * tree construction to get a canonical Huffman tree (longest code
   * all ones)
   */
  gen_codes(static_ltree, L_CODES+1, bl_count);

  /* The static distance tree is trivial: */
  for (n = 0; n < D_CODES; n++) {
    static_dtree[n*2 + 1]/*.Len*/ = 5;
    static_dtree[n*2]/*.Code*/ = bi_reverse(n, 5);
  }

  // Now data ready and we can init static trees
  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS+1, L_CODES, MAX_BITS);
  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);
  static_bl_desc =new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);

  //static_init_done = true;
}


/* ===========================================================================
 * Initialize a new block.
 */
function init_block(s) {
  var n; /* iterates over tree elements */

  /* Initialize the trees. */
  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n*2]/*.Freq*/ = 0; }
  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n*2]/*.Freq*/ = 0; }
  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n*2]/*.Freq*/ = 0; }

  s.dyn_ltree[END_BLOCK*2]/*.Freq*/ = 1;
  s.opt_len = s.static_len = 0;
  s.last_lit = s.matches = 0;
}


/* ===========================================================================
 * Flush the bit buffer and align the output on a byte boundary
 */
function bi_windup(s)
{
  if (s.bi_valid > 8) {
    put_short(s, s.bi_buf);
  } else if (s.bi_valid > 0) {
    //put_byte(s, (Byte)s->bi_buf);
    s.pending_buf[s.pending++] = s.bi_buf;
  }
  s.bi_buf = 0;
  s.bi_valid = 0;
}

/* ===========================================================================
 * Copy a stored block, storing first the length and its
 * one's complement if requested.
 */
function copy_block(s, buf, len, header)
//DeflateState *s;
//charf    *buf;    /* the input data */
//unsigned len;     /* its length */
//int      header;  /* true if block header must be written */
{
  bi_windup(s);        /* align on byte boundary */

  if (header) {
    put_short(s, len);
    put_short(s, ~len);
  }
//  while (len--) {
//    put_byte(s, *buf++);
//  }
  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);
  s.pending += len;
}

/* ===========================================================================
 * Compares to subtrees, using the tree depth as tie breaker when
 * the subtrees have equal frequency. This minimizes the worst case length.
 */
function smaller(tree, n, m, depth) {
  var _n2 = n*2;
  var _m2 = m*2;
  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||
         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));
}

/* ===========================================================================
 * Restore the heap property by moving down the tree starting at node k,
 * exchanging a node with the smallest of its two sons if necessary, stopping
 * when the heap property is re-established (each father smaller than its
 * two sons).
 */
function pqdownheap(s, tree, k)
//    deflate_state *s;
//    ct_data *tree;  /* the tree to restore */
//    int k;               /* node to move down */
{
  var v = s.heap[k];
  var j = k << 1;  /* left son of k */
  while (j <= s.heap_len) {
    /* Set j to the smallest of the two sons: */
    if (j < s.heap_len &&
      smaller(tree, s.heap[j+1], s.heap[j], s.depth)) {
      j++;
    }
    /* Exit if v is smaller than both sons */
    if (smaller(tree, v, s.heap[j], s.depth)) { break; }

    /* Exchange v with the smallest son */
    s.heap[k] = s.heap[j];
    k = j;

    /* And continue down the tree, setting j to the left son of k */
    j <<= 1;
  }
  s.heap[k] = v;
}


// inlined manually
// var SMALLEST = 1;

/* ===========================================================================
 * Send the block data compressed using the given Huffman trees
 */
function compress_block(s, ltree, dtree)
//    deflate_state *s;
//    const ct_data *ltree; /* literal tree */
//    const ct_data *dtree; /* distance tree */
{
  var dist;           /* distance of matched string */
  var lc;             /* match length or unmatched char (if dist == 0) */
  var lx = 0;         /* running index in l_buf */
  var code;           /* the code to send */
  var extra;          /* number of extra bits to send */

  if (s.last_lit !== 0) {
    do {
      dist = (s.pending_buf[s.d_buf + lx*2] << 8) | (s.pending_buf[s.d_buf + lx*2 + 1]);
      lc = s.pending_buf[s.l_buf + lx];
      lx++;

      if (dist === 0) {
        send_code(s, lc, ltree); /* send a literal byte */
        //Tracecv(isgraph(lc), (stderr," '%c' ", lc));
      } else {
        /* Here, lc is the match length - MIN_MATCH */
        code = _length_code[lc];
        send_code(s, code+LITERALS+1, ltree); /* send the length code */
        extra = extra_lbits[code];
        if (extra !== 0) {
          lc -= base_length[code];
          send_bits(s, lc, extra);       /* send the extra length bits */
        }
        dist--; /* dist is now the match distance - 1 */
        code = d_code(dist);
        //Assert (code < D_CODES, "bad d_code");

        send_code(s, code, dtree);       /* send the distance code */
        extra = extra_dbits[code];
        if (extra !== 0) {
          dist -= base_dist[code];
          send_bits(s, dist, extra);   /* send the extra distance bits */
        }
      } /* literal or match pair ? */

      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */
      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,
      //       "pendingBuf overflow");

    } while (lx < s.last_lit);
  }

  send_code(s, END_BLOCK, ltree);
}


/* ===========================================================================
 * Construct one Huffman tree and assigns the code bit strings and lengths.
 * Update the total bit length for the current block.
 * IN assertion: the field freq is set for all tree elements.
 * OUT assertions: the fields len and code are set to the optimal bit length
 *     and corresponding code. The length opt_len is updated; static_len is
 *     also updated if stree is not null. The field max_code is set.
 */
function build_tree(s, desc)
//    deflate_state *s;
//    tree_desc *desc; /* the tree descriptor */
{
  var tree     = desc.dyn_tree;
  var stree    = desc.stat_desc.static_tree;
  var has_stree = desc.stat_desc.has_stree;
  var elems    = desc.stat_desc.elems;
  var n, m;          /* iterate over heap elements */
  var max_code = -1; /* largest code with non zero frequency */
  var node;          /* new node being created */

  /* Construct the initial heap, with least frequent element in
   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].
   * heap[0] is not used.
   */
  s.heap_len = 0;
  s.heap_max = HEAP_SIZE;

  for (n = 0; n < elems; n++) {
    if (tree[n * 2]/*.Freq*/ !== 0) {
      s.heap[++s.heap_len] = max_code = n;
      s.depth[n] = 0;

    } else {
      tree[n*2 + 1]/*.Len*/ = 0;
    }
  }

  /* The pkzip format requires that at least one distance code exists,
   * and that at least one bit should be sent even if there is only one
   * possible code. So to avoid special checks later on we force at least
   * two codes of non zero frequency.
   */
  while (s.heap_len < 2) {
    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);
    tree[node * 2]/*.Freq*/ = 1;
    s.depth[node] = 0;
    s.opt_len--;

    if (has_stree) {
      s.static_len -= stree[node*2 + 1]/*.Len*/;
    }
    /* node is 0 or 1 so it does not have extra bits */
  }
  desc.max_code = max_code;

  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,
   * establish sub-heaps of increasing lengths:
   */
  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }

  /* Construct the Huffman tree by repeatedly combining the least two
   * frequent nodes.
   */
  node = elems;              /* next internal node of the tree */
  do {
    //pqremove(s, tree, n);  /* n = node of least frequency */
    /*** pqremove ***/
    n = s.heap[1/*SMALLEST*/];
    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];
    pqdownheap(s, tree, 1/*SMALLEST*/);
    /***/

    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */

    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */
    s.heap[--s.heap_max] = m;

    /* Create a new node father of n and m */
    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;
    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;
    tree[n*2 + 1]/*.Dad*/ = tree[m*2 + 1]/*.Dad*/ = node;

    /* and insert the new node in the heap */
    s.heap[1/*SMALLEST*/] = node++;
    pqdownheap(s, tree, 1/*SMALLEST*/);

  } while (s.heap_len >= 2);

  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];

  /* At this point, the fields freq and dad are set. We can now
   * generate the bit lengths.
   */
  gen_bitlen(s, desc);

  /* The field len is now set, we can generate the bit codes */
  gen_codes(tree, max_code, s.bl_count);
}


/* ===========================================================================
 * Scan a literal or distance tree to determine the frequencies of the codes
 * in the bit length tree.
 */
function scan_tree(s, tree, max_code)
//    deflate_state *s;
//    ct_data *tree;   /* the tree to be scanned */
//    int max_code;    /* and its largest code of non zero frequency */
{
  var n;                     /* iterates over all tree elements */
  var prevlen = -1;          /* last emitted length */
  var curlen;                /* length of current code */

  var nextlen = tree[0*2 + 1]/*.Len*/; /* length of next code */

  var count = 0;             /* repeat count of the current code */
  var max_count = 7;         /* max repeat count */
  var min_count = 4;         /* min repeat count */

  if (nextlen === 0) {
    max_count = 138;
    min_count = 3;
  }
  tree[(max_code+1)*2 + 1]/*.Len*/ = 0xffff; /* guard */

  for (n = 0; n <= max_code; n++) {
    curlen = nextlen;
    nextlen = tree[(n+1)*2 + 1]/*.Len*/;

    if (++count < max_count && curlen === nextlen) {
      continue;

    } else if (count < min_count) {
      s.bl_tree[curlen * 2]/*.Freq*/ += count;

    } else if (curlen !== 0) {

      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }
      s.bl_tree[REP_3_6*2]/*.Freq*/++;

    } else if (count <= 10) {
      s.bl_tree[REPZ_3_10*2]/*.Freq*/++;

    } else {
      s.bl_tree[REPZ_11_138*2]/*.Freq*/++;
    }

    count = 0;
    prevlen = curlen;

    if (nextlen === 0) {
      max_count = 138;
      min_count = 3;

    } else if (curlen === nextlen) {
      max_count = 6;
      min_count = 3;

    } else {
      max_count = 7;
      min_count = 4;
    }
  }
}


/* ===========================================================================
 * Send a literal or distance tree in compressed form, using the codes in
 * bl_tree.
 */
function send_tree(s, tree, max_code)
//    deflate_state *s;
//    ct_data *tree; /* the tree to be scanned */
//    int max_code;       /* and its largest code of non zero frequency */
{
  var n;                     /* iterates over all tree elements */
  var prevlen = -1;          /* last emitted length */
  var curlen;                /* length of current code */

  var nextlen = tree[0*2 + 1]/*.Len*/; /* length of next code */

  var count = 0;             /* repeat count of the current code */
  var max_count = 7;         /* max repeat count */
  var min_count = 4;         /* min repeat count */

  /* tree[max_code+1].Len = -1; */  /* guard already set */
  if (nextlen === 0) {
    max_count = 138;
    min_count = 3;
  }

  for (n = 0; n <= max_code; n++) {
    curlen = nextlen;
    nextlen = tree[(n+1)*2 + 1]/*.Len*/;

    if (++count < max_count && curlen === nextlen) {
      continue;

    } else if (count < min_count) {
      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);

    } else if (curlen !== 0) {
      if (curlen !== prevlen) {
        send_code(s, curlen, s.bl_tree);
        count--;
      }
      //Assert(count >= 3 && count <= 6, " 3_6?");
      send_code(s, REP_3_6, s.bl_tree);
      send_bits(s, count-3, 2);

    } else if (count <= 10) {
      send_code(s, REPZ_3_10, s.bl_tree);
      send_bits(s, count-3, 3);

    } else {
      send_code(s, REPZ_11_138, s.bl_tree);
      send_bits(s, count-11, 7);
    }

    count = 0;
    prevlen = curlen;
    if (nextlen === 0) {
      max_count = 138;
      min_count = 3;

    } else if (curlen === nextlen) {
      max_count = 6;
      min_count = 3;

    } else {
      max_count = 7;
      min_count = 4;
    }
  }
}


/* ===========================================================================
 * Construct the Huffman tree for the bit lengths and return the index in
 * bl_order of the last bit length code to send.
 */
function build_bl_tree(s) {
  var max_blindex;  /* index of last bit length code of non zero freq */

  /* Determine the bit length frequencies for literal and distance trees */
  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);
  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);

  /* Build the bit length tree: */
  build_tree(s, s.bl_desc);
  /* opt_len now includes the length of the tree representations, except
   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.
   */

  /* Determine the number of bit length codes to send. The pkzip format
   * requires that at least 4 bit length codes be sent. (appnote.txt says
   * 3 but the actual value used is 4.)
   */
  for (max_blindex = BL_CODES-1; max_blindex >= 3; max_blindex--) {
    if (s.bl_tree[bl_order[max_blindex]*2 + 1]/*.Len*/ !== 0) {
      break;
    }
  }
  /* Update opt_len to include the bit length tree and counts */
  s.opt_len += 3*(max_blindex+1) + 5+5+4;
  //Tracev((stderr, "\ndyn trees: dyn %ld, stat %ld",
  //        s->opt_len, s->static_len));

  return max_blindex;
}


/* ===========================================================================
 * Send the header for a block using dynamic Huffman trees: the counts, the
 * lengths of the bit length codes, the literal tree and the distance tree.
 * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.
 */
function send_all_trees(s, lcodes, dcodes, blcodes)
//    deflate_state *s;
//    int lcodes, dcodes, blcodes; /* number of codes for each tree */
{
  var rank;                    /* index in bl_order */

  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, "not enough codes");
  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,
  //        "too many codes");
  //Tracev((stderr, "\nbl counts: "));
  send_bits(s, lcodes-257, 5); /* not +255 as stated in appnote.txt */
  send_bits(s, dcodes-1,   5);
  send_bits(s, blcodes-4,  4); /* not -3 as stated in appnote.txt */
  for (rank = 0; rank < blcodes; rank++) {
    //Tracev((stderr, "\nbl code %2d ", bl_order[rank]));
    send_bits(s, s.bl_tree[bl_order[rank]*2 + 1]/*.Len*/, 3);
  }
  //Tracev((stderr, "\nbl tree: sent %ld", s->bits_sent));

  send_tree(s, s.dyn_ltree, lcodes-1); /* literal tree */
  //Tracev((stderr, "\nlit tree: sent %ld", s->bits_sent));

  send_tree(s, s.dyn_dtree, dcodes-1); /* distance tree */
  //Tracev((stderr, "\ndist tree: sent %ld", s->bits_sent));
}


/* ===========================================================================
 * Check if the data type is TEXT or BINARY, using the following algorithm:
 * - TEXT if the two conditions below are satisfied:
 *    a) There are no non-portable control characters belonging to the
 *       "black list" (0..6, 14..25, 28..31).
 *    b) There is at least one printable character belonging to the
 *       "white list" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).
 * - BINARY otherwise.
 * - The following partially-portable control characters form a
 *   "gray list" that is ignored in this detection algorithm:
 *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).
 * IN assertion: the fields Freq of dyn_ltree are set.
 */
function detect_data_type(s) {
  /* black_mask is the bit mask of black-listed bytes
   * set bits 0..6, 14..25, and 28..31
   * 0xf3ffc07f = binary 11110011111111111100000001111111
   */
  var black_mask = 0xf3ffc07f;
  var n;

  /* Check for non-textual ("black-listed") bytes. */
  for (n = 0; n <= 31; n++, black_mask >>>= 1) {
    if ((black_mask & 1) && (s.dyn_ltree[n*2]/*.Freq*/ !== 0)) {
      return Z_BINARY;
    }
  }

  /* Check for textual ("white-listed") bytes. */
  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||
      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {
    return Z_TEXT;
  }
  for (n = 32; n < LITERALS; n++) {
    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {
      return Z_TEXT;
    }
  }

  /* There are no "black-listed" or "white-listed" bytes:
   * this stream either is empty or has tolerated ("gray-listed") bytes only.
   */
  return Z_BINARY;
}


var static_init_done = false;

/* ===========================================================================
 * Initialize the tree data structures for a new zlib stream.
 */
function _tr_init(s)
{

  if (!static_init_done) {
    tr_static_init();
    static_init_done = true;
  }

  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);
  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);
  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);

  s.bi_buf = 0;
  s.bi_valid = 0;

  /* Initialize the first block of the first file: */
  init_block(s);
}


/* ===========================================================================
 * Send a stored block
 */
function _tr_stored_block(s, buf, stored_len, last)
//DeflateState *s;
//charf *buf;       /* input block */
//ulg stored_len;   /* length of input block */
//int last;         /* one if this is the last block for a file */
{
  send_bits(s, (STORED_BLOCK<<1)+(last ? 1 : 0), 3);    /* send block type */
  copy_block(s, buf, stored_len, true); /* with header */
}


/* ===========================================================================
 * Send one empty static block to give enough lookahead for inflate.
 * This takes 10 bits, of which 7 may remain in the bit buffer.
 */
function _tr_align(s) {
  send_bits(s, STATIC_TREES<<1, 3);
  send_code(s, END_BLOCK, static_ltree);
  bi_flush(s);
}


/* ===========================================================================
 * Determine the best encoding for the current block: dynamic trees, static
 * trees or store, and output the encoded block to the zip file.
 */
function _tr_flush_block(s, buf, stored_len, last)
//DeflateState *s;
//charf *buf;       /* input block, or NULL if too old */
//ulg stored_len;   /* length of input block */
//int last;         /* one if this is the last block for a file */
{
  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */
  var max_blindex = 0;        /* index of last bit length code of non zero freq */

  /* Build the Huffman trees unless a stored block is forced */
  if (s.level > 0) {

    /* Check if the file is binary or text */
    if (s.strm.data_type === Z_UNKNOWN) {
      s.strm.data_type = detect_data_type(s);
    }

    /* Construct the literal and distance trees */
    build_tree(s, s.l_desc);
    // Tracev((stderr, "\nlit data: dyn %ld, stat %ld", s->opt_len,
    //        s->static_len));

    build_tree(s, s.d_desc);
    // Tracev((stderr, "\ndist data: dyn %ld, stat %ld", s->opt_len,
    //        s->static_len));
    /* At this point, opt_len and static_len are the total bit lengths of
     * the compressed block data, excluding the tree representations.
     */

    /* Build the bit length tree for the above two trees, and get the index
     * in bl_order of the last bit length code to send.
     */
    max_blindex = build_bl_tree(s);

    /* Determine the best encoding. Compute the block lengths in bytes. */
    opt_lenb = (s.opt_len+3+7) >>> 3;
    static_lenb = (s.static_len+3+7) >>> 3;

    // Tracev((stderr, "\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u ",
    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,
    //        s->last_lit));

    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }

  } else {
    // Assert(buf != (char*)0, "lost buf");
    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */
  }

  if ((stored_len+4 <= opt_lenb) && (buf !== -1)) {
    /* 4: two words for the lengths */

    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.
     * Otherwise we can't have processed more than WSIZE input bytes since
     * the last block flush, because compression would have been
     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to
     * transform a block into a stored block.
     */
    _tr_stored_block(s, buf, stored_len, last);

  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {

    send_bits(s, (STATIC_TREES<<1) + (last ? 1 : 0), 3);
    compress_block(s, static_ltree, static_dtree);

  } else {
    send_bits(s, (DYN_TREES<<1) + (last ? 1 : 0), 3);
    send_all_trees(s, s.l_desc.max_code+1, s.d_desc.max_code+1, max_blindex+1);
    compress_block(s, s.dyn_ltree, s.dyn_dtree);
  }
  // Assert (s->compressed_len == s->bits_sent, "bad compressed size");
  /* The above check is made mod 2^32, for files larger than 512 MB
   * and uLong implemented on 32 bits.
   */
  init_block(s);

  if (last) {
    bi_windup(s);
  }
  // Tracev((stderr,"\ncomprlen %lu(%lu) ", s->compressed_len>>3,
  //       s->compressed_len-7*last));
}

/* ===========================================================================
 * Save the match info and tally the frequency counts. Return true if
 * the current block must be flushed.
 */
function _tr_tally(s, dist, lc)
//    deflate_state *s;
//    unsigned dist;  /* distance of matched string */
//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */
{
  //var out_length, in_length, dcode;

  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;
  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;

  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;
  s.last_lit++;

  if (dist === 0) {
    /* lc is the unmatched char */
    s.dyn_ltree[lc*2]/*.Freq*/++;
  } else {
    s.matches++;
    /* Here, lc is the match length - MIN_MATCH */
    dist--;             /* dist = match distance - 1 */
    //Assert((ush)dist < (ush)MAX_DIST(s) &&
    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&
    //       (ush)d_code(dist) < (ush)D_CODES,  "_tr_tally: bad match");

    s.dyn_ltree[(_length_code[lc]+LITERALS+1) * 2]/*.Freq*/++;
    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;
  }

// (!) This block is disabled in zlib defailts,
// don't enable it for binary compatibility

//#ifdef TRUNCATE_BLOCK
//  /* Try to guess if it is profitable to stop the current block here */
//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {
//    /* Compute an upper bound for the compressed length */
//    out_length = s.last_lit*8;
//    in_length = s.strstart - s.block_start;
//
//    for (dcode = 0; dcode < D_CODES; dcode++) {
//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);
//    }
//    out_length >>>= 3;
//    //Tracev((stderr,"\nlast_lit %u, in %ld, out ~%ld(%ld%%) ",
//    //       s->last_lit, in_length, out_length,
//    //       100L - out_length*100L/in_length));
//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {
//      return true;
//    }
//  }
//#endif

  return (s.last_lit === s.lit_bufsize-1);
  /* We avoid equality with lit_bufsize because of wraparound at 64K
   * on 16 bit machines and because stored blocks are restricted to
   * 64K-1 bytes.
   */
}

exports._tr_init  = _tr_init;
exports._tr_stored_block = _tr_stored_block;
exports._tr_flush_block  = _tr_flush_block;
exports._tr_tally = _tr_tally;
exports._tr_align = _tr_align;

},{"../utils/common":38}],50:[function(require,module,exports){
'use strict';


function ZStream() {
  /* next input byte */
  this.input = null; // JS specific, because we have no pointers
  this.next_in = 0;
  /* number of bytes available at input */
  this.avail_in = 0;
  /* total number of input bytes read so far */
  this.total_in = 0;
  /* next output byte should be put there */
  this.output = null; // JS specific, because we have no pointers
  this.next_out = 0;
  /* remaining free space at output */
  this.avail_out = 0;
  /* total number of bytes output so far */
  this.total_out = 0;
  /* last error message, NULL if no error */
  this.msg = ''/*Z_NULL*/;
  /* not visible by applications */
  this.state = null;
  /* best guess about the data type: binary or text */
  this.data_type = 2/*Z_UNKNOWN*/;
  /* adler32 value of the uncompressed data */
  this.adler = 0;
}

module.exports = ZStream;

},{}],51:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],52:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],53:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":52,"_process":51,"inherits":11}],54:[function(require,module,exports){
var zip = require('./zip');

module.exports = function(gj, options) {
    var content = zip(gj, options);
    location.href = 'data:application/zip;base64,' + content;
};

},{"./zip":63}],55:[function(require,module,exports){
module.exports.enlarge = function enlargeExtent(extent, pt) {
    if (pt[0] < extent.xmin) extent.xmin = pt[0];
    if (pt[0] > extent.xmax) extent.xmax = pt[0];
    if (pt[1] < extent.ymin) extent.ymin = pt[1];
    if (pt[1] > extent.ymax) extent.ymax = pt[1];
    return extent;
};

module.exports.enlargeExtent = function enlargeExtent(extent, ext) {
    if (ext.xmax > extent.xmax) extent.xmax = ext.xmax;
    if (ext.xmin < extent.xmin) extent.xmin = ext.xmin;
    if (ext.ymax > extent.ymax) extent.ymax = ext.ymax;
    if (ext.ymin < extent.ymin) extent.ymin = ext.ymin;
    return extent;
};

module.exports.blank = function() {
    return {
        xmin: Number.MAX_VALUE,
        ymin: Number.MAX_VALUE,
        xmax: -Number.MAX_VALUE,
        ymax: -Number.MAX_VALUE
    };
};

},{}],56:[function(require,module,exports){
var types = require('./types').jstypes;

module.exports.geojson = geojson;
module.exports.obj = obj;

function geojson(features) {
    var fields = {};
    features.forEach(collect);
    function collect(f) { inherit(fields, f.properties); }
    return obj(fields);
}

function inherit(a, b) {
    for (var i in b) { a[i] = b[i]; }
    return a;
}

function obj(_) {
    var fields = {}, o = [];
    for (var p in _) fields[p] = typeof _[p];
    for (var n in fields) {
        o.push({
            name: n,
            type: types[fields[n]]
        });
    }
    return o;
}

},{"./types":61}],57:[function(require,module,exports){
module.exports.point = justType('Point', 'POINT');
module.exports.line = justType('LineString', 'POLYLINE');
module.exports.polygon = justType('Polygon', 'POLYGON');

function justType(type, TYPE) {
    return function(gj) {
        var oftype = gj.features.filter(isType(type));
        return {
            geometries: oftype.map(justCoords),
            properties: oftype.map(justProps),
            type: TYPE
        };
    };
}

function justCoords(t) {
    if (t.geometry.coordinates[0] !== undefined &&
        t.geometry.coordinates[0][0] !== undefined &&
        t.geometry.coordinates[0][0][0] !== undefined) {
        return t.geometry.coordinates[0];
    } else {
        return t.geometry.coordinates;
    }
}

function justProps(t) {
    return t.properties;
}

function isType(t) {
    return function(f) { return f.geometry.type === t; };
}

},{}],58:[function(require,module,exports){
var ext = require('./extent');

module.exports.write = function writePoints(coordinates, extent, shpView, shxView) {

    var contentLength = 28, // 8 header, 20 content
        fileLength = 100,
        shpI = 0,
        shxI = 0;

    coordinates.forEach(function writePoint(coords, i) {
        // HEADER
        // 4 record number
        // 4 content length in 16-bit words (20/2)
        shpView.setInt32(shpI, i);
        shpView.setInt32(shpI + 4, 10);

        // record
        // (8 + 8) + 4 = 20 content length
        shpView.setInt32(shpI + 8, 1, true); // POINT=1
        shpView.setFloat64(shpI + 12, coords[0], true); // X
        shpView.setFloat64(shpI + 20, coords[1], true); // Y

        // index
        shxView.setInt32(shxI, fileLength / 2); // length in 16-bit words
        shxView.setInt32(shxI + 4, 10);

        shxI += 8;
        shpI += contentLength;
        fileLength += contentLength;
    });
};

module.exports.extent = function(coordinates) {
    return coordinates.reduce(function(extent, coords) {
        return ext.enlarge(extent, coords);
    }, ext.blank());
};

module.exports.parts = function parts(geometries, TYPE) {
    return geometries.length;
};

module.exports.shxLength = function(coordinates) {
    return coordinates.length * 8;
};

module.exports.shpLength = function(coordinates) {
    return coordinates.length * 28;
};

},{"./extent":55}],59:[function(require,module,exports){
var ext = require('./extent'),
    types = require('./types');

module.exports.write = function writePoints(geometries, extent, shpView, shxView, TYPE) {

    var shpI = 0,
        shxI = 0,
        shxOffset = 100;

    geometries.forEach(writePolyLine);

    function writePolyLine(coordinates, i) {

        var flattened = justCoords(coordinates),
            noParts = parts([coordinates], TYPE),
            contentLength = (flattened.length * 16) + 48 + (noParts - 1) * 4;

        var featureExtent = flattened.reduce(function(extent, c) {
            return ext.enlarge(extent, c);
        }, ext.blank());

        // INDEX
        shxView.setInt32(shxI, shxOffset / 2); // offset
        shxView.setInt32(shxI + 4, contentLength / 2); // offset length

        shxI += 8;
        shxOffset += contentLength + 8;

        shpView.setInt32(shpI, i + 1); // record number
        shpView.setInt32(shpI + 4, contentLength / 2); // length
        shpView.setInt32(shpI + 8, TYPE, true); // POLYLINE=3
        shpView.setFloat64(shpI + 12, featureExtent.xmin, true); // EXTENT
        shpView.setFloat64(shpI + 20, featureExtent.ymin, true);
        shpView.setFloat64(shpI + 28, featureExtent.xmax, true);
        shpView.setFloat64(shpI + 36, featureExtent.ymax, true);
        shpView.setInt32(shpI + 44, noParts, true);
        shpView.setInt32(shpI + 48, flattened.length, true); // POINTS
        shpView.setInt32(shpI + 52, 0, true); // The first part - index zero

        var onlyParts = coordinates.reduce(function (arr, coords) {
            if (Array.isArray(coords[0][0])) {
                arr = arr.concat(coords);
            } else {
                arr.push(coords);
            }
            return arr;
        }, []);
        for (var p = 1; p < noParts; p++) {
            shpView.setInt32( // set part index
                shpI + 52 + (p * 4),
                onlyParts.reduce(function (a, b, idx) {
                    return idx < p ? a + b.length : a;
                }, 0),
                true
            );
        }

        flattened.forEach(function writeLine(coords, i) {
            shpView.setFloat64(shpI + 56 + (i * 16) + (noParts - 1) * 4, coords[0], true); // X
            shpView.setFloat64(shpI + 56 + (i * 16) + (noParts - 1) * 4 + 8, coords[1], true); // Y
        });

        shpI += contentLength + 8;
    }
};

module.exports.shpLength = function(geometries) {
    return (geometries.length * 56) +
        // points
        (justCoords(geometries).length * 16);
};

module.exports.shxLength = function(geometries) {
    return geometries.length * 8;
};

module.exports.extent = function(coordinates) {
    return justCoords(coordinates).reduce(function(extent, c) {
        return ext.enlarge(extent, c);
    }, ext.blank());
};

function parts(geometries, TYPE) {
    var no = 1;
    if (TYPE === types.geometries.POLYGON || TYPE === types.geometries.POLYLINE)  {
        no = geometries.reduce(function (no, coords) {
            no += coords.length;
            if (Array.isArray(coords[0][0][0])) { // multi
                no += coords.reduce(function (no, rings) {
                    return no + rings.length - 1; // minus outer
                }, 0);
            }
            return no;
        }, 0);
    }
    return no;
}

module.exports.parts = parts;

function totalPoints(geometries) {
    var sum = 0;
    geometries.forEach(function(g) { sum += g.length; });
    return sum;
}

function justCoords(coords, l) {
    if (l === undefined) l = [];
    if (typeof coords[0][0] == 'object') {
        return coords.reduce(function(memo, c) {
            return memo.concat(justCoords(c));
        }, l);
    } else {
        return coords;
    }
}


},{"./extent":55,"./types":61}],60:[function(require,module,exports){
module.exports = 'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]';

},{}],61:[function(require,module,exports){
module.exports.geometries = {
    NULL: 0,
    POINT: 1,
    POLYLINE: 3,
    POLYGON: 5,
    MULTIPOINT: 8,
    POINTZ: 11,
    POLYLINEZ: 13,
    POLYGONZ: 15,
    MULTIPOINTZ: 18,
    POINTM: 21,
    POLYLINEM: 23,
    POLYGONM: 25,
    MULTIPOINTM: 28,
    MULTIPATCH: 31,
};

},{}],62:[function(require,module,exports){
var types = require('./types'),
    dbf = require('dbf'),
    prj = require('./prj'),
    ext = require('./extent'),
    getFields = require('./fields'),
    assert = require('assert'),
    pointWriter = require('./points'),
    polyWriter = require('./poly');

var writers = {
    1: pointWriter,
    5: polyWriter,
    3: polyWriter
};

var recordHeaderLength = 8;

module.exports = write;

// Low-level writing interface
function write(rows, geometry_type, geometries, callback) {

    var TYPE = types.geometries[geometry_type],
        writer = writers[TYPE],
        parts = writer.parts(geometries, TYPE),
        shpLength = 100 + (parts - geometries.length) * 4 + writer.shpLength(geometries),
        shxLength = 100 + writer.shxLength(geometries),
        shpBuffer = new ArrayBuffer(shpLength),
        shpView = new DataView(shpBuffer),
        shxBuffer = new ArrayBuffer(shxLength),
        shxView = new DataView(shxBuffer),
        extent = writer.extent(geometries);

    writeHeader(shpView, TYPE);
    writeHeader(shxView, TYPE);
    writeExtent(extent, shpView);
    writeExtent(extent, shxView);

    writer.write(geometries, extent,
        new DataView(shpBuffer, 100),
        new DataView(shxBuffer, 100),
        TYPE);

    shpView.setInt32(24, shpLength / 2);
    shxView.setInt32(24, (50 + geometries.length * 4));

    var dbfBuf = dbf.structure(rows);

    callback(null, {
        shp: shpView,
        shx: shxView,
        dbf: dbfBuf,
        prj: prj
    });
}

function writeHeader(view, TYPE) {
    view.setInt32(0, 9994);
    view.setInt32(28, 1000, true);
    view.setInt32(32, TYPE, true);
}

function writeExtent(extent, view) {
    view.setFloat64(36, extent.xmin, true);
    view.setFloat64(44, extent.ymin, true);
    view.setFloat64(52, extent.xmax, true);
    view.setFloat64(60, extent.ymax, true);
}

},{"./extent":55,"./fields":56,"./points":58,"./poly":59,"./prj":60,"./types":61,"assert":1,"dbf":5}],63:[function(require,module,exports){
(function (process){
var write = require('./write'),
    geojson = require('./geojson'),
    prj = require('./prj'),
    JSZip = require('jszip');

module.exports = function(gj, options) {

    var zip = new JSZip(),
        layers = zip.folder(options && options.folder ? options.folder : 'layers');

    [geojson.point(gj), geojson.line(gj), geojson.polygon(gj)]
        .forEach(function(l) {
        if (l.geometries.length) {
            write(
                // field definitions
                l.properties,
                // geometry type
                l.type,
                // geometries
                l.geometries,
                function(err, files) {
                    var fileName = options && options.types[l.type.toLowerCase()] ? options.types[l.type.toLowerCase()] : l.type;
                    layers.file(fileName + '.shp', files.shp.buffer, { binary: true });
                    layers.file(fileName + '.shx', files.shx.buffer, { binary: true });
                    layers.file(fileName + '.dbf', files.dbf.buffer, { binary: true });
                    layers.file(fileName + '.prj', prj);
                });
        }
    });

    var generateOptions = { compression:'STORE' };

    if (!process.browser) {
      generateOptions.type = 'nodebuffer';
    }

    return zip.generate(generateOptions);
};

}).call(this,require('_process'))
},{"./geojson":57,"./prj":60,"./write":62,"_process":51,"jszip":20}],64:[function(require,module,exports){
module.exports.download = require('./src/download')
module.exports.write = require('./src/write')
module.exports.zip = require('./src/zip')

},{"./src/download":54,"./src/write":62,"./src/zip":63}]},{},[64])(64)
});
(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.shp=e()}})(function(){var a=Math.log,n=Math.abs,r=Math.floor,o=Math.pow,d=String.fromCharCode,l=Math.min,p;return function(){function s(d,e,n){function t(o,i){if(!e[o]){if(!d[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[o]={exports:{}};d[o][0].call(a.exports,function(e){var a=d[o][1][e];return t(a||e)},a,a.exports,s,d,e,n)}return e[o].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)t(n[a]);return t}return s}()({1:[function(e,t){'use strict';var a=e("lie"),n=e("buffer").Buffer;t.exports=function(e){return new a(function(t,a){var r=e.slice(-3),s=new XMLHttpRequest;s.open("GET",e,!0),"prj"!==r&&"cpg"!==r&&(s.responseType="arraybuffer"),s.addEventListener("load",function(){return 399<s.status?"prj"===r||"cpg"===r?t(!1):a(new Error(s.status)):"prj"!==r&&"cpg"!==r?t(n.from(s.response)):t(s.response)},!1),s.send()})}},{buffer:7,lie:35}],2:[function(e,t){(function(a){'use strict';var n=e("./binaryajax-browser"),r=e("buffer").Buffer;t.exports=async function(e){if(!a.fetch)return n(e);var t=e.slice(-3).toLowerCase(),s="prj"===t||"cpg"===t;try{var i=await fetch(e);if(399<i.status)throw new Error(i.statusText);if(s)return i.text();var i=await i.arrayBuffer();return r.from(i)}catch(t){if(s)return!1;throw t}}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./binaryajax-browser":1,buffer:7}],3:[function(e,t){'use strict';function n(e){for(var t=0,a=1,n=e.length,r,s;a<n;)r=s||e[0],s=e[a],t+=(s[0]-r[0])*(s[1]+r[1]),a++;return 0<t}function r(e,t){return n(t)||!e.length?e.push([t]):e[e.length-1].push(t),e}function s(e){return e?function(t,a){return e.inverse([t.readDoubleLE(a),t.readDoubleLE(a+8)])}:function(e,t){return[e.readDoubleLE(t),e.readDoubleLE(t+8)]}}function i(e,t){return this instanceof i?void(this.buffer=e,this.shpFuncs(t),this.rows=this.getRows()):new i(e,t)}i.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}},i.prototype.parseZPoint=function(e){var t=this.parsePoint(e);return t.coordinates.push(e.readDoubleLE(16)),t},i.prototype.parsePointArray=function(e,t,a){for(var n=[],r=0;r<a;)n.push(this.parseCoord(e,t)),t+=16,r++;return n},i.prototype.parseZPointArray=function(e,t,a,n){for(var r=0;r<a;)n[r].push(e.readDoubleLE(t)),r++,t+=8;return n},i.prototype.parseArrayGroup=function(e,t,a,n,r){for(var s=[],i=0,o=0,d,l;i<n;)(i++,a+=4,d=o,o=i===n?r:e.readInt32LE(a),l=o-d,!!l)&&(s.push(this.parsePointArray(e,t,l)),t+=l<<4);return s},i.prototype.parseZArrayGroup=function(e,t,a,n){for(var r=0;r<a;)n[r]=this.parseZPointArray(e,t,n[r].length,n[r]),t+=n[r].length<<3,r++;return n},i.prototype.parseMultiPoint=function(e){var t={},a=this.parseCoord(e,0),n=this.parseCoord(e,16);t.bbox=[a[0],a[1],n[0],n[1]];var r=e.readInt32LE(32,!0),s=36;return 1===r?(t.type="Point",t.coordinates=this.parseCoord(e,s)):(t.type="MultiPoint",t.coordinates=this.parsePointArray(e,s,r)),t},i.prototype.parseZMultiPoint=function(e){var t=this.parseMultiPoint(e),a;if("Point"===t.type)return t.coordinates.push(e.readDoubleLE(72)),t;a=t.coordinates.length;var n=52+(a<<4);return t.coordinates=this.parseZPointArray(e,n,a,t.coordinates),t},i.prototype.parsePolyline=function(e){var t={},a=this.parseCoord(e,0),n=this.parseCoord(e,16);t.bbox=[a[0],a[1],n[0],n[1]];var r=e.readInt32LE(32),s=e.readInt32LE(36),i,o;return 1===r?(t.type="LineString",i=44,t.coordinates=this.parsePointArray(e,i,s)):(t.type="MultiLineString",i=40+(r<<2),o=40,t.coordinates=this.parseArrayGroup(e,i,o,r,s)),t},i.prototype.parseZPolyline=function(e){var t=this.parsePolyline(e),a=t.coordinates.length,n;if("LineString"===t.type)return n=60+(a<<4),t.coordinates=this.parseZPointArray(e,n,a,t.coordinates),t;var r=t.coordinates.reduce(function(e,t){return e+t.length},0);return n=56+(r<<4)+(a<<2),t.coordinates=this.parseZArrayGroup(e,n,a,t.coordinates),t},i.prototype.polyFuncs=function(e){return"LineString"===e.type?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=e.coordinates.reduce(r,[]),1===e.coordinates.length?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e))},i.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))},i.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};var o={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};i.prototype.shpFuncs=function(e){var t=this.getShpCode();if(20<t&&(t-=20),!(t in o))throw new Error("I don't know that shp type");this.parseFunc=this[o[t]],this.parseCoord=s(e)},i.prototype.getShpCode=function(){return this.parseHeader().shpCode},i.prototype.parseHeader=function(){var e=this.buffer.slice(0,100);return{length:e.readInt32BE(24),version:e.readInt32LE(28),shpCode:e.readInt32LE(32),bbox:[e.readDoubleLE(36),e.readDoubleLE(44),e.readDoubleLE(52),e.readDoubleLE(52)]}},i.prototype.getRows=function(){for(var e=100,t=this.buffer.byteLength,a=[],n;e<t;)n=this.getRow(e),e+=8,e+=n.len,n.type&&a.push(this.parseFunc(n.data));return a},i.prototype.getRow=function(e){var t=this.buffer.slice(e,e+12),a=t.readInt32BE(4)<<1,n=this.buffer.slice(e+12,e+a+8);return{id:t.readInt32BE(0),len:a,data:n,type:t.readInt32LE(8)}},t.exports=function(e,t){return new i(e,t).rows}},{}],4:[function(e,t){'use strict';var a=e("jszip");t.exports=function(e){var t=new a(e),n=t.file(/.+/),r={};return n.forEach(function(e){r[e.name]="shp"===e.name.slice(-3).toLowerCase()||"dbf"===e.name.slice(-3).toLowerCase()?e.asNodeBuffer():e.asText()}),r}},{jszip:20}],5:[function(e,t,a){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");-1===a&&(a=t);var n=a===t?0:4-a%4;return[a,n]}function r(e,t,a){return 3*(t+a)/4-a}function s(e){var t=n(e),a=t[0],s=t[1],o=new u(r(e,a,s)),d=0,l=0<s?a-4:a,p,m;for(m=0;m<l;m+=4)p=c[e.charCodeAt(m)]<<18|c[e.charCodeAt(m+1)]<<12|c[e.charCodeAt(m+2)]<<6|c[e.charCodeAt(m+3)],o[d++]=255&p>>16,o[d++]=255&p>>8,o[d++]=255&p;return 2===s&&(p=c[e.charCodeAt(m)]<<2|c[e.charCodeAt(m+1)]>>4,o[d++]=255&p),1===s&&(p=c[e.charCodeAt(m)]<<10|c[e.charCodeAt(m+1)]<<4|c[e.charCodeAt(m+2)]>>2,o[d++]=255&p>>8,o[d++]=255&p),o}function o(e){return p[63&e>>18]+p[63&e>>12]+p[63&e>>6]+p[63&e]}function d(e,t,a){for(var n=[],r=t,s;r<a;r+=3)s=(16711680&e[r]<<16)+(65280&e[r+1]<<8)+(255&e[r+2]),n.push(o(s));return n.join("")}function l(e){for(var t=e.length,a=t%3,n=[],r=16383,s=0,o=t-a,l;s<o;s+=r)n.push(d(e,s,s+r>o?o:s+r));return 1===a?(l=e[t-1],n.push(p[l>>2]+p[63&l<<4]+"==")):2===a&&(l=(e[t-2]<<8)+e[t-1],n.push(p[l>>10]+p[63&l>>4]+p[63&l<<2]+"=")),n.join("")}a.byteLength=function(e){var t=n(e),a=t[0],r=t[1];return 3*(a+r)/4-r},a.toByteArray=s,a.fromByteArray=l;for(var p=[],c=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,f=m.length;_<f;++_)p[_]=m[_],c[m.charCodeAt(_)]=_;c[45]=62,c[95]=63},{}],6:[function(){},{}],7:[function(e,t,a){(function(t,n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */'use strict';function s(){return n.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function p(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return n.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=n.prototype):(null===e&&(e=new n(t)),e.length=t),e}function n(e,t,a){if(!n.TYPED_ARRAY_SUPPORT&&!(this instanceof n))return new n(e,t,a);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return _(this,e)}return c(this,e,t,a)}function c(e,t,a,n){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,a,n):"string"==typeof t?f(e,t,a):y(e,t)}function u(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");else if(0>e)throw new RangeError("\"size\" argument must not be negative")}function m(e,t,a,n){return u(t),0>=t?p(e,t):void 0===a?p(e,t):"string"==typeof n?p(e,t).fill(a,n):p(e,t).fill(a)}function _(e,t){if(u(t),e=p(e,0>t?0:0|b(t)),!n.TYPED_ARRAY_SUPPORT)for(var a=0;a<t;++a)e[a]=0;return e}function f(e,t,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!n.isEncoding(a))throw new TypeError("\"encoding\" must be a valid string encoding");var r=0|w(t,a);e=p(e,r);var s=e.write(t,a);return s!==r&&(e=e.slice(0,s)),e}function h(e,t){var a=0>t.length?0:0|b(t.length);e=p(e,a);for(var n=0;n<a;n+=1)e[n]=255&t[n];return e}function g(e,t,a,r){if(t.byteLength,0>a||t.byteLength<a)throw new RangeError("'offset' is out of bounds");if(t.byteLength<a+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===a&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,a):new Uint8Array(t,a,r),n.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=n.prototype):e=h(e,t),e}function y(e,t){if(n.isBuffer(t)){var a=0|b(t.length);return(e=p(e,a),0===e.length)?e:(t.copy(e,0,0,a),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||ee(t.length)?p(e,0):h(e,t);if("Buffer"===t.type&&ne(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function x(e){return+e!=e&&(e=0),n.alloc(+e)}function w(e,t){if(n.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var a=e.length;if(0===a)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return V(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0;}}function E(e,t,a){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),0>=a)return"";if(a>>>=0,t>>>=0,a<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,a);case"utf8":case"utf-8":return T(this,t,a);case"ascii":return P(this,t,a);case"latin1":case"binary":return N(this,t,a);case"base64":return L(this,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,a);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function C(e,t,a){var n=e[t];e[t]=e[a],e[a]=n}function A(e,t,a,r,s){if(0===e.length)return-1;if("string"==typeof a?(r=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=s?0:e.length-1),0>a&&(a=e.length+a),a>=e.length){if(s)return-1;a=e.length-1}else if(0>a)if(s)a=0;else return-1;if("string"==typeof t&&(t=n.from(t,r)),n.isBuffer(t))return 0===t.length?-1:S(e,t,a,r,s);if("number"==typeof t)return t&=255,n.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,a):Uint8Array.prototype.lastIndexOf.call(e,t,a):S(e,[t],a,r,s);throw new TypeError("val must be string, number or Buffer")}function S(e,t,a,n,r){function s(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,d=e.length,l=t.length;if(void 0!==n&&(n=(n+"").toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;o=2,d/=2,l/=2,a/=2}var p;if(r){var c=-1;for(p=a;p<d;p++)if(s(e,p)!==s(t,-1===c?0:p-c))-1!==c&&(p-=p-c),c=-1;else if(-1===c&&(c=p),p-c+1===l)return c*o}else for(a+l>d&&(a=d-l),p=a;0<=p;p--){for(var u=!0,m=0;m<l;m++)if(s(e,p+m)!==s(t,m)){u=!1;break}if(u)return p}return-1}function k(e,t,a,n){a=+a||0;var r=e.length-a;n?(n=+n,n>r&&(n=r)):n=r;var s=t.length;if(0!=s%2)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0,d;o<n;++o){if(d=parseInt(t.substr(2*o,2),16),isNaN(d))return o;e[a+o]=d}return o}function v(e,t,a,n){return $(W(t,e.length-a),e,a,n)}function I(e,t,a,n){return $(Q(t),e,a,n)}function R(e,t,a,n){return I(e,t,a,n)}function O(e,t,a,n){return $(V(t),e,a,n)}function z(e,t,a,n){return $(J(t,e.length-a),e,a,n)}function L(e,t,a){return 0===t&&a===e.length?te.fromByteArray(e):te.fromByteArray(e.slice(t,a))}function T(e,t,a){a=l(e.length,a);for(var n=[],r=t;r<a;){var s=e[r],o=null,d=239<s?4:223<s?3:191<s?2:1;if(r+d<=a){var p,c,u,m;1===d?128>s&&(o=s):2===d?(p=e[r+1],128==(192&p)&&(m=(31&s)<<6|63&p,127<m&&(o=m))):3===d?(p=e[r+1],c=e[r+2],128==(192&p)&&128==(192&c)&&(m=(15&s)<<12|(63&p)<<6|63&c,2047<m&&(55296>m||57343<m)&&(o=m))):4===d?(p=e[r+1],c=e[r+2],u=e[r+3],128==(192&p)&&128==(192&c)&&128==(192&u)&&(m=(15&s)<<18|(63&p)<<12|(63&c)<<6|63&u,65535<m&&1114112>m&&(o=m))):void 0}null===o?(o=65533,d=1):65535<o&&(o-=65536,n.push(55296|1023&o>>>10),o=56320|1023&o),n.push(o),r+=d}return B(n)}function B(e){var t=e.length;if(t<=4096)return d.apply(String,e);for(var a="",n=0;n<t;)a+=d.apply(String,e.slice(n,n+=4096));return a}function P(e,t,a){var n="";a=l(e.length,a);for(var r=t;r<a;++r)n+=d(127&e[r]);return n}function N(e,t,a){var n="";a=l(e.length,a);for(var r=t;r<a;++r)n+=d(e[r]);return n}function D(e,t,a){var n=e.length;(!t||0>t)&&(t=0),(!a||0>a||a>n)&&(a=n);for(var r="",s=t;s<a;++s)r+=X(e[s]);return r}function j(e,t,a){for(var n=e.slice(t,a),r="",s=0;s<n.length;s+=2)r+=d(n[s]+256*n[s+1]);return r}function U(e,t,a){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>a)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,a,r,s,i){if(!n.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>s||t<i)throw new RangeError("\"value\" argument is out of bounds");if(a+r>e.length)throw new RangeError("Index out of range")}function M(e,t,a,n){0>t&&(t=65535+t+1);for(var r=0,s=l(e.length-a,2);r<s;++r)e[a+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function G(e,t,a,n){0>t&&(t=4294967295+t+1);for(var r=0,s=l(e.length-a,4);r<s;++r)e[a+r]=255&t>>>8*(n?r:3-r)}function Z(e,t,a,n){if(a+n>e.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range")}function Y(e,t,a,n,r){return r||Z(e,t,a,4,34028234663852886e22,-34028234663852886e22),ae.write(e,t,a,n,23,4),a+4}function q(e,t,a,n,r){return r||Z(e,t,a,8,17976931348623157e292,-17976931348623157e292),ae.write(e,t,a,n,52,8),a+8}function H(e){if(e=K(e).replace(re,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return 16>e?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var a=e.length,n=null,r=[],s=0,o;s<a;++s){if(o=e.charCodeAt(s),55295<o&&57344>o){if(!n){if(56319<o){-1<(t-=3)&&r.push(239,191,189);continue}else if(s+1===a){-1<(t-=3)&&r.push(239,191,189);continue}n=o;continue}if(56320>o){-1<(t-=3)&&r.push(239,191,189),n=o;continue}o=(n-55296<<10|o-56320)+65536}else n&&-1<(t-=3)&&r.push(239,191,189);if(n=null,128>o){if(0>(t-=1))break;r.push(o)}else if(2048>o){if(0>(t-=2))break;r.push(192|o>>6,128|63&o)}else if(65536>o){if(0>(t-=3))break;r.push(224|o>>12,128|63&o>>6,128|63&o)}else if(1114112>o){if(0>(t-=4))break;r.push(240|o>>18,128|63&o>>12,128|63&o>>6,128|63&o)}else throw new Error("Invalid code point")}return r}function Q(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}function J(e,t){for(var a=[],n=0,r,s,o;n<e.length&&!(0>(t-=2));++n)r=e.charCodeAt(n),s=r>>8,o=r%256,a.push(o),a.push(s);return a}function V(e){return te.toByteArray(H(e))}function $(e,t,a,n){for(var r=0;r<n&&!(r+a>=t.length||r>=e.length);++r)t[r+a]=e[r];return r}function ee(e){return e!==e}var te=e("base64-js"),ae=e("ieee754"),ne=e("isarray");a.Buffer=n,a.SlowBuffer=x,a.INSPECT_MAX_BYTES=50,n.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():t.TYPED_ARRAY_SUPPORT,a.kMaxLength=s(),n.poolSize=8192,n._augment=function(e){return e.__proto__=n.prototype,e},n.from=function(e,t,a){return c(null,e,t,a)},n.TYPED_ARRAY_SUPPORT&&(n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0})),n.alloc=function(e,t,a){return m(null,e,t,a)},n.allocUnsafe=function(e){return _(null,e)},n.allocUnsafeSlow=function(e){return _(null,e)},n.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var a=e.length,r=t.length,s=0,o=l(a,r);s<o;++s)if(e[s]!==t[s]){a=e[s],r=t[s];break}return a<r?-1:r<a?1:0},n.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},n.concat=function(e,t){if(!ne(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return n.alloc(0);var a;if(t===void 0)for(t=0,a=0;a<e.length;++a)t+=e[a].length;var r=n.allocUnsafe(t),s=0;for(a=0;a<e.length;++a){var o=e[a];if(!n.isBuffer(o))throw new TypeError("\"list\" argument must be an Array of Buffers");o.copy(r,s),s+=o.length}return r},n.byteLength=w,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},n.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},n.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},n.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?T(this,0,e):E.apply(this,arguments)},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e,t,a,r,s){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),0>t||a>e.length||0>r||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=a)return 0;if(r>=s)return-1;if(t>=a)return 1;if(t>>>=0,a>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var o=s-r,d=a-t,p=l(o,d),c=this.slice(r,s),u=e.slice(t,a),m=0;m<p;++m)if(c[m]!==u[m]){o=c[m],d=u[m];break}return o<d?-1:d<o?1:0},n.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},n.prototype.indexOf=function(e,t,a){return A(this,e,t,a,!0)},n.prototype.lastIndexOf=function(e,t,a){return A(this,e,t,a,!1)},n.prototype.write=function(e,t,a,n){if(void 0===t)n="utf8",a=this.length,t=0;else if(void 0===a&&"string"==typeof t)n=t,a=this.length,t=0;else if(isFinite(t))t|=0,isFinite(a)?(a|=0,void 0===n&&(n="utf8")):(n=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((void 0===a||a>r)&&(a=r),0<e.length&&(0>a||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return k(this,e,t,a);case"utf8":case"utf-8":return v(this,e,t,a);case"ascii":return I(this,e,t,a);case"latin1":case"binary":return R(this,e,t,a);case"base64":return O(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,e,t,a);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0;}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};n.prototype.slice=function(e,t){var a=this.length;e=~~e,t=t===void 0?a:~~t,0>e?(e+=a,0>e&&(e=0)):e>a&&(e=a),0>t?(t+=a,0>t&&(t=0)):t>a&&(t=a),t<e&&(t=e);var r;if(n.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=n.prototype;else{var s=t-e;r=new n(s,void 0);for(var o=0;o<s;++o)r[o]=this[o+e]}return r},n.prototype.readUIntLE=function(e,t,a){e|=0,t|=0,a||U(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n},n.prototype.readUIntBE=function(e,t,a){e|=0,t|=0,a||U(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},n.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,a){e|=0,t|=0,a||U(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return r*=128,n>=r&&(n-=o(2,8*t)),n},n.prototype.readIntBE=function(e,t,a){e|=0,t|=0,a||U(e,t,this.length);for(var n=t,r=1,s=this[e+--n];0<n&&(r*=256);)s+=this[e+--n]*r;return r*=128,s>=r&&(s-=o(2,8*t)),s},n.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},n.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},n.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),ae.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),ae.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),ae.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),ae.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,a,n){if(e=+e,t|=0,a|=0,!n){var r=o(2,8*a)-1;F(this,e,t,a,r,0)}var s=1,d=0;for(this[t]=255&e;++d<a&&(s*=256);)this[t+d]=255&e/s;return t+a},n.prototype.writeUIntBE=function(e,t,a,n){if(e=+e,t|=0,a|=0,!n){var r=o(2,8*a)-1;F(this,e,t,a,r,0)}var s=a-1,d=1;for(this[t+s]=255&e;0<=--s&&(d*=256);)this[t+s]=255&e/d;return t+a},n.prototype.writeUInt8=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=r(e)),this[t]=255&e,t+1},n.prototype.writeUInt16LE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},n.prototype.writeIntLE=function(e,t,a,n){if(e=+e,t|=0,!n){var r=o(2,8*a-1);F(this,e,t,a,r-1,-r)}var s=0,d=1,l=0;for(this[t]=255&e;++s<a&&(d*=256);)0>e&&0===l&&0!==this[t+s-1]&&(l=1),this[t+s]=255&(e/d>>0)-l;return t+a},n.prototype.writeIntBE=function(e,t,a,n){if(e=+e,t|=0,!n){var r=o(2,8*a-1);F(this,e,t,a,r-1,-r)}var s=a-1,d=1,l=0;for(this[t+s]=255&e;0<=--s&&(d*=256);)0>e&&0===l&&0!==this[t+s+1]&&(l=1),this[t+s]=255&(e/d>>0)-l;return t+a},n.prototype.writeInt8=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=r(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,a){return e=+e,t|=0,a||F(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,a){return Y(this,e,t,!0,a)},n.prototype.writeFloatBE=function(e,t,a){return Y(this,e,t,!1,a)},n.prototype.writeDoubleLE=function(e,t,a){return q(this,e,t,!0,a)},n.prototype.writeDoubleBE=function(e,t,a){return q(this,e,t,!1,a)},n.prototype.copy=function(e,t,a,r){if(a||(a=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<a&&(r=a),r===a)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-a&&(r=e.length-t+a);var s=r-a,o;if(this===e&&a<t&&t<r)for(o=s-1;0<=o;--o)e[o+t]=this[o+a];else if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+s),t);return s},n.prototype.fill=function(e,t,a,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,a=this.length):"string"==typeof a&&(r=a,a=this.length),1===e.length){var s=e.charCodeAt(0);256>s&&(e=s)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!n.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<a)throw new RangeError("Out of range index");if(a<=t)return this;t>>>=0,a=a===void 0?this.length:a>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<a;++o)this[o]=e;else{var d=n.isBuffer(e)?e:W(new n(e,r).toString()),l=d.length;for(o=0;o<a-t;++o)this[o+t]=d[o%l]}return this};var re=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"base64-js":5,buffer:7,ieee754:8,isarray:10}],8:[function(e,t,s){s.read=function(t,a,n,r,l){var p=8*l-r-1,c=(1<<p)-1,u=c>>1,_=-7,f=n?l-1:0,h=n?-1:1,d=t[a+f],g,y;for(f+=h,g=d&(1<<-_)-1,d>>=-_,_+=p;0<_;g=256*g+t[a+f],f+=h,_-=8);for(y=g&(1<<-_)-1,g>>=-_,_+=r;0<_;y=256*y+t[a+f],f+=h,_-=8);if(0===g)g=1-u;else{if(g===c)return y?NaN:(d?-1:1)*(1/0);y+=o(2,r),g-=u}return(d?-1:1)*y*o(2,g-r)},s.write=function(t,l,p,u,_,f){var h=Math.LN2,g=8*f-_-1,y=(1<<g)-1,b=y>>1,x=23===_?o(2,-24)-o(2,-77):0,w=u?0:f-1,E=u?1:-1,d=0>l||0===l&&0>1/l?1:0,s,C,A;for(l=n(l),isNaN(l)||l===1/0?(C=isNaN(l)?1:0,s=y):(s=r(a(l)/h),1>l*(A=o(2,-s))&&(s--,A*=2),l+=1<=s+b?x/A:x*o(2,1-b),2<=l*A&&(s++,A/=2),s+b>=y?(C=0,s=y):1<=s+b?(C=(l*A-1)*o(2,_),s+=b):(C=l*o(2,b-1)*o(2,_),s=0));8<=_;t[p+w]=255&C,w+=E,C/=256,_-=8);for(s=s<<_|C,g+=_;0<g;t[p+w]=255&s,w+=E,s/=256,g-=8);t[p+w-E]|=128*d}},{}],9:[function(e,t){(function(e){'use strict';function a(){c=!0;for(var e=p.length,t,a;e;){for(a=p,p=[],t=-1;++t<e;)a[t]();e=p.length}c=!1}function n(e){1!==p.push(e)||c||s()}var r=e.MutationObserver||e.WebKitMutationObserver,s;if(r){var i=0,o=new r(a),d=e.document.createTextNode("");o.observe(d,{characterData:!0}),s=function(){d.data=i=++i%2}}else if(!e.setImmediate&&"undefined"!=typeof e.MessageChannel){var l=new e.MessageChannel;l.port1.onmessage=a,s=function(){l.port2.postMessage(0)}}else s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){a(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(a,0)};var p=[],c;t.exports=n}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],10:[function(e,t){var a={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},{}],11:[function(e,t){'use strict';function a(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var t=0;t<this.data.length;t++)e[t]&=255}}var n=e("./dataReader");a.prototype=new n,a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),a=e.charCodeAt(1),n=e.charCodeAt(2),r=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===a&&this.data[s+2]===n&&this.data[s+3]===r)return s-this.zero;return-1},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"./dataReader":16}],12:[function(e,t,a){'use strict';a.encode=function(e){for(var t="",a=0,n,r,s,o,d,l,p;a<e.length;)n=e.charCodeAt(a++),r=e.charCodeAt(a++),s=e.charCodeAt(a++),o=n>>2,d=(3&n)<<4|r>>4,l=(15&r)<<2|s>>6,p=63&s,isNaN(r)?l=p=64:isNaN(s)&&(p=64),t=t+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p);return t},a.decode=function(e){var t="",a=0,n,r,s,o,l,p,c;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<e.length;)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),n=o<<2|l>>4,r=(15&l)<<4|p>>2,s=(3&p)<<6|c,t+=d(n),64!=p&&(t+=d(r)),64!=c&&(t+=d(s));return t}},{}],13:[function(e,t){'use strict';function a(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}a.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=a},{}],14:[function(e,t,a){'use strict';a.STORE={magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},a.DEFLATE=e("./flate")},{"./flate":19}],15:[function(e,t){'use strict';var a=e("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var r="string"!==a.getTypeOf(e);"undefined"==typeof t&&(t=0);var s=0,o=0,d=0;t^=-1;for(var l=0,p=e.length;l<p;l++)d=r?e[l]:e.charCodeAt(l),o=255&(t^d),s=n[o],t=t>>>8^s;return-1^t}},{"./utils":32}],16:[function(e,t){'use strict';function a(){this.data=null,this.length=0,this.index=0,this.zero=0}var n=e("./utils");a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t=0,a;for(this.checkOffset(e),a=this.index+e-1;a>=this.index;a--)t=(t<<8)+this.byteAt(a);return this.index+=e,t},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date((127&e>>25)+1980,(15&e>>21)-1,31&e>>16,31&e>>11,63&e>>5,(31&e)<<1)}},t.exports=a},{"./utils":32}],17:[function(e,t,a){'use strict';a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!1,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],18:[function(e,t,a){'use strict';var n=e("./utils");a.string2binary=function(e){return n.string2binary(e)},a.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},a.uint8Array2String=function(e){return n.transformTo("string",e)},a.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},a.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},a.transformTo=function(e,t){return n.transformTo(e,t)},a.getTypeOf=function(e){return n.getTypeOf(e)},a.checkSupport=function(e){return n.checkSupport(e)},a.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,a.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,a.pretty=function(e){return n.pretty(e)},a.findCompression=function(e){return n.findCompression(e)},a.isRegExp=function(e){return n.isRegExp(e)}},{"./utils":32}],19:[function(e,t,a){'use strict';var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako");a.uncompressInputType=n?"uint8array":"array",a.compressInputType=n?"uint8array":"array",a.magic="\b\0",a.compress=function(e,t){return r.deflateRaw(e,{level:t.level||-1})},a.uncompress=function(e){return r.inflateRaw(e)}},{pako:37}],20:[function(e,t){'use strict';function a(e,t){return this instanceof a?void(this.files={},this.comment=null,this.root="",e&&this.load(e,t),this.clone=function(){var e=new a;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}):new a(e,t)}var n=e("./base64");a.prototype=e("./object"),a.prototype.load=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.utils=e("./deprecatedPublicUtils"),a.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},a.compressions=e("./compressions"),t.exports=a},{"./base64":12,"./compressions":14,"./defaults":17,"./deprecatedPublicUtils":18,"./load":21,"./object":24,"./support":28}],21:[function(e,t){'use strict';var a=e("./base64"),n=e("./utf8"),r=e("./utils"),s=e("./zipEntries");t.exports=function(e,t){var o,d,l,p;for(t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),t.base64&&(e=a.decode(e)),d=new s(e,t),o=d.files,l=0;l<o.length;l++)p=o[l],this.file(p.fileNameStr,p.decompressed,{binary:!0,optimizedBinaryString:!0,date:p.date,dir:p.dir,comment:p.fileCommentStr.length?p.fileCommentStr:null,unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions,createFolders:t.createFolders});return d.zipComment.length&&(this.comment=d.zipComment),this}},{"./base64":12,"./utf8":31,"./utils":32,"./zipEntries":33}],22:[function(e,t){(function(e){'use strict';t.exports=function(t,a){return new e(t,a)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,e("buffer").Buffer)},{buffer:7}],23:[function(e,t){'use strict';function a(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}var n=e("./uint8ArrayReader");a.prototype=new n,a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"./uint8ArrayReader":29}],24:[function(e,t){'use strict';var a=e("./support"),n=e("./utils"),r=e("./crc32"),s=e("./signature"),i=e("./defaults"),o=e("./base64"),l=e("./compressions"),p=e("./compressedObject"),c=e("./nodeBuffer"),u=e("./utf8"),m=e("./stringWriter"),_=e("./uint8ArrayWriter"),f=function(e){if(e._data instanceof p&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===n.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},h=function(e){var t=f(e),r=n.getTypeOf(t);return"string"===r?!e.options.binary&&a.nodebuffer?c(t,"utf-8"):e.asBinary():t},g=function(e){var t=f(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=o.decode(t)),t=e&&this.options.binary?R.utf8decode(t):n.transformTo("string",t),e||this.options.binary||(t=n.transformTo("string",R.utf8encode(t))),t)},y=function(e,t,a){this.name=e,this.dir=a.dir,this.date=a.date,this.comment=a.comment,this.unixPermissions=a.unixPermissions,this.dosPermissions=a.dosPermissions,this._data=t,this.options=a,this._initialMetadata={dir:a.dir,date:a.date}};y.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var e=h(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=h(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(e,t){var a="",n;for(n=0;n<t;n++)a+=d(255&e),e>>>=8;return a},x=function(e){return e=e||{},!0===e.base64&&(null===e.binary||void 0===e.binary)&&(e.binary=!0),e=n.extend(e,i),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},w=function(e,t,a){var r=n.getTypeOf(t),s;if(a=x(a),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=C(e)),a.createFolders&&(s=E(e))&&A.call(this,s,!0),a.dir||null===t||"undefined"==typeof t)a.base64=!1,a.binary=!1,t=null,r=null;else if("string"===r)a.binary&&!a.base64&&!0!==a.optimizedBinaryString&&(t=n.string2binary(t));else{if(a.base64=!1,a.binary=!0,!r&&!(t instanceof p))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"==r&&(t=n.transformTo("uint8array",t))}var i=new y(e,t,a);return this.files[e]=i,i},E=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},C=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},A=function(e,t){return t="undefined"!=typeof t&&t,e=C(e),this.files[e]||w.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},S=function(e,t,a){var s=new p,i;return e._data instanceof p?(s.uncompressedSize=e._data.uncompressedSize,s.crc32=e._data.crc32,0===s.uncompressedSize||e.dir?(t=l.STORE,s.compressedContent="",s.crc32=0):e._data.compressionMethod===t.magic?s.compressedContent=e._data.getCompressedContent():(i=e._data.getContent(),s.compressedContent=t.compress(n.transformTo(t.compressInputType,i),a))):(i=h(e),(!i||0===i.length||e.dir)&&(t=l.STORE,i=""),s.uncompressedSize=i.length,s.crc32=r(i),s.compressedContent=t.compress(n.transformTo(t.compressInputType,i),a)),s.compressedSize=s.compressedContent.length,s.compressionMethod=t.magic,s},k=function(e,t){var a=e;return e||(a=t?16893:33204),(65535&a)<<16},v=function(e){return 63&(e||0)},I=function(e,t,a,i,d,l){var p=a.compressedContent,c=l!==u.utf8encode,m=n.transformTo("string",l(t.name)),_=n.transformTo("string",u.utf8encode(t.name)),f=t.comment||"",h=n.transformTo("string",l(f)),g=n.transformTo("string",u.utf8encode(f)),y=_.length!==t.name.length,x=g.length!==f.length,w=t.options,o="",E="",C="",A,S,I,R;I=t._initialMetadata.dir===t.dir?w.dir:t.dir,R=t._initialMetadata.date===t.date?w.date:t.date;var O=0,z=0;I&&(O|=16),"UNIX"===d?(z=798,O|=k(t.unixPermissions,I)):(z=20,O|=v(t.dosPermissions,I)),A=R.getHours(),A<<=6,A|=R.getMinutes(),A<<=5,A|=R.getSeconds()/2,S=R.getFullYear()-1980,S<<=4,S|=R.getMonth()+1,S<<=5,S|=R.getDate(),y&&(E=b(1,1)+b(r(m),4)+_,o+="up"+b(E.length,2)+E),x&&(C=b(1,1)+b(this.crc32(h),4)+g,o+="uc"+b(C.length,2)+C);var L="";L+="\n\0",L+=!c&&(y||x)?"\0\b":"\0\0",L+=a.compressionMethod,L+=b(A,2),L+=b(S,2),L+=b(a.crc32,4),L+=b(a.compressedSize,4),L+=b(a.uncompressedSize,4),L+=b(m.length,2),L+=b(o.length,2);var T=s.LOCAL_FILE_HEADER+L+m+o,B=s.CENTRAL_FILE_HEADER+b(z,2)+L+b(h.length,2)+"\0\0\0\0"+b(O,4)+b(i,4)+m+o+h;return{fileRecord:T,dirRecord:B,compressedObject:a}},R={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t=[],a,r,s,i;for(a in this.files)this.files.hasOwnProperty(a)&&(s=this.files[a],i=new y(s.name,s._data,n.extend(s.options)),r=a.slice(this.root.length,a.length),a.slice(0,this.root.length)===this.root&&e(r,i)&&t.push(i));return t},file:function(e,t,a){if(1===arguments.length){if(n.isRegExp(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}return this.filter(function(t,a){return!a.dir&&t===e})[0]||null}return e=this.root+e,w.call(this,e,t,a),this},folder:function(e){if(!e)return this;if(n.isRegExp(e))return this.filter(function(t,a){return a.dir&&e.test(t)});var t=this.root+e,a=A.call(this,t),r=this.clone();return r.root=a.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var a=this.filter(function(t,a){return a.name.slice(0,e.length)===e}),n=0;n<a.length;n++)delete this.files[a[n].name];return this},generate:function(e){e=n.extend(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode}),n.checkSupport(e.type),("darwin"===e.platform||"freebsd"===e.platform||"linux"===e.platform||"sunos"===e.platform)&&(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t=[],a=0,r=0,d=n.transformTo("string",e.encodeFileName(e.comment||this.comment||"")),p,c;for(var f in this.files)if(this.files.hasOwnProperty(f)){var h=this.files[f],g=h.options.compression||e.compression.toUpperCase(),y=l[g];if(!y)throw new Error(g+" is not a valid compression method !");var x=h.options.compressionOptions||e.compressionOptions||{},w=S.call(this,h,y,x),E=I.call(this,f,h,w,a,e.platform,e.encodeFileName);a+=E.fileRecord.length+w.compressedSize,r+=E.dirRecord.length,t.push(E)}var C="";C=s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+b(t.length,2)+b(t.length,2)+b(r,4)+b(a,4)+b(d.length,2)+d;var A=e.type.toLowerCase();for(p="uint8array"===A||"arraybuffer"===A||"blob"===A||"nodebuffer"===A?new _(a+r+C.length):new m(a+r+C.length),c=0;c<t.length;c++)p.append(t[c].fileRecord),p.append(t[c].compressedObject.compressedContent);for(c=0;c<t.length;c++)p.append(t[c].dirRecord);p.append(C);var k=p.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),k);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",k),e.mimeType);case"base64":return e.base64?o.encode(k):k;default:return k;}},crc32:function(e,t){return r(e,t)},utf8encode:function(e){return n.transformTo("string",u.utf8encode(e))},utf8decode:function(e){return u.utf8decode(e)}};t.exports=R},{"./base64":12,"./compressedObject":13,"./compressions":14,"./crc32":15,"./defaults":17,"./nodeBuffer":22,"./signature":25,"./stringWriter":27,"./support":28,"./uint8ArrayWriter":30,"./utf8":31,"./utils":32}],25:[function(e,t,a){'use strict';a.LOCAL_FILE_HEADER="PK\x03\x04",a.CENTRAL_FILE_HEADER="PK\x01\x02",a.CENTRAL_DIRECTORY_END="PK\x05\x06",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",a.DATA_DESCRIPTOR="PK\x07\b"},{}],26:[function(e,t){'use strict';function a(e,t){this.data=e,t||(this.data=r.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var n=e("./dataReader"),r=e("./utils");a.prototype=new n,a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"./dataReader":16,"./utils":32}],27:[function(e,t){'use strict';var a=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=a.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":32}],28:[function(e,t,a){(function(e){'use strict';if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,a.nodebuffer="undefined"!=typeof e,a.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)a.blob=!1;else{var t=new ArrayBuffer(0);try{a.blob=0===new Blob([t],{type:"application/zip"}).size}catch(s){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new n;r.append(t),a.blob=0===r.getBlob("application/zip").size}catch(t){a.blob=!1}}}}).call(this,e("buffer").Buffer)},{buffer:7}],29:[function(e,t){'use strict';function a(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}var n=e("./arrayReader");a.prototype=new n,a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"./arrayReader":11}],30:[function(e,t){'use strict';var a=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=a.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":32}],31:[function(e,t,a){'use strict';for(var n=e("./utils"),r=e("./support"),s=e("./nodeBuffer"),o=Array(256),d=0;256>d;d++)o[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;o[254]=o[254]=1;var p=function(e){var t=e.length,a=0,n,s,o,d,l;for(d=0;d<t;d++)s=e.charCodeAt(d),55296==(64512&s)&&d+1<t&&(o=e.charCodeAt(d+1),56320==(64512&o)&&(s=65536+(s-55296<<10)+(o-56320),d++)),a+=128>s?1:2048>s?2:65536>s?3:4;for(n=r.uint8array?new Uint8Array(a):Array(a),l=0,d=0;l<a;d++)s=e.charCodeAt(d),55296==(64512&s)&&d+1<t&&(o=e.charCodeAt(d+1),56320==(64512&o)&&(s=65536+(s-55296<<10)+(o-56320),d++)),128>s?n[l++]=s:2048>s?(n[l++]=192|s>>>6,n[l++]=128|63&s):65536>s?(n[l++]=224|s>>>12,n[l++]=128|63&s>>>6,n[l++]=128|63&s):(n[l++]=240|s>>>18,n[l++]=128|63&s>>>12,n[l++]=128|63&s>>>6,n[l++]=128|63&s);return n},c=function(e,t){var a;for(t=t||e.length,t>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return 0>a?t:0===a?t:a+o[e[a]]>t?a:t},u=function(e){var t=e.length,a=Array(2*t),r,s,d,l;for(s=0,r=0;r<t;){if(d=e[r++],128>d){a[s++]=d;continue}if(l=o[d],4<l){a[s++]=65533,r+=l-1;continue}for(d&=2===l?31:3===l?15:7;1<l&&r<t;)d=d<<6|63&e[r++],l--;if(1<l){a[s++]=65533;continue}65536>d?a[s++]=d:(d-=65536,a[s++]=55296|1023&d>>10,a[s++]=56320|1023&d)}return a.length!==s&&(a.subarray?a=a.subarray(0,s):a.length=s),n.applyFromCharCode(a)};a.utf8encode=function(e){return r.nodebuffer?s(e,"utf-8"):p(e)},a.utf8decode=function(e){if(r.nodebuffer)return n.transformTo("nodebuffer",e).toString("utf-8");e=n.transformTo(r.uint8array?"uint8array":"array",e);for(var t=[],a=0,s=e.length;a<s;){var i=c(e,l(a+65536,s));r.uint8array?t.push(u(e.subarray(a,i))):t.push(u(e.slice(a,i))),a=i}return t.join("")}},{"./nodeBuffer":22,"./support":28,"./utils":32}],32:[function(e,t,a){'use strict';function n(e){return e}function s(e,t){for(var a=0;a<e.length;++a)t[a]=255&e.charCodeAt(a);return t}function i(e){var t=65536,n=[],s=e.length,o=a.getTypeOf(e),p=0,c=!0;try{"uint8array"===o?d.apply(null,new Uint8Array(0)):"nodebuffer"===o?d.apply(null,u(0)):void 0}catch(t){c=!1}if(!c){for(var m="",_=0;_<e.length;_++)m+=d(e[_]);return m}for(;p<s&&1<t;)try{"array"===o||"nodebuffer"===o?n.push(d.apply(null,e.slice(p,l(p+t,s)))):n.push(d.apply(null,e.subarray(p,l(p+t,s)))),p+=t}catch(a){t=r(t/2)}return n.join("")}function o(e,t){for(var a=0;a<e.length;a++)t[a]=e[a];return t}var p=e("./support"),c=e("./compressions"),u=e("./nodeBuffer");a.string2binary=function(e){for(var t="",a=0;a<e.length;a++)t+=d(255&e.charCodeAt(a));return t},a.arrayBuffer2Blob=function(e,t){a.checkSupport("blob"),t=t||"application/zip";try{return new Blob([e],{type:t})}catch(a){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new n;return r.append(e),r.getBlob(t)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},a.applyFromCharCode=i;var m={};m.string={string:n,array:function(e){return s(e,Array(e.length))},arraybuffer:function(e){return m.string.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:function(e){return s(e,u(e.length))}},m.array={string:i,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(e)}},m.arraybuffer={string:function(e){return i(new Uint8Array(e))},array:function(e){return o(new Uint8Array(e),Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(new Uint8Array(e))}},m.uint8array={string:i,array:function(e){return o(e,Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return u(e)}},m.nodebuffer={string:i,array:function(e){return o(e,Array(e.length))},arraybuffer:function(e){return m.nodebuffer.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:n},a.transformTo=function(e,t){if(t||(t=""),!e)return t;a.checkSupport(e);var n=a.getTypeOf(t),r=m[n][e](t);return r},a.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":p.nodebuffer&&u.test(e)?"nodebuffer":p.uint8array&&e instanceof Uint8Array?"uint8array":p.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(e){var t=p[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(e){var t="",a,n;for(n=0;n<(e||"").length;n++)a=e.charCodeAt(n),t+="\\x"+(16>a?"0":"")+a.toString(16).toUpperCase();return t},a.findCompression=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null},a.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},a.extend=function(){var e={},t,a;for(t=0;t<arguments.length;t++)for(a in arguments[t])arguments[t].hasOwnProperty(a)&&"undefined"==typeof e[a]&&(e[a]=arguments[t][a]);return e}},{"./compressions":14,"./nodeBuffer":22,"./support":28}],33:[function(e,t){'use strict';function a(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var r=e("./stringReader"),s=e("./nodeBufferReader"),i=e("./uint8ArrayReader"),o=e("./arrayReader"),d=e("./utils"),l=e("./signature"),p=e("./zipEntry"),c=e("./support"),u=e("./object");a.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+d.pretty(t)+", expected "+d.pretty(e)+")")},isSignature:function(e,t){var a=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4);return this.reader.setIndex(a),n===t},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=c.uint8array?"uint8array":"array",a=d.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,t,a,n;0<e;)t=this.reader.readInt(2),a=this.reader.readInt(4),n=this.reader.readString(a),this.zip64ExtensibleData[t]={id:t,length:a,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)e=new p({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length);else;},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(0>e){var t=!this.isSignature(0,l.LOCAL_FILE_HEADER);if(t)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(e);var a=e;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var s=a-r;if(0<s)this.isSignature(a,l.CENTRAL_FILE_HEADER)||(this.reader.zero=s);else if(0>s)throw new Error("Corrupted zip: missing "+n(s)+" bytes.")},prepareReader:function(e){var t=d.getTypeOf(e);if(d.checkSupport(t),"string"===t&&!c.uint8array)this.reader=new r(e,this.loadOptions.optimizedBinaryString);else if("nodebuffer"===t)this.reader=new s(e);else if(c.uint8array)this.reader=new i(d.transformTo("uint8array",e));else if(c.array)this.reader=new o(d.transformTo("array",e));else throw new Error("Unexpected error: unsupported type '"+t+"'")},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=a},{"./arrayReader":11,"./nodeBufferReader":23,"./object":24,"./signature":25,"./stringReader":26,"./support":28,"./uint8ArrayReader":29,"./utils":32,"./zipEntry":34}],34:[function(e,t){'use strict';function a(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),r=e("./utils"),s=e("./compressedObject"),i=e("./object"),o=e("./support");a.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(e,t,a){return function(){var n=e.index;e.setIndex(t);var r=e.readData(a);return e.setIndex(n),r}},prepareContent:function(e,t,a,n,s){return function(){var e=r.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==s)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,a;if(e.skip(22),this.fileNameLength=e.readInt(2),a=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(a),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=r.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=r.transformTo("string",this.decompressed.getContent()),i.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readData(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e===0&&(this.dosPermissions=63&this.externalFileAttributes),e===3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t=e.index,a,n,r;for(this.extraFields=this.extraFields||{};e.index<t+this.extraFieldsLength;)a=e.readInt(2),n=e.readInt(2),r=e.readString(n),this.extraFields[a]={id:a,length:n,value:r}},handleUTF8:function(){var e=o.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var a=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1===t.readInt(1)?i.crc32(this.fileName)===t.readInt(4)?i.utf8decode(t.readString(e.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1===t.readInt(1)?i.crc32(this.fileComment)===t.readInt(4)?i.utf8decode(t.readString(e.length-5)):null:null}return null}},t.exports=a},{"./compressedObject":13,"./object":24,"./stringReader":26,"./support":28,"./utils":32}],35:[function(e,t){'use strict';function a(){}function n(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,e!==a&&d(this,e)}function r(e,t,a){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof a&&(this.onRejected=a,this.callRejected=this.otherCallRejected)}function s(t,a,n){p(function(){var e;try{e=a(n)}catch(a){return c.reject(t,a)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function o(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){function a(t){r||(r=!0,c.reject(e,t))}function n(t){r||(r=!0,c.resolve(e,t))}var r=!1,s=l(function(){t(n,a)});"error"===s.status&&a(s.value)}function l(e,t){var a={};try{a.value=e(t),a.status="success"}catch(t){a.status="error",a.value=t}return a}var p=e("immediate"),c={},u=["REJECTED"],m=["FULFILLED"],_=["PENDING"];t.exports=n,n.prototype["finally"]=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(a){return t.resolve(e()).then(function(){return a})},function(a){return t.resolve(e()).then(function(){throw a})})},n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===u)return this;var n=new this.constructor(a);if(this.state!==_){var i=this.state===m?e:t;s(n,i,this.outcome)}else this.queue.push(new r(n,e,t));return n},r.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){c.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},c.resolve=function(e,t){var a=l(o,t);if("error"===a.status)return c.reject(e,a.value);var n=a.value;if(n)d(e,n);else{e.state=m,e.outcome=t;for(var r=-1,s=e.queue.length;++r<s;)e.queue[r].callFulfilled(t)}return e},c.reject=function(e,t){e.state=u,e.outcome=t;for(var a=-1,n=e.queue.length;++a<n;)e.queue[a].callRejected(t);return e},n.resolve=function(e){return e instanceof this?e:c.resolve(new this(a),e)},n.reject=function(e){var t=new this(a);return c.reject(t,e)},n.all=function(e){function t(e,t){function a(e){o[t]=e,++d!==r||s||(s=!0,c.resolve(p,o))}n.resolve(e).then(a,function(e){s||(s=!0,c.reject(p,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,s=!1;if(!r)return this.resolve([]);for(var o=Array(r),d=0,l=-1,p=new this(a);++l<r;)t(e[l],l);return p},n.race=function(e){function t(e){n.resolve(e).then(function(e){s||(s=!0,c.resolve(d,e))},function(e){s||(s=!0,c.reject(d,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,s=!1;if(!r)return this.resolve([]);for(var o=-1,d=new this(a);++o<r;)t(e[o]);return d}},{immediate:9}],36:[function(e,t){(function(){function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(){return 1}function n(e){m||"string"==typeof e||"number"==typeof e||(m=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof e).stack))}function r(e){return this instanceof r?void("number"==typeof e&&(e={max:e}),!e&&(e={}),this._max=e.max,(!this._max||"number"!=typeof this._max||0>=this._max)&&(this._max=1/0),this._lengthCalculator=e.length||a,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=a),this._allowStale=e.stale||!1,this._maxAge=e.maxAge||null,this._dispose=e.dispose,this.reset()):new r(e)}function s(e,t,a){n(t);var r=e._cache[t];return r&&(o(e,r)?(c(e,r),!e._allowStale&&(r=void 0)):a&&d(e,r),r&&(r=r.value)),r}function o(e,t){if(!t||!t.maxAge&&!e._maxAge)return!1;var a=!1,n=Date.now()-t.now;return a=t.maxAge?n>t.maxAge:e._maxAge&&n>e._maxAge,a}function d(e,t){p(e,t),t.lu=e._mru++,e._lruList[t.lu]=t}function l(e){for(;e._lru<e._mru&&e._length>e._max;)c(e,e._lruList[e._lru])}function p(e,t){for(delete e._lruList[t.lu];e._lru<e._mru&&!e._lruList[e._lru];)e._lru++}function c(e,t){t&&(e._dispose&&e._dispose(t.key,t.value),e._length-=t.length,e._itemCount--,delete e._cache[t.key],p(e,t))}function u(e,t,a,n,r,s){this.key=e,this.value=t,this.lu=a,this.length=n,this.now=r,s&&(this.maxAge=s)}"object"==typeof t&&t.exports?t.exports=r:this.LRUCache=r;var m=!1;Object.defineProperty(r.prototype,"max",{set:function(e){e&&"number"==typeof e&&!(0>=e)||(e=1/0),this._max=e,this._length>this._max&&l(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(r.prototype,"lengthCalculator",{set:function(e){if("function"!=typeof e)for(var t in this._lengthCalculator=a,this._length=this._itemCount,this._cache)this._cache[t].length=1;else for(var t in this._lengthCalculator=e,this._length=0,this._cache)this._cache[t].length=this._lengthCalculator(this._cache[t].value),this._length+=this._cache[t].length;this._length>this._max&&l(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),r.prototype.forEach=function(e,t){t=t||this;for(var a=0,n=this._itemCount,r=this._mru-1;0<=r&&a<n;r--)if(this._lruList[r]){a++;var s=this._lruList[r];o(this,s)&&(c(this,s),!this._allowStale&&(s=void 0)),s&&e.call(t,s.value,s.key,this)}},r.prototype.keys=function(){for(var e=Array(this._itemCount),t=0,a=this._mru-1;0<=a&&t<this._itemCount;a--)if(this._lruList[a]){var n=this._lruList[a];e[t++]=n.key}return e},r.prototype.values=function(){for(var e=Array(this._itemCount),t=0,a=this._mru-1;0<=a&&t<this._itemCount;a--)if(this._lruList[a]){var n=this._lruList[a];e[t++]=n.value}return e},r.prototype.reset=function(){if(this._dispose&&this._cache)for(var e in this._cache)this._dispose(e,this._cache[e].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},r.prototype.dump=function(){for(var e=[],t=0,a=this._mru-1;0<=a&&t<this._itemCount;a--)if(this._lruList[a]){var n=this._lruList[a];o(this,n)||(++t,e.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return e},r.prototype.dumpLru=function(){return this._lruList},r.prototype.set=function(t,a,r){r=r||this._maxAge,n(t);var s=r?Date.now():0,i=this._lengthCalculator(a);if(e(this._cache,t))return i>this._max?(c(this,this._cache[t]),!1):(this._dispose&&this._dispose(t,this._cache[t].value),this._cache[t].now=s,this._cache[t].maxAge=r,this._cache[t].value=a,this._length+=i-this._cache[t].length,this._cache[t].length=i,this.get(t),this._length>this._max&&l(this),!0);var o=new u(t,a,this._mru++,i,s,r);return o.length>this._max?(this._dispose&&this._dispose(t,a),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[t]=o,this._itemCount++,this._length>this._max&&l(this),!0)},r.prototype.has=function(t){if(n(t),!e(this._cache,t))return!1;var a=this._cache[t];return!o(this,a)},r.prototype.get=function(e){return n(e),s(this,e,!0)},r.prototype.peek=function(e){return n(e),s(this,e,!1)},r.prototype.pop=function(){var e=this._lruList[this._lru];return c(this,e),e||null},r.prototype.del=function(e){n(e),c(this,this._cache[e])},r.prototype.load=function(e){this.reset();for(var t=Date.now(),a=e.length-1,r;0<=a;a--){r=e[a],n(r.k);var s=r.e||0;if(0===s)this.set(r.k,r.v);else{var i=s-t;0<i&&this.set(r.k,r.v,i)}}}})()},{}],37:[function(e,t){'use strict';var a=e("./lib/utils/common").assign,n=e("./lib/deflate"),r=e("./lib/inflate"),s=e("./lib/zlib/constants"),i={};a(i,n,r,s),t.exports=i},{"./lib/deflate":38,"./lib/inflate":39,"./lib/utils/common":40,"./lib/zlib/constants":43}],38:[function(e,t,a){'use strict';function n(e){if(!(this instanceof n))return new n(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==a)throw new Error(d[a]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===p.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,a=s.deflateSetDictionary(this.strm,r),0!==a)throw new Error(d[a]);this._dict_set=!0}}function r(e,t){var a=new n(t);if(a.push(e,!0),a.err)throw a.msg||d[a.err];return a.result}var s=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),d=e("./zlib/messages"),l=e("./zlib/zstream"),p=Object.prototype.toString,c=4,u=0,m=1,_=2;n.prototype.push=function(e,t){var a=this.strm,n=this.options.chunkSize,r,d;if(this.ended)return!1;d=t===~~t?t:!0===t?c:0,a.input="string"==typeof e?o.string2buf(e):"[object ArrayBuffer]"===p.call(e)?new Uint8Array(e):e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(n),a.next_out=0,a.avail_out=n),r=s.deflate(a,d),r!==m&&r!==u)return this.onEnd(r),this.ended=!0,!1;(0===a.avail_out||0===a.avail_in&&(d===c||d===_))&&("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&r!==m);return d===c?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u):d!==_||(this.onEnd(u),a.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},a.Deflate=n,a.deflate=r,a.deflateRaw=function(e,t){return t=t||{},t.raw=!0,r(e,t)},a.gzip=function(e,t){return t=t||{},t.gzip=!0,r(e,t)}},{"./utils/common":40,"./utils/strings":41,"./zlib/deflate":45,"./zlib/messages":50,"./zlib/zstream":52}],39:[function(e,t,a){'use strict';function n(e){if(!(this instanceof n))return new n(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),0<=t.windowBits&&16>t.windowBits&&!(e&&e.windowBits)&&(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var a=s.inflateInit2(this.strm,t.windowBits);if(a!==d.Z_OK)throw new Error(l[a]);if(this.header=new c,s.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(a=s.inflateSetDictionary(this.strm,t.dictionary),a!==d.Z_OK)))throw new Error(l[a])}function r(e,t){var a=new n(t);if(a.push(e,!0),a.err)throw a.msg||l[a.err];return a.result}var s=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),d=e("./zlib/constants"),l=e("./zlib/messages"),p=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;n.prototype.push=function(e,t){var a=this.strm,n=this.options.chunkSize,r=this.options.dictionary,l=!1,p,c,m,_,f;if(this.ended)return!1;c=t===~~t?t:!0===t?d.Z_FINISH:d.Z_NO_FLUSH,a.input="string"==typeof e?o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(n),a.next_out=0,a.avail_out=n),p=s.inflate(a,d.Z_NO_FLUSH),p===d.Z_NEED_DICT&&r&&(p=s.inflateSetDictionary(this.strm,r)),p===d.Z_BUF_ERROR&&!0===l&&(p=d.Z_OK,l=!1),p!==d.Z_STREAM_END&&p!==d.Z_OK)return this.onEnd(p),this.ended=!0,!1;a.next_out&&(0===a.avail_out||p===d.Z_STREAM_END||0===a.avail_in&&(c===d.Z_FINISH||c===d.Z_SYNC_FLUSH))&&("string"===this.options.to?(m=o.utf8border(a.output,a.next_out),_=a.next_out-m,f=o.buf2string(a.output,m),a.next_out=_,a.avail_out=n-_,_&&i.arraySet(a.output,a.output,m,_,0),this.onData(f)):this.onData(i.shrinkBuf(a.output,a.next_out))),0===a.avail_in&&0===a.avail_out&&(l=!0)}while((0<a.avail_in||0===a.avail_out)&&p!==d.Z_STREAM_END);return p===d.Z_STREAM_END&&(c=d.Z_FINISH),c===d.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===d.Z_OK):c!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),a.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},a.Inflate=n,a.inflate=r,a.inflateRaw=function(e,t){return t=t||{},t.raw=!0,r(e,t)},a.ungzip=r},{"./utils/common":40,"./utils/strings":41,"./zlib/constants":43,"./zlib/gzheader":46,"./zlib/inflate":48,"./zlib/messages":50,"./zlib/zstream":52}],40:[function(e,t,a){'use strict';function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var a=t.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var r in a)n(a,r)&&(e[r]=a[r])}}return e},a.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,a,n,r){if(t.subarray&&e.subarray)return void e.set(t.subarray(a,a+n),r);for(var s=0;s<n;s++)e[r+s]=t[a+s]},flattenChunks:function(e){var t,a,n,r,s,o;for(n=0,t=0,a=e.length;t<a;t++)n+=e[t].length;for(o=new Uint8Array(n),r=0,(t=0,a=e.length);t<a;t++)s=e[t],o.set(s,r),r+=s.length;return o}},i={arraySet:function(e,t,a,n,r){for(var s=0;s<n;s++)e[r+s]=t[a+s]},flattenChunks:function(e){return[].concat.apply([],e)}};a.setTyped=function(e){e?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,i))},a.setTyped(r)},{}],41:[function(e,t,a){'use strict';function n(e,t){if(65534>t&&(e.subarray&&o||!e.subarray&&s))return d.apply(null,r.shrinkBuf(e,t));for(var a="",n=0;n<t;n++)a+=d(e[n]);return a}var r=e("./common"),s=!0,o=!0;try{d.apply(null,[0])}catch(e){s=!1}try{d.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var l=new r.Buf8(256),p=0;256>p;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;l[254]=l[254]=1,a.string2buf=function(e){var t=e.length,a=0,n,s,o,d,l;for(d=0;d<t;d++)s=e.charCodeAt(d),55296==(64512&s)&&d+1<t&&(o=e.charCodeAt(d+1),56320==(64512&o)&&(s=65536+(s-55296<<10)+(o-56320),d++)),a+=128>s?1:2048>s?2:65536>s?3:4;for(n=new r.Buf8(a),l=0,d=0;l<a;d++)s=e.charCodeAt(d),55296==(64512&s)&&d+1<t&&(o=e.charCodeAt(d+1),56320==(64512&o)&&(s=65536+(s-55296<<10)+(o-56320),d++)),128>s?n[l++]=s:2048>s?(n[l++]=192|s>>>6,n[l++]=128|63&s):65536>s?(n[l++]=224|s>>>12,n[l++]=128|63&s>>>6,n[l++]=128|63&s):(n[l++]=240|s>>>18,n[l++]=128|63&s>>>12,n[l++]=128|63&s>>>6,n[l++]=128|63&s);return n},a.buf2binstring=function(e){return n(e,e.length)},a.binstring2buf=function(e){for(var t=new r.Buf8(e.length),a=0,n=t.length;a<n;a++)t[a]=e.charCodeAt(a);return t},a.buf2string=function(e,t){var a=t||e.length,r=Array(2*a),s,o,d,p;for(o=0,s=0;s<a;){if(d=e[s++],128>d){r[o++]=d;continue}if(p=l[d],4<p){r[o++]=65533,s+=p-1;continue}for(d&=2===p?31:3===p?15:7;1<p&&s<a;)d=d<<6|63&e[s++],p--;if(1<p){r[o++]=65533;continue}65536>d?r[o++]=d:(d-=65536,r[o++]=55296|1023&d>>10,r[o++]=56320|1023&d)}return n(r,o)},a.utf8border=function(e,t){var a;for(t=t||e.length,t>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return 0>a?t:0===a?t:a+l[e[a]]>t?a:t}},{"./common":40}],42:[function(e,t){'use strict';t.exports=function(e,t,a,r){for(var s=0|65535&e,i=0|65535&e>>>16,o=0;0!==a;){o=2e3<a?2e3:a,a-=o;do s=0|s+t[r++],i=0|i+s;while(--o);s%=65521,i%=65521}return 0|(s|i<<16)}},{}],43:[function(e,t){'use strict';t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],44:[function(e,t){'use strict';var a=function(){for(var e=[],t=0,a;256>t;t++){a=t;for(var r=0;8>r;r++)a=1&a?3988292384^a>>>1:a>>>1;e[t]=a}return e}();t.exports=function(e,t,n,r){e^=-1;for(var s=r;s<r+n;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],45:[function(e,t,a){'use strict';function n(e,t){return e.msg=R[t],t}function r(e){return(e<<1)-(4<e?9:0)}function i(e){for(var t=e.length;0<=--t;)e[t]=0}function o(e){var t=e.state,a=t.pending;a>e.avail_out&&(a=e.avail_out);0===a||(S.arraySet(e.output,t.pending_buf,t.pending_out,a,e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,0===t.pending&&(t.pending_out=0))}function d(e,t){k._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function p(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function c(e,t,a,n){var r=e.avail_in;return(r>n&&(r=n),0===r)?0:(e.avail_in-=r,S.arraySet(t,e.input,e.next_in,r,a),1===e.state.wrap?e.adler=v(e.adler,t,r,a):2===e.state.wrap&&(e.adler=I(e.adler,t,r,a)),e.next_in+=r,e.total_in+=r,r)}function u(e,t){var a=e.max_chain_length,n=e.strstart,r=e.prev_length,s=e.nice_match,i=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,o=e.window,d=e.w_mask,l=e.prev,p=e.strstart+258,c=o[n+r-1],u=o[n+r],m,_;e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(m=t,o[m+r]!==u||o[m+r-1]!==c||o[m]!==o[n]||o[++m]!==o[n+1])continue;n+=2,m++;do;while(o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&n<p);if(_=258-(p-n),n=p-258,_>r){if(e.match_start=t,r=_,_>=s)break;c=o[n+r-1],u=o[n+r]}}while((t=l[t&d])>i&&0!=--a);return r<=e.lookahead?r:e.lookahead}function m(e){var t=e.w_size,a,r,s,i,o;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){S.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,a=r;do s=e.head[--a],e.head[a]=s>=t?s-t:0;while(--r);r=t,a=r;do s=e.prev[--a],e.prev[a]=s>=t?s-t:0;while(--r);i+=t}if(0===e.strm.avail_in)break;if(r=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,3<=e.lookahead+e.insert)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(3>e.lookahead+e.insert)););}while(262>e.lookahead&&0!==e.strm.avail_in)}function _(e,t){for(var a,n;;){if(262>e.lookahead){if(m(e),262>e.lookahead&&0===t)return 1;if(0===e.lookahead)break}if(a=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==a&&e.strstart-a<=e.w_size-262&&(e.match_length=u(e,a)),!(3<=e.match_length))n=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(n=k._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(n&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=2>e.strstart?e.strstart:2,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}function f(e,t){for(var a,n,r;;){if(262>e.lookahead){if(m(e),262>e.lookahead&&0===t)return 1;if(0===e.lookahead)break}if(a=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-262&&(e.match_length=u(e,a),5>=e.match_length&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=k._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(d(e,!1),0===e.strm.avail_out))return 1}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(n=k._tr_tally(e,0,e.window[e.strstart-1]),n&&d(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}return e.match_available&&(n=k._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=2>e.strstart?e.strstart:2,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}function h(e,t){for(var a=e.window,n,r,s,i;;){if(258>=e.lookahead){if(m(e),258>=e.lookahead&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(s=e.strstart-1,r=a[s],r===a[++s]&&r===a[++s]&&r===a[++s])){i=e.strstart+258;do;while(r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&s<i);e.match_length=258-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=k._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}function g(e,t){for(var a;;){if(0===e.lookahead&&(m(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,a=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}function y(e,t,a,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=n,this.func=r}function b(e){e.window_size=2*e.w_size,i(e.head),e.max_lazy_match=O[e.level].max_lazy,e.good_match=O[e.level].good_length,e.nice_match=O[e.level].nice_length,e.max_chain_length=O[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(1146),this.dyn_dtree=new S.Buf16(122),this.bl_tree=new S.Buf16(78),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(16),this.heap=new S.Buf16(573),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(573),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,k._tr_init(t),0):n(e,-2)}function E(e){var t=w(e);return 0===t&&b(e.state),t}function C(e,t,a,r,i,o){if(!e)return-2;var d=1;if(-1===t&&(t=6),0>r?(d=0,r=-r):15<r&&(d=2,r-=16),1>i||9<i||8!==a||8>r||15<r||0>t||9<t||0>o||4<o)return n(e,-2);8===r&&(r=9);var l=new x;return e.state=l,l.strm=e,l.wrap=d,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new S.Buf8(2*l.w_size),l.head=new S.Buf16(l.hash_size),l.prev=new S.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new S.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=a,E(e)}function A(e,t){var a,d,c,u;if(!e||!e.state||5<t||0>t)return e?n(e,-2):-2;if(d=e.state,!e.output||!e.input&&0!==e.avail_in||666===d.status&&4!==t)return n(e,0===e.avail_out?-5:-2);if(d.strm=e,a=d.last_flush,d.last_flush=t,42===d.status)if(2===d.wrap)e.adler=0,l(d,31),l(d,139),l(d,8),d.gzhead?(l(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),l(d,255&d.gzhead.time),l(d,255&d.gzhead.time>>8),l(d,255&d.gzhead.time>>16),l(d,255&d.gzhead.time>>24),l(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),l(d,255&d.gzhead.os),d.gzhead.extra&&d.gzhead.extra.length&&(l(d,255&d.gzhead.extra.length),l(d,255&d.gzhead.extra.length>>8)),d.gzhead.hcrc&&(e.adler=I(e.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(l(d,0),l(d,0),l(d,0),l(d,0),l(d,0),l(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),l(d,3),d.status=113);else{var m=8+(d.w_bits-8<<4)<<8,_=-1;_=2<=d.strategy||2>d.level?0:6>d.level?1:6===d.level?2:3,m|=_<<6,0!==d.strstart&&(m|=32),m+=31-m%31,d.status=113,p(d,m),0!==d.strstart&&(p(d,e.adler>>>16),p(d,65535&e.adler)),e.adler=1}if(69===d.status)if(d.gzhead.extra){for(c=d.pending;d.gzindex<(65535&d.gzhead.extra.length)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>c&&(e.adler=I(e.adler,d.pending_buf,d.pending-c,c)),o(e),c=d.pending,d.pending===d.pending_buf_size));)l(d,255&d.gzhead.extra[d.gzindex]),d.gzindex++;d.gzhead.hcrc&&d.pending>c&&(e.adler=I(e.adler,d.pending_buf,d.pending-c,c)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(73===d.status)if(d.gzhead.name){c=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>c&&(e.adler=I(e.adler,d.pending_buf,d.pending-c,c)),o(e),c=d.pending,d.pending===d.pending_buf_size)){u=1;break}u=d.gzindex<d.gzhead.name.length?255&d.gzhead.name.charCodeAt(d.gzindex++):0,l(d,u)}while(0!==u);d.gzhead.hcrc&&d.pending>c&&(e.adler=I(e.adler,d.pending_buf,d.pending-c,c)),0===u&&(d.gzindex=0,d.status=91)}else d.status=91;if(91===d.status)if(d.gzhead.comment){c=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>c&&(e.adler=I(e.adler,d.pending_buf,d.pending-c,c)),o(e),c=d.pending,d.pending===d.pending_buf_size)){u=1;break}u=d.gzindex<d.gzhead.comment.length?255&d.gzhead.comment.charCodeAt(d.gzindex++):0,l(d,u)}while(0!==u);d.gzhead.hcrc&&d.pending>c&&(e.adler=I(e.adler,d.pending_buf,d.pending-c,c)),0===u&&(d.status=103)}else d.status=103;if(103===d.status&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&o(e),d.pending+2<=d.pending_buf_size&&(l(d,255&e.adler),l(d,255&e.adler>>8),e.adler=0,d.status=113)):d.status=113),0!==d.pending){if(o(e),0===e.avail_out)return d.last_flush=-1,0;}else if(0===e.avail_in&&r(t)<=r(a)&&4!==t)return n(e,-5);if(666===d.status&&0!==e.avail_in)return n(e,-5);if(0!==e.avail_in||0!==d.lookahead||0!==t&&666!==d.status){var f=2===d.strategy?g(d,t):3===d.strategy?h(d,t):O[d.level].func(d,t);if((3===f||4===f)&&(d.status=666),1===f||3===f)return 0===e.avail_out&&(d.last_flush=-1),0;if(2===f&&(1===t?k._tr_align(d):5!==t&&(k._tr_stored_block(d,0,0,!1),3===t&&(i(d.head),0===d.lookahead&&(d.strstart=0,d.block_start=0,d.insert=0))),o(e),0===e.avail_out))return d.last_flush=-1,0}return 4===t?0>=d.wrap?1:(2===d.wrap?(l(d,255&e.adler),l(d,255&e.adler>>8),l(d,255&e.adler>>16),l(d,255&e.adler>>24),l(d,255&e.total_in),l(d,255&e.total_in>>8),l(d,255&e.total_in>>16),l(d,255&e.total_in>>24)):(p(d,e.adler>>>16),p(d,65535&e.adler)),o(e),0<d.wrap&&(d.wrap=-d.wrap),0===d.pending?1:0):0}var S=e("../utils/common"),k=e("./trees"),v=e("./adler32"),I=e("./crc32"),R=e("./messages"),O;O=[new y(0,0,0,0,function(e,t){var a=65535;for(a>e.pending_buf_size-5&&(a=e.pending_buf_size-5);;){if(1>=e.lookahead){if(m(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+a;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,d(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.strstart>e.block_start&&(d(e,!1),0===e.strm.avail_out)?1:1}),new y(4,4,8,4,_),new y(4,5,16,8,_),new y(4,6,32,32,_),new y(4,4,16,16,f),new y(8,16,32,32,f),new y(8,16,128,128,f),new y(8,32,128,256,f),new y(32,128,258,1024,f),new y(32,258,258,4096,f)],a.deflateInit=function(e,t){return C(e,t,8,15,8,0)},a.deflateInit2=C,a.deflateReset=E,a.deflateResetKeep=w,a.deflateSetHeader=function(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,0):-2:-2},a.deflate=A,a.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status,42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t)?n(e,-2):(e.state=null,113===t?n(e,-3):0):-2},a.deflateSetDictionary=function(e,t){var a=t.length,r,o,d,l,p,c,u,_;if(!e||!e.state)return-2;if(r=e.state,l=r.wrap,2===l||1===l&&42!==r.status||r.lookahead)return-2;for(1===l&&(e.adler=v(e.adler,t,a,0)),r.wrap=0,a>=r.w_size&&(0===l&&(i(r.head),r.strstart=0,r.block_start=0,r.insert=0),_=new S.Buf8(r.w_size),S.arraySet(_,t,a-r.w_size,r.w_size,0),t=_,a=r.w_size),p=e.avail_in,c=e.next_in,u=e.input,e.avail_in=a,e.next_in=0,e.input=t,m(r);3<=r.lookahead;){o=r.strstart,d=r.lookahead-2;do r.ins_h=(r.ins_h<<r.hash_shift^r.window[o+3-1])&r.hash_mask,r.prev[o&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=o,o++;while(--d);r.strstart=o,r.lookahead=2,m(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=c,e.input=u,e.avail_in=p,r.wrap=l,0},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":40,"./adler32":42,"./crc32":44,"./messages":50,"./trees":51}],46:[function(e,t){'use strict';t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],47:[function(e,t){'use strict';t.exports=function(e,t){var a,n,r,s,i,o,d,l,p,c,u,m,_,f,h,g,y,b,x,w,E,C,A,S,k;a=e.state,n=e.next_in,S=e.input,r=n+(e.avail_in-5),s=e.next_out,k=e.output,i=s-(t-e.avail_out),o=s+(e.avail_out-257),d=a.dmax,l=a.wsize,p=a.whave,c=a.wnext,u=a.window,m=a.hold,_=a.bits,f=a.lencode,h=a.distcode,g=(1<<a.lenbits)-1,y=(1<<a.distbits)-1;top:do{15>_&&(m+=S[n++]<<_,_+=8,m+=S[n++]<<_,_+=8),b=f[m&g];dolen:for(;;){if(x=b>>>24,m>>>=x,_-=x,x=255&b>>>16,0===x)k[s++]=65535&b;else if(16&x){w=65535&b,x&=15,x&&(_<x&&(m+=S[n++]<<_,_+=8),w+=m&(1<<x)-1,m>>>=x,_-=x),15>_&&(m+=S[n++]<<_,_+=8,m+=S[n++]<<_,_+=8),b=h[m&y];dodist:for(;;){if(x=b>>>24,m>>>=x,_-=x,x=255&b>>>16,16&x){if(E=65535&b,x&=15,_<x&&(m+=S[n++]<<_,_+=8,_<x&&(m+=S[n++]<<_,_+=8)),E+=m&(1<<x)-1,E>d){e.msg="invalid distance too far back",a.mode=30;break top}if(m>>>=x,_-=x,x=s-i,E>x){if(x=E-x,x>p&&a.sane){e.msg="invalid distance too far back",a.mode=30;break top}if(C=0,A=u,0===c){if(C+=l-x,x<w){w-=x;do k[s++]=u[C++];while(--x);C=s-E,A=k}}else if(c<x){if(C+=l+c-x,x-=c,x<w){w-=x;do k[s++]=u[C++];while(--x);if(C=0,c<w){x=c,w-=x;do k[s++]=u[C++];while(--x);C=s-E,A=k}}}else if(C+=c-x,x<w){w-=x;do k[s++]=u[C++];while(--x);C=s-E,A=k}for(;2<w;)k[s++]=A[C++],k[s++]=A[C++],k[s++]=A[C++],w-=3;w&&(k[s++]=A[C++],1<w&&(k[s++]=A[C++]))}else{C=s-E;do k[s++]=k[C++],k[s++]=k[C++],k[s++]=k[C++],w-=3;while(2<w);w&&(k[s++]=k[C++],1<w&&(k[s++]=k[C++]))}}else if(0==(64&x)){b=h[(65535&b)+(m&(1<<x)-1)];continue dodist}else{e.msg="invalid distance code",a.mode=30;break top}break}}else if(0==(64&x)){b=f[(65535&b)+(m&(1<<x)-1)];continue dolen}else if(32&x){a.mode=12;break top}else{e.msg="invalid literal/length code",a.mode=30;break top}break}}while(n<r&&s<o);return w=_>>3,n-=w,_-=w<<3,m&=(1<<_)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=s<o?257+(o-s):257-(s-o),a.hold=m,void(a.bits=_)}},{}],48:[function(e,t,a){'use strict';function r(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new m.Buf32(852),t.distcode=t.distdyn=new m.Buf32(592),t.sane=1,t.back=-1,0):-2}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):-2}function l(e,t){var a,n;return e&&e.state?(n=e.state,0>t?(a=0,t=-t):(a=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=a,n.wbits=t,o(e)):-2}function p(e,t){var a,n;return e?(n=new s,e.state=n,n.window=null,a=l(e,t),0!==a&&(e.state=null),a):-2}function c(e){if(y){var t;for(b=new m.Buf32(512),x=new m.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(g(1,e.lens,0,288,b,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;g(2,e.lens,0,32,x,0,e.work,{bits:5}),y=!1}e.lencode=b,e.lenbits=9,e.distcode=x,e.distbits=5}function u(e,t,a,n){var r=e.state,s;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new m.Buf8(r.wsize)),n>=r.wsize?(m.arraySet(r.window,t,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),m.arraySet(r.window,t,a-n,s,r.wnext),n-=s,n?(m.arraySet(r.window,t,a-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}var m=e("../utils/common"),_=e("./adler32"),f=e("./crc32"),h=e("./inffast"),g=e("./inftrees"),y=!0,b,x;a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=i,a.inflateInit=function(e){return p(e,15)},a.inflateInit2=p,a.inflate=function(e,t){var a=0,s=new m.Buf8(4),i=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o,l,p,y,b,x,w,E,C,A,S,k,v,I,R,O,z,L,T,B,P,N,D,j;if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;o=e.state,12===o.mode&&(o.mode=13),b=e.next_out,p=e.output,w=e.avail_out,y=e.next_in,l=e.input,x=e.avail_in,E=o.hold,C=o.bits,A=x,S=w,N=0;inf_leave:for(;;)switch(o.mode){case 1:if(0===o.wrap){o.mode=13;break}for(;16>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(2&o.wrap&&35615===E){o.check=0,s[0]=255&E,s[1]=255&E>>>8,o.check=f(o.check,s,2,0),E=0,C=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&E)<<8)+(E>>8))%31){e.msg="incorrect header check",o.mode=30;break}if(8!==(15&E)){e.msg="unknown compression method",o.mode=30;break}if(E>>>=4,C-=4,P=(15&E)+8,0===o.wbits)o.wbits=P;else if(P>o.wbits){e.msg="invalid window size",o.mode=30;break}o.dmax=1<<P,e.adler=o.check=1,o.mode=512&E?10:12,E=0,C=0;break;case 2:for(;16>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(o.flags=E,8!==(255&o.flags)){e.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){e.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=1&E>>8),512&o.flags&&(s[0]=255&E,s[1]=255&E>>>8,o.check=f(o.check,s,2,0)),E=0,C=0,o.mode=3;case 3:for(;32>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}o.head&&(o.head.time=E),512&o.flags&&(s[0]=255&E,s[1]=255&E>>>8,s[2]=255&E>>>16,s[3]=255&E>>>24,o.check=f(o.check,s,4,0)),E=0,C=0,o.mode=4;case 4:for(;16>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}o.head&&(o.head.xflags=255&E,o.head.os=E>>8),512&o.flags&&(s[0]=255&E,s[1]=255&E>>>8,o.check=f(o.check,s,2,0)),E=0,C=0,o.mode=5;case 5:if(1024&o.flags){for(;16>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}o.length=E,o.head&&(o.head.extra_len=E),512&o.flags&&(s[0]=255&E,s[1]=255&E>>>8,o.check=f(o.check,s,2,0)),E=0,C=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&(k=o.length,k>x&&(k=x),k&&(o.head&&(P=o.head.extra_len-o.length,!o.head.extra&&(o.head.extra=Array(o.head.extra_len)),m.arraySet(o.head.extra,l,y,k,P)),512&o.flags&&(o.check=f(o.check,l,k,y)),x-=k,y+=k,o.length-=k),o.length))break inf_leave;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(0===x)break inf_leave;k=0;do P=l[y+k++],o.head&&P&&65536>o.length&&(o.head.name+=d(P));while(P&&k<x);if(512&o.flags&&(o.check=f(o.check,l,k,y)),x-=k,y+=k,P)break inf_leave}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(0===x)break inf_leave;k=0;do P=l[y+k++],o.head&&P&&65536>o.length&&(o.head.comment+=d(P));while(P&&k<x);if(512&o.flags&&(o.check=f(o.check,l,k,y)),x-=k,y+=k,P)break inf_leave}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;16>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(E!==(65535&o.check)){e.msg="header crc mismatch",o.mode=30;break}E=0,C=0}o.head&&(o.head.hcrc=1&o.flags>>9,o.head.done=!0),e.adler=o.check=0,o.mode=12;break;case 10:for(;32>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}e.adler=o.check=r(E),E=0,C=0,o.mode=11;case 11:if(0===o.havedict)return e.next_out=b,e.avail_out=w,e.next_in=y,e.avail_in=x,o.hold=E,o.bits=C,2;e.adler=o.check=1,o.mode=12;case 12:if(5===t||6===t)break inf_leave;case 13:if(o.last){E>>>=7&C,C-=7&C,o.mode=27;break}for(;3>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}switch(o.last=1&E,E>>>=1,C-=1,3&E){case 0:o.mode=14;break;case 1:if(c(o),o.mode=20,6===t){E>>>=2,C-=2;break inf_leave}break;case 2:o.mode=17;break;case 3:e.msg="invalid block type",o.mode=30;}E>>>=2,C-=2;break;case 14:for(E>>>=7&C,C-=7&C;32>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if((65535&E)!=(65535^E>>>16)){e.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&E,E=0,C=0,o.mode=15,6===t)break inf_leave;case 15:o.mode=16;case 16:if(k=o.length,k){if(k>x&&(k=x),k>w&&(k=w),0===k)break inf_leave;m.arraySet(p,l,y,k,b),x-=k,y+=k,w-=k,b+=k,o.length-=k;break}o.mode=12;break;case 17:for(;14>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(o.nlen=(31&E)+257,E>>>=5,C-=5,o.ndist=(31&E)+1,E>>>=5,C-=5,o.ncode=(15&E)+4,E>>>=4,C-=4,286<o.nlen||30<o.ndist){e.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;3>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}o.lens[i[o.have++]]=7&E,E>>>=3,C-=3}for(;19>o.have;)o.lens[i[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,D={bits:o.lenbits},N=g(0,o.lens,0,19,o.lencode,0,o.work,D),o.lenbits=D.bits,N){e.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;;){if(a=o.lencode[E&(1<<o.lenbits)-1],R=a>>>24,O=255&a>>>16,z=65535&a,R<=C)break;if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(16>z)E>>>=R,C-=R,o.lens[o.have++]=z;else{if(16===z){for(j=R+2;C<j;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(E>>>=R,C-=R,0===o.have){e.msg="invalid bit length repeat",o.mode=30;break}P=o.lens[o.have-1],k=3+(3&E),E>>>=2,C-=2}else if(17===z){for(j=R+3;C<j;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}E>>>=R,C-=R,P=0,k=3+(7&E),E>>>=3,C-=3}else{for(j=R+7;C<j;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}E>>>=R,C-=R,P=0,k=11+(127&E),E>>>=7,C-=7}if(o.have+k>o.nlen+o.ndist){e.msg="invalid bit length repeat",o.mode=30;break}for(;k--;)o.lens[o.have++]=P}}if(30===o.mode)break;if(0===o.lens[256]){e.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,D={bits:o.lenbits},N=g(1,o.lens,0,o.nlen,o.lencode,0,o.work,D),o.lenbits=D.bits,N){e.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,D={bits:o.distbits},N=g(2,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,D),o.distbits=D.bits,N){e.msg="invalid distances set",o.mode=30;break}if(o.mode=20,6===t)break inf_leave;case 20:o.mode=21;case 21:if(6<=x&&258<=w){e.next_out=b,e.avail_out=w,e.next_in=y,e.avail_in=x,o.hold=E,o.bits=C,h(e,S),b=e.next_out,p=e.output,w=e.avail_out,y=e.next_in,l=e.input,x=e.avail_in,E=o.hold,C=o.bits,12===o.mode&&(o.back=-1);break}for(o.back=0;;){if(a=o.lencode[E&(1<<o.lenbits)-1],R=a>>>24,O=255&a>>>16,z=65535&a,R<=C)break;if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(O&&0==(240&O)){for(L=R,T=O,B=z;;){if(a=o.lencode[B+((E&(1<<L+T)-1)>>L)],R=a>>>24,O=255&a>>>16,z=65535&a,L+R<=C)break;if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}E>>>=L,C-=L,o.back+=L}if(E>>>=R,C-=R,o.back+=R,o.length=z,0===O){o.mode=26;break}if(32&O){o.back=-1,o.mode=12;break}if(64&O){e.msg="invalid literal/length code",o.mode=30;break}o.extra=15&O,o.mode=22;case 22:if(o.extra){for(j=o.extra;C<j;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}o.length+=E&(1<<o.extra)-1,E>>>=o.extra,C-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;;){if(a=o.distcode[E&(1<<o.distbits)-1],R=a>>>24,O=255&a>>>16,z=65535&a,R<=C)break;if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(0==(240&O)){for(L=R,T=O,B=z;;){if(a=o.distcode[B+((E&(1<<L+T)-1)>>L)],R=a>>>24,O=255&a>>>16,z=65535&a,L+R<=C)break;if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}E>>>=L,C-=L,o.back+=L}if(E>>>=R,C-=R,o.back+=R,64&O){e.msg="invalid distance code",o.mode=30;break}o.offset=z,o.extra=15&O,o.mode=24;case 24:if(o.extra){for(j=o.extra;C<j;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}o.offset+=E&(1<<o.extra)-1,E>>>=o.extra,C-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){e.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(0===w)break inf_leave;if(k=S-w,o.offset>k){if(k=o.offset-k,k>o.whave&&o.sane){e.msg="invalid distance too far back",o.mode=30;break}k>o.wnext?(k-=o.wnext,v=o.wsize-k):v=o.wnext-k,k>o.length&&(k=o.length),I=o.window}else I=p,v=b-o.offset,k=o.length;k>w&&(k=w),w-=k,o.length-=k;do p[b++]=I[v++];while(--k);0===o.length&&(o.mode=21);break;case 26:if(0===w)break inf_leave;p[b++]=o.length,w--,o.mode=21;break;case 27:if(o.wrap){for(;32>C;){if(0===x)break inf_leave;x--,E|=l[y++]<<C,C+=8}if(S-=w,e.total_out+=S,o.total+=S,S&&(e.adler=o.check=o.flags?f(o.check,p,S,b-S):_(o.check,p,S,b-S)),S=w,(o.flags?E:r(E))!==o.check){e.msg="incorrect data check",o.mode=30;break}E=0,C=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;32>C;){if(0===x)break inf_leave;x--,E+=l[y++]<<C,C+=8}if(E!==(4294967295&o.total)){e.msg="incorrect length check",o.mode=30;break}E=0,C=0}o.mode=29;case 29:N=1;break inf_leave;case 30:N=-3;break inf_leave;case 31:return-4;case 32:default:return-2;}return(e.next_out=b,e.avail_out=w,e.next_in=y,e.avail_in=x,o.hold=E,o.bits=C,(o.wsize||S!==e.avail_out&&30>o.mode&&(27>o.mode||4!==t))&&u(e,e.output,e.next_out,S-e.avail_out))?(o.mode=31,-4):(A-=e.avail_in,S-=e.avail_out,e.total_in+=A,e.total_out+=S,o.total+=S,o.wrap&&S&&(e.adler=o.check=o.flags?f(o.check,p,S,e.next_out-S):_(o.check,p,S,e.next_out-S)),e.data_type=o.bits+(o.last?64:0)+(12===o.mode?128:0)+(20===o.mode||15===o.mode?256:0),(0===A&&0===S||4===t)&&0===N&&(N=-5),N)},a.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},a.inflateGetHeader=function(e,t){var a;return e&&e.state?(a=e.state,0==(2&a.wrap))?-2:(a.head=t,t.done=!1,0):-2},a.inflateSetDictionary=function(e,t){var a=t.length,n,r,s;return e&&e.state?(n=e.state,0!==n.wrap&&11!==n.mode)?-2:11===n.mode&&(r=1,r=_(r,t,a,0),r!==n.check)?-3:(s=u(e,t,a,a),s)?(n.mode=31,-4):(n.havedict=1,0):-2},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":40,"./adler32":42,"./crc32":44,"./inffast":47,"./inftrees":49}],49:[function(e,t){'use strict';var a=e("../utils/common"),n=15,r=852,s=592,i=0,o=1,d=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,m,_,f,h,g,y){var b=y.bits,x=0,w=0,E=0,C=0,A=0,S=0,k=0,v=0,I=0,R=0,O=null,z=0,L=new a.Buf16(n+1),T=new a.Buf16(n+1),B=null,P=0,N,D,j,U,F,M,G,Z,Y;for(x=0;x<=n;x++)L[x]=0;for(w=0;w<_;w++)L[t[m+w]]++;for(A=b,C=n;1<=C&&0===L[C];C--);if(A>C&&(A=C),0===C)return f[h++]=20971520,f[h++]=20971520,y.bits=1,0;for(E=1;E<C&&0===L[E];E++);for(A<E&&(A=E),v=1,x=1;x<=n;x++)if(v<<=1,v-=L[x],0>v)return-1;if(0<v&&(e===i||1!==C))return-1;for(T[1]=0,x=1;x<n;x++)T[x+1]=T[x]+L[x];for(w=0;w<_;w++)0!==t[m+w]&&(g[T[t[m+w]]++]=w);if(e===i?(O=B=g,M=19):e===o?(O=l,z-=257,B=p,P-=257,M=256):(O=c,B=u,M=-1),R=0,w=0,x=E,F=h,S=A,k=0,j=-1,I=1<<A,U=I-1,e===o&&I>r||e===d&&I>s)return 1;for(;;){G=x-k,g[w]<M?(Z=0,Y=g[w]):g[w]>M?(Z=B[P+g[w]],Y=O[z+g[w]]):(Z=96,Y=0),N=1<<x-k,D=1<<S,E=D;do D-=N,f[F+(R>>k)+D]=0|(G<<24|Z<<16|Y);while(0!==D);for(N=1<<x-1;R&N;)N>>=1;if(0===N?R=0:(R&=N-1,R+=N),w++,0==--L[x]){if(x===C)break;x=t[m+g[w]]}if(x>A&&(R&U)!==j){for(0===k&&(k=A),F+=E,S=x-k,v=1<<S;S+k<C&&(v-=L[S+k],!(0>=v));)S++,v<<=1;if(I+=1<<S,e===o&&I>r||e===d&&I>s)return 1;j=R&U,f[j]=0|(A<<24|S<<16|F-h)}}return 0!==R&&(f[F+R]=0|(4194304|x-k<<24)),y.bits=A,0}},{"../utils/common":40}],50:[function(e,t){'use strict';t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],51:[function(e,t,a){'use strict';function n(e){for(var t=e.length;0<=--t;)e[t]=0}function r(e,t,a,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}function i(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return 256>e?M[e]:M[256+(e>>>7)]}function d(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function l(e,t,a){e.bi_valid>16-a?(e.bi_buf|=65535&t<<e.bi_valid,d(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=a-16):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=a)}function p(e,t,a){l(e,a[2*t],a[2*t+1])}function c(e,t){var a=0;do a|=1&e,e>>>=1,a<<=1;while(0<--t);return a>>>1}function u(e){16===e.bi_valid?(d(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function _(e,t){var a=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,l=t.stat_desc.max_length,p=0,c,u,_,g,y,b;for(g=0;g<=15;g++)e.bl_count[g]=0;for(a[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;573>c;c++)(u=e.heap[c],g=a[2*a[2*u+1]+1]+1,g>l&&(g=l,p++),a[2*u+1]=g,!(u>r))&&(e.bl_count[g]++,y=0,u>=d&&(y=o[u-d]),b=a[2*u],e.opt_len+=b*(g+y),i&&(e.static_len+=b*(s[2*u+1]+y)));if(0!==p){do{for(g=l-1;0===e.bl_count[g];)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[l]--,p-=2}while(0<p);for(g=l;0!==g;g--)for(u=e.bl_count[g];0!==u;)(_=e.heap[--c],!(_>r))&&(a[2*_+1]!==g&&(e.opt_len+=(g-a[2*_+1])*a[2*_],a[2*_+1]=g),u--)}}function f(e,t,a){var r=Array(16),s=0,i,o;for(i=1;i<=15;i++)r[i]=s=s+a[i-1]<<1;for(o=0;o<=t;o++){var d=e[2*o+1];0!==d&&(e[2*o]=c(r[d]++,d))}}function h(){var e=Array(16),t,a,s,i,o;for(s=0,i=0;i<28;i++)for(Z[i]=s,t=0;t<1<<P[i];t++)G[s++]=i;for(G[s-1]=i,o=0,i=0;16>i;i++)for(Y[i]=o,t=0;t<1<<N[i];t++)M[o++]=i;for(o>>=7;i<30;i++)for(Y[i]=o<<7,t=0;t<1<<N[i]-7;t++)M[256+o++]=i;for(a=0;a<=15;a++)e[a]=0;for(t=0;143>=t;)U[2*t+1]=8,t++,e[8]++;for(;255>=t;)U[2*t+1]=9,t++,e[9]++;for(;279>=t;)U[2*t+1]=7,t++,e[7]++;for(;287>=t;)U[2*t+1]=8,t++,e[8]++;for(f(U,287,e),t=0;t<30;t++)F[2*t+1]=5,F[2*t]=c(t,5);H=new r(U,P,257,286,15),K=new r(F,N,0,30,15),X=new r([],D,0,19,7)}function g(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function y(e){8<e.bi_valid?d(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function b(e,t,a,n){y(e),n&&(d(e,a),d(e,~a)),z.arraySet(e.pending_buf,e.window,t,a,e.pending),e.pending+=a}function x(e,t,a,n){var r=2*t,s=2*a;return e[r]<e[s]||e[r]===e[s]&&n[t]<=n[a]}function w(e,t,a){for(var n=e.heap[a],r=a<<1;r<=e.heap_len&&(r<e.heap_len&&x(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!x(t,n,e.heap[r],e.depth));)e.heap[a]=e.heap[r],a=r,r<<=1;e.heap[a]=n}function E(e,t,a){var n=0,r,s,i,d;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*n]<<8|e.pending_buf[e.d_buf+2*n+1],s=e.pending_buf[e.l_buf+n],n++,0===r?p(e,s,t):(i=G[s],p(e,i+256+1,t),d=P[i],0!==d&&(s-=Z[i],l(e,s,d)),r--,i=o(r),p(e,i,a),d=N[i],0!==d&&(r-=Y[i],l(e,r,d)));while(n<e.last_lit);p(e,256,t)}function C(e,t){var a=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.elems,o=-1,d,l,p;for(e.heap_len=0,e.heap_max=573,d=0;d<i;d++)0===a[2*d]?a[2*d+1]=0:(e.heap[++e.heap_len]=o=d,e.depth[d]=0);for(;2>e.heap_len;)p=e.heap[++e.heap_len]=2>o?++o:0,a[2*p]=1,e.depth[p]=0,e.opt_len--,s&&(e.static_len-=r[2*p+1]);for(t.max_code=o,d=e.heap_len>>1;1<=d;d--)w(e,a,d);p=i;do d=e.heap[1],e.heap[1]=e.heap[e.heap_len--],w(e,a,1),l=e.heap[1],e.heap[--e.heap_max]=d,e.heap[--e.heap_max]=l,a[2*p]=a[2*d]+a[2*l],e.depth[p]=(e.depth[d]>=e.depth[l]?e.depth[d]:e.depth[l])+1,a[2*d+1]=a[2*l+1]=p,e.heap[1]=p++,w(e,a,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],_(e,t),f(a,o,e.bl_count)}function A(e,t,a){var r=-1,s=t[1],i=0,o=7,d=4,l,p;for(0===s&&(o=138,d=3),t[2*(a+1)+1]=65535,l=0;l<=a;l++){if(p=s,s=t[2*(l+1)+1],++i<o&&p===s)continue;else i<d?e.bl_tree[2*p]+=i:0===p?10>=i?e.bl_tree[34]++:e.bl_tree[36]++:(p!==r&&e.bl_tree[2*p]++,e.bl_tree[32]++);i=0,r=p,0===s?(o=138,d=3):p===s?(o=6,d=3):(o=7,d=4)}}function S(e,t,a){var r=-1,s=t[1],i=0,o=7,d=4,c,u;for(0===s&&(o=138,d=3),c=0;c<=a;c++){if(u=s,s=t[2*(c+1)+1],++i<o&&u===s)continue;else if(i<d)do p(e,u,e.bl_tree);while(0!=--i);else 0===u?10>=i?(p(e,17,e.bl_tree),l(e,i-3,3)):(p(e,18,e.bl_tree),l(e,i-11,7)):(u!==r&&(p(e,u,e.bl_tree),i--),p(e,16,e.bl_tree),l(e,i-3,2));i=0,r=u,0===s?(o=138,d=3):u===s?(o=6,d=3):(o=7,d=4)}}function k(e){var t;for(A(e,e.dyn_ltree,e.l_desc.max_code),A(e,e.dyn_dtree,e.d_desc.max_code),C(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*j[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function v(e,t,a,n){var r;for(l(e,t-257,5),l(e,a-1,5),l(e,n-4,4),r=0;r<n;r++)l(e,e.bl_tree[2*j[r]+1],3);S(e,e.dyn_ltree,t-1),S(e,e.dyn_dtree,a-1)}function I(e){var t=4093624447,a;for(a=0;31>=a;a++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*a])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(a=32;a<256;a++)if(0!==e.dyn_ltree[2*a])return 1;return 0}function R(e){q||(h(),q=!0),e.l_desc=new i(e.dyn_ltree,H),e.d_desc=new i(e.dyn_dtree,K),e.bl_desc=new i(e.bl_tree,X),e.bi_buf=0,e.bi_valid=0,g(e)}function O(e,t,a,n){l(e,0+(n?1:0),3),b(e,t,a,!0)}var z=e("../utils/common"),L=29,T=256+1+L,B=30,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=Array(2*(T+2));n(U);var F=Array(2*B);n(F);var M=Array(512);n(M);var G=Array(258-3+1);n(G);var Z=Array(L);n(Z);var Y=Array(B);n(Y);var q=!1,H,K,X;a._tr_init=R,a._tr_stored_block=O,a._tr_flush_block=function(e,t,a,n){var r=0,s,i;0<e.level?(e.strm.data_type===2&&(e.strm.data_type=I(e)),C(e,e.l_desc),C(e,e.d_desc),r=k(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=a+5,a+4<=s&&-1!==t?O(e,t,a,n):e.strategy===4||i===s?(l(e,2+(n?1:0),3),E(e,U,F)):(l(e,4+(n?1:0),3),v(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),E(e,e.dyn_ltree,e.dyn_dtree)),g(e),n&&y(e)},a._tr_tally=function(e,t,a){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&a,e.last_lit++,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[2*(G[a]+256+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1},a._tr_align=function(e){l(e,2,3),p(e,256,U),u(e)}},{"../utils/common":40}],52:[function(e,t){'use strict';t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],53:[function(e,t){function a(e){var t=new r,a=t.write(e)+t.end();return a.replace(/\0/g,"").trim()}function n(t,r){if(!t)return a;try{new TextDecoder(t.trim())}catch(o){var i=s.exec(t);return i&&!r?n("windows-"+i[1],!0):a}return function(e){var a=new TextDecoder(t),n=a.decode(e,{stream:!0})+a.decode();return n.replace(/\0/g,"").trim()}}e("text-encoding-polyfill");var r=e("string_decoder").StringDecoder;t.exports=n;var s=/^(?:ASNI\s)?(\d+)$/m},{string_decoder:56,"text-encoding-polyfill":57}],54:[function(e,t){function a(e){var t={lastUpdated:new Date(e.readUInt8(1)+1900,e.readUInt8(2),e.readUInt8(3)),records:e.readUInt32LE(4),headerLen:e.readUInt16LE(8),recLen:e.readUInt16LE(10)};return t}function n(e,t,a){for(var n=[],r=32;r<t&&(n.push({name:a(e.slice(r,r+11)),dataType:d(e.readUInt8(r+11)),len:e.readUInt8(r+16),decimal:e.readUInt8(r+17)}),13!==e.readUInt8(r+32));)r+=32;return n}function r(e,t,a,n,r){var s=e.slice(t,t+a),i=r(s);return"N"===n||"F"===n||"O"===n?parseFloat(i,10):"D"===n?new Date(i.slice(0,4),parseInt(i.slice(4,6),10)-1,i.slice(6,8)):"L"===n?"y"===i.toLowerCase()||"t"===i.toLowerCase():i}function s(e,t,a,n){for(var s={},o=0,d=a.length,l,p;o<d;)p=a[o],l=r(e,t,p.len,p.dataType,n),t+=p.len,"undefined"!=typeof l&&(s[p.name]=l),o++;return s}var i=e("./decoder");t.exports=function(e,t){for(var r=i(t),o=a(e),d=n(e,o.headerLen-1,r),l=(d.length+1<<5)+2,p=o.recLen,c=o.records,u=[];c;)u.push(s(e,l,d,r)),l+=p,c--;return u}},{"./decoder":53}],55:[function(e,t,s){(function(e,a){"object"==typeof s&&"undefined"!=typeof t?t.exports=a():"function"==typeof p&&p.amd?p(a):e.proj4=a()})(this,function(){'use strict';var le=Math.asin,pe=Math.acos,ue=Math.atan2,me=Math.PI,_e=Math.atan,fe=Math.exp,he=Math.tan,ge=Math.sin,ye=Math.cos,be=Math.sqrt;function e(e,t){if(e[t])return e[t];for(var a=Object.keys(e),n=t.toLowerCase().replace(Pe,""),r=-1,s,o;++r<a.length;)if(s=a[r],o=s.toLowerCase().replace(Pe,""),o===n)return e[s]}function t(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function s(e){var a=new t(e);return a.output()}function p(e,t,a){Array.isArray(t)&&(a.unshift(t),t=null);var n=t?{}:e,r=a.reduce(function(e,t){return c(t,e),e},n);t&&(e[t]=r)}function c(e,t){if(!Array.isArray(e))return void(t[e]=!0);var a=e.shift();if("PARAMETER"===a&&(a=e.shift()),1===e.length)return Array.isArray(e[0])?(t[a]={},void c(e[0],t[a])):void(t[a]=e[0]);if(!e.length)return void(t[a]=!0);if("TOWGS84"===a)return void(t[a]=e);if("AXIS"===a)return a in t||(t[a]=[]),void t[a].push(e);Array.isArray(a)||(t[a]={});var n;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[a]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&c(e[2],t[a]));case"SPHEROID":case"ELLIPSOID":return t[a]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&c(e[3],t[a]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void p(t,a,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return c(e,t[a]);return p(t,a,e);}}function u(e,t){var a=t[0],n=t[1];!(a in e)&&n in e&&(e[a]=e[n],3===t.length&&(e[a]=t[2](e[a])))}function m(e){return e*qe}function _(e){function t(t){var a=e.to_meter||1;return t*a}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var a="",n=0,r=e.AXIS.length;n<r;++n){var s=e.AXIS[n],o=s[0].toLowerCase();-1===o.indexOf("north")?-1===o.indexOf("south")?-1===o.indexOf("east")?-1!==o.indexOf("west")&&(a+="w"):a+="e":a+="s":a+="n"}2===a.length&&(a+="u"),3===a.length&&(e.axis=a)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var d=e.GEOGCS;"GEOGCS"===e.type&&(d=e),d&&(e.datumCode=d.DATUM?d.DATUM.name.toLowerCase():d.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===e.datumCode||"new_zealand_1949"===e.datumCode)&&(e.datumCode="nzgd49"),("wgs_1984"===e.datumCode||"world_geodetic_system_1984"===e.datumCode)&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(e.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=d.DATUM.SPHEROID.a,e.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(e.datum_params=d.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",m],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",m],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",m],["lat0","latitude_of_origin",m],["lat0","standard_parallel_1",m],["lat1","standard_parallel_1",m],["lat2","standard_parallel_2",m],["azimuth","Azimuth"],["alpha","azimuth",m],["srsCode","name"]].forEach(function(t){return u(e,t)}),!e.long0&&e.longc&&("Albers_Conic_Equal_Area"===e.projName||"Lambert_Azimuthal_Equal_Area"===e.projName)&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&("Stereographic_South_Pole"===e.projName||"Polar Stereographic (variant B)"===e.projName)&&(e.lat0=m(0<e.lat1?90:-90),e.lat_ts=e.lat1)}function f(e){var t=this;if(2===arguments.length){var a=arguments[1];f[e]="string"==typeof a?"+"===a.charAt(0)?Ne(arguments[1]):He(arguments[1]):a}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?f.apply(t,e):f(e)});if("string"!=typeof e)"EPSG"in e?f["EPSG:"+e.EPSG]=e:"ESRI"in e?f["ESRI:"+e.ESRI]=e:"IAU2000"in e?f["IAU2000:"+e.IAU2000]=e:console.log(e);else if(e in f)return f[e]}}function h(e){return"string"==typeof e}function g(e){return e in f}function y(e){return Ke.some(function(t){return-1<e.indexOf(t)})}function b(t){var a=e(t,"authority");if(a){var n=e(a,"epsg");return n&&-1<Xe.indexOf(n)}}function x(t){var a=e(t,"extension");return a?e(a,"proj4"):void 0}function w(e){return"+"===e[0]}function E(e){if(h(e)){if(g(e))return f[e];if(y(e)){var t=He(e);if(b(t))return f["EPSG:3857"];var a=x(t);return a?Ne(a):t}if(w(e))return Ne(e)}else return e}function C(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=be(this.es),this.lat_ts?this.sphere?this.k0=ye(this.lat_ts):this.k0=Qe(this.e,ge(this.lat_ts),ye(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function A(e){return e}function S(e,t){var a=nt.length;return e.names?(nt[a]=e,e.names.forEach(function(e){at[e.toLowerCase()]=a}),this):(console.log(t),!0)}function k(t,n,r,s){var i=t*t,o=n*n,d=(i-o)/i,l=0;s?(t*=1-d*(Ae+d*(Se+d*ke)),i=t*t,d=0):l=be(d);var p=(i-o)/o;return{es:d,e:l,ep2:p}}function v(t,r,s,i,o){if(!t){var d=e(rt,i);d||(d=st),t=d.a,r=d.b,s=d.rf}return s&&!r&&(r=(1-1/s)*t),(0===s||n(t-r)<ve)&&(o=!0,r=t),{a:t,b:r,rf:s,sphere:o}}function I(e,t,n,a,r,s){var i={};return i.datum_type=void 0===e||"none"===e?5:4,t&&(i.datum_params=t.map(parseFloat),(0!==i.datum_params[0]||0!==i.datum_params[1]||0!==i.datum_params[2])&&(i.datum_type=1),3<i.datum_params.length&&(0!==i.datum_params[3]||0!==i.datum_params[4]||0!==i.datum_params[5]||0!==i.datum_params[6])&&(i.datum_type=2,i.datum_params[3]*=we,i.datum_params[4]*=we,i.datum_params[5]*=we,i.datum_params[6]=i.datum_params[6]/1e6+1)),i.a=n,i.b=a,i.es=r,i.ep2=s,i}function R(t,a){if(!(this instanceof R))return new R(t);a=a||function(e){if(e)throw e};var n=E(t);if("object"!=typeof n)return void a(t);var r=R.projections.get(n.projName);if(!r)return void a(t);if(n.datumCode&&"none"!==n.datumCode){var s=e(it,n.datumCode);s&&(n.datum_params=s.towgs84?s.towgs84.split(","):null,n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var i=v(n.a,n.b,n.rf,n.ellps,n.sphere),o=k(i.a,i.b,i.rf,n.R_A),d=n.datum||I(n.datumCode,n.datum_params,i.a,i.b,o.es,o.ep2);We(this,n),We(this,r),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=d,this.init(),a(null,this)}function O(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||5e-11<n(e.es-t.es))&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}function z(e,t,n){var a=e.x,r=e.y,s=e.z?e.z:0,i,o,d,l;if(r<-Ce&&r>-1.001*Ce)r=-Ce;else if(r>Ce&&r<1.001*Ce)r=Ce;else{if(r<-Ce)return{x:-Infinity,y:-Infinity,z:e.z};if(r>Ce)return{x:1/0,y:1/0,z:e.z}}return a>me&&(a-=2*me),o=ge(r),l=ye(r),d=o*o,i=n/be(1-t*d),{x:(i+s)*l*ye(a),y:(i+s)*l*ge(a),z:(i*(1-t)+s)*o}}function L(e,t,r,a){var s=1e-12,i=e.x,o=e.y,d=e.z?e.z:0,l,p,c,u,m,_,f,h,g,y,b,x,w,E,C,A;if(l=be(i*i+o*o),p=be(i*i+o*o+d*d),!(l/r<s))E=ue(o,i);else if(E=0,p/r<s)return C=Ce,A=-a,{x:e.x,y:e.y,z:e.z};c=d/p,u=l/p,m=1/be(1-t*(2-t)*u*u),h=u*(1-t)*m,g=c*m,w=0;do w++,f=r/be(1-t*g*g),A=l*h+d*g-f*(1-t*g*g),_=t*f/(f+A),m=1/be(1-_*(2-_)*u*u),y=u*(1-_)*m,b=c*m,x=b*h-y*g,h=y,g=b;while(x*x>s*s&&w<30);return C=_e(b/n(y)),{x:E,y:C,z:A}}function T(e,t,a){if(1===t)return{x:e.x+a[0],y:e.y+a[1],z:e.z+a[2]};if(2===t){var n=a[0],r=a[1],s=a[2],i=a[3],o=a[4],d=a[5],l=a[6];return{x:l*(e.x-d*e.y+o*e.z)+n,y:l*(d*e.x+e.y-i*e.z)+r,z:l*(-o*e.x+i*e.y+e.z)+s}}}function B(e,t,a){if(1===t)return{x:e.x-a[0],y:e.y-a[1],z:e.z-a[2]};if(2===t){var n=a[0],r=a[1],s=a[2],i=a[3],o=a[4],d=a[5],l=a[6],p=(e.x-n)/l,c=(e.y-r)/l,u=(e.z-s)/l;return{x:p+d*c-o*u,y:-d*p+c+i*u,z:o*p-i*c+u}}}function P(e){return 1===e||2===e}function N(e){var t=Number.isFinite;if("function"==typeof t){if(t(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function D(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}function j(e,t,a){var n;return Array.isArray(a)&&(a=lt(a)),pt(a),e.datum&&t.datum&&D(e,t)&&(n=new R("WGS84"),a=j(e,n,a),e=n),"enu"!==e.axis&&(a=dt(e,!1,a)),"longlat"===e.projName?a={x:a.x*Ie,y:a.y*Ie,z:a.z||0}:(e.to_meter&&(a={x:a.x*e.to_meter,y:a.y*e.to_meter,z:a.z||0}),a=e.inverse(a)),e.from_greenwich&&(a.x+=e.from_greenwich),a=ot(e.datum,t.datum,a),t.from_greenwich&&(a={x:a.x-t.from_greenwich,y:a.y,z:a.z||0}),"longlat"===t.projName?a={x:a.x*Re,y:a.y*Re,z:a.z||0}:(a=t.forward(a),t.to_meter&&(a={x:a.x/t.to_meter,y:a.y/t.to_meter,z:a.z||0})),"enu"===t.axis?a:dt(t,!0,a)}function U(e,t,a){var n,r,s;return Array.isArray(a)?(n=j(e,t,a)||{x:NaN,y:NaN},2<a.length?"undefined"!=typeof e.name&&"geocent"===e.name||"undefined"!=typeof t.name&&"geocent"===t.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(a.splice(3)):[n.x,n.y,a[2]].concat(a.splice(3)):[n.x,n.y].concat(a.splice(2)):[n.x,n.y]):(r=j(e,t,a),s=Object.keys(a),2===s.length)?r:(s.forEach(function(n){if("undefined"!=typeof e.name&&"geocent"===e.name||"undefined"!=typeof t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return;}else if("x"===n||"y"===n)return;r[n]=a[n]}),r)}function F(e){return e instanceof R?e:e.oProj?e.oProj:R(e)}function M(e,t,a){e=F(e);var n=!1,r;return"undefined"==typeof t?(t=e,e=ct,n=!0):("undefined"!=typeof t.x||Array.isArray(t))&&(a=t,t=e,e=ct,n=!0),t=F(t),a?U(e,t,a):(r={forward:function(a){return U(e,t,a)},inverse:function(a){return U(t,e,a)}},n&&(r.oProj=t),r)}function G(e,t){return t=t||5,W(H({lat:e[1],lon:e[0]}),t)}function Z(e){var t=K($(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Y(e){return e*(me/180)}function q(e){return 180*(e/me)}function H(e){var t=Math.round,n=e.lat,s=e.lon,i=6378137,a=.00669438,o=.9996,d=Y(n),l=Y(s),p,c,u,m,_,f,h,g,y;y=r((s+180)/6)+1,180===s&&(y=60),56<=n&&64>n&&3<=s&&12>s&&(y=32),72<=n&&84>n&&(0<=s&&9>s?y=31:9<=s&&21>s?y=33:21<=s&&33>s?y=35:33<=s&&42>s&&(y=37)),p=6*(y-1)-180+3,g=Y(p),c=a/(1-a),u=i/be(1-a*ge(d)*ge(d)),m=he(d)*he(d),_=c*ye(d)*ye(d),f=ye(d)*(l-g),h=i*((1-a/4-3*a*a/64-5*a*a*a/256)*d-(3*a/8+3*a*a/32+45*a*a*a/1024)*ge(2*d)+(15*a*a/256+45*a*a*a/1024)*ge(4*d)-35*a*a*a/3072*ge(6*d));var b=o*u*(65+65*(65*(65*(1-m+_)))/6+65*(65*(65*(65*(65*(5-18*m+m*m+72*_-58*c)))))/120)+5e5,x=o*(h+u*he(d)*(4225/2+65*(65*(65*(65*(5-m+9*_+4*_*_))))/24+65*(65*(65*(65*(65*(65*(61-58*m+m*m+600*_-330*c))))))/720));return 0>n&&(x+=1e7),{northing:t(x),easting:t(b),zoneNumber:y,zoneLetter:X(n)}}function K(e){var t=e.northing,n=e.easting,r=e.zoneLetter,s=e.zoneNumber;if(0>s||60<s)return null;var i=.9996,d=6378137,a=.00669438,l=(1-be(1-a))/(1+be(1-a)),p=t,c,u,m,_,f,h,g,b,x,w;"N">r&&(p-=1e7),b=6*(s-1)-180+3,c=a/(1-a),g=p/i,x=g/(d*(1-a/4-3*a*a/64-5*a*a*a/256)),w=x+(3*l/2-27*l*l*l/32)*ge(2*x)+(21*l*l/16-55*l*l*l*l/32)*ge(4*x)+151*l*l*l/96*ge(6*x),u=d/be(1-a*ge(w)*ge(w)),m=he(w)*he(w),_=c*ye(w)*ye(w),f=d*(1-a)/o(1-a*ge(w)*ge(w),1.5),h=(n-5e5)/(u*i);var E=w-u*he(w)/f*(h*h/2-(5+3*m+10*_-4*_*_-9*c)*h*h*h*h/24+(61+90*m+298*_+45*m*m-252*c-3*_*_)*h*h*h*h*h*h/720);E=q(E);var C=(h-(1+2*m+_)*h*h*h/6+(5-2*_+28*m-3*_*_+8*c+24*m*m)*h*h*h*h*h/120)/ye(w);C=b+q(C);var A;if(e.accuracy){var S=K({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});A={top:S.lat,right:S.lon,bottom:E,left:C}}else A={lat:E,lon:C};return A}function X(e){var t="Z";return 84>=e&&72<=e?t="X":72>e&&64<=e?t="W":64>e&&56<=e?t="V":56>e&&48<=e?t="U":48>e&&40<=e?t="T":40>e&&32<=e?t="S":32>e&&24<=e?t="R":24>e&&16<=e?t="Q":16>e&&8<=e?t="P":8>e&&0<=e?t="N":0>e&&-8<=e?t="M":-8>e&&-16<=e?t="L":-16>e&&-24<=e?t="K":-24>e&&-32<=e?t="J":-32>e&&-40<=e?t="H":-40>e&&-48<=e?t="G":-48>e&&-56<=e?t="F":-56>e&&-64<=e?t="E":-64>e&&-72<=e?t="D":-72>e&&-80<=e&&(t="C"),t}function W(e,t){var a="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Q(e.easting,e.northing,e.zoneNumber)+a.substr(a.length-5,t)+n.substr(n.length-5,t)}function Q(e,t,a){var n=J(a),s=r(e/1e5),i=r(t/1e5)%20;return V(s,i,n)}function J(e){var t=e%6;return 0===t&&(t=6),t}function V(e,t,a){var n=a-1,r="AJSAJS".charCodeAt(n),s="AFAFAF".charCodeAt(n),i=r+e-1,o=s+t,l=!1;90<i&&(i=i-90+65-1,l=!0),(73===i||73>r&&73<i||(73<i||73>r)&&l)&&i++,(79===i||79>r&&79<i||(79<i||79>r)&&l)&&(i++,73===i&&i++),90<i&&(i=i-90+65-1),86<o?(o=o-86+65-1,l=!0):l=!1,(73===o||73>s&&73<o||(73<o||73>s)&&l)&&o++,(79===o||79>s&&79<o||(79<o||79>s)&&l)&&(o++,73===o&&o++),86<o&&(o=o-86+65-1);var p=d(i)+d(o);return p}function $(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t=e.length,a=null,n="",r=0,s;!/[A-Z]/.test(s=e.charAt(r));){if(2<=r)throw"MGRSPoint bad conversion from: "+e;n+=s,r++}var d=parseInt(n,10);if(0===r||r+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(r++);if("A">=l||"B"===l||"Y"===l||"Z"<=l||"I"===l||"O"===l)throw"MGRSPoint zone letter "+l+" not handled: "+e;a=e.substring(r,r+=2);for(var p=J(d),c=ee(a.charAt(0),p),u=te(a.charAt(1),p);u<ae(l);)u+=2e6;var m=t-r;if(0!=m%2)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var _=m/2,f=0,h=0,g,y,b,x,w;return 0<_&&(g=1e5/o(10,_),y=e.substring(r,r+_),f=parseFloat(y)*g,b=e.substring(r+_),h=parseFloat(b)*g),x=f+c,w=h+u,{easting:x,northing:w,zoneLetter:l,zoneNumber:d,accuracy:g}}function ee(t,e){for(var a="AJSAJS".charCodeAt(e-1),n=1e5,r=!1;a!==t.charCodeAt(0);){if(a++,73===a&&a++,79===a&&a++,90<a){if(r)throw"Bad character: "+t;a=65,r=!0}n+=1e5}return n}function te(e,t){if("V"<e)throw"MGRSPoint given invalid Northing "+e;for(var a="AFAFAF".charCodeAt(t-1),n=0,r=!1;a!==e.charCodeAt(0);){if(a++,73===a&&a++,79===a&&a++,86<a){if(r)throw"Bad character: "+e;a=65,r=!0}n+=1e5}return n}function ae(e){var t;if(t="C"===e?11e5:"D"===e?2e6:"E"===e?28e5:"F"===e?37e5:"G"===e?46e5:"H"===e?55e5:"J"===e?64e5:"K"===e?73e5:"L"===e?82e5:"M"===e?91e5:"N"===e?0:"P"===e?8e5:"Q"===e?17e5:"R"===e?26e5:"S"===e?35e5:"T"===e?44e5:"U"===e?53e5:"V"===e?62e5:"W"===e?7e6:"X"===e?79e5:-1,0<=t)return t;throw"Invalid zone letter: "+e}function ne(e,t,a){if(!(this instanceof ne))return new ne(e,t,a);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&"undefined"==typeof t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function re(e){var a=[],n;return a[0]=e*qt,n=e*e,a[0]+=n*Ht,a[1]=n*Xt,n*=e,a[0]+=n*Kt,a[1]+=n*Wt,a[2]=n*Qt,a}function se(e,a){var n=e+e;return e+a[0]*ge(n)+a[1]*ge(n+n)+a[2]*ge(n+n+n)}function ie(e,t,a,r){var s;return e<ve?(r.value=_a.AREA_0,s=0):(s=ue(t,a),n(s)<=Oe?r.value=_a.AREA_0:s>Oe&&s<=Ce+Oe?(r.value=_a.AREA_1,s-=Ce):s>Ce+Oe||s<=-(Ce+Oe)?(r.value=_a.AREA_2,s=0<=s?s-Le:s+Le):(r.value=_a.AREA_3,s+=Ce)),s}function oe(e,t){var a=e+t;return a<-Le?a+=ze:a>+Le&&(a-=ze),a}function de(e,t,a,r){for(var s=t,i;r&&(i=e(s),s-=i,!(n(i)<a));--r);return s}var xe=5,we=484813681109536e-20,Ce=me/2,Ae=.16666666666666666,Se=.04722222222222222,ke=.022156084656084655,ve=1e-10,Ie=.017453292519943295,Re=57.29577951308232,Oe=me/4,ze=2*me,Le=3.14159265359,Te={};Te.greenwich=0,Te.lisbon=-9.131906111111,Te.paris=2.337229166667,Te.bogota=-74.080916666667,Te.madrid=-3.687938888889,Te.rome=12.452333333333,Te.bern=7.439583333333,Te.jakarta=106.807719444444,Te.ferro=-17.666666666667,Te.brussels=4.367975,Te.stockholm=18.058277777778,Te.athens=23.7163375,Te.oslo=10.722916666667;var Be={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Pe=/[\s_\-\/\(\)]/g,Ne=function(t){var a={},n=t.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var a=t.split("=");return a.push(!0),e[a[0].toLowerCase()]=a[1],e},{}),r={proj:"projName",datum:"datumCode",rf:function(e){a.rf=parseFloat(e)},lat_0:function(e){a.lat0=e*Ie},lat_1:function(e){a.lat1=e*Ie},lat_2:function(e){a.lat2=e*Ie},lat_ts:function(e){a.lat_ts=e*Ie},lon_0:function(e){a.long0=e*Ie},lon_1:function(e){a.long1=e*Ie},lon_2:function(e){a.long2=e*Ie},alpha:function(e){a.alpha=parseFloat(e)*Ie},lonc:function(e){a.longc=e*Ie},x_0:function(e){a.x0=parseFloat(e)},y_0:function(e){a.y0=parseFloat(e)},k_0:function(e){a.k0=parseFloat(e)},k:function(e){a.k0=parseFloat(e)},a:function(e){a.a=parseFloat(e)},b:function(e){a.b=parseFloat(e)},r_a:function(){a.R_A=!0},zone:function(e){a.zone=parseInt(e,10)},south:function(){a.utmSouth=!0},towgs84:function(e){a.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){a.to_meter=parseFloat(e)},units:function(t){a.units=t;var n=e(Be,t);n&&(a.to_meter=n.to_meter)},from_greenwich:function(e){a.from_greenwich=e*Ie},pm:function(t){var n=e(Te,t);a.from_greenwich=(n?n:parseFloat(t))*Ie},nadgrids:function(e){"@null"===e?a.datumCode="none":a.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(a.axis=e)}},s,i,o;for(s in n)i=n[s],s in r?(o=r[s],"function"==typeof o?o(i):a[o]=i):a[s]=i;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a},De=1,je=2,Ue=3,Fe=4,Me=5,Ge=-1,Ze=/[,\]]/,Ye=/[\d\.E\-\+]/;t.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Fe)for(;/\s/.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case De:return this.neutral(e);case je:return this.keyword(e);case Fe:return this.quoted(e);case Me:return this.afterquote(e);case Ue:return this.number(e);case Ge:}},t.prototype.afterquote=function(e){if("\""===e)return this.word+="\"",void(this.state=Fe);if(Ze.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+"\" in afterquote yet, index "+this.place)},t.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=De)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=De,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Ge))):void 0},t.prototype.number=function(e){if(Ye.test(e))return void(this.word+=e);if(Ze.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+"\" in number yet, index "+this.place)},t.prototype.quoted=function(e){return"\""===e?void(this.state=Me):void(this.word+=e)},t.prototype.keyword=function(e){if(/[A-Za-z84]/.test(e))return void(this.word+=e);if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=De)}if(Ze.test(e))return void this.afterItem(e);throw new Error("havn't handled \""+e+"\" in keyword yet, index "+this.place)},t.prototype.neutral=function(e){if(/[A-Za-z]/.test(e))return this.word=e,void(this.state=je);if("\""===e)return this.word="",void(this.state=Fe);if(Ye.test(e))return this.word=e,void(this.state=Ue);if(Ze.test(e))return void this.afterItem(e);throw new Error("havn't handled \""+e+"\" in neutral yet, index "+this.place)},t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ge)return this.root;throw new Error("unable to parse string \""+this.text+"\". State is "+this.state)};var qe=.017453292519943295,He=function(e){var t=s(e),a=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",a]);var r={};return c(t,r),_(r),r};(function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]})(f);var Ke=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Xe=["3857","900913","3785","102113"],We=function(e,t){e=e||{};var a,n;if(!t)return e;for(n in t)a=t[n],void 0!==a&&(e[n]=a);return e},Qe=function(e,t,a){var n=e*t;return a/be(1-n*n)},Je=function(e){return 0>e?-1:1},Ve=function(e){return n(e)<=Le?e:e-Je(e)*ze},$e=function(e,t,a){var n=e*a;return n=o((1-n)/(1+n),.5*e),he(.5*(Ce-t))/n},et=function(e,t){for(var a=Ce-2*_e(t),r=0,s,d;15>=r;r++)if(s=e*ge(a),d=Ce-2*_e(t*o((1-s)/(1+s),.5*e))-a,a+=d,1e-10>=n(d))return a;return-9999},tt=[{init:C,forward:function(e){var t=e.x,r=e.y;if(90<r*Re&&-90>r*Re&&180<t*Re&&-180>t*Re)return null;var s,i;if(n(n(r)-Ce)<=ve)return null;if(this.sphere)s=this.x0+this.a*this.k0*Ve(t-this.long0),i=this.y0+this.a*this.k0*a(he(Oe+.5*r));else{var o=ge(r),d=$e(this.e,r,o);s=this.x0+this.a*this.k0*Ve(t-this.long0),i=this.y0-this.a*this.k0*a(d)}return e.x=s,e.y=i,e},inverse:function(e){var t=e.x-this.x0,a=e.y-this.y0,n,r;if(this.sphere)r=Ce-2*_e(fe(-a/(this.a*this.k0)));else{var s=fe(-a/(this.a*this.k0));if(r=et(this.e,s),-9999===r)return null}return n=Ve(this.long0+t/(this.a*this.k0)),e.x=n,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:A,inverse:A,names:["longlat","identity"]}],at={},nt=[],rt={};rt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},rt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},rt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},rt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},rt.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},rt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},rt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},rt.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},rt.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},rt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},rt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},rt.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},rt.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},rt.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},rt.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},rt.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},rt.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},rt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},rt.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},rt.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},rt.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},rt.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},rt.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},rt.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},rt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},rt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},rt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},rt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},rt.hough={a:6378270,rf:297,ellipseName:"Hough"},rt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},rt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},rt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},rt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},rt.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},rt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},rt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},rt.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},rt.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},rt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},rt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},rt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var st=rt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};rt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var it={};it.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},it.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},it.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},it.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},it.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},it.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},it.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},it.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},it.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},it.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},it.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},it.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},it.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},it.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},it.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},it.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},it.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},R.projections={start:function(){tt.forEach(S)},add:S,get:function(e){if(!e)return!1;var t=e.toLowerCase();if("undefined"!=typeof at[t]&&nt[at[t]])return nt[at[t]]}},R.projections.start(),"use strict";var ot=function(e,t,a){return O(e,t)?a:e.datum_type===xe||t.datum_type===xe?a:e.es!==t.es||e.a!==t.a||P(e.datum_type)||P(t.datum_type)?(a=z(a,e.es,e.a),P(e.datum_type)&&(a=T(a,e.datum_type,e.datum_params)),P(t.datum_type)&&(a=B(a,t.datum_type,t.datum_params)),L(a,t.es,t.a,t.b)):a},dt=function(e,a,n){var r=n.x,s=n.y,o=n.z||0,d={},l,p,c;for(c=0;3>c;c++)if(!(a&&2===c&&void 0===n.z))switch(0===c?(l=r,p=-1==="ew".indexOf(e.axis[c])?"y":"x"):1===c?(l=s,p=-1==="ns".indexOf(e.axis[c])?"x":"y"):(l=o,p="z"),e.axis[c]){case"e":case"w":case"n":case"s":d[p]=l;break;case"u":void 0!==n[p]&&(d.z=l);break;case"d":void 0!==n[p]&&(d.z=-l);break;default:return null;}return d},lt=function(e){var t={x:e[0],y:e[1]};return 2<e.length&&(t.z=e[2]),3<e.length&&(t.m=e[3]),t},pt=function(e){N(e.x),N(e.y)},ct=R("WGS84");ne.fromMGRS=function(e){return new ne(Z(e))},ne.prototype.toMGRS=function(e){return G([this.x,this.y],e)};var ut=.046875,mt=.01953125,_t=.01068115234375,ft=function(e){var a=[];a[0]=1-e*(.25+e*(ut+e*(mt+e*_t))),a[1]=e*(.75-e*(ut+e*(mt+e*_t)));var n=e*e;return a[2]=n*(.46875-e*(.013020833333333334+e*.007120768229166667)),n*=e,a[3]=n*(.3645833333333333-e*.005696614583333333),a[4]=n*e*.3076171875,a},ht=function(e,t,a,n){return a*=t,t*=t,n[0]*e-a*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},gt=function(e,a,r){for(var o=e,d=20;d;--d){var l=ge(o),s=1-a*l*l;if(s=(ht(o,l,ye(o),r)-e)*(s*be(s))*(1/(1-a)),o-=s,n(s)<ve)return o}return o},yt={init:function(){this.x0=void 0===this.x0?0:this.x0,this.y0=void 0===this.y0?0:this.y0,this.long0=void 0===this.long0?0:this.long0,this.lat0=void 0===this.lat0?0:this.lat0,this.es&&(this.en=ft(this.es),this.ml0=ht(this.lat0,ge(this.lat0),ye(this.lat0),this.en))},forward:function(e){var r=e.x,s=e.y,i=Ve(r-this.long0),d=ge(s),l=ye(s),p,u,m;if(!this.es){var _=l*ge(i);if(n(n(_)-1)<ve)return 93;if(u=.5*this.a*this.k0*a((1+_)/(1-_))+this.x0,m=l*ye(i)/be(1-o(_,2)),_=n(m),1<=_){if(_-1>ve)return 93;m=0}else m=pe(m);0>s&&(m=-m),m=this.a*this.k0*(m-this.lat0)+this.y0}else{var f=l*i,h=o(f,2),g=this.ep2*o(l,2),c=o(g,2),w=n(l)>ve?he(s):0,E=o(w,2),t=o(E,2);p=1-this.es*o(d,2),f/=be(p);var C=ht(s,d,l,this.en);u=this.a*(this.k0*f*(1+h/6*(1-E+g+h/20*(5-18*E+t+14*g-58*E*g+h/42*(61+179*t-t*E-479*E)))))+this.x0,m=this.a*(this.k0*(C-this.ml0+d*i*f/2*(1+h/12*(5-E+9*g+4*c+h/30*(61+t-58*E+270*g-330*E*g+h/56*(1385+543*t-t*E-3111*E))))))+this.y0}return e.x=u,e.y=m,e},inverse:function(e){var a=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a),s,i,l,p;if(!this.es){var u=fe(a/this.k0),m=.5*(u-1/u),_=this.lat0+r/this.k0,f=ye(_);s=be((1-o(f,2))/(1+o(m,2))),l=le(s),0>r&&(l=-l),p=0===m&&0===f?0:Ve(ue(m,f)+this.long0)}else if(s=this.ml0+r/this.k0,i=gt(s,this.es,this.en),n(i)<Ce){var h=ge(i),g=ye(i),y=n(g)>ve?he(i):0,b=this.ep2*o(g,2),c=o(b,2),x=o(y,2),t=o(x,2);s=1-this.es*o(h,2);var w=a*be(s)/this.k0,d=o(w,2);s*=y,l=i-.5*(s*d/(1-this.es))*(1-d/12*(5+3*x-9*b*x+b-4*c-d/30*(61+90*x-252*b*x+45*t+46*b-d/56*(1385+3633*x+4095*t+1574*t*x)))),p=Ve(this.long0+w*(1-d/6*(1+2*x+b-d/20*(5+28*x+24*t+8*b*x+6*b-d/42*(61+662*x+1320*t+720*t*x))))/g)}else l=Ce*Je(r),p=0;return e.x=p,e.y=l,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},bt=function(e){var t=fe(e);return t=(t-1/t)/2,t},xt=function(e,t){var r=Math.max;e=n(e),t=n(t);var s=r(e,t),a=l(e,t)/(s?s:1);return s*be(1+o(a,2))},wt=function(e){var t=1+e,n=t-1;return 0===n?e:e*a(t)/n},Et=function(e){var t=n(e);return t=wt(t*(1+t/(xt(1,t)+1))),0>e?-t:t},Ct=function(e,t){for(var a=2*ye(2*t),n=e.length-1,r=e[n],s=0,o;0<=--n;)o=-s+a*r+e[n],s=r,r=o;return t+o*ge(2*t)},At=function(e,t){for(var a=2*ye(t),n=e.length-1,r=e[n],s=0,o;0<=--n;)o=-s+a*r+e[n],s=r,r=o;return ge(t)*o},St=function(e){var t=fe(e);return t=(t+1/t)/2,t},kt=function(e,t,a){for(var n=ge(t),s=ye(t),o=bt(a),d=St(a),l=2*s*d,p=-2*n*o,c=e.length-1,u=e[c],m=0,_=0,f=0,h,g;0<=--c;)h=_,g=m,_=u,m=f,u=-h+l*_-p*m+e[c],f=-g+p*_+l*m;return l=n*d,p=s*o,[l*u-p*f,l*f+p*u]},vt={init:function(){if(void 0===this.es||0>=this.es)throw new Error("incorrect elliptical usage");this.x0=void 0===this.x0?0:this.x0,this.y0=void 0===this.y0?0:this.y0,this.long0=void 0===this.long0?0:this.long0,this.lat0=void 0===this.lat0?0:this.lat0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+be(1-this.es)),t=e/(2-e),a=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),a*=t,this.cgb[1]=a*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=a*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),a*=t,this.cgb[2]=a*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=a*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),a*=t,this.cgb[3]=a*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=a*(1237/630+t*(-12/5+t*(-24832/14175))),a*=t,this.cgb[4]=a*(4174/315+t*(-144838/6237)),this.cbg[4]=a*(-734/315+t*(109598/31185)),a*=t,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=o(t,2),this.Qn=this.k0/(1+t)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=a*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=a*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),a*=t,this.utg[2]=a*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=a*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),a*=t,this.utg[3]=a*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=a*(49561/161280+t*(-179/168+t*(6601661/7257600))),a*=t,this.utg[4]=a*(-4583/161280+t*(108847/3991680)),this.gtu[4]=a*(34729/80640+t*(-3418889/1995840)),a*=t,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=a*(212378941/319334400);var n=Ct(this.cbg,this.lat0);this.Zb=-this.Qn*(n+At(this.gtu,2*n))},forward:function(e){var t=Ve(e.x-this.long0),a=e.y;a=Ct(this.cbg,a);var r=ge(a),s=ye(a),i=ge(t),o=ye(t);a=ue(r,o*s),t=ue(i*s,xt(r,s*o)),t=Et(he(t));var d=kt(this.gtu,2*a,2*t);a+=d[0],t+=d[1];var l,p;return 2.623395162778>=n(t)?(l=this.a*(this.Qn*t)+this.x0,p=this.a*(this.Qn*a+this.Zb)+this.y0):(l=1/0,p=1/0),e.x=l,e.y=p,e},inverse:function(e){var t=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);a=(a-this.Zb)/this.Qn,t/=this.Qn;var r,s;if(2.623395162778>=n(t)){var i=kt(this.utg,2*a,2*t);a+=i[0],t+=i[1],t=_e(bt(t));var o=ge(a),d=ye(a),l=ge(t),p=ye(t);a=ue(o*p,xt(l,p*d)),t=ue(l,p*d),r=Ve(t+this.long0),s=Ct(this.cgb,a)}else r=1/0,s=1/0;return e.x=r,e.y=s,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},It=function(e,t){if(void 0===e){if(e=r(30*(Ve(t)+me)/me)+1,0>e)return 0;if(60<e)return 60}return e},Rt={init:function(){var e=It(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*n(e)-183)*Ie,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,vt.init.apply(this),this.forward=vt.forward,this.inverse=vt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ot=function(e,t){return o((1-e)/(1+e),t)},zt={init:function(){var e=ge(this.lat0),t=ye(this.lat0);t*=t,this.rc=be(1-this.es)/(1-this.es*e*e),this.C=be(1+this.es*t*t/(1-this.es)),this.phic0=le(e/this.C),this.ratexp=.5*this.C*this.e,this.K=he(.5*this.phic0+Oe)/(o(he(.5*this.lat0+Oe),this.C)*Ot(this.e*e,this.ratexp))},forward:function(e){var t=e.x,a=e.y;return e.y=2*_e(this.K*o(he(.5*a+Oe),this.C)*Ot(this.e*ge(a),this.ratexp))-Ce,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,a=e.y,r=o(he(.5*a+Oe)/this.K,1/this.C),s=20;0<s&&(a=2*_e(r*Ot(this.e*ge(e.y),-.5*this.e))-Ce,!(n(a-e.y)<1e-14));--s)e.y=a;return s?(e.x=t,e.y=a,e):null},names:["gauss"]},Lt={init:function(){zt.init.apply(this),this.rc&&(this.sinc0=ge(this.phic0),this.cosc0=ye(this.phic0),this.R2=2*this.rc,!this.title&&(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,a,n,r;return e.x=Ve(e.x-this.long0),zt.forward.apply(this,[e]),t=ge(e.y),a=ye(e.y),n=ye(e.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*a*n),e.x=r*a*ge(e.x),e.y=r*(this.cosc0*t-this.sinc0*a*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,a,n,r,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=be(e.x*e.x+e.y*e.y)){var i=2*ue(s,this.R2);t=ge(i),a=ye(i),r=le(a*this.sinc0+e.y*t*this.cosc0/s),n=ue(e.x*t,s*this.cosc0*a-e.y*this.sinc0*t)}else r=this.phic0,n=0;return e.x=n,e.y=r,zt.inverse.apply(this,[e]),e.x=Ve(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Tt={init:function(){this.coslat0=ye(this.lat0),this.sinlat0=ge(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&n(this.coslat0)<=ve&&(this.k0=.5*(1+Je(this.lat0)*ge(this.lat_ts))):(n(this.coslat0)<=ve&&(0<this.lat0?this.con=1:this.con=-1),this.cons=be(o(1+this.e,1+this.e)*o(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&n(this.coslat0)<=ve&&(this.k0=.5*this.cons*Qe(this.e,ge(this.lat_ts),ye(this.lat_ts))/$e(this.e,this.con*this.lat_ts,this.con*ge(this.lat_ts))),this.ms1=Qe(this.e,this.sinlat0,this.coslat0),this.X0=2*_e(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ce,this.cosX0=ye(this.X0),this.sinX0=ge(this.X0))},forward:function(e){var t=e.x,a=e.y,r=ge(a),s=ye(a),i=Ve(t-this.long0),o,d,l,p,c,u;return n(n(t-this.long0)-me)<=ve&&n(a+this.lat0)<=ve?(e.x=NaN,e.y=NaN,e):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*s*ye(i)),e.x=65*this.a*s*ge(i)+this.x0,e.y=65*this.a*(this.coslat0*r-this.sinlat0*s*ye(i))+this.y0,e):(d=2*_e(this.ssfn_(a,r,this.e))-Ce,p=ye(d),l=ge(d),n(this.coslat0)<=ve)?(c=$e(this.e,a*this.con,this.con*r),u=2*this.a*this.k0*c/this.cons,e.x=this.x0+u*ge(t-this.long0),e.y=this.y0-this.con*u*ye(t-this.long0),e):(n(this.sinlat0)<ve?(o=2*this.a*this.k0/(1+p*ye(i)),e.y=65*l):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*p*ye(i))),e.y=65*(this.cosX0*l-this.sinX0*p*ye(i))+this.y0),e.x=65*p*ge(i)+this.x0,e)},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=be(e.x*e.x+e.y*e.y),a,r,s,i,o;if(this.sphere){var d=2*_e(t/(2*this.a*this.k0));return(a=this.long0,r=this.lat0,t<=ve)?(e.x=a,e.y=r,e):(r=le(ye(d)*this.sinlat0+e.y*ge(d)*this.coslat0/t),a=n(this.coslat0)<ve?0<this.lat0?Ve(this.long0+ue(e.x,-1*e.y)):Ve(this.long0+ue(e.x,e.y)):Ve(this.long0+ue(e.x*ge(d),t*this.coslat0*ye(d)-e.y*this.sinlat0*ge(d))),e.x=a,e.y=r,e)}if(n(this.coslat0)<=ve){if(t<=ve)return r=this.lat0,a=this.long0,e.x=a,e.y=r,e;e.x*=this.con,e.y*=this.con,s=t*this.cons/(2*this.a*this.k0),r=this.con*et(this.e,s),a=this.con*Ve(this.con*this.long0+ue(e.x,-1*e.y))}else i=2*_e(t*this.cosX0/(2*this.a*this.k0*this.ms1)),a=this.long0,t<=ve?o=this.X0:(o=le(ye(i)*this.sinX0+e.y*ge(i)*this.cosX0/t),a=Ve(this.long0+ue(e.x*ge(i),t*this.cosX0*ye(i)-e.y*this.sinX0*ge(i)))),r=-1*et(this.e,he(.5*(Ce+o)));return e.x=a,e.y=r,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,a){return t*=a,he(.5*(Ce+e))*o((1-t)/(1+t),.5*a)}},Bt={init:function(){var t=this.lat0;this.lambda0=this.long0;var n=ge(t),r=this.a,s=this.rf,i=1/s,d=2*i-o(i,2),l=this.e=be(d);this.R=this.k0*r*be(1-d)/(1-d*o(n,2)),this.alpha=be(1+d/(1-d)*o(ye(t),4)),this.b0=le(n/this.alpha);var e=a(he(me/4+this.b0/2)),p=a(he(me/4+t/2)),c=a((1+l*n)/(1-l*n));this.K=e-this.alpha*p+this.alpha*l/2*c},forward:function(e){var t=a(he(me/4-e.y/2)),n=this.e/2*a((1+this.e*ge(e.y))/(1-this.e*ge(e.y))),r=-this.alpha*(t+n)+this.K,s=2*(_e(fe(r))-me/4),i=this.alpha*(e.x-this.lambda0),o=_e(ge(73)/(ge(this.b0)*he(s)+ye(this.b0)*ye(73))),d=le(ye(this.b0)*ge(s)-ge(this.b0)*ye(s)*ye(73));return e.y=this.R/2*a((1+ge(d))/(1-ge(d)))+this.y0,e.x=this.R*o+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,r=e.y-this.y0,s=t/this.R,i=2*(_e(fe(r/this.R))-me/4),o=le(ye(this.b0)*ge(i)+ge(this.b0)*ye(i)*ye(s)),d=_e(ge(s)/(ye(this.b0)*ye(s)-ge(this.b0)*he(i))),l=this.lambda0+73/this.alpha,p=0,c=o,u=-1e3,m=0;1e-7<n(c-u);){if(20<++m)return;p=1/this.alpha*(a(he(me/4+o/2))-this.K)+this.e*a(he(me/4+le(this.e*ge(c))/2)),u=c,c=2*_e(fe(p))-me/2}return e.x=l,e.y=c,e},names:["somerc"]},Pt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=ge(this.lat0),t=ye(this.lat0),a=this.e*e;this.bl=be(1+this.es/(1-this.es)*o(t,4)),this.al=this.a*this.bl*this.k0*be(1-this.es)/(1-a*a);var n=$e(this.e,this.lat0,e),r=this.bl/t*be((1-this.es)/(1-a*a));1>r*r&&(r=1);var s,i;if(!isNaN(this.longc))s=0<=this.lat0?r+be(r*r-1):r-be(r*r-1),this.el=s*o(n,this.bl),i=.5*(s-1/s),this.gamma0=le(ge(this.alpha)/r),this.long0=this.longc-le(i*he(this.gamma0))/this.bl;else{var d=$e(this.e,this.lat1,ge(this.lat1)),l=$e(this.e,this.lat2,ge(this.lat2));this.el=0<=this.lat0?(r+be(r*r-1))*o(n,this.bl):(r-be(r*r-1))*o(n,this.bl);var p=o(d,this.bl),c=o(l,this.bl);s=this.el/p,i=.5*(s-1/s);var u=(this.el*this.el-c*p)/(this.el*this.el+c*p),m=Ve(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-_e(u*he(.5*this.bl*m)/((c-p)/(c+p)))/this.bl,this.long0=Ve(this.long0);var _=Ve(this.long1-this.long0);this.gamma0=_e(ge(this.bl*_)/i),this.alpha=le(r*ge(this.gamma0))}this.uc=this.no_off?0:0<=this.lat0?this.al/this.bl*ue(be(r*r-1),ye(this.alpha)):-1*this.al/this.bl*ue(be(r*r-1),ye(this.alpha))},forward:function(e){var r=Number.POSITIVE_INFINITY,s=e.x,i=e.y,d=Ve(s-this.long0),l,p,c;if(n(n(i)-Ce)<=ve)c=0<i?-1:1,p=this.al/this.bl*a(he(Oe+.5*(c*this.gamma0))),l=-1*c*Ce*this.al/this.bl;else{var u=$e(this.e,i,ge(i)),t=this.el/o(u,this.bl),m=.5*(t-1/t),_=ge(this.bl*d),f=(m*ge(this.gamma0)-_*ye(this.gamma0))/(.5*(t+1/t));p=n(n(f)-1)<=ve?r:.5*this.al*a((1-f)/(1+f))/this.bl,l=n(ye(this.bl*d))<=ve?this.al*this.bl*d:this.al*ue(m*ye(this.gamma0)+_*ge(this.gamma0),ye(this.bl*d))/this.bl}return this.no_rot?(e.x=this.x0+l,e.y=this.y0+p):(l-=this.uc,e.x=this.x0+p*ye(this.alpha)+l*ge(this.alpha),e.y=this.y0+l*ye(this.alpha)-p*ge(this.alpha)),e},inverse:function(e){var t,a;this.no_rot?(a=e.y-this.y0,t=e.x-this.x0):(a=(e.x-this.x0)*ye(this.alpha)-(e.y-this.y0)*ge(this.alpha),t=(e.y-this.y0)*ye(this.alpha)+(e.x-this.x0)*ge(this.alpha),t+=this.uc);var r=fe(-1*this.bl*a/this.al),s=.5*(r-1/r),i=ge(this.bl*t/this.al),d=(i*ye(this.gamma0)+s*ge(this.gamma0))/(.5*(r+1/r)),l=o(this.el/be((1+d)/(1-d)),1/this.bl);return n(d-1)<ve?(e.x=this.long0,e.y=Ce):n(d+1)<ve?(e.x=this.long0,e.y=-1*Ce):(e.y=et(this.e,l),e.x=Ve(this.long0-ue(s*ye(this.gamma0)-i*ge(this.gamma0),ye(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Nt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(n(this.lat1+this.lat2)<ve)){var e=this.b/this.a;this.e=be(1-e*e);var t=ge(this.lat1),r=ye(this.lat1),s=Qe(this.e,t,r),i=$e(this.e,this.lat1,t),d=ge(this.lat2),l=ye(this.lat2),p=Qe(this.e,d,l),c=$e(this.e,this.lat2,d),u=$e(this.e,this.lat0,ge(this.lat0));this.ns=n(this.lat1-this.lat2)>ve?a(s/p)/a(i/c):t,isNaN(this.ns)&&(this.ns=t),this.f0=s/(this.ns*o(i,this.ns)),this.rh=this.a*this.f0*o(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,a=e.y;n(2*n(a)-me)<=ve&&(a=Je(a)*(Ce-2*ve));var r=n(n(a)-Ce),s,i;if(r>ve)s=$e(this.e,a,ge(a)),i=this.a*this.f0*o(s,this.ns);else{if(r=a*this.ns,0>=r)return null;i=0}var d=this.ns*Ve(t-this.long0);return e.x=this.k0*(i*ge(d))+this.x0,e.y=this.k0*(this.rh-i*ye(d))+this.y0,e},inverse:function(e){var t=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0,n,r,s,i,d;0<this.ns?(n=be(t*t+a*a),r=1):(n=-be(t*t+a*a),r=-1);var l=0;if(0!==n&&(l=ue(r*t,r*a)),!(0!==n||0<this.ns))i=-Ce;else if(r=1/this.ns,s=o(n/(this.a*this.f0),r),i=et(this.e,s),-9999===i)return null;return d=Ve(l/this.ns+this.long0),e.x=d,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},Dt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=be(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=be(this.e2),this.alfa=be(1+this.e2*o(ye(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=le(ge(this.fi0)/this.alfa),this.g=o((1+this.e*ge(this.fi0))/(1-this.e*ge(this.fi0)),this.alfa*this.e/2),this.k=he(this.u0/2+this.s45)/o(he(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*be(1-this.e2)/(1-this.e2*o(ge(this.fi0),2)),this.s0=1.37008346281555,this.n=ge(this.s0),this.ro0=this.k1*this.n0/he(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t=e.x,a=e.y,n=Ve(t-this.long0),r,i,l,p,c,m,_;return r=o((1+this.e*ge(a))/(1-this.e*ge(a)),this.alfa*this.e/2),i=2*(_e(this.k*o(he(a/2+this.s45),this.alfa)/r)-this.s45),l=-n*this.alfa,p=le(ye(this.ad)*ge(i)+ge(this.ad)*ye(i)*ye(l)),c=le(ye(i)*ge(l)/ye(p)),m=this.n*c,_=this.ro0*o(he(this.s0/2+this.s45),this.n)/o(he(p/2+this.s45),this.n),e.y=_*ye(m)/1,e.x=_*ge(m)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t=e.x,a,r,i,l,p,c,m,_;e.x=e.y,e.y=t,this.czech||(e.y*=-1,e.x*=-1),c=be(e.x*e.x+e.y*e.y),p=ue(e.y,e.x),l=p/ge(this.s0),i=2*(_e(o(this.ro0/c,1/this.n)*he(this.s0/2+this.s45))-this.s45),a=le(ye(this.ad)*ge(i)-ge(this.ad)*ye(i)*ye(l)),r=le(ye(i)*ge(l)/ye(a)),e.x=this.long0-r/this.alfa,m=a,_=0;var f=0;do e.y=2*(_e(o(this.k,-1/this.alfa)*o(he(a/2+this.s45),1/this.alfa)*o((1+this.e*ge(m))/(1-this.e*ge(m)),this.e/2))-this.s45),1e-10>n(m-e.y)&&(_=1),m=e.y,f+=1;while(0===_&&15>f);return 15<=f?null:e},names:["Krovak","krovak"]},jt=function(e,t,a,n,r){return e*r-t*ge(2*r)+a*ge(4*r)-n*ge(6*r)},Ut=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Ft=function(e){return .375*e*(1+.25*e*(1+.46875*e))},Mt=function(e){return .05859375*e*e*(1+.75*e)},Gt=function(e){return e*e*e*(35/3072)},Zt=function(t,a,e){var n=a*e;return t/be(1-n*n)},i=function(e){return n(e)<Ce?e:e-Je(e)*me},ce=function(e,t,a,r,s){var o,d;o=e/t;for(var l=0;15>l;l++)if(d=(e-(t*o-a*ge(2*o)+r*ge(4*o)-s*ge(6*o)))/(t-2*a*ye(2*o)+4*r*ye(4*o)-6*s*ye(6*o)),o+=d,1e-10>=n(d))return o;return NaN},Ee={init:function(){this.sphere||(this.e0=Ut(this.es),this.e1=Ft(this.es),this.e2=Mt(this.es),this.e3=Gt(this.es),this.ml0=this.a*jt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t=e.x,a=e.y,n,r;if(t=Ve(t-this.long0),this.sphere)n=this.a*le(ye(a)*ge(t)),r=this.a*(ue(he(a),ye(t))-this.lat0);else{var s=ge(a),i=ye(a),o=Zt(this.a,this.e,s),d=he(a)*he(a),l=t*ye(a),p=l*l,c=this.es*i*i/(1-this.es),u=this.a*jt(this.e0,this.e1,this.e2,this.e3,a);n=o*l*(1-p*d*(1/6-(8-d+8*c)*p/120)),r=u-this.ml0+o*s/i*p*(.5+(5-d+6*c)*p/24)}return e.x=n+this.x0,e.y=r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,a=e.y/this.a,r,s;if(this.sphere){var d=a+this.lat0;r=le(ge(d)*ye(t)),s=ue(he(t),ye(d))}else{var l=this.ml0/this.a+a,p=ce(l,this.e0,this.e1,this.e2,this.e3);if(n(n(p)-Ce)<=ve)return e.x=this.long0,e.y=Ce,0>a&&(e.y*=-1),e;var c=Zt(this.a,this.e,ge(p)),u=c*c*c/this.a/this.a*(1-this.es),m=o(he(p),2),_=t*this.a/c,f=_*_;r=p-c*he(p)/u*_*_*(.5-(1+3*m)*_*_/24),s=_*(1-f*(m/3+(1+3*m)*m*f/15))/ye(p)}return e.x=Ve(s+this.long0),e.y=i(r),e},names:["Cassini","Cassini_Soldner","cass"]},Yt=function(e,t){var n;return 1e-7<e?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*a((1-n)/(1+n)))):2*t},qt=.3333333333333333,Ht=.17222222222222222,Kt=.10257936507936508,Xt=.06388888888888888,Wt=.0664021164021164,Qt=.016415012942191543,Jt={init:function(){var e=n(this.lat0);if(this.mode=n(e-Ce)<ve?0>this.lat0?this.S_POLE:this.N_POLE:n(e)<ve?this.EQUIT:this.OBLIQ,0<this.es){var t;switch(this.qp=Yt(this.e,1),this.mmf=.5/(1-this.es),this.apa=re(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=be(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=be(.5*this.qp),t=ge(this.lat0),this.sinb1=Yt(this.e,t)/this.qp,this.cosb1=be(1-this.sinb1*this.sinb1),this.dd=ye(this.lat0)/(be(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;}}else this.mode===this.OBLIQ&&(this.sinph0=ge(this.lat0),this.cosph0=ye(this.lat0))},forward:function(e){var t=e.x,a=e.y,r,s,i,o,d,l,p,c,u,m;if(t=Ve(t-this.long0),!this.sphere){switch(p=0,c=0,u=0,i=ye(t),o=ge(t),d=ge(a),l=Yt(this.e,d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=l/this.qp,c=be(1-p*p)),this.mode){case this.OBLIQ:u=1+this.sinb1*p+this.cosb1*c*i;break;case this.EQUIT:u=1+c*i;break;case this.N_POLE:u=Ce+a,l=this.qp-l;break;case this.S_POLE:u=a-Ce,l=this.qp+l;}if(n(u)<ve)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=be(2/u),s=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*p-this.sinb1*c*i):(u=be(2/(1+c*i)))*p*this.ymf,r=this.xmf*u*c*o;break;case this.N_POLE:case this.S_POLE:0<=l?(r=(u=be(l))*o,s=i*(this.mode===this.S_POLE?u:-u)):r=s=0;}}else if(d=ge(a),m=ye(a),i=ye(t),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s=this.mode===this.EQUIT?1+m*i:1+this.sinph0*d+this.cosph0*m*i,s<=ve)return null;s=be(2/s),r=s*m*ge(t),s*=this.mode===this.EQUIT?d:this.cosph0*d-this.sinph0*m*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),n(a+this.phi0)<ve)return null;s=Oe-.5*a,s=2*(this.mode===this.S_POLE?ye(s):ge(s)),r=s*ge(t),s*=i}return e.x=this.a*r+this.x0,e.y=this.a*s+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,a=e.y/this.a,r,s,i,o,d,l,p;if(this.sphere){var c=0,u=0,m;if(m=be(t*t+a*a),s=.5*m,1<s)return null;switch(s=2*le(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(u=ge(s),c=ye(s)),this.mode){case this.EQUIT:s=n(m)<=ve?0:le(a*u/m),t*=u,a=c*m;break;case this.OBLIQ:s=n(m)<=ve?this.phi0:le(c*this.sinph0+a*u*this.cosph0/m),t*=u*this.cosph0,a=(c-ge(s)*this.sinph0)*m;break;case this.N_POLE:a=-a,s=Ce-s;break;case this.S_POLE:s-=Ce;}r=0===a&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:ue(t,a)}else{if(p=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,a*=this.dd,l=be(t*t+a*a),l<ve)return e.x=0,e.y=this.phi0,e;o=2*le(.5*l/this.rq),i=ye(o),t*=o=ge(o),this.mode===this.OBLIQ?(p=i*this.sinb1+a*o*this.cosb1/l,d=this.qp*p,a=l*this.cosb1*i-a*this.sinb1*o):(p=a*o/l,d=this.qp*p,a=l*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),d=t*t+a*a,!d)return e.x=0,e.y=this.phi0,e;p=1-d/this.qp,this.mode===this.S_POLE&&(p=-p)}r=ue(t,a),s=se(le(p),this.apa)}return e.x=Ve(this.long0+r),e.y=s,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Vt=function(e){return 1<n(e)&&(e=1<e?1:-1),le(e)},$t={init:function(){n(this.lat1+this.lat2)<ve||(this.temp=this.b/this.a,this.es=1-o(this.temp,2),this.e3=be(this.es),this.sin_po=ge(this.lat1),this.cos_po=ye(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Qe(this.e3,this.sin_po,this.cos_po),this.qs1=Yt(this.e3,this.sin_po,this.cos_po),this.sin_po=ge(this.lat2),this.cos_po=ye(this.lat2),this.t2=this.sin_po,this.ms2=Qe(this.e3,this.sin_po,this.cos_po),this.qs2=Yt(this.e3,this.sin_po,this.cos_po),this.sin_po=ge(this.lat0),this.cos_po=ye(this.lat0),this.t3=this.sin_po,this.qs0=Yt(this.e3,this.sin_po,this.cos_po),this.ns0=n(this.lat1-this.lat2)>ve?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*be(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,a=e.y;this.sin_phi=ge(a),this.cos_phi=ye(a);var n=Yt(this.e3,this.sin_phi,this.cos_phi),r=this.a*be(this.c-this.ns0*n)/this.ns0,s=this.ns0*Ve(t-this.long0),i=r*ge(s)+this.x0,o=this.rh-r*ye(s)+this.y0;return e.x=i,e.y=o,e},inverse:function(e){var t,a,n,r,s,i;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,0<=this.ns0?(t=be(e.x*e.x+e.y*e.y),n=1):(t=-be(e.x*e.x+e.y*e.y),n=-1),r=0,0!==t&&(r=ue(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?i=le((this.c-n*n)/(2*this.ns0)):(a=(this.c-n*n)/this.ns0,i=this.phi1z(this.e3,a)),s=Ve(r/this.ns0+this.long0),e.x=s,e.y=i,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var r=Vt(.5*t),s,o,d,l,p;if(e<ve)return r;for(var c=1;25>=c;c++)if(s=ge(r),o=ye(r),d=e*s,l=1-d*d,p=.5*l*l/o*(t/(1-e*e)-s/l+.5/e*a((1-d)/(1+d))),r+=p,1e-7>=n(p))return r;return null}},ea={init:function(){this.sin_p14=ge(this.lat0),this.cos_p14=ye(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t=e.x,a=e.y,r,s,i,o,d,l,p,c;return i=Ve(t-this.long0),r=ge(a),s=ye(a),o=ye(i),l=this.sin_p14*r+this.cos_p14*s*o,d=1,0<l||n(l)<=ve?(p=this.x0+this.a*d*s*ge(i)/l,c=this.y0+this.a*d*(this.cos_p14*r-this.sin_p14*s*o)/l):(p=this.x0+this.infinity_dist*s*ge(i),c=this.y0+this.infinity_dist*(this.cos_p14*r-this.sin_p14*s*o)),e.x=p,e.y=c,e},inverse:function(e){var t,a,n,r,s,i;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=be(e.x*e.x+e.y*e.y))?(r=ue(t,this.rc),a=ge(r),n=ye(r),i=Vt(n*this.sin_p14+e.y*a*this.cos_p14/t),s=ue(e.x*a,t*this.cos_p14*n-e.y*this.sin_p14*a),s=Ve(this.long0+s)):(i=this.phic0,s=0),e.x=s,e.y=i,e},names:["gnom"]},ta=function(e,t){var r=1-(1-e*e)/(2*e)*a((1-e)/(1+e));if(1e-6>n(n(t)-r))return 0>t?-1*Ce:Ce;for(var s=le(.5*t),d=0,l,p,c,u;30>d;d++)if(p=ge(s),c=ye(s),u=e*p,l=o(1-u*u,2)/(2*c)*(t/(1-e*e)-p/(1-u*u)+.5/e*a((1-u)/(1+u))),s+=l,1e-10>=n(l))return s;return NaN},aa={init:function(){this.sphere||(this.k0=Qe(this.e,ge(this.lat_ts),ye(this.lat_ts)))},forward:function(e){var t=e.x,a=e.y,n=Ve(t-this.long0),r,s;if(this.sphere)r=this.x0+this.a*n*ye(this.lat_ts),s=this.y0+this.a*ge(a)/ye(this.lat_ts);else{var i=Yt(this.e,ge(a));r=this.x0+this.a*this.k0*n,s=this.y0+.5*(this.a*i)/this.k0}return e.x=r,e.y=s,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,a;return this.sphere?(t=Ve(this.long0+e.x/this.a/ye(this.lat_ts)),a=le(e.y/this.a*ye(this.lat_ts))):(a=ta(this.e,2*e.y*this.k0/this.a),t=Ve(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=a,e},names:["cea"]},na={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=ye(this.lat_ts)},forward:function(e){var t=e.x,a=e.y,n=Ve(t-this.long0),r=i(a-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*r,e},inverse:function(e){var t=e.x,a=e.y;return e.x=Ve(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=i(this.lat0+(a-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},ra={init:function(){this.temp=this.b/this.a,this.es=1-o(this.temp,2),this.e=be(this.es),this.e0=Ut(this.es),this.e1=Ft(this.es),this.e2=Mt(this.es),this.e3=Gt(this.es),this.ml0=this.a*jt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t=e.x,a=e.y,r=Ve(t-this.long0),s,o,d;if(d=r*ge(a),this.sphere)n(a)<=ve?(s=this.a*r,o=-1*this.a*this.lat0):(s=this.a*ge(d)/he(a),o=this.a*(i(a-this.lat0)+(1-ye(d))/he(a)));else if(n(a)<=ve)s=this.a*r,o=-1*this.ml0;else{var l=Zt(this.a,this.e,ge(a))/he(a);s=l*ge(d),o=this.a*jt(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+l*(1-ye(d))}return e.x=s+this.x0,e.y=o+this.y0,e},inverse:function(e){var t,a,r,s,d,l,p,c,u;if(r=e.x-this.x0,s=e.y-this.y0,this.sphere){if(n(s+this.a*this.lat0)<=ve)t=Ve(r/this.a+this.long0),a=0;else{l=this.lat0+s/this.a,p=r*r/this.a/this.a+l*l,c=l;var m;for(d=20;d;--d)if(m=he(c),u=-1*(l*(c*m+1)-c-.5*(c*c+p)*m)/((c-l)/m-1),c+=u,n(u)<=ve){a=c;break}t=Ve(this.long0+le(r*he(c)/this.a)/ge(a))}}else if(n(s+this.ml0)<=ve)a=0,t=Ve(this.long0+r/this.a);else{l=(this.ml0+s)/this.a,p=r*r/this.a/this.a+l*l,c=l;var _,f,h,g,b;for(d=20;d;--d)if(b=this.e*ge(c),_=be(1-b*b)*he(c),f=this.a*jt(this.e0,this.e1,this.e2,this.e3,c),h=this.e0-2*this.e1*ye(2*c)+4*this.e2*ye(4*c)-6*this.e3*ye(6*c),g=f/this.a,u=(l*(_*g+1)-g-.5*_*(g*g+p))/(this.es*ge(2*c)*(g*g+p-2*l*g)/(4*_)+(l-g)*(_*h-2/ge(2*c))-h),c-=u,n(u)<=ve){a=c;break}_=be(1-this.es*o(ge(a),2))*he(a),t=Ve(this.long0+le(r*_/this.a)/ge(a))}return e.x=t,e.y=a,e},names:["Polyconic","poly"]},sa={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t=e.x,a=e.y,r=a-this.lat0,s=t-this.long0,i=1,o=0,d;for(d=1;10>=d;d++)i*=1E-5*(r/we),o+=this.A[d]*i;var l=o,p=s,c=1,u=0,m=0,_=0,f,h;for(d=1;6>=d;d++)f=c*l-u*p,h=u*l+c*p,c=f,u=h,m=m+this.B_re[d]*c-this.B_im[d]*u,_=_+this.B_im[d]*c+this.B_re[d]*u;return e.x=_*this.a+this.x0,e.y=m*this.a+this.y0,e},inverse:function(e){var t=e.x,a=e.y,r=t-this.x0,s=a-this.y0,o=s/this.a,d=r/this.a,l=1,p=0,c=0,u=0,m,_,f;for(m=1;6>=m;m++)_=l*o-p*d,f=p*o+l*d,l=_,p=f,c=c+this.C_re[m]*l-this.C_im[m]*p,u=u+this.C_im[m]*l+this.C_re[m]*p;for(var h=0;h<this.iterations;h++){var g=c,y=u,b=o,x=d,w,E;for(m=2;6>=m;m++)w=g*c-y*u,E=y*c+g*u,g=w,y=E,b+=(m-1)*(this.B_re[m]*g-this.B_im[m]*y),x+=(m-1)*(this.B_im[m]*g+this.B_re[m]*y);g=1,y=0;var C=this.B_re[1],A=this.B_im[1];for(m=2;6>=m;m++)w=g*c-y*u,E=y*c+g*u,g=w,y=E,C+=m*(this.B_re[m]*g-this.B_im[m]*y),A+=m*(this.B_im[m]*g+this.B_re[m]*y);var S=C*C+A*A;c=(b*C+x*A)/S,u=(x*C-b*A)/S}var k=c,v=u,I=1,R=0;for(m=1;9>=m;m++)I*=k,R+=this.D[m]*I;var O=this.lat0+1E5*(R*we),z=this.long0+v;return e.x=z,e.y=O,e},names:["New_Zealand_Map_Grid","nzmg"]},ia={init:function(){},forward:function(e){var t=e.x,n=e.y,r=Ve(t-this.long0),s=this.x0+this.a*r,i=this.y0+1.25*(this.a*a(he(me/4+n/2.5)));return e.x=s,e.y=i,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Ve(this.long0+e.x/this.a),a=2.5*(_e(fe(.8*e.y/this.a))-me/4);return e.x=t,e.y=a,e},names:["Miller_Cylindrical","mill"]},oa={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=be((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ft(this.es)},forward:function(e){var t=e.x,a=e.y,r,o;if(t=Ve(t-this.long0),this.sphere){if(!this.m)a=1===this.n?a:le(this.n*ge(a));else for(var d=this.n*ge(a),l=20,p;l&&(p=(this.m*a+ge(a)-d)/(this.m+ye(a)),a-=p,!(n(p)<ve));--l);r=this.a*this.C_x*t*(this.m+ye(a)),o=this.a*this.C_y*a}else{var u=ge(a),s=ye(a);o=this.a*ht(a,u,s,this.en),r=this.a*t*s/be(1-this.es*u*u)}return e.x=r,e.y=o,e},inverse:function(e){var t,a,r,o;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+ye(t)),this.m?t=Vt((this.m*t+ge(t))/this.n):1!==this.n&&(t=Vt(ge(t)/this.n)),r=Ve(r+this.long0),t=i(t)):(t=gt(e.y/this.a,this.es,this.en),o=n(t),o<Ce?(o=ge(t),a=this.long0+e.x*be(1-this.es*o*o)/(this.a*ye(t)),r=Ve(a)):o-ve<Ce&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]},da={init:function(){},forward:function(e){for(var t=e.x,a=e.y,r=Ve(t-this.long0),s=a,i=me*ge(a),o;o=-(s+ge(s)-i)/(1+ye(s)),s+=o,!(n(o)<ve););s/=2,me/2-n(a)<ve&&(r=0);var d=.900316316158*this.a*r*ye(s)+this.x0,l=1.4142135623731*this.a*ge(s)+this.y0;return e.x=d,e.y=l,e},inverse:function(e){var t,a;e.x-=this.x0,e.y-=this.y0,a=e.y/(1.4142135623731*this.a),.999999999999<n(a)&&(a=.999999999999),t=le(a);var r=Ve(this.long0+e.x/(.900316316158*this.a*ye(t)));r<-me&&(r=-me),r>me&&(r=me),a=(2*t+ge(2*t))/me,1<n(a)&&(a=1);var s=le(a);return e.x=r,e.y=s,e},names:["Mollweide","moll"]},la={init:function(){n(this.lat1+this.lat2)<ve||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-o(this.temp,2),this.e=be(this.es),this.e0=Ut(this.es),this.e1=Ft(this.es),this.e2=Mt(this.es),this.e3=Gt(this.es),this.sinphi=ge(this.lat1),this.cosphi=ye(this.lat1),this.ms1=Qe(this.e,this.sinphi,this.cosphi),this.ml1=jt(this.e0,this.e1,this.e2,this.e3,this.lat1),n(this.lat1-this.lat2)<ve?this.ns=this.sinphi:(this.sinphi=ge(this.lat2),this.cosphi=ye(this.lat2),this.ms2=Qe(this.e,this.sinphi,this.cosphi),this.ml2=jt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=jt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t=e.x,a=e.y,n;if(this.sphere)n=this.a*(this.g-a);else{var r=jt(this.e0,this.e1,this.e2,this.e3,a);n=this.a*(this.g-r)}var s=this.ns*Ve(t-this.long0),i=this.x0+n*ge(s),o=this.y0+this.rh-n*ye(s);return e.x=i,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,a,n,r;0<=this.ns?(a=be(e.x*e.x+e.y*e.y),t=1):(a=-be(e.x*e.x+e.y*e.y),t=-1);var s=0;if(0!==a&&(s=ue(t*e.x,t*e.y)),this.sphere)return r=Ve(this.long0+s/this.ns),n=i(this.g-a/this.a),e.x=r,e.y=n,e;var o=this.g-a/this.a;return n=ce(o,this.e0,this.e1,this.e2,this.e3),r=Ve(this.long0+s/this.ns),e.x=r,e.y=n,e},names:["Equidistant_Conic","eqdc"]},pa={init:function(){this.R=this.a},forward:function(e){var t=e.x,a=e.y,r=Ve(t-this.long0),s,i;n(a)<=ve&&(s=this.x0+this.R*r,i=this.y0);var o=Vt(2*n(a/me));(n(r)<=ve||n(n(a)-Ce)<=ve)&&(s=this.x0,i=0<=a?this.y0+me*this.R*he(.5*o):this.y0+me*this.R*-he(.5*o));var d=.5*n(me/r-r/me),l=d*d,p=ge(o),c=ye(o),u=c/(p+c-1),_=u*(2/p-1),m=_*_,f=me*this.R*(d*(u-m)+be(l*(u-m)*(u-m)-(m+l)*(u*u-m)))/(m+l);0>r&&(f=-f),s=this.x0+f;var h=l+u;return f=me*this.R*(_*h-d*be((m+l)*(l+1)-h*h))/(m+l),i=0<=a?this.y0+f:this.y0-f,e.x=s,e.y=i,e},inverse:function(e){var t,a,r,s,i,o,l,p,c,u,m,_,f;return e.x-=this.x0,e.y-=this.y0,m=me*this.R,r=e.x/m,s=e.y/m,i=r*r+s*s,o=-n(s)*(1+i),l=o-2*s*s+r*r,p=-2*o+1+2*s*s+i*i,f=s*s/p+(2*l*l*l/p/p/p-9*o*l/p/p)/27,c=(o-l*l/3/p)/p,u=2*be(-c/3),m=3*f/c/u,1<n(m)&&(0<=m?m=1:m=-1),_=pe(m)/3,a=0<=e.y?(-u*ye(_+me/3)-l/3/p)*me:-(-u*ye(_+me/3)-l/3/p)*me,t=n(r)<ve?this.long0:Ve(this.long0+me*(i-1+be(1+2*(r*r-s*s)+i*i))/2/r),e.x=t,e.y=a,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},ca={init:function(){this.sin_p12=ge(this.lat0),this.cos_p12=ye(this.lat0)},forward:function(e){var t=e.x,a=e.y,r=ge(e.y),i=ye(e.y),o=Ve(t-this.long0),d,l,p,u,m,_,f,h,g,y,b,x,w,E,C,A,S,k,v,I,R,O,z;return this.sphere?n(this.sin_p12-1)<=ve?(e.x=this.x0+this.a*(Ce-a)*ge(o),e.y=this.y0-this.a*(Ce-a)*ye(o),e):n(this.sin_p12+1)<=ve?(e.x=this.x0+this.a*(Ce+a)*ge(o),e.y=this.y0+this.a*(Ce+a)*ye(o),e):(k=this.sin_p12*r+this.cos_p12*i*ye(o),A=pe(k),S=A/ge(A),e.x=this.x0+this.a*S*i*ge(o),e.y=this.y0+this.a*S*(this.cos_p12*r-this.sin_p12*i*ye(o)),e):(d=Ut(this.es),l=Ft(this.es),p=Mt(this.es),u=Gt(this.es),n(this.sin_p12-1)<=ve?(m=this.a*jt(d,l,p,u,Ce),_=this.a*jt(d,l,p,u,a),e.x=this.x0+(m-_)*ge(o),e.y=this.y0-(m-_)*ye(o),e):n(this.sin_p12+1)<=ve?(m=this.a*jt(d,l,p,u,Ce),_=this.a*jt(d,l,p,u,a),e.x=this.x0+(m+_)*ge(o),e.y=this.y0+(m+_)*ye(o),e):(f=r/i,h=Zt(this.a,this.e,this.sin_p12),g=Zt(this.a,this.e,r),y=_e((1-this.es)*f+this.es*h*this.sin_p12/(g*i)),b=ue(ge(o),this.cos_p12*he(y)-this.sin_p12*ye(o)),v=0===b?le(this.cos_p12*ge(y)-this.sin_p12*ye(y)):n(n(b)-me)<=ve?-le(this.cos_p12*ge(y)-this.sin_p12*ye(y)):le(ge(o)*ye(y)/ge(b)),x=this.e*this.sin_p12/be(1-this.es),w=this.e*this.cos_p12*ye(b)/be(1-this.es),E=x*w,C=w*w,I=v*v,R=I*v,O=R*v,z=O*v,A=h*v*(1-I*C*(1-C)/6+R/8*E*(1-2*C)+O/120*(C*(4-7*C)-3*x*x*(1-7*C))-z/48*E),e.x=this.x0+A*ge(b),e.y=this.y0+A*ye(b),e))},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,a,r,s,i,d,l,p,c,u,m,_,f,h,g,y,b,x,w,E,C,S,k;return this.sphere?(t=be(e.x*e.x+e.y*e.y),t>2*Ce*this.a)?void 0:(a=t/this.a,r=ge(a),s=ye(a),i=this.long0,n(t)<=ve?d=this.lat0:(d=Vt(s*this.sin_p12+e.y*r*this.cos_p12/t),l=n(this.lat0)-Ce,i=n(l)<=ve?0<=this.lat0?Ve(this.long0+ue(e.x,-e.y)):Ve(this.long0-ue(-e.x,e.y)):Ve(this.long0+ue(e.x*r,t*this.cos_p12*s-e.y*this.sin_p12*r))),e.x=i,e.y=d,e):(p=Ut(this.es),c=Ft(this.es),u=Mt(this.es),m=Gt(this.es),n(this.sin_p12-1)<=ve?(_=this.a*jt(p,c,u,m,Ce),t=be(e.x*e.x+e.y*e.y),f=_-t,d=ce(f/this.a,p,c,u,m),i=Ve(this.long0+ue(e.x,-1*e.y)),e.x=i,e.y=d,e):n(this.sin_p12+1)<=ve?(_=this.a*jt(p,c,u,m,Ce),t=be(e.x*e.x+e.y*e.y),f=t-_,d=ce(f/this.a,p,c,u,m),i=Ve(this.long0+ue(e.x,e.y)),e.x=i,e.y=d,e):(t=be(e.x*e.x+e.y*e.y),y=ue(e.x,e.y),h=Zt(this.a,this.e,this.sin_p12),b=ye(y),x=this.e*this.cos_p12*b,w=-x*x/(1-this.es),E=3*this.es*(1-w)*this.sin_p12*this.cos_p12*b/(1-this.es),C=t/h,S=C-w*(1+w)*o(C,3)/6-E*(1+3*w)*o(C,4)/24,k=1-w*S*S/2-C*S*S*S/6,g=le(this.sin_p12*ye(S)+this.cos_p12*ge(S)*b),i=Ve(this.long0+le(ge(y)*ge(S)/ye(g))),d=_e((1-this.es*k*this.sin_p12/ge(g))*he(g)/(1-this.es)),e.x=i,e.y=d,e))},names:["Azimuthal_Equidistant","aeqd"]},ua={init:function(){this.sin_p14=ge(this.lat0),this.cos_p14=ye(this.lat0)},forward:function(e){var t=e.x,a=e.y,r,s,i,o,d,l,p,c;return i=Ve(t-this.long0),r=ge(a),s=ye(a),o=ye(i),l=this.sin_p14*r+this.cos_p14*s*o,d=1,(0<l||n(l)<=ve)&&(p=this.a*d*s*ge(i),c=this.y0+this.a*d*(this.cos_p14*r-this.sin_p14*s*o)),e.x=p,e.y=c,e},inverse:function(e){var t,a,r,s,i,o,d;return(e.x-=this.x0,e.y-=this.y0,t=be(e.x*e.x+e.y*e.y),a=Vt(t/this.a),r=ge(a),s=ye(a),o=this.long0,n(t)<=ve)?(d=this.lat0,e.x=o,e.y=d,e):(d=Vt(s*this.sin_p14+e.y*r*this.cos_p14/t),i=n(this.lat0)-Ce,n(i)<=ve)?(o=0<=this.lat0?Ve(this.long0+ue(e.x,-e.y)):Ve(this.long0-ue(-e.x,e.y)),e.x=o,e.y=d,e):(o=Ve(this.long0+ue(e.x*r,t*this.cos_p14*s-e.y*this.sin_p14*r)),e.x=o,e.y=d,e)},names:["ortho"]},ma={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},_a={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},fa={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=Ce-Oe/2?ma.TOP:this.lat0<=-(Ce-Oe/2)?ma.BOTTOM:n(this.long0)<=Oe?ma.FRONT:n(this.long0)<=Ce+Oe?0<this.long0?ma.RIGHT:ma.LEFT:ma.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var a={x:0,y:0},n={value:0},i,o,d,l,p,c;if(e.x-=this.long0,i=0===this.es?e.y:_e(this.one_minus_f_squared*he(e.y)),o=e.x,this.face===ma.TOP)l=Ce-i,o>=Oe&&o<=Ce+Oe?(n.value=_a.AREA_0,d=o-Ce):o>Ce+Oe||o<=-(Ce+Oe)?(n.value=_a.AREA_1,d=0<o?o-Le:o+Le):o>-(Ce+Oe)&&o<=-Oe?(n.value=_a.AREA_2,d=o+Ce):(n.value=_a.AREA_3,d=o);else if(this.face===ma.BOTTOM)l=Ce+i,o>=Oe&&o<=Ce+Oe?(n.value=_a.AREA_0,d=-o+Ce):o<Oe&&o>=-Oe?(n.value=_a.AREA_1,d=-o):o<-Oe&&o>=-(Ce+Oe)?(n.value=_a.AREA_2,d=-o-Ce):(n.value=_a.AREA_3,d=0<o?-o+Le:-o-Le);else{var u,m,_,f,h,g,y;this.face===ma.RIGHT?o=oe(o,+Ce):this.face===ma.BACK?o=oe(o,+Le):this.face===ma.LEFT&&(o=oe(o,-Ce)),f=ge(i),h=ye(i),g=ge(o),y=ye(o),u=h*y,m=h*g,_=f,this.face===ma.FRONT?(l=pe(u),d=ie(l,_,m,n)):this.face===ma.RIGHT?(l=pe(m),d=ie(l,_,-u,n)):this.face===ma.BACK?(l=pe(-u),d=ie(l,_,-m,n)):this.face===ma.LEFT?(l=pe(-m),d=ie(l,_,u,n)):(l=d=0,n.value=_a.AREA_0)}return c=_e(12/Le*(d+pe(ge(d)*ye(Oe))-Ce)),p=be((1-ye(l))/(ye(c)*ye(c))/(1-ye(_e(1/ye(d))))),n.value===_a.AREA_1?c+=Ce:n.value===_a.AREA_2?c+=Le:n.value===_a.AREA_3&&(c+=1.5*Le),a.x=p*ye(c),a.y=p*ge(c),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,e.x=a.x,e.y=a.y,e},inverse:function(e){var a={lam:0,phi:0},i={value:0},o,d,l,p,c,u,m,_,f;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,d=_e(be(e.x*e.x+e.y*e.y)),o=ue(e.y,e.x),0<=e.x&&e.x>=n(e.y)?i.value=_a.AREA_0:0<=e.y&&e.y>=n(e.x)?(i.value=_a.AREA_1,o-=Ce):0>e.x&&-e.x>=n(e.y)?(i.value=_a.AREA_2,o=0>o?o+Le:o-Le):(i.value=_a.AREA_3,o+=Ce),f=Le/12*he(o),c=ge(f)/(ye(f)-1/be(2)),u=_e(c),l=ye(o),p=he(d),m=1-l*l*p*p*(1-ye(_e(1/ye(u)))),-1>m?m=-1:1<m&&(m=1),this.face===ma.TOP)_=pe(m),a.phi=Ce-_,a.lam=i.value===_a.AREA_0?u+Ce:i.value===_a.AREA_1?0>u?u+Le:u-Le:i.value===_a.AREA_2?u-Ce:u;else if(this.face===ma.BOTTOM)_=pe(m),a.phi=_-Ce,a.lam=i.value===_a.AREA_0?-u+Ce:i.value===_a.AREA_1?-u:i.value===_a.AREA_2?-u-Ce:0>u?-u-Le:-u+Le;else{var h,g,y;h=m,f=h*h,y=1<=f?0:be(1-f)*ge(u),f+=y*y,g=1<=f?0:be(1-f),i.value===_a.AREA_1?(f=g,g=-y,y=f):i.value===_a.AREA_2?(g=-g,y=-y):i.value===_a.AREA_3&&(f=g,g=y,y=-f),this.face===ma.RIGHT?(f=h,h=-g,g=f):this.face===ma.BACK?(h=-h,g=-g):this.face===ma.LEFT&&(f=h,h=g,g=-f),a.phi=pe(-y)-Ce,a.lam=ue(g,h),this.face===ma.RIGHT?a.lam=oe(a.lam,-Ce):this.face===ma.BACK?a.lam=oe(a.lam,-Le):this.face===ma.LEFT&&(a.lam=oe(a.lam,+Ce))}if(0!==this.es){var b,x,w;b=0>a.phi?1:0,x=he(a.phi),w=this.b/be(x*x+this.one_minus_f_squared),a.phi=_e(be(this.a*this.a-w*w)/(this.one_minus_f*w)),b&&(a.phi=-a.phi)}return a.lam+=this.long0,e.x=a.lam,e.y=a.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},ha=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ga=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,422642e-15],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ya=.8487,ba=1.3523,xa=Re/5,wa=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},Ea=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])},Ca={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Ve(e.x-this.long0),a=n(e.y),s=r(a*xa);0>s?s=0:18<=s&&(s=17),a=Re*(a-1/xa*s);var o={x:wa(ha[s],a)*t,y:wa(ga[s],a)};return 0>e.y&&(o.y=-o.y),o.x=o.x*this.a*ya+this.x0,o.y=o.y*this.a*ba+this.y0,o},inverse:function(e){var a={x:(e.x-this.x0)/(this.a*ya),y:n(e.y-this.y0)/(this.a*ba)};if(1<=a.y)a.x/=ha[18][0],a.y=0>e.y?-Ce:Ce;else{var s=r(18*a.y);for(0>s?s=0:18<=s&&(s=17);;)if(ga[s][0]>a.y)--s;else if(ga[s+1][0]<=a.y)++s;else break;var o=ga[s],d=5*(a.y-o[0])/(ga[s+1][0]-o[0]);d=de(function(e){return(wa(o,e)-a.y)/Ea(o,e)},d,ve,100),a.x/=wa(ha[s],d),a.y=(5*s+d)*Ie,0>e.y&&(a.y=-a.y)}return a.x=Ve(a.x+this.long0),a},names:["Robinson","robin"]},Aa={init:function(){this.name="geocent"},forward:function(e){var t=z(e,this.es,this.a);return t},inverse:function(e){var t=L(e,this.es,this.a,this.b);return t},names:["Geocentric","geocentric","geocent","Geocent"]};return M.defaultDatum="WGS84",M.Proj=R,M.WGS84=new M.Proj("WGS84"),M.Point=ne,M.toPoint=lt,M.defs=f,M.transform=j,M.mgrs={forward:G,inverse:function(e){var t=K($(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:Z},M.version="2.6.1",function(e){e.Proj.projections.add(yt),e.Proj.projections.add(vt),e.Proj.projections.add(Rt),e.Proj.projections.add(Lt),e.Proj.projections.add(Tt),e.Proj.projections.add(Bt),e.Proj.projections.add(Pt),e.Proj.projections.add(Nt),e.Proj.projections.add(Dt),e.Proj.projections.add(Ee),e.Proj.projections.add(Jt),e.Proj.projections.add($t),e.Proj.projections.add(ea),e.Proj.projections.add(aa),e.Proj.projections.add(na),e.Proj.projections.add(ra),e.Proj.projections.add(sa),e.Proj.projections.add(ia),e.Proj.projections.add(oa),e.Proj.projections.add(da),e.Proj.projections.add(la),e.Proj.projections.add(pa),e.Proj.projections.add(ca),e.Proj.projections.add(ua),e.Proj.projections.add(fa),e.Proj.projections.add(Ca),e.Proj.projections.add(Aa)}(M),M})},{}],56:[function(e,t,a){function n(e){if(e&&!d(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function i(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var o=e("buffer").Buffer,d=o.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}},l=a.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=i;break;default:return void(this.write=r);}this.charBuffer=new o(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="",a;this.charLength;){if(a=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length,e.copy(this.charBuffer,this.charReceived,0,a),this.charReceived+=a,this.charReceived<this.charLength)return"";e=e.slice(a,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(55296<=n&&56319>=n){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,n=t.charCodeAt(r);if(55296<=n&&56319>=n){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,r)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var a=e[e.length-t];if(1==t&&6==a>>5){this.charLength=2;break}if(2>=t&&14==a>>4){this.charLength=3;break}if(3>=t&&30==a>>3){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var a=this.charReceived,n=this.charBuffer,r=this.encoding;t+=n.slice(0,a).toString(r)}return t}},{buffer:7}],57:[function(e,t){t.exports=e("./lib/encoding.js")},{"./lib/encoding.js":58}],58:[function(e,t){(function(a){'use strict';function n(e,t,a){return t<=e&&e<=a}function s(e,t){return-1!==e.indexOf(t)}function i(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){for(var t=e+"",a=t.length,n=0,r=[];n<a;){var s=t.charCodeAt(n);if(55296>s||57343<s)r.push(s);else if(56320<=s&&57343>=s)r.push(65533);else if(55296<=s&&56319>=s)if(n===a-1)r.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&57343>=o){r.push(65536+((1023&s)<<10)+(1023&o)),n+=1}else r.push(65533)}n+=1}return r}function l(e){for(var t="",a=0,n;a<e.length;++a)n=e[a],65535>=n?t+=d(n):(n-=65536,t+=d((n>>10)+55296,(1023&n)+56320));return t}function p(e){return 0<=e&&127>=e}function c(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function u(e,t){if(e)throw TypeError("Decoder error");return t||65533}function m(e){throw TypeError("The code point "+e+" could not be encoded.")}function _(e){return e=(e+"").trim().toLowerCase(),Object.prototype.hasOwnProperty.call(W,e)?W[e]:null}function f(e,t){return t?t[e]||null:null}function h(e,t){var a=t.indexOf(e);return-1===a?null:a}function g(e){if(!("encoding-indexes"in a))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return a["encoding-indexes"][e]}function y(e){if(39419<e&&189e3>e||1237575<e)return null;if(7457===e)return 59335;var t=0,a=0,n=g("gb18030-ranges"),r;for(r=0;r<n.length;++r){var s=n[r];if(s[0]<=e)t=s[0],a=s[1];else break}return a+e-t}function b(e){if(59335===e)return 7457;var t=0,a=0,n=g("gb18030-ranges"),r;for(r=0;r<n.length;++r){var s=n[r];if(s[1]<=e)t=s[1],a=s[0];else break}return a+e-t}function x(e){V=V||g("jis0208").map(function(e,t){return n(t,8272,8835)?null:e});var t=V;return t.indexOf(e)}function w(e){$=$||g("big5").map(function(e,t){return t<5024?null:e});var t=$;return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):h(e,t)}function E(e,t){if(!(this instanceof E))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0===e?"utf-8":e+"",t=i(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var a=_(e);if(null===a||"replacement"===a.name)throw RangeError("Unknown encoding: "+e);if(!J[a.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var n=this;return n._encoding=a,!!t.fatal&&(n._error_mode="fatal"),!!t.ignoreBOM&&(n._ignoreBOM=!0),Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase(),this.fatal="fatal"===n._error_mode,this.ignoreBOM=n._ignoreBOM),n}function C(e,t){if(!(this instanceof C))throw TypeError("Called as a function. Did you forget 'new'?");t=i(t),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=!t.fatal?"replacement":"fatal";var n=this;if(!!t.NONSTANDARD_allowLegacyEncoding){e=void 0===e?"utf-8":e+"";var r=_(e);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+e);if(!Q[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");n._encoding=r}else n._encoding=_("utf-8"),void 0!==e&&"console"in a&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase()),n}function A(e){var t=e.fatal,a=0,r=0,s=0,i=128,o=191;this.handler=function(e,d){if(-1===d&&0!==s)return s=0,u(t);if(-1===d)return-1;if(0===s){if(n(d,0,127))return d;if(n(d,194,223))s=1,a=31&d;else if(n(d,224,239))224===d&&(i=160),237===d&&(o=159),s=2,a=15&d;else if(n(d,240,244))240===d&&(i=144),244===d&&(o=143),s=3,a=7&d;else return u(t);return null}if(!n(d,i,o))return a=s=r=0,i=128,o=191,e.prepend(d),u(t);if(i=128,o=191,a=a<<6|63&d,r+=1,r!==s)return null;var l=a;return a=s=r=0,l}}function S(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(H(t))return t;var a,r;n(t,128,2047)?(a=1,r=192):n(t,2048,65535)?(a=2,r=224):n(t,65536,1114111)&&(a=3,r=240);for(var s=[(t>>6*a)+r];0<a;){var i=t>>6*(a-1);s.push(128|63&i),a-=1}return s}}function k(e,t){var a=t.fatal;this.handler=function(t,n){if(n===-1)return-1;if(p(n))return n;var r=e[n-128];return null===r?u(a):r}}function v(e,t){t.fatal;this.handler=function(t,a){if(-1===a)return-1;if(H(a))return a;var n=h(a,e);return null===n&&m(a),n+128}}function I(e){var t=e.fatal,a=0,r=0,s=0;this.handler=function(e,i){if(i===-1&&0===a&&0===r&&0===s)return-1;i===-1&&(0!==a||0!==r||0!==s)&&(a=0,r=0,s=0,u(t));var o;if(0!==s){o=null,n(i,48,57)&&(o=y(10*(126*(10*(a-129)+r-48)+s-129)+i-48));var d=[r,s,i];return a=0,r=0,s=0,null===o?(e.prepend(d),u(t)):o}if(0!==r)return n(i,129,254)?(s=i,null):(e.prepend([r,i]),a=0,r=0,u(t));if(0!==a){if(n(i,48,57))return r=i,null;var l=a,c=null;a=0;var m=127>i?64:65;return(n(i,64,126)||n(i,128,254))&&(c=190*(l-129)+(i-m)),o=null===c?null:f(c,g("gb18030")),null===o&&p(i)&&e.prepend(i),null===o?u(t):o}return p(i)?i:128===i?8364:n(i,129,254)?(a=i,null):u(t)}}function R(e,t){e.fatal;this.handler=function(e,a){if(a===-1)return-1;if(H(a))return a;if(58853===a)return m(a);if(t&&8364===a)return 128;var n=h(a,g("gb18030"));if(null!==n){var r=q(n/190)+129,s=n%190,i=63>s?64:65;return[r,s+i]}if(t)return m(a);n=b(a);var o=q(n/10/126/10);n-=10*(126*(10*o));var d=q(n/10/126);n-=126*(10*d);var l=q(n/10),p=n-10*l;return[o+129,d+48,l+129,p+48]}}function O(e){var t=e.fatal,a=0;this.handler=function(e,r){if(-1===r&&0!==a)return a=0,u(t);if(-1===r&&0===a)return-1;if(0!==a){var s=a,i=null;a=0;var o=127>r?64:98;switch((n(r,64,126)||n(r,161,254))&&(i=157*(s-129)+(r-o)),i){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780];}var d=null===i?null:f(i,g("big5"));return null===d&&p(r)&&e.prepend(r),null===d?u(t):d}return p(r)?r:n(r,129,254)?(a=r,null):u(t)}}function z(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(H(t))return t;var a=w(t);if(null===a)return m(t);var n=q(a/157)+129;if(161>n)return m(t);var r=a%157,s=63>r?64:98;return[n,r+s]}}function L(e){var t=e.fatal,a=!1,r=0;this.handler=function(e,s){if(-1===s&&0!==r)return r=0,u(t);if(-1===s&&0===r)return-1;if(142===r&&n(s,161,223))return r=0,65216+s;if(143===r&&n(s,161,254))return a=!0,r=s,null;if(0!==r){var i=r;r=0;var o=null;return n(i,161,254)&&n(s,161,254)&&(o=f(94*(i-161)+(s-161),g(a?"jis0212":"jis0208"))),a=!1,n(s,161,254)||e.prepend(s),null===o?u(t):o}return p(s)?s:142===s||143===s||n(s,161,254)?(r=s,null):u(t)}}function T(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(H(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var a=h(t,g("jis0208"));if(null===a)return m(t);var r=q(a/94)+161;return[r,a%94+161]}}function B(e){var t=e.fatal,a={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},r=a.ASCII,s=a.ASCII,i=0,o=!1;this.handler=function(e,d){switch(r){default:case a.ASCII:return 27===d?(r=a.EscapeStart,null):n(d,0,127)&&14!==d&&15!==d&&27!==d?(o=!1,d):-1===d?-1:(o=!1,u(t));case a.Roman:return 27===d?(r=a.EscapeStart,null):92===d?(o=!1,165):126===d?(o=!1,8254):n(d,0,127)&&14!==d&&15!==d&&27!==d&&92!==d&&126!==d?(o=!1,d):-1===d?-1:(o=!1,u(t));case a.Katakana:return 27===d?(r=a.EscapeStart,null):n(d,33,95)?(o=!1,65344+d):-1===d?-1:(o=!1,u(t));case a.LeadByte:return 27===d?(r=a.EscapeStart,null):n(d,33,126)?(o=!1,i=d,r=a.TrailByte,null):-1===d?-1:(o=!1,u(t));case a.TrailByte:if(27===d)return r=a.EscapeStart,u(t);if(n(d,33,126)){r=a.LeadByte;var l=94*(i-33)+d-33,p=f(l,g("jis0208"));return null===p?u(t):p}return-1===d?(r=a.LeadByte,e.prepend(d),u(t)):(r=a.LeadByte,u(t));case a.EscapeStart:return 36===d||40===d?(i=d,r=a.Escape,null):(e.prepend(d),o=!1,r=s,u(t));case a.Escape:var c=i;i=0;var m=null;if(40===c&&66===d&&(m=a.ASCII),40===c&&74===d&&(m=a.Roman),40===c&&73===d&&(m=a.Katakana),36===c&&(64===d||66===d)&&(m=a.LeadByte),null!==m){r=r=m;var _=o;return o=!0,_?u(t):null}return e.prepend([c,d]),o=!1,r=s,u(t);}}}function P(e){var t=e.fatal,a={ASCII:0,Roman:1,jis0208:2},n=a.ASCII;this.handler=function(e,t){if(-1===t&&n!==a.ASCII)return e.prepend(t),n=a.ASCII,[27,40,66];if(-1===t&&n===a.ASCII)return-1;if((n===a.ASCII||n===a.Roman)&&(14===t||15===t||27===t))return m(65533);if(n===a.ASCII&&H(t))return t;if(n===a.Roman&&(H(t)&&92!==t&&126!==t||165==t||8254==t)){if(H(t))return t;if(165===t)return 92;if(8254===t)return 126}if(H(t)&&n!==a.ASCII)return e.prepend(t),n=a.ASCII,[27,40,66];if((165===t||8254===t)&&n!==a.Roman)return e.prepend(t),n=a.Roman,[27,40,74];8722===t&&(t=65293);var r=h(t,g("jis0208"));if(null===r)return m(t);if(n!==a.jis0208)return e.prepend(t),n=a.jis0208,[27,36,66];var s=q(r/94)+33;return[s,r%94+33]}}function N(e){var t=e.fatal,a=0;this.handler=function(e,r){if(-1===r&&0!==a)return a=0,u(t);if(-1===r&&0===a)return-1;if(0!==a){var s=a,i=null;a=0;var o=127>r?64:65,d=160>s?129:193;if((n(r,64,126)||n(r,128,252))&&(i=188*(s-d)+r-o),n(i,8836,10715))return 48508+i;var l=null===i?null:f(i,g("jis0208"));return null===l&&p(r)&&e.prepend(r),null===l?u(t):l}return p(r)||128===r?r:n(r,161,223)?65216+r:n(r,129,159)||n(r,224,252)?(a=r,null):u(t)}}function D(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(H(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var a=x(t);if(null===a)return m(t);var r=q(a/188),s=31>r?129:193,i=a%188,o=63>i?64:65;return[r+s,i+o]}}function j(e){var t=e.fatal,a=0;this.handler=function(e,r){if(-1===r&&0!==a)return a=0,u(t);if(-1===r&&0===a)return-1;if(0!==a){var s=a,i=null;a=0,n(r,65,254)&&(i=190*(s-129)+(r-65));var o=null===i?null:f(i,g("euc-kr"));return null===i&&p(r)&&e.prepend(r),null===o?u(t):o}return p(r)?r:n(r,129,254)?(a=r,null):u(t)}}function U(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(H(t))return t;var a=h(t,g("euc-kr"));if(null===a)return m(t);var n=q(a/190)+129;return[n,a%190+65]}}function F(e,t){var a=e>>8,n=255&e;return t?[a,n]:[n,a]}function M(e,t){var a=t.fatal,r=null,s=null;this.handler=function(t,i){if(-1===i&&(null!==r||null!==s))return u(a);if(-1===i&&null===r&&null===s)return-1;if(null===r)return r=i,null;var o;if(o=e?(r<<8)+i:(i<<8)+r,r=null,null!==s){var d=s;return(s=null,n(o,56320,57343))?65536+1024*(d-55296)+(o-56320):(t.prepend(F(o,e)),u(a))}return n(o,55296,56319)?(s=o,null):n(o,56320,57343)?u(a):o}}function G(e,t){t.fatal;this.handler=function(t,a){if(a===-1)return-1;if(n(a,0,65535))return F(a,e);var r=F((a-65536>>10)+55296,e),s=F((1023&a-65536)+56320,e);return r.concat(s)}}function Z(e){e.fatal;this.handler=function(e,t){return-1===t?-1:p(t)?t:63360+t-128}}function Y(e){e.fatal;this.handler=function(e,t){return-1===t?-1:H(t)?t:n(t,63360,63487)?t-63360+128:m(t)}}"undefined"!=typeof t&&t.exports&&!a["encoding-indexes"]&&e("./encoding-indexes.js");var q=r,H=p,K=-1;c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():K},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};(function(){}).prototype={handler:function(){}},function(){}.prototype={handler:function(){}};var X=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],W={};X.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){W[t]=e})})});var Q={},J={},V,$;Object.defineProperty&&(Object.defineProperty(E.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(E.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(E.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),E.prototype.decode=function(e,t){var a;a="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._do_not_flush||(this._decoder=J[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=!!t.stream;for(var n=new c(a),r=[],o,d;(d=n.read(),d!==K)&&!(o=this._decoder.handler(n,d),-1===o);)null!==o&&(Array.isArray(o)?r.push.apply(r,o):r.push(o));if(!this._do_not_flush){do{if(o=this._decoder.handler(n,n.read()),-1===o)break;if(null===o)continue;Array.isArray(o)?r.push.apply(r,o):r.push(o)}while(!n.endOfStream());this._decoder=null}return function(e){return!s(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(0<e.length&&65279===e[0]?(this._BOMseen=!0,e.shift()):0<e.length&&(this._BOMseen=!0)),l(e)}.call(this,r)},Object.defineProperty&&Object.defineProperty(C.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),C.prototype.encode=function(e,t){e=e===void 0?"":e+"",t=i(t),this._do_not_flush||(this._encoder=Q[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=!!t.stream;for(var a=new c(o(e)),n=[],r,s;(s=a.read(),s!==K)&&!(r=this._encoder.handler(a,s),-1===r);)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._do_not_flush){for(;r=this._encoder.handler(a,a.read()),-1!==r;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)},Q["UTF-8"]=function(e){return new S(e)},J["UTF-8"]=function(e){return new A(e)},function(){"encoding-indexes"in a&&X.forEach(function(e){"Legacy single-byte encodings"!==e.heading||e.encodings.forEach(function(e){var t=e.name,a=g(t.toLowerCase());J[t]=function(e){return new k(a,e)},Q[t]=function(e){return new v(a,e)}})})}(),J.GBK=function(e){return new I(e)},Q.GBK=function(e){return new R(e,!0)},Q.gb18030=function(e){return new R(e)},J.gb18030=function(e){return new I(e)},Q.Big5=function(e){return new z(e)},J.Big5=function(e){return new O(e)},Q["EUC-JP"]=function(e){return new T(e)},J["EUC-JP"]=function(e){return new L(e)},Q["ISO-2022-JP"]=function(e){return new P(e)},J["ISO-2022-JP"]=function(e){return new B(e)},Q.Shift_JIS=function(e){return new D(e)},J.Shift_JIS=function(e){return new N(e)},Q["EUC-KR"]=function(e){return new U(e)},J["EUC-KR"]=function(e){return new j(e)},Q["UTF-16BE"]=function(e){return new G(!0,e)},J["UTF-16BE"]=function(e){return new M(!0,e)},Q["UTF-16LE"]=function(e){return new G(!1,e)},J["UTF-16LE"]=function(e){return new M(!1,e)},Q["x-user-defined"]=function(e){return new Y(e)},J["x-user-defined"]=function(e){return new Z(e)},a.TextEncoder||(a.TextEncoder=C),a.TextDecoder||(a.TextDecoder=E),"undefined"!=typeof t&&t.exports&&(t.exports={TextEncoder:a.TextEncoder,TextDecoder:a.TextDecoder,EncodingIndexes:a["encoding-indexes"]})})(this||{})},{"./encoding-indexes.js":6}],59:[function(e,t){(function(a){'use strict';function n(e){if(!e)throw new Error("forgot to pass buffer");return m.isBuffer(e)?e:e instanceof a.ArrayBuffer?m.from(e):e.buffer instanceof a.ArrayBuffer?1===e.BYTES_PER_ELEMENT?m.from(e):m.from(e.buffer):void 0}function r(e,t){return"string"==typeof e&&_.has(e)?c.resolve(_.get(e)):r.getShapefile(e,t).then(function(t){return"string"==typeof e&&_.set(e,t),t})}function s(e,t){return d(e).then(function(e){return r.parseZip(e,t)})}var i=e("proj4");i.default&&(i=i.default);var o=e("./unzip"),d=e("./binaryajax"),l=e("./parseShp"),p=e("parsedbf"),c=e("lie"),u=e("lru-cache"),m=e("buffer").Buffer,_=new u({max:20});r.combine=function(e){for(var t={type:"FeatureCollection",features:[]},a=0,n=e[0].length;a<n;)t.features.push({type:"Feature",geometry:e[0][a],properties:e[1][a]}),a++;return t},r.parseZip=function(e,t){e=n(e);var a=o(e),s=[];for(var d in t=t||[],a)-1===d.indexOf("__MACOSX")&&("shp"===d.slice(-3).toLowerCase()?(s.push(d.slice(0,-4)),a[d.slice(0,-3)+d.slice(-3).toLowerCase()]=a[d]):"prj"===d.slice(-3).toLowerCase()?a[d.slice(0,-3)+d.slice(-3).toLowerCase()]=i(a[d]):"json"===d.slice(-4).toLowerCase()||-1<t.indexOf(d.split(".").pop())?s.push(d.slice(0,-3)+d.slice(-3).toLowerCase()):("dbf"===d.slice(-3).toLowerCase()||"cpg"===d.slice(-3).toLowerCase())&&(a[d.slice(0,-3)+d.slice(-3).toLowerCase()]=a[d]));if(!s.length)throw new Error("no layers founds");var c=s.map(function(e){var n=e.lastIndexOf("."),s,i;return-1<n&&-1<e.slice(n).indexOf("json")?(s=JSON.parse(a[e]),s.fileName=e.slice(0,n)):-1<t.indexOf(e.slice(n+1))?(s=a[e],s.fileName=e):(a[e+".dbf"]&&(i=p(a[e+".dbf"],a[e+".cpg"])),s=r.combine([l(a[e+".shp"],a[e+".prj"]),i]),s.fileName=e),s});return 1===c.length?c[0]:c},r.getShapefile=function(e,t){return"string"==typeof e?".zip"===e.slice(-4).toLowerCase()?s(e,t):c.all([c.all([d(e+".shp"),d(e+".prj")]).then(function(e){var t=!1;try{e[1]&&(t=i(e[1]))}catch(a){t=!1}return l(e[0],t)}),c.all([d(e+".dbf"),d(e+".cpg")]).then(function(e){return p(e[0],e[1])})]).then(r.combine):new c(function(t){t(r.parseZip(e))})},r.parseShp=function(e,t){if(e=n(e),m.isBuffer(t)&&(t=t.toString()),"string"==typeof t)try{t=i(t)}catch(a){t=!1}return l(e)},r.parseDbf=function(e,t){return e=n(e),p(e,t)},t.exports=r}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./binaryajax":2,"./parseShp":3,"./unzip":4,buffer:7,lie:35,"lru-cache":36,parsedbf:54,proj4:55}]},{},[59])(59)});
!function i(r,s,o){function a(e,t){if(!s[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=s[e]={exports:{}},r[e][0].call(n.exports,function(t){return a(r[e][1][t]||t)},n,n.exports,i,r,s,o)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<o.length;t++)a(o[t]);return a}({1:[function(t,e,n){window.turf={along:t("../node_modules/turf-along/index.js"),bezier:t("../node_modules/turf-bezier/index.js"),buffer:t("../node_modules/turf-buffer/index.js"),center:t("../node_modules/turf-center/index.js"),centroid:t("../node_modules/turf-centroid/index.js"),destination:t("../node_modules/turf-destination/index.js"),envelope:t("../node_modules/turf-envelope/index.js"),explode:t("../node_modules/turf-explode/index.js"),midpoint:t("../node_modules/turf-midpoint/index.js"),sample:t("../node_modules/turf-sample/index.js"),simplify:t("../node_modules/turf-simplify/index.js"),tin:t("../node_modules/turf-tin/index.js"),union:t("../node_modules/turf-union/index.js"),within:t("../node_modules/turf-within/index.js")}},{"../node_modules/turf-along/index.js":5,"../node_modules/turf-bezier/index.js":9,"../node_modules/turf-buffer/index.js":11,"../node_modules/turf-center/index.js":12,"../node_modules/turf-centroid/index.js":13,"../node_modules/turf-destination/index.js":14,"../node_modules/turf-envelope/index.js":16,"../node_modules/turf-explode/index.js":17,"../node_modules/turf-midpoint/index.js":22,"../node_modules/turf-sample/index.js":23,"../node_modules/turf-simplify/index.js":24,"../node_modules/turf-tin/index.js":25,"../node_modules/turf-union/index.js":26,"../node_modules/turf-within/index.js":27}],2:[function(t,e,n){e.exports=function(t){if(!t||!t.type)return null;var e=i[t.type];if(!e)return null;return"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0};var i={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],3:[function(t,e,n){var i,r;i=this,r=function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function c(){}function g(){}function i(){}function r(){}function s(){}function o(){}function p(t){this.message=t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function u(){0===arguments.length?p.call(this):1===arguments.length&&p.call(this,arguments[0])}function l(){}function d(){var t,e,n;this.x=null,this.y=null,this.z=null,0===arguments.length?d.call(this,0,0):1===arguments.length?(t=arguments[0],d.call(this,t.x,t.y,t.z)):2===arguments.length?(e=arguments[0],n=arguments[1],d.call(this,e,n,d.NULL_ORDINATE)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.x=t,this.y=e,this.z=n)}function h(){if(this.dimensionsToTest=2,0===arguments.length)h.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new c;this.dimensionsToTest=t}}function f(){}function m(){}function y(t){this.message=t||""}function v(){}function x(t){this.message=t||""}function E(t){this.message=t||""}function I(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function N(){var t,e;I.apply(this),0===arguments.length||(1===arguments.length?(e=arguments[0],this.ensureCapacity(e.length),this.add(e,!0)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.ensureCapacity(t.length),this.add(t,e)))}function C(){var t,e,n,i;this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length?this.init():1===arguments.length?arguments[0]instanceof d?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof C&&(e=arguments[0],this.init(e)):2===arguments.length?(n=arguments[0],i=arguments[1],this.init(n.x,i.x,n.y,i.y)):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],this.init(t,e,n,i))}function S(){}function w(){S.call(this,"Projective point not representable on the Cartesian plane.")}function L(){}function R(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function T(){}function P(t){this.str=t}function b(t){this.value=t}function O(){}function _(){var t,e,n;this.hi=0,(this.lo=0)===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this.init(t)):arguments[0]instanceof _?(e=arguments[0],this.init(e)):"string"==typeof arguments[0]&&(n=arguments[0],_.call(this,_.parse(n))):2===arguments.length&&(e=arguments[0],n=arguments[1],this.init(e,n))}function M(){}function D(){}function A(){}function F(){var t,e,n,i,r,s,o,a,u;this.x=null,this.y=null,this.w=null,0===arguments.length?(this.x=0,this.y=0,this.w=1):1===arguments.length?(e=arguments[0],this.x=e.x,this.y=e.y,this.w=1):2===arguments.length?"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(t=arguments[0],e=arguments[1],this.x=t,this.y=e,this.w=1):arguments[0]instanceof F&&arguments[1]instanceof F?(u=arguments[0],o=arguments[1],this.x=u.y*o.w-o.y*u.w,this.y=o.x*u.w-u.x*o.w,this.w=u.x*o.y-o.x*u.y):arguments[0]instanceof d&&arguments[1]instanceof d&&(a=arguments[0],n=arguments[1],this.x=a.y-n.y,this.y=n.x-a.x,this.w=a.x*n.y-n.x*a.y):3===arguments.length?(i=arguments[0],r=arguments[1],s=arguments[2],this.x=i,this.y=r,this.w=s):4===arguments.length&&(o=arguments[1],u=arguments[2],n=arguments[3],i=(a=arguments[0]).y-o.y,r=o.x-a.x,s=a.x*o.y-o.x*a.y,o=u.y-n.y,a=n.x-u.x,u=u.x*n.y-n.x*u.y,this.x=r*u-a*s,this.y=o*s-i*u,this.w=i*a-o*r)}function G(){}function q(){}function B(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function z(){}function V(){}function k(){}function Y(){}function U(){}function X(){}function H(){}function W(){}function j(){}function K(){}function Z(){}function J(){}function Q(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function $(t){return null==t?Gs:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function st(){}function ot(){}function at(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function ut(){}function lt(){}function ht(){}function ct(){}function ft(){this.geometries=null;var t=arguments[0];if(B.call(this,arguments[1]),null===t&&(t=[]),B.hasNullElements(t))throw new c;this.geometries=t}function gt(){ft.call(this,arguments[0],arguments[1])}function dt(){var t,e;this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length?(e=arguments[0],dt.call(this,e,V.MOD2_BOUNDARY_RULE)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.geom=t,this.geomFact=t.getFactory(),this.bnRule=e)}function pt(){this.count=null}function mt(){}function yt(){}function vt(){}function xt(){}function Et(){}function It(){}function Nt(){}function Ct(){this.points=null;var t=arguments[0];B.call(this,arguments[1]),this.init(t)}function St(){}function wt(){this.coordinates=null;var t=arguments[0];B.call(this,arguments[1]),this.init(t)}function Lt(){}function Rt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1];if(B.call(this,arguments[2]),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),B.hasNullElements(e))throw new c;if(t.isEmpty()&&B.hasNonEmptyElements(e))throw new c;this.shell=t,this.holes=e}function Tt(){ft.call(this,arguments[0],arguments[1])}function Pt(){var t,e;arguments[0]instanceof d&&arguments[1]instanceof Yt?(t=arguments[0],e=arguments[1],Pt.call(this,e.getCoordinateSequenceFactory().create(t),e)):R(arguments[0],D)&&arguments[1]instanceof Yt&&(Ct.call(this,arguments[0],arguments[1]),this.validateConstruction())}function bt(){ft.call(this,arguments[0],arguments[1])}function Ot(){var t;this.factory=null,this.isUserDataCopied=!1,0===arguments.length||1===arguments.length&&(t=arguments[0],this.factory=t)}function _t(){}function Mt(){}function Dt(){}function At(){}function Ft(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Ft.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new d}else if(R(arguments[0],D)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],t=arguments[1];this.coordinates=r,this.dimension=t,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],r=arguments[1];this.coordinates=new Array(s).fill(null),this.dimension=r;for(n=0;n<s;n++)this.coordinates[n]=new d}}function Gt(){}function qt(n,i,r){var s=[0],o=!1;return n.push(s),{next:function(){var t,e=s[0];return!o&&e<i.length?(t=r?[i[e],r[e]]:i[e],s[0]++):(o=!0,n.splice(n.indexOf(s),1)),{done:o,value:t}}}}function Bt(){return this._values.length}function zt(){this.map_=new Us}function Vt(){var t,e;this.modelType=null,this.scale=null,0===arguments.length?this.modelType=Vt.FLOATING:1===arguments.length&&(arguments[0]instanceof kt?(t=arguments[0],(this.modelType=t)===Vt.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(e=arguments[0],this.modelType=Vt.FIXED,this.setScale(e)):arguments[0]instanceof Vt&&(e=arguments[0],this.modelType=e.modelType,this.scale=e.scale))}function kt(){this.name=null;var t=arguments[0];this.name=t,kt.nameToTypeMap.put(t,this)}function Yt(){var t,e,n,i;this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length?Yt.call(this,new Vt,0):1===arguments.length?R(arguments[0],G)?(t=arguments[0],Yt.call(this,new Vt,0,t)):arguments[0]instanceof Vt&&(e=arguments[0],Yt.call(this,e,0,Yt.getDefaultCoordinateSequenceFactory())):2===arguments.length?(n=arguments[0],i=arguments[1],Yt.call(this,n,i,Yt.getDefaultCoordinateSequenceFactory())):3===arguments.length&&(e=arguments[0],n=arguments[1],i=arguments[2],this.precisionModel=e,this.coordinateSequenceFactory=i,this.SRID=n)}function Ut(t){this.geometryFactory=t||new Yt}function Xt(t){this.parser=new Ut(t)}function Ht(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new d,this.intPt[1]=new d,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Wt(){Ht.apply(this)}function jt(){}function Kt(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function Zt(){}function Jt(){var t,e,n,i;this.p0=null,this.p1=null,0===arguments.length?Jt.call(this,new d,new d):1===arguments.length?(e=arguments[0],Jt.call(this,e.p0,e.p1)):2===arguments.length?(n=arguments[0],i=arguments[1],this.p0=n,this.p1=i):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],Jt.call(this,new d(t,e),new d(n,i)))}function Qt(){var t;this.matrix=null,0===arguments.length?(this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(lt.FALSE)):1===arguments.length&&("string"==typeof arguments[0]?(t=arguments[0],Qt.call(this),this.set(t)):arguments[0]instanceof Qt&&(t=arguments[0],Qt.call(this),this.matrix[L.INTERIOR][L.INTERIOR]=t.matrix[L.INTERIOR][L.INTERIOR],this.matrix[L.INTERIOR][L.BOUNDARY]=t.matrix[L.INTERIOR][L.BOUNDARY],this.matrix[L.INTERIOR][L.EXTERIOR]=t.matrix[L.INTERIOR][L.EXTERIOR],this.matrix[L.BOUNDARY][L.INTERIOR]=t.matrix[L.BOUNDARY][L.INTERIOR],this.matrix[L.BOUNDARY][L.BOUNDARY]=t.matrix[L.BOUNDARY][L.BOUNDARY],this.matrix[L.BOUNDARY][L.EXTERIOR]=t.matrix[L.BOUNDARY][L.EXTERIOR],this.matrix[L.EXTERIOR][L.INTERIOR]=t.matrix[L.EXTERIOR][L.INTERIOR],this.matrix[L.EXTERIOR][L.BOUNDARY]=t.matrix[L.EXTERIOR][L.BOUNDARY],this.matrix[L.EXTERIOR][L.EXTERIOR]=t.matrix[L.EXTERIOR][L.EXTERIOR]))}function $t(){this.areaBasePt=null,this.triangleCent3=new d,this.areasum2=0,this.cg3=new d,this.lineCentSum=new d,this.totalLength=0,this.ptCount=0,this.ptCentSum=new d;var t=arguments[0];this.areaBasePt=null,this.add(t)}function te(t){this.message=t||""}function ee(){this.array_=[]}function ne(){this.treeSet=new at,this.list=new I}function ie(){var t,e;this.geomFactory=null,this.inputPts=null,1===arguments.length?(e=arguments[0],ie.call(this,ie.extractCoordinates(e),e.getFactory())):2===arguments.length&&(t=arguments[0],e=arguments[1],this.inputPts=ne.filterCoordinates(t),this.geomFactory=e)}function re(){this.origin=null;var t=arguments[0];this.origin=t}function se(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function oe(){var t,e;this.snapTolerance=0,this.srcPts=null,this.seg=new Jt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ct&&"number"==typeof arguments[1]?(t=arguments[0],e=arguments[1],oe.call(this,t.getCoordinates(),e)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(t=arguments[0],e=arguments[1],this.srcPts=t,this._isClosed=oe.isClosed(t),this.snapTolerance=e)}function ae(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function ue(){var t,e,n;se.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length?(e=arguments[0],n=arguments[1],this.snapTolerance=e,this.snapPts=n):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.snapTolerance=t,this.snapPts=e,this.isSelfSnap=n)}function le(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function he(){this.commonCoord=null,this.ccFilter=new ce}function ce(){this.commonBitsX=new le,this.commonBitsY=new le}function fe(){this.trans=null;var t=arguments[0];this.trans=t}function ge(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function de(){if(this.boundaryRule=V.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new c;this.boundaryRule=t}}function pe(){}function me(){}function ye(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function ve(){}function xe(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Ee(){this._size=null,this.items=null,this._size=0,this.items=new I,this.items.add(null)}function Ie(){}function Ne(){}function Ce(){var t;this.childBoundables=new I,this.bounds=null,this.level=null,0===arguments.length||1===arguments.length&&(t=arguments[0],this.level=t)}function Se(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function we(){var t;this.root=null,this.built=!1,this.itemBoundables=new I,this.nodeCapacity=null,0===arguments.length?we.call(this,we.DEFAULT_NODE_CAPACITY):1===arguments.length&&(l.isTrue(1<(t=arguments[0]),"Node capacity must be greater than 1"),this.nodeCapacity=t)}function Le(){}function Re(){var t;0===arguments.length?Re.call(this,Re.DEFAULT_NODE_CAPACITY):1===arguments.length&&(t=arguments[0],we.call(this,t))}function Te(){Ce.call(this,arguments[0])}function Pe(){}function be(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new d(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Oe(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function _e(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null;var t=arguments[this.currSegIndex=0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Me(){}function De(){this.nodeList=new Oe(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ae(){this.tempEnv1=new C,this.tempEnv2=new C,this.overlapSeg1=new Jt,this.overlapSeg2=new Jt}function Fe(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Ge(){}function qe(){}function Be(){}function ze(){var t;this.segInt=null,0===arguments.length||1===arguments.length&&(t=arguments[0],this.setSegmentIntersector(t))}function Ve(){this.monoChains=new I,this.index=new Re,this.idCounter=0,this.nodedSegStrings=null,(this.nOverlaps=0)===arguments.length||1===arguments.length&&ze.call(this,arguments[0])}function ke(){Ae.apply(this),this.si=null;var t=arguments[0];this.si=t}function Ye(){var t,e;this.pt=null,1===arguments.length?p.call(this,arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1],p.call(this,Ye.msgWithCoord(t,e)),this.pt=new d(e))}function Ue(){}function Xe(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new I,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function He(){this.li=new Wt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function We(){this.nv=null;var t=arguments[0];this.nv=new He(We.toSegmentStrings(t))}function je(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function Ke(){}function Ze(){var t;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ke.ON]=n}else if(arguments[0]instanceof Ze){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else 3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.init(3),this.location[Ke.ON]=t,this.location[Ke.LEFT]=e,this.location[Ke.RIGHT]=n)}function Je(){var t,e,n,i,r,s;this.elt=new Array(2).fill(null),1===arguments.length?Number.isInteger(arguments[0])?(t=arguments[0],this.elt[0]=new Ze(t),this.elt[1]=new Ze(t)):arguments[0]instanceof Je&&(e=arguments[0],this.elt[0]=new Ze(e.elt[0]),this.elt[1]=new Ze(e.elt[1])):2===arguments.length?(e=arguments[0],n=arguments[1],this.elt[0]=new Ze(L.NONE),this.elt[1]=new Ze(L.NONE),this.elt[e].setLocation(n)):3===arguments.length?(i=arguments[0],r=arguments[1],s=arguments[2],this.elt[0]=new Ze(i,r,s),this.elt[1]=new Ze(i,r,s)):4===arguments.length&&(n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],this.elt[0]=new Ze(L.NONE,L.NONE,L.NONE),this.elt[1]=new Ze(L.NONE,L.NONE,L.NONE),this.elt[n].setLocations(i,r,s))}function Qe(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new I,this.pts=new I,this.label=new Je(L.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new I,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function $e(){Qe.call(this,arguments[0],arguments[1])}function tn(){Qe.call(this,arguments[0],arguments[1])}function en(){var t;this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(t=arguments[0],this.label=t)}function nn(){en.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Je(0,L.NONE)}function rn(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function sn(){var t,e,n,i;this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length?(t=arguments[0],this.edge=t):3===arguments.length?(e=arguments[0],n=arguments[1],i=arguments[2],sn.call(this,e,n,i,null)):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],sn.call(this,t),this.init(e,n),this.label=i)}function on(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];sn.call(this,t),(this._isForward=e)?this.init(t.getCoordinate(0),t.getCoordinate(1)):(e=t.getNumPoints()-1,this.init(t.getCoordinate(e),t.getCoordinate(e-1))),this.computeDirectedLabel()}function an(){}function un(){var t;this.edges=new I,this.nodes=null,this.edgeEndList=new I,0===arguments.length?this.nodes=new rn(new an):1===arguments.length&&(t=arguments[0],this.nodes=new rn(t))}function ln(){this.geometryFactory=null,this.shellList=new I;var t=arguments[0];this.geometryFactory=t}function hn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new I,this.resultLineList=new I;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function cn(){this.op=null,this.geometryFactory=null,this.resultPointList=new I;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function fn(){}function gn(){this.geom=null;var t=arguments[0];this.geom=t}function dn(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[L.NONE,L.NONE]}function pn(){dn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function mn(){an.apply(this)}function yn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function vn(){var t,e,n;this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length?(e=arguments[0],n=arguments[1],this.eventType=vn.DELETE,this.xValue=e,this.insertEvent=n):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.eventType=vn.INSERT,this.label=t,this.xValue=e,this.obj=n)}function xn(){}function En(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function In(){xn.apply(this),this.events=new I,this.nOverlaps=null}function Nn(){this.min=g.POSITIVE_INFINITY,this.max=g.NEGATIVE_INFINITY}function Cn(){}function Sn(){Nn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function wn(){Nn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Ln(){this.leaves=new I,this.root=null,this.level=0}function Rn(){var t,e;this.lines=null,this.isForcedToLineString=!1,1===arguments.length?(e=arguments[0],this.lines=e):2===arguments.length&&(t=arguments[0],e=arguments[1],this.lines=t,this.isForcedToLineString=e)}function Tn(){this.items=new I}function Pn(){this.index=null;var t=arguments[0];if(!R(t,Lt))throw new c;this.index=new On(t)}function bn(){this.counter=null;var t=arguments[0];this.counter=t}function On(){this.index=new Ln;var t=arguments[0];this.init(t)}function _n(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new d(t),this.segmentIndex=e,this.dist=n}function Mn(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Dn(){}function An(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new C,this.env2=new C;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();t=new Dn;this.startIndex=t.getChainStartIndices(this.pts)}function Fn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=Fn.NULL_VALUE}function Gn(){var t,e;en.apply(this),this.pts=null,this.env=null,this.eiList=new Mn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Fn,this.depthDelta=0,1===arguments.length?(e=arguments[0],Gn.call(this,e,null)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.pts=t,this.label=e)}function qn(){var t,e,n;un.apply(this),this.parentGeom=null,this.lineEdgeMap=new zt,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new de,2===arguments.length?(e=arguments[0],n=arguments[1],qn.call(this,e,n,V.OGC_SFS_BOUNDARY_RULE)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.argIndex=t,this.parentGeom=e,this.boundaryNodeRule=n,null!==e&&this.add(e))}function Bn(){var t,e,n;this.li=new Wt,this.resultPrecisionModel=null,this.arg=null,1===arguments.length?(e=arguments[0],this.setComputationPrecision(e.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new qn(0,e)):2===arguments.length?(n=arguments[0],t=arguments[1],Bn.call(this,n,t,V.OGC_SFS_BOUNDARY_RULE)):3===arguments.length&&(e=arguments[1],n=arguments[2],0<=(t=arguments[0]).getPrecisionModel().compareTo(e.getPrecisionModel())?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new qn(0,t,n),this.arg[1]=new qn(1,e,n))}function zn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=zn.orientation(t)}function Vn(){this.edges=new I,this.ocaMap=new rt}function kn(){this.ptLocator=new de,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Vn,this.resultPolyList=new I,this.resultLineList=new I,this.resultPointList=new I;var t=arguments[0],e=arguments[1];Bn.call(this,t,e),this.graph=new un(new mn),this.geomFact=t.getFactory()}function Yn(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Un(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Xn(){this.factory=null,this.interiorPoint=null;var t=arguments[this.maxWidth=0];this.factory=t.getFactory(),this.add(t)}function Hn(){this.poly=null,this.centreY=null,this.hiY=g.MAX_VALUE,this.loY=-g.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Xn.avg(this.loY,this.hiY)}function Wn(){this.centroid=null,this.minDistance=g.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function jn(){this.centroid=null,this.minDistance=g.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function Kn(){}function Zn(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Jn(){this.input=null,this.extremalPts=null,this.centre=null;var t=arguments[this.radius=0];this.input=t}function Qn(){var t,e;this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Jt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length?(e=arguments[0],Qn.call(this,e,!1)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.inputGeom=t,this.isConvex=e)}function $n(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function ti(){se.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function ei(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function ni(){this._isMarked=!1,ei.call(this,arguments[0])}function ii(){this.vertexMap=new zt}function ri(){this._isStart=!1,ni.call(this,arguments[0])}function si(){ii.apply(this)}function oi(){this.result=null,this.factory=null,this.graph=null,this.lines=new I,this.nodeEdgeStack=new ee,this.ringStartEdge=null,this.graph=new si}function ai(){this.items=new I,this.subnode=new Array(4).fill(null)}function ui(){}function li(){this.pt=new d,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function hi(){ai.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function ci(){}function fi(){ai.apply(this)}function gi(){this.root=null,this.minExtent=1,this.root=new fi}function di(t){this.geometryFactory=t||new Yt}function pi(t){this.geometryFactory=t||new Yt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new di(this.geometryFactory)}function mi(){this.parser=new di(this.geometryFactory)}function yi(t){this.geometryFactory=t||new Yt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ut(this.geometryFactory)}function vi(t){return[t.x,t.y]}function xi(t){this.geometryFactory=t||new Yt}function Ei(){var t,e;this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length?(t=arguments[0],e=arguments[1],Ei.call(this,t,e,0,0)):4===arguments.length&&(t=arguments[0],e=arguments[1],this.noder=t,this.scaleFactor=e,this.isScaled=!this.isIntegerPrecision())}function Ii(){var t,e;this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length?(e=arguments[0],this.inputGeom=e):2===arguments.length&&(t=arguments[0],e=arguments[1],this.inputGeom=t,this.isClosedEndpointsInInterior=!e.isInBoundary(2))}function Ni(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Ci(){var t,e,n,i;this.quadrantSegments=Ci.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Ci.CAP_ROUND,this.joinStyle=Ci.JOIN_ROUND,this.mitreLimit=Ci.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Ci.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length||(1===arguments.length?(e=arguments[0],this.setQuadrantSegments(e)):2===arguments.length?(n=arguments[0],i=arguments[1],this.setQuadrantSegments(n),this.setEndCapStyle(i)):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],this.setQuadrantSegments(t),this.setEndCapStyle(e),this.setJoinStyle(n),this.setMitreLimit(i)))}function Si(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function wi(){this.array_=[]}function Li(){this.finder=null,this.dirEdgeList=new I,this.nodes=new I,this.rightMostCoord=null,this.env=null,this.finder=new Si}function Ri(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Zt.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Ti(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new I}function Pi(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Jt,this.seg1=new Jt,this.offset0=new Jt,this.offset1=new Jt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Wt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),8<=e.getQuadrantSegments()&&e.getJoinStyle()===Ci.JOIN_ROUND&&(this.closingSegLengthFactor=Pi.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function bi(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Oi(){this.subgraphs=null,this.seg=new Jt,this.cga=new Zt;var t=arguments[0];this.subgraphs=t}function _i(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new Jt(t),this.leftDepth=e}function Mi(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new I;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function Di(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var t=arguments[this.numTests=0];this.li=t}function Ai(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Vn;var t=arguments[0];this.bufParams=t}function Fi(){this.li=new Wt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function Gi(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new c;1!==e&&(this.pt=new d(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new d,this.p1Scaled=new d),this.initCorners(this.pt)}function qi(){this.tempEnv1=new C,this.selectedSegment=new Jt}function Bi(){this.index=null;var t=arguments[0];this.index=t}function zi(){qi.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function Vi(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new I}function ki(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Wt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function Yi(){var t,e;this.argGeom=null,this.distance=null,this.bufParams=new Ci,this.resultGeometry=null,this.saveException=null,1===arguments.length?(e=arguments[0],this.argGeom=e):2===arguments.length&&(t=arguments[0],e=arguments[1],this.argGeom=t,this.bufParams=e)}function Ui(){this.comps=null;var t=arguments[0];this.comps=t}function Xi(){var t,e,n;this.component=null,this.segIndex=null,this.pt=null,2===arguments.length?(e=arguments[0],n=arguments[1],Xi.call(this,e,Xi.INSIDE_AREA,n)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.component=t,this.segIndex=e,this.pt=n)}function Hi(){this.pts=null;var t=arguments[0];this.pts=t}function Wi(){this.locations=null;var t=arguments[0];this.locations=t}function ji(){var t,e,n;this.geom=null,this.terminateDistance=0,this.ptLocator=new de,this.minDistanceLocation=null,this.minDistance=g.MAX_VALUE,2===arguments.length?(e=arguments[0],n=arguments[1],ji.call(this,e,n,0)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.geom=new Array(2).fill(null),this.geom[0]=t,this.geom[1]=e,this.terminateDistance=n)}function Ki(){this.factory=null,this.directedEdges=new I,this.coordinates=null;var t=arguments[0];this.factory=t}function Zi(){this._isMarked=!1,this._isVisited=!1,this.data=null}function Ji(){Zi.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y;this.quadrant=Ge.quadrant(t,n),this.angle=Math.atan2(n,t)}function Qi(){Ji.call(this,arguments[0],arguments[1],arguments[2],arguments[3])}function $i(){var t,e;Zi.apply(this),this.dirEdge=null,0===arguments.length||2===arguments.length&&(t=arguments[0],e=arguments[1],this.setDirectedEdges(t,e))}function tr(){this.outEdges=new I,this.sorted=!1}function er(){var t,e;Zi.apply(this),this.pt=null,this.deStar=null,1===arguments.length?(e=arguments[0],er.call(this,e,new tr)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.pt=t,this.deStar=e)}function nr(){$i.apply(this),this.line=null;var t=arguments[0];this.line=t}function ir(){this.nodeMap=new rt}function rr(){this.edges=new Q,this.dirEdges=new Q,this.nodeMap=new ir}function sr(){rr.apply(this)}function or(){this.graph=new sr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function ar(){this.edgeRing=null,this.next=null,this.label=-1,Ji.call(this,arguments[0],arguments[1],arguments[2],arguments[3])}function ur(){$i.apply(this),this.line=null;var t=arguments[0];this.line=t}function lr(){this.factory=null,this.deList=new I,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function hr(){}function cr(){rr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function fr(){var t;this.lineStringAdder=new gr(this),this.graph=null,this.dangles=new I,this.cutEdges=new I,this.invalidRingLines=new I,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length?fr.call(this,!1):1===arguments.length&&(t=arguments[0],this.extractOnlyPolygonal=t)}function gr(){this.p=null;var t=arguments[0];this.p=t}function dr(){}function pr(){var t;this.edgeEnds=new I,1===arguments.length?(t=arguments[0],pr.call(this,null,t)):2===arguments.length&&(t=arguments[1],sn.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new Je(t.getLabel())),this.insert(t))}function mr(){dn.apply(this)}function yr(){nn.call(this,arguments[0],arguments[1])}function vr(){an.apply(this)}function xr(){this.li=new Wt,this.ptLocator=new de,this.arg=null,this.nodes=new rn(new vr),this.im=null,this.isolatedEdges=new I,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Er(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Ir(){this.li=new Wt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new d(t.getMinX(),t.getMinY()),this.diagUp1=new d(t.getMaxX(),t.getMaxY()),this.diagDown0=new d(t.getMinX(),t.getMaxY()),this.diagDown1=new d(t.getMaxX(),t.getMinY())}function Nr(){this._isDone=!1}function Cr(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Sr(){Nr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function wr(){Nr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Lr(){Nr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new d,this.p1=new d;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Ir(this.rectEnv)}function Rr(){var t,e,n;this._relate=null,2===arguments.length?(e=arguments[0],n=arguments[1],Bn.call(this,e,n),this._relate=new xr(this.arg)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],Bn.call(this,t,e,n),this._relate=new xr(this.arg))}function Tr(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=Tr.extractFactory(t),this.inputGeoms=t}function Pr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function br(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Or(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new I)}function _r(){var t,e;this.polygons=new I,this.lines=new I,this.points=new I,this.geomFact=null,1===arguments.length?R(arguments[0],m)?(t=arguments[0],this.extract(t)):arguments[0]instanceof B&&(e=arguments[0],this.extract(e)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.geomFact=e,this.extract(t))}function Mr(){this.geometryFactory=new Yt,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Dr(){this.items=new I,this.subnode=[null,null]}function Ar(){var t,e;this.min=null,this.max=null,0===arguments.length?(this.min=0,this.max=0):1===arguments.length?(e=arguments[0],this.init(e.min,e.max)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.init(t,e))}function Fr(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Gr(){Dr.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function qr(){Dr.apply(this)}function Br(){this.root=null,this.minExtent=1,this.root=new qr}function zr(){}function Vr(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new Ar;var t=arguments[0];this.ring=t,this.buildIndex()}function kr(){qi.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function Yr(){this.nodes=new rn(new vr)}function Ur(){this.li=new Wt,this.geomGraph=null,this.nodeGraph=new Yr,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Xr(){this.graph=null,this.rings=new I,this.totalEnv=new C,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Hr(){var t,e;this.errorType=null,this.pt=null,1===arguments.length?(e=arguments[0],Hr.call(this,e,null)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.errorType=t,null!==e&&(this.pt=e.copy()))}function Wr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function jr(){Ot.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function Kr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Zr(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Jt;var t=arguments[0];this.pts=t}function Jr(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Qr(){se.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function $r(){var t,e,n,i;this.parent=null,this.index=null,2===arguments.length?(n=arguments[0],i=arguments[1],$r.call(this,n,i,null,-1)):4===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],Jt.call(this,t,e),this.parent=n,this.index=i)}function ts(){var t,e;this.parentLine=null,this.segs=null,this.resultSegs=new I,this.minimumSize=null,1===arguments.length?(e=arguments[0],ts.call(this,e,2)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.parentLine=t,this.minimumSize=e,this.init())}function es(){this.index=new gi}function ns(){this.querySeg=null,this.items=new I;var t=arguments[0];this.querySeg=t}function is(){this.li=new Wt,this.inputIndex=new es,this.outputIndex=new es,this.line=null,this.linePts=null;var t=arguments[this.distanceTolerance=0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function rs(){this.inputIndex=new es,this.outputIndex=new es,this.distanceTolerance=0}function ss(){this.inputGeom=null,this.lineSimplifier=new rs,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function os(){se.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function as(){this.tps=null;var t=arguments[0];this.tps=t}function us(){this.seg=null,this.segLen=null,this.splitPt=null;var t=arguments[this.minimumLen=0];this.seg=t,this.segLen=t.getLength()}function ls(){}function hs(){}function cs(){}function fs(){var t,e,n;this.p=null,1===arguments.length?(t=arguments[0],this.p=new d(t)):2===arguments.length?(e=arguments[0],n=arguments[1],this.p=new d(e,n)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.p=new d(t,e,n))}function gs(){this._isOnConstraint=null,this.constraint=null,fs.call(this,arguments[0])}function ds(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function ps(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=0<t.getTolerance()}function ms(){}function ys(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function vs(){var t,e;this.seg=null,1===arguments.length?"string"==typeof arguments[0]?p.call(this,arguments[0]):arguments[0]instanceof Jt&&(p.call(this,"Locate failed to converge (at edge: "+(e=arguments[0])+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Jt(e)):2===arguments.length&&(t=arguments[0],e=arguments[1],p.call(this,vs.msgWithSpatial(t,e)),this.seg=new Jt(e))}function xs(){}function Es(){this.visitedKey=0,this.quadEdges=new I,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Jt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Es.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new ys(this)}function Is(){}function Ns(){this.triList=new I}function Cs(){this.triList=new I}function Ss(){this.coordList=new N,this.triCoords=new I}function ws(){var t,e,n,i,r,s,o,a,u;this.ls=null,this.data=null,2===arguments.length?(t=arguments[0],e=arguments[1],this.ls=new Jt(t,e)):3===arguments.length?(t=arguments[0],e=arguments[1],n=arguments[2],this.ls=new Jt(t,e),this.data=n):6===arguments.length?(i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],u=arguments[5],ws.call(this,new d(i,r,s),new d(o,a,u))):7===arguments.length&&(n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5],u=arguments[6],ws.call(this,new d(n,i,r),new d(s,o,a),u))}function Ls(){}function Rs(){var t,e,n;this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length?(e=arguments[0],n=arguments[1],this.p=new d(e),this.left=null,this.right=null,this.count=1,this.data=n):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.p=new d(t,e),this.left=null,this.right=null,this.count=1,this.data=n)}function Ts(){var t;this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length?Ts.call(this,0):1===arguments.length&&(t=arguments[0],this.tolerance=t)}function Ps(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function bs(){this.initialVertices=null,this.segVertices=null,this.segments=new I,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new hs,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new I(t),this.tolerance=e,this.kdt=new Ts(e)}function Os(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function _s(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Ms(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Ds(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),i=parseInt(arguments[1],10)||0,r=i<0?Math.max(n+i,0):Math.min(i,n),i=arguments[2],i=void 0===i?n:parseInt(i,10)||0,s=i<0?Math.max(n+i,0):Math.min(i,n);r<s;r++)e[r]=t;return e}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},g.isNaN=function(t){return Number.isNaN(t)},g.doubleToLongBits=function(t){return t},g.longBitsToDouble=function(t){return t},g.isInfinite=function(t){return!Number.isFinite(t)},g.MAX_VALUE=Number.MAX_VALUE,a(u,p),e(u.prototype,{interfaces_:function(){return[]},getClass:function(){return u}}),e(l.prototype,{interfaces_:function(){return[]},getClass:function(){return l}}),l.shouldNeverReachHere=function(){if(0===arguments.length)l.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new u("Should never reach here"+(null!==t?": "+t:""))}},l.isTrue=function(){if(1===arguments.length)l.isTrue(arguments[0],null);else if(2===arguments.length){var t=arguments[1];if(!arguments[0])throw null===t?new u:new u(t)}},l.equals=function(){if(2===arguments.length)l.equals(arguments[0],arguments[1],null);else if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];if(!e.equals(t))throw new u("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))}},e(d.prototype,{setOrdinate:function(t,e){switch(t){case d.X:this.x=e;break;case d.Y:this.y=e;break;case d.Z:this.z=e;break;default:throw new c}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],t=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,t)&&!!n.equalsWithTolerance(this.y,e.y,t)}},getOrdinate:function(t){switch(t){case d.X:return this.x;case d.Y:return this.y;case d.Z:return this.z}throw new c},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||g.isNaN(this.z)&&g.isNaN(t.z))},equals:function(t){return t instanceof d&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return l.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new d(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return Math.sqrt(e*e+n*n+t*t)},distance:function(t){var e=this.x-t.x,t=this.y-t.y;return Math.sqrt(e*e+t*t)},hashCode:function(){return 37*(629+d.hashCode(this.x))+d.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[i,r,o]},getClass:function(){return d}}),d.hashCode=function(){if(1===arguments.length){var t=g.doubleToLongBits(arguments[0]);return Math.trunc(t^t>>>32)}},e(h.prototype,{compare:function(t,e){var n=t,t=e,e=h.compare(n.x,t.x);if(0!==e)return e;e=h.compare(n.y,t.y);return 0!==e?e:this.dimensionsToTest<=2?0:h.compare(n.z,t.z)},interfaces_:function(){return[s]},getClass:function(){return h}}),h.compare=function(t,e){return t<e?-1:e<t?1:g.isNaN(t)?g.isNaN(e)?0:-1:g.isNaN(e)?1:0},d.DimensionalComparator=h,d.serialVersionUID=0x5cbf2c235c7e5800,d.NULL_ORDINATE=g.NaN,d.X=0,d.Y=1,d.Z=2,f.prototype.hasNext=function(){},f.prototype.next=function(){},f.prototype.remove=function(){},m.prototype.add=function(){},m.prototype.addAll=function(){},m.prototype.isEmpty=function(){},m.prototype.iterator=function(){},m.prototype.size=function(){},m.prototype.toArray=function(){},m.prototype.remove=function(){},(y.prototype=new Error).name="IndexOutOfBoundsException",((v.prototype=Object.create(m.prototype)).constructor=v).prototype.get=function(){},v.prototype.set=function(){},v.prototype.isEmpty=function(){},(x.prototype=new Error).name="NoSuchElementException",(E.prototype=new Error).name="OperationNotSupported",((I.prototype=Object.create(v.prototype)).constructor=I).prototype.ensureCapacity=function(){},I.prototype.interfaces_=function(){return[v,m]},I.prototype.add=function(t){return this.array_.push(t),!0},I.prototype.clear=function(){this.array_=[]},I.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},I.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},I.prototype.iterator=function(){return new As(this)},I.prototype.get=function(t){if(t<0||t>=this.size())throw new y;return this.array_[t]},I.prototype.isEmpty=function(){return 0===this.array_.length},I.prototype.size=function(){return this.array_.length},I.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},I.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var As=function(t){this.arrayList_=t,this.position_=0};As.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new x;return this.arrayList_.get(this.position_++)},As.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},As.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},As.prototype.remove=function(){throw new E},a(N,I),e(N.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2!==arguments.length)return I.prototype.addAll.apply(this,arguments);for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e},clone:function(){for(var t=I.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(N.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];I.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof d&&"boolean"==typeof arguments[1]){e=arguments[0];if(!arguments[1]&&1<=this.size())if(this.get(this.size()-1).equals2D(e))return null;I.prototype.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],s=arguments[1];if(arguments[2])for(var o=0;o<r.length;o++)this.add(r[o],s);else for(o=r.length-1;0<=o;o--)this.add(r[o],s);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof d){var n=arguments[0],a=arguments[1];if(!arguments[2]){i=this.size();if(0<i){if(0<n)if(this.get(n-1).equals2D(a))return null;if(n<i)if(this.get(n).equals2D(a))return null}}I.prototype.add.call(this,n,a)}}else if(4===arguments.length){var u=arguments[0],l=arguments[1],a=arguments[2],h=arguments[3],c=1;h<a&&(c=-1);for(o=a;o!==h;o+=c)this.add(u[o],l);return!0}},closeRing:function(){0<this.size()&&this.add(new d(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return N}}),N.coordArrayType=new Array(0).fill(null),e(C.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof C))return!1;return this.isNull()?t.isNull():this.maxx===t.getMaxX()&&this.maxy===t.getMaxY()&&this.minx===t.getMinX()&&this.miny===t.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new C;var e=(this.minx>t.minx?this:t).minx,n=(this.miny>t.miny?this:t).miny;return new C(e,(this.maxx<t.maxx?this:t).maxx,n,(this.maxy<t.maxy?this:t).maxy)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof d){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof C){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy)}}else if(2===arguments.length){t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this.minx&&t<=this.maxx&&e>=this.miny&&e<=this.maxy)}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof d){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this.maxx||t<this.minx||e>this.maxy||e<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof d){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else 2===arguments.length&&(t=arguments[0],e=arguments[1],this.isNull()?(this.minx=t,this.maxx=t,this.miny=e,this.maxy=e):(t<this.minx&&(this.minx=t),t>this.maxx&&(this.maxx=t),e<this.miny&&(this.miny=e),e>this.maxy&&(this.maxy=e)))},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this.minx<t.minx?-1:this.minx>t.minx?1:this.miny<t.miny?-1:this.miny>t.miny?1:this.maxx<t.maxx?-1:this.maxx>t.maxx?1:this.maxy<t.maxy?-1:this.maxy>t.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],t=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=t,this.maxy+=t,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof d){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){t=arguments[0],e=arguments[1];return this.covers(t,e)}},centre:function(){return this.isNull()?null:new d((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){var t,e,n,i;0===arguments.length?this.setToNull():1===arguments.length?arguments[0]instanceof d?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof C&&(i=arguments[0],this.minx=i.minx,this.maxx=i.maxx,this.miny=i.miny,this.maxy=i.maxy):2===arguments.length?(t=arguments[0],e=arguments[1],this.init(t.x,e.x,t.y,e.y)):4===arguments.length&&(n=arguments[2],i=arguments[3],(t=arguments[0])<(e=arguments[1])?(this.minx=t,this.maxx=e):(this.minx=e,this.maxx=t),n<i?(this.miny=n,this.maxy=i):(this.miny=i,this.maxy=n))},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){return 37*(37*(37*(629+d.hashCode(this.minx))+d.hashCode(this.maxx))+d.hashCode(this.miny))+d.hashCode(this.maxy)},interfaces_:function(){return[i,o]},getClass:function(){return C}}),C.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t:e).x&&n.x<=(t.x>e.x?t:e).x&&n.y>=(t.y<e.y?t:e).y&&n.y<=(t.y>e.y?t:e).y}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=Math.min(s.x,o.x),n=Math.max(s.x,o.x),t=Math.min(i.x,r.x),e=Math.max(i.x,r.x);return!(n<t)&&(!(e<a)&&(a=Math.min(s.y,o.y),n=Math.max(s.y,o.y),t=Math.min(i.y,r.y),e=Math.max(i.y,r.y),!(n<t)&&!(e<a)))}},C.serialVersionUID=0x51845cd552189800,a(w,S),e(w.prototype,{interfaces_:function(){return[]},getClass:function(){return w}}),e(L.prototype,{interfaces_:function(){return[]},getClass:function(){return L}}),L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new c},L.INTERIOR=0,L.BOUNDARY=1,L.EXTERIOR=2,L.NONE=-1,e(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.log10=function(t){t=Math.log(t);return g.isInfinite(t)||g.isNaN(t)?t:t/T.LOG_10},T.min=function(t,e,n,i){return e<t&&(t=e),n<t&&(t=n),i<t&&(t=i),t},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){e=arguments[0],n=arguments[1],t=arguments[2];return e<n?n:t<e?t:e}},T.wrap=function(t,e){return t<0?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2];return(n=arguments[0])<t&&(n=t),n<e&&(n=e),n}if(4===arguments.length){var n,i=arguments[1],t=arguments[2],e=arguments[3];return(n=arguments[0])<i&&(n=i),n<t&&(n=t),n<e&&(n=e),n}},T.average=function(t,e){return(t+e)/2},T.LOG_10=Math.log(10),P.prototype.append=function(t){this.str+=t},P.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},P.prototype.toString=function(t){return this.str},b.prototype.intValue=function(){return this.value},b.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},b.isNaN=function(t){return Number.isNaN(t)},O.isWhitespace=function(t){return t<=32&&0<=t||127==t},O.toUpperCase=function(t){return t.toUpperCase()},e(_.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=_.magnitude(n.hi),r=_.TEN.pow(i);(n=n.divide(r)).gt(_.TEN)?(n=n.divide(_.TEN),i+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),--i);for(var s=i+1,o=new P,a=_.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===s&&o.append(".");var l=Math.trunc(n.hi);if(l<0)break;var h=!1,c=0,c=9<l?(h=!0,"9"):"0"+l;o.append(c),n=n.subtract(_.valueOf(l)).multiply(_.TEN),h&&n.selfAdd(_.TEN);l=!0,h=_.magnitude(n.hi);if(h<0&&Math.abs(h)>=a-u&&(l=!1),!l)break}return e[0]=i,o.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){t=arguments[0];return this.add(-t)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,i,r,s=arguments[0],o=arguments[1],a=null,u=null,e=null,l=this.hi/s;return e=(a=(u=_.SPLIT*l)-(a=u-l))*(i=(e=_.SPLIT*s)-(e-s))-(t=l*s)+a*(r=s-i)+(n=l-a)*i+n*r,e=l+(u=(this.hi-t-e+this.lo-l*o)/s),this.hi=e,this.lo=l-e+u,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof _){var t,e,n,i=arguments[0],r=null,s=null,o=null,a=null,u=(s=this.hi/i.hi)-(r=(o=_.SPLIT*s)-(r=o-s));return a=r*(t=(a=_.SPLIT*i.hi)-(a-i.hi))-(n=s*i.hi)+r*(e=i.hi-t)+u*t+u*e,new _(a=s+(o=(this.hi-n-a+this.lo-s*i.lo)/i.hi),s-a+o)}if("number"==typeof arguments[0]){o=arguments[0];return g.isNaN(o)?_.createNaN():_.copy(this).selfDivide(o,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return _.valueOf(1);var e=new _(this),n=_.valueOf(1),i=Math.abs(t);if(1<i)for(;0<i;)i%2==1&&n.selfMultiply(e),0<(i/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return _.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new _(t,e)},compareTo:function(t){return this.hi<t.hi?-1:this.hi>t.hi?1:this.lo<t.lo?-1:this.lo>t.lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){t=arguments[0];return this.init(t),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,e=_.valueOf(e),t=this.subtract(e.sqr()).hi*(.5*t);return e.add(t)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,s=null,o=null,a=null;return s=(r=this.hi+e)-(o=r-this.hi),i=(a=(s=e-o+(this.hi-s))+this.lo)+(r-(n=r+a)),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],n=null,i=null,r=null,s=null,o=null,a=null;r=this.hi+u,t=this.lo+l,s=r-(o=r-this.hi),e=t-(a=t-this.lo);i=(n=r+(o=(s=u-o+(this.hi-s))+t))+(o=l-a+(this.lo-e)+(i=o+(r-n))),n=o+(n-i);return this.hi=i,this.lo=n,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,i,r,s=arguments[0],o=arguments[1],t=null,a=(t=_.SPLIT*this.hi)-this.hi,e=_.SPLIT*s;a=t-a,n=this.hi-a,i=e-s;s=(t=this.hi*s)+(e=a*(i=e-i)-t+a*(r=s-i)+n*i+n*r+(this.hi*o+this.lo*s)),a=e+(t-s);return this.hi=s,this.lo=a,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return _.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new _(t,e)},negate:function(){return this.isNaN()?this:new _(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof _){var t=arguments[0];return t.isNaN()?_.createNaN():_.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){t=arguments[0];return g.isNaN(t)?_.createNaN():_.copy(this).selfMultiply(t,0)}},isNaN:function(){return g.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=_.magnitude(this.hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),t=e[0]+1,e=n;return"."===n.charAt(0)?e="0"+n:t<0?e="0."+_.stringOfChar("0",-t)+n:-1===n.indexOf(".")&&(t=t-n.length,e=n+_.stringOfChar("0",t)+".0"),this.isNegative()?"-"+e:e},reciprocal:function(){var t,e,n=null,i=null,r=null,s=null,o=(i=1/this.hi)-(n=(r=_.SPLIT*i)-(n=r-i)),a=(s=_.SPLIT*this.hi)-this.hi,s=i+(r=(1-(e=i*this.hi)-(s=n*(a=s-a)-e+n*(t=this.hi-a)+o*a+o*t)-i*this.lo)/this.hi);return new _(s,i-s+r)},toSciNotation:function(){if(this.isZero())return _.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),t=_.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);e="";1<n.length&&(e=n.substring(1));e=n.charAt(0)+"."+e;return this.isNegative()?"-"+e+t:e+t},abs:function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)},isPositive:function(){return 0<this.hi||0===this.hi&&0<this.lo},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof _){var t=arguments[0];return _.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){t=arguments[0];return _.copy(this).selfAdd(t)}},init:function(){var t,e;1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this.hi=t,this.lo=0):arguments[0]instanceof _&&(e=arguments[0],this.hi=e.hi,this.lo=e.lo):2===arguments.length&&(t=arguments[0],e=arguments[1],this.hi=t,this.lo=e)},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return 0<this.hi?1:this.hi<0?-1:0<this.lo?1:this.lo<0?-1:0},interfaces_:function(){return[o,i,r]},getClass:function(){return _}}),_.sqr=function(t){return _.valueOf(t).selfMultiply(t)},_.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return _.parse(t)}if("number"==typeof arguments[0])return new _(arguments[0])},_.sqrt=function(t){return _.valueOf(t).sqrt()},_.parse=function(t){for(var e=0,n=t.length;O.isWhitespace(t.charAt(e));)e++;var i=!1;e<n&&("-"!==(g=t.charAt(e))&&"+"!==g||(e++,"-"===g&&(i=!0)));for(var r=new _,s=0,o=0,a=0;!(n<=e);){var u=t.charAt(e);if(e++,O.isDigit(u)){var l=u-"0";r.selfMultiply(_.TEN),r.selfAdd(l),s++}else{if("."!==u){if("e"!==u&&"E"!==u)throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t);var h=t.substring(e);try{a=b.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}o=s}}var c,f=r,g=s-o-a;return 0==g?f=r:0<g?(c=_.TEN.pow(g),f=r.divide(c)):g<0&&(c=_.TEN.pow(-g),f=r.multiply(c)),i?f.negate():f},_.createNaN=function(){return new _(g.NaN,g.NaN)},_.copy=function(t){return new _(t)},_.magnitude=function(t){var e=Math.abs(t),t=Math.log(e)/Math.log(10),t=Math.trunc(Math.floor(t));return 10*Math.pow(10,t)<=e&&(t+=1),t},_.stringOfChar=function(t,e){for(var n=new P,i=0;i<e;i++)n.append(t);return n.toString()},_.PI=new _(3.141592653589793,12246467991473532e-32),_.TWO_PI=new _(6.283185307179586,24492935982947064e-32),_.PI_2=new _(1.5707963267948966,6123233995736766e-32),_.E=new _(2.718281828459045,14456468917292502e-32),_.NaN=new _(g.NaN,g.NaN),_.EPS=123259516440783e-46,_.SPLIT=134217729,_.MAX_PRINT_DIGITS=32,_.TEN=_.valueOf(10),_.ONE=_.valueOf(1),_.SCI_NOT_EXPONENT_CHAR="E",_.SCI_NOT_ZERO="0.0E0",e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),M.orientationIndex=function(t,e,n){var i=M.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=_.valueOf(e.x).selfAdd(-t.x),i=_.valueOf(e.y).selfAdd(-t.y),t=_.valueOf(n.x).selfAdd(-e.x),e=_.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(e).selfSubtract(i.selfMultiply(t)).signum()},M.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},M.intersection=function(t,e,n,i){var r=_.valueOf(i.y).selfSubtract(n.y).selfMultiply(_.valueOf(e.x).selfSubtract(t.x)),s=_.valueOf(i.x).selfSubtract(n.x).selfMultiply(_.valueOf(e.y).selfSubtract(t.y)),o=r.subtract(s),r=_.valueOf(i.x).selfSubtract(n.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),s=_.valueOf(i.y).selfSubtract(n.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),r=r.subtract(s).selfDivide(o).doubleValue(),s=_.valueOf(t.x).selfAdd(_.valueOf(e.x).selfSubtract(t.x).selfMultiply(r)).doubleValue(),r=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),t=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),o=r.subtract(t).selfDivide(o).doubleValue();return new d(s,_.valueOf(n.y).selfAdd(_.valueOf(i.y).selfSubtract(n.y).selfMultiply(o)).doubleValue())},M.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),e=(t.y-n.y)*(e.x-n.x),n=r-e;if(0<r){if(e<=0)return M.signum(n);i=r+e}else{if(!(r<0))return M.signum(n);if(0<=e)return M.signum(n);i=-r-e}i*=M.DP_SAFE_EPSILON;return i<=n||i<=-n?M.signum(n):2},M.signum=function(t){return 0<t?1:t<0?-1:0},M.DP_SAFE_EPSILON=1e-15,e(D.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[r]},getClass:function(){return D}}),D.X=0,D.Y=1,D.Z=2,D.M=3,A.arraycopy=function(t,e,n,i,r){for(var s=0,o=e;o<e+r;o++)n[i+s]=t[o],s++},A.getProperty=function(t){return{"line.separator":"\n"}[t]},e(F.prototype,{getY:function(){var t=this.y/this.w;if(g.isNaN(t)||g.isInfinite(t))throw new w;return t},getX:function(){var t=this.x/this.w;if(g.isNaN(t)||g.isInfinite(t))throw new w;return t},getCoordinate:function(){var t=new d;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return F}}),F.intersection=function(t,e,n,i){var r=t.y-e.y,s=e.x-t.x,o=t.x*e.y-e.x*t.y,e=n.y-i.y,t=i.x-n.x,i=n.x*i.y-i.x*n.y,n=r*t-e*s,t=(s*i-t*o)/n,n=(e*o-r*i)/n;if(g.isNaN(t)||g.isInfinite(t)||g.isNaN(n)||g.isInfinite(n))throw new w;return new d(t,n)},e(G.prototype,{create:function(){1===arguments.length&&(arguments[0]instanceof Array||R(arguments[0],D))},interfaces_:function(){return[]},getClass:function(){return G}}),e(q.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return q}}),e(B.prototype,{isGeometryCollection:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){t=arguments[0];if(!(t instanceof B))return!1;return this.equalsExact(t)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(B.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],t=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,t)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION)throw new c},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new C(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),s=r.compareTo(s);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===B.SORTINDEX_MULTIPOINT||this.getSortIndex()===B.SORTINDEX_MULTILINESTRING||this.getSortIndex()===B.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[r,i,o]},getClass:function(){return B}}),B.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},B.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},B.serialVersionUID=0x799ea46522854c00,B.SORTINDEX_POINT=0,B.SORTINDEX_MULTIPOINT=1,B.SORTINDEX_LINESTRING=2,B.SORTINDEX_LINEARRING=3,B.SORTINDEX_MULTILINESTRING=4,B.SORTINDEX_POLYGON=5,B.SORTINDEX_MULTIPOLYGON=6,B.SORTINDEX_GEOMETRYCOLLECTION=7,B.geometryChangedFilter={interfaces_:function(){return[q]},filter:function(t){t.geometryChangedAction()}},e(z.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return z}}),e(V.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return V}}),e(k.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[V]},getClass:function(){return k}}),e(Y.prototype,{isInBoundary:function(t){return 0<t},interfaces_:function(){return[V]},getClass:function(){return Y}}),e(U.prototype,{isInBoundary:function(t){return 1<t},interfaces_:function(){return[V]},getClass:function(){return U}}),e(X.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[V]},getClass:function(){return X}}),V.Mod2BoundaryNodeRule=k,V.EndPointBoundaryNodeRule=Y,V.MultiValentEndPointBoundaryNodeRule=U,V.MonoValentEndPointBoundaryNodeRule=X,V.MOD2_BOUNDARY_RULE=new k,V.ENDPOINT_BOUNDARY_RULE=new Y,V.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new U,V.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new X,V.OGC_SFS_BOUNDARY_RULE=V.MOD2_BOUNDARY_RULE,e(H.prototype,{interfaces_:function(){return[]},getClass:function(){return H}}),H.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},H.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(H.indexOf(i,e)<0)return i}return null},H.scroll=function(t,e){var n=H.indexOf(e,t);if(n<0)return null;e=new Array(t.length).fill(null);A.arraycopy(t,n,e,0,t.length-n),A.arraycopy(t,0,e,t.length-n,n),A.arraycopy(e,0,t,0,t.length)},H.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(n=0;n<i.length;n++)if(0!==s.compare(i[n],r[n]))return!1;return!0}},H.intersection=function(t,e){for(var n=new N,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},H.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},H.removeRepeatedPoints=function(t){return H.hasRepeatedPoints(t)?new N(t,!1).toCoordinateArray():t},H.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},H.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},H.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new d(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],n=0;n<a;n++)s[o+n]=new d(i[r+n])},H.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},H.envelope=function(t){for(var e=new C,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},H.toCoordinateArray=function(t){return t.toArray(H.coordArrayType)},H.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},H.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},H.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,n=t[e].compareTo(t[n]);if(0!==n)return n}return 1},H.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},H.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},H.extract=function(t,e,n){e=T.clamp(e,0,t.length);var i=(n=T.clamp(n,-1,t.length))<0?0:n-e+1;e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,o=e;o<=n;o++)r[s++]=t[o];return r},e(W.prototype,{compare:function(t,e){return H.compare(t,e)},interfaces_:function(){return[s]},getClass:function(){return W}}),e(j.prototype,{compare:function(t,e){var n=t,t=e;if(n.length<t.length)return-1;if(n.length>t.length)return 1;if(0===n.length)return 0;e=H.compare(n,t);return H.isEqualReversed(n,t)?0:e},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=H.increasingDirection(n),s=H.increasingDirection(i),o=0<r?0:n.length-1,a=0<s?0:n.length-1,u=0;u<n.length;u++){var l=n[o].compareTo(i[a]);if(0!==l)return l;o+=r,a+=s}return 0},interfaces_:function(){return[s]},getClass:function(){return j}}),H.ForwardComparator=W,H.BidirectionalComparator=j,H.coordArrayType=new Array(0).fill(null),K.prototype.get=function(){},K.prototype.put=function(){},K.prototype.size=function(){},K.prototype.values=function(){},K.prototype.entrySet=function(){},Z.prototype=new K,(J.prototype=new m).contains=function(){},(Q.prototype=new J).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},Q.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Q.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Q.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Q.prototype.size=function(){return this.array_.length},Q.prototype.isEmpty=function(){return 0===this.array_.length},Q.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Q.prototype.iterator=function(){return new Fs(this)};var Fs=function(t){this.hashSet_=t,this.position_=0};Fs.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new x;return this.hashSet_.array_[this.position_++]},Fs.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Fs.prototype.remove=function(){throw new E};var Gs=0;(rt.prototype=new Z).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Gs,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(0<i)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var o={key:t,left:null,right:null,value:e,parent:n,color:Gs,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var e;tt(t)==nt(tt(tt(t)))?1==$(e=it(tt(tt(t))))?(et(tt(t),Gs),et(e,Gs),et(tt(tt(t)),1),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),Gs),et(tt(tt(t)),1),this.rotateRight(tt(tt(t)))):1==$(e=nt(tt(tt(t))))?(et(tt(t),Gs),et(e,Gs),et(tt(tt(t)),1),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),Gs),et(tt(tt(t)),1),this.rotateLeft(tt(tt(t))))}this.root_.color=Gs},rt.prototype.values=function(){var t=new I,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){var e;null!=t&&(e=t.right,t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e)},rt.prototype.rotateRight=function(t){var e;null!=t&&(e=t.left,t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e)},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)e=(n=e).parent;return e},rt.prototype.size=function(){return this.size_},e(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}}),ot.prototype=new J,(at.prototype=new ot).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},at.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},at.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},at.prototype.remove=function(t){throw new E},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},at.prototype.iterator=function(){return new qs(this)};var qs=function(t){this.treeSet_=t,this.position_=0};qs.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new x;return this.treeSet_.array_[this.position_++]},qs.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},qs.prototype.remove=function(){throw new E},ut.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3!==arguments.length){if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t])}else{(e=r.slice(arguments[1],arguments[2])).sort();var s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t])}},ut.asList=function(t){for(var e=new I,n=0,i=t.length;n<i;n++)e.add(t[n]);return e},e(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.toDimensionSymbol=function(t){switch(t){case lt.FALSE:return lt.SYM_FALSE;case lt.TRUE:return lt.SYM_TRUE;case lt.DONTCARE:return lt.SYM_DONTCARE;case lt.P:return lt.SYM_P;case lt.L:return lt.SYM_L;case lt.A:return lt.SYM_A}throw new c},lt.toDimensionValue=function(t){switch(O.toUpperCase(t)){case lt.SYM_FALSE:return lt.FALSE;case lt.SYM_TRUE:return lt.TRUE;case lt.SYM_DONTCARE:return lt.DONTCARE;case lt.SYM_P:return lt.P;case lt.SYM_L:return lt.L;case lt.SYM_A:return lt.A}throw new c},lt.P=0,lt.L=1,lt.A=2,lt.FALSE=-1,lt.TRUE=-2,lt.DONTCARE=-3,lt.SYM_FALSE="F",lt.SYM_TRUE="T",lt.SYM_DONTCARE="*",lt.SYM_P="0",lt.SYM_L="1",lt.SYM_A="2",e(ht.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ht}}),e(ct.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ct}}),a(ft,B),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new C,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return B.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2!==arguments.length)return B.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ut.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new at(ut.asList(this.geometries)),t=new at(ut.asList(t.geometries));return this.compare(e,t)}if(2===arguments.length){for(var n=arguments[1],i=arguments[0],r=this.getNumGeometries(),s=i.getNumGeometries(),o=0;o<r&&o<s;){var a=this.getGeometryN(o),u=i.getGeometryN(o),u=a.compareToSameClass(u,n);if(0!==u)return u;o++}return o<r?1:o<s?-1:0}},apply:function(){if(R(arguments[0],z))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(R(arguments[0],ct)){var n=arguments[0];if(0===this.geometries.length)return null;for(e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],ht)){var i=arguments[0];i.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(R(arguments[0],q)){var r=arguments[0];r.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),l.shouldNeverReachHere(),null},clone:function(){var t=B.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,a(gt,ft),e(gt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2!==arguments.length)return ft.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new dt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new gt(t,this.factory)},interfaces_:function(){return[st]},getClass:function(){return gt}}),gt.serialVersionUID=0x7155d2ab4afa8000,e(dt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();t=this.computeBoundaryCoordinates(t);return 1===t.length?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPointFromCoords(t)},getBoundary:function(){return this.geom instanceof Ct?this.boundaryLineString(this.geom):this.geom instanceof gt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){return this.geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint():this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new I;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var s=r.next(),o=s.getValue().count;this.bnRule.isInBoundary(o)&&e.add(s.getKey())}return H.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new pt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.getBoundary=function(){return 1===arguments.length?new dt(arguments[0]).getBoundary():2===arguments.length?new dt(arguments[0],arguments[1]).getBoundary():void 0},e(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}}),e(It.prototype,{interfaces_:function(){return[]},getClass:function(){return It}}),It.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)},It.getStackTrace=function(){if(1===arguments.length){var t=new vt,e=new mt;return arguments[0].printStackTrace(e),t.toString()}if(2===arguments.length){for(var n=arguments[1],i="",r=new Et(It.getStackTrace(arguments[0])),s=0;s<n;s++)try{i+=r.readLine()+It.NEWLINE}catch(t){if(!(t instanceof xt))throw t;l.shouldNeverReachHere()}return i}},It.split=function(t,e){for(var n=e.length,i=new I,r=""+t,s=r.indexOf(e);0<=s;){var o=r.substring(0,s);i.add(o),s=(r=r.substring(s+n)).indexOf(e)}0<r.length&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},It.toString=function(){if(1===arguments.length){var t=arguments[0];return It.SIMPLE_ORDINATE_FORMAT.format(t)}},It.spaces=function(t){return It.chars(" ",t)},It.NEWLINE=A.getProperty("line.separator"),It.SIMPLE_ORDINATE_FORMAT=new function(){},e(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))},Nt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,D.X)===t.getOrdinate(e-1,D.X)&&t.getOrdinate(0,D.Y)===t.getOrdinate(e-1,D.Y))},Nt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var s=0;s<i;s++){var o=t.getOrdinate(r,s),a=e.getOrdinate(r,s);if(!(t.getOrdinate(r,s)===e.getOrdinate(r,s)||g.isNaN(o)&&g.isNaN(a)))return!1}return!0},Nt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Nt.copy(e,0,i,0,r),0<r)for(var s=r;s<n;s++)Nt.copy(e,r-1,i,s,1);return i},Nt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Nt.swap(t,i,e-i)},Nt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Nt.copy=function(t,e,n,i,r){for(var s=0;s<r;s++)Nt.copyCoord(t,e+s,n,i+s)},Nt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new P;i.append("(");for(var r=0;r<e;r++){0<r&&i.append(" ");for(var s=0;s<n;s++)0<s&&i.append(","),i.append(It.toString(t.getOrdinate(r,s)))}return i.append(")"),i.toString()}},Nt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Nt.createClosedRing(t,e,4):e.getOrdinate(0,D.X)===e.getOrdinate(n-1,D.X)&&e.getOrdinate(0,D.Y)===e.getOrdinate(n-1,D.Y)?e:Nt.createClosedRing(t,e,n+1)},Nt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),t=e.size();Nt.copy(e,0,i,0,t);for(var r=t;r<n;r++)Nt.copy(e,0,i,r,1);return i},a(Ct,B),e(Ct.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new C:this.points.expandEnvelope(new C)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return B.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2!==arguments.length)return B.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return 0<this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))&&Nt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Zt.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();return Nt.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this.points.size()&&n<t.points.size();){var i=this.points.getCoordinate(e).compareTo(t.points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this.points.size()?1:n<t.points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.points,t.points)}},apply:function(){if(R(arguments[0],z))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(R(arguments[0],ct)){var n=arguments[0];if(0===this.points.size())return null;for(e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else{(R(arguments[0],ht)||R(arguments[0],q))&&arguments[0].filter(this)}},getBoundary:function(){return new dt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof Ct},clone:function(){var t=B.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new Ct(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new c(t.size());this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[st]},getClass:function(){return Ct}}),Ct.serialVersionUID=0x2b2b51ba435c8e00,e(St.prototype,{interfaces_:function(){return[]},getClass:function(){return St}}),a(wt,B),e(wt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new C;var t=new C;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return B.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2!==arguments.length)return B.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.coordinates,t.coordinates)}},apply:function(){if(R(arguments[0],z)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(R(arguments[0],ct)){t=arguments[0];if(this.isEmpty())return null;t.filter(this.coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else{(R(arguments[0],ht)||R(arguments[0],q))&&arguments[0].filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=B.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new wt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),l.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[St]},getClass:function(){return wt}}),wt.serialVersionUID=0x44077bad161cbc00,e(Lt.prototype,{interfaces_:function(){return[]},getClass:function(){return Lt}}),a(Rt,B),e(Rt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return B.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this.holes.length;r++)for(var s=this.holes[r].getCoordinates(),o=0;o<s.length;o++)t[++e]=s[o];return t},getArea:function(){var t=0;t+=Math.abs(Zt.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(Zt.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){if((i=t.getX(n))!==e.getMinX()&&i!==e.getMaxX())return!1;if((r=t.getY(n))!==e.getMinY()&&r!==e.getMaxY())return!1}for(var i,r,s=t.getX(0),o=t.getY(0),n=1;n<=4;n++){if((i=t.getX(n))!==s==((r=t.getY(n))!==o))return!1;s=i,o=r}return!0},equalsExact:function(){if(2!==arguments.length)return B.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,t=n.shell;if(!i.equalsExact(t,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var r=0;r<this.holes.length;r++)if(!this.holes[r].equalsExact(n.holes[r],e))return!1;return!0},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ut.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);A.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=H.minCoordinate(e.getCoordinates());H.scroll(i,r),A.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],Zt.isCCW(e.getCoordinates())===n&&H.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,t=t.shell;return e.compareToSameClass(t)}if(2===arguments.length){var n=arguments[1],i=arguments[0],e=this.shell,t=i.shell,t=e.compareToSameClass(t,n);if(0!==t)return t;for(var r=this.getNumInteriorRing(),s=i.getNumInteriorRing(),o=0;o<r&&o<s;){var a=this.getInteriorRingN(o),u=i.getInteriorRingN(o),u=a.compareToSameClass(u,n);if(0!==u)return u;o++}return o<r?1:o<s?-1:0}},apply:function(){if(R(arguments[0],z)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(R(arguments[0],ct)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],ht)){arguments[0].filter(this)}else if(R(arguments[0],q)){var i=arguments[0];i.filter(this),this.shell.apply(i);for(e=0;e<this.holes.length;e++)this.holes[e].apply(i)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=B.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Rt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Lt]},getClass:function(){return Rt}}),Rt.serialVersionUID=-0x307ffefd8dc97200,a(Tt,ft),e(Tt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2!==arguments.length)return ft.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)},getCoordinate:function(){if(1!==arguments.length)return ft.prototype.getCoordinate.apply(this,arguments);var t=arguments[0];return this.geometries[t].getCoordinate()},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Tt(t,this.factory)},interfaces_:function(){return[St]},getClass:function(){return Tt}}),Tt.serialVersionUID=-0x6fb1ed4162e0fc00,a(Pt,Ct),e(Pt.prototype,{getSortIndex:function(){return B.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return lt.FALSE},isClosed:function(){return!!this.isEmpty()||Ct.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();return Nt.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!Ct.prototype.isClosed.call(this))throw new c;if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<Pt.MINIMUM_VALID_SIZE)throw new c(this.getCoordinateSequence().size())},getGeometryType:function(){return"LinearRing"},copy:function(){return new Pt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.MINIMUM_VALID_SIZE=4,Pt.serialVersionUID=-0x3b229e262367a600,a(bt,ft),e(bt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2!==arguments.length)return ft.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new I,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new bt(t,this.factory)},interfaces_:function(){return[Lt]},getClass:function(){return bt}}),bt.serialVersionUID=-0x7a5aa1369171980,e(Ot.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;e=this.editInternal(t,e);return this.isUserDataCopied&&e.setUserData(t.getUserData()),e},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof Rt?this.editPolygon(t,e):t instanceof wt||t instanceof Ct?e.edit(t,this.factory):(l.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new I,r=0;r<n.getNumGeometries();r++){var s=this.edit(n.getGeometryN(r),e);null===s||s.isEmpty()||i.add(s)}return n.getClass()===Tt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===gt?this.factory.createMultiLineString(i.toArray([])):n.getClass()===bt?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;t=this.edit(n.getExteriorRing(),e);if(null===t||t.isEmpty())return this.factory.createPolygon();for(var i=new I,r=0;r<n.getNumInteriorRing();r++){var s=this.edit(n.getInteriorRingN(r),e);null===s||s.isEmpty()||i.add(s)}return this.factory.createPolygon(t,i.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.GeometryEditorOperation=_t,e(Mt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[_t]},getClass:function(){return Mt}}),e(Dt.prototype,{edit:function(t,e){if(t instanceof Pt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Ct)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof wt){var n=this.editCoordinates(t.getCoordinates(),t);return 0<n.length?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[_t]},getClass:function(){return Dt}}),e(At.prototype,{edit:function(t,e){return t instanceof Pt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ct?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof wt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[_t]},getClass:function(){return At}}),Ot.NoOpGeometryOperation=Mt,Ot.CoordinateOperation=Dt,Ot.CoordinateSequenceOperation=At,e(Ft.prototype,{setOrdinate:function(t,e,n){switch(e){case D.X:this.coordinates[t].x=n;break;case D.Y:this.coordinates[t].y=n;break;case D.Z:this.coordinates[t].z=n;break;default:throw new c}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case D.X:return this.coordinates[t].x;case D.Y:return this.coordinates[t].y;case D.Z:return this.coordinates[t].z}return g.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}var e;2===arguments.length&&(e=arguments[0],(t=arguments[1]).x=this.coordinates[e].x,t.y=this.coordinates[e].y,t.z=this.coordinates[e].z)},getCoordinateCopy:function(t){return new d(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Ft(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Ft(t,this.dimension)},toString:function(){if(0<this.coordinates.length){var t=new P(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[D,o]},getClass:function(){return Ft}}),Ft.serialVersionUID=-0xcb44a778db18e00,e(Gt.prototype,{readResolve:function(){return Gt.instance()},create:function(){if(1===arguments.length)return arguments[0]instanceof Array||R(arguments[0],D)?new Ft(arguments[0]):void 0;if(2===arguments.length){var t=arguments[0],e=arguments[1];return 3<e&&(e=3),e<2?new Ft(t):new Ft(t,e)}},interfaces_:function(){return[G,o]},getClass:function(){return Gt}}),Gt.instance=function(){return Gt.instanceObject},Gt.serialVersionUID=-0x38e49fa6cf6f2e00,Gt.instanceObject=new Gt;var Bs,zs,Vs,ks=Object.defineProperty,Ys=(zs={delete:function(t){return this.has(t)&&(this._keys.splice(Bs,1),this._values.splice(Bs,1),this._itp.forEach(function(t){Bs<t[0]&&t[0]--})),-1<Bs},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(Bs=t.length;Bs--&&((n=t[Bs])!==(i=e)&&(n==n||i==i)););else Bs=t.indexOf(e);var n,i;return-1<Bs}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[Bs]:void 0},set:function(t,e){return this.has(t)?this._values[Bs]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return qt(this._itp,this._keys)},values:function(){return qt(this._itp,this._values)},entries:function(){return qt(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}},Vs||ks(zs,"size",{get:Bt}),(zs.constructor=Xs).prototype=zs,Xs),Us="undefined"!=typeof Map&&Map.prototype.values?Map:Ys;function Xs(t){return this&&this.constructor===Xs?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=Vs,void(t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t))):new Xs(t)}(zt.prototype=new K).get=function(t){return this.map_.get(t)||null},zt.prototype.put=function(t,e){return this.map_.set(t,e),e},zt.prototype.values=function(){for(var t=new I,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},zt.prototype.entrySet=function(){var e=new Q;return this.map_.entries().forEach(function(t){return e.add(t)}),e},zt.prototype.size=function(){return this.map_.size()},e(Vt.prototype,{equals:function(t){if(!(t instanceof Vt))return!1;return this.modelType===t.modelType&&this.scale===t.scale},compareTo:function(t){var e=t,t=this.getMaximumSignificantDigits(),e=e.getMaximumSignificantDigits();return new b(t).compareTo(new b(e))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Vt.FLOATING||this.modelType===Vt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Vt.FLOATING?t="Floating":this.modelType===Vt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Vt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];return g.isNaN(t)?t:this.modelType!==Vt.FLOATING_SINGLE&&this.modelType===Vt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof d){t=arguments[0];if(this.modelType===Vt.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Vt.FLOATING?t=16:this.modelType===Vt.FLOATING_SINGLE?t=6:this.modelType===Vt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[o,i]},getClass:function(){return Vt}}),Vt.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},e(kt.prototype,{readResolve:function(){return kt.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[o]},getClass:function(){return kt}}),kt.serialVersionUID=-552860263173159e4,kt.nameToTypeMap=new zt,Vt.Type=kt,Vt.serialVersionUID=0x6bee6404e9a25c00,Vt.FIXED=new kt("FIXED"),Vt.FLOATING=new kt("FLOATING"),Vt.FLOATING_SINGLE=new kt("FLOATING SINGLE"),Vt.maximumPreciseValue=9007199254740992,e(Yt.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new d(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new d(t.getMinX(),t.getMinY()),new d(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new d(t.getMinX(),t.getMinY()),new d(t.getMinX(),t.getMaxY()),new d(t.getMaxX(),t.getMaxY()),new d(t.getMaxX(),t.getMinY()),new d(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],D))return new Ct(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new gt(null,this):1===arguments.length?new gt(arguments[0],this):void 0},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var s=r.next(),o=s.getClass();null===e&&(e=o),o!==e&&(n=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Yt.toGeometryArray(t));var a=t.iterator().next();if(1<t.size()){if(a instanceof Rt)return this.createMultiPolygon(Yt.toPolygonArray(t));if(a instanceof Ct)return this.createMultiLineString(Yt.toLineStringArray(t));if(a instanceof wt)return this.createMultiPoint(Yt.toPointArray(t));l.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof d){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(R(arguments[0],D))return new wt(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new Rt(null,null,this);if(1===arguments.length){if(R(arguments[0],D)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Pt){e=arguments[0];return this.createPolygon(e,null)}}else if(2===arguments.length){return new Rt(arguments[0],arguments[1],this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){return 0===arguments.length?new ft(null,this):1===arguments.length?new ft(arguments[0],this):void 0},createGeometry:function(t){return new Ot(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],D))return new Pt(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new bt(null,this):1===arguments.length?new bt(arguments[0],this):void 0},createMultiPoint:function(){if(0===arguments.length)return new Tt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Tt(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],D)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());Nt.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},interfaces_:function(){return[o]},getClass:function(){return Yt}}),Yt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.getDefaultCoordinateSequenceFactory=function(){return Gt.instance()},Yt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Yt.serialVersionUID=-0x5ea75f2051eeb400;var Hs={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(Ut.prototype,{read:function(t){var e,n;t=t.replace(/[\n\r]/g," ");var i=Hs.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Hs.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),i=i[2],js[n]&&(e=js[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!Ws[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ws[e].apply(this,[t])+")"}});var Ws={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ws.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+Ws.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(Ws.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(Ws.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+Ws.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ws.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;n<i;++n)e.push("("+Ws.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+Ws.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},js={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();t=t.trim().split(Hs.spaces);return this.geometryFactory.createPoint(new d(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(Hs.trimParens,"$1"),i.push(js.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].trim().split(Hs.spaces),i.push(new d(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].trim().split(Hs.spaces),i.push(new d(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Hs.parenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(Hs.trimParens,"$1"),i.push(js.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i=t.trim().split(Hs.parenComma),r=[],s=0,o=i.length;s<o;++s)e=i[s].replace(Hs.trimParens,"$1"),e=js.linestring.apply(this,[e]),e=this.geometryFactory.createLinearRing(e.points),0===s?n=e:r.push(e);return this.geometryFactory.createPolygon(n,r)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Hs.doubleParenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(Hs.trimParens,"$1"),i.push(js.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(Xt.prototype,{write:function(t){return this.parser.write(t)}}),e(Xt,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(Ht.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new P;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){var t,e;0===arguments.length?null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1)):1===arguments.length&&(t=arguments[0],e=this.getEdgeDistance(t,0),this.getEdgeDistance(t,1)<e?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0))},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Ht.NO_INTERSECTION},getEdgeDistance:function(t,e){return Ht.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},isCollinear:function(){return this.result===Ht.COLLINEAR_INTERSECTION},toString:function(){return Xt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Xt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.computeEdgeDistance=function(t,e,n){var i,r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),o=-1;return t.equals(e)?o=0:t.equals(n)?o=s<r?r:s:(i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),0!==(o=s<r?i:n)||t.equals(e)||(o=Math.max(i,n))),l.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Ht.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,r=Math.sqrt(i*i+r*r);return l.isTrue(!(0===r&&!t.equals(e)),"Invalid distance calculation"),r},Ht.DONT_INTERSECT=0,Ht.DO_INTERSECT=1,Ht.COLLINEAR=2,Ht.NO_INTERSECTION=0,Ht.POINT_INTERSECTION=1,Ht.COLLINEAR_INTERSECTION=2,a(Wt,Ht),e(Wt.prototype,{isInSegmentEnvelopes:function(t){var e=new C(this.inputLines[0][0],this.inputLines[0][1]),n=new C(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return Ht.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,C.intersects(e,n,t)&&0===Zt.orientationIndex(e,n,t)&&0===Zt.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=Ht.POINT_INTERSECTION,null):void(this.result=Ht.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(e,n,i,r){var s=null;try{s=F.intersection(e,n,i,r)}catch(t){if(!(t instanceof w))throw t;s=Wt.nearestEndpoint(e,n,i,r)}return s},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new d(Wt.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,t=Math.abs(r);return Math.abs(e)<t&&(r=e,t=Math.abs(e)),Math.abs(n)<t&&(r=n,t=Math.abs(n)),Math.abs(i)<t&&(r=i),r},checkDD:function(t,e,n,i,r){n=M.intersection(t,e,n,i),i=this.isInSegmentEnvelopes(n);A.out.println("DD in env = "+i+"  --------------------- "+n),1e-4<r.distance(n)&&A.out.println("Distance = "+r.distance(n))},intersectionWithNormalization:function(t,e,n,i){var r=new d(t),t=new d(e),e=new d(n),n=new d(i),i=new d;this.normalizeToEnvCentre(r,t,e,n,i);n=this.safeHCoordinateIntersection(r,t,e,n);return n.x+=i.x,n.y+=i.y,n},computeCollinearIntersection:function(t,e,n,i){var r=C.intersects(t,e,n),s=C.intersects(t,e,i),o=C.intersects(n,i,t),a=C.intersects(n,i,e);return r&&s?(this.intPt[0]=n,this.intPt[1]=i,Ht.COLLINEAR_INTERSECTION):o&&a?(this.intPt[0]=t,this.intPt[1]=e,Ht.COLLINEAR_INTERSECTION):r&&o?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||s||a?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||s||o?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):s&&o?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):s&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||o?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):Ht.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var s=(t.x<e.x?t:e).x,o=(t.y<e.y?t:e).y,a=(t.x>e.x?t:e).x,u=(t.y>e.y?t:e).y,l=(n.x<i.x?n:i).x,h=(n.y<i.y?n:i).y,c=(n.x>i.x?n:i).x,f=(n.y>i.y?n:i).y,c=((l<s?s:l)+(a<c?a:c))/2,f=((h<o?o:h)+(u<f?u:f))/2;r.x=c,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!C.intersects(t,e,n,i))return Ht.NO_INTERSECTION;var r=Zt.orientationIndex(t,e,n),s=Zt.orientationIndex(t,e,i);if(0<r&&0<s||r<0&&s<0)return Ht.NO_INTERSECTION;var o=Zt.orientationIndex(n,i,t),a=Zt.orientationIndex(n,i,e);return 0<o&&0<a||o<0&&a<0?Ht.NO_INTERSECTION:0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new d(n):0===s?this.intPt[0]=new d(i):0===o?this.intPt[0]=new d(t):0===a&&(this.intPt[0]=new d(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),Ht.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Wt}}),Wt.nearestEndpoint=function(t,e,n,i){var r=t,s=Zt.distancePointLine(t,n,i),o=Zt.distancePointLine(e,n,i);return o<s&&(s=o,r=e),(o=Zt.distancePointLine(n,t,e))<s&&(s=o,r=n),(o=Zt.distancePointLine(i,t,e))<s&&(s=o,r=i),r},e(jt.prototype,{interfaces_:function(){return[]},getClass:function(){return jt}}),jt.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,t=n.x-e.x,e=n.y-e.y;return jt.signOfDet2x2(i,r,t,e)},jt.signOfDet2x2=function(t,e,n,i){var r,s=null,o=null,s=1;if(0===t||0===i)return 0===e||0===n?0:0<e?0<n?-s:s:0<n?s:-s;if(0===e||0===n)return 0<i?0<t?s:-s:0<t?-s:s;if(0<e?0<i?e<=i||(s=-s,o=t,t=n,n=o,o=e,e=i,i=o):i=e<=-i?(s=-s,n=-n,-i):(o=t,t=-n,n=o,o=e,e=-i,o):0<i?-e<=i?(s=-s,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):i=i<=e?(t=-t,e=-e,n=-n,-i):(s=-s,o=-t,t=-n,n=o,o=-e,e=-i,o),0<t){if(!(0<n))return s;if(!(t<=n))return s}else{if(0<n)return-s;if(!(n<=t))return-s;s=-s,t=-t,n=-n}for(;;){if((i-=(r=Math.floor(n/t))*e)<0)return-s;if(e<i)return s;if((n-=r*t)+n<t){if(e<i+i)return s}else{if(i+i<e)return-s;n=t-n,i=e-i,s=-s}if(0===i)return 0===n?0:-s;if(0===n)return s;if((e-=(r=Math.floor(t/n))*i)<0)return s;if(i<e)return-s;if((t-=r*n)+t<n){if(i<e+e)return-s}else{if(e+e<i)return s;t=n-t,e=i-e,s=-s}if(0===e)return 0===t?0:s;if(0===t)return-s}},e(Kt.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return i<n&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){n=t.x-this.p.x,i=t.y-this.p.y,t=e.x-this.p.x,e=e.y-this.p.y,t=jt.signOfDet2x2(n,i,t,e);if(0===t)return this.isPointOnSegment=!0,null;e<i&&(t=-t),0<t&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==L.EXTERIOR},getLocation:function(){return this.isPointOnSegment?L.BOUNDARY:this.crossingCount%2==1?L.INTERIOR:L.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Kt}}),Kt.locatePointInRing=function(){if(arguments[0]instanceof d&&R(arguments[1],D)){for(var t=arguments[1],e=new Kt(arguments[0]),n=new d,i=new d,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof d&&arguments[1]instanceof Array){for(var s=arguments[1],e=new Kt(arguments[0]),r=1;r<s.length;r++){n=s[r],i=s[r-1];if(e.countSegment(n,i),e.isOnSegment())return e.getLocation()}return e.getLocation()}},e(Zt.prototype,{interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.orientationIndex=function(t,e,n){return M.orientationIndex(t,e,n)},Zt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(R(arguments[0],D)){var o=arguments[0],a=o.size();if(a<3)return 0;var u=new d,l=new d,h=new d;o.getCoordinate(0,l),o.getCoordinate(1,h);n=l.x;h.x-=n;for(e=0,i=1;i<a-1;i++)u.y=l.y,l.x=h.x,l.y=h.y,o.getCoordinate(i+1,h),h.x-=n,e+=l.x*(u.y-h.y);return e/2}},Zt.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Zt.distancePointLine(t,n,i);if(n.equals(i))return Zt.distancePointLine(i,t,e);var r,s,o,a=!1;return!C.intersects(t,e,n,i)||0==(o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x))?a=!0:(r=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,((o=r/o)<0||1<o||s<0||1<s)&&(a=!0)),a?T.min(Zt.distancePointLine(t,n,i),Zt.distancePointLine(e,n,i),Zt.distancePointLine(n,t,e),Zt.distancePointLine(i,t,e)):0},Zt.isPointInRing=function(t,e){return Zt.locatePointInRing(t,e)!==L.EXTERIOR},Zt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new d;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;o<e;o++){t.getCoordinate(o,i);var a=i.x,u=i.y,l=a-r,h=u-s;n+=Math.sqrt(l*l+h*h),r=a,s=u}return n},Zt.isCCW=function(t){var e=t.length-1;if(e<3)throw new c;for(var n=t[0],i=0,r=1;r<=e;r++){var s=t[r];s.y>n.y&&(n=s,i=r)}for(var o=i;--o<0&&(o=e),t[o].equals2D(n)&&o!==i;);for(var a=i;t[a=(a+1)%e].equals2D(n)&&a!==i;);var u=t[o],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var h=Zt.computeOrientation(u,n,l);return 0===h?u.x>l.x:0<h},Zt.locatePointInRing=function(t,e){return Kt.locatePointInRing(t,e)},Zt.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),e=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(e)*Math.sqrt(i)},Zt.computeOrientation=function(t,e,n){return Zt.orientationIndex(t,e,n)},Zt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new c;for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Zt.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2];if(o.x===a.x&&o.y===a.y)return s.distance(o);var u=(a.x-o.x)*(a.x-o.x)+(a.y-o.y)*(a.y-o.y),l=((s.x-o.x)*(a.x-o.x)+(s.y-o.y)*(a.y-o.y))/u;if(l<=0)return s.distance(o);if(1<=l)return s.distance(a);o=((o.y-s.y)*(a.x-o.x)-(o.x-s.x)*(a.y-o.y))/u;return Math.abs(o)*Math.sqrt(u)}},Zt.isOnLine=function(t,e){for(var n=new Wt,i=1;i<e.length;i++){var r=e[i-1],s=e[i];if(n.computeIntersection(t,r,s),n.hasIntersection())return!0}return!1},Zt.RIGHT=Zt.CLOCKWISE=-1,Zt.LEFT=Zt.COUNTERCLOCKWISE=1,Zt.STRAIGHT=Zt.COLLINEAR=0,e(Jt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Jt){var t=arguments[0],e=Zt.orientationIndex(this.p0,this.p1,t.p0),t=Zt.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=t||e<=0&&t<=0?Math.max(e,t):0}if(arguments[0]instanceof d){t=arguments[0];return Zt.orientationIndex(this.p0,this.p1,t)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof Jt))return!1;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},intersection:function(t){var e=new Wt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof d){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new d(t);var e=this.projectionFactor(t),n=new d;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Jt){var i=arguments[0],t=this.projectionFactor(i.p0),e=this.projectionFactor(i.p1);if(1<=t&&1<=e)return null;if(t<=0&&e<=0)return null;n=this.project(i.p0);t<0&&(n=this.p0),1<t&&(n=this.p1);i=this.project(i.p1);return e<0&&(i=this.p0),1<e&&(i=this.p1),new Jt(n,i)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return Zt.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Jt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?g.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=g.MAX_VALUE,r=null,e=this.closestPoint(t.p0),i=e.distance(t.p0);n[0]=e,n[1]=t.p0;e=this.closestPoint(t.p1);(r=e.distance(t.p1))<i&&(i=r,n[0]=e,n[1]=t.p1);e=t.closestPoint(this.p0);(r=e.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=e);t=t.closestPoint(this.p1);return(r=t.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=t),n},closestPoint:function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,t=this.p0.compareTo(e.p0);return 0!==t?t:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return F.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof w))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s),a=0,t=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,t=e*s/o}return new d(n-t,i+a)},setCoordinates:function(){var t,e;1===arguments.length?(e=arguments[0],this.setCoordinates(e.p0,e.p1)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y)},segmentFraction:function(t){t=this.projectionFactor(t);return t<0?t=0:(1<t||g.isNaN(t))&&(t=1),t},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Jt){var t=arguments[0];return Zt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof d)return Zt.distancePointLine(arguments[0],this.p0,this.p1)},pointAlong:function(t){var e=new d;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),t=java.lang.Double.doubleToLongBits(this.p1.x);return t^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(t)^Math.trunc(t>>32))},interfaces_:function(){return[i,o]},getClass:function(){return Jt}}),Jt.midPoint=function(t,e){return new d((t.x+e.x)/2,(t.y+e.y)/2)},Jt.serialVersionUID=0x2d2172135f411c00,e(Qt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])||Qt.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||Qt.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||Qt.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]))&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},isCoveredBy:function(){return(Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])||Qt.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||Qt.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||Qt.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]))&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE},set:function(){var t,e,n;if(1===arguments.length)for(var i=arguments[0],r=0;r<i.length;r++){var s=Math.trunc(r/3),o=r%3;this.matrix[s][o]=lt.toDimensionValue(i.charAt(r))}else 3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.matrix[t][e]=n)},isContains:function(){return Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},setAtLeast:function(){var t,e,n;if(1===arguments.length)for(var i=arguments[0],r=0;r<i.length;r++){var s=Math.trunc(r/3),o=r%3;this.setAtLeast(s,o,lt.toDimensionValue(i.charAt(r)))}else 3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.matrix[t][e]<n&&(this.matrix[t][e]=n))},setAtLeastIfValid:function(t,e,n){0<=t&&0<=e&&this.setAtLeast(t,e,n)},isWithin:function(){return Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE},isTouches:function(t,e){return e<t?this.isTouches(e,t):(t===lt.A&&e===lt.A||t===lt.L&&e===lt.L||t===lt.L&&e===lt.A||t===lt.P&&e===lt.A||t===lt.P&&e===lt.L)&&(this.matrix[L.INTERIOR][L.INTERIOR]===lt.FALSE&&(Qt.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||Qt.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||Qt.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY])))},isOverlaps:function(t,e){return t===lt.P&&e===lt.P||t===lt.A&&e===lt.A?Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&Qt.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR])&&Qt.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]):t===lt.L&&e===lt.L&&(1===this.matrix[L.INTERIOR][L.INTERIOR]&&Qt.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR])&&Qt.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]))},isEquals:function(t,e){return t===e&&(Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE)},toString:function(){for(var t=new P("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,lt.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new c;for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!Qt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[L.INTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.INTERIOR][L.BOUNDARY]===lt.FALSE&&this.matrix[L.BOUNDARY][L.INTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.BOUNDARY]===lt.FALSE},isCrosses:function(t,e){return t===lt.P&&e===lt.L||t===lt.P&&e===lt.A||t===lt.L&&e===lt.A?Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&Qt.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR]):t===lt.L&&e===lt.P||t===lt.A&&e===lt.P||t===lt.A&&e===lt.L?Qt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&Qt.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]):t===lt.L&&e===lt.L&&0===this.matrix[L.INTERIOR][L.INTERIOR]},interfaces_:function(){return[r]},getClass:function(){return Qt}}),Qt.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===lt.SYM_DONTCARE||(e===lt.SYM_TRUE&&(0<=t||t===lt.TRUE)||(e===lt.SYM_FALSE&&t===lt.FALSE||(e===lt.SYM_P&&t===lt.P||(e===lt.SYM_L&&t===lt.L||e===lt.SYM_A&&t===lt.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){t=arguments[1];return new Qt(arguments[0]).matches(t)}},Qt.isTrue=function(t){return 0<=t||t===lt.TRUE};var Ks=Object.freeze({Coordinate:d,CoordinateList:N,Envelope:C,LineSegment:Jt,GeometryFactory:Yt,Geometry:B,Point:wt,LineString:Ct,LinearRing:Pt,Polygon:Rt,GeometryCollection:ft,MultiPoint:Tt,MultiLineString:gt,MultiPolygon:bt,Dimension:lt,IntersectionMatrix:Qt});e($t.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i,r=t[n].distance(t[n+1]);0!==r&&(e+=r,i=(t[n].x+t[n+1].x)/2,this.lineCentSum.x+=r*i,i=(t[n].y+t[n+1].y)/2,this.lineCentSum.y+=r*i)}this.totalLength+=e,0===e&&0<t.length&&this.addPoint(t[0])},addHole:function(t){for(var e=Zt.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new d;if(0<Math.abs(this.areasum2))t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(0<this.totalLength)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(0<this.ptCount))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){0<t.length&&this.setBasePoint(t[0]);for(var e=!Zt.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){i=i?1:-1;$t.centroid3(t,e,n,this.triangleCent3);n=$t.area2(t,e,n);this.cg3.x+=i*n*this.triangleCent3.x,this.cg3.y+=i*n*this.triangleCent3.y,this.areasum2+=i*n},add:function(){if(arguments[0]instanceof Rt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof B){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof wt)this.addPoint(n.getCoordinate());else if(n instanceof Ct)this.addLineSegments(n.getCoordinates());else if(n instanceof Rt){this.add(n)}else if(n instanceof ft)for(var i=n,e=0;e<i.getNumGeometries();e++)this.add(i.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return $t}}),$t.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},$t.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},$t.getCentroid=function(t){return new $t(t).getCentroid()},(te.prototype=new Error).name="EmptyStackException",(ee.prototype=new v).add=function(t){return this.array_.push(t),!0},ee.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ee.prototype.push=function(t){return this.array_.push(t),t},ee.prototype.pop=function(t){if(0===this.array_.length)throw new te;return this.array_.pop()},ee.prototype.peek=function(){if(0===this.array_.length)throw new te;return this.array_[this.array_.length-1]},ee.prototype.empty=function(){return 0===this.array_.length},ee.prototype.isEmpty=function(){return this.empty()},ee.prototype.search=function(t){return this.array_.indexOf(t)},ee.prototype.size=function(){return this.array_.length},ee.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e(ne.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[z]},getClass:function(){return ne}}),ne.filterCoordinates=function(t){for(var e=new ne,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(ie.prototype,{preSort:function(t){for(var e,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return ut.sort(t,1,t.length,new re(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),t=new N;return t.add(e,!1),t.size()<3?null:(t.closeRing(),t.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this.geomFactory.createLineString([t[0],t[1]]);t=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(t,null)},cleanRing:function(t){l.equals(t[0],t[t.length-1]);for(var e=new I,n=null,i=0;i<=t.length-2;i++){var r=t[i],s=t[i+1];r.equals(s)||null!==n&&this.isBetween(n,r,s)||(e.add(r),n=r)}e.add(t[t.length-1]);var o=new Array(e.size()).fill(null);return e.toArray(o)},isBetween:function(t,e,n){if(0!==Zt.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new at,i=0;i<e.length;i++)n.add(e[i]);for(i=0;i<t.length;i++)Zt.isPointInRing(t[i],e)||n.add(t[i]);var r=H.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;50<this.inputPts.length&&(t=this.reduce(this.inputPts));t=this.preSort(t),t=this.grahamScan(t),t=this.toCoordinateArray(t);return this.lineOrPolygon(t)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new ee,e=n.push(t[0]);e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&0<Zt.computeOrientation(n.peek(),e,t[i]);)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return ie}}),ie.extractCoordinates=function(t){var e=new ne;return t.apply(e),e.getCoordinates()},e(re.prototype,{compare:function(t,e){return re.polarCompare(this.origin,t,e)},interfaces_:function(){return[s]},getClass:function(){return re}}),re.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-t.x,o=n.y-t.y,n=Zt.computeOrientation(t,e,n);if(n===Zt.COUNTERCLOCKWISE)return 1;if(n===Zt.CLOCKWISE)return-1;r=i*i+r*r,o=s*s+o*o;return r<o?-1:o<r?1:0},ie.RadialComparator=re,e(se.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Pt&&!i.isEmpty()||(n=!1);for(var r=new I,s=0;s<t.getNumInteriorRing();s++){var o=this.transformLinearRing(t.getInteriorRingN(s),t);null===o||o.isEmpty()||(o instanceof Pt||(n=!1),r.add(o))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new I;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(Yt.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof wt)return this.transformPoint(t,null);if(t instanceof Tt)return this.transformMultiPoint(t,null);if(t instanceof Pt)return this.transformLinearRing(t,null);if(t instanceof Ct)return this.transformLineString(t,null);if(t instanceof gt)return this.transformMultiLineString(t,null);if(t instanceof Rt)return this.transformPolygon(t,null);if(t instanceof bt)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new c(t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);t=n.size();return 0<t&&t<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return se}}),e(oe.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),r=this.findSnapForVertex(r,e);null!==r&&(t.set(i,new d(r)),0===i&&this._isClosed&&t.set(t.size()-1,new d(r)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new N(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],s=this.findSegmentIndexToSnap(r,t);0<=s&&t.add(s+1,new d(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=g.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this.seg.p0=e.get(r),this.seg.p1=e.get(r+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var s=this.seg.distance(t);s<this.snapTolerance&&s<n&&(n=s,i=r)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return oe}}),oe.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(ae.prototype,{snapTo:function(t,e){return new ue(e,this.extractTargetCoordinates(t)).transform(this.srcGeom)},snapToSelf:function(t,e){var n=new ue(t,this.extractTargetCoordinates(this.srcGeom),!0).transform(this.srcGeom),t=n;return e&&R(t,Lt)&&(t=n.buffer(0)),t},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new at,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=g.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return ae}}),ae.snap=function(t,e,n){var i=new Array(2).fill(null),t=new ae(t);i[0]=t.snapTo(e,n);e=new ae(e);return i[1]=e.snapTo(i[0],n),i},ae.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ae.computeSizeBasedSnapTolerance(t),t=t.getPrecisionModel();return t.getType()!==Vt.FIXED||e<(n=1/t.getScale()*2/1.415)&&(e=n),e}if(2===arguments.length){var n=arguments[0],e=arguments[1];return Math.min(ae.computeOverlaySnapTolerance(n),ae.computeOverlaySnapTolerance(e))}},ae.computeSizeBasedSnapTolerance=function(t){t=t.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*ae.SNAP_PRECISION_FACTOR},ae.snapToSelf=function(t,e,n){return new ae(t).snapToSelf(e,n)},ae.SNAP_PRECISION_FACTOR=1e-9,a(ue,se),e(ue.prototype,{snapLine:function(t,e){t=new oe(t,this.snapTolerance);return t.setAllowSnappingToSourceVertices(this.isSelfSnap),t.snapTo(e)},transformCoordinates:function(t,e){t=t.toCoordinateArray(),t=this.snapLine(t,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(t)},interfaces_:function(){return[]},getClass:function(){return ue}}),e(le.prototype,{getCommon:function(){return g.longBitsToDouble(this.commonBits)},add:function(t){t=g.doubleToLongBits(t);return this.isFirst?(this.commonBits=t,this.commonSignExp=le.signExpBits(this.commonBits),this.isFirst=!1,null):le.signExpBits(t)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=le.numCommonMostSigMantissaBits(this.commonBits,t),void(this.commonBits=le.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=g.longBitsToDouble(t),t="0000000000000000000000000000000000000000000000000000000000000000"+Long.toBinaryString(t),t=t.substring(t.length-64);return t.substring(0,1)+"  "+t.substring(1,12)+"(exp) "+t.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return le}}),le.getBit=function(t,e){return 0!=(t&1<<e)?1:0},le.signExpBits=function(t){return t>>52},le.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},le.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;0<=i;i--){if(le.getBit(t,i)!==le.getBit(e,i))return n;n++}return 52},e(he.prototype,{addCommonBits:function(t){var e=new fe(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new d(this.commonCoord);e.x=-e.x,e.y=-e.y;e=new fe(e);return t.apply(e),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return he}}),e(ce.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new d(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[z]},getClass:function(){return ce}}),e(fe.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ct]},getClass:function(){return fe}}),he.CommonCoordinateFilter=ce,he.Translater=fe,e(ge.prototype,{next:function(){if(this.atStart)return this.atStart=!1,ge.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new x;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new ge(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[f]},getClass:function(){return ge}}),ge.isAtomic=function(t){return!(t instanceof ft)},e(de.prototype,{locateInternal:function(){if(arguments[0]instanceof d&&arguments[1]instanceof Rt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return L.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===L.EXTERIOR)return L.EXTERIOR;if(i===L.BOUNDARY)return L.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,s);if(s===L.INTERIOR)return L.EXTERIOR;if(s===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}if(arguments[0]instanceof d&&arguments[1]instanceof Ct){n=arguments[0],i=arguments[1];if(!i.getEnvelopeInternal().intersects(n))return L.EXTERIOR;var o=i.getCoordinates();return i.isClosed()||!n.equals(o[0])&&!n.equals(o[o.length-1])?Zt.isOnLine(n,o)?L.INTERIOR:L.EXTERIOR:L.BOUNDARY}if(arguments[0]instanceof d&&arguments[1]instanceof wt){o=arguments[0];return arguments[1].getCoordinate().equals2D(o)?L.INTERIOR:L.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?Zt.locatePointInRing(t,e.getCoordinates()):L.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==L.EXTERIOR},updateLocationInfo:function(t){t===L.INTERIOR&&(this.isIn=!0),t===L.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof wt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ct)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Rt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof gt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof bt)for(var s=e,i=0;i<s.getNumGeometries();i++){var o=s.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,o))}else if(e instanceof ft)for(var a=new ge(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},locate:function(t,e){return e.isEmpty()?L.EXTERIOR:e instanceof Ct||e instanceof Rt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?L.BOUNDARY:0<this.numBoundaries||this.isIn?L.INTERIOR:L.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return de}}),e(pe.prototype,{interfaces_:function(){return[]},getClass:function(){return pe}}),pe.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new c;var n=Math.abs(t),i=Math.abs(e);return 0<=t?0<=e?i<=n?0:1:i<=n?7:6:0<=e?i<=n?3:2:i<=n?4:5}if(arguments[0]instanceof d&&arguments[1]instanceof d){e=arguments[0],i=arguments[1],n=i.x-e.x,i=i.y-e.y;if(0==n&&0==i)throw new c;return pe.octant(n,i)}},e(me.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return me}}),e(ye.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:pe.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Xt.toLineString(new Ft(this.pts))},interfaces_:function(){return[me]},getClass:function(){return ye}}),e(ve.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return ve}}),e(xe.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[ve,o]},getClass:function(){return xe}}),e(Ee.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),--this._size,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Ee}}),e(Ie.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Ie}}),e(Ne.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return Ne}}),e(Ce.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){l.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[ve,o]},getClass:function(){return Ce}}),Ce.serialVersionUID=0x5a1e55ec41369800;var Zs={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Zs.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?ut.sort(n,e):ut.sort(n);for(var i=t.iterator(),r=0,s=n.length;r<s;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new I;return e.add(t),e}};e(Se.prototype,{expandToQueue:function(t,e){var n=Se.isComposite(this.boundable1),i=Se.isComposite(this.boundable2);if(n&&i)return Se.area(this.boundable1)>Se.area(this.boundable2)?this.expand(this.boundable1,this.boundable2,t,e):this.expand(this.boundable2,this.boundable1,t,e),null;if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(i)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new c},isLeaves:function(){return!(Se.isComposite(this.boundable1)||Se.isComposite(this.boundable2))},compareTo:function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var s=new Se(r.next(),e,this.itemDistance);s.getDistance()<i&&n.add(s)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[i]},getClass:function(){return Se}}),Se.area=function(t){return t.getBounds().getArea()},Se.isComposite=function(t){return t instanceof Ce},e(we.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ce?t+=this.size(n):n instanceof xe&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof xe&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new I:t}if(1===arguments.length){for(var t=arguments[0],e=new I,n=t.getChildBoundables().iterator();n.hasNext();){var i,r=n.next();r instanceof Ce?null!==(i=this.itemsTree(r))&&e.add(i):r instanceof xe?e.add(r.getItem()):l.shouldNeverReachHere()}return e.size()<=0?null:e}},insert:function(t,e){l.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new xe(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new I;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],e=arguments[1],i=arguments[2];if(l.isTrue(-2<n),e.getLevel()===n)return i.add(e),null;for(var r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof Ce?this.boundablesAtLevel(n,s,i):(l.isTrue(s instanceof xe),-1===n&&i.add(s))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new I;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(2===arguments.length){t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e)}else if(3===arguments.length)if(R(arguments[2],Ie)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce)for(var n=arguments[0],i=arguments[2],r=arguments[1].getChildBoundables(),s=0;s<r.size();s++){var o=r.get(s);this.getIntersectsOp().intersects(o.getBounds(),n)&&(o instanceof Ce?this.query(n,o,i):o instanceof xe?i.visitItem(o.getItem()):l.shouldNeverReachHere())}else if(R(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce)for(var a=arguments[0],u=arguments[2],r=arguments[1].getChildBoundables(),s=0;s<r.size();s++){o=r.get(s);this.getIntersectsOp().intersects(o.getBounds(),a)&&(o instanceof Ce?this.query(a,o,u):o instanceof xe?u.add(o.getItem()):l.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],e=arguments[1],i=arguments[2],r=this.removeItem(e,i);if(r)return!0;for(var s=null,o=e.getChildBoundables().iterator();o.hasNext();){var a=o.next();if(this.getIntersectsOp().intersects(a.getBounds(),n)&&a instanceof Ce&&(r=this.remove(n,a,i))){s=a;break}}return null!==s&&s.getChildBoundables().isEmpty()&&e.getChildBoundables().remove(s),r}},createHigherLevels:function(t,e){l.isTrue(!t.isEmpty());t=this.createParentBoundables(t,e+1);return 1===t.size()?t.get(0):this.createHigherLevels(t,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ce&&(t<(n=this.depth(n))&&(t=n))}return t+1}},createParentBoundables:function(t,e){l.isTrue(!t.isEmpty());var n=new I;n.add(this.createNode(e));t=new I(t);Zs.sort(t,this.getComparator());for(var i=t.iterator();i.hasNext();){var r=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(r)}return n},isEmpty:function(){return(this.built?this.root:this.itemBoundables).isEmpty()},interfaces_:function(){return[o]},getClass:function(){return we}}),we.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},we.IntersectsOp=function(){},we.serialVersionUID=-0x35ef64c82d4c5400,we.DEFAULT_NODE_CAPACITY=10,e(Le.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Le}}),a(Re,we),e(Re.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){l.isTrue(0<t.length);for(var n=new I,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Te(t)},size:function(){return 0===arguments.length?we.prototype.size.call(this):we.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return we.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void we.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Re.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;s<e;s++){i[s]=new I;for(var o=0;r.hasNext()&&o<n;){var a=r.next();i[s].add(a),o++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return we.prototype.query.call(this,t)}var e,n,i,r;2===arguments.length?(e=arguments[0],t=arguments[1],we.prototype.query.call(this,e,t)):3===arguments.length&&(R(arguments[2],Ie)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce?(n=arguments[0],i=arguments[1],r=arguments[2],we.prototype.query.call(this,n,i,r)):R(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce&&(n=arguments[0],i=arguments[1],r=arguments[2],we.prototype.query.call(this,n,i,r)))},getComparator:function(){return Re.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return we.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2!==arguments.length)return we.prototype.remove.apply(this,arguments);var t=arguments[0],e=arguments[1];return we.prototype.remove.call(this,t,e)},depth:function(){return 0===arguments.length?we.prototype.depth.call(this):we.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){l.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),t=new I(t);Zs.sort(t,Re.xComparator);n=this.verticalSlices(t,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(n,e)},nearestNeighbour:function(){if(1===arguments.length){if(R(arguments[0],Le)){var t=arguments[0],t=new Se(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(t)}if(arguments[0]instanceof Se){var e=arguments[0];return this.nearestNeighbour(e,g.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Re&&R(arguments[1],Le)){var e=arguments[0],n=arguments[1],t=new Se(this.getRoot(),e.getRoot(),n);return this.nearestNeighbour(t)}if(arguments[0]instanceof Se&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1],s=null,o=new Ee;for(o.add(i);!o.isEmpty()&&0<r;){var a=o.poll(),u=a.getDistance();if(r<=u)break;a.isLeaves()?(r=u,s=a):a.expandToQueue(o,r)}return[s.getBoundable(0).getItem(),s.getBoundable(1).getItem()]}}else if(3===arguments.length){n=arguments[2],i=new xe(arguments[0],arguments[1]),t=new Se(this.getRoot(),i,n);return this.nearestNeighbour(t)[0]}},interfaces_:function(){return[Ne,o]},getClass:function(){return Re}}),Re.centreX=function(t){return Re.avg(t.getMinX(),t.getMaxX())},Re.avg=function(t,e){return(t+e)/2},Re.centreY=function(t){return Re.avg(t.getMinY(),t.getMaxY())},a(Te,Ce),e(Te.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new C(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Te}}),Re.STRtreeNode=Te,Re.serialVersionUID=0x39920f7d5f261e0,Re.xComparator={interfaces_:function(){return[s]},compare:function(t,e){return we.compareDoubles(Re.centreX(t.getBounds()),Re.centreX(e.getBounds()))}},Re.yComparator={interfaces_:function(){return[s]},compare:function(t,e){return we.compareDoubles(Re.centreY(t.getBounds()),Re.centreY(e.getBounds()))}},Re.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Re.DEFAULT_NODE_CAPACITY=10,e(Pe.prototype,{interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.relativeSign=function(t,e){return t<e?-1:e<t?1:0},Pe.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Pe.relativeSign(e.x,n.x),n=Pe.relativeSign(e.y,n.y);switch(t){case 0:return Pe.compareValue(i,n);case 1:return Pe.compareValue(n,i);case 2:return Pe.compareValue(n,-i);case 3:return Pe.compareValue(-i,n);case 4:return Pe.compareValue(-i,-n);case 5:return Pe.compareValue(-n,-i);case 6:return Pe.compareValue(-n,i);case 7:return Pe.compareValue(i,-n)}return l.shouldNeverReachHere("invalid octant value"),0},Pe.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0},e(be.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Pe.compare(this.segmentOctant,this.coord,t.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[i]},getClass:function(){return be}}),e(Oe.prototype,{getSplitCoordinates:function(){var t=new N;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new I;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new b(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex,t.segmentIndex;var i=this.edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(i);n.add(new d(t.coord),!1);for(var r=t.segmentIndex+1;r<=e.segmentIndex;r++)n.add(this.edge.getCoordinate(r));i&&n.add(new d(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new b(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(i);i||n--;var r=new Array(n).fill(null),s=0;r[s++]=new d(t.coord);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r[s++]=this.edge.getCoordinate(o);return i&&(r[s]=new d(e.coord)),new De(r,this.edge.getData())},add:function(t,e){var n=new be(this.edge,t,e,this.edge.getSegmentOctant(e)),e=this.nodeMap.get(n);return null!==e?(l.isTrue(e.coord.equals2D(t),"Found equal nodes with different coordinates"),e):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new p("bad split edge start point at "+n);t=t.get(t.size()-1).getCoordinates(),t=t[t.length-1];if(!t.equals2D(e[e.length-1]))throw new p("bad split edge end point at "+t)},interfaces_:function(){return[]},getClass:function(){return Oe}}),e(_e.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[f]},getClass:function(){return _e}}),e(Me.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[me]},getClass:function(){return Me}}),e(De.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:pe.octant(t,e)},getData:function(){return this.data},addIntersection:function(){var t,e;2===arguments.length?(t=arguments[0],e=arguments[1],this.addIntersectionNode(t,e)):4===arguments.length&&(t=arguments[1],e=arguments[3],e=new d(arguments[0].getIntersection(e)),this.addIntersection(e,t))},toString:function(){return Xt.toLineString(new Ft(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;return i<this.pts.length&&(e=this.pts[i],t.equals2D(e)&&(n=i)),this.nodeList.add(t,n)},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[Me]},getClass:function(){return De}}),De.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new I;return De.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){i.next().getNodeList().addSplitEdges(n)}},e(Ae.prototype,{overlap:function(){var t,e,n;2===arguments.length||4===arguments.length&&(t=arguments[1],e=arguments[2],n=arguments[3],arguments[0].getLineSegment(t,this.overlapSeg1),e.getLineSegment(n,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2))},interfaces_:function(){return[]},getClass:function(){return Ae}}),e(Fe.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],s=this.pts[n];if(i.tempEnv1.init(r,s),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){var t,e;return null===this.env&&(t=this.pts[this.start],e=this.pts[this.end],this.env=new C(t,e)),this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,s){var o=this.pts[t],a=this.pts[e],u=n.pts[i],l=n.pts[r];if(e-t==1&&r-i==1)return s.overlap(this,t,n,i),null;if(s.tempEnv1.init(o,a),s.tempEnv2.init(u,l),!s.tempEnv1.intersects(s.tempEnv2))return null;u=Math.trunc((t+e)/2),l=Math.trunc((i+r)/2);t<u&&(i<l&&this.computeOverlapsInternal(t,u,n,i,l,s),l<r&&this.computeOverlapsInternal(t,u,n,l,r,s)),u<e&&(i<l&&this.computeOverlapsInternal(u,e,n,i,l,s),l<r&&this.computeOverlapsInternal(u,e,n,l,r,s))},interfaces_:function(){return[]},getClass:function(){return Fe}}),e(Ge.prototype,{interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.isNorthern=function(t){return t===Ge.NE||t===Ge.NW},Ge.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Ge.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},Ge.isInHalfPlane=function(t,e){return e===Ge.SE?t===Ge.SE||t===Ge.SW:t===e||t===e+1},Ge.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new c;return 0<=t?0<=e?Ge.NE:Ge.SE:0<=e?Ge.NW:Ge.SW}if(arguments[0]instanceof d&&arguments[1]instanceof d){t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new c;return e.x>=t.x?e.y>=t.y?Ge.NE:Ge.SE:e.y>=t.y?Ge.NW:Ge.SW}},Ge.NE=0,Ge.NW=1,Ge.SW=2,Ge.SE=3,e(qe.prototype,{interfaces_:function(){return[]},getClass:function(){return qe}}),qe.getChainStartIndices=function(t){var e=0,n=new I;n.add(new b(e));do{var i=qe.findChainEnd(t,e)}while(n.add(new b(i)),(e=i)<t.length-1);return qe.toIntArray(n)},qe.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ge.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r]))if(Ge.quadrant(t[r-1],t[r])!==i)break;r++}return r-1},qe.getChains=function(){if(1===arguments.length)return qe.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new I,i=qe.getChainStartIndices(t),r=0;r<i.length-1;r++){var s=new Fe(t,i[r],i[r+1],e);n.add(s)}return n}},qe.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Be.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Be}}),e(ze.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Be]},getClass:function(){return ze}}),a(Ve,ze),e(Ve.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return De.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=qe.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this.idCounter++),this.index.insert(n.getEnvelope(),n),this.monoChains.add(n)}},computeNodes:function(t){for(var e=(this.nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new ke(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Ve}}),a(ke,Ae),e(ke.prototype,{overlap:function(){if(4!==arguments.length)return Ae.prototype.overlap.apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],i=arguments[0].getContext(),e=e.getContext();this.si.processIntersections(i,t,e,n)},interfaces_:function(){return[]},getClass:function(){return ke}}),Ve.SegmentOverlapAction=ke,a(Ye,p),e(Ye.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(Ue.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Ue}}),e(Xe.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,i)))return null;var r=t.getCoordinates()[e],t=t.getCoordinates()[e+1],e=n.getCoordinates()[i],i=n.getCoordinates()[i+1];this.li.computeIntersection(r,t,e,i),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=r,this.intSegments[1]=t,this.intSegments[2]=e,this.intSegments[3]=i,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[Ue]},getClass:function(){return Xe}}),Xe.createAllIntersectionsFinder=function(t){t=new Xe(t);return t.setFindAllIntersections(!0),t},Xe.createAnyIntersectionFinder=function(t){return new Xe(t)},Xe.createIntersectionCounter=function(t){t=new Xe(t);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t},e(He.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Xe(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Ve;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new Ye(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Xt.toLineString(t[0],t[1])+" and "+Xt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return He}}),He.computeIntersections=function(t){t=new He(t);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()},e(We.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return We}}),We.toSegmentStrings=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new ye(i.getCoordinates(),i))}return e},We.checkValid=function(t){new We(t).checkValid()},e(je.prototype,{map:function(t){for(var e=new I,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Yt.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return je}}),je.map=function(t,e){return new je(e).map(t)},e(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.opposite=function(t){return t===Ke.LEFT?Ke.RIGHT:t===Ke.RIGHT?Ke.LEFT:t},Ke.ON=0,Ke.LEFT=1,Ke.RIGHT=2,e(Ze.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==L.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===L.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){var e;t.location.length>this.location.length&&((e=new Array(3).fill(null))[Ke.ON]=this.location[Ke.ON],e[Ke.LEFT]=L.NONE,e[Ke.RIGHT]=L.NONE,this.location=e);for(var n=0;n<this.location.length;n++)this.location[n]===L.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[Ke.LEFT];this.location[Ke.LEFT]=this.location[Ke.RIGHT],this.location[Ke.RIGHT]=t},toString:function(){var t=new P;return 1<this.location.length&&t.append(L.toLocationSymbol(this.location[Ke.LEFT])),t.append(L.toLocationSymbol(this.location[Ke.ON])),1<this.location.length&&t.append(L.toLocationSymbol(this.location[Ke.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[Ke.ON]=t,this.location[Ke.LEFT]=e,this.location[Ke.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:L.NONE},isArea:function(){return 1<this.location.length},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===L.NONE)return!0;return!1},setLocation:function(){var t,e;1===arguments.length?(e=arguments[0],this.setLocation(Ke.ON,e)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.location[t]=e)},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Ze}}),e(Je.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){var t,e;1===arguments.length?(e=arguments[0],this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)):2===arguments.length&&(t=arguments[0],e=arguments[1],this.elt[t].setAllLocationsIfNull(e))},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ze(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ke.ON)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.elt[e].get(t)}},toString:function(){var t=new P;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){var t,e,n;2===arguments.length?(e=arguments[0],n=arguments[1],this.elt[e].setLocation(Ke.ON,n)):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.elt[t].setLocation(e,n))},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Ze(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Je}}),Je.toLineLabel=function(t){for(var e=new Je(L.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},e(Qe.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=Zt.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){var e=this.startDe=t,n=!0;do{if(null===e)throw new Ye("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ye("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel()}while(l.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),(e=this.getNext(e))!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this)}while(e>this.maxNodeDegree&&(this.maxNodeDegree=e),(t=this.getNext(t))!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var s=r;s<i.length;s++)this.pts.add(i[s])}else{r=i.length-2;n&&(r=i.length-1);for(s=r;0<=s;s--)this.pts.add(i[s])}},isHole:function(){return this._isHole},setInResult:function(){for(var t=this.startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this.startDe;);},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Zt.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this.holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],t=arguments[0].getLocation(e,Ke.RIGHT);return t===L.NONE?null:this.label.getLocation(e)===L.NONE?(this.label.setLocation(e,t),null):void 0}},setShell:function(t){null!==(this.shell=t)&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return Qe}}),a($e,Qe),e($e.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return $e}}),a(tn,Qe),e(tn.prototype,{buildMinimalRings:function(){var t,e=new I,n=this.startDe;do{}while(null===n.getMinEdgeRing()&&(t=new $e(n,this.geometryFactory),e.add(t)),(n=n.getNext())!==this.startDe);return e},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{}while(t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){l.isTrue(2<=this.label.getGeometryCount(),"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return en}}),a(nn,en),e(nn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=L.NONE,n=this.label.getLocation(e);return t.isNull(e)||(e=t.getLocation(e),n!==L.BOUNDARY&&(n=e)),n},setLabel:function(){if(2!==arguments.length)return en.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new Je(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof nn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Je)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n);this.label.getLocation(n)===L.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=L.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case L.BOUNDARY:n=L.INTERIOR;break;case L.INTERIOR:n=L.BOUNDARY;break;default:n=L.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return nn}}),e(rn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof d){var t=arguments[0];return null===(e=this.nodeMap.get(t))&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof nn){var e,t=arguments[0];return null===(e=this.nodeMap.get(t.getCoordinate()))?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new I,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===L.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return rn}}),e(sn.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Zt.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),i=n.substring(i+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){return this.compareDirection(t)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Ge.quadrant(this.dx,this.dy),l.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[i]},getClass:function(){return sn}}),a(on,sn),e(on.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Je(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new Ye("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,Ke.LEFT)===L.INTERIOR&&this.label.getLocation(e,Ke.RIGHT)===L.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){sn.prototype.print.call(this,t),t.print(" "+this.depth[Ke.LEFT]+"/"+this.depth[Ke.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,L.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,L.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ke.LEFT&&(i=-1);var r=Ke.opposite(t),i=e+n*i;this.setDepth(t,e),this.setDepth(r,i)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return on}}),on.depthFactor=function(t,e){return t===L.EXTERIOR&&e===L.INTERIOR?1:t===L.INTERIOR&&e===L.EXTERIOR?-1:0},e(an.prototype,{createNode:function(t){return new nn(t,null)},interfaces_:function(){return[]},getClass:function(){return an}}),e(un.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof nn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof d){t=arguments[0];return this.nodes.addNode(t)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){A.out.println(t)},isBoundaryNode:function(t,e){e=this.nodes.find(e);if(null===e)return!1;e=e.getLabel();return null!==e&&e.getLocation(t)===L.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&(Zt.computeOrientation(t,e,i)===Zt.COLLINEAR&&Ge.quadrant(t,e)===Ge.quadrant(n,i))},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){A.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new on(n,!0),n=new on(n,!1);i.setSym(n),n.setSym(i),this.add(i),this.add(n)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return un}}),un.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},e(ln.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();(r.isHole()?n:e).add(r)}},computePolygons:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this.geometryFactory);e.add(i)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Ye("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new I,r=t.iterator();r.hasNext();){var s,o,a=r.next();2<a.getMaxNodeDegree()?(a.linkDirectedEdgesForMinimalEdgeRings(),s=a.buildMinimalRings(),null!==(o=this.findShell(s))?(this.placePolygonHoles(o,s),e.add(o)):n.addAll(s)):i.add(a)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()&&(i=new tn(i,this.geometryFactory),e.add(i),i.setInResult())}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){return this.computePolygons(this.shellList)},findEdgeRingContaining:function(t,e){for(var t=t.getLinearRing(),n=t.getEnvelopeInternal(),i=t.getCoordinateN(0),r=null,s=null,o=e.iterator();o.hasNext();){var a=o.next(),u=a.getLinearRing(),l=u.getEnvelopeInternal();null!==r&&(s=r.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(n)&&Zt.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===r||s.contains(l))&&(r=a)}return r},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return l.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){var t,e;1===arguments.length?(e=arguments[0],this.add(e.getEdgeEnds(),e.getNodes())):2===arguments.length&&(t=arguments[0],un.linkResultDirectedEdges(arguments[1]),e=this.buildMaximalEdgeRings(t),t=new I,e=this.buildMinimalEdgeRings(e,this.shellList,t),this.sortShellsAndHoles(e,this.shellList,t),this.placeFreeHoles(this.shellList,t))},interfaces_:function(){return[]},getClass:function(){return ln}}),e(hn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!kn.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();n.isLineEdge()&&!i.isCoveredSet()&&(n=this.op.isCoveredByA(n.getCoordinate()),i.setCovered(n))}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(l.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(kn.isResultOfOp(i,e)&&e===kn.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return hn}}),e(cn.prototype,{filterCoveredNodeToPoint:function(t){t=t.getCoordinate();this.op.isCoveredByLA(t)||(t=this.geometryFactory.createPoint(t),this.resultPointList.add(t))},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n,i=e.next();i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==kn.INTERSECTION||(n=i.getLabel(),kn.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(i))}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return cn}}),e(fn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return fn}}),e(gn.prototype,{locate:function(t){return gn.locate(t,this.geom)},interfaces_:function(){return[fn]},getClass:function(){return gn}}),gn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Zt.isPointInRing(t,e.getCoordinates())},gn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!gn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(gn.isPointInRing(t,r))return!1}return!0},gn.containsPoint=function(t,e){if(e instanceof Rt)return gn.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new ge(e);n.hasNext();){var i=n.next();if(i!==e&&gn.containsPoint(t,i))return!0}return!1},gn.locate=function(t,e){return!e.isEmpty()&&gn.containsPoint(t,e)?L.INTERIOR:L.EXTERIOR},e(dn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),t=e-1;return 0===e&&(t=this.edgeList.size()-1),this.edgeList.get(t)},propagateSideLabels:function(t){for(var e=L.NONE,n=this.iterator();n.hasNext();){(r=(i=n.next()).getLabel()).isArea(t)&&r.getLocation(t,Ke.LEFT)!==L.NONE&&(e=r.getLocation(t,Ke.LEFT))}if(e===L.NONE)return null;for(var i,r,s=e,n=this.iterator();n.hasNext();){if((r=(i=n.next()).getLabel()).getLocation(t,Ke.ON)===L.NONE&&r.setLocation(t,Ke.ON,s),r.isArea(t)){var o=r.getLocation(t,Ke.LEFT),a=r.getLocation(t,Ke.RIGHT);if(a!==L.NONE){if(a!==s)throw new Ye("side location conflict",i.getCoordinate());o===L.NONE&&l.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),s=o}else l.isTrue(r.getLocation(t,Ke.LEFT)===L.NONE,"found single null side"),r.setLocation(t,Ke.RIGHT,s),r.setLocation(t,Ke.LEFT,s)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){A.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,n=e.get(n).getLabel().getLocation(t,Ke.LEFT);l.isTrue(n!==L.NONE,"Found unlabelled area edge");for(var i=n,r=this.iterator();r.hasNext();){var s=r.next().getLabel();l.isTrue(s.isArea(t),"Found non-area edge");var o=s.getLocation(t,Ke.LEFT),s=s.getLocation(t,Ke.RIGHT);if(o===s)return!1;if(s!==i)return!1;i=o}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){if(this.edgeList.get(e)===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new I(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===L.NONE&&(this.ptInAreaLocation[t]=gn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new P;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),s=0;s<2;s++)r.isLine(s)&&r.getLocation(s)===L.BOUNDARY&&(e[s]=!0);for(var o,a,n=this.iterator();n.hasNext();)for(r=(i=n.next()).getLabel(),s=0;s<2;s++){r.isAnyNull(s)&&(a=L.NONE,a=e[s]?L.EXTERIOR:(o=i.getCoordinate(),this.getLocation(s,o,t)),r.setAllLocationsIfNull(s,a))}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return dn}}),a(pn,dn),e(pn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new Ye("no outgoing dirEdge found",this.getCoordinate());l.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){this.insertEdgeEnd(t,t)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),t=n.getQuadrant(),e=i.getQuadrant();return Ge.isNorthern(t)&&Ge.isNorthern(e)?n:Ge.isNorthern(t)||Ge.isNorthern(e)?0!==n.getDy()?n:0!==i.getDy()?i:(l.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){A.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new I;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;0<=n;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(Ke.LEFT)),i=t.getDepth(Ke.RIGHT),n=this.computeDepths(e+1,this.edgeList.size(),n);if(this.computeDepths(0,e,n)!==i)throw new Ye("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var r=arguments[1],s=arguments[2],o=arguments[0];o<r;o++){var a=this.edgeList.get(o);a.getLabel(),a.setEdgeDepths(Ke.RIGHT,s),s=a.getDepth(Ke.LEFT)}return s}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;0<=r;r--){var s=this.resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this.SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(l.isTrue(null!==e,"found null for first outgoing dirEdge"),l.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],t=0,e=this.iterator();e.hasNext();){e.next().getEdgeRing()===n&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=L.NONE,e=this.iterator();e.hasNext();){var n=(r=e.next()).getSym();if(!r.isLineEdge()){if(r.isInResult()){t=L.INTERIOR;break}if(n.isInResult()){t=L.EXTERIOR;break}}}if(t===L.NONE)return null;for(var i=t,e=this.iterator();e.hasNext();){var r,n=(r=e.next()).getSym();r.isLineEdge()?r.getEdge().setCovered(i===L.INTERIOR):(r.isInResult()&&(i=L.EXTERIOR),n.isInResult()&&(i=L.INTERIOR))}},computeLabelling:function(t){dn.prototype.computeLabelling.call(this,t),this.label=new Je(L.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),i=0;i<2;i++){var r=n.getLocation(i);r!==L.INTERIOR&&r!==L.BOUNDARY||this.label.setLocation(i,L.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return pn}}),a(mn,an),e(mn.prototype,{createNode:function(t){return new nn(t,new pn)},interfaces_:function(){return[]},getClass:function(){return mn}}),e(yn.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return yn}}),e(vn.prototype,{isDelete:function(){return this.eventType===vn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){return this.xValue<t.xValue?-1:this.xValue>t.xValue?1:this.eventType<t.eventType?-1:this.eventType>t.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===vn.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[i]},getClass:function(){return vn}}),vn.INSERT=1,vn.DELETE=2,e(xn.prototype,{interfaces_:function(){return[]},getClass:function(){return xn}}),e(En.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(En.isAdjacentSegments(e,i))return!0;if(t.isClosed()){t=t.getNumPoints()-1;if(0===e&&i===t||0===i&&e===t)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return En}}),En.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},a(In,xn),e(In.prototype,{prepareEvents:function(){Zs.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else{var i,r,s;3===arguments.length&&(arguments[2]instanceof En&&R(arguments[0],v)&&R(arguments[1],v)?(i=arguments[0],r=arguments[1],s=arguments[2],this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(s)):"boolean"==typeof arguments[2]&&R(arguments[0],v)&&arguments[1]instanceof En&&(r=arguments[0],s=arguments[1],arguments[2]?this.addEdges(r,null):this.addEdges(r),this.computeIntersections(s)))}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var s=new yn(n,r),s=new vn(e,n.getMinX(r),s);this.events.add(s),this.events.add(new vn(n.getMaxX(r),s))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),s=t;s<e;s++){var o,a=this.events.get(s);a.isInsert()&&(o=a.getObject(),n.isSameLabel(a)||(r.computeIntersections(o,i),this.nOverlaps++))}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],t=arguments[0].iterator();t.hasNext();){e=t.next();this.addEdge(e,n)}},interfaces_:function(){return[]},getClass:function(){return In}}),e(Nn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Xt.toLineString(new d(this.min,0),new d(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Nn}}),e(Cn.prototype,{compare:function(t,e){t=(t.min+t.max)/2,e=(e.min+e.max)/2;return t<e?-1:e<t?1:0},interfaces_:function(){return[s]},getClass:function(){return Cn}}),Nn.NodeComparator=Cn,a(Sn,Nn),e(Sn.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Sn}}),a(wn,Nn),e(wn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return wn}}),e(Ln.prototype,{buildTree:function(){Zs.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t,e=this.leaves,n=new I;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Sn(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){A.out.println(Xt.toLineString(new d(t.min,this.level),new d(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);null===(n+1<t.size()?t.get(n):null)?e.add(i):(i=new wn(t.get(n),t.get(n+1)),e.add(i))}},interfaces_:function(){return[]},getClass:function(){return Ln}}),e(Rn.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Pt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof Ct&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[q]},getClass:function(){return Rn}}),Rn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Rn.getLines(t))}if(2===arguments.length){var e=arguments[0],t=arguments[1];return e.getFactory().buildGeometry(Rn.getLines(e,t))}},Rn.getLines=function(){if(1===arguments.length)return Rn.getLines(arguments[0],!1);if(2===arguments.length){if(R(arguments[0],m)&&R(arguments[1],m)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();Rn.getLines(n,t)}return t}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1],s=new I;return i.apply(new Rn(s,r)),s}if(arguments[0]instanceof B&&R(arguments[1],m)){var o=arguments[0],a=arguments[1];return o instanceof Ct?a.add(o):o.apply(new Rn(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&R(arguments[0],m)&&R(arguments[1],m)){for(var u=arguments[1],l=arguments[2],e=arguments[0].iterator();e.hasNext();){n=e.next();Rn.getLines(n,u,l)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof B&&R(arguments[1],m)){o=arguments[1],a=arguments[2];return arguments[0].apply(new Rn(o,a)),o}}},e(Tn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Ie]},getClass:function(){return Tn}}),e(Pn.prototype,{locate:function(t){var e=new Kt(t),n=new bn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[fn]},getClass:function(){return Pn}}),e(bn.prototype,{visitItem:function(t){this.counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},interfaces_:function(){return[Ie]},getClass:function(){return bn}}),e(On.prototype,{init:function(t){for(var e=Rn.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new Jt(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Tn;return this.index.query(t,e,n),n.getItems()}3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.index.query(t,e,n))},interfaces_:function(){return[]},getClass:function(){return On}}),Pn.SegmentVisitor=bn,Pn.IntervalIndexedGeometry=On,e(_n.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){return this.compare(t.segmentIndex,t.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[i]},getClass:function(){return _n}}),e(Mn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(i);i||n--;var r=new Array(n).fill(null),s=0;r[s++]=new d(t.coord);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r[s++]=this.edge.pts[o];return i&&(r[s]=e.coord),new Gn(r,new Je(this.edge.label))},add:function(t,e,n){e=new _n(t,e,n),n=this.nodeMap.get(e);return null!==n?n:(this.nodeMap.put(e,e),e)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Mn}}),e(Dn.prototype,{getChainStartIndices:function(t){var e=0,n=new I;n.add(new b(e));do{var i=this.findChainEnd(t,e)}while(n.add(new b(i)),(e=i)<t.length-1);return Dn.toIntArray(n)},findChainEnd:function(t,e){for(var n=Ge.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){if(Ge.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Dn}}),Dn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(An.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,t=this.pts[this.startIndex[t+1]].x;return t<e?e:t},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,t=this.pts[this.startIndex[t+1]].x;return e<t?e:t},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],t=this.pts[r],e=this.pts[s],n=o.pts[a],i=o.pts[u];if(s-r==1&&u-a==1)return l.addIntersections(this.e,r,o.e,a),null;if(this.env1.init(t,e),this.env2.init(n,i),!this.env1.intersects(this.env2))return null;n=Math.trunc((r+s)/2),i=Math.trunc((a+u)/2);r<n&&(a<i&&this.computeIntersectsForChain(r,n,o,a,i,l),i<u&&this.computeIntersectsForChain(r,n,o,i,u,l)),n<s&&(a<i&&this.computeIntersectsForChain(n,s,o,a,i,l),i<u&&this.computeIntersectsForChain(n,s,o,i,u,l))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return An}}),e(Fn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==Fn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Fn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],n=arguments[1];return this.depth[i][n]===Fn.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][Ke.RIGHT]-this.depth[t][Ke.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?L.EXTERIOR:L.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){var t,e;if(1===arguments.length)for(var n=arguments[0],i=0;i<2;i++)for(var r=1;r<3;r++){var s=n.getLocation(i,r);s!==L.EXTERIOR&&s!==L.INTERIOR||(this.isNull(i,r)?this.depth[i][r]=Fn.depthAtLocation(s):this.depth[i][r]+=Fn.depthAtLocation(s))}else 3===arguments.length&&(t=arguments[0],e=arguments[1],arguments[2]===L.INTERIOR&&this.depth[t][e]++)},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:Fn.NULL_VALUE},Fn.NULL_VALUE=-1,a(Gn,en),e(Gn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Gn(t,Je.toLineLabel(this.label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Gn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(e.pts[s])||(n=!1),this.pts[s].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Gn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new An(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new C;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new d(t.getIntersection(i)),e=e,t=t.getEdgeDistance(n,i),n=e+1;n<this.pts.length&&(i=this.pts[n],r.equals2D(i)&&(e=n,t=0)),this.eiList.add(r,e,t)},toString:function(){var t=new P;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.updateIM=function(){if(2!==arguments.length)return en.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Ke.ON),t.getLocation(1,Ke.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Ke.LEFT),t.getLocation(1,Ke.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Ke.RIGHT),t.getLocation(1,Ke.RIGHT),2))},a(qn,un),e(qn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e).getLabel(),e=1;n.getLocation(t,Ke.ON)===L.BOUNDARY&&e++;e=qn.determineBoundary(this.boundaryNodeRule,e);n.setLocation(t,e)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],t=new En(arguments[0],!0,!1);t.setIsDoneIfProperInt(i);e=this.createEdgeSetIntersector(),i=this.parentGeom instanceof Pt||this.parentGeom instanceof Rt||this.parentGeom instanceof bt,i=n||!i;return e.computeIntersections(this.edges,t,i),this.addSelfIntersectionNodes(this.argIndex),t}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){n=new En(e,n,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,n),n},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){var t;arguments[0]instanceof wt?(t=arguments[0].getCoordinate(),this.insertPoint(this.argIndex,t,L.INTERIOR)):arguments[0]instanceof d&&(t=arguments[0],this.insertPoint(this.argIndex,t,L.INTERIOR))},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,L.INTERIOR,L.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);t=t.getCoordinates();this.insertPoint(this.argIndex,t[0],L.BOUNDARY),this.insertPoint(this.argIndex,t[t.length-1],L.BOUNDARY)},addLineString:function(t){var e=H.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Gn(e,new Je(this.argIndex,L.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),l.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===L.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=H.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,s=n;Zt.isCCW(i)&&(r=n,s=e);s=new Gn(i,new Je(this.argIndex,L.BOUNDARY,r,s));this.lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this.argIndex,i[0],L.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),e=i.getLabel();null===e?i.label=new Je(t,n):e.setLocation(t,n)},createEdgeSetIntersector:function(){return new In},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var s=r.next();this.addSelfIntersectionNode(t,s.coord,i)}},add:function(){if(1!==arguments.length)return un.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof bt&&(this.useBoundaryDeterminationRule=!1),t instanceof Rt)this.addPolygon(t);else if(t instanceof Ct)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof Tt)this.addCollection(t);else if(t instanceof gt)this.addCollection(t);else if(t instanceof bt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return R(this.parentGeom,Lt)&&50<this.parentGeom.getNumGeometries()?(null===this.areaPtLocator&&(this.areaPtLocator=new Pn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1!==arguments.length)return un.prototype.findEdge.apply(this,arguments);var t=arguments[0];return this.lineEdgeMap.get(t)},interfaces_:function(){return[]},getClass:function(){return qn}}),qn.determineBoundary=function(t,e){return t.isInBoundary(e)?L.BOUNDARY:L.INTERIOR},e(Bn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Bn}}),e(zn.prototype,{compareTo:function(t){return zn.compareOriented(this.pts,this._orientation,t.pts,t._orientation)},interfaces_:function(){return[i]},getClass:function(){return zn}}),zn.orientation=function(t){return 1===H.increasingDirection(t)},zn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=r)===o,h=(l+=s)===a;if(c&&!h)return-1;if(!c&&h)return 1;if(c&&h)return 0}},e(Vn.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);0<e&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)0<r&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){t=new zn(t.getCoordinates());return this.ocaMap.get(t)},add:function(t){this.edges.add(t);var e=new zn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Vn}}),a(kn,Bn),e(kn.prototype,{insertUniqueEdge:function(t){var e,n,i=this.edgeList.findEqualEdge(t);null!==i?(e=i.getLabel(),n=t.getLabel(),i.isPointwiseEqual(t)||(n=new Je(t.getLabel())).flip(),(i=i.getDepth()).isNull()&&i.add(e),i.add(n),e.merge(n)):this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new I;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?kn.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this.ptLocator.locate(t,i)!==L.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new I,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new I;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),We.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();e=new ln(this.geomFact);e.add(this.graph),this.resultPolyList=e.getPolygons();e=new hn(this,this.geomFact,this.ptLocator);this.resultLineList=e.build(t);e=new cn(this,this.geomFact,this.ptLocator);this.resultPointList=e.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&kn.isResultOfOp(i.getLocation(0,Ke.RIGHT),i.getLocation(1,Ke.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(l.isTrue(!i.isNull(r,Ke.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ke.LEFT,i.getLocation(r,Ke.LEFT)),l.isTrue(!i.isNull(r,Ke.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ke.RIGHT,i.getLocation(r,Ke.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return kn}}),kn.overlayOp=function(t,e,n){return new kn(t,e).getResultGeometry(n)},kn.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return kn.createEmptyResult(kn.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return je.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,kn.INTERSECTION)},kn.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return kn.createEmptyResult(kn.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,kn.SYMDIFFERENCE)},kn.resultDimension=function(t,e,n){var i=e.getDimension(),e=n.getDimension(),n=-1;switch(t){case kn.INTERSECTION:n=Math.min(i,e);break;case kn.UNION:n=Math.max(i,e);break;case kn.DIFFERENCE:n=i;break;case kn.SYMDIFFERENCE:n=Math.max(i,e)}return n},kn.createEmptyResult=function(t,e,n,i){var r=null;switch(kn.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},kn.difference=function(t,e){return t.isEmpty()?kn.createEmptyResult(kn.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,kn.DIFFERENCE))},kn.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),t=t.getLocation(1);return kn.isResultOfOp(n,t,e)}if(3===arguments.length){t=arguments[0],e=arguments[1];switch(t===L.BOUNDARY&&(t=L.INTERIOR),e===L.BOUNDARY&&(e=L.INTERIOR),arguments[2]){case kn.INTERSECTION:return t===L.INTERIOR&&e===L.INTERIOR;case kn.UNION:return t===L.INTERIOR||e===L.INTERIOR;case kn.DIFFERENCE:return t===L.INTERIOR&&e!==L.INTERIOR;case kn.SYMDIFFERENCE:return t===L.INTERIOR&&e!==L.INTERIOR||t!==L.INTERIOR&&e===L.INTERIOR}return!1}},kn.INTERSECTION=1,kn.UNION=2,kn.DIFFERENCE=3,kn.SYMDIFFERENCE=4,e(Yn.prototype,{selfSnap:function(t){return new ae(t).snapTo(t,this.snapTolerance)},removeCommonBits:function(t){this.cbr=new he,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),t=kn.overlayOp(e[0],e[1],t);return this.prepareResult(t)},checkValid:function(t){t.isValid()||A.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=ae.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){t=this.removeCommonBits(t);return ae.snap(t[0],t[1],this.snapTolerance)},interfaces_:function(){return[]},getClass:function(){return Yn}}),Yn.overlayOp=function(t,e,n){return new Yn(t,e).getResultGeometry(n)},Yn.union=function(t,e){return Yn.overlayOp(t,e,kn.UNION)},Yn.intersection=function(t,e){return Yn.overlayOp(t,e,kn.INTERSECTION)},Yn.symDifference=function(t,e){return Yn.overlayOp(t,e,kn.SYMDIFFERENCE)},Yn.difference=function(t,e){return Yn.overlayOp(t,e,kn.DIFFERENCE)},e(Un.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=kn.overlayOp(this.geom[0],this.geom[1],t);n=!0}catch(t){if(!(t instanceof p))throw t;i=t}if(!n)try{e=Yn.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof p?i:t}return e},interfaces_:function(){return[]},getClass:function(){return Un}}),Un.overlayOp=function(t,e,n){return new Un(t,e).getResultGeometry(n)},Un.union=function(t,e){return Un.overlayOp(t,e,kn.UNION)},Un.intersection=function(t,e){return Un.overlayOp(t,e,kn.INTERSECTION)},Un.symDifference=function(t,e){return Un.overlayOp(t,e,kn.SYMDIFFERENCE)},Un.difference=function(t,e){return Un.overlayOp(t,e,kn.DIFFERENCE)},e(Xn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);e=0===i.getLength()?(n=0,i.getCoordinate()):(t=Un.overlayOp(i,t,kn.INTERSECTION),n=(t=this.widestGeometry(t)).getEnvelopeInternal().getWidth(),Xn.centre(t.getEnvelopeInternal())),(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ft){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof B){var i=arguments[0];return i instanceof ft?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),t=Hn.getBisectorY(t);return this.factory.createLineString([new d(e.getMinX(),t),new d(e.getMaxX(),t)])},add:function(t){if(t instanceof Rt)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.centre=function(t){return new d(Xn.avg(t.getMinX(),t.getMaxX()),Xn.avg(t.getMinY(),t.getMaxY()))},Xn.avg=function(t,e){return(t+e)/2},e(Hn.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));return Xn.avg(this.hiY,this.loY)},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return Hn}}),Hn.getBisectorY=function(t){return new Hn(t).getBisectorY()},Xn.SafeBisectorFinder=Hn,e(Wn.prototype,{addEndpoints:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof Ct)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else{arguments[0]instanceof Array&&(t=arguments[0],this.add(t[0]),this.add(t[t.length-1]))}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof Ct)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new d(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Wn}}),e(jn.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof wt)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else{var i;arguments[0]instanceof d&&((t=(i=arguments[0]).distance(this.centroid))<this.minDistance&&(this.interiorPoint=new d(i),this.minDistance=t))}},interfaces_:function(){return[]},getClass:function(){return jn}}),e(Kn.prototype,{interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.toDegrees=function(t){return 180*t/Math.PI},Kn.normalize=function(t){for(;t>Math.PI;)t-=Kn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Kn.PI_TIMES_2;return t},Kn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],t=n.x-e.x,e=n.y-e.y;return Math.atan2(e,t)}},Kn.isAcute=function(t,e,n){var i=t.x-e.x,t=t.y-e.y;return 0<i*(n.x-e.x)+t*(n.y-e.y)},Kn.isObtuse=function(t,e,n){var i=t.x-e.x,t=t.y-e.y;return i*(n.x-e.x)+t*(n.y-e.y)<0},Kn.interiorAngle=function(t,e,n){t=Kn.angle(e,t),n=Kn.angle(e,n);return Math.abs(n-t)},Kn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Kn.PI_TIMES_2;Kn.PI_TIMES_2<=t&&(t=0)}else{for(;Kn.PI_TIMES_2<=t;)t-=Kn.PI_TIMES_2;t<0&&(t=0)}return t},Kn.angleBetween=function(t,e,n){t=Kn.angle(e,t),n=Kn.angle(e,n);return Kn.diff(t,n)},Kn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Kn.toRadians=function(t){return t*Math.PI/180},Kn.getTurn=function(t,e){t=Math.sin(e-t);return 0<t?Kn.COUNTERCLOCKWISE:t<0?Kn.CLOCKWISE:Kn.NONE},Kn.angleBetweenOriented=function(t,e,n){t=Kn.angle(e,t),t=Kn.angle(e,n)-t;return t<=-Math.PI?t+Kn.PI_TIMES_2:t>Math.PI?t-Kn.PI_TIMES_2:t},Kn.PI_TIMES_2=2*Math.PI,Kn.PI_OVER_2=Math.PI/2,Kn.PI_OVER_4=Math.PI/4,Kn.COUNTERCLOCKWISE=Zt.COUNTERCLOCKWISE,Kn.CLOCKWISE=Zt.CLOCKWISE,Kn.NONE=Zt.COLLINEAR,e(Zn.prototype,{area:function(){return Zn.area(this.p0,this.p1,this.p2)},signedArea:function(){return Zn.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new c;return Zn.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Zn.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Zn.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Zn.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Zn.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Zn.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Zn.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Zn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Zn.det=function(t,e,n,i){return t*i-e*n},Zn.interpolateZ=function(t,e,n,i){var r=e.x,s=e.y,o=n.x-r,a=i.x-r,u=n.y-s,l=i.y-s,h=o*l-a*u,r=t.x-r,s=t.y-s,a=(l*r-a*s)/h,h=(-u*r+o*s)/h;return e.z+a*(n.z-e.z)+h*(i.z-e.z)},Zn.longestSideLength=function(t,e,n){var i=t.distance(e),e=e.distance(n),t=n.distance(t),i=i;return i<e&&(i=e),i<t&&(i=t),i},Zn.isAcute=function(t,e,n){return!(!Kn.isAcute(t,e,n)||!Kn.isAcute(e,n,t))&&!!Kn.isAcute(n,t,e)},Zn.circumcentre=function(t,e,n){var i=n.x,r=n.y,s=t.x-i,o=t.y-r,n=e.x-i,t=e.y-r,e=2*Zn.det(s,o,n,t);return new d(i-Zn.det(o,s*s+o*o,t,n*n+t*t)/e,r+Zn.det(s,s*s+o*o,n,n*n+t*t)/e)},Zn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,e=new F(t.x+n/2,t.y+i/2,1),i=new F(t.x-i+n/2,t.y+n+i/2,1);return new F(e,i)},Zn.angleBisector=function(t,e,n){var i=e.distance(t),i=i/(i+e.distance(n)),e=n.x-t.x,n=n.y-t.y;return new d(t.x+i*e,t.y+i*n)},Zn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.z-t.z,o=n.x-t.x,e=n.y-t.y,n=n.z-t.z,t=r*n-s*e,n=s*o-i*n,o=i*e-r*o,o=t*t+n*n+o*o;return Math.sqrt(o)/2},Zn.centroid=function(t,e,n){return new d((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Zn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s;return new d((i*t.x+r*e.x+s*n.x)/o,(i*t.y+r*e.y+s*n.y)/o)},e(Jn.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new d(t[0])],null}var e=this.input.convexHull().getCoordinates(),t=e;if(e[0].equals2D(e[e.length-1])&&(t=new Array(e.length-1).fill(null),H.copyDeep(e,0,t,0,e.length-1)),t.length<=2)return this.extremalPts=H.copyDeep(t),null;for(var n=Jn.lowestPoint(t),i=Jn.pointWitMinAngleWithX(t,n),r=0;r<t.length;r++){var s=Jn.pointWithMinAngleWithSegment(t,n,i);if(Kn.isObtuse(n,s,i))return this.extremalPts=[new d(n),new d(i)],null;if(Kn.isObtuse(s,n,i))n=s;else{if(!Kn.isObtuse(s,i,n))return this.extremalPts=[new d(n),new d(i),new d(s)],null;i=s}}l.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new d((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Zn.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.pointWitMinAngleWithX=function(t,e){for(var n=g.MAX_VALUE,i=null,r=0;r<t.length;r++){var s,o,a=t[r];a!==e&&(s=a.x-e.x,(o=a.y-e.y)<0&&(o=-o),(o=o/Math.sqrt(s*s+o*o))<n&&(n=o,i=a))}return i},Jn.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Jn.pointWithMinAngleWithSegment=function(t,e,n){for(var i=g.MAX_VALUE,r=null,s=0;s<t.length;s++){var o,a=t[s];a===e||a===n||(o=Kn.angleBetween(e,a,n))<i&&(i=o,r=a)}return r},e(Qn.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=(t instanceof Rt?t.getExteriorRing():t).getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=g.MAX_VALUE;for(var e=1,n=new Jt,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;var t;this.isConvex?this.computeWidthConvex(this.inputGeom):(t=new ie(this.inputGeom).getConvexHull(),this.computeWidthConvex(t))},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,s=n,o=s;i<=r;)i=r,s=o,o=Qn.nextIndex(t,s),r=e.distancePerpendicular(t[o]);return i<this.minWidth&&(this.minPtIndex=s,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new Jt(e)),s},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=g.MAX_VALUE,i=-g.MAX_VALUE,r=g.MAX_VALUE,s=-g.MAX_VALUE,o=0;o<this.convexHullPts.length;o++){var a=Qn.computeC(t,e,this.convexHullPts[o]);i<a&&(i=a),a<n&&(n=a);a=Qn.computeC(-e,t,this.convexHullPts[o]);s<a&&(s=a),a<r&&(r=a)}var u=Qn.computeSegmentForLine(-t,-e,s),l=Qn.computeSegmentForLine(-t,-e,r),h=Qn.computeSegmentForLine(-e,t,i),c=Qn.computeSegmentForLine(-e,t,n),f=h.lineIntersection(u),u=c.lineIntersection(u),c=c.lineIntersection(l),l=h.lineIntersection(l),f=this.inputGeom.getFactory().createLinearRing([f,u,c,l,f]);return this.inputGeom.getFactory().createPolygon(f,null)},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},Qn.computeC=function(t,e,n){return t*n.y-e*n.x},Qn.getMinimumDiameter=function(t){return new Qn(t).getDiameter()},Qn.getMinimumRectangle=function(t){return new Qn(t).getMinimumRectangle()},Qn.computeSegmentForLine=function(t,e,n){var i=null,r=null,r=Math.abs(e)>Math.abs(t)?(i=new d(0,n/e),new d(1,n/e-t/e)):(i=new d(n/t,0),new d(n/t-e/t,1));return new Jt(i,r)};var Js=Object.freeze({Centroid:$t,CGAlgorithms:Zt,ConvexHull:ie,InteriorPointArea:Xn,InteriorPointLine:Wn,InteriorPointPoint:jn,RobustLineIntersector:Wt,MinimumBoundingCircle:Jn,MinimumDiameter:Qn});e($n.prototype,{getResultGeometry:function(){return new ti(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new c;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.densifyPoints=function(t,e,n){for(var i=new Jt,r=new N,s=0;s<t.length-1;s++){i.p0=t[s],i.p1=t[s+1],r.add(i.p0,!1);var o=i.getLength(),a=Math.trunc(o/e)+1;if(1<a)for(var u=o/a,l=1;l<a;l++){var h=l*u/o,h=i.pointAlong(h);n.makePrecise(h),r.add(h,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},$n.densify=function(t,e){t=new $n(t);return t.setDistanceTolerance(e),t.getResultGeometry()},a(ti,se),e(ti.prototype,{transformMultiPolygon:function(t,e){e=se.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(e)},transformPolygon:function(t,e){t=se.prototype.transformPolygon.call(this,t,e);return e instanceof bt?t:this.createValidArea(t)},transformCoordinates:function(t,e){t=t.toCoordinateArray(),t=$n.densifyPoints(t,this.distanceTolerance,e.getPrecisionModel());return e instanceof Ct&&1===t.length&&(t=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(t)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return ti}}),$n.DensifyTransformer=ti;var Qs=Object.freeze({Densifier:$n});e(ei.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e}while((e=e.oNext())!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext();if(i.compareTo(t)!==e||i===this)return n.insertAfter(t),null}while((n=i)!==this);l.shouldNeverReachHere()},insertAfter:function(t){l.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){for(var t=0,e=this;t++,(e=e.oNext())!==this;);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;n=Ge.quadrant(e,n),r=Ge.quadrant(i,r);return r<n?1:n<r?-1:Zt.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){return this.compareAngularDirection(t)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return ei}}),ei.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},ei.create=function(t,e){t=new ei(t),e=new ei(e);return t.init(e),t},a(ni,ei),e(ni.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return ni}}),ni.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},ni.isMarked=function(t){return t.isMarked()},ni.setMark=function(t,e){t.setMark(e)},ni.markBoth=function(t){t.mark(),t.sym().mark()},ni.mark=function(t){t.mark()},e(ii.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);t=this.vertexMap.get(e);return null!==t?t.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){t=this.createEdge(t),e=this.createEdge(e);return ei.init(t,e),t},createEdge:function(t){return new ei(t)},addEdge:function(t,e){if(!ii.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;return null!==n&&(i=n.find(e)),null!==i?i:this.insert(t,e,n)},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){t=this.vertexMap.get(t);return null===t?null:t.find(e)},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.isValidEdge=function(t,e){return 0!==e.compareTo(t)},a(ri,ni),e(ri.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return ri}}),a(si,ii),e(si.prototype,{createEdge:function(t){return new ri(t)},interfaces_:function(){return[]},getClass:function(){return si}}),e(oi.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new N,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new N,n=t;for(this.ringStartEdge=null,ni.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),ni.markBoth(n=i)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){for(var e=t;ni.isMarked(e)||this.nodeEdgeStack.add(e),(e=e.oNext())!==t;);},computeResult:function(){for(var t=this.graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();ni.isMarked(e)||this.process(e)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();ni.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof B)arguments[0].apply({interfaces_:function(){return[q]},filter:function(t){t instanceof Ct&&this.add(t)}});else if(R(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof Ct){var n=arguments[0];null===this.factory&&(this.factory=n.getFactory());for(var i=n.getCoordinateSequence(),r=!1,t=1;t<i.size();t++){var s=this.graph.addEdge(i.getCoordinate(t-1),i.getCoordinate(t));null!==s&&(r||(s.setStart(),r=!0))}}},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.dissolve=function(t){var e=new oi;return e.add(t),e.getResult()};var $s=Object.freeze({LineDissolver:oi});e(ai.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n=n||this.items.remove(e)},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t,e=0,n=0;n<4;n++){null===this.subnode[n]||e<(t=this.subnode[n].depth())&&(e=t)}return e+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[o]},getClass:function(){return ai}}),ai.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},ui.exponent=function(t){return function(t,e){var n,i,r,s,o={32:8,64:11}[t];if(s||(n=e<0||1/e<0,isFinite(e)||(s={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[t],n&&(s.d+=1<<t/4-1),i=Math.pow(2,o)-1,r=0)),!s){for(i={32:127,64:1023}[t],r=Math.abs(e);2<=r;)i++,r/=2;for(;r<1&&0<i;)i--,r*=2;i<=0&&(r/=2),32===t&&254<i&&(s={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,o)-1,r=0)}return i}(64,t)-1023},ui.powerOf2=function(t){return Math.pow(2,t)},e(li.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=li.computeQuadLevel(t),this.env=new C,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else{var e,n;2===arguments.length&&(e=arguments[1],n=ui.powerOf2(arguments[0]),this.pt.x=Math.floor(e.getMinX()/n)*n,this.pt.y=Math.floor(e.getMinY()/n)*n,this.env.init(this.pt.x,this.pt.x+n,this.pt.y,this.pt.y+n))}},getEnvelope:function(){return this.env},getCentre:function(){return new d((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return li}}),li.computeQuadLevel=function(t){var e=t.getWidth(),t=t.getHeight();return ui.exponent(t<e?e:t)+1},a(hi,ai),e(hi.prototype,{find:function(t){var e=ai.getSubnodeIndex(t,this.centrex,this.centrey);return-1===e||null===this.subnode[e]?this:this.subnode[e].find(t)},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=ai.getSubnodeIndex(t,this.centrex,this.centrey);return-1===e?this:this.getSubnode(e).getNode(t)},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}return new hi(new C(e,n,i,r),this.level-1)},insertNode:function(t){l.isTrue(null===this.env||this.env.contains(t.env));var e,n=ai.getSubnodeIndex(t.env,this.centrex,this.centrey);t.level===this.level-1?this.subnode[n]=t:((e=this.createSubnode(n)).insertNode(t),this.subnode[n]=e)},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.createNode=function(t){t=new li(t);return new hi(t.getEnvelope(),t.getLevel())},hi.createExpanded=function(t,e){e=new C(e);null!==t&&e.expandToInclude(t.env);e=hi.createNode(e);return null!==t&&e.insertNode(t),e},e(ci.prototype,{interfaces_:function(){return[]},getClass:function(){return ci}}),ci.isZeroWidth=function(t,e){var n=e-t;if(0==n)return!0;e=Math.max(Math.abs(t),Math.abs(e));return ui.exponent(n/e)<=ci.MIN_BINARY_EXPONENT},ci.MIN_BINARY_EXPONENT=-50,a(fi,ai),e(fi.prototype,{insert:function(t,e){var n=ai.getSubnodeIndex(t,fi.origin.x,fi.origin.y);if(-1===n)return this.add(e),null;var i=this.subnode[n];null!==i&&i.getEnvelope().contains(t)||(i=hi.createExpanded(i,t),this.subnode[n]=i),this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){l.isTrue(t.getEnvelope().contains(e));var i=ci.isZeroWidth(e.getMinX(),e.getMaxX()),r=ci.isZeroWidth(e.getMinY(),e.getMaxY());(i||r?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.origin=new d(0,0),e(gi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);t=gi.ensureExtent(t,this.minExtent);this.root.insert(t,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Tn;return this.query(t,e),e.getItems()}2===arguments.length&&(t=arguments[0],e=arguments[1],this.root.visit(t,e))},queryAll:function(){var t=new I;return this.root.addAllItems(t),t},remove:function(t,e){t=gi.ensureExtent(t,this.minExtent);return this.root.remove(t,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&0<e&&(this.minExtent=e);t=t.getHeight();t<this.minExtent&&0<t&&(this.minExtent=t)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[Ne,o]},getClass:function(){return gi}}),gi.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),s=t.getMaxY();return n!==i&&r!==s?t:(n===i&&(i=(n-=e/2)+e/2),r===s&&(s=(r-=e/2)+e/2),new C(n,i,r,s))},gi.serialVersionUID=-0x678b60c967a25400;var to=Object.freeze({Quadtree:gi}),eo=Object.freeze({STRtree:Re}),no=Object.freeze({quadtree:to,strtree:eo}),io=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(di.prototype,{read:function(t){var e=void 0,t=(e="string"==typeof t?JSON.parse(t):t).type;if(!ro[t])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==io.indexOf(t)?ro[t].apply(this,[e.coordinates]):"GeometryCollection"===t?ro[t].apply(this,[e.geometries]):ro[t].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!so[e])throw new Error("Geometry is not supported");return so[e].apply(this,[t])}});var ro={Feature:function(t){var e,n={};for(e in t)n[e]=t[e];if(t.geometry){var i=t.geometry.type;if(!ro[i])throw new Error("Unknown GeoJSON type: "+t.type);n.geometry=this.read(t.geometry)}return t.bbox&&(n.bbox=ro.bbox.apply(this,[t.bbox])),n},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new d(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new d(t[0],t[1]),new d(t[2],t[1]),new d(t[2],t[3]),new d(t[0],t[3]),new d(t[0],t[1])])},Point:function(t){t=new d(t[0],t[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ro.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){t=ro.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(t)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ro.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ro.coordinates.apply(this,[t[0]]),e=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var r=t[i],r=ro.coordinates.apply(this,[r]),r=this.geometryFactory.createLinearRing(r);n.push(r)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(ro.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},so={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:so.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],i=so.Point.apply(this,[i]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(so.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],i=so.LineString.apply(this,[i]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=so.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],r=so.LineString.apply(this,[r]);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],i=so.Polygon.apply(this,[i]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(so[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(pi.prototype,{read:function(t){t=this.parser.read(t);return this.precisionModel.getType()===Vt.FIXED&&this.reducePrecision(t),t},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),e(mi.prototype,{write:function(t){return this.parser.write(t)}}),e(yi.prototype,{read:function(t){t=this.parser.read(t);return this.precisionModel.getType()===Vt.FIXED&&this.reducePrecision(t),t},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;i<r;i++)this.reducePrecision(t.geometries[i])}}),e(xi.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){t=t.getCoordinates();return this.geometryFactory.createPoint(new d(t[0],t[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new d(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new d(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var s=this.convertFromLinearRing(e[r]);0===r?n=s:i.push(s)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){t=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(t)},convertFromMultiLineString:function(t){t=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(t)},convertFromMultiPolygon:function(t){t=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(t)},convertFromCollection:function(t){t=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(t)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){t=t.points.coordinates.map(vi);return new ol.geom.LineString(t)},convertToLinearRing:function(t){t=t.points.coordinates.map(vi);return new ol.geom.LinearRing(t)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(vi)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(vi));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(vi))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new ol.geom.GeometryCollection(e)}});var oo=Object.freeze({GeoJSONReader:pi,GeoJSONWriter:mi,OL3Parser:xi,WKTReader:yi,WKTWriter:Xt});e(Ei.prototype,{rescale:function(){if(R(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){var n=arguments[0];2===n.length&&(new d(n[0]),new d(n[1]));for(t=0;t<n.length;t++)n[t].x=n[t].x/this.scaleFactor+this.offsetX,n[t].y=n[t].y/this.scaleFactor+this.offsetY;2===n.length&&n[0].equals2D(n[1])&&A.out.println(n)}},scale:function(){if(R(arguments[0],m)){for(var t=arguments[0],e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new De(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),n=0;n<r.length;n++)s[n]=new d(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);return H.removeRepeatedPoints(s)}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Be]},getClass:function(){return Ei}});var ao=Object.freeze({MCIndexNoder:Ve,ScaledNoder:Ei,SegmentString:me});e(Ii.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new at,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n).getCoordinate();if(e.contains(i))return this.nonSimpleLocation=i,!1;e.add(i)}return!0},isSimplePolygonal:function(t){for(var e=Rn.getLines(t).iterator();e.hasNext();){var n=e.next();if(!this.isSimpleLinearGeometry(n))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),s=i.getCoordinate(0);this.addEndpoint(e,s,r);i=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,i,r)}for(n=e.values().iterator();n.hasNext();){var o=n.next();if(o.isClosed&&2!==o.degree)return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new qn(0,t),t=new Wt,t=e.computeSelfNodes(t,!0);return!t.hasIntersection()||(t.hasProperIntersection()?(this.nonSimpleLocation=t.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next();if(!s.isEndPoint(i))return this.nonSimpleLocation=s.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new Ni(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof Ct||t instanceof gt?this.isSimpleLinearGeometry(t):t instanceof Tt?this.isSimpleMultiPoint(t):R(t,Lt)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Ii}}),e(Ni.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ii.EndpointInfo=Ni,e(Ci.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Ci.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Ci.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Ci.JOIN_ROUND&&(this.quadrantSegments=Ci.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.bufferDistanceError=function(t){t=Math.PI/2/t;return 1-Math.cos(t/2)},Ci.CAP_ROUND=1,Ci.CAP_FLAT=2,Ci.CAP_SQUARE=3,Ci.JOIN_ROUND=1,Ci.JOIN_MITRE=2,Ci.JOIN_BEVEL=3,Ci.DEFAULT_QUADRANT_SEGMENTS=8,Ci.DEFAULT_MITRE_LIMIT=5,Ci.DEFAULT_SIMPLIFY_FACTOR=.01,e(Si.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();l.isTrue(0<this.minIndex&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=Zt.computeOrientation(this.minCoord,n,e),t=!1;(e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===Zt.COUNTERCLOCKWISE||e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===Zt.CLOCKWISE)&&(t=!0),t&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;t=Ke.LEFT;return n[e].y<n[e+1].y&&(t=Ke.RIGHT),t},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode().getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}l.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===Ke.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Si}}),wi.prototype.addLast=function(t){this.array_.push(t)},wi.prototype.removeFirst=function(){return this.array_.shift()},wi.prototype.isEmpty=function(){return 0===this.array_.length},e(Li.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){if((i=n.next()).isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Ye("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i,n=t.getEdges().iterator();n.hasNext();){(i=n.next()).setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Ke.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Ke.RIGHT)&&e.getDepth(Ke.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Q,n=new wi,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next().getSym();o.isVisited()||(o=o.getNode(),e.contains(o)||(n.addLast(o),e.add(o)))}}},compareTo:function(t){return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new C,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this.env=t}return this.env},addReachable:function(t){var e=new ee;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(Ke.LEFT,t.getDepth(Ke.RIGHT)),e.setDepth(Ke.RIGHT,t.getDepth(Ke.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);i=i.getSym().getNode();i.isVisited()||e.push(i)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[i]},getClass:function(){return Li}}),e(Ri.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],s=this.inputLine[e],e=this.inputLine[n];return!(!this.isConcave(r,s,e)||!this.isShallow(r,s,e,i))&&this.isShallowSampled(r,s,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Ri.DELETE,i=r=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){return Zt.computeOrientation(t,e,n)===this.angleOrientation&&Zt.distancePointLine(e,t,n)<i},isShallowSampled:function(t,e,n,i,r){var s=Math.trunc((i-n)/Ri.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var o=n;o<i;o+=s)if(!this.isShallow(t,e,this.inputLine[o],r))return!1;return!0},isConcave:function(t,e,n){var i=Zt.computeOrientation(t,e,n)===this.angleOrientation;return i},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=Zt.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Ri.DELETE;)e++;return e},isShallow:function(t,e,n,i){return Zt.distancePointLine(e,t,n)<i},collapseLine:function(){for(var t=new N,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Ri.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.simplify=function(t,e){return new Ri(t).simplify(e)},Ri.INIT=0,Ri.DELETE=1,Ri.KEEP=1,Ri.NUM_PTS_TO_CHECK=10,e(Ti.prototype,{getCoordinates:function(){return this.ptList.toArray(Ti.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){t=new d(t);return this.precisionModel.makePrecise(t),this.isRedundant(t)?null:void this.ptList.add(t)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(n=t.length-1;0<=n;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance},toString:function(){return(new Yt).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new d(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return 2<=this.ptList.size()&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(Pi.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=Zt.computeOrientation(this.s0,this.s1,this.s2),t=n===Zt.CLOCKWISE&&this.side===Ke.LEFT||n===Zt.COUNTERCLOCKWISE&&this.side===Ke.RIGHT;0===n?this.addCollinear(e):t?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new Jt(t,e),i=new Jt;this.computeOffsetSegment(n,Ke.LEFT,this.distance,i);var r=new Jt;this.computeOffsetSegment(n,Ke.RIGHT,this.distance,r);n=e.x-t.x,t=e.y-t.y,n=Math.atan2(t,n);switch(this.bufParams.getEndCapStyle()){case Ci.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,n+Math.PI/2,n-Math.PI/2,Zt.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Ci.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Ci.CAP_SQUARE:e=new d;e.x=Math.abs(this.distance)*Math.cos(n),e.y=Math.abs(this.distance)*Math.sin(n);i=new d(i.p1.x+e.x,i.p1.y+e.y),e=new d(r.p1.x+e.x,r.p1.y+e.y);this.segList.addPt(i),this.segList.addPt(e)}},getCoordinates:function(){return this.segList.getCoordinates()},addMitreJoin:function(t,e,n,i){var r=!0,s=null;try{s=F.intersection(e.p0,e.p1,n.p0,n.p1);(i<=0?1:s.distance(t)/Math.abs(i))>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof w))throw t;s=new d(0,0),r=!1}r?this.segList.addPt(s):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s),o=n.x-t.x,s=n.y-t.y,o=Math.atan2(s,o);i===Zt.CLOCKWISE?a<=o&&(a+=2*Math.PI):o<=a&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,o,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Pi.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Ci.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Ci.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new d(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new d(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new d(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new d(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,s=Kn.angle(r,this.seg0.p0),o=(Kn.angle(r,this.seg1.p1),Kn.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1))/2,s=Kn.normalize(s+o),s=Kn.normalize(s+Math.PI),i=i*n,o=n-i*Math.abs(Math.sin(o)),i=new Jt(r,new d(r.x+i*Math.cos(s),r.y+i*Math.sin(s))),s=i.pointAlongOffset(1,o),o=i.pointAlongOffset(1,-o);this.side===Ke.LEFT?(this.segList.addPt(s),this.segList.addPt(o)):(this.segList.addPt(o),this.segList.addPt(s))},computeOffsetSegment:function(t,e,n,i){var r=e===Ke.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,e=Math.sqrt(s*s+o*o),s=r*n*s/e,e=r*n*o/e;i.p0.x=t.p0.x-e,i.p0.y=t.p0.y+s,i.p1.x=t.p1.x-e,i.p1.y=t.p1.y+s},addFilletArc:function(t,e,n,i,r){var s=i===Zt.CLOCKWISE?-1:1,o=Math.abs(e-n),n=Math.trunc(o/this.filletAngleQuantum+.5);if(n<1)return null;for(var a=o/n,u=0,l=new d;u<o;){var h=e+s*u;l.x=t.x+r*Math.cos(h),l.y=t.y+r*Math.sin(h),this.segList.addPt(l),u+=a}},addInsideTurn:function(t,e){var n;this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection()?this.segList.addPt(this.li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Pi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this.segList.addPt(this.offset0.p1):(this.segList.addPt(this.offset0.p1),0<this.closingSegLengthFactor?(n=new d((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1)),this.segList.addPt(n),n=new d((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1)),this.segList.addPt(n)):this.segList.addPt(this.s1),this.segList.addPt(this.offset1.p0)))},createCircle:function(t){var e=new d(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Ti,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Pi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),2<=this.li.getIntersectionNum()&&(this.bufParams.getJoinStyle()===Ci.JOIN_BEVEL||this.bufParams.getJoinStyle()===Ci.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Zt.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Pi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Pi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Pi.MAX_CLOSING_SEG_LEN_FACTOR=80,e(bi.prototype,{getOffsetCurve:function(t,e){if(0===(this.distance=e))return null;var n=e<0,e=Math.abs(e),e=this.getSegGen(e);t.length<=1?this.computePointCurve(t[0],e):this.computeOffsetCurve(t,n,e);e=e.getCoordinates();return n&&H.reverse(e),e},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Ri.simplify(t,-i),e=r.length-1;n.initSideSegments(r[e],r[e-1],Ke.LEFT),n.addFirstSegment();for(var s=e-2;0<=s;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var o=Ri.simplify(t,i),a=o.length-1;n.initSideSegments(o[0],o[1],Ke.LEFT),n.addFirstSegment();for(s=2;s<=a;s++)n.addNextSegment(o[s],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===Ke.RIGHT&&(i=-i);var r=Ri.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var o=1;o<=s;o++){var a=1!==o;n.addNextSegment(r[o],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=Ri.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ke.LEFT);for(var s=2;s<=r;s++)e.addNextSegment(i[s],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var o=Ri.simplify(t,-n),n=o.length-1;e.initSideSegments(o[n],o[n-1],Ke.LEFT);for(s=n-2;0<=s;s--)e.addNextSegment(o[s],!0);e.addLastSegment(),e.addLineEndCap(o[1],o[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Ci.CAP_ROUND:e.createCircle(t);break;case Ci.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if((this.distance=e)<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),n=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],n):this.bufParams.isSingleSided()?(e=e<0,this.computeSingleSidedBufferCurve(t,e,n)):this.computeLineBufferCurve(t,n),n.getCoordinates()},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return bi.copyCoordinates(t);n=this.getSegGen(n);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Ri.simplify(t,-i),e=r.length-1;n.initSideSegments(r[e],r[e-1],Ke.LEFT),n.addFirstSegment();for(var s=e-2;0<=s;s--)n.addNextSegment(r[s],!0)}else{var o=Ri.simplify(t,i),a=o.length-1;n.initSideSegments(o[0],o[1],Ke.LEFT),n.addFirstSegment();for(s=2;s<=a;s++)n.addNextSegment(o[s],!0)}n.addLastSegment()},getSegGen:function(t){return new Pi(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return bi}}),bi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new d(t[n]);return e},e(Oi.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new I,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(R(arguments[2],v)&&arguments[0]instanceof d&&arguments[1]instanceof on)for(var s=arguments[0],o=arguments[1],a=arguments[2],u=o.getEdge().getCoordinates(),n=0;n<u.length-1;n++){var l;this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse(),Math.max(this.seg.p0.x,this.seg.p1.x)<s.x||this.seg.isHorizontal()||s.y<this.seg.p0.y||s.y>this.seg.p1.y||Zt.computeOrientation(this.seg.p0,this.seg.p1,s)===Zt.RIGHT||(l=o.getDepth(Ke.LEFT),this.seg.p0.equals(u[n])||(l=o.getDepth(Ke.RIGHT)),l=new _i(this.seg,l),a.add(l))}else if(R(arguments[2],v)&&arguments[0]instanceof d&&R(arguments[1],v))for(var h=arguments[0],c=arguments[2],n=arguments[1].iterator();n.hasNext();){var f=n.next();f.isForward()&&this.findStabbedSegments(h,f,c)}},getDepth:function(t){t=this.findStabbedSegments(t);return 0===t.size()?0:Zs.min(t).leftDepth},interfaces_:function(){return[]},getClass:function(){return Oi}}),e(_i.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;t=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==t?t:0!==(t=-1*e.upwardSeg.orientationIndex(this.upwardSeg))?t:this.upwardSeg.compareTo(e.upwardSeg)},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[i]},getClass:function(){return _i}}),Oi.DepthSegment=_i,e(Mi.prototype,{addPoint:function(t){if(this.distance<=0)return null;t=t.getCoordinates(),t=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(t,L.EXTERIOR,L.INTERIOR)},addPolygon:function(t){var e=this.distance,n=Ke.LEFT;this.distance<0&&(e=-this.distance,n=Ke.RIGHT);var i=t.getExteriorRing(),r=H.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,L.EXTERIOR,L.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),a=H.removeRepeatedPoints(o.getCoordinates());0<this.distance&&this.isErodedCompletely(o,-this.distance)||this.addPolygonRing(a,e,Ke.opposite(n),L.INTERIOR,L.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Zn(t[0],t[1],t[2]),t=n.inCentre();return Zt.distancePointLine(t,n.p0,n.p1)<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;t=H.removeRepeatedPoints(t.getCoordinates()),t=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(t,L.EXTERIOR,L.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;n=new De(t,new Je(0,L.BOUNDARY,e,n));this.curveList.add(n)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Pt.MINIMUM_VALID_SIZE)return null;var s=i,o=r;t.length>=Pt.MINIMUM_VALID_SIZE&&Zt.isCCW(t)&&(s=r,o=i,n=Ke.opposite(n));e=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(e,s,o)},add:function(t){if(t.isEmpty())return null;if(t instanceof Rt)this.addPolygon(t);else if(t instanceof Ct)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof Tt)this.addCollection(t);else if(t instanceof gt)this.addCollection(t);else if(t instanceof bt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);t=t.getEnvelopeInternal(),t=Math.min(t.getHeight(),t.getWidth());return e<0&&2*Math.abs(e)>t},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Mi}}),e(Di.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(Di.isAdjacentSegments(e,i))return!0;if(t.isClosed()){t=t.size()-1;if(0===e&&i===t||0===i&&e===t)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Ue]},getClass:function(){return Di}}),Di.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(Ai.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e,n,i=this.edgeList.findEqualEdge(t);null!==i?(e=i.getLabel(),n=t.getLabel(),i.isPointwiseEqual(t)||(n=new Je(t.getLabel())).flip(),e.merge(n),n=Ai.depthDelta(n),n=i.getDepthDelta()+n,i.setDepthDelta(n)):(this.edgeList.add(t),t.setDepthDelta(Ai.depthDelta(t.getLabel())))},buildSubgraphs:function(t,e){for(var n=new I,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),s=new Oi(n).getDepth(s);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new I,n=t.getNodes().iterator();n.hasNext();){var i,r=n.next();r.isVisited()||((i=new Li).create(r),e.add(i))}return Zs.sort(e,Zs.reverseOrder()),e},createEmptyResultGeometry:function(){return this.geomFact.createPolygon()},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new Ve,n=new Wt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Di(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();e=new Mi(t,e,new bi(n,this.bufParams)).getCurves();if(e.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(e,n),this.graph=new un(new mn),this.graph.addEdges(this.edgeList.getEdges());e=this.createSubgraphs(this.graph),n=new ln(this.geomFact);this.buildSubgraphs(e,n);n=n.getPolygons();return n.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(n)},computeNodedEdges:function(t,e){e=this.getNoder(e);e.computeNodes(t);for(var n=e.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();2===r.length&&r[0].equals2D(r[1])||(r=i.getData(),r=new Gn(i.getCoordinates(),new Je(r)),this.insertUniqueEdge(r))}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Ai}}),Ai.depthDelta=function(t){var e=t.getLocation(0,Ke.LEFT),t=t.getLocation(0,Ke.RIGHT);return e===L.INTERIOR&&t===L.EXTERIOR?1:e===L.EXTERIOR&&t===L.INTERIOR?-1:0},Ai.convertSegStrings=function(t){for(var e=new Yt,n=new I;t.hasNext();){var i=t.next(),i=e.createLineString(i.getCoordinates());n.add(i)}return e.buildGeometry(n)},e(Fi.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this.segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this.segStrings)}else if(2===arguments.length)for(var n=arguments[0],t=arguments[1].iterator();t.hasNext();)for(var e=t.next().getCoordinates(),i=1;i<e.length-1;i++)if(e[i].equals(n))throw new p("found endpt/interior pt intersection at index "+i+" :pt "+n)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],o=r.getCoordinates(),a=s.getCoordinates(),u=0;u<o.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,s,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&c===g)return null;var d=h.getCoordinates()[c],h=h.getCoordinates()[c+1],c=f.getCoordinates()[g],g=f.getCoordinates()[g+1];if(this.li.computeIntersection(d,h,c,g),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,d,h)||this.hasInteriorIntersection(this.li,c,g)))throw new p("found non-noded intersection at "+d+"-"+h+" and "+c+"-"+g)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),t=0;t<n.length-2;t++)this.checkCollapse(n[t],n[t+1],n[t+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new p("found non-noded collapse at "+Fi.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.fact=new Yt,e(Gi.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),s=this.maxx<n||this.minx>i||this.maxy<r||this.miny>s;if(s)return!1;e=this.intersectsToleranceSquare(t,e);return l.isTrue(!(s&&e),"Found bad envelope test"),e},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new d(this.maxx,this.maxy),this.corner[1]=new d(this.minx,this.maxy),this.corner[2]=new d(this.minx,this.miny),this.corner[3]=new d(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){var t;return null===this.safeEnv&&(t=Gi.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor,this.safeEnv=new C(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)),this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!n||!i)||(!!t.equals(this.pt)||!!e.equals(this.pt))))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return Gi}}),Gi.SAFE_ENV_EXPANSION_FACTOR=.75,e(qi.prototype,{select:function(){var t;1===arguments.length||2===arguments.length&&(t=arguments[1],arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment))},interfaces_:function(){return[]},getClass:function(){return qi}}),e(Bi.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],t=arguments[2],i=e.getSafeEnvelope(),r=new zi(e,n,t);return this.index.query(i,{interfaces_:function(){return[Ie]},visitItem:function(t){t.select(i,r)}}),r.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Bi}}),a(zi,qi),e(zi.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return qi.prototype.select.apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();return null!==this.parentEdge&&e===this.parentEdge&&t===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(e,t))},interfaces_:function(){return[]},getClass:function(){return zi}}),Bi.HotPixelSnapAction=zi,e(Vi.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Ue]},getClass:function(){return Vi}}),e(ki.prototype,{checkCorrectness:function(t){var e=new Fi(De.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof S))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return De.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){e=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(e),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){e=new Vi(e);return this.noder.setSegmentIntersector(e),this.noder.computeNodes(t),e.getInteriorIntersections()},computeVertexSnaps:function(){if(R(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof De)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var s=new Gi(i[r],this.scaleFactor,this.li);this.pointSnapper.snap(s,n,r)&&n.addIntersection(i[r],r)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Ve,this.pointSnapper=new Bi(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=new Gi(e.next(),this.scaleFactor,this.li);this.pointSnapper.snap(n)}},interfaces_:function(){return[Be]},getClass:function(){return ki}}),e(Yi.prototype,{bufferFixedPrecision:function(t){var e=new Ei(new ki(new Vt(1)),t.getScale()),n=new Ai(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=Yi.MAX_PRECISION_DIGITS;0<=t;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Ye))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}var e;1===arguments.length&&(e=arguments[0],e=new Vt(Yi.precisionScaleFactor(this.argGeom,this.distance,e)),this.bufferFixedPrecision(e))},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Vt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Ai(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof p))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Yi(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2];return(r=new Yi(arguments[0])).setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Ci&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var i=arguments[1];return(r=new Yi(arguments[0],arguments[2])).getResultGeometry(i)}}else if(4===arguments.length){var r,n=arguments[1],e=arguments[2],i=arguments[3];return(r=new Yi(arguments[0])).setQuadrantSegments(e),r.setEndCapStyle(i),r.getResultGeometry(n)}},Yi.precisionScaleFactor=function(t,e,n){t=t.getEnvelopeInternal(),e=T.max(Math.abs(t.getMaxX()),Math.abs(t.getMaxY()),Math.abs(t.getMinX()),Math.abs(t.getMinY()))+2*(0<e?e:0),e=n-Math.trunc(Math.log(e)/Math.log(10)+1);return Math.pow(10,e)},Yi.CAP_ROUND=Ci.CAP_ROUND,Yi.CAP_BUTT=Ci.CAP_FLAT,Yi.CAP_FLAT=Ci.CAP_FLAT,Yi.CAP_SQUARE=Ci.CAP_SQUARE,Yi.MAX_PRECISION_DIGITS=12;var uo=Object.freeze({BufferOp:Yi,BufferParameters:Ci});e(Ui.prototype,{filter:function(t){t instanceof Rt&&this.comps.add(t)},interfaces_:function(){return[ht]},getClass:function(){return Ui}}),Ui.getPolygons=function(){if(1===arguments.length)return Ui.getPolygons(arguments[0],new I);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof Rt?e.add(t):t instanceof ft&&t.apply(new Ui(e)),e}},e(Xi.prototype,{isInsideArea:function(){return this.segIndex===Xi.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.INSIDE_AREA=-1,e(Hi.prototype,{filter:function(t){t instanceof wt&&this.pts.add(t)},interfaces_:function(){return[ht]},getClass:function(){return Hi}}),Hi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof wt?Zs.singletonList(t):Hi.getPoints(t,new I)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return e instanceof wt?t.add(e):e instanceof ft&&e.apply(new Hi(t)),t}},e(Wi.prototype,{filter:function(t){(t instanceof wt||t instanceof Ct||t instanceof Rt)&&this.locations.add(new Xi(t,0,t.getCoordinate()))},interfaces_:function(){return[ht]},getClass:function(){return Wi}}),Wi.getLocations=function(t){var e=new I;return t.apply(new Wi(e)),e},e(ji.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ui.getPolygons(this.geom[e]);if(0<r.size()){t=Wi.getLocations(this.geom[i]);if(this.computeContainmentDistance(t,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&R(arguments[0],v)&&R(arguments[1],v)){for(var s=arguments[0],o=arguments[1],a=arguments[2],u=0;u<s.size();u++)for(var l=s.get(u),h=0;h<o.size();h++)if(this.computeContainmentDistance(l,o.get(h),a),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Xi&&arguments[1]instanceof Rt){r=arguments[0],i=arguments[1],e=arguments[2],n=r.getCoordinate();if(L.EXTERIOR!==this.ptLocator.locate(n,i))return e[this.minDistance=0]=r,e[1]=new Xi(i,n),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=Rn.getLines(this.geom[0]),n=Rn.getLines(this.geom[1]),i=Hi.getPoints(this.geom[0]),r=Hi.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length)return null!==this.minDistanceLocation?null:(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance?null:void this.computeFacetDistance());if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ct&&arguments[1]instanceof wt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i,r=t.getCoordinates(),s=e.getCoordinate(),o=0;o<r.length-1;o++){if((h=Zt.distancePointLine(s,r[o],r[o+1]))<this.minDistance&&(this.minDistance=h,i=new Jt(r[o],r[o+1]).closestPoint(s),n[0]=new Xi(t,o,i),n[1]=new Xi(e,0,s)),this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ct&&arguments[1]instanceof Ct){var a=arguments[0],u=arguments[1],l=arguments[2];if(a.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this.minDistance)return null;for(var h,c,f,r=a.getCoordinates(),g=u.getCoordinates(),o=0;o<r.length-1;o++)for(var d=0;d<g.length-1;d++){if((h=Zt.distanceLineLine(r[o],r[o+1],g[d],g[d+1]))<this.minDistance&&(this.minDistance=h,c=new Jt(r[o],r[o+1]),f=new Jt(g[d],g[d+1]),f=c.closestPoints(f),l[0]=new Xi(a,o,f[0]),l[1]=new Xi(u,d,f[1])),this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s),a=r.getCoordinate().distance(o.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new Xi(r,0,r.getCoordinate()),n[1]=new Xi(o,0,o.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new c;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return ji}}),ji.distance=function(t,e){return new ji(t,e).distance()},ji.isWithinDistance=function(t,e,n){return new ji(t,e,n).distance()<=n},ji.nearestPoints=function(t,e){return new ji(t,e).nearestPoints()};var lo=Object.freeze({DistanceOp:ji});e(Ki.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new N,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),t<e&&H.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return Ki}}),e(Zi.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Zi}}),Zi.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Zi.setVisited=function(t,e){for(;t.hasNext();){t.next().setVisited(e)}},Zi.setMarked=function(t,e){for(;t.hasNext();){t.next().setMarked(e)}},a(Ji,Zi),e(Ji.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Zt.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),n=e.substring(n+1);t.print("  "+n+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){return this.compareDirection(t)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[i]},getClass:function(){return Ji}}),Ji.toEdges=function(t){for(var e=new I,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},a(Qi,Ji),e(Qi.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(l.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return Qi}}),a($i,Zi),e($i.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof er){t=arguments[0];return this.dirEdge[0].getFromNode()===t?this.dirEdge[0]:this.dirEdge[1].getFromNode()===t?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return $i}}),e(tr.prototype,{getNextEdge:function(t){t=this.getIndex(t);return this.outEdges.get(this.getIndex(t+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Zs.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){t=this.getIndex(t);return this.outEdges.get(this.getIndex(t-1))},getIndex:function(){if(arguments[0]instanceof $i){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e).getEdge()===t)return e}return-1}if(arguments[0]instanceof Ji){var n=arguments[0];this.sortEdges();for(e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e)===n)return e}return-1}if(Number.isInteger(arguments[0])){var i=arguments[0]%this.outEdges.size();return i<0&&(i+=this.outEdges.size()),i}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return tr}}),a(er,Zi),e(er.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){var t;0===arguments.length?this.pt=null:1===arguments.length&&(t=arguments[0],this.deStar.remove(t))},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return er}}),er.getEdgesBetween=function(t,e){t=new Q(Ji.toEdges(t.getOutEdges().getEdges())),e=Ji.toEdges(e.getOutEdges().getEdges());return t.retainAll(e),t},a(nr,$i),e(nr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return nr}}),e(ir.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return ir}}),e(rr.prototype,{findNodesOfDegree:function(t){for(var e=new I,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof $i){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof Ji){var e=arguments[0];null!==(i=e.getSym())&&i.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof er){for(var e=arguments[0],n=e.getOutEdges().getEdges().iterator();n.hasNext();){var i,r=n.next();null!==(i=r.getSym())&&this.remove(i),this.dirEdges.remove(r);r=r.getEdge();null!==r&&this.edges.remove(r)}this.nodeMap.remove(e.getCoordinate()),e.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof $i){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof Ji){t=arguments[0];return this.dirEdges.contains(t)}},add:function(){var t,e;arguments[0]instanceof er?(t=arguments[0],this.nodeMap.add(t)):arguments[0]instanceof $i?(e=arguments[0],this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))):arguments[0]instanceof Ji&&(e=arguments[0],this.dirEdges.add(e))},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return rr}}),a(sr,rr),e(sr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=H.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),n=this.getNode(i),i=new Qi(r,n,e[1],!0),e=new Qi(n,r,e[e.length-2],!1),t=new nr(t);t.setDirectedEdges(i,e),this.add(t)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new er(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return sr}}),e(or.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(l.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;Zi.setMarked(this.graph.nodeIterator(),!1),Zi.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new I,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new I;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){for(var e=new Ki(this.factory),n=t;e.add(n),n.getEdge().setMarked(!0),null!==(n=n.getNext())&&n!==t;);return e},add:function(){if(arguments[0]instanceof B)arguments[0].apply({interfaces_:function(){return[q]},filter:function(t){t instanceof Ct&&this.add(t)}});else if(R(arguments[0],m)){var t=arguments[0];this.mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}}else{arguments[0]instanceof Ct&&(t=arguments[0],null===this.factory&&(this.factory=t.getFactory()),this.graph.addEdge(t))}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return or}});var ho=Object.freeze({LineMerger:or}),co=Object.freeze({OverlayOp:kn});a(ar,Ji),e(ar.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return ar}}),a(ur,$i),e(ur.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return ur}}),e(lr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new N,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();lr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},build:function(t){for(var e=t;this.add(e),e.setRing(this),e=e.getNext(),l.isTrue(null!==e,"found null DE in ring"),l.isTrue(e===t||!e.isInRing(),"found DE already in ring"),e!==t;);},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){var t;arguments[0]instanceof Pt?(t=arguments[0],null===this.holes&&(this.holes=new I),this.holes.add(t)):arguments[0]instanceof lr&&((t=arguments[0]).setShell(this),t=t.getRing(),null===this.holes&&(this.holes=new I),this.holes.add(t))},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null},computeHole:function(){var t=this.getRing();this._isHole=Zt.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Xt.toLineString(new Ft(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&A.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof S))throw t;A.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.findDirEdgesInRing=function(t){for(var e=t,n=new I;n.add(e),e=e.getNext(),l.isTrue(null!==e,"found null DE in ring"),l.isTrue(e===t||!e.isInRing(),"found DE already in ring"),e!==t;);return n},lr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(i=t.length-1;0<=i;i--)n.add(t[i],!1)},lr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u,l=a.next(),h=l.getRing(),c=h.getEnvelopeInternal();!c.equals(i)&&c.contains(i)&&(r=H.ptNotInList(n.getCoordinates(),h.getCoordinates()),u=!1,Zt.isPointInRing(r,h.getCoordinates())&&(u=!0),u&&(null===s||o.contains(c))&&(o=(s=l).getRing().getEnvelopeInternal()))}return s},e(hr.prototype,{compare:function(t,e){return t.getRing().getEnvelope().compareTo(e.getRing().getEnvelope())},interfaces_:function(){return[s]},getClass:function(){return hr}}),lr.EnvelopeComparator=hr,a(cr,rr),e(cr.prototype,{findEdgeRing:function(t){var e=new lr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){return null}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();cr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=H.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),n=this.getNode(i),i=new ar(r,n,e[1],!0),e=new ar(n,r,e[e.length-2],!1),t=new ur(t);t.setDirectedEdges(i,e),this.add(t)},deleteCutEdges:function(){this.computeNextCWEdges(),cr.findLabeledEdgeRings(this.dirEdges);for(var t=new I,e=this.dirEdges.iterator();e.hasNext();){var n,i=e.next();i.isMarked()||(n=i.getSym(),i.getLabel()===n.getLabel()&&(i.setMarked(!0),n.setMarked(!0),i=i.getEdge(),t.add(i.getLine())))}return t},getEdgeRings:function(){this.computeNextCWEdges(),cr.label(this.dirEdges,-1);var t=cr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new I,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();i.isMarked()||i.isInRing()||(i=this.findEdgeRing(i),e.add(i))}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new er(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),n=cr.findIntersectionNodes(n,i);if(null!==n)for(var r=n.iterator();r.hasNext();){var s=r.next();cr.computeNextCCWEdges(s,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Q,n=new ee,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();cr.deleteAllEdges(r);for(i=r.getOutEdges().getEdges().iterator();i.hasNext();){var s=i.next();s.setMarked(!0);var o=s.getSym();null!==o&&o.setMarked(!0);o=s.getEdge();e.add(o.getLine());s=s.getToNode();1===cr.getDegreeNonDeleted(s)&&n.push(s)}}return e},interfaces_:function(){return[]},getClass:function(){return cr}}),cr.findLabeledEdgeRings=function(t){for(var e=new I,n=1,i=t.iterator();i.hasNext();){var r=i.next();r.isMarked()||0<=r.getLabel()||(e.add(r),r=lr.findDirEdgesInRing(r),cr.label(r,n),n++)}return e},cr.getDegreeNonDeleted=function(t){for(var e=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();){n.next().isMarked()||e++}return e},cr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var n=e.next();n.setMarked(!0);n=n.getSym();null!==n&&n.setMarked(!0)}},cr.label=function(t,e){for(var n=t.iterator();n.hasNext();){n.next().setLabel(e)}},cr.computeNextCWEdges=function(t){for(var e=null,n=null,i=t.getOutEdges().getEdges().iterator();i.hasNext();){var r=i.next();r.isMarked()||(null===e&&(e=r),null!==n&&n.getSym().setNext(r),n=r)}null!==n&&n.getSym().setNext(e)},cr.computeNextCCWEdges=function(t,e){for(var n=null,i=null,r=t.getOutEdges().getEdges(),s=r.size()-1;0<=s;s--){var o=r.get(s),a=o.getSym(),u=null;o.getLabel()===e&&(u=o);o=null;a.getLabel()===e&&(o=a),null===u&&null===o||(null!==o&&(i=o),null!==u&&(null!==i&&(i.setNext(u),i=null),null===n&&(n=u)))}null!==i&&(l.isTrue(null!==n),i.setNext(n))},cr.getDegree=function(t,e){for(var n=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();){i.next().getLabel()===e&&n++}return n},cr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode()}while(1<cr.getDegree(r,e)&&(null===i&&(i=new I),i.add(r)),n=n.getNext(),l.isTrue(null!==n,"found null DE in ring"),l.isTrue(n===t||!n.isInRing(),"found DE already in ring"),n!==t);return i},e(fr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new Yt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(Yt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new I,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new I;this.invalidRingLines=new I,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),fr.assignHolesToShells(this.holeList,this.shellList),Zs.sort(this.shellList,new lr.EnvelopeComparator);e=!0;this.extractOnlyPolygonal&&(fr.findDisjointShells(this.shellList),e=!1),this.polyList=fr.extractPolygons(this.shellList,e)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){var t;if(R(arguments[0],m))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();this.add(n)}else arguments[0]instanceof Ct?(t=arguments[0],this.geomFactory=t.getFactory(),null===this.graph&&(this.graph=new cr(this.geomFactory)),this.graph.addEdge(t)):arguments[0]instanceof B&&arguments[0].apply(this.lineStringAdder)},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new I,this.shellList=new I;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),(n.isHole()?this.holeList:this.shellList).add(n)}},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},fr.extractPolygons=function(t,e){for(var n=new I,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},fr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();fr.assignHoleToShell(i,e)}},fr.assignHoleToShell=function(t,e){e=lr.findEdgeRingContaining(t,e);null!==e&&e.addHole(t)},fr.findDisjointShells=function(t){fr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(gr.prototype,{filter:function(t){t instanceof Ct&&this.p.add(t)},interfaces_:function(){return[q]},getClass:function(){return gr}}),fr.LineStringAdder=gr;var fo=Object.freeze({Polygonizer:fr});e(dr.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;r=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(r=i.coord);t=new sn(t,n.coord,r,new Je(t.getLabel()));e.add(t)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var s=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(s=i.coord);i=new Je(t.getLabel());i.flip();i=new sn(t,n.coord,s,i);e.add(i)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new I,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1],t=r.getEdgeIntersectionList();t.addEndpoints();var o,a=t.iterator(),u=null;if(!a.hasNext())return null;for(var l=a.next();o=u,u=l,l=null,a.hasNext()&&(l=a.next()),null!==u&&(this.createEdgeEndForPrev(r,s,u,o),this.createEdgeEndForNext(r,s,u,l)),null!==u;);}},interfaces_:function(){return[]},getClass:function(){return dr}}),a(pr,sn),e(pr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){(s=r.next().getLabel().getLocation(t))===L.BOUNDARY&&n++,s===L.INTERIOR&&(i=!0)}var s=i?L.INTERIOR:L.NONE;0<n&&(s=qn.determineBoundary(e,n)),this.label.setLocation(t,s)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){i=i.getLabel().getLocation(t,e);if(i===L.INTERIOR)return this.label.setLocation(t,e,L.INTERIOR),null;i===L.EXTERIOR&&this.label.setLocation(t,e,L.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,Ke.LEFT),this.computeLabelSide(t,Ke.RIGHT)},updateIM:function(t){Gn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0)}this.label=e?new Je(L.NONE,L.NONE,L.NONE):new Je(L.NONE);for(var i=0;i<2;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)},interfaces_:function(){return[]},getClass:function(){return pr}}),a(mr,dn),e(mr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new pr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return mr}}),a(yr,nn),e(yr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return yr}}),a(vr,an),e(vr.prototype,{createNode:function(t){return new yr(t,new mr)},interfaces_:function(){return[]},getClass:function(){return vr}}),e(xr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),t=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),t&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),t&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&t&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){0<n.getDimension()?(n=this.ptLocator.locate(t.getCoordinate(),n),t.getLabel().setAllLocations(e,n)):t.getLabel().setAllLocations(e,L.EXTERIOR)},computeIM:function(){var t=new Qt;if(t.set(L.EXTERIOR,L.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new dr,e=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(e);n=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(n),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),s=this.nodes.find(s.coord);s.getLabel().isNull(t)&&(i===L.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,L.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),s=this.nodes.addNode(s.coord);i===L.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,L.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();l.isTrue(0<n.getGeometryCount(),"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var n=this.nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(L.INTERIOR,L.EXTERIOR,e.getDimension()),t.set(L.BOUNDARY,L.EXTERIOR,e.getBoundaryDimension()));e=this.arg[1].getGeometry();e.isEmpty()||(t.set(L.EXTERIOR,L.INTERIOR,e.getDimension()),t.set(L.EXTERIOR,L.BOUNDARY,e.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return xr}}),e(Er.prototype,{isContainedInBoundary:function(t){if(t instanceof Rt)return!1;if(t instanceof wt)return this.isPointContainedInBoundary(t);if(t instanceof Ct)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new d,i=new d,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof d){t=arguments[0];return t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX()||t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Er}}),Er.contains=function(t,e){return new Er(t).contains(e)},e(Ir.prototype,{intersects:function(t,e){var n=new C(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;0<t.compareTo(e)&&(i=t,t=e,e=i);var i=!1;return e.y>t.y&&(i=!0),i?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Ir}}),e(Nr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Nr}}),e(Cr.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Sr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;e=new wr(this.rectangle);if(e.applyTo(t),e.containsPoint())return!0;e=new Lr(this.rectangle);return e.applyTo(t),!!e.intersects()},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.intersects=function(t,e){return new Cr(t).intersects(e)},a(Sr,Nr),e(Sr.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){t=t.getEnvelopeInternal();return this.rectEnv.intersects(t)?this.rectEnv.contains(t)||t.getMinX()>=this.rectEnv.getMinX()&&t.getMaxX()<=this.rectEnv.getMaxX()||t.getMinY()>=this.rectEnv.getMinY()&&t.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Sr}}),a(wr,Nr),e(wr.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof Rt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new d,i=0;i<4;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&gn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return wr}}),a(Lr,Nr),e(Lr.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;t=Rn.getLines(t);this.checkIntersectionWithLineStrings(t)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Lr}}),a(Rr,Bn),e(Rr.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Rr.relate(t,e).isCovers())},Rr.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Cr.intersects(t,e):e.isRectangle()?Cr.intersects(e,t):Rr.relate(t,e).isIntersects())},Rr.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Rr.relate(t,e).isTouches(t.getDimension(),e.getDimension())},Rr.within=function(t,e){return e.contains(t)},Rr.coveredBy=function(t,e){return Rr.covers(e,t)},Rr.relate=function(){if(2===arguments.length)return new Rr(arguments[0],arguments[1]).getIntersectionMatrix();if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof B&&arguments[1]instanceof B){var t=arguments[2];return Rr.relateWithCheck(arguments[0],arguments[1]).matches(t)}if(R(arguments[2],V)&&arguments[0]instanceof B&&arguments[1]instanceof B)return new Rr(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}},Rr.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Rr.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},Rr.disjoint=function(t,e){return!t.intersects(e)},Rr.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Rr.relate(t,e)},Rr.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Rr.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},Rr.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Er.contains(t,e):Rr.relate(t,e).isContains())};Ys=Object.freeze({RelateOp:Rr});e(Tr.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new I,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Tr}}),Tr.combine=function(){if(1===arguments.length)return new Tr(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Tr(Tr.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],t=arguments[1],e=arguments[2];return new Tr(Tr.createList(n,t,e)).combine()}},Tr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Tr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(n=new I).add(t),n.add(e),n}if(3===arguments.length){var n,i=arguments[0],t=arguments[1],e=arguments[2];return(n=new I).add(i),n.add(t),n.add(e),n}},e(Pr.prototype,{union:function(){for(var t=new de,e=new at,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n).getCoordinate();t.locate(i,this.otherGeom)===L.EXTERIOR&&e.add(i)}if(0===e.size())return this.otherGeom;var r=H.toCoordinateArray(e),s=1===r.length?this.geomFact.createPoint(r[0]):this.geomFact.createMultiPointFromCoords(r);return Tr.combine(s,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.union=function(t,e){return new Pr(t,e).union()},e(br.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ht]},getClass:function(){return br}}),br.extract=function(){if(2===arguments.length)return br.extract(arguments[0],arguments[1],new I);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return t.getSortIndex()===e?n.add(t):t instanceof ft&&t.apply(new br(e,n)),n}},e(Or.prototype,{reduceToGeometries:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next(),r=null;R(i,v)?r=this.unionTree(i):i instanceof B&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new I,r=0;r<e.getNumGeometries();r++){var s=e.getGeometryN(r);(s.getEnvelopeInternal().intersects(t)?i:n).add(s)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Tr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);i=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,i)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Re(Or.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Or.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Or.getGeometry(e,n),Or.getGeometry(e,n+1));t=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,t),i=this.binaryUnion(e,t,i);return this.unionSafe(r,i)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();)var i=n.next(),e=null===e?i.copy():e.union(i);return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Or.restrictToPolygons(t.union(e))},unionTree:function(t){t=this.reduceToGeometries(t);return this.binaryUnion(t)},unionUsingEnvelopeIntersection:function(t,e,n){var i=new I,t=this.extractByEnvelope(n,t,i),e=this.extractByEnvelope(n,e,i),e=this.unionActual(t,e);return i.add(e),Tr.combine(i)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return e.getFactory().createGeometryCollection([e,t]).buffer(0)}},interfaces_:function(){return[]},getClass:function(){return Or}}),Or.restrictToPolygons=function(t){if(R(t,Lt))return t;var e=Ui.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Yt.toPolygonArray(e))},Or.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Or.union=function(t){return new Or(t).union()},Or.STRTREE_NODE_CAPACITY=4,e(_r.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Un.overlayOp(t,e,kn.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){var t;if(R(arguments[0],m))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();this.extract(n)}else arguments[0]instanceof B&&(t=arguments[0],null===this.geomFact&&(this.geomFact=t.getFactory()),br.extract(t,B.SORTINDEX_POLYGON,this.polygons),br.extract(t,B.SORTINDEX_LINESTRING,this.lines),br.extract(t,B.SORTINDEX_POINT,this.points))},union:function(){if(null===this.geomFact)return null;var t=null;0<this.points.size()&&(e=this.geomFact.buildGeometry(this.points),t=this.unionNoOpt(e));var e=null;0<this.lines.size()&&(n=this.geomFact.buildGeometry(this.lines),e=this.unionNoOpt(n));var n=null;0<this.polygons.size()&&(n=Or.union(this.polygons));var n=this.unionWithNull(e,n),i=null;return i=null===t?n:null===n?t:Pr.union(t,n),null===i?this.geomFact.createGeometryCollection():i},interfaces_:function(){return[]},getClass:function(){return _r}}),_r.union=function(){return 1===arguments.length?R(arguments[0],m)||arguments[0]instanceof B?new _r(arguments[0]).union():void 0:2===arguments.length?new _r(arguments[0],arguments[1]).union():void 0};to=Object.freeze({UnaryUnionOp:_r});e(Mr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),t=n[0],n=Mr.findDifferentPoint(n,t),n=e.findEdgeInSameDirection(t,n),e=e.findEdgeEnd(n),n=null;e.getLabel().getLocation(0,Ke.RIGHT)===L.INTERIOR?n=e:e.getSym().getLabel().getLocation(0,Ke.RIGHT)===L.INTERIOR&&(n=e.getSym()),l.isTrue(null!==n,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(n)},visitShellInteriors:function(t,e){if(t instanceof Rt&&(r=t,this.visitInteriorRing(r.getExteriorRing(),e)),t instanceof bt)for(var n=t,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.visitInteriorRing(r.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Ke.RIGHT)===L.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){for(var e=t,n=t;l.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),(n=n.getNext())!==e;);},buildEdgeRings:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();i.isInResult()&&null===i.getEdgeRing()&&((i=new tn(i,this.geometryFactory)).linkDirectedEdgesForMinimalEdgeRings(),i=i.buildMinimalRings(),e.addAll(i))}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Ke.RIGHT)===L.INTERIOR)for(var s=0;s<i.size();s++)if(!(r=i.get(s)).isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new I;this.geomGraph.computeSplitEdges(t);var e=new un(new mn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();t=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(t)},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Dr.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n=n||this.items.remove(e)},getItems:function(){return this.items},depth:function(){for(var t,e=0,n=0;n<2;n++){null===this.subnode[n]||e<(t=this.subnode[n].depth())&&(e=t)}return e+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Dr}}),Dr.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(Ar.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],t=arguments[1];return!(this.min>t||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof Ar){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){e=arguments[1];return arguments[0]>=this.min&&e<=this.max}},init:function(t,e){this.min=t,(this.max=e)<t&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return Ar}}),e(Fr.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Fr.computeLevel(t),this.interval=new Ar,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){t=ui.powerOf2(t);this.pt=Math.floor(e.getMin()/t)*t,this.interval.init(this.pt,this.pt+t)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.computeLevel=function(t){t=t.getWidth();return ui.exponent(t)+1},a(Gr,Dr),e(Gr.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Dr.getSubnodeIndex(t,this.centre);return-1===e||null===this.subnode[e]?this:this.subnode[e].find(t)},insert:function(t){l.isTrue(null===this.interval||this.interval.contains(t.interval));var e,n=Dr.getSubnodeIndex(t.interval,this.centre);t.level===this.level-1?this.subnode[n]=t:((e=this.createSubnode(n)).insert(t),this.subnode[n]=e)},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Dr.getSubnodeIndex(t,this.centre);return-1===e?this:this.getSubnode(e).getNode(t)},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}return new Gr(new Ar(e,n),this.level-1)},interfaces_:function(){return[]},getClass:function(){return Gr}}),Gr.createNode=function(t){t=new Fr(t);return new Gr(t.getInterval(),t.getLevel())},Gr.createExpanded=function(t,e){e=new Ar(e);null!==t&&e.expandToInclude(t.interval);e=Gr.createNode(e);return null!==t&&e.insert(t),e},a(qr,Dr),e(qr.prototype,{insert:function(t,e){var n=Dr.getSubnodeIndex(t,qr.origin);if(-1===n)return this.add(e),null;var i=this.subnode[n];null!==i&&i.getInterval().contains(t)||(i=Gr.createExpanded(i,t),this.subnode[n]=i),this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){l.isTrue(t.getInterval().contains(e));(ci.isZeroWidth(e.getMin(),e.getMax())?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return qr}}),qr.origin=0,e(Br.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);t=Br.ensureExtent(t,this.minExtent);this.root.insert(t,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new Ar(t,t))}if(arguments[0]instanceof Ar){var e=arguments[0],n=new I;return this.query(e,n),n}}else{2===arguments.length&&(e=arguments[0],n=arguments[1],this.root.addAllItemsFromOverlapping(e,n))}},iterator:function(){var t=new I;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){t=Br.ensureExtent(t,this.minExtent);return this.root.remove(t,e)},collectStats:function(t){t=t.getWidth();t<this.minExtent&&0<t&&(this.minExtent=t)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(i=(n-=e/2)+e/2),new Ar(n,i))},e(zr.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return zr}}),e(Vr.prototype,{testLineSegment:function(t,e){var n=e.p0,e=e.p1,i=n.x-t.x,r=n.y-t.y,s=e.x-t.x,o=e.y-t.y;!(0<r&&o<=0||0<o&&r<=0)||0<jt.signOfDet2x2(i,r,s,o)/(o-r)&&this.crossings++},buildIndex:function(){this.tree=new Br;for(var t=H.removeRepeatedPoints(this.ring.getCoordinates()),e=qe.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new C(g.NEGATIVE_INFINITY,g.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new kr(this,t),r=n.iterator();r.hasNext();){var s=r.next();this.testMonotoneChain(e,i,s)}return this.crossings%2==1},interfaces_:function(){return[zr]},getClass:function(){return Vr}}),a(kr,qi),e(kr.prototype,{select:function(){if(1!==arguments.length)return qi.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return kr}}),Vr.MCSelecter=kr,e(Yr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this.nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);t=(new dr).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(t)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),o=this.nodes.addNode(o.coord);r===L.BOUNDARY?o.setLabelBoundary(e):o.getLabel().isNull(e)&&o.setLabel(e,L.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Yr}}),e(Ur.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var n=e.next();if(1<n.getEdgeEnds().size())return this.invalidPoint=n.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Ur}}),e(Xr.prototype,{buildIndex:function(){this.index=new Re;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var s=i.get(r),o=s.getCoordinates();if(e!==s&&e.getEnvelopeInternal().intersects(s.getEnvelopeInternal())){s=Wr.findPtNotNode(n,s,this.graph);if(null!==s)if(Zt.isPointInRing(s,o))return this.nestedPt=s,!1}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Xr}}),e(Hr.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Hr.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Hr}}),Hr.ERROR=0,Hr.REPEATED_POINT=1,Hr.HOLE_OUTSIDE_SHELL=2,Hr.NESTED_HOLES=3,Hr.DISCONNECTED_INTERIOR=4,Hr.SELF_INTERSECTION=5,Hr.RING_SELF_INTERSECTION=6,Hr.NESTED_SHELLS=7,Hr.DUPLICATE_RINGS=8,Hr.TOO_FEW_POINTS=9,Hr.INVALID_COORDINATE=10,Hr.RING_NOT_CLOSED=11,Hr.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(Wr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Wr.isValid(t[e]))return this.validErr=new Hr(Hr.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Rt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new Xr(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}n.isNonNested()||(this.validErr=new Hr(Hr.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){t=new Ur(t);return t.isNodeConsistentArea()?void(t.hasDuplicateRings()&&(this.validErr=new Hr(Hr.DUPLICATE_RINGS,t.getInvalidPoint()))):(this.validErr=new Hr(Hr.SELF_INTERSECTION,t.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),e=Wr.findPtNotNode(i,e,n);if(null!==e&&!Zt.isPointInRing(e,r))return e;n=Wr.findPtNotNode(r,t,n);return null===n?(l.shouldNeverReachHere("points in shell and hole appear to be equal"),null):Zt.isPointInRing(n,i)?n:null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){t=new Mr(t);t.isInteriorsConnected()||(this.validErr=new Hr(Hr.DISCONNECTED_INTERIOR,t.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new at,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Hr(Hr.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new Vr(n),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r),s=Wr.findPtNotNode(s.getCoordinates(),n,e);if(null===s)return null;if(!i.isInside(s))return this.validErr=new Hr(Hr.HOLE_OUTSIDE_SHELL,s),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new Hr(Hr.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof wt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Tt){t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Pt){var e=arguments[0];if(this.checkInvalidCoordinates(e.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(e),null!==this.validErr)return null;var n=new qn(0,e);if(this.checkTooFewPoints(n),null!==this.validErr)return null;e=new Wt;n.computeSelfNodes(e,!0,!0),this.checkNoSelfIntersectingRings(n)}else if(arguments[0]instanceof Ct){e=arguments[0];if(this.checkInvalidCoordinates(e.getCoordinates()),null!==this.validErr)return null;n=new qn(0,e);this.checkTooFewPoints(n)}else{if(arguments[0]instanceof Rt){var i=arguments[0];if(this.checkInvalidCoordinates(i),null!==this.validErr)return null;if(this.checkClosedRings(i),null!==this.validErr)return null;n=new qn(0,i);return(this.checkTooFewPoints(n),null!==this.validErr)?null:(this.checkConsistentArea(n),null===this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(n),null===this.validErr))?(this.checkHolesInShell(i,n),null!==this.validErr?null:(this.checkHolesNotNested(i,n),null!==this.validErr?null:void this.checkConnectedInteriors(n))):null)}if(arguments[0]instanceof bt){for(var r=arguments[0],s=0;s<r.getNumGeometries();s++){var o=r.getGeometryN(s);if(this.checkInvalidCoordinates(o),null!==this.validErr)return null;if(this.checkClosedRings(o),null!==this.validErr)return null}n=new qn(0,r);if(this.checkTooFewPoints(n),null!==this.validErr)return null;if(this.checkConsistentArea(n),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(n),null!==this.validErr))return null;for(s=0;s<r.getNumGeometries();s++){o=r.getGeometryN(s);if(this.checkHolesInShell(o,n),null!==this.validErr)return null}for(s=0;s<r.getNumGeometries();s++){o=r.getGeometryN(s);if(this.checkHolesNotNested(o,n),null!==this.validErr)return null}if(this.checkShellsNotNested(r,n),null!==this.validErr)return null;this.checkConnectedInteriors(n)}else if(arguments[0]instanceof ft)for(var a=arguments[0],s=0;s<a.getNumGeometries();s++){var u=a.getGeometryN(s);if(this.checkValid(u),null!==this.validErr)return null}else if(arguments[0]instanceof B){i=arguments[0];if(this.validErr=null,i.isEmpty())return null;if(i instanceof wt)this.checkValid(i);else if(i instanceof Tt)this.checkValid(i);else if(i instanceof Pt)this.checkValid(i);else if(i instanceof Ct)this.checkValid(i);else if(i instanceof Rt)this.checkValid(i);else if(i instanceof bt)this.checkValid(i);else{if(!(i instanceof ft))throw new UnsupportedOperationException(i.getClass().getName());this.checkValid(i)}}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),s=r.getCoordinates(),r=Wr.findPtNotNode(i,r,n);if(null===r)return null;if(!Zt.isPointInRing(r,s))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Hr(Hr.NESTED_SHELLS,r),null;for(var o=null,a=0;a<e.getNumInteriorRing();a++){var u=e.getInteriorRingN(a);if(null===(o=this.checkShellInsideHole(t,u,n)))return null}this.validErr=new Hr(Hr.NESTED_SHELLS,o)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){var e;t.isClosed()||(e=null,1<=t.getNumPoints()&&(e=t.getCoordinateN(0)),this.validErr=new Hr(Hr.RING_NOT_CLOSED,e))},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n).getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(n!==r){var s=t.getGeometryN(r);if(this.checkShellNotNested(i,s,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var s=t[r];if(!i.isIntersection(s))return s}return null},Wr.isValid=function(){if(arguments[0]instanceof B)return new Wr(arguments[0]).isValid();if(arguments[0]instanceof d){var t=arguments[0];return!g.isNaN(t.x)&&(!g.isInfinite(t.x)&&(!g.isNaN(t.y)&&!g.isInfinite(t.y)))}};eo=Object.freeze({IsValidOp:Wr}),fo=Object.freeze({BoundaryOp:dt,IsSimpleOp:Ii,buffer:uo,distance:lo,linemerge:ho,overlay:co,polygonize:fo,relate:Ys,union:to,valid:eo});a(jr,Ot.CoordinateOperation),e(jr.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new d(t[i]);this.targetPM.makePrecise(r),n[i]=r}var s=new N(n,!1).toCoordinateArray(),o=e instanceof Pt?4:e instanceof Ct?2:0,e=n;return this.removeCollapsed&&(e=null),s.length<o?e:s},interfaces_:function(){return[]},getClass:function(){return jr}}),e(Kr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),e=n;return this.changePrecisionModel||(e=t.getFactory().createGeometry(n)),e},reducePointwise:function(t){var e=null;e=this.changePrecisionModel?new Ot(this.createFactory(t.getFactory(),this.targetPM)):new Ot;var n=this.removeCollapsed;return 2<=t.getDimension()&&(n=!0),e.edit(t,new jr(this.targetPM,n))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Ot.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){return new Yt(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){t=this.reducePointwise(t);return this.isPointwise||!R(t,Lt)||t.isValid()?t:this.fixPolygonalTopology(t)},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Ot:new Ot(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return Kr}}),Kr.reduce=function(t,e){return new Kr(e).reduce(t)},Kr.reducePointwise=function(t,e){e=new Kr(e);return e.setPointwise(!0),e.reduce(t)};Ys=Object.freeze({GeometryPrecisionReducer:Kr});e(Zr.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var s=this.seg.distance(this.pts[r]);n<s&&(n=s,i=r)}if(n<=this.distanceTolerance)for(r=t+1;r<e;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new N,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new d(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.simplify=function(t,e){t=new Zr(t);return t.setDistanceTolerance(e),t.simplify()},e(Jr.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Qr(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new c;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Jr}}),Jr.simplify=function(t,e){t=new Jr(t);return t.setDistanceTolerance(e),t.getResultGeometry()},a(Qr,se),e(Qr.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;t=se.prototype.transformPolygon.call(this,t,e);return e instanceof bt?t:this.createValidArea(t)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),t=null,t=0===n.length?new Array(0).fill(null):Zr.simplify(n,this.distanceTolerance);return this.factory.getCoordinateSequenceFactory().create(t)},transformMultiPolygon:function(t,e){e=se.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(e)},transformLinearRing:function(t,e){var n=e instanceof Rt,e=se.prototype.transformLinearRing.call(this,t,e);return!n||e instanceof Pt?e:null},interfaces_:function(){return[]},getClass:function(){return Qr}}),Jr.DPTransformer=Qr,a($r,Jt),e($r.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return $r}}),e(ts.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(ts.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(ts.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new $r(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return ts.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return ts}}),ts.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(es.prototype,{remove:function(t){this.index.remove(new C(t.p0,t.p1),t)},add:function(){var t;if(arguments[0]instanceof ts)for(var e=arguments[0].getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else arguments[0]instanceof Jt&&(t=arguments[0],this.index.insert(new C(t.p0,t.p1),t))},query:function(t){var e=new C(t.p0,t.p1),t=new ns(t);return this.index.query(e,t),t.getItems()},interfaces_:function(){return[]},getClass:function(){return es}}),e(ns.prototype,{visitItem:function(t){C.intersects(t.p0,t.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Ie]},getClass:function(){return ns}}),e(is.prototype,{flatten:function(t,e){var n=new Jt(this.linePts[t],this.linePts[e]);return this.remove(this.line,t,e),this.outputIndex.add(n),n},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var s=!0;this.line.getResultSize()<this.line.getMinimumSize()&&n+1<this.line.getMinimumSize()&&(s=!1);var o=new Array(1).fill(null),a=this.findFurthestPoint(this.linePts,t,e,o);o[0]>this.distanceTolerance&&(s=!1);o=new Jt;if(o.p0=this.linePts[t],o.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,o)&&(s=!1),s){r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,a,n),this.simplifySection(a,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t).iterator();e.hasNext();){var n=e.next();if(this.hasInteriorIntersection(n,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new Jt;r.p0=t[e],r.p1=t[n];for(var s=-1,o=e,a=e+1;a<n;a++){var u=t[a],u=r.distance(u);s<u&&(s=u,o=a)}return i[0]=s,o},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n).iterator();i.hasNext();){var r=i.next();if(this.hasInteriorIntersection(r,n)&&!is.isInLineSection(t,e,r))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return is}}),is.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;n=n.getIndex();return n>=e[0]&&n<e[1]},e(rs.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(e=t.iterator();e.hasNext();){var n=new is(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return rs}}),e(ss.prototype,{getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():(this.linestringMap=new zt,this.inputGeom.apply(new as(this)),this.lineSimplifier.simplify(this.linestringMap.values()),new os(this.linestringMap).transform(this.inputGeom))},setDistanceTolerance:function(t){if(t<0)throw new c;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return ss}}),ss.simplify=function(t,e){t=new ss(t);return t.setDistanceTolerance(e),t.getResultGeometry()},a(os,se),e(os.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof Ct){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return se.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return os}}),e(as.prototype,{filter:function(t){if(t instanceof Ct){var e=t;if(e.isEmpty())return null;t=e.isClosed()?4:2,t=new ts(e,t);this.tps.linestringMap.put(e,t)}},interfaces_:function(){return[q]},getClass:function(){return as}}),ss.LineStringTransformer=os,ss.LineStringMapBuilderFilter=as;to=Object.freeze({DouglasPeuckerSimplifier:Jr,TopologyPreservingSimplifier:ss});e(us.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;return t.distance(this.seg.p0)<this.minimumLen?(this.splitPt=this.seg.pointAlong(e),null):t.distance(this.seg.p1)<this.minimumLen?(this.splitPt=us.pointAlongReverse(this.seg,e),null):void(this.splitPt=t)}2===arguments.length&&(e=arguments[0],t=arguments[1],e=this.getConstrainedLength(e)/this.segLen,t.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(e):this.splitPt=us.pointAlongReverse(this.seg,e))},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return us}}),us.pointAlongReverse=function(t,e){var n=new d;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(ls.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return ls}}),e(hs.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength()/2,n=new us(n),t=hs.projectedSplitPoint(t,e),e=2*t.distance(e)*.8;return i<e&&(e=i),n.setMinimumLength(e),n.splitAt(t),n.getSplitPoint()},interfaces_:function(){return[ls]},getClass:function(){return hs}}),hs.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},e(cs.prototype,{interfaces_:function(){return[]},getClass:function(){return cs}}),cs.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},cs.isInCircleDDNormalized=function(t,e,n,i){var r=_.valueOf(t.x).selfSubtract(i.x),s=_.valueOf(t.y).selfSubtract(i.y),o=_.valueOf(e.x).selfSubtract(i.x),a=_.valueOf(e.y).selfSubtract(i.y),u=_.valueOf(n.x).selfSubtract(i.x),t=_.valueOf(n.y).selfSubtract(i.y),e=r.multiply(a).selfSubtract(o.multiply(s)),n=o.multiply(t).selfSubtract(u.multiply(a)),i=u.multiply(s).selfSubtract(r.multiply(t)),s=r.multiply(r).selfAdd(s.multiply(s)),a=o.multiply(o).selfAdd(a.multiply(a)),t=u.multiply(u).selfAdd(t.multiply(t));return 0<s.selfMultiply(n).selfAdd(a.selfMultiply(i)).selfAdd(t.selfMultiply(e)).doubleValue()},cs.checkRobustInCircle=function(t,e,n,i){var r=cs.isInCircleNonRobust(t,e,n,i),s=cs.isInCircleDDSlow(t,e,n,i),o=cs.isInCircleCC(t,e,n,i),a=Zn.circumcentre(t,e,n);A.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===s&&r===o||(A.out.println("inCircle robustness failure (double result = "+r+", DD result = "+s+", CC result = "+o+")"),A.out.println(Xt.toLineString(new Ft([t,e,n,i]))),A.out.println("Circumcentre = "+Xt.toPoint(a)+" radius = "+t.distance(a)),A.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),A.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),A.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),A.out.println())},cs.isInCircleDDFast=function(t,e,n,i){var r=_.sqr(t.x).selfAdd(_.sqr(t.y)).selfMultiply(cs.triAreaDDFast(e,n,i)),s=_.sqr(e.x).selfAdd(_.sqr(e.y)).selfMultiply(cs.triAreaDDFast(t,n,i)),o=_.sqr(n.x).selfAdd(_.sqr(n.y)).selfMultiply(cs.triAreaDDFast(t,e,i)),n=_.sqr(i.x).selfAdd(_.sqr(i.y)).selfMultiply(cs.triAreaDDFast(t,e,n));return 0<r.selfSubtract(s).selfAdd(o).selfSubtract(n).doubleValue()},cs.isInCircleCC=function(t,e,n,i){n=Zn.circumcentre(t,e,n),t=t.distance(n);return i.distance(n)-t<=0},cs.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,s=t.y-i.y,o=e.x-i.x,t=e.y-i.y,e=n.x-i.x,i=n.y-i.y;return 0<(r*r+s*s)*(o*i-e*t)+(o*o+t*t)*(e*s-r*i)+(e*e+i*i)*(r*t-o*s)},cs.isInCircleDDSlow=function(t,e,n,i){var r=_.valueOf(i.x),s=_.valueOf(i.y),o=_.valueOf(t.x),a=_.valueOf(t.y),u=_.valueOf(e.x),l=_.valueOf(e.y),h=_.valueOf(n.x),i=_.valueOf(n.y),t=o.multiply(o).add(a.multiply(a)).multiply(cs.triAreaDDSlow(u,l,h,i,r,s)),e=u.multiply(u).add(l.multiply(l)).multiply(cs.triAreaDDSlow(o,a,h,i,r,s)),n=h.multiply(h).add(i.multiply(i)).multiply(cs.triAreaDDSlow(o,a,u,l,r,s)),i=r.multiply(r).add(s.multiply(s)).multiply(cs.triAreaDDSlow(o,a,u,l,h,i));return 0<t.subtract(e).add(n).subtract(i).doubleValue()},cs.isInCircleNonRobust=function(t,e,n,i){return 0<(t.x*t.x+t.y*t.y)*cs.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*cs.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*cs.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*cs.triArea(t,e,n)},cs.isInCircleRobust=function(t,e,n,i){return cs.isInCircleNormalized(t,e,n,i)},cs.triAreaDDSlow=function(t,e,n,i,r,s){return n.subtract(t).multiply(s.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},cs.triAreaDDFast=function(t,e,n){var i=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(n.y).selfSubtract(t.y)),t=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(t)},e(fs.prototype,{circleCenter:function(e,n){var i=new fs(this.getX(),this.getY()),t=new F(this.bisector(i,e),this.bisector(e,n)),r=null;try{r=new fs(t.getX(),t.getY())}catch(t){if(!(t instanceof w))throw t;A.err.println("a: "+i+"  b: "+e+"  c: "+n),A.err.println(t)}return r},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),e=new F(t.getX()+n/2,t.getY()+i/2,1),i=new F(t.getX()-i+n/2,t.getY()+n+i/2,1);return new F(e,i)},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.p.distance(e.getCoordinate())<t}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return cs.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),s=e.getX()-i,o=n.getX()-i,a=e.getY()-r,u=n.getY()-r,l=s*u-o*a,i=this.getX()-i,r=this.getY()-r,o=(u*i-o*r)/l,l=(-a*i+s*r)/l;return t.getZ()+o*(e.getZ()-t.getZ())+l*(n.getZ()-t.getZ())},midPoint:function(t){return new fs((this.p.x+t.getX())/2,(this.p.y+t.getY())/2,(this.p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return 0<(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new fs(t*this.p.x,t*this.p.y)},cross:function(){return new fs(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new fs(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=e.sub(t),i=this.sub(t),r=n.crossProduct(i);return 0<r?fs.LEFT:r<0?fs.RIGHT:n.getX()*i.getX()<0||n.getY()*i.getY()<0?fs.BEHIND:n.magn()<i.magn()?fs.BEYOND:t.equals(this)?fs.ORIGIN:e.equals(this)?fs.DESTINATION:fs.BETWEEN},sum:function(t){return new fs(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),n=this.distance(this,t),t=this.distance(t,e);return t<n&&(n=t),(t=this.distance(e,this))<n&&(n=t),i/n},interfaces_:function(){return[]},getClass:function(){return fs}}),fs.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),s=n.z-e.z;return e.z+r/i*s}if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3],h=a.x,t=a.y,n=u.x-h,e=l.x-h,r=u.y-t,i=l.y-t,s=n*i-e*r,h=o.x-h,t=o.y-t,e=(i*h-e*t)/s,s=(-r*h+n*t)/s;return a.z+e*(u.z-a.z)+s*(l.z-a.z)}},fs.LEFT=0,fs.RIGHT=1,fs.BEYOND=2,fs.BEHIND=3,fs.BETWEEN=4,fs.ORIGIN=5,fs.DESTINATION=6,a(gs,fs),e(gs.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return gs}}),e(ds.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new Jt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Xt.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return ds}}),ds.makeEdge=function(t,e){var n=new ds,i=new ds,r=new ds,s=new ds;((((n._rot=i)._rot=r)._rot=s)._rot=n).setNext(n),i.setNext(s),r.setNext(r),s.setNext(i);return n.setOrig(t),n.setDest(e),n},ds.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();ds.splice(t,e),ds.splice(t.sym(),n),ds.splice(t,e.lNext()),ds.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},ds.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),s=t.oNext(),o=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(s),n.setNext(o),i.setNext(a)},ds.connect=function(t,e){var n=ds.makeEdge(t.dest(),e.orig());return ds.splice(n,t.lNext()),ds.splice(n.sym(),e),n},e(ps.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);ds.splice(n,e);for(var i=n;(e=(n=this.subdiv.connect(e,n.sym())).oPrev()).lNext()!==i;);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))ds.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return ps}}),e(ms.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return ms}}),e(ys.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();t=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=t},findEdge:function(){return this.subdiv.getEdges().iterator().next()},interfaces_:function(){return[ms]},getClass:function(){return ys}}),a(vs,p),e(vs.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return vs}}),vs.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(xs.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return xs}}),e(Es.prototype,{getTriangleVertices:function(t){var e=new Cs;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||(!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2]))},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){e=ds.connect(t,e);return this.quadEdges.add(e),e},getVoronoiCellPolygon:function(t,e){var n=new I,i=t;do{var r=t.rot().orig().getCoordinate()}while(n.add(r),(t=t.oPrev())!==i);var s=new N;s.addAll(n,!1),s.closeRing(),s.size()<4&&(A.out.println(s),s.add(s.get(s.size()-1),!0));s=s.toCoordinateArray(),e=e.createPolygon(e.createLinearRing(s),null),s=i.orig();return e.setUserData(s.getCoordinate()),e},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);ds.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return ds.splice(e.sym(),n),ds.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Es.getTriangleEdges(t,e);e=new Array(3).fill(null);Es.getTriangleEdges(t.sym(),e);e=t.lNext().dest();if(this.isFrameVertex(e))return!0;t=t.sym().lNext().dest();return!!this.isFrameVertex(t)},makeEdge:function(t,e){e=ds.makeEdge(t,e);return this.quadEdges.add(e),e},visitTriangles:function(t,e){this.visitedKey++;var n=new ee;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();i.contains(r)||null!==(r=this.fetchTriangleToVisit(r,n,e,i))&&t.visit(r)}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},getEnvelope:function(){return new C(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=n<e?10*e:10*n;this.frameVertex[0]=new fs((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new fs(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new fs(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new C(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Ss;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Q,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);i=i.dest();!t&&this.isFrameVertex(i)||e.add(i)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,s=0,o=!1;do{this.triEdges[s]=r,this.isFrameEdge(r)&&(o=!0);var a=r.sym()}while(i.contains(a)||e.push(a),i.add(r),s++,(r=r.lNext())!==t);return o&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createLineString([s.orig().getCoordinate(),s.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new I,n=new Q,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),s=r.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(r));s=r.sym(),r=s.orig();n.contains(r)||(n.add(r),!t&&this.isFrameVertex(r)||e.add(s))}return e},getTriangleEdges:function(t){var e=new Ns;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new I,n=new ee;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r,s=n.pop();i.contains(s)||(r=s.getPrimary(),!t&&this.isFrameEdge(r)||e.add(r),n.push(s.oNext()),n.push(s.sym().oNext()),i.add(s),i.add(s.sym()))}return e},delete:function(t){ds.splice(t,t.oPrev()),ds.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(i<++n)throw new vs(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new Is,!0);for(var e=new I,n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){var i=n.next();e.add(this.getVoronoiCellPolygon(i,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(Yt.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createPolygon(t.createLinearRing(s),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);ds.splice(n,e);for(var i=n;(e=(n=this.connect(e,n.sym())).oPrev()).lNext()!==i;);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof fs){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof d){var e=arguments[0];return this.locator.locate(new fs(e))}}else if(2===arguments.length){var t=arguments[0],n=arguments[1],e=this.locator.locate(new fs(t));if(null===e)return null;var i=e;e.dest().getCoordinate().equals2D(t)&&(i=e.sym());var r=i;do{if(r.dest().getCoordinate().equals2D(n))return r}while((r=r.oNext())!==i);return null}},interfaces_:function(){return[]},getClass:function(){return Es}}),Es.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new c},e(Is.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=new fs(Zn.circumcentre(e,n,i)),s=0;s<3;s++)t[s].rot().setOrig(r)},interfaces_:function(){return[xs]},getClass:function(){return Is}}),e(Ns.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[xs]},getClass:function(){return Ns}}),e(Cs.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[xs]},getClass:function(){return Cs}}),e(Ss.prototype,{checkTriangleSize:function(t){2<=t.length?Xt.toLineString(t[0],t[1]):1<=t.length&&Xt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(0<this.coordList.size()){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[xs]},getClass:function(){return Ss}}),Es.TriangleCircumcentreVisitor=Is,Es.TriangleEdgesListVisitor=Ns,Es.TriangleVertexListVisitor=Cs,Es.TriangleCoordinatesVisitor=Ss,Es.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(ws.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){return this.ls.getCoordinate(1).z},getStartZ:function(){return this.ls.getCoordinate(0).z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){return this.ls.getCoordinate(1).y},getStartX:function(){return this.ls.getCoordinate(0).x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this.ls.getCoordinate(0).y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){return this.ls.getCoordinate(1).x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return ws}}),e(Ls.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Ls}}),e(Rs.prototype,{isRepeated:function(){return 1<this.count},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Rs}}),e(Ts.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new Rs(e,n),this.root;if(0<this.tolerance){t=this.findBestMatchNode(e);if(null!==t)return t.increment(),t}return this.insertExact(e,n)}},query:function(){var t,e,n=arguments,i=this;if(1===arguments.length){var r=arguments[0],s=new I;return this.query(r,s),s}2===arguments.length&&(arguments[0]instanceof C&&R(arguments[1],v)?(t=n[0],e=n[1],i.queryNode(i.root,t,!0,{interfaces_:function(){return[Ls]},visit:function(t){e.add(t)}})):arguments[0]instanceof C&&R(arguments[1],Ls)&&(i=arguments[0],t=arguments[1],this.queryNode(this.root,i,!0,t)))},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,s=null,o=null,s=(o=n?(r=e.getMinX(),s=e.getMaxX(),t.getX()):(r=e.getMinY(),s=e.getMaxY(),t.getY()))<=s;r<o&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),s&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){t=new Ps(t,this.tolerance);return this.query(t.queryEnvelope(),t),t.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,s=!0;null!==n;){if(null!==n)if(t.distance(n.getCoordinate())<=this.tolerance)return n.increment(),n;s=r?t.x<n.getX():t.y<n.getY(),i=n,n=s?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;e=new Rs(t,e);return s?i.setLeft(e):i.setRight(e),e},interfaces_:function(){return[]},getClass:function(){return Ts}}),Ts.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Ts.toCoordinates(t,!1)}if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new N,i=t.iterator();i.hasNext();)for(var r=i.next(),s=e?r.getCount():1,o=0;o<s;o++)n.add(r.getCoordinate(),!0);return n.toCoordinateArray()}},e(Ps.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate());if(!(e<=this.tolerance))return null;var n=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(n=!0),n&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new C(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Ls]},getClass:function(){return Ps}}),Ts.BestMatchVisitor=Ps,e(bs.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();for(var t=0;t++,0<this.enforceGabriel(this.segments)&&t<bs.MAX_SPLIT_ITER;);},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new Yt,t=new ie(this.getPointArray(),t);this.convexHull=t.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new d((e.x+n.x)/2,(e.y+n.y)/2),r=e.distance(i),t=new C(i);t.expandBy(r);for(var t=this.kdt.query(t),s=null,o=g.MAX_VALUE,a=t.iterator();a.hasNext();){var u,l=a.next().getCoordinate();l.equals2D(e)||l.equals2D(n)||(u=i.distance(l))<r&&(null===s||u<o)&&(s=l,o=u)}return s},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new I,n=0,i=new I,r=t.iterator();r.hasNext();){var s,o=r.next(),a=this.findNonGabrielPoint(o);null!==a&&(this.splitPt=this.splitFinder.findSplitPoint(o,a),s=this.createVertex(this.splitPt,o),this.insertSite(s),a=new ws(o.getStartX(),o.getStartY(),o.getStartZ(),s.getX(),s.getY(),s.getZ(),o.getData()),s=new ws(s.getX(),s.getY(),s.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData()),e.add(a),e.add(s),i.add(o),n+=1)}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new gs(t)}if(2===arguments.length){var n=arguments[0],t=arguments[1],e=null;return(e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,t):new gs(n)).setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=bs.computeVertexEnvelope(this.initialVertices),e=bs.computeVertexEnvelope(this.segVertices),n=new C(t);n.expandToInclude(e);t=.2*n.getWidth(),e=.2*n.getHeight(),e=Math.max(t,e);this.computeAreaEnv=new C(n),this.computeAreaEnv.expandBy(e)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Es(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new ys(this.subdiv)),this.incDel=new ps(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof gs){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){e=e.getData();return e.merge(t),e}return this.incDel.insertSite(t),t}arguments[0]instanceof d&&(t=arguments[0],this.insertSite(this.createVertex(t)))},interfaces_:function(){return[]},getClass:function(){return bs}}),bs.computeVertexEnvelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},bs.MAX_SPLIT_ITER=99,e(Os.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Os.envelope(this.siteCoords),e=Os.toVertices(this.siteCoords);this.subdiv=new Es(t,this.tolerance),new ps(this.subdiv).insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){var t;arguments[0]instanceof B?(t=arguments[0],this.siteCoords=Os.extractUniqueCoordinates(t)):R(arguments[0],m)&&(t=arguments[0],this.siteCoords=Os.unique(H.toCoordinateArray(t)))},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Os}}),Os.extractUniqueCoordinates=function(t){if(null===t)return new N;t=t.getCoordinates();return Os.unique(t)},Os.envelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Os.unique=function(t){t=H.copyDeep(t);return ut.sort(t),new N(t,!1)},Os.toVertices=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new fs(i))}return e},e(_s.prototype,{createSiteVertices:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new gs(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=Os.envelope(this.siteCoords),e=new I;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=_s.createConstraintSegments(this.constraintLines));t=new bs(this.createSiteVertices(this.siteCoords),this.tolerance);t.setConstraints(e,new I(this.constraintVertexMap.values())),t.formInitialDelaunay(),t.enforceConstraints(),this.subdiv=t.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Os.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new gs(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return _s}}),_s.createConstraintSegments=function(){if(1===arguments.length){for(var t=Rn.getLines(arguments[0]),e=new I,n=t.iterator();n.hasNext();){var i=n.next();_s.createConstraintSegments(i,e)}return e}if(2===arguments.length)for(var r=arguments[1],s=arguments[0].getCoordinates(),n=1;n<s.length;n++)r.add(new ws(s[n-1],s[n]))},e(Ms.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Os.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);e=Os.toVertices(this.siteCoords);this.subdiv=new Es(t,this.tolerance),new ps(this.subdiv).insertSites(e)},getDiagram:function(t){this.create();t=this.subdiv.getVoronoiDiagram(t);return Ms.clipGeometryCollection(t,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){var t;arguments[0]instanceof B?(t=arguments[0],this.siteCoords=Os.extractUniqueCoordinates(t)):R(arguments[0],m)&&(t=arguments[0],this.siteCoords=Os.unique(H.toCoordinateArray(t)))},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Ms}}),Ms.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new I,r=0;r<t.getNumGeometries();r++){var s=t.getGeometryN(r),o=null;e.contains(s.getEnvelopeInternal())?o=s:e.intersects(s.getEnvelopeInternal())&&(o=n.intersection(s)).setUserData(s.getUserData()),null===o||o.isEmpty()||i.add(o)}return t.getFactory().createGeometryCollection(Yt.toGeometryArray(i))};eo=Object.freeze({ConformingDelaunayTriangulationBuilder:_s,DelaunayTriangulationBuilder:Os,VoronoiDiagramBuilder:Ms});e(Ds.prototype,{interfaces_:function(){return[]},getClass:function(){return Ds}}),Ds.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return kn.createEmptyResult(kn.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,kn.UNION)},e(B.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Rr.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){return 0===arguments.length?_r.union(this):1===arguments.length?Ds.union(this,arguments[0]):void 0},isValid:function(){return Wr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return kn.createEmptyResult(kn.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return je.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Un.overlayOp(this,t,kn.INTERSECTION)},covers:function(t){return Rr.covers(this,t)},coveredBy:function(t){return Rr.coveredBy(this,t)},touches:function(t){return Rr.touches(this,t)},intersects:function(t){return Rr.intersects(this,t)},within:function(t){return Rr.within(this,t)},overlaps:function(t){return Rr.overlaps(this,t)},disjoint:function(t){return Rr.disjoint(this,t)},crosses:function(t){return Rr.crosses(this,t)},buffer:function(){return 1===arguments.length?Yi.bufferOp(this,arguments[0]):2===arguments.length?Yi.bufferOp(this,arguments[0],arguments[1]):3===arguments.length?Yi.bufferOp(this,arguments[0],arguments[1],arguments[2]):void 0},convexHull:function(){return new ie(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rr.relate.apply(Rr,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=$t.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();return t=new(0===e?jn:1===e?Wn:Xn)(this).getInteriorPoint(),this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return kn.createEmptyResult(kn.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Un.overlayOp(this,t,kn.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new Xt).write(this)},toString:function(){this.toText()},contains:function(t){return Rr.contains(this,t)},difference:function(t){return this.isEmpty()?kn.createEmptyResult(kn.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Un.overlayOp(this,t,kn.DIFFERENCE))},isSimple:function(){return new Ii(this).isSimple()},isWithinDistance:function(t,e){return!(e<this.getEnvelopeInternal().distance(t.getEnvelopeInternal()))&&ji.isWithinDistance(this,t,e)},distance:function(t){return ji.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});t.version="1.1.2 (248dab8)",t.algorithm=Js,t.densify=Qs,t.dissolve=$s,t.geom=Ks,t.index=no,t.io=oo,t.noding=ao,t.operation=fo,t.precision=Ys,t.simplify=to,t.triangulate=eo},"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(i.jsts=i.jsts||{})},{}],4:[function(t,e,n){!function(){"use strict";function i(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,s){for(var o,a,u,l,h,c,f,g=r,d=n+1;d<i;d++){var p=(a=e[d],u=e[n],l=e[i],p=f=c=h=void 0,h=u.x,c=u.y,f=l.x-h,p=l.y-c,0===f&&0===p||(1<(u=((a.x-h)*f+(a.y-c)*p)/(f*f+p*p))?(h=l.x,c=l.y):0<u&&(h+=f*u,c+=p*u)),(f=a.x-h)*f+(p=a.y-c)*p);g<p&&(o=d,g=p)}r<g&&(1<o-n&&t(e,n,o,r,s),s.push(e[o]),1<i-o&&t(e,o,i,r,s))}(t,0,n,e,i),i.push(t[n]),i}function t(t,e,n){if(t.length<=2)return t;e=void 0!==e?e*e:1;return t=i(t=n?t:function(t,e){for(var n,i,r,s,o=t[0],a=[o],u=1,l=t.length;u<l;u++)n=t[u],r=o,s=void 0,s=(i=n).x-r.x,r=i.y-r.y,e<s*s+r*r&&(a.push(n),o=n);return o!==n&&a.push(n),a}(t,e),e)}"function"==typeof define&&define.amd?define(function(){return t}):void 0!==e?(e.exports=t,e.exports.default=t):"undefined"!=typeof self?self.simplify=t:window.simplify=t}()},{}],5:[function(t,e,n){var u=t("turf-distance"),l=t("turf-helpers").point,h=t("turf-bearing"),c=t("turf-destination");e.exports=function(t,e,n){var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var r=0,s=0;s<i.length&&!(r<=e&&s===i.length-1);s++){if(e<=r){var o=e-r;if(o){var a=h(i[s],i[s-1])-180;return c(i[s],o,a,n)}return l(i[s])}r+=u(i[s],i[s+1],n)}return l(i[i.length-1])}},{"turf-bearing":8,"turf-destination":14,"turf-distance":15,"turf-helpers":18}],6:[function(t,e,n){var r=t("turf-helpers").polygon;e.exports=function(t){var e=[t[0],t[1]],n=[t[0],t[3]],i=[t[2],t[3]],t=[t[2],t[1]];return r([[e,t,i,n,e]])}},{"turf-helpers":18}],7:[function(t,e,n){var i=t("turf-meta").coordEach;e.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return i(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},{"turf-meta":21}],8:[function(t,e,n){var o=t("turf-invariant").getCoord;e.exports=function(t,e){var n=Math.PI/180,i=180/Math.PI,r=o(t),s=o(e),t=n*r[0],e=n*s[0],r=n*r[1],n=n*s[1],s=Math.sin(e-t)*Math.cos(n),t=Math.cos(r)*Math.sin(n)-Math.sin(r)*Math.cos(n)*Math.cos(e-t);return i*Math.atan2(s,t)}},{"turf-invariant":20}],9:[function(t,e,n){var a=t("turf-helpers").lineString,u=t("./spline.js");e.exports=function(t,e,n){var i=a([]);i.properties=t.properties;for(var r=new u({points:t.geometry.coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:e,sharpness:n}),s=0;s<r.duration;s+=10){var o=r.pos(s);Math.floor(s/100)%2==0&&i.geometry.coordinates.push([o.x,o.y])}return i}},{"./spline.js":10,"turf-helpers":18}],10:[function(t,e,n){function i(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var n=this.centers[e],i=this.centers[e+1],r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,s=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,o=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+s),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+o)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+s),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+o)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}i.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);t<Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))&&(e.push(i),n=r)}return e},i.prototype.vector=function(t){var e=this.pos(t+10),t=this.pos(t-10);return{angle:180*Math.atan2(e.y-t.y,e.x-t.x)/3.14,speed:Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}},i.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);t=e/this.duration;if(1<=t)return this.points[this.length-1];var n,i,r,s,o,a,e=Math.floor((this.points.length-1)*t),t=(this.length-1)*t-e;return n=t,i=this.points[e],r=this.controls[e][1],s=this.controls[e+1][0],o=this.points[e+1],a=[(n=(a=n)*a)*a,3*n*(1-a),3*a*(1-a)*(1-a),(1-a)*(1-a)*(1-a)],{x:o.x*a[0]+s.x*a[1]+r.x*a[2]+i.x*a[3],y:o.y*a[0]+s.y*a[1]+r.y*a[2]+i.y*a[3],z:o.z*a[0]+s.z*a[1]+r.z*a[2]+i.z*a[3]}},e.exports=i},{}],11:[function(t,e,n){var r=t("turf-helpers"),s=r.featureCollection,o=t("jsts"),a=t("geojson-normalize");e.exports=function(t,e,n){var i=r.distanceToDegrees(e,n),t=a(t),t=a(s(t.features.map(function(t){return function(t,e){t=(new o.io.GeoJSONReader).read(t.geometry).buffer(e),e=new o.io.GeoJSONWriter;return{type:"Feature",geometry:t=e.write(t),properties:{}}}(t,i)})));return 1<t.features.length?t:1===t.features.length?t.features[0]:void 0}},{"geojson-normalize":2,jsts:3,"turf-helpers":18}],12:[function(t,e,n){var i=t("turf-bbox"),r=t("turf-helpers").point;e.exports=function(t){var e=i(t),t=(e[0]+e[2])/2,e=(e[1]+e[3])/2;return r([t,e])}},{"turf-bbox":7,"turf-helpers":18}],13:[function(t,e,n){var r=t("turf-meta").coordEach,s=t("turf-helpers").point;e.exports=function(t){var e=0,n=0,i=0;return r(t,function(t){e+=t[0],n+=t[1],i++},!0),s([e/i,n/i])}},{"turf-helpers":18,"turf-meta":21}],14:[function(t,e,n){var a=t("turf-invariant").getCoord,t=t("turf-helpers"),u=t.point,l=t.distanceToRadians;e.exports=function(t,e,n,i){var r=Math.PI/180,s=180/Math.PI,o=a(t),t=r*o[0],o=r*o[1],n=r*n,e=l(e,i),i=Math.asin(Math.sin(o)*Math.cos(e)+Math.cos(o)*Math.sin(e)*Math.cos(n)),o=t+Math.atan2(Math.sin(n)*Math.sin(e)*Math.cos(o),Math.cos(e)-Math.sin(o)*Math.sin(i));return u([s*o,s*i])}},{"turf-helpers":18,"turf-invariant":20}],15:[function(t,e,n){var o=t("turf-invariant").getCoord,a=t("turf-helpers").radiansToDistance;e.exports=function(t,e,n){var i=Math.PI/180,r=o(t),s=o(e),t=i*(s[1]-r[1]),e=i*(s[0]-r[0]),r=i*r[1],s=i*s[1],s=Math.pow(Math.sin(t/2),2)+Math.pow(Math.sin(e/2),2)*Math.cos(r)*Math.cos(s);return a(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),n)}},{"turf-helpers":18,"turf-invariant":20}],16:[function(t,e,n){var i=t("turf-bbox"),r=t("turf-bbox-polygon");e.exports=function(t){return r(i(t))}},{"turf-bbox":7,"turf-bbox-polygon":6}],17:[function(t,e,n){var i=t("turf-helpers").featureCollection,r=t("turf-meta").coordEach,s=t("turf-helpers").point;e.exports=function(t){var e=[];return r(t,function(t){e.push(s(t))}),i(e)}},{"turf-helpers":18,"turf-meta":21}],18:[function(t,e,n){function s(t,e){return{type:"Feature",properties:e||{},geometry:t}}e.exports.feature=s,e.exports.point=function(t,e){if(!Array.isArray(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return s({type:"Point",coordinates:t.slice()},e)},e.exports.polygon=function(t,e){if(!t)throw new Error("No coordinates passed");for(var n=0;n<t.length;n++){var i=t[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var r=0;r<i[i.length-1].length;r++)if(i[i.length-1][r]!==i[0][r])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e)},e.exports.lineString=function(t,e){if(!t)throw new Error("No coordinates passed");return s({type:"LineString",coordinates:t},e)},e.exports.featureCollection=function(t){return{type:"FeatureCollection",features:t}},e.exports.multiLineString=function(t,e){if(!t)throw new Error("No coordinates passed");return s({type:"MultiLineString",coordinates:t},e)},e.exports.multiPoint=function(t,e){if(!t)throw new Error("No coordinates passed");return s({type:"MultiPoint",coordinates:t},e)},e.exports.multiPolygon=function(t,e){if(!t)throw new Error("No coordinates passed");return s({type:"MultiPolygon",coordinates:t},e)},e.exports.geometryCollection=function(t,e){return s({type:"GeometryCollection",geometries:t},e)};var i={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};e.exports.radiansToDistance=function(t,e){e=i[e||"kilometers"];if(void 0===e)throw new Error("Invalid unit");return t*e},e.exports.distanceToRadians=function(t,e){e=i[e||"kilometers"];if(void 0===e)throw new Error("Invalid unit");return t/e},e.exports.distanceToDegrees=function(t,e){e=i[e||"kilometers"];if(void 0===e)throw new Error("Invalid unit");return t/e*57.2958}},{}],19:[function(t,e,n){var u=t("turf-invariant");function l(t,e){for(var n=!1,i=0,r=e.length-1;i<e.length;r=i++){var s=e[i][0],o=e[i][1],a=e[r][0],u=e[r][1];o>t[1]!=u>t[1]&&t[0]<(a-s)*(t[1]-o)/(u-o)+s&&(n=!n)}return n}e.exports=function(t,e){var n=u.getCoord(t),i=e.geometry.coordinates;"Polygon"===e.geometry.type&&(i=[i]);for(var r=0,s=!1;r<i.length&&!s;r++)if(l(n,i[r][0])){for(var o=!1,a=1;a<i[r].length&&!o;)l(n,i[r][a])&&(o=!0),a++;o||(s=!0)}return s}},{"turf-invariant":20}],20:[function(t,e,n){e.exports.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.exports.collectionOf=function(t,e,n){if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}},e.exports.featureOf=function(t,e,n){if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.exports.getCoord=function(t){if(Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1])return t;if(t){if("Feature"===t.type&&t.geometry&&"Point"===t.geometry.type&&Array.isArray(t.geometry.coordinates))return t.geometry.coordinates;if("Point"===t.type&&Array.isArray(t.coordinates))return t.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}},{}],21:[function(t,e,n){function r(t,e,n){for(var i,r,s,o,a,u,l,h,c,f,g="FeatureCollection"===t.type,d="Feature"===t.type,p=g?t.features.length:1,m=0;m<p;m++)for(u=(f="GeometryCollection"===(h=g?t.features[m].geometry:d?t.geometry:t).type)?h.geometries.length:1,s=0;s<u;s++)if(l=(a=f?h.geometries[s]:h).coordinates,c=!n||"Polygon"!==a.type&&"MultiPolygon"!==a.type?0:1,"Point"===a.type)e(l);else if("LineString"===a.type||"MultiPoint"===a.type)for(i=0;i<l.length;i++)e(l[i]);else if("Polygon"===a.type||"MultiLineString"===a.type)for(i=0;i<l.length;i++)for(r=0;r<l[i].length-c;r++)e(l[i][r]);else{if("MultiPolygon"!==a.type)throw new Error("Unknown Geometry Type");for(i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)for(o=0;o<l[i][r].length-c;o++)e(l[i][r][o])}}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}e.exports.coordEach=r,e.exports.coordReduce=function(t,e,n,i){return r(t,function(t){n=e(n,t)},i),n},e.exports.propEach=i,e.exports.propReduce=function(t,e,n){return i(t,function(t){n=e(n,t)}),n},e.exports.featureEach=function(t,e){if("Feature"===t.type)e(t);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n])},e.exports.coordAll=function(t){var e=[];return r(t,function(t){e.push(t)}),e}},{}],22:[function(t,e,n){var i=t("turf-bearing"),r=t("turf-destination"),s=t("turf-distance");e.exports=function(t,e){var n=s(t,e,"miles"),e=i(t,e);return r(t,n/2,e,"miles")}},{"turf-bearing":8,"turf-destination":14,"turf-distance":15}],23:[function(t,e,n){var i=t("turf-helpers").featureCollection;e.exports=function(t,e){return i(function(t,e){var n,i,r=t.slice(0),s=t.length,o=s-e;for(;s-- >o;)i=Math.floor((s+1)*Math.random()),n=r[i],r[i]=r[s],r[s]=n;return r.slice(o)}(t.features,e))}},{"turf-helpers":18}],24:[function(t,e,n){var o=t("simplify-js"),r=["LineString","MultiLineString","Polygon","MultiPolygon"];function s(t,e,n){return"LineString"===t.geometry.type?{type:"LineString",coordinates:i(t.geometry.coordinates,e,n)}:"MultiLineString"===t.geometry.type?{type:"MultiLineString",coordinates:t.geometry.coordinates.map(function(t){return i(t,e,n)})}:"Polygon"===t.geometry.type?{type:"Polygon",coordinates:u(t.geometry.coordinates,e,n)}:"MultiPolygon"===t.geometry.type?{type:"MultiPolygon",coordinates:t.geometry.coordinates.map(function(t){return u(t,e,n)})}:t}function a(t,e){return{type:"Feature",geometry:t,properties:e}}function i(t,e,n){return o(t.map(function(t){return{x:t[0],y:t[1]}}),e,n).map(function(t){return[t.x,t.y]})}function u(t,r,s){return t.map(function(t){var e=t.map(function(t){return{x:t[0],y:t[1]}});if(e.length<4)throw new Error("Invalid polygon");for(var n,i=o(e,r,s).map(function(t){return[t.x,t.y]});(n=i).length<3||3===n.length&&n[2][0]===n[0][0]&&n[2][1]===n[0][1];)i=o(e,r-=.01*r,s).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}e.exports=function(t,n,i){return"Feature"===t.type?a(s(t,n,i),t.properties):"FeatureCollection"===t.type?{type:"FeatureCollection",features:t.features.map(function(t){var e=s(t,n,i);return-1<r.indexOf(e.type)?a(e,t.properties):e})}:"GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(function(t){return-1<r.indexOf(t.type)?s({type:"Feature",geometry:t},n,i):t})}:t}},{"simplify-js":4}],25:[function(t,e,n){var i=t("turf-helpers").polygon,r=t("turf-helpers").featureCollection;function p(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,s,o,a=e.x-t.x,u=e.y-t.y,l=n.x-t.x,h=n.y-t.y,c=a*(t.x+e.x)+u*(t.y+e.y),f=l*(t.x+n.x)+h*(t.y+n.y),g=2*(a*(n.y-e.y)-u*(n.x-e.x));Math.abs(g)<1e-6?(i=Math.min(t.x,e.x,n.x),r=Math.min(t.y,e.y,n.y),s=.5*(Math.max(t.x,e.x,n.x)-i),o=.5*(Math.max(t.y,e.y,n.y)-r),this.x=i+s,this.y=r+o):(this.x=(h*c-u*f)/g,this.y=(a*f-l*c)/g,s=this.x-t.x,o=this.y-t.y),this.r=s*s+o*o}function m(t,e){return e.x-t.x}e.exports=function(t,n){return r(function(t){if(t.length<3)return[];t.sort(m);var e=t.length-1,n=t[e].x,i=t[0].x,r=t[e].y,s=r;for(;e--;)t[e].y<r&&(r=t[e].y),t[e].y>s&&(s=t[e].y);var o,a,u,l=i-n,h=s-r,c=h<l?l:h,i=.5*(i+n),n=.5*(s+r),f=[new p({x:i-20*c,y:n-c,__sentinel:!0},{x:i,y:n+20*c,__sentinel:!0},{x:i+20*c,y:n-c,__sentinel:!0})],g=[],d=[];e=t.length;for(;e--;){for(d.length=0,o=f.length;o--;)0<(l=t[e].x-f[o].x)&&l*l>f[o].r?(g.push(f[o]),f.splice(o,1)):(h=t[e].y-f[o].y,l*l+h*h>f[o].r||(d.push(f[o].a,f[o].b,f[o].b,f[o].c,f[o].c,f[o].a),f.splice(o,1)));for(!function(t){var e,n,i,r,s,o=t.length;t:for(;o;)for(n=t[--o],e=t[--o],i=o;i;)if(s=t[--i],r=t[--i],e===r&&n===s||e===s&&n===r){t.splice(o,2),t.splice(i,2),o-=2;continue t}}(d),o=d.length;o;)u=d[--o],a=d[--o],f.push(new p(a,u,t[e]))}Array.prototype.push.apply(g,f),e=g.length;for(;e--;)(g[e].a.__sentinel||g[e].b.__sentinel||g[e].c.__sentinel)&&g.splice(e,1);return g}(t.features.map(function(t){var e={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return n&&(e.z=t.properties[n]),e})).map(function(t){return i([[[t.a.x,t.a.y],[t.b.x,t.b.y],[t.c.x,t.c.y],[t.a.x,t.a.y]]],{a:t.a.z,b:t.b.z,c:t.c.z})}))}},{"turf-helpers":18}],26:[function(t,e,n){var r=t("jsts");e.exports=function(t,e){var n=new r.io.GeoJSONReader,i=n.read(JSON.stringify(t.geometry)),e=n.read(JSON.stringify(e.geometry)),e=i.union(e);return{type:"Feature",geometry:e=(new r.io.GeoJSONWriter).write(e),properties:t.properties}}},{jsts:3}],27:[function(t,e,n){var s=t("turf-inside"),o=t("turf-helpers").featureCollection;e.exports=function(t,e){for(var n=o([]),i=0;i<e.features.length;i++)for(var r=0;r<t.features.length;r++){s(t.features[r],e.features[i])&&n.features.push(t.features[r])}return n}},{"turf-helpers":18,"turf-inside":19}]},{},[1]);
!function e(o,i,a){function u(t,n){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!n&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(n){return u(o[t][1][n]||n)},r,r.exports,e,o,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,n=0;n<a.length;n++)u(a[n]);return u}({1:[function(n,t,r){window.topojson={topology:n("../node_modules/topojson/lib/topojson/topology"),client:n("../node_modules/topojson/build/topojson.js")}},{"../node_modules/topojson/build/topojson.js":3,"../node_modules/topojson/lib/topojson/topology":15}],2:[function(n,t,r){var e,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(n){e=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(n){o=a}}();var c,f=[],s=!1,l=-1;function h(){s&&c&&(s=!1,c.length?f=c.concat(f):l=-1,f.length&&p())}function p(){if(!s){var n=u(h);s=!0;for(var t=f.length;t;){for(c=f,f=[];++l<t;)c&&c[l].run();l=-1,t=f.length}c=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(n)}}function g(n,t){this.fun=n,this.array=t}function d(){}t.nextTick=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new g(n,t)),1!==f.length||s||u(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(n){return[]},t.binding=function(n){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(n){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],3:[function(n,t,r){var e,o;e=this,o=function(n){"use strict";function g(){}function d(n){if(!n)return g;var r,e,o=n.scale[0],i=n.scale[1],a=n.translate[0],u=n.translate[1];return function(n,t){t||(r=e=0),n[0]=(r+=n[0])*o+a,n[1]=(e+=n[1])*i+u}}function v(n,t){for(var r=0,e=n.length;r<e;){var o=r+e>>>1;n[o]<t?r=1+o:e=o}return r}function r(n,t){n={type:"Feature",id:t.id,properties:t.properties||{},geometry:o(n,t)};return null==t.id&&delete n.id,n}function o(n,t){var a=d(n.transform),u=n.arcs;function o(n,t){t.length&&t.pop();for(var r,e=u[n<0?~n:n],o=0,i=e.length;o<i;++o)t.push(r=e[o].slice()),a(r,o);n<0&&function(n,t){for(var r,e=n.length,o=e-t;o<--e;)r=n[o],n[o++]=n[e],n[e]=r}(t,i)}function r(n){return n=n.slice(),a(n,0),n}function e(n){for(var t=[],r=0,e=n.length;r<e;++r)o(n[r],t);return t.length<2&&t.push(t[0].slice()),t}function i(n){for(var t=e(n);t.length<4;)t.push(t[0].slice());return t}function c(n){return n.map(i)}var f={Point:function(n){return r(n.coordinates)},MultiPoint:function(n){return n.coordinates.map(r)},LineString:function(n){return e(n.arcs)},MultiLineString:function(n){return n.arcs.map(e)},Polygon:function(n){return c(n.arcs)},MultiPolygon:function(n){return n.arcs.map(c)}};return function n(t){var r=t.type;return"GeometryCollection"===r?{type:r,geometries:t.geometries.map(n)}:r in f?{type:r,coordinates:f[r](t)}:null}(t)}function h(a,e){var o={},u={},c={},i=[],f=-1;function n(n,t){for(var r in n){var e=n[r];delete t[e.start],delete e.start,delete e.end,e.forEach(function(n){o[n<0?~n:n]=1}),i.push(e)}}return e.forEach(function(n,t){var r=a.arcs[n<0?~n:n];r.length<3&&!r[1][0]&&!r[1][1]&&(r=e[++f],e[f]=n,e[t]=r)}),e.forEach(function(n){var t,r,e=function(n){var t,r=a.arcs[n<0?~n:n],e=r[0];a.transform?(t=[0,0],r.forEach(function(n){t[0]+=n[0],t[1]+=n[1]})):t=r[r.length-1];return n<0?[t,e]:[e,t]}(n),o=e[0],i=e[1];(e=c[o])?(delete c[e.end],e.push(n),e.end=i,(t=u[i])?(delete u[t.start],r=t===e?e:e.concat(t),u[r.start=e.start]=c[r.end=t.end]=r):u[e.start]=c[e.end]=e):(e=u[i])?(delete u[e.start],e.unshift(n),e.start=o,(t=c[o])?(delete c[t.end],r=t===e?e:t.concat(e),u[r.start=t.start]=c[r.end=e.end]=r):u[e.start]=c[e.end]=e):u[(e=[n]).start=o]=c[e.end=i]=e}),n(c,u),n(u,c),e.forEach(function(n){o[n<0?~n:n]||i.push([n])}),i}function t(n,t,r){var e=[];function o(n){var t=n<0?~n:n;(c[t]||(c[t]=[])).push({i:n,g:u})}function i(n){n.forEach(o)}function a(n){n.forEach(i)}if(1<arguments.length){var u,c=[],f={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(n){n.forEach(a)}};!function n(t){"GeometryCollection"===t.type?t.geometries.forEach(n):t.type in f&&f[(u=t).type](t.arcs)}(t),c.forEach(arguments.length<3?function(n){e.push(n[0].i)}:function(n){r(n[0].g,n[n.length-1].g)&&e.push(n[0].i)})}else for(var s=0,l=n.arcs.length;s<l;++s)e.push(s);return{type:"MultiLineString",arcs:h(n,e)}}function i(n){var t=n[0],r=n[1],n=n[2];return Math.abs((t[0]-n[0])*(r[1]-t[1])-(t[0]-r[0])*(n[1]-t[1]))}function e(u,n){var c={},r=[],e=[];function t(t){t.forEach(function(n){n.forEach(function(n){(c[n=n<0?~n:n]||(c[n]=[])).push(t)})}),r.push(t)}function f(n){return Math.abs(function(n){for(var t,r=-1,e=n.length,o=n[e-1],i=0;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return i/2}(o(u,{type:"Polygon",arcs:[n]}).coordinates[0]))}return n.forEach(function(n){"Polygon"===n.type?t(n.arcs):"MultiPolygon"===n.type&&n.arcs.forEach(t)}),r.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,e.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){c[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),r.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:e.map(function(n){var t,r=[];if(n.forEach(function(n){n.forEach(function(n){n.forEach(function(n){c[n<0?~n:n].length<2&&r.push(n)})})}),1<(t=(r=h(u,r)).length))for(var e,o,i=1,a=f(r[0]);i<t;++i)(e=f(r[i]))>a&&(o=r[0],r[0]=r[i],r[i]=o,a=e);return r})}}function c(n,t){return n[1][2]-t[1][2]}n.version="1.6.27",n.mesh=function(n){return o(n,t.apply(this,arguments))},n.meshArcs=t,n.merge=function(n){return o(n,e.apply(this,arguments))},n.mergeArcs=e,n.feature=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return r(t,n)})}:r(t,n)},n.neighbors=function(n){var e={},t=n.map(function(){return[]});function r(n,r){n.forEach(function(n){n<0&&(n=~n);var t=e[n];t?t.push(r):e[n]=[r]})}function o(n,t){n.forEach(function(n){r(n,t)})}var i,a={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(n,t){n.forEach(function(n){o(n,t)})}};for(i in n.forEach(function t(n,r){"GeometryCollection"===n.type?n.geometries.forEach(function(n){t(n,r)}):n.type in a&&a[n.type](n.arcs,r)}),e)for(var u=e[i],c=u.length,f=0;f<c;++f)for(var s=f+1;s<c;++s){var l,h=u[f],p=u[s];(l=t[h])[i=v(l,p)]!==p&&l.splice(i,0,p),(l=t[p])[i=v(l,h)]!==h&&l.splice(i,0,h)}return t},n.presimplify=function(n,f){var t,a,u,s=d(n.transform),l=function(n){if(!n)return g;var e,o,i=n.scale[0],a=n.scale[1],u=n.translate[0],c=n.translate[1];return function(n,t){t||(e=o=0);var r=Math.round((n[0]-u)/i),t=Math.round((n[1]-c)/a);n[0]=r-e,n[1]=t-o,e=r,o=t}}(n.transform),h=(a=[],u=0,(t={}).push=function(n){return e(a[n._=u]=n,u++),u},t.pop=function(){if(!(u<=0)){var n,t=a[0];return 0<--u&&(n=a[u],o(a[n._=0]=n,0)),t}},t.remove=function(n){var t,r=n._;if(a[r]===n)return r!==--u&&(c(t=a[u],n)<0?e:o)(a[t._=r]=t,r),r},t);function e(n,t){for(;0<t;){var r=(t+1>>1)-1,e=a[r];if(0<=c(n,e))break;a[e._=t]=e,a[n._=t=r]=n}}function o(n,t){for(;;){var r=t+1<<1,e=r-1,o=t,i=a[o];if(e<u&&c(a[e],i)<0&&(i=a[o=e]),r<u&&c(a[r],i)<0&&(i=a[o=r]),o===t)break;a[i._=t]=i,a[n._=t=o]=n}}function p(n){h.remove(n),n[1][2]=f(n),h.push(n)}return f=f||i,n.arcs.forEach(function(n){for(var t,r,e=[],o=0,i=0,a=n.length;i<a;++i)r=n[i],s(n[i]=[r[0],r[1],1/0],i);for(i=1,a=n.length-1;i<a;++i)(t=n.slice(i-1,i+2))[1][2]=f(t),e.push(t),h.push(t);for(i=0,a=e.length;i<a;++i)(t=e[i]).previous=e[i-1],t.next=e[i+1];for(;t=h.pop();){var u=t.previous,c=t.next;t[1][2]<o?t[1][2]=o:o=t[1][2],u&&(u.next=c,u[2]=t[2],p(u)),c&&(c.previous=u,c[0]=t[0],p(c))}n.forEach(l)}),n},Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof r&&void 0!==t?o(r):"function"==typeof define&&define.amd?define(["exports"],o):o(e.topojson=e.topojson||{})},{}],4:[function(n,t,r){t.exports=function(n){var r=1/0,e=1/0,o=-1/0,i=-1/0;function t(n){n&&u.hasOwnProperty(n.type)&&u[n.type](n)}var a,u={GeometryCollection:function(n){n.geometries.forEach(t)},Point:function(n){c(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(c)},LineString:function(n){f(n.coordinates)},MultiLineString:function(n){n.coordinates.forEach(f)},Polygon:function(n){n.coordinates.forEach(f)},MultiPolygon:function(n){n.coordinates.forEach(s)}};function c(n){var t=n[0],n=n[1];t<r&&(r=t),o<t&&(o=t),n<e&&(e=n),i<n&&(i=n)}function f(n){n.forEach(c)}function s(n){n.forEach(f)}for(a in n)t(n[a]);return[r,e,o,i]}},{}],5:[function(n,t,r){r.name="cartesian",r.formatDistance=function(n){return n.toString()},r.ringArea=function(n){var t,r=-1,e=n.length,o=n[e-1],i=0;for(;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return.5*i},r.absoluteArea=Math.abs,r.triangleArea=function(n){return Math.abs((n[0][0]-n[2][0])*(n[1][1]-n[0][1])-(n[0][0]-n[1][0])*(n[2][1]-n[0][1]))},r.distance=function(n,t,r,e){r=n-r,e=t-e;return Math.sqrt(r*r+e*e)}},{}],6:[function(n,t,r){t.exports=function(n,r){function t(n){var t=r(n);null==t?delete n.id:n.id=t}arguments.length<2&&(r=function(n){return n.id});var e,o,i={Feature:t,FeatureCollection:function(n){n.features.forEach(t)}};for(e in n)(o=n[e])&&i.hasOwnProperty(o.type)&&i[o.type](o);return n}},{}],7:[function(n,t,r){t.exports={cartesian:n("./cartesian"),spherical:n("./spherical")}},{"./cartesian":5,"./spherical":13}],8:[function(n,t,r){t.exports=function(n){for(var t=n.arcs,r=-1,e=t.length;++r<e;)for(var o,i,a=t[r],u=0,c=a.length,f=a[0],s=f[0],l=f[1];++u<c;)o=(f=a[u])[0],i=f[1],a[u]=[o-s,i-l],s=o,l=i;return n}},{}],9:[function(n,t,r){t.exports=function(n){function t(n){var t=n.geometry;return null==t?n.type=null:(o(t),n.type=t.type,t.geometries?n.geometries=t.geometries:t.coordinates&&(n.coordinates=t.coordinates)),delete n.geometry,n}function o(n){return n?(a.hasOwnProperty(n.type)&&a[n.type](n),n):{type:null}}var r,e,i={Feature:t,FeatureCollection:function(n){return n.type="GeometryCollection",n.geometries=n.features,n.features.forEach(t),delete n.features,n}},a={GeometryCollection:function(n){for(var t=n.geometries,r=-1,e=t.length;++r<e;)t[r]=o(t[r])},MultiPoint:function(n){n.coordinates.length?n.coordinates.length<2&&(n.type="Point",n.coordinates=n.coordinates[0]):(n.type=null,delete n.coordinates)},LineString:function(n){n.coordinates.length||(n.type=null,delete n.coordinates)},MultiLineString:function(n){for(var t=n.coordinates,r=0,e=0,o=t.length;r<o;++r){var i=t[r];i.length&&(t[e++]=i)}e?e<2?(n.type="LineString",n.coordinates=t[0]):n.coordinates.length=e:(n.type=null,delete n.coordinates)},Polygon:function(n){for(var t=n.coordinates,r=0,e=0,o=t.length;r<o;++r){var i=t[r];i.length&&(t[e++]=i)}e?n.coordinates.length=e:(n.type=null,delete n.coordinates)},MultiPolygon:function(n){for(var t=n.coordinates,r=0,e=0,o=t.length;r<o;++r){for(var i=t[r],a=0,u=0,c=i.length;a<c;++a){var f=i[a];f.length&&(i[u++]=f)}u&&(i.length=u,t[e++]=i)}e?e<2?(n.type="Polygon",n.coordinates=t[0]):t.length=e:(n.type=null,delete n.coordinates)}};for(r in n)n[r]=((e=n[r])&&i.hasOwnProperty(e.type)?i[e.type]:o)(e);return n}},{}],10:[function(n,t,r){var s=n("./quantize");t.exports=function(n,t,r){if(t){if(r===t||!n.bbox.every(isFinite))return n;var e=r/t,o=s(0,0,e,e);n.transform.scale[0]/=e,n.transform.scale[1]/=e}else{var i=n.bbox,a=isFinite(i[0])?i[0]:0,t=isFinite(i[1])?i[1]:0,e=isFinite(i[2])?i[2]:0,i=isFinite(i[3])?i[3]:0,o=s(-a,-t,e-a?(r-1)/(e-a):1,i-t?(r-1)/(i-t):1);n.transform=o.transform}function u(n){n&&f.hasOwnProperty(n.type)&&f[n.type](n)}var c,f={GeometryCollection:function(n){n.geometries.forEach(u)},Point:function(n){o.point(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(o.point)}};for(c in n.objects)u(n.objects[c]);return n.arcs=n.arcs.map(function(n){return o.line(n=n.map(function(n){return n.slice()})),n.length<2&&n.push(n[0]),n}),n}},{"./quantize":12}],11:[function(n,t,r){var h=n("./quantize");t.exports=function(n,t,r,e){arguments.length<4&&(e=r);var o=isFinite(t[0])?t[0]:0,i=isFinite(t[1])?t[1]:0,a=isFinite(t[2])?t[2]:0,u=isFinite(t[3])?t[3]:0,c=h(-o,-i,a-o?(e-1)/(a-o)*r/e:1,u-i?(e-1)/(u-i)*r/e:1);function f(n){n&&l.hasOwnProperty(n.type)&&l[n.type](n)}var s,l={GeometryCollection:function(n){n.geometries.forEach(f)},Point:function(n){c.point(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(c.point)},LineString:function(n){n=n.coordinates;c.line(n),n.length<2&&(n[1]=n[0])},MultiLineString:function(n){for(var t=n.coordinates,r=0,e=t.length;r<e;++r){var o=t[r];c.line(o),o.length<2&&(o[1]=o[0])}},Polygon:function(n){for(var t=n.coordinates,r=0,e=t.length;r<e;++r){var o=t[r];for(c.line(o);o.length<4;)o.push(o[0])}},MultiPolygon:function(n){for(var t=n.coordinates,r=0,e=t.length;r<e;++r)for(var o=t[r],i=0,a=o.length;i<a;++i){var u=o[i];for(c.line(u);u.length<4;)u.push(u[0])}}};for(s in n)f(n[s]);return c.transform}},{"./quantize":12}],12:[function(n,t,r){t.exports=function(t,r,e,o){function s(n){return n[0]=Math.round((n[0]+t)*e),n[1]=Math.round((n[1]+r)*o),n}return{point:s,line:function(n){for(var t,r,e,o=0,i=1,a=n.length,u=s(n[0]),c=u[0],f=u[1];++o<a;)r=(u=s(n[o]))[0],e=u[1],r===c&&e===f||((t=n[i++])[0]=c=r,t[1]=f=e);n.length=i},transform:{scale:[1/e,1/o],translate:[-t,-r]}}}},{}],13:[function(n,t,r){var d=Math.PI,v=d/4,y=d/180;function o(n,t){var r=(t[0]-n[0])*y,e=Math.sin(r),o=Math.cos(r),i=Math.sin(n[1]*y),r=Math.cos(n[1]*y),n=Math.sin(t[1]*y),t=Math.cos(t[1]*y);return Math.atan2(Math.sqrt((e=t*e)*e+(e=r*n-i*t*o)*e),i*n+r*t*o)}function i(n){return(n=Math.sin(n/2))*n}r.name="spherical",r.formatDistance=function(n){var t=n*y*6371;return(1<t?t.toFixed(3)+"km":(1e3*t).toPrecision(3)+"m")+" ("+n.toPrecision(3)+")"},r.ringArea=function(n){if(!n.length)return 0;for(var t=0,r=n[0],e=r[0]*y,o=r[1]*y/2+v,i=e,a=Math.cos(o),u=Math.sin(o),c=1,f=n.length;c<f;++c){r=n[c],e=r[0]*y,o=r[1]*y/2+v;var s=e-i,l=Math.cos(o),h=Math.sin(o),p=u*h,g=a*l+p*Math.cos(s),s=p*Math.sin(s);t+=Math.atan2(s,g),i=e,a=l,u=h}return 2*(d<t?t-2*d:t<-d?t+2*d:t)},r.absoluteArea=function(n){return n<0?n+4*d:n},r.triangleArea=function(n){var t=o(n[0],n[1]),r=o(n[1],n[2]),e=o(n[2],n[0]),n=(t+r+e)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(n/2)*Math.tan((n-t)/2)*Math.tan((n-r)/2)*Math.tan((n-e)/2))))},r.distance=function(n,t,r,e){return n*=y,t*=y,r*=y,e*=y,2*Math.asin(Math.sqrt(i(e-t)+Math.cos(t)*Math.cos(e)*i(r-n)))}},{}],14:[function(n,t,r){var l=n("./type");t.exports=function(n,t){var r,e,o,i=-180,P=i+.01,x=179.99,a=-90,b=a+.01,u=90,q=u-.01;function L(n){return n<=b?[0,a]:q<=n?[0,u]:[i,n]}function c(n){for(var t=[],r=0,e=n.length;r<e;++r){for(var o=n[r],i=0,a=o.length;i<a;++i){var u=o[i];u.polygon=o,t.push(u);for(var c=0,f=u.length;c<f;++c){var s=u[c],l=s[0],s=s[1];if(l<=P||x<=l||s<=b||q<=s){for(var h=c+1;h<f;++h){var p=u[h],g=p[0],p=p[1];if(P<g&&g<x&&b<p&&p<q)break}if(h!==c+1){if(c?((l=u.slice(0,c+1)).polygon=o,l[l.length-1]=L(s),t[t.length-1]=l):t.pop(),f<=h)break;t.push(u=u.slice(h-1)),u[0]=L(u[0][1]),u.polygon=o,c=-1,f=u.length}}}}o.length=0}for(var d={},v={},c=0,f=t.length;c<f;++c){var y=(M=t[c])[0],m=M[M.length-1];y[0]!==m[0]||y[1]!==m[1]?(M.index=c,d[y]=v[m]=M):(M.polygon.push(M),t[c]=null)}for(var M,w,E,c=0;c<f;++c){(M=t[c])&&(y=M[0],m=M[M.length-1],w=v[y],E=d[m],delete d[y],delete v[m],y[0]!==m[0]||y[1]!==m[1]?w?(delete v[y],delete d[w[0]],w.pop(),t[w.index]=null,(M=w.concat(M)).polygon=w.polygon,w===E?M.polygon.push(M):(M.index=f++,t.push(d[M[0]]=v[M[M.length-1]]=M))):E?(delete d[m],delete v[E[E.length-1]],M.pop(),(M=M.concat(E)).polygon=E.polygon,M.index=f++,t[E.index]=null,t.push(d[M[0]]=v[M[M.length-1]]=M)):(M.push(M[0]),M.polygon.push(M)):M.polygon.push(M))}}t&&(r=t.scale[0],e=t.scale[1],o=t.translate[0],t=t.translate[1],i=Math.round((i-o)/r),Math.round((180-o)/r),a=Math.round((a-t)/e),u=Math.round((u-t)/e),P=Math.round((P-o)/r),x=Math.round((x-o)/r),b=Math.round((b-t)/e),q=Math.round((q-t)/e));var f,s=l({Polygon:function(n){c([n.coordinates])},MultiPolygon:function(n){c(n.coordinates)}});for(f in n)s.object(n[f])}},{"./type":26}],15:[function(n,t,r){(function(E){(function(){n("./type");var s=n("./stitch"),l=n("./coordinate-systems"),h=n("./topology/index"),p=n("./delta"),g=n("./geomify"),d=n("./pre-quantize"),v=n("./post-quantize"),y=n("./bounds"),m=n("./compute-id"),M=n("./transform-properties"),w=1e-6;t.exports=function(n,t){var r,e=1e4,o=1e4,i=function(n){return n.id},a=function(){},u=!0,c=!1,f=null;if(t&&("verbose"in t&&(c=!!t.verbose),"stitch-poles"in t&&(u=!!t["stitch-poles"]),"coordinate-system"in t&&(f=l[t["coordinate-system"]]),"minimum-area"in t&&t["minimum-area"],"quantization"in t&&(e=o=+t.quantization),"pre-quantization"in t&&(e=+t["pre-quantization"]),"post-quantization"in t&&(o=+t["post-quantization"]),"id"in t&&(i=t.id),"property-transform"in t&&(a=t["property-transform"])),e/o%1)throw new Error("post-quantization is not a divisor of pre-quantization");if(e&&!o)throw new Error("post-quantization is required when input is already quantized");m(n,i),M(n,a),g(n);i=y(n),a=i[0]<-180-w||i[1]<-90-w||i[2]>180+w||i[3]>90+w;if(f||(f=l[a?"cartesian":"spherical"],t&&(t["coordinate-system"]=f.name)),f===l.spherical){if(a)throw new Error("spherical coordinates outside of [180, 90]");i[0]<w-180&&(i[0]=-180),i[1]<w-90&&(i[1]=-90),i[2]>180-w&&(i[2]=180),i[3]>90-w&&(i[3]=90)}c&&E.stderr.write("bounds: "+i.join(" ")+" ("+f.name+")\n"),e&&(r=d(n,i,e,o),c&&E.stderr.write("pre-quantization: "+r.scale.map(function(n){return f.formatDistance(n)}).join(" ")+"\n")),f===l.spherical&&u&&s(n,r);n=h(n);return e&&(n.transform=r),n.bbox=i,c&&E.stderr.write("topology: "+n.arcs.length+" arcs, "+n.arcs.reduce(function(n,t){return n+t.length},0)+" points\n"),o&&o!==e&&(v(n,e,o),r=n.transform,c&&E.stderr.write("post-quantization: "+r.scale.map(function(n){return f.formatDistance(n)}).join(" ")+"\n")),o&&p(n),n}}).call(this)}).call(this,n("_process"))},{"./bounds":4,"./compute-id":6,"./coordinate-systems":7,"./delta":8,"./geomify":9,"./post-quantize":10,"./pre-quantize":11,"./stitch":14,"./topology/index":21,"./transform-properties":25,"./type":26,_process:2}],16:[function(n,t,r){var w=n("./join");function E(n,t,r){for(var e,o=t+(r---t>>1);t<o;++t,--r)e=n[t],n[t]=n[r],n[r]=e}t.exports=function(n){for(var t=w(n),r=n.coordinates,e=n.lines,o=n.rings,i=0,a=e.length;i<a;++i)for(var u=e[i],c=u[0],f=u[1];++c<f;){t.has(r[c])&&(g={0:c,1:u[1]},u[1]=c,u=u.next=g)}for(var s,l,h,p,i=0,a=o.length;i<a;++i)for(var g,d=o[i],v=d[0],y=v,m=d[1],M=t.has(r[v]);++y<m;){t.has(r[y])&&(M?(g={0:y,1:d[1]},d[1]=y,d=d.next=g):(p=(h=m)-y,E(s=r,l=v,h),E(s,l,l+p),E(s,l+p,h),r[m]=r[v],M=!0,y=v))}return n}},{"./join":22}],17:[function(n,t,r){n("./join");var d=n("./hashmap"),v=n("./point-hash"),y=n("./point-equal");t.exports=function(n){var s=n.coordinates,t=n.lines,r=n.rings,e=t.length+r.length;delete n.lines,delete n.rings;for(var o=0,i=t.length;o<i;++o)for(var a=t[o];a=a.next;)++e;for(o=0,i=r.length;o<i;++o)for(var u=r[o];u=u.next;)++e;for(var f=d(2*e*1.4,v,y),l=n.arcs=[],o=0,i=t.length;o<i;++o)for(a=t[o];c(a),a=a.next;);for(o=0,i=r.length;o<i;++o){if((u=r[o]).next)for(;c(u),u=u.next;);else!function(n){var t,r;if(r=f.get(t=s[n[0]]))for(var e=0,o=r.length;e<o;++e){if(h(i=r[e],n))return n[0]=i[0],n[1]=i[1];if(p(i,n))return n[0]=i[1],n[1]=i[0]}if(r=f.get(t=s[n[0]+g(n)]))for(var i,e=0,o=r.length;e<o;++e){if(h(i=r[e],n))return n[0]=i[0],n[1]=i[1];if(p(i,n))return n[0]=i[1],n[1]=i[0]}r?r.push(n):f.set(t,[n]);l.push(n)}(u)}function c(n){var t,r,e,o;if(e=f.get(t=s[n[0]]))for(var i=0,a=e.length;i<a;++i){var u=e[i];if(function(n,t){var r=n[0],e=t[0],o=n[1],t=t[1];if(r-o!=e-t)return!1;for(;r<=o;++r,++e)if(!y(s[r],s[e]))return!1;return!0}(u,n))return n[0]=u[0],void(n[1]=u[1])}if(o=f.get(r=s[n[1]]))for(i=0,a=o.length;i<a;++i){var c=o[i];if(function(n,t){var r=n[0],e=t[0],o=n[1],i=t[1];if(r-o!=e-i)return!1;for(;r<=o;++r,--i)if(!y(s[r],s[i]))return!1;return!0}(c,n))return n[1]=c[0],void(n[0]=c[1])}e?e.push(n):f.set(t,[n]),o?o.push(n):f.set(r,[n]),l.push(n)}function h(n,t){var r=n[0],e=t[0],o=n[1]-r;if(o==t[1]-e){for(var i=g(n),a=g(t),u=0;u<o;++u)if(!y(s[r+(u+i)%o],s[e+(u+a)%o]))return;return 1}}function p(n,t){var r=n[0],e=t[0],o=n[1],i=t[1],a=o-r;if(a==i-e){for(var u=g(n),c=a-g(t),f=0;f<a;++f)if(!y(s[r+(f+u)%a],s[i-(f+c)%a]))return;return 1}}function g(n){for(var t=n[0],r=n[1],e=t,o=e,i=s[e];++e<r;){var a=s[e];(a[0]<i[0]||a[0]===i[0]&&a[1]<i[1])&&(o=e,i=a)}return o-t}return n}},{"./hashmap":19,"./join":22,"./point-equal":23,"./point-hash":24}],18:[function(n,t,r){t.exports=function(n){var o=-1,i=[],a=[],u=[];function t(n){n&&e.hasOwnProperty(n.type)&&e[n.type](n)}var r,e={GeometryCollection:function(n){n.geometries.forEach(t)},LineString:function(n){n.arcs=c(n.coordinates),delete n.coordinates},MultiLineString:function(n){n.arcs=n.coordinates.map(c),delete n.coordinates},Polygon:function(n){n.arcs=n.coordinates.map(f),delete n.coordinates},MultiPolygon:function(n){n.arcs=n.coordinates.map(s),delete n.coordinates}};function c(n){for(var t=0,r=n.length;t<r;++t)u[++o]=n[t];var e={0:o-r+1,1:o};return i.push(e),e}function f(n){for(var t=0,r=n.length;t<r;++t)u[++o]=n[t];var e={0:o-r+1,1:o};return a.push(e),e}function s(n){return n.map(f)}for(r in n)t(n[r]);return{type:"Topology",coordinates:u,lines:i,rings:a,objects:n}}},{}],19:[function(n,t,r){t.exports=function(i,a,u,n,c,t){3===arguments.length&&(n=t=Array,c=null);for(var f=new n(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),s=new t(i),l=i-1,r=0;r<i;++r)f[r]=c;return{set:function(n,t){for(var r=a(n)&l,e=f[r],o=0;e!=c;){if(u(e,n))return s[r]=t;if(++o>=i)throw new Error("full hashmap");e=f[r=r+1&l]}return f[r]=n,s[r]=t,t},maybeSet:function(n,t){for(var r=a(n)&l,e=f[r],o=0;e!=c;){if(u(e,n))return s[r];if(++o>=i)throw new Error("full hashmap");e=f[r=r+1&l]}return f[r]=n,s[r]=t,t},get:function(n,t){for(var r=a(n)&l,e=f[r],o=0;e!=c;){if(u(e,n))return s[r];if(++o>=i)break;e=f[r=r+1&l]}return t},keys:function(){for(var n=[],t=0,r=f.length;t<r;++t){var e=f[t];e!=c&&n.push(e)}return n}}}},{}],20:[function(n,t,r){t.exports=function(o,i,a,n,u){3===arguments.length&&(n=Array,u=null);for(var c=new n(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),f=o-1,t=0;t<o;++t)c[t]=u;return{add:function(n){for(var t=i(n)&f,r=c[t],e=0;r!=u;){if(a(r,n))return!0;if(++e>=o)throw new Error("full hashset");r=c[t=t+1&f]}return c[t]=n,!0},has:function(n){for(var t=i(n)&f,r=c[t],e=0;r!=u;){if(a(r,n))return!0;if(++e>=o)break;r=c[t=t+1&f]}return!1},values:function(){for(var n=[],t=0,r=c.length;t<r;++t){var e=c[t];e!=u&&n.push(e)}return n}}}},{}],21:[function(n,t,r){var f=n("./hashmap"),s=n("./extract"),l=n("./cut"),h=n("./dedup");function p(n){var t=n[0],r=n[1];return r<t&&(n=t,t=r,r=n),t+31*r}function g(n,t){var r,e=n[0],o=n[1],n=t[0],t=t[1];return o<e&&(r=e,e=o,o=r),t<n&&(r=n,n=t,t=r),e===n&&o===t}t.exports=function(n){var t=h(l(s(n))),r=t.coordinates,e=f(1.4*t.arcs.length,p,g);function o(n){n&&a.hasOwnProperty(n.type)&&a[n.type](n)}n=t.objects,t.arcs=t.arcs.map(function(n,t){return e.set(n,t),r.slice(n[0],n[1]+1)}),delete t.coordinates,r=null;var i,a={GeometryCollection:function(n){n.geometries.forEach(o)},LineString:function(n){n.arcs=u(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(u)},Polygon:function(n){n.arcs=n.arcs.map(u)},MultiPolygon:function(n){n.arcs=n.arcs.map(c)}};function u(n){var t=[];do{var r=e.get(n)}while(t.push(n[0]<n[1]?r:~r),n=n.next);return t}function c(n){return n.map(u)}for(i in n)o(n[i]);return t}},{"./cut":16,"./dedup":17,"./extract":18,"./hashmap":19}],22:[function(n,t,r){var q=n("./hashset"),L=n("./hashmap"),j=n("./point-hash"),F=n("./point-equal");t.exports=function(n){for(var o=n.coordinates,t=n.lines,r=n.rings,e=function(){for(var n=L(1.4*o.length,E,P,Int32Array,-1,Int32Array),t=new Int32Array(o.length),r=0,e=o.length;r<e;++r)t[r]=n.maybeSet(r,r);return t}(),i=new Int32Array(o.length),a=new Int32Array(o.length),u=new Int32Array(o.length),c=new Int8Array(o.length),f=0,s=0,l=o.length;s<l;++s)i[s]=a[s]=u[s]=-1;for(s=0,l=t.length;s<l;++s){var h=t[s],p=h[0],g=h[1],d=e[p],v=e[++p];for(++f,c[d]=1;++p<=g;)w(s,d,d=v,v=e[p]);++f,c[v]=1}for(s=0,l=o.length;s<l;++s)i[s]=-1;for(s=0,l=r.length;s<l;++s){var y=r[s],m=y[0]+1,M=y[1];for(w(s,e[M-1],d=e[m-1],v=e[m]);++m<=M;)w(s,d,d=v,v=e[m])}function w(n,t,r,e){var o;i[r]!==n&&(i[r]=n,0<=(o=a[r])?(n=u[r],o===t&&n===e||o===e&&n===t||(++f,c[r]=1)):(a[r]=t,u[r]=e))}function E(n){return j(o[n])}function P(n,t){return F(o[n],o[t])}i=a=u=null;for(var x,b=q(1.4*f,j,F),s=0,l=o.length;s<l;++s)c[x=e[s]]&&b.add(o[x]);return b}},{"./hashmap":19,"./hashset":20,"./point-equal":23,"./point-hash":24}],23:[function(n,t,r){t.exports=function(n,t){return n[0]===t[0]&&n[1]===t[1]}},{}],24:[function(n,t,r){var e=new ArrayBuffer(16),o=new Float64Array(e),i=new Uint32Array(e);t.exports=function(n){o[0]=n[0],o[1]=n[1];n=i[0]^i[1];return 2147483647&(n=n<<5^n>>7^i[2]^i[3])}},{}],25:[function(n,t,r){t.exports=function(n,e){function t(n){null==n.properties&&(n.properties={});var t=n.properties=e(n);if(t)for(var r in t)return;delete n.properties}arguments.length<2&&(e=function(){});var r,o,i={Feature:t,FeatureCollection:function(n){n.features.forEach(t)}};for(r in n)(o=n[r])&&i.hasOwnProperty(o.type)&&i[o.type](o);return n}},{}],26:[function(n,t,r){t.exports=function(n){for(var t in e)t in n||(n[t]=e[t]);return n.defaults=e,n};var e={Feature:function(n){n.geometry&&this.geometry(n.geometry)},FeatureCollection:function(n){for(var t=n.features,r=-1,e=t.length;++r<e;)this.Feature(t[r])},GeometryCollection:function(n){for(var t=n.geometries,r=-1,e=t.length;++r<e;)this.geometry(t[r])},LineString:function(n){this.line(n.coordinates)},MultiLineString:function(n){for(var t=n.coordinates,r=-1,e=t.length;++r<e;)this.line(t[r])},MultiPoint:function(n){for(var t=n.coordinates,r=-1,e=t.length;++r<e;)this.point(t[r])},MultiPolygon:function(n){for(var t=n.coordinates,r=-1,e=t.length;++r<e;)this.polygon(t[r])},Point:function(n){this.point(n.coordinates)},Polygon:function(n){this.polygon(n.coordinates)},object:function(n){return null==n?null:i.hasOwnProperty(n.type)?this[n.type](n):this.geometry(n)},geometry:function(n){return null!=n&&o.hasOwnProperty(n.type)?this[n.type](n):null},point:function(){},line:function(n){for(var t=-1,r=n.length;++t<r;)this.point(n[t])},polygon:function(n){for(var t=-1,r=n.length;++t<r;)this.line(n[t])}},o={LineString:1,MultiLineString:1,MultiPoint:1,MultiPolygon:1,Point:1,Polygon:1,GeometryCollection:1},i={Feature:1,FeatureCollection:1}},{}]},{},[1]);
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).overpassWizard=e()}(function(){return function n(a,u,i){function o(r,e){if(!u[r]){if(!a[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(s)return s(r,!0);throw(t=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",t}t=u[r]={exports:{}},a[r][0].call(t.exports,function(e){return o(a[r][1][e]||e)},t,t.exports,n,a,u,i)}return u[r].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)o(i[e]);return o}({1:[function(e,r,t){r.exports=function(u){var e={};if(!(u=u||{})){if("undefined"==typeof $)return!1;var r="data/iD_presets.json";try{$.ajax(r,{async:!1,dataType:"json"}).success(function(e){u=e}).error(function(){throw new Error})}catch(e){console.error("failed to load presets file",r,e)}}return Object.keys(u).map(function(e){e=u[e];e.nameCased=e.name,e.name=e.name.toLowerCase(),e.terms=e.terms?e.terms.map(function(e){return e.toLowerCase()}):[]}),function(){if("undefined"!=typeof $&&"undefined"!=typeof i18n){var e=i18n.getLanguage();if("en"!=e){var r="data/iD_presets_"+e+".json";try{$.ajax(r,{async:!1,dataType:"json"}).success(function(n){Object.keys(n).map(function(e){var r=n[e];(e=u[e]).translated=!0;var t=e.name;e.nameCased=r.name,e.name=r.name.toLowerCase(),r.terms&&(e.terms=r.terms.split(",").map(function(e){return e.trim().toLowerCase()}).concat(e.terms)),e.terms.unshift(t)})}).error(function(){throw new Error})}catch(e){console.error("failed to load preset translations file: "+r)}}}}(),e.get_query_clause=function(e){var t=e.free.toLowerCase(),e=Object.keys(u).map(function(e){return u[e]}).filter(function(e){return!1!==e.searchable&&(e.name===t||(e._termsIndex=e.terms.indexOf(t),-1!=e._termsIndex))});if(0===e.length)return!1;e.sort(function(e,r){return e.name===t?-1:r.name===t?1:e._termsIndex-r._termsIndex});var n=e[0],r=[];return n.geometry.forEach(function(e){switch(e){case"point":case"vertex":r.push("node");break;case"line":r.push("way");break;case"area":r.push("way"),r.push("relation");break;case"relation":r.push("relation");break;default:console.error("unknown geometry type "+e+" of preset "+n.name)}}),{types:r.filter(function(e,r,t){return t.indexOf(e)===r}),conditions:Object.keys(n.tags).map(function(e){var r=n.tags[e];return{query:"*"===r?"key":"eq",key:e,val:r}})}},e.fuzzy_search=function(e){var t=e.free.toLowerCase(),r=2+Math.floor(t.length/7);function n(e){return levenshteinDistance(e,t)<=r}e=Object.keys(u).map(function(e){return u[e]}).filter(function(e){return!1!==e.searchable&&(!!n(e.name)||e.terms.some(n))});return 0!==e.length&&(e.sort(function(e,r){return a(e)-a(r)}),e[0].nameCased);function a(e){return[e.name].concat(e.terms).map(function(e,r){return levenshteinDistance(e,t)}).reduce(function(e,r){return e<=r?e:r})}},e}},{}],2:[function(k,e,r){var q,x=k("./parser.js");function w(e){var r={logical:"or",queries:[]};return r.queries=function e(r){if(!r.logical)return[{logical:"and",queries:[r]}];if("and"===r.logical){for(var t=e(r.queries[0]),n=e(r.queries[1]),a=[],u=0;u<t.length;u++)for(var i=0;i<n.length;i++)a.push({logical:"and",queries:t[u].queries.concat(n[i].queries)});return a}if("or"===r.logical)return t=e(r.queries[0]),n=e(r.queries[1]),[].concat(t,n);console.error("unsupported boolean operator: "+r.logical)}(e),r}e.exports=function(e,r){var t,n,a={comment:!0,outputMode:"geom",globalBbox:!0,timeout:25,maxsize:void 0,outputFormat:"json",aroundRadius:1e3,freeFormPresets:void 0};for(t in r)a[t]=r[t];function u(e){return e.replace(/\*\//g,"[]").replace(/\n/g,"\\n")}r=a;try{n=x.parse(e)}catch(e){return console.error("couldn't parse wizard input"),!1}var i,o=[];switch(!0===r.comment?(o.push("/*"),o.push("This has been generated by the overpass-turbo wizard."),o.push("The original search was:"),o.push(""+u(e)+""),o.push("*/")):"string"==typeof r.comment&&(o.push("/*"),o.push(r.comment),o.push("*/"),comment=!0),o.push("[out:"+r.outputFormat+"][timeout:"+r.timeout+"]"+(void 0!==r.maxsize?"[maxsize:"+r.maxsize+"]":"")+(r.globalBbox&&"bbox"===n.bounds?"[bbox:{{bbox}}]":"")+";"),n.bounds){case"area":r.comment&&o.push("// fetch area "+n.area+" to search in"),o.push("{{geocodeArea:"+n.area+"}}->.searchArea;"),i="(area.searchArea)";break;case"around":r.comment&&o.push("// adjust the search radius (in meters) here"),o.push("{{radius="+r.aroundRadius+"}}"),i="(around:{{radius}},{{geocodeCoords:"+n.area+"}})";break;case"bbox":i=r.globalBbox?"":"({{bbox}})";break;case"global":i=void 0;break;default:return console.error("unknown bounds condition: "+n.bounds),!1}function s(e){function r(e){return e.replace(/([()[{*+.$^\\|?])/g,"\\$1")}function t(e){if("string"==typeof e)return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\t/g,"\\t").replace(/\n/g,"\\n")}var n=t(e.key),a=t(e.val);switch("substr"===e.query&&(e.query="like",e.val={regex:r(e.val)}),""===a&&("eq"===e.query?(e.query="like",e.val={regex:"^$"}):"neq"===e.query&&(e.query="notlike",e.val={regex:"^$"})),""===n&&("key"===e.query?(e.query="likelike",n="^$",e.val={regex:".*"}):"eq"===e.query?(e.query="likelike",n="^$",e.val={regex:"^"+r(e.val)+"$"}):"like"===e.query&&(e.query="likelike",n="^$")),e.query){case"key":return'["'+n+'"]';case"nokey":return'["'+n+'"!~".*"]';case"eq":return'["'+n+'"="'+a+'"]';case"neq":return'["'+n+'"!="'+a+'"]';case"like":return'["'+n+'"~"'+t(e.val.regex)+'"'+("i"===e.val.modifier?",i":"")+"]";case"likelike":return'[~"'+n+'"~"'+t(e.val.regex)+'"'+("i"===e.val.modifier?",i":"")+"]";case"notlike":return'["'+n+'"!~"'+t(e.val.regex)+'"'+("i"===e.val.modifier?",i":"")+"]";case"meta":switch(e.meta){case"id":return"("+a+")";case"newer":return e.val.match(/^-?\d+ ?(seconds?|minutes?|hours?|days?|weeks?|months?|years?)?$/)?'(newer:"{{date:'+a+'}}")':'(newer:"'+a+'")';case"user":return'(user:"'+a+'")';case"uid":return"(uid:"+a+")";default:return console.error("unknown query type: meta/"+e.meta),!1}case"free form":default:return console.error("unknown query type: "+e.query),!1}}function l(e){function r(e){return null===e.match(/^[a-zA-Z0-9_]+$/)?'"'+e.replace(/"/g,'\\"')+'"':e}function t(e){return null===e.regex.match(/^[a-zA-Z0-9_]+$/)||e.modifier?"/"+e.regex.replace(/\//g,"\\/")+"/"+(e.modifier||""):e.regex}switch(e.query){case"key":return u(r(e.key)+"=*");case"nokey":return u(r(e.key)+"!=*");case"eq":return u(r(e.key)+"="+r(e.val));case"neq":return u(r(e.key)+"!="+r(e.val));case"like":return u(r(e.key)+"~"+t(e.val));case"likelike":return u("~"+r(e.key)+"~"+t(e.val));case"notlike":return u(r(e.key)+"!~"+t(e.val));case"substr":return u(r(e.key)+":"+r(e.val));case"meta":switch(e.meta){case"id":return u("id:"+r(e.val));case"newer":return u("newer:"+r(e.val));case"user":return u("user:"+r(e.val));case"uid":return u("uid:"+r(e.val));default:return""}case"free form":return u(r(e.free));default:return""}}n.query=w(n.query),r.comment&&o.push("// gather results"),o.push("(");for(var c=0;c<n.query.queries.length;c++){for(var p=n.query.queries[c],f=["node","way","relation"],d=[],$=[],y=0;y<p.queries.length;y++){var h=p.queries[y];if("free form"===h.query){var v=(q=q||k("./free")(r.freeFormPresets)).get_query_clause(h);if(!1===v)return console.error("Couldn't find preset for free form input: "+h.free),!1;f=f.filter(function(e){return-1!=v.types.indexOf(e)}),r.comment&&$.push(l(h)),d=d.concat(v.conditions.map(s))}else if("type"===h.query)f=-1!=f.indexOf(h.type)?[h.type]:[];else{r.comment&&$.push(l(h));h=s(h);if(!1===h)return!1;d.push(h)}}$=$.join(" and "),r.comment&&o.push("  // query part for: "+$+"");for(var m=0;m<f.length;m++){for(var g="  "+f[m],b=0;b<d.length;b++)g+=d[b];i&&(g+=i),g+=";",o.push(g)}}return o.push(");"),r.comment&&o.push("// print results"),"recursive"===r.outputMode?(o.push("out body;"),o.push(">;"),o.push("out skel qt;")):o.push("out "+r.outputMode+";"),o.join("\n")}},{"./free":1,"./parser.js":3}],3:[function(e,r,t){r.exports=function(){"use strict";function v(e,r,t,n){this.message=e,this.expected=r,this.found=t,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,v)}function e(){this.constructor=r}var r,t;return r=v,t=Error,e.prototype=t.prototype,r.prototype=new e,{SyntaxError:v,parse:function(c){var e=1<arguments.length?arguments[1]:{},p={},r={start:0},t=0,f=[function(e){return e},"in bbox",{type:"literal",value:"in bbox",description:'"in bbox"'},"IN BBOX",{type:"literal",value:"IN BBOX",description:'"IN BBOX"'},function(e){return{bounds:"bbox",query:e}},"in",{type:"literal",value:"in",description:'"in"'},"IN",{type:"literal",value:"IN",description:'"IN"'},function(e,r){return{bounds:"area",query:e,area:r}},"around",{type:"literal",value:"around",description:'"around"'},"AROUND",{type:"literal",value:"AROUND",description:'"AROUND"'},function(e,r){return{bounds:"around",query:e,area:r}},"global",{type:"literal",value:"global",description:'"global"'},"GLOBAL",{type:"literal",value:"GLOBAL",description:'"GLOBAL"'},function(e){return{bounds:"global",query:e}},"or",{type:"literal",value:"or",description:'"or"'},"OR",{type:"literal",value:"OR",description:'"OR"'},"||",{type:"literal",value:"||",description:'"||"'},"|",{type:"literal",value:"|",description:'"|"'},function(e,r){return{logical:"or",queries:[e,r]}},"and",{type:"literal",value:"and",description:'"and"'},"AND",{type:"literal",value:"AND",description:'"AND"'},"&&",{type:"literal",value:"&&",description:'"&&"'},"&",{type:"literal",value:"&",description:'"&"'},function(e,r){return{logical:"and",queries:[e,r]}},"(",{type:"literal",value:"(",description:'"("'},")",{type:"literal",value:")",description:'")"'},function(e){return e},"=",{type:"literal",value:"=",description:'"="'},"==",{type:"literal",value:"==",description:'"=="'},function(e,r){return{query:"eq",key:e,val:r}},"!=",{type:"literal",value:"!=",description:'"!="'},"<>",{type:"literal",value:"<>",description:'"<>"'},function(e,r){return{query:"neq",key:e,val:r}},"*",{type:"literal",value:"*",description:'"*"'},function(e){return{query:"key",key:e}},"is",{type:"literal",value:"is",description:'"is"'},"not",{type:"literal",value:"not",description:'"not"'},"null",{type:"literal",value:"null",description:'"null"'},"IS",{type:"literal",value:"IS",description:'"IS"'},"NOT",{type:"literal",value:"NOT",description:'"NOT"'},"NULL",{type:"literal",value:"NULL",description:'"NULL"'},function(e){return{query:"nokey",key:e}},"~=",{type:"literal",value:"~=",description:'"~="'},"~",{type:"literal",value:"~",description:'"~"'},"=~",{type:"literal",value:"=~",description:'"=~"'},function(e,r){return{query:"like",key:e,val:r.regex?r:{regex:r}}},"like",{type:"literal",value:"like",description:'"like"'},"LIKE",{type:"literal",value:"LIKE",description:'"LIKE"'},function(e,r){return{query:"likelike",key:e,val:r.regex?r:{regex:r}}},"!~",{type:"literal",value:"!~",description:'"!~"'},function(e,r){return{query:"notlike",key:e,val:r.regex?r:{regex:r}}},":",{type:"literal",value:":",description:'":"'},function(e,r){return{query:"substr",key:e,val:r}},"type",{type:"literal",value:"type",description:'"type"'},function(e){return{query:"type",type:e}},"user",{type:"literal",value:"user",description:'"user"'},"uid",{type:"literal",value:"uid",description:'"uid"'},"newer",{type:"literal",value:"newer",description:'"newer"'},"id",{type:"literal",value:"id",description:'"id"'},function(e,r){return{query:"meta",meta:e,val:r}},function(e){return{query:"free form",free:e}},{type:"other",description:"Key"},/^[a-zA-Z0-9_:\-]/,{type:"class",value:"[a-zA-Z0-9_:-]",description:"[a-zA-Z0-9_:-]"},function(e){return e.join("")},'"',{type:"literal",value:'"',description:'"\\""'},"'",{type:"literal",value:"'",description:'"\'"'},function(e){return e[1]},{type:"other",description:"string"},/^[^'" ()~=!*\/:<>&|[\]{}#+@$%?\^.,]/,{type:"class",value:"[^'\" ()~=!*/:<>&|[\\]{}#+@$%?^.,]",description:"[^'\" ()~=!*/:<>&|[\\]{}#+@$%?^.,]"},function(e){return e.join("")},"\\",{type:"literal",value:"\\",description:'"\\\\"'},{type:"any",description:"any character"},function(e){return e},function(e){return e},/^['"\\bfnrtv]/,{type:"class",value:"['\"\\\\bfnrtv]",description:"['\"\\\\bfnrtv]"},function(e){return e.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","\t").replace("v","\v")},"/",{type:"literal",value:"/",description:'"/"'},"i",{type:"literal",value:"i",description:'"i"'},"",function(e){return{regex:e[1],modifier:e[3]}},"\\/",{type:"literal",value:"\\/",description:'"\\\\/"'},function(){return"/"},{type:"other",description:"whitespace"},/^[ \t\n\r]/,{type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"}],d=[l("%;;/:#;!/1$;;/($8#: #!!)(#'#(\"'#&'#"),l('%;"/Y#$;</&#0#*;<&&&#/C$2!""6!7".) &2#""6#7$/($8#:%#!")(#\'#("\'#&\'#. &%;"/y#$;</&#0#*;<&&&#/c$2&""6&7\'.) &2(""6(7)/H$$;</&#0#*;<&&&#/2$;2/)$8%:*%"$ )(%\'#($\'#(#\'#("\'#&\'#. &%;"/y#$;</&#0#*;<&&&#/c$2+""6+7,.) &2-""6-7./H$$;</&#0#*;<&&&#/2$;2/)$8%:/%"$ )(%\'#($\'#(#\'#("\'#&\'#.u &%;"/Y#$;</&#0#*;<&&&#/C$20""6071.) &22""6273/($8#:4#!")(#\'#("\'#&\'#./ &%;"/\' 8!:%!! )'),l('%;#/#$;</&#0#*;<&&&#/{$25""6576.A &27""6778.5 &29""697:.) &2;""6;7</H$$;</&#0#*;<&&&#/2$;"/)$8%:=%"$ )(%\'#($\'#(#\'#("\'#&\'#.# &;#'),l('%;$/#$;</&#0#*;<&&&#/{$2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E/H$$;</&#0#*;<&&&#/2$;#/)$8%:F%"$ )(%\'#($\'#(#\'#("\'#&\'#.# &;$'),l(';%.b &%2G""6G7H/R#;;/I$;"/@$;;/7$2I""6I7J/($8%:K%!")(%\'#($\'#(#\'#("\'#&\'#'),l(";..Y &;/.S &;&.M &;'.G &;(.A &;).; &;*.5 &;+./ &;,.) &;-.# &;0"),l('%;1/_#;;/V$2L""6L7M.) &2N""6N7O/;$;;/2$;2/)$8%:P%"$ )(%\'#($\'#(#\'#("\'#&\'#'),l('%;1/_#;;/V$2Q""6Q7R.) &2S""6S7T/;$;;/2$;2/)$8%:U%"$ )(%\'#($\'#(#\'#("\'#&\'#'),l('%;1/d#;;/[$2L""6L7M.) &2N""6N7O/@$;;/7$2V""6V7W/($8%:X%!$)(%\'#($\'#(#\'#("\'#&\'#. &%;2/#$;</&#0#*;<&&&#/$%2Y""6Y7Z/m#$;</&#0#*;<&&&#/W$2[""6[7\\/H$$;</&#0#*;<&&&#/2$2]""6]7^/#$+%)(%\'#($\'#(#\'#("\'#&\'#.} &%2_""6_7`/m#$;</&#0#*;<&&&#/W$2a""6a7b/H$$;</&#0#*;<&&&#/2$2c""6c7d/#$+%)(%\'#($\'#(#\'#("\'#&\'#/($8#:X#!")(#\'#("\'#&\'#'),l('%;1/d#;;/[$2Q""6Q7R.) &2S""6S7T/@$;;/7$2V""6V7W/($8%:e%!$)(%\'#($\'#(#\'#("\'#&\'#. &%;2/#$;</&#0#*;<&&&#/$%2Y""6Y7Z/H#$;</&#0#*;<&&&#/2$2]""6]7^/#$+#)(#\'#("\'#&\'#.X &%2_""6_7`/H#$;</&#0#*;<&&&#/2$2c""6c7d/#$+#)(#\'#("\'#&\'#/($8#:e#!")(#\'#("\'#&\'#'),l('%;1/q#;;/h$2f""6f7g.5 &2h""6h7i.) &2j""6j7k/A$;;/8$;2.# &;8/)$8%:l%"$ )(%\'#($\'#(#\'#("\'#&\'#. &%;2/#$;</&#0#*;<&&&#/i$2m""6m7n.) &2o""6o7p/N$$;</&#0#*;<&&&#/8$;2.# &;8/)$8%:l%"$ )(%\'#($\'#(#\'#("\'#&\'#'),l("%2h\"\"6h7i/#;;/z$;2/q$;;/h$2f\"\"6f7g.5 &2h\"\"6h7i.) &2j\"\"6j7k/A$;;/8$;2.# &;8/)$8':q'\"$ )(''#(&'#(%'#($'#(#'#(\"'#&'#"),l("%;1/Y#;;/P$2r\"\"6r7s/A$;;/8$;2.# &;8/)$8%:t%\"$ )(%'#($'#(#'#(\"'#&'#. &%;2/#$;</&#0#*;<&&&#/$%2[\"\"6[7\\/H#$;</&#0#*;<&&&#/2$2m\"\"6m7n/#$+#)(#'#(\"'#&'#.X &%2a\"\"6a7b/H#$;</&#0#*;<&&&#/2$2o\"\"6o7p/#$+#)(#'#(\"'#&'#/N$$;</&#0#*;<&&&#/8$;2.# &;8/)$8%:t%\"$ )(%'#($'#(#'#(\"'#&'#"),l("%;2/S#;;/J$2u\"\"6u7v/;$;;/2$;2/)$8%:w%\"$ )(%'#($'#(#'#(\"'#&'#"),l("%2x\"\"6x7y/R#;;/I$2u\"\"6u7v/:$;;/1$;2/($8%:z%! )(%'#($'#(#'#(\"'#&'#"),l('%2{""6{7|.A &2}""6}7~.5 &2""67.) &2""67/S#;;/J$2u""6u7v/;$;;/2$;2/)$8%:%"$ )(%\'#($\'#(#\'#("\'#&\'#'),l("%;2/' 8!:!! )"),l('<%$4""5!7/,#0)*4""5!7&&&#/\' 8!:!! ). &%%2""67/;#;3/2$2""67/#$+#)(#\'#("\'#&\'#.K &%2""67/;#;4/2$2""67/#$+#)(#\'#("\'#&\'#/\' 8!:!! )=." 7'),l('<%$4""5!7/,#0)*4""5!7&&&#/\' 8!:!! ). &%%2""67/;#;3/2$2""67/#$+#)(#\'#("\'#&\'#.K &%2""67/;#;4/2$2""67/#$+#)(#\'#("\'#&\'#/\' 8!:!! )=." 7'),l("%$;50#*;5&/' 8!:!! )"),l("%$;60#*;6&/' 8!:!! )"),l('%%<2""67.) &2""67=.##&&!&\'#/6#1""5!7/($8":"! )("\'#&\'#.A &%2""67/1#;7/($8":"! )("\'#&\'#'),l('%%<2""67.) &2""67=.##&&!&\'#/6#1""5!7/($8":"! )("\'#&\'#.A &%2""67/1#;7/($8":"! )("\'#&\'#'),l('%4""5!7/\' 8!:!! )'),l('<%%2""67/U#;9/L$2""67/=$2""67.# & ." &"/#$+$)($\'#(#\'#("\'#&\'#/\' 8!:!! )=." 7'),l("%$;:/&#0#*;:&&&#/' 8!:!! )"),l('%%<2""67.) &2""67=.##&&!&\'#/6#1""5!7/($8":"! )("\'#&\'#.4 &%2""67/& 8!:! )'),l('<$;<0#*;<&=." 7'),l('<4""5!7=." 7')],$=0,a=[{line:1,column:1,seenCR:!1}],n=0,u=[],y=0;if("startRule"in e){if(!(e.startRule in r))throw new Error("Can't start parsing from rule \""+e.startRule+'".');t=r[e.startRule]}function i(e){var r,t,n=a[e];if(n)return n;for(r=e-1;!a[r];)r--;for(n={line:(n=a[r]).line,column:n.column,seenCR:n.seenCR};r<e;)"\n"===(t=c.charAt(r))?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===t||"\u2028"===t||"\u2029"===t?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1),r++;return a[e]=n}function o(e,r){var t=i(e),n=i(r);return{start:{offset:e,line:t.line,column:t.column},end:{offset:r,line:n.line,column:n.column}}}function h(e){$<n||(n<$&&(n=$,u=[]),u.push(e))}function s(e,r,t,n){return null!==r&&function(e){var r=1;for(e.sort(function(e,r){return e.description<r.description?-1:e.description>r.description?1:0});r<e.length;)e[r-1]===e[r]?e.splice(r,1):r++}(r),new v(null!==e?e:function(e,r){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n].description;function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}return"Expected "+(1<e.length?t.slice(0,-1).join(", ")+" or "+t[e.length-1]:t[0])+" but "+(r?'"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+a(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+a(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+a(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+a(e)})+'"':"end of input")+" found."}(r,t),r,t,n)}function l(e){for(var r=new Array(e.length),t=0;t<e.length;t++)r[t]=e.charCodeAt(t)-32;return r}if((t=function e(r){for(var t,n,a=d[r],u=0,i=[],o=a.length,s=[],l=[];;){for(;u<o;)switch(a[u]){case 0:l.push(f[a[u+1]]),u+=2;break;case 1:l.push(void 0),u++;break;case 2:l.push(null),u++;break;case 3:l.push(p),u++;break;case 4:l.push([]),u++;break;case 5:l.push($),u++;break;case 6:l.pop(),u++;break;case 7:$=l.pop(),u++;break;case 8:l.length-=a[u+1],u+=2;break;case 9:l.splice(-2,1),u++;break;case 10:l[l.length-2].push(l.pop()),u++;break;case 11:l.push(l.splice(l.length-a[u+1],a[u+1])),u+=2;break;case 12:l.push(c.substring(l.pop(),$)),u++;break;case 13:s.push(o),i.push(u+3+a[u+1]+a[u+2]),l[l.length-1]?(o=u+3+a[u+1],u+=3):(o=u+3+a[u+1]+a[u+2],u+=3+a[u+1]);break;case 14:s.push(o),i.push(u+3+a[u+1]+a[u+2]),l[l.length-1]===p?(o=u+3+a[u+1],u+=3):(o=u+3+a[u+1]+a[u+2],u+=3+a[u+1]);break;case 15:s.push(o),i.push(u+3+a[u+1]+a[u+2]),l[l.length-1]!==p?(o=u+3+a[u+1],u+=3):(o=u+3+a[u+1]+a[u+2],u+=3+a[u+1]);break;case 16:l[l.length-1]!==p?(s.push(o),i.push(u),o=u+2+a[u+1],u+=2):u+=2+a[u+1];break;case 17:s.push(o),i.push(u+3+a[u+1]+a[u+2]),c.length>$?(o=u+3+a[u+1],u+=3):(o=u+3+a[u+1]+a[u+2],u+=3+a[u+1]);break;case 18:s.push(o),i.push(u+4+a[u+2]+a[u+3]),c.substr($,f[a[u+1]].length)===f[a[u+1]]?(o=u+4+a[u+2],u+=4):(o=u+4+a[u+2]+a[u+3],u+=4+a[u+2]);break;case 19:s.push(o),i.push(u+4+a[u+2]+a[u+3]),c.substr($,f[a[u+1]].length).toLowerCase()===f[a[u+1]]?(o=u+4+a[u+2],u+=4):(o=u+4+a[u+2]+a[u+3],u+=4+a[u+2]);break;case 20:s.push(o),i.push(u+4+a[u+2]+a[u+3]),f[a[u+1]].test(c.charAt($))?(o=u+4+a[u+2],u+=4):(o=u+4+a[u+2]+a[u+3],u+=4+a[u+2]);break;case 21:l.push(c.substr($,a[u+1])),$+=a[u+1],u+=2;break;case 22:l.push(f[a[u+1]]),$+=f[a[u+1]].length,u+=2;break;case 23:l.push(p),0===y&&h(f[a[u+1]]),u+=2;break;case 24:l[l.length-1-a[u+1]],u+=2;break;case 25:u++;break;case 26:for(t=a.slice(u+4,u+4+a[u+3]),n=0;n<a[u+3];n++)t[n]=l[l.length-1-t[n]];l.splice(l.length-a[u+2],a[u+2],f[a[u+1]].apply(null,t)),u+=4+a[u+3];break;case 27:l.push(e(a[u+1])),u+=2;break;case 28:y++,u++;break;case 29:y--,u++;break;default:throw new Error("Invalid opcode: "+a[u]+".")}if(!(0<s.length))break;o=s.pop(),u=i.pop()}return l[0]}(t))!==p&&$===c.length)return t;throw t!==p&&$<c.length&&h({type:"end",description:"end of input"}),s(null,u,n<c.length?c.charAt(n):null,n<c.length?o(n,n+1):o(n,n))}}}()},{}]},{},[2])(2)});
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).overpassWizardExpand=e()}(function(){return function r(o,i,u){function s(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,r,o,i,u)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){"use strict";var r=e("./raw"),o=[],i=[],u=r.makeRequestCallFromTimer(function(){if(i.length)throw i.shift()});function s(e){var t=o.length?o.pop():new c;t.task=e,r(t)}function c(){this.task=null}t.exports=s,c.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(i.push(e),u())}finally{this.task=null,o[o.length]=this}}},{"./raw":2}],2:[function(e,p,t){(function(l){(function(){"use strict";function e(e){r.length||(t(),0),r[r.length]=e}p.exports=e;var t,r=[],o=0;function n(){for(;o<r.length;){var e=o;if(o+=1,r[e].call(),1024<o){for(var t=0,n=r.length-o;t<n;t++)r[t]=r[t+o];r.length-=o,o=0}}r.length=0,o=0,0}var i,u,s,c=void 0!==l?l:self,f=c.MutationObserver||c.WebKitMutationObserver;function a(r){return function(){var e=setTimeout(n,0),t=setInterval(n,50);function n(){clearTimeout(e),clearInterval(t),r()}}}t="function"==typeof f?(u=1,i=new f(i=n),s=document.createTextNode(""),i.observe(s,{characterData:!0}),function(){u=-u,s.data=u}):a(n),e.requestFlush=t,e.makeRequestCallFromTimer=a}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){},{}],4:[function(e,t,n){var u=e("promise"),o=e("request-promise");function r(t,n){var r,e="https://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(t),e="undefined"!=typeof XMLHttpRequest?(r=e,new u(function(e,t){var n=new XMLHttpRequest;n.open("GET",r),n.onload=function(){200==n.status?e(n.response):t(Error("XMLHttpRequest Error: "+n.statusText))},n.onerror=function(){t(Error("Network Error"))},n.send()}).then(JSON.parse)):o({url:e,method:"GET",headers:{"User-Agent":"overpass-wizard"},json:!0});return e.then(function(e){return n&&(e=e.filter(n)),0===e.length?u.reject(new Error("No result found for geocoding search: "+t)):e[0]})}var s={date:function(e,t){var n=Date.now();if(null===(e=e.toLowerCase().match(/(-?[0-9]+) ?(seconds?|minutes?|hours?|days?|weeks?|months?|years?)?/)))return u.reject(new Error("unable to expand date shortcut."));var r=parseInt(e[1]);switch(e[2]){case"second":case"seconds":o=1;break;case"minute":case"minutes":o=60;break;case"hour":case"hours":o=3600;break;case"day":case"days":default:o=86400;break;case"week":case"weeks":o=604800;break;case"month":case"months":o=2628e3;break;case"year":case"years":o=31536e3}var o=n-r*o*1e3;return u.resolve(new Date(o).toISOString())},geocodeArea:function(e){return r(e,function(e){return e.osm_type&&e.osm_id&&"node"!==e.osm_type}).then(function(e){var t=+e.osm_id;return"way"==e.osm_type&&(t+=24e8),"relation"==e.osm_type&&(t+=36e8),e="area("+t+")"})},geocodeCoords:function(e){return r(e).then(function(e){return e=e.lat+","+e.lon})}};t.exports=function(r,e,t){e&&(r=r.replace(/{{bbox}}/g,e));var o="{{([a-zA-Z0-9_]+)=(.+?)}}";(r.match(new RegExp(o,"g"))||[]).forEach(function(e){for(var e=e.match(new RegExp(o)),t="{{"+e[1]+"}}",n=e[2];0<=r.indexOf(t);)r=r.replace(t,n)});var n="{{(date|geocodeArea|geocodeCoords):([\\s\\S]*?)}}",i=r.match(new RegExp(n,"g"))||[];return u.all(i.map(function(e){return e=e.match(new RegExp(n)),s[e[1]](e[2])})).then(function(e){return e.forEach(function(e,t){r=r.replace(i[t],e)}),r}).then(function(e){t(void 0,e)}).catch(function(e){t(e)})}},{promise:5,"request-promise":3}],5:[function(e,t,n){"use strict";t.exports=e("./lib")},{"./lib":10}],6:[function(e,t,n){"use strict";var o=e("asap/raw");function u(){}var i=null,s={};function c(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==u&&h(e,this)}function f(e,t){for(;3===e._65;)e=e._55;if(c._37&&c._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);var n,r;n=e,r=t,o(function(){var e=1===n._65?r.onFulfilled:r.onRejected;null!==e?(e=function(e,t){try{return e(t)}catch(e){return i=e,s}}(e,n._55))===s?l(r.promise,i):a(r.promise,e):(1===n._65?a:l)(r.promise,n._55)})}function a(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself.")),0;if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return i=e,s}}(t);if(n===s)return l(e,i),0;if(n===e.then&&t instanceof c)return e._65=3,e._55=t,void r(e);if("function"==typeof n)return void h(n.bind(t),e)}e._65=1,e._55=t,r(e)}function l(e,t){e._65=2,e._55=t,c._87&&c._87(e,t),r(e)}function r(e){if(1===e._40&&(f(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)f(e,e._72[t]);e._72=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1,e=function(e,t,n){try{e(t,n)}catch(e){return i=e,s}}(e,function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,l(t,e))});n||e!==s||(n=!0,l(t,i))}(t.exports=c)._37=null,c._87=null,c._61=u,c.prototype.then=function(e,t){if(this.constructor!==c)return o=e,i=t,new(r=this).constructor(function(e,t){var n=new c(u);n.then(e,t),f(r,new p(o,i,n))});var r,o,i,n=new c(u);return f(this,new p(e,t,n)),n}},{"asap/raw":2}],7:[function(e,t,n){"use strict";e=e("./core.js");(t.exports=e).prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},{"./core.js":6}],8:[function(e,t,n){"use strict";var c=e("./core.js");t.exports=c;var r=a(!0),o=a(!1),i=a(null),u=a(void 0),s=a(0),f=a("");function a(e){var t=new c(c._61);return t._65=1,t._55=e,t}c.resolve=function(e){if(e instanceof c)return e;if(null===e)return i;if(void 0===e)return u;if(!0===e)return r;if(!1===e)return o;if(0===e)return s;if(""===e)return f;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new c(t.bind(e))}catch(n){return new c(function(e,t){t(n)})}return a(e)},c.all=function(e){var s=Array.prototype.slice.call(e);return new c(function(o,i){if(0===s.length)return o([]);var u=s.length;for(var e=0;e<s.length;e++)!function t(n,e){if(e&&("object"==typeof e||"function"==typeof e)){if(e instanceof c&&e.then===c.prototype.then){for(;3===e._65;)e=e._55;return 1===e._65?t(n,e._55):(2===e._65&&i(e._55),void e.then(function(e){t(n,e)},i))}var r=e.then;if("function"==typeof r)return void new c(r.bind(e)).then(function(e){t(n,e)},i)}s[n]=e,0==--u&&o(s)}(e,s[e])})},c.reject=function(n){return new c(function(e,t){t(n)})},c.race=function(e){return new c(function(t,n){e.forEach(function(e){c.resolve(e).then(t,n)})})},c.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":6}],9:[function(e,t,n){"use strict";var r=e("./core.js");(t.exports=r).prototype.finally=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},{"./core.js":6}],10:[function(e,t,n){"use strict";t.exports=e("./core.js"),e("./done.js"),e("./finally.js"),e("./es6-extensions.js"),e("./node-extensions.js"),e("./synchronous.js")},{"./core.js":6,"./done.js":7,"./es6-extensions.js":8,"./finally.js":9,"./node-extensions.js":11,"./synchronous.js":12}],11:[function(e,t,n){"use strict";var i=e("./core.js"),o=e("asap");(t.exports=i).denodeify=function(e,t){return"number"==typeof t&&t!==1/0?function(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([u]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(i,e)}(e,t):function(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+u+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(i,e)}(e)};var u="function (err, res) {if (err) { rj(err); } else { rs(res); }}";i.nodeify=function(n){return function(){var e=Array.prototype.slice.call(arguments),t="function"==typeof e[e.length-1]?e.pop():null,r=this;try{return n.apply(this,arguments).nodeify(t,r)}catch(n){if(null==t)return new i(function(e,t){t(n)});o(function(){t.call(r,n)})}}},i.prototype.nodeify=function(t,n){if("function"!=typeof t)return this;this.then(function(e){o(function(){t.call(n,null,e)})},function(e){o(function(){t.call(n,e)})})}},{"./core.js":6,asap:1}],12:[function(e,t,n){"use strict";var r=e("./core.js");(t.exports=r).enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},r.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},r.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},{"./core.js":6}]},{},[4])(4)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5qcyIsIkZpbGVTYXZlci5qcyIsIm1vdXNldHJhcC5qcyIsImVzcmkyZ2VvLmpzIiwib3NtdG9nZW9qc29uLmpzIiwic2hwd3JpdGUuanMiLCJzaHAubWluLmpzIiwidHVyZl9wYWNrYWdlLmpzIiwidG9wb2pzb25fcGFja2FnZS5qcyIsIm92ZXJwYXNzLXdpemFyZC5qcyIsIm92ZXJwYXNzLXdpemFyZC1leHBhbmQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4blZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4UkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbGlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25KQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOXpZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQ0FBO0FDQUE7QUNBQSIsImZpbGUiOiJ2ZW5kb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjMuNS4xXG4gKiBodHRwczovL2pxdWVyeS5jb20vXG4gKlxuICogSW5jbHVkZXMgU2l6emxlLmpzXG4gKiBodHRwczovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHBzOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAyMC0wNS0wNFQyMjo0OVpcbiAqL1xuKCBmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHQvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgXG5cdFx0Ly8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS5cblx0XHQvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IGhhdmUgYSBgd2luZG93YCB3aXRoIGEgYGRvY3VtZW50YFxuXHRcdC8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLlxuXHRcdC8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuXG5cdFx0Ly8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKSh3aW5kb3cpO1xuXHRcdC8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgP1xuXHRcdFx0ZmFjdG9yeSggZ2xvYmFsLCB0cnVlICkgOlxuXHRcdFx0ZnVuY3Rpb24oIHcgKSB7XG5cdFx0XHRcdGlmICggIXcuZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWN0b3J5KCB3ICk7XG5cdFx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGZhY3RvcnkoIGdsb2JhbCApO1xuXHR9XG5cbi8vIFBhc3MgdGhpcyBpZiB3aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0XG59ICkoIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiggd2luZG93LCBub0dsb2JhbCApIHtcblxuLy8gRWRnZSA8PSAxMiAtIDEzKywgRmlyZWZveCA8PTE4IC0gNDUrLCBJRSAxMCAtIDExLCBTYWZhcmkgNS4xIC0gOSssIGlPUyA2IC0gOS4xXG4vLyB0aHJvdyBleGNlcHRpb25zIHdoZW4gbm9uLXN0cmljdCBjb2RlIChlLmcuLCBBU1AuTkVUIDQuNSkgYWNjZXNzZXMgc3RyaWN0IG1vZGVcbi8vIGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyICh0cmFjLTEzMzM1KS4gQnV0IGFzIG9mIGpRdWVyeSAzLjAgKDIwMTYpLCBzdHJpY3QgbW9kZSBzaG91bGQgYmUgY29tbW9uXG4vLyBlbm91Z2ggdGhhdCBhbGwgc3VjaCBhdHRlbXB0cyBhcmUgZ3VhcmRlZCBpbiBhIHRyeSBibG9jay5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgYXJyID0gW107XG5cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgZmxhdCA9IGFyci5mbGF0ID8gZnVuY3Rpb24oIGFycmF5ICkge1xuXHRyZXR1cm4gYXJyLmZsYXQuY2FsbCggYXJyYXkgKTtcbn0gOiBmdW5jdGlvbiggYXJyYXkgKSB7XG5cdHJldHVybiBhcnIuY29uY2F0LmFwcGx5KCBbXSwgYXJyYXkgKTtcbn07XG5cblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBmblRvU3RyaW5nID0gaGFzT3duLnRvU3RyaW5nO1xuXG52YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmcgPSBmblRvU3RyaW5nLmNhbGwoIE9iamVjdCApO1xuXG52YXIgc3VwcG9ydCA9IHt9O1xuXG52YXIgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzRnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgLy8gU3VwcG9ydDogQ2hyb21lIDw9NTcsIEZpcmVmb3ggPD01MlxuICAgICAgLy8gSW4gc29tZSBicm93c2VycywgdHlwZW9mIHJldHVybnMgXCJmdW5jdGlvblwiIGZvciBIVE1MIDxvYmplY3Q+IGVsZW1lbnRzXG4gICAgICAvLyAoaS5lLiwgYHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9iamVjdFwiICkgPT09IFwiZnVuY3Rpb25cImApLlxuICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBjbGFzc2lmeSAqYW55KiBET00gbm9kZSBhcyBhIGZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2Ygb2JqLm5vZGVUeXBlICE9PSBcIm51bWJlclwiO1xuICB9O1xuXG5cbnZhciBpc1dpbmRvdyA9IGZ1bmN0aW9uIGlzV2luZG93KCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fTtcblxuXG52YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cblxuXG5cdHZhciBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzID0ge1xuXHRcdHR5cGU6IHRydWUsXG5cdFx0c3JjOiB0cnVlLFxuXHRcdG5vbmNlOiB0cnVlLFxuXHRcdG5vTW9kdWxlOiB0cnVlXG5cdH07XG5cblx0ZnVuY3Rpb24gRE9NRXZhbCggY29kZSwgbm9kZSwgZG9jICkge1xuXHRcdGRvYyA9IGRvYyB8fCBkb2N1bWVudDtcblxuXHRcdHZhciBpLCB2YWwsXG5cdFx0XHRzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApO1xuXG5cdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdGlmICggbm9kZSApIHtcblx0XHRcdGZvciAoIGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDY0KywgRWRnZSAxOCtcblx0XHRcdFx0Ly8gU29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBcIm5vbmNlXCIgcHJvcGVydHkgb24gc2NyaXB0cy5cblx0XHRcdFx0Ly8gT24gdGhlIG90aGVyIGhhbmQsIGp1c3QgdXNpbmcgYGdldEF0dHJpYnV0ZWAgaXMgbm90IGVub3VnaCBhc1xuXHRcdFx0XHQvLyB0aGUgYG5vbmNlYCBhdHRyaWJ1dGUgaXMgcmVzZXQgdG8gYW4gZW1wdHkgc3RyaW5nIHdoZW5ldmVyIGl0XG5cdFx0XHRcdC8vIGJlY29tZXMgYnJvd3NpbmctY29udGV4dCBjb25uZWN0ZWQuXG5cdFx0XHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL2h0bWwvaXNzdWVzLzIzNjlcblx0XHRcdFx0Ly8gU2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI25vbmNlLWF0dHJpYnV0ZXNcblx0XHRcdFx0Ly8gVGhlIGBub2RlLmdldEF0dHJpYnV0ZWAgY2hlY2sgd2FzIGFkZGVkIGZvciB0aGUgc2FrZSBvZlxuXHRcdFx0XHQvLyBgalF1ZXJ5Lmdsb2JhbEV2YWxgIHNvIHRoYXQgaXQgY2FuIGZha2UgYSBub25jZS1jb250YWluaW5nIG5vZGVcblx0XHRcdFx0Ly8gdmlhIGFuIG9iamVjdC5cblx0XHRcdFx0dmFsID0gbm9kZVsgaSBdIHx8IG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKCBpICk7XG5cdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoIGksIHZhbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGRvYy5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHQgKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTtcblx0fVxuXG5cbmZ1bmN0aW9uIHRvVHlwZSggb2JqICkge1xuXHRpZiAoIG9iaiA9PSBudWxsICkge1xuXHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTIuMyBvbmx5IChmdW5jdGlvbmlzaCBSZWdFeHApXG5cdHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiA/XG5cdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbCggb2JqICkgXSB8fCBcIm9iamVjdFwiIDpcblx0XHR0eXBlb2Ygb2JqO1xufVxuLyogZ2xvYmFsIFN5bWJvbCAqL1xuLy8gRGVmaW5pbmcgdGhpcyBnbG9iYWwgaW4gLmVzbGludHJjLmpzb24gd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWxcbi8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBkZWZpbmUgZ2xvYmFsIG9ubHkgZm9yIHRoaXMgbW9kdWxlXG5cblxuXG52YXJcblx0dmVyc2lvbiA9IFwiMy41LjFcIixcblxuXHQvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeVxuXHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cblx0Ly8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuXHRqcXVlcnk6IHZlcnNpb24sXG5cblx0Y29uc3RydWN0b3I6IGpRdWVyeSxcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cblx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0aWYgKCBudW0gPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdHJldHVybiBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdO1xuXHR9LFxuXG5cdC8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2tcblx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdHB1c2hTdGFjazogZnVuY3Rpb24oIGVsZW1zICkge1xuXG5cdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHR2YXIgcmV0ID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmNvbnN0cnVjdG9yKCksIGVsZW1zICk7XG5cblx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdHJldC5wcmV2T2JqZWN0ID0gdGhpcztcblxuXHRcdC8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHQvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LlxuXHRlYWNoOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5lYWNoKCB0aGlzLCBjYWxsYmFjayApO1xuXHR9LFxuXG5cdG1hcDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCggdGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0gKSApO1xuXHR9LFxuXG5cdHNsaWNlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHNsaWNlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSApO1xuXHR9LFxuXG5cdGZpcnN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggMCApO1xuXHR9LFxuXG5cdGxhc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAtMSApO1xuXHR9LFxuXG5cdGV2ZW46IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5LmdyZXAoIHRoaXMsIGZ1bmN0aW9uKCBfZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiAoIGkgKyAxICkgJSAyO1xuXHRcdH0gKSApO1xuXHR9LFxuXG5cdG9kZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkuZ3JlcCggdGhpcywgZnVuY3Rpb24oIF9lbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGkgJSAyO1xuXHRcdH0gKSApO1xuXHR9LFxuXG5cdGVxOiBmdW5jdGlvbiggaSApIHtcblx0XHR2YXIgbGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbIGogXSBdIDogW10gKTtcblx0fSxcblxuXHRlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcigpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIDAgXSB8fCB7fSxcblx0XHRpID0gMSxcblx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdGRlZXAgPSBmYWxzZTtcblxuXHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdGlmICggdHlwZW9mIHRhcmdldCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0ZGVlcCA9IHRhcmdldDtcblxuXHRcdC8vIFNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTtcblx0XHRpKys7XG5cdH1cblxuXHQvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcblx0aWYgKCB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICFpc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXG5cdFx0Ly8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuXHRcdGlmICggKCBvcHRpb25zID0gYXJndW1lbnRzWyBpIF0gKSAhPSBudWxsICkge1xuXG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdGNvcHkgPSBvcHRpb25zWyBuYW1lIF07XG5cblx0XHRcdFx0Ly8gUHJldmVudCBPYmplY3QucHJvdG90eXBlIHBvbGx1dGlvblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICggbmFtZSA9PT0gXCJfX3Byb3RvX19cIiB8fCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29weSApIHx8XG5cdFx0XHRcdFx0KCBjb3B5SXNBcnJheSA9IEFycmF5LmlzQXJyYXkoIGNvcHkgKSApICkgKSB7XG5cdFx0XHRcdFx0c3JjID0gdGFyZ2V0WyBuYW1lIF07XG5cblx0XHRcdFx0XHQvLyBFbnN1cmUgcHJvcGVyIHR5cGUgZm9yIHRoZSBzb3VyY2UgdmFsdWVcblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICYmICFBcnJheS5pc0FycmF5KCBzcmMgKSApIHtcblx0XHRcdFx0XHRcdGNsb25lID0gW107XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggIWNvcHlJc0FycmF5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggc3JjICkgKSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHt9O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuXHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG5cdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdGlzUmVhZHk6IHRydWUsXG5cblx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0fSxcblxuXHRub29wOiBmdW5jdGlvbigpIHt9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIHByb3RvLCBDdG9yO1xuXG5cdFx0Ly8gRGV0ZWN0IG9idmlvdXMgbmVnYXRpdmVzXG5cdFx0Ly8gVXNlIHRvU3RyaW5nIGluc3RlYWQgb2YgalF1ZXJ5LnR5cGUgdG8gY2F0Y2ggaG9zdCBvYmplY3RzXG5cdFx0aWYgKCAhb2JqIHx8IHRvU3RyaW5nLmNhbGwoIG9iaiApICE9PSBcIltvYmplY3QgT2JqZWN0XVwiICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHByb3RvID0gZ2V0UHJvdG8oIG9iaiApO1xuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIG5vIHByb3RvdHlwZSAoZS5nLiwgYE9iamVjdC5jcmVhdGUoIG51bGwgKWApIGFyZSBwbGFpblxuXHRcdGlmICggIXByb3RvICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIHByb3RvdHlwZSBhcmUgcGxhaW4gaWZmIHRoZXkgd2VyZSBjb25zdHJ1Y3RlZCBieSBhIGdsb2JhbCBPYmplY3QgZnVuY3Rpb25cblx0XHRDdG9yID0gaGFzT3duLmNhbGwoIHByb3RvLCBcImNvbnN0cnVjdG9yXCIgKSAmJiBwcm90by5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gdHlwZW9mIEN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBmblRvU3RyaW5nLmNhbGwoIEN0b3IgKSA9PT0gT2JqZWN0RnVuY3Rpb25TdHJpbmc7XG5cdH0sXG5cblx0aXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XHR2YXIgbmFtZTtcblxuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBwcm92aWRlZCBjb250ZXh0OyBmYWxscyBiYWNrIHRvIHRoZSBnbG9iYWwgb25lXG5cdC8vIGlmIG5vdCBzcGVjaWZpZWQuXG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlLCBvcHRpb25zLCBkb2MgKSB7XG5cdFx0RE9NRXZhbCggY29kZSwgeyBub25jZTogb3B0aW9ucyAmJiBvcHRpb25zLm5vbmNlIH0sIGRvYyApO1xuXHR9LFxuXG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrICkge1xuXHRcdHZhciBsZW5ndGgsIGkgPSAwO1xuXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7XG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvYmo7XG5cdH0sXG5cblx0Ly8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG5cdFx0dmFyIHJldCA9IHJlc3VsdHMgfHwgW107XG5cblx0XHRpZiAoIGFyciAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBpc0FycmF5TGlrZSggT2JqZWN0KCBhcnIgKSApICkge1xuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHJldCxcblx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHRpbkFycmF5OiBmdW5jdGlvbiggZWxlbSwgYXJyLCBpICkge1xuXHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG5cdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gZmlyc3QubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGogXTtcblx0XHR9XG5cblx0XHRmaXJzdC5sZW5ndGggPSBpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9LFxuXG5cdGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHtcblx0XHR2YXIgY2FsbGJhY2tJbnZlcnNlLFxuXHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zXG5cdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdGNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApO1xuXHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRtYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSxcblxuXHQvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIGxlbmd0aCwgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdHJldCA9IFtdO1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXNcblx0XHRpZiAoIGlzQXJyYXlMaWtlKCBlbGVtcyApICkge1xuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdHJldHVybiBmbGF0KCByZXQgKTtcblx0fSxcblxuXHQvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHNcblx0Z3VpZDogMSxcblxuXHQvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXJcblx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0c3VwcG9ydDogc3VwcG9ydFxufSApO1xuXG5pZiAoIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0alF1ZXJ5LmZuWyBTeW1ib2wuaXRlcmF0b3IgXSA9IGFyclsgU3ltYm9sLml0ZXJhdG9yIF07XG59XG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goIFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdCggXCIgXCIgKSxcbmZ1bmN0aW9uKCBfaSwgbmFtZSApIHtcblx0Y2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG59ICk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogcmVhbCBpT1MgOC4yIG9ubHkgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuXHQvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpXG5cdC8vIGhhc093biBpc24ndCB1c2VkIGhlcmUgZHVlIHRvIGZhbHNlIG5lZ2F0aXZlc1xuXHQvLyByZWdhcmRpbmcgTm9kZWxpc3QgbGVuZ3RoIGluIElFXG5cdHZhciBsZW5ndGggPSAhIW9iaiAmJiBcImxlbmd0aFwiIGluIG9iaiAmJiBvYmoubGVuZ3RoLFxuXHRcdHR5cGUgPSB0b1R5cGUoIG9iaiApO1xuXG5cdGlmICggaXNGdW5jdGlvbiggb2JqICkgfHwgaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4zLjVcbiAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9qcy5mb3VuZGF0aW9uL1xuICpcbiAqIERhdGU6IDIwMjAtMDMtMTRcbiAqL1xuKCBmdW5jdGlvbiggd2luZG93ICkge1xudmFyIGksXG5cdHN1cHBvcnQsXG5cdEV4cHIsXG5cdGdldFRleHQsXG5cdGlzWE1MLFxuXHR0b2tlbml6ZSxcblx0Y29tcGlsZSxcblx0c2VsZWN0LFxuXHRvdXRlcm1vc3RDb250ZXh0LFxuXHRzb3J0SW5wdXQsXG5cdGhhc0R1cGxpY2F0ZSxcblxuXHQvLyBMb2NhbCBkb2N1bWVudCB2YXJzXG5cdHNldERvY3VtZW50LFxuXHRkb2N1bWVudCxcblx0ZG9jRWxlbSxcblx0ZG9jdW1lbnRJc0hUTUwsXG5cdHJidWdneVFTQSxcblx0cmJ1Z2d5TWF0Y2hlcyxcblx0bWF0Y2hlcyxcblx0Y29udGFpbnMsXG5cblx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRleHBhbmRvID0gXCJzaXp6bGVcIiArIDEgKiBuZXcgRGF0ZSgpLFxuXHRwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG5cdGRpcnJ1bnMgPSAwLFxuXHRkb25lID0gMCxcblx0Y2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0bm9ubmF0aXZlU2VsZWN0b3JDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0aGFzT3duID0gKCB7fSApLmhhc093blByb3BlcnR5LFxuXHRhcnIgPSBbXSxcblx0cG9wID0gYXJyLnBvcCxcblx0cHVzaE5hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXG5cdC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBhcyBpdCdzIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQvLyBodHRwczovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFsgaSBdID09PSBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXG5cdGJvb2xlYW5zID0gXCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58XCIgK1xuXHRcdFwiaXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLFxuXG5cdC8vIFJlZ3VsYXIgZXhwcmVzc2lvbnNcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHR3aGl0ZXNwYWNlID0gXCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLFxuXG5cdC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jc3Mtc3ludGF4LTMvI2lkZW50LXRva2VuLWRpYWdyYW1cblx0aWRlbnRpZmllciA9IFwiKD86XFxcXFxcXFxbXFxcXGRhLWZBLUZdezEsNn1cIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiP3xcXFxcXFxcXFteXFxcXHJcXFxcblxcXFxmXXxbXFxcXHctXXxbXlxcMC1cXFxceDdmXSkrXCIsXG5cblx0Ly8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG5cdGF0dHJpYnV0ZXMgPSBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFwiICsgaWRlbnRpZmllciArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cblx0XHQvLyBPcGVyYXRvciAoY2FwdHVyZSAyKVxuXHRcdFwiKihbKl4kfCF+XT89KVwiICsgd2hpdGVzcGFjZSArXG5cblx0XHQvLyBcIkF0dHJpYnV0ZSB2YWx1ZXMgbXVzdCBiZSBDU1MgaWRlbnRpZmllcnMgW2NhcHR1cmUgNV1cblx0XHQvLyBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArXG5cdFx0d2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcXFxcKChcIiArXG5cblx0XHQvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOlxuXHRcdC8vIDEuIHF1b3RlZCAoY2FwdHVyZSAzOyBjYXB0dXJlIDQgb3IgY2FwdHVyZSA1KVxuXHRcdFwiKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8XCIgK1xuXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXG5cdFx0Ly8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKVxuXHRcdFwiLipcIiArXG5cdFx0XCIpXFxcXCl8KVwiLFxuXG5cdC8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXJcblx0cndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIrXCIsIFwiZ1wiICksXG5cdHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICtcblx0XHR3aGl0ZXNwYWNlICsgXCIrJFwiLCBcImdcIiApLFxuXG5cdHJjb21tYSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKixcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXHRyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcIipcIiApLFxuXHRyZGVzY2VuZCA9IG5ldyBSZWdFeHAoIHdoaXRlc3BhY2UgKyBcInw+XCIgKSxcblxuXHRycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLFxuXHRyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cblx0bWF0Y2hFeHByID0ge1xuXHRcdFwiSURcIjogbmV3IFJlZ0V4cCggXCJeIyhcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFwiQ0xBU1NcIjogbmV3IFJlZ0V4cCggXCJeXFxcXC4oXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBpZGVudGlmaWVyICsgXCJ8WypdKVwiICksXG5cdFx0XCJBVFRSXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgYXR0cmlidXRlcyApLFxuXHRcdFwiUFNFVURPXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgcHNldWRvcyApLFxuXHRcdFwiQ0hJTERcIjogbmV3IFJlZ0V4cCggXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiICtcblx0XHRcdHdoaXRlc3BhY2UgKyBcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArXG5cdFx0XHR3aGl0ZXNwYWNlICsgXCIqKFxcXFxkKyl8KSlcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpXCIsIFwiaVwiICksXG5cdFx0XCJib29sXCI6IG5ldyBSZWdFeHAoIFwiXig/OlwiICsgYm9vbGVhbnMgKyBcIikkXCIsIFwiaVwiICksXG5cblx0XHQvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKClcblx0XHQvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG5cdFx0XCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfCkoPz1bXi1dfCQpXCIsIFwiaVwiIClcblx0fSxcblxuXHRyaHRtbCA9IC9IVE1MJC9pLFxuXHRyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0cmhlYWRlciA9IC9eaFxcZCQvaSxcblxuXHRybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxcblxuXHQvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnNcblx0cnF1aWNrRXhwciA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLFxuXG5cdHJzaWJsaW5nID0gL1srfl0vLFxuXG5cdC8vIENTUyBlc2NhcGVzXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnNcblx0cnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggXCJcXFxcXFxcXFtcXFxcZGEtZkEtRl17MSw2fVwiICsgd2hpdGVzcGFjZSArIFwiP3xcXFxcXFxcXChbXlxcXFxyXFxcXG5cXFxcZl0pXCIsIFwiZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBlc2NhcGUsIG5vbkhleCApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZS5zbGljZSggMSApIC0gMHgxMDAwMDtcblxuXHRcdHJldHVybiBub25IZXggP1xuXG5cdFx0XHQvLyBTdHJpcCB0aGUgYmFja3NsYXNoIHByZWZpeCBmcm9tIGEgbm9uLWhleCBlc2NhcGUgc2VxdWVuY2Vcblx0XHRcdG5vbkhleCA6XG5cblx0XHRcdC8vIFJlcGxhY2UgYSBoZXhhZGVjaW1hbCBlc2NhcGUgc2VxdWVuY2Ugd2l0aCB0aGUgZW5jb2RlZCBVbmljb2RlIGNvZGUgcG9pbnRcblx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTErXG5cdFx0XHQvLyBGb3IgdmFsdWVzIG91dHNpZGUgdGhlIEJhc2ljIE11bHRpbGluZ3VhbCBQbGFuZSAoQk1QKSwgbWFudWFsbHkgY29uc3RydWN0IGFcblx0XHRcdC8vIHN1cnJvZ2F0ZSBwYWlyXG5cdFx0XHRoaWdoIDwgMCA/XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcblx0fSxcblxuXHQvLyBDU1Mgc3RyaW5nL2lkZW50aWZpZXIgc2VyaWFsaXphdGlvblxuXHQvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI2NvbW1vbi1zZXJpYWxpemluZy1pZGlvbXNcblx0cmNzc2VzY2FwZSA9IC8oW1xcMC1cXHgxZlxceDdmXXxeLT9cXGQpfF4tJHxbXlxcMC1cXHgxZlxceDdmLVxcdUZGRkZcXHctXS9nLFxuXHRmY3NzZXNjYXBlID0gZnVuY3Rpb24oIGNoLCBhc0NvZGVQb2ludCApIHtcblx0XHRpZiAoIGFzQ29kZVBvaW50ICkge1xuXG5cdFx0XHQvLyBVKzAwMDAgTlVMTCBiZWNvbWVzIFUrRkZGRCBSRVBMQUNFTUVOVCBDSEFSQUNURVJcblx0XHRcdGlmICggY2ggPT09IFwiXFwwXCIgKSB7XG5cdFx0XHRcdHJldHVybiBcIlxcdUZGRkRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udHJvbCBjaGFyYWN0ZXJzIGFuZCAoZGVwZW5kZW50IHVwb24gcG9zaXRpb24pIG51bWJlcnMgZ2V0IGVzY2FwZWQgYXMgY29kZSBwb2ludHNcblx0XHRcdHJldHVybiBjaC5zbGljZSggMCwgLTEgKSArIFwiXFxcXFwiICtcblx0XHRcdFx0Y2guY2hhckNvZGVBdCggY2gubGVuZ3RoIC0gMSApLnRvU3RyaW5nKCAxNiApICsgXCIgXCI7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXIgcG90ZW50aWFsbHktc3BlY2lhbCBBU0NJSSBjaGFyYWN0ZXJzIGdldCBiYWNrc2xhc2gtZXNjYXBlZFxuXHRcdHJldHVybiBcIlxcXFxcIiArIGNoO1xuXHR9LFxuXG5cdC8vIFVzZWQgZm9yIGlmcmFtZXNcblx0Ly8gU2VlIHNldERvY3VtZW50KClcblx0Ly8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgXCJQZXJtaXNzaW9uIERlbmllZFwiXG5cdC8vIGVycm9yIGluIElFXG5cdHVubG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcblx0XHRzZXREb2N1bWVudCgpO1xuXHR9LFxuXG5cdGluRGlzYWJsZWRGaWVsZHNldCA9IGFkZENvbWJpbmF0b3IoXG5cdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiZmllbGRzZXRcIjtcblx0XHR9LFxuXHRcdHsgZGlyOiBcInBhcmVudE5vZGVcIiwgbmV4dDogXCJsZWdlbmRcIiB9XG5cdCk7XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdCggYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSApLFxuXHRcdHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG5cdCk7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0Ly8gRGV0ZWN0IHNpbGVudGx5IGZhaWxpbmcgcHVzaC5hcHBseVxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoTmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoIGVscyApICk7XG5cdFx0fSA6XG5cblx0XHQvLyBTdXBwb3J0OiBJRTw5XG5cdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZCBkaXJlY3RseVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHZhciBqID0gdGFyZ2V0Lmxlbmd0aCxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAoIHRhcmdldFsgaisrIF0gPSBlbHNbIGkrKyBdICkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG0sIGksIGVsZW0sIG5pZCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0bmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LFxuXG5cdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdG5vZGVUeXBlID0gY29udGV4dCA/IGNvbnRleHQubm9kZVR5cGUgOiA5O1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFJldHVybiBlYXJseSBmcm9tIGNhbGxzIHdpdGggaW52YWxpZCBzZWxlY3RvciBvciBjb250ZXh0XG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRpZiAoICFzZWVkICkge1xuXHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdFx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0XHRpZiAoIGRvY3VtZW50SXNIVE1MICkge1xuXG5cdFx0XHQvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgXCJnZXQqQnkqXCIgRE9NIG1ldGhvZFxuXHRcdFx0Ly8gKGV4Y2VwdGluZyBEb2N1bWVudEZyYWdtZW50IGNvbnRleHQsIHdoZXJlIHRoZSBtZXRob2RzIGRvbid0IGV4aXN0KVxuXHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKCBtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSApICkge1xuXG5cdFx0XHRcdC8vIElEIHNlbGVjdG9yXG5cdFx0XHRcdGlmICggKCBtID0gbWF0Y2hbIDEgXSApICkge1xuXG5cdFx0XHRcdFx0Ly8gRG9jdW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICggZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSApICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEVsZW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBuZXdDb250ZXh0ICYmICggZWxlbSA9IG5ld0NvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSApICYmXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0ZWxlbS5pZCA9PT0gbSApIHtcblxuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFR5cGUgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbIDIgXSApIHtcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdFx0Ly8gQ2xhc3Mgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggKCBtID0gbWF0Y2hbIDMgXSApICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJlxuXHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVGFrZSBhZHZhbnRhZ2Ugb2YgcXVlcnlTZWxlY3RvckFsbFxuXHRcdFx0aWYgKCBzdXBwb3J0LnFzYSAmJlxuXHRcdFx0XHQhbm9ubmF0aXZlU2VsZWN0b3JDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdCggIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkgKSAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDggb25seVxuXHRcdFx0XHQvLyBFeGNsdWRlIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0XHQoIG5vZGVUeXBlICE9PSAxIHx8IGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJvYmplY3RcIiApICkge1xuXG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXG5cdFx0XHRcdC8vIHFTQSBjb25zaWRlcnMgZWxlbWVudHMgb3V0c2lkZSBhIHNjb3Bpbmcgcm9vdCB3aGVuIGV2YWx1YXRpbmcgY2hpbGQgb3Jcblx0XHRcdFx0Ly8gZGVzY2VuZGFudCBjb21iaW5hdG9ycywgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudC5cblx0XHRcdFx0Ly8gSW4gc3VjaCBjYXNlcywgd2Ugd29yayBhcm91bmQgdGhlIGJlaGF2aW9yIGJ5IHByZWZpeGluZyBldmVyeSBzZWxlY3RvciBpbiB0aGVcblx0XHRcdFx0Ly8gbGlzdCB3aXRoIGFuIElEIHNlbGVjdG9yIHJlZmVyZW5jaW5nIHRoZSBzY29wZSBjb250ZXh0LlxuXHRcdFx0XHQvLyBUaGUgdGVjaG5pcXVlIGhhcyB0byBiZSB1c2VkIGFzIHdlbGwgd2hlbiBhIGxlYWRpbmcgY29tYmluYXRvciBpcyB1c2VkXG5cdFx0XHRcdC8vIGFzIHN1Y2ggc2VsZWN0b3JzIGFyZSBub3QgcmVjb2duaXplZCBieSBxdWVyeVNlbGVjdG9yQWxsLlxuXHRcdFx0XHQvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB0ZWNobmlxdWUuXG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHQoIHJkZXNjZW5kLnRlc3QoIHNlbGVjdG9yICkgfHwgcmNvbWJpbmF0b3JzLnRlc3QoIHNlbGVjdG9yICkgKSApIHtcblxuXHRcdFx0XHRcdC8vIEV4cGFuZCBjb250ZXh0IGZvciBzaWJsaW5nIHNlbGVjdG9yc1xuXHRcdFx0XHRcdG5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fFxuXHRcdFx0XHRcdFx0Y29udGV4dDtcblxuXHRcdFx0XHRcdC8vIFdlIGNhbiB1c2UgOnNjb3BlIGluc3RlYWQgb2YgdGhlIElEIGhhY2sgaWYgdGhlIGJyb3dzZXJcblx0XHRcdFx0XHQvLyBzdXBwb3J0cyBpdCAmIGlmIHdlJ3JlIG5vdCBjaGFuZ2luZyB0aGUgY29udGV4dC5cblx0XHRcdFx0XHRpZiAoIG5ld0NvbnRleHQgIT09IGNvbnRleHQgfHwgIXN1cHBvcnQuc2NvcGUgKSB7XG5cblx0XHRcdFx0XHRcdC8vIENhcHR1cmUgdGhlIGNvbnRleHQgSUQsIHNldHRpbmcgaXQgZmlyc3QgaWYgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0XHRpZiAoICggbmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApICkgKSB7XG5cdFx0XHRcdFx0XHRcdG5pZCA9IG5pZC5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0LnNldEF0dHJpYnV0ZSggXCJpZFwiLCAoIG5pZCA9IGV4cGFuZG8gKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZWZpeCBldmVyeSBzZWxlY3RvciBpbiB0aGUgbGlzdFxuXHRcdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdFx0XHRcdGkgPSBncm91cHMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0Z3JvdXBzWyBpIF0gPSAoIG5pZCA/IFwiI1wiICsgbmlkIDogXCI6c2NvcGVcIiApICsgXCIgXCIgK1xuXHRcdFx0XHRcdFx0XHR0b1NlbGVjdG9yKCBncm91cHNbIGkgXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKCBcIixcIiApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0bmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0fSBjYXRjaCAoIHFzYUVycm9yICkge1xuXHRcdFx0XHRcdG5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCBuaWQgPT09IGV4cGFuZG8gKSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblxuXHRcdFx0Ly8gT25seSBrZWVwIHRoZSBtb3N0IHJlY2VudCBlbnRyaWVzXG5cdFx0XHRkZWxldGUgY2FjaGVbIGtleXMuc2hpZnQoKSBdO1xuXHRcdH1cblx0XHRyZXR1cm4gKCBjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlICk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZWxlbWVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZmllbGRzZXRcIiApO1xuXG5cdHRyeSB7XG5cdFx0cmV0dXJuICEhZm4oIGVsICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblxuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZWwucGFyZW50Tm9kZSApIHtcblx0XHRcdGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsICk7XG5cdFx0fVxuXG5cdFx0Ly8gcmVsZWFzZSBtZW1vcnkgaW4gSUVcblx0XHRlbCA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KCBcInxcIiApLFxuXHRcdGkgPSBhcnIubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyWyBpIF0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0YS5zb3VyY2VJbmRleCAtIGIuc291cmNlSW5kZXg7XG5cblx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdGlmICggZGlmZiApIHtcblx0XHRyZXR1cm4gZGlmZjtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdGlmICggY3VyICkge1xuXHRcdHdoaWxlICggKCBjdXIgPSBjdXIubmV4dFNpYmxpbmcgKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAoIG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiICkgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgOmVuYWJsZWQvOmRpc2FibGVkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGRpc2FibGVkIHRydWUgZm9yIDpkaXNhYmxlZDsgZmFsc2UgZm9yIDplbmFibGVkXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURpc2FibGVkUHNldWRvKCBkaXNhYmxlZCApIHtcblxuXHQvLyBLbm93biA6ZGlzYWJsZWQgZmFsc2UgcG9zaXRpdmVzOiBmaWVsZHNldFtkaXNhYmxlZF0gPiBsZWdlbmQ6bnRoLW9mLXR5cGUobisyKSA6Y2FuLWRpc2FibGVcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gT25seSBjZXJ0YWluIGVsZW1lbnRzIGNhbiBtYXRjaCA6ZW5hYmxlZCBvciA6ZGlzYWJsZWRcblx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zY3JpcHRpbmcuaHRtbCNzZWxlY3Rvci1lbmFibGVkXG5cdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2NyaXB0aW5nLmh0bWwjc2VsZWN0b3ItZGlzYWJsZWRcblx0XHRpZiAoIFwiZm9ybVwiIGluIGVsZW0gKSB7XG5cblx0XHRcdC8vIENoZWNrIGZvciBpbmhlcml0ZWQgZGlzYWJsZWRuZXNzIG9uIHJlbGV2YW50IG5vbi1kaXNhYmxlZCBlbGVtZW50czpcblx0XHRcdC8vICogbGlzdGVkIGZvcm0tYXNzb2NpYXRlZCBlbGVtZW50cyBpbiBhIGRpc2FibGVkIGZpZWxkc2V0XG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY2F0ZWdvcnktbGlzdGVkXG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY29uY2VwdC1mZS1kaXNhYmxlZFxuXHRcdFx0Ly8gKiBvcHRpb24gZWxlbWVudHMgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0Ly8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NvbmNlcHQtb3B0aW9uLWRpc2FibGVkXG5cdFx0XHQvLyBBbGwgc3VjaCBlbGVtZW50cyBoYXZlIGEgXCJmb3JtXCIgcHJvcGVydHkuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSAmJiBlbGVtLmRpc2FibGVkID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHQvLyBPcHRpb24gZWxlbWVudHMgZGVmZXIgdG8gYSBwYXJlbnQgb3B0Z3JvdXAgaWYgcHJlc2VudFxuXHRcdFx0XHRpZiAoIFwibGFiZWxcIiBpbiBlbGVtICkge1xuXHRcdFx0XHRcdGlmICggXCJsYWJlbFwiIGluIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLnBhcmVudE5vZGUuZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgNiAtIDExXG5cdFx0XHRcdC8vIFVzZSB0aGUgaXNEaXNhYmxlZCBzaG9ydGN1dCBwcm9wZXJ0eSB0byBjaGVjayBmb3IgZGlzYWJsZWQgZmllbGRzZXQgYW5jZXN0b3JzXG5cdFx0XHRcdHJldHVybiBlbGVtLmlzRGlzYWJsZWQgPT09IGRpc2FibGVkIHx8XG5cblx0XHRcdFx0XHQvLyBXaGVyZSB0aGVyZSBpcyBubyBpc0Rpc2FibGVkLCBjaGVjayBtYW51YWxseVxuXHRcdFx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0XHRcdGVsZW0uaXNEaXNhYmxlZCAhPT0gIWRpc2FibGVkICYmXG5cdFx0XHRcdFx0aW5EaXNhYmxlZEZpZWxkc2V0KCBlbGVtICkgPT09IGRpc2FibGVkO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cblx0XHQvLyBUcnkgdG8gd2lubm93IG91dCBlbGVtZW50cyB0aGF0IGNhbid0IGJlIGRpc2FibGVkIGJlZm9yZSB0cnVzdGluZyB0aGUgZGlzYWJsZWQgcHJvcGVydHkuXG5cdFx0Ly8gU29tZSB2aWN0aW1zIGdldCBjYXVnaHQgaW4gb3VyIG5ldCAobGFiZWwsIGxlZ2VuZCwgbWVudSwgdHJhY2spLCBidXQgaXQgc2hvdWxkbid0XG5cdFx0Ly8gZXZlbiBleGlzdCBvbiB0aGVtLCBsZXQgYWxvbmUgaGF2ZSBhIGJvb2xlYW4gdmFsdWUuXG5cdFx0fSBlbHNlIGlmICggXCJsYWJlbFwiIGluIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gUmVtYWluaW5nIGVsZW1lbnRzIGFyZSBuZWl0aGVyIDplbmFibGVkIG5vciA6ZGlzYWJsZWRcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFsc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRhcmd1bWVudCA9ICthcmd1bWVudDtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoIGogPSBtYXRjaEluZGV4ZXNbIGkgXSApIF0gKSB7XG5cdFx0XHRcdFx0c2VlZFsgaiBdID0gISggbWF0Y2hlc1sgaiBdID0gc2VlZFsgaiBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0gKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dFxuICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkge1xuXHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xufVxuXG4vLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cbi8qKlxuICogRGV0ZWN0cyBYTUwgbm9kZXNcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG4gKi9cbmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBuYW1lc3BhY2UgPSBlbGVtLm5hbWVzcGFjZVVSSSxcblx0XHRkb2NFbGVtID0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApLmRvY3VtZW50RWxlbWVudDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PThcblx0Ly8gQXNzdW1lIEhUTUwgd2hlbiBkb2N1bWVudEVsZW1lbnQgZG9lc24ndCB5ZXQgZXhpc3QsIHN1Y2ggYXMgaW5zaWRlIGxvYWRpbmcgaWZyYW1lc1xuXHQvLyBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvNDgzM1xuXHRyZXR1cm4gIXJodG1sLnRlc3QoIG5hbWVzcGFjZSB8fCBkb2NFbGVtICYmIGRvY0VsZW0ubm9kZU5hbWUgfHwgXCJIVE1MXCIgKTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgc3ViV2luZG93LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZFxuXHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuXHRpZiAoIGRvYyA9PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gVXBkYXRlIGdsb2JhbCB2YXJpYWJsZXNcblx0ZG9jdW1lbnQgPSBkb2M7XG5cdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2N1bWVudCApO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSssIEVkZ2UgMTIgLSAxOCtcblx0Ly8gQWNjZXNzaW5nIGlmcmFtZSBkb2N1bWVudHMgYWZ0ZXIgdW5sb2FkIHRocm93cyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KVxuXHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuXHRpZiAoIHByZWZlcnJlZERvYyAhPSBkb2N1bWVudCAmJlxuXHRcdCggc3ViV2luZG93ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcgKSAmJiBzdWJXaW5kb3cudG9wICE9PSBzdWJXaW5kb3cgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSAxMSwgRWRnZVxuXHRcdGlmICggc3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5XG5cdFx0fSBlbHNlIGlmICggc3ViV2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHRcdFx0c3ViV2luZG93LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRSA4IC0gMTErLCBFZGdlIDEyIC0gMTgrLCBDaHJvbWUgPD0xNiAtIDI1IG9ubHksIEZpcmVmb3ggPD0zLjYgLSAzMSBvbmx5LFxuXHQvLyBTYWZhcmkgNCAtIDUgb25seSwgT3BlcmEgPD0xMS42IC0gMTIueCBvbmx5XG5cdC8vIElFL0VkZ2UgJiBvbGRlciBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSA6c2NvcGUgcHNldWRvLWNsYXNzLlxuXHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wIG9ubHlcblx0Ly8gU2FmYXJpIDYuMCBzdXBwb3J0cyA6c2NvcGUgYnV0IGl0J3MgYW4gYWxpYXMgb2YgOnJvb3QgdGhlcmUuXG5cdHN1cHBvcnQuc2NvcGUgPSBhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblx0XHRyZXR1cm4gdHlwZW9mIGVsLnF1ZXJ5U2VsZWN0b3JBbGwgIT09IFwidW5kZWZpbmVkXCIgJiZcblx0XHRcdCFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIjpzY29wZSBmaWVsZHNldCBkaXZcIiApLmxlbmd0aDtcblx0fSApO1xuXG5cdC8qIEF0dHJpYnV0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdC8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuXHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblx0XHRlbC5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWVsLmdldEF0dHJpYnV0ZSggXCJjbGFzc05hbWVcIiApO1xuXHR9ICk7XG5cblx0LyogZ2V0RWxlbWVudChzKUJ5KlxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIHJldHVybnMgb25seSBlbGVtZW50c1xuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZWwuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIFwiXCIgKSApO1xuXHRcdHJldHVybiAhZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiKlwiICkubGVuZ3RoO1xuXHR9ICk7XG5cblx0Ly8gU3VwcG9ydDogSUU8OVxuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbW1hdGljYWxseS1zZXQgbmFtZXMsXG5cdC8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdFxuXHRzdXBwb3J0LmdldEJ5SWQgPSBhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDtcblx0fSApO1xuXG5cdC8vIElEIGZpbHRlciBhbmQgZmluZFxuXHRpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHtcblx0XHRFeHByLmZpbHRlclsgXCJJRFwiIF0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBcImlkXCIgKSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcdEV4cHIuZmluZFsgXCJJRFwiIF0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdHJldHVybiBlbGVtID8gWyBlbGVtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdEV4cHIuZmlsdGVyWyBcIklEXCIgXSA9ICBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIG5vZGUgPSB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBcImlkXCIgKTtcblx0XHRcdFx0cmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgNiAtIDcgb25seVxuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRFeHByLmZpbmRbIFwiSURcIiBdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIG5vZGUsIGksIGVsZW1zLFxuXHRcdFx0XHRcdGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXG5cdFx0XHRcdGlmICggZWxlbSApIHtcblxuXHRcdFx0XHRcdC8vIFZlcmlmeSB0aGUgaWQgYXR0cmlidXRlXG5cdFx0XHRcdFx0bm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0aWYgKCBub2RlICYmIG5vZGUudmFsdWUgPT09IGlkICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFsgZWxlbSBdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEZhbGwgYmFjayBvbiBnZXRFbGVtZW50c0J5TmFtZVxuXHRcdFx0XHRcdGVsZW1zID0gY29udGV4dC5nZXRFbGVtZW50c0J5TmFtZSggaWQgKTtcblx0XHRcdFx0XHRpID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggZWxlbSA9IGVsZW1zWyBpKysgXSApICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0XHRpZiAoIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gaWQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBbIGVsZW0gXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbIFwiVEFHXCIgXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTlxuXHRcdFx0fSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyApO1xuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHR0bXAgPSBbXSxcblx0XHRcdFx0aSA9IDAsXG5cblx0XHRcdFx0Ly8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvb1xuXHRcdFx0XHRyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcblx0XHRcdGlmICggdGFnID09PSBcIipcIiApIHtcblx0XHRcdFx0d2hpbGUgKCAoIGVsZW0gPSByZXN1bHRzWyBpKysgXSApICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdHRtcC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH07XG5cblx0Ly8gQ2xhc3Ncblx0RXhwci5maW5kWyBcIkNMQVNTXCIgXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkge1xuXHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0cmJ1Z2d5UVNBID0gW107XG5cblx0aWYgKCAoIHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICkgKSApIHtcblxuXHRcdC8vIEJ1aWxkIFFTQSByZWdleFxuXHRcdC8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmlcblx0XHRhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblxuXHRcdFx0dmFyIGlucHV0O1xuXG5cdFx0XHQvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG5cdFx0XHQvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcblx0XHRcdC8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLFxuXHRcdFx0Ly8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pbm5lckhUTUwgPSBcIjxhIGlkPSdcIiArIGV4cGFuZG8gKyBcIic+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGlkPSdcIiArIGV4cGFuZG8gKyBcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz5cIiArXG5cdFx0XHRcdFwiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNlxuXHRcdFx0Ly8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPVxuXHRcdFx0Ly8gVGhlIHRlc3QgYXR0cmlidXRlIG11c3QgYmUgdW5rbm93biBpbiBPcGVyYSBidXQgXCJzYWZlXCIgZm9yIFdpblJUXG5cdFx0XHQvLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbCggXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJbKl4kXT1cIiArIHdoaXRlc3BhY2UgKyBcIiooPzonJ3xcXFwiXFxcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEJvb2xlYW4gYXR0cmlidXRlcyBhbmQgXCJ2YWx1ZVwiIGFyZSBub3QgdHJlYXRlZCBjb3JyZWN0bHlcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW3NlbGVjdGVkXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKig/OnZhbHVlfFwiICsgYm9vbGVhbnMgKyBcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWU8MjksIEFuZHJvaWQ8NC40LCBTYWZhcmk8Ny4wKywgaU9TPDcuMCssIFBoYW50b21KUzwxLjkuOCtcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIn49XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE1IC0gMTgrXG5cdFx0XHQvLyBJRSAxMS9FZGdlIGRvbid0IGZpbmQgZWxlbWVudHMgb24gYSBgW25hbWU9JyddYCBxdWVyeSBpbiBzb21lIGNhc2VzLlxuXHRcdFx0Ly8gQWRkaW5nIGEgdGVtcG9yYXJ5IGF0dHJpYnV0ZSB0byB0aGUgZG9jdW1lbnQgYmVmb3JlIHRoZSBzZWxlY3Rpb24gd29ya3Ncblx0XHRcdC8vIGFyb3VuZCB0aGUgaXNzdWUuXG5cdFx0XHQvLyBJbnRlcmVzdGluZ2x5LCBJRSAxMCAmIG9sZGVyIGRvbid0IHNlZW0gdG8gaGF2ZSB0aGUgaXNzdWUuXG5cdFx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJcIiApO1xuXHRcdFx0ZWwuYXBwZW5kQ2hpbGQoIGlucHV0ICk7XG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIltuYW1lPScnXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIio9XCIgK1xuXHRcdFx0XHRcdHdoaXRlc3BhY2UgKyBcIiooPzonJ3xcXFwiXFxcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBXZWJraXQvT3BlcmEgLSA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIHNlbGVjdGVkIG9wdGlvbiBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIjpjaGVja2VkXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjpjaGVja2VkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCtcblx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTFcblx0XHRcdC8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmxpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiYSNcIiArIGV4cGFuZG8gKyBcIisqXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIi4jLitbK35dXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTMuNiAtIDUgb25seVxuXHRcdFx0Ly8gT2xkIEZpcmVmb3ggZG9lc24ndCB0aHJvdyBvbiBhIGJhZGx5LWVzY2FwZWQgaWRlbnRpZmllci5cblx0XHRcdGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiXFxcXFxcZlwiICk7XG5cdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJbXFxcXHJcXFxcblxcXFxmXVwiICk7XG5cdFx0fSApO1xuXG5cdFx0YXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+XCIgK1xuXHRcdFx0XHRcIjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuXHRcdFx0ZWwuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbCggXCJbbmFtZT1kXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIjplbmFibGVkXCIgKS5sZW5ndGggIT09IDIgKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gSUUncyA6ZGlzYWJsZWQgc2VsZWN0b3IgZG9lcyBub3QgcGljayB1cCB0aGUgY2hpbGRyZW4gb2YgZGlzYWJsZWQgZmllbGRzZXRzXG5cdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbCggXCI6ZGlzYWJsZWRcIiApLmxlbmd0aCAhPT0gMiApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBPcGVyYSAxMCAtIDExIG9ubHlcblx0XHRcdC8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zXG5cdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIiosOnhcIiApO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiLC4qOlwiICk7XG5cdFx0fSApO1xuXHR9XG5cblx0aWYgKCAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAoIG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHxcblx0XHRkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvciApICkgKSApIHtcblxuXHRcdGFzc2VydCggZnVuY3Rpb24oIGVsICkge1xuXG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBlbCwgXCIqXCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBlbCwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHR9ICk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKCBcInxcIiApICk7XG5cdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oIFwifFwiICkgKTtcblxuXHQvKiBDb250YWluc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdGhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTtcblxuXHQvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXJcblx0Ly8gUHVycG9zZWZ1bGx5IHNlbGYtZXhjbHVzaXZlXG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkgKTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdGlmICggYiApIHtcblx0XHRcdFx0d2hpbGUgKCAoIGIgPSBiLnBhcmVudE5vZGUgKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdFx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdFx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0XHRjb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG5cdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcblx0XHRcdDE7XG5cblx0XHQvLyBEaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHQoICFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUgKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0XHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdFx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuXHRcdFx0aWYgKCBhID09IGRvY3VtZW50IHx8IGEub3duZXJEb2N1bWVudCA9PSBwcmVmZXJyZWREb2MgJiZcblx0XHRcdFx0Y29udGFpbnMoIHByZWZlcnJlZERvYywgYSApICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDExKywgRWRnZSAxNyAtIDE4K1xuXHRcdFx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdFx0XHQvLyB0d28gZG9jdW1lbnRzOyBzaGFsbG93IGNvbXBhcmlzb25zIHdvcmsuXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG5cdFx0XHRpZiAoIGIgPT0gZG9jdW1lbnQgfHwgYi5vd25lckRvY3VtZW50ID09IHByZWZlcnJlZERvYyAmJlxuXHRcdFx0XHRjb250YWlucyggcHJlZmVycmVkRG9jLCBiICkgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlclxuXHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG5cdH0gOlxuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0YXVwID0gYS5wYXJlbnROb2RlLFxuXHRcdFx0YnVwID0gYi5wYXJlbnROb2RlLFxuXHRcdFx0YXAgPSBbIGEgXSxcblx0XHRcdGJwID0gWyBiIF07XG5cblx0XHQvLyBQYXJlbnRsZXNzIG5vZGVzIGFyZSBlaXRoZXIgZG9jdW1lbnRzIG9yIGRpc2Nvbm5lY3RlZFxuXHRcdGlmICggIWF1cCB8fCAhYnVwICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0XHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdFx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdFx0XHRyZXR1cm4gYSA9PSBkb2N1bWVudCA/IC0xIDpcblx0XHRcdFx0YiA9PSBkb2N1bWVudCA/IDEgOlxuXHRcdFx0XHQvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHRcdFx0XHRhdXAgPyAtMSA6XG5cdFx0XHRcdGJ1cCA/IDEgOlxuXHRcdFx0XHRzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cblx0XHQvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVja1xuXHRcdH0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSB3ZSBuZWVkIGZ1bGwgbGlzdHMgb2YgdGhlaXIgYW5jZXN0b3JzIGZvciBjb21wYXJpc29uXG5cdFx0Y3VyID0gYTtcblx0XHR3aGlsZSAoICggY3VyID0gY3VyLnBhcmVudE5vZGUgKSApIHtcblx0XHRcdGFwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblx0XHRjdXIgPSBiO1xuXHRcdHdoaWxlICggKCBjdXIgPSBjdXIucGFyZW50Tm9kZSApICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwWyBpIF0gPT09IGJwWyBpIF0gKSB7XG5cdFx0XHRpKys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGkgP1xuXG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbIGkgXSwgYnBbIGkgXSApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIG5vZGVzIGluIG91ciBkb2N1bWVudCBzb3J0IGZpcnN0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0XHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdFx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdFx0XHRhcFsgaSBdID09IHByZWZlcnJlZERvYyA/IC0xIDpcblx0XHRcdGJwWyBpIF0gPT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHRcdFx0MDtcblx0fTtcblxuXHRyZXR1cm4gZG9jdW1lbnQ7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0IW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbIGV4cHIgKyBcIiBcIiBdICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblxuXHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHQvLyBmcmFnbWVudCBpbiBJRSA5XG5cdFx0XHRcdGVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRub25uYXRpdmVTZWxlY3RvckNhY2hlKCBleHByLCB0cnVlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIFNpenpsZSggZXhwciwgZG9jdW1lbnQsIG51bGwsIFsgZWxlbSBdICkubGVuZ3RoID4gMDtcbn07XG5cblNpenpsZS5jb250YWlucyA9IGZ1bmN0aW9uKCBjb250ZXh0LCBlbGVtICkge1xuXG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblxuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHQvLyB0d28gZG9jdW1lbnRzOyBzaGFsbG93IGNvbXBhcmlzb25zIHdvcmsuXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cblx0XHQvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcblx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0dW5kZWZpbmVkO1xuXG5cdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0dmFsIDpcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0KCB2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKSApICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVzY2FwZSA9IGZ1bmN0aW9uKCBzZWwgKSB7XG5cdHJldHVybiAoIHNlbCArIFwiXCIgKS5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcblx0dmFyIGVsZW0sXG5cdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdGogPSAwLFxuXHRcdGkgPSAwO1xuXG5cdC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2Vcblx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cblx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSByZXN1bHRzWyBpKysgXSApICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXG5cdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHR3aGlsZSAoICggbm9kZSA9IGVsZW1bIGkrKyBdICkgKSB7XG5cblx0XHRcdC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG5cdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuXG5cdFx0Ly8gVXNlIHRleHRDb250ZW50IGZvciBlbGVtZW50c1xuXHRcdC8vIGlubmVyVGV4dCB1c2FnZSByZW1vdmVkIGZvciBjb25zaXN0ZW5jeSBvZiBuZXcgbGluZXMgKGpRdWVyeSAjMTExNTMpXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS50ZXh0Q29udGVudCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBlbGVtLnRleHRDb250ZW50O1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblxuXHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuXHRyZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cblx0Ly8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG5cdGNhY2hlTGVuZ3RoOiA1MCxcblxuXHRjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuXHRtYXRjaDogbWF0Y2hFeHByLFxuXG5cdGF0dHJIYW5kbGU6IHt9LFxuXG5cdGZpbmQ6IHt9LFxuXG5cdHJlbGF0aXZlOiB7XG5cdFx0XCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG5cdH0sXG5cblx0cHJlRmlsdGVyOiB7XG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdG1hdGNoWyAxIF0gPSBtYXRjaFsgMSBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFsgMyBdID0gKCBtYXRjaFsgMyBdIHx8IG1hdGNoWyA0IF0gfHxcblx0XHRcdFx0bWF0Y2hbIDUgXSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsgMiBdID09PSBcIn49XCIgKSB7XG5cdFx0XHRcdG1hdGNoWyAzIF0gPSBcIiBcIiArIG1hdGNoWyAzIF0gKyBcIiBcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXG5cdFx0XHQvKiBtYXRjaGVzIGZyb20gbWF0Y2hFeHByW1wiQ0hJTERcIl1cblx0XHRcdFx0MSB0eXBlIChvbmx5fG50aHwuLi4pXG5cdFx0XHRcdDIgd2hhdCAoY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0MyBhcmd1bWVudCAoZXZlbnxvZGR8XFxkKnxcXGQqbihbKy1dXFxkKyk/fC4uLilcblx0XHRcdFx0NCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cXGQqbnwpXG5cdFx0XHRcdDUgc2lnbiBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NiB4IG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ3IHNpZ24gb2YgeS1jb21wb25lbnRcblx0XHRcdFx0OCB5IG9mIHktY29tcG9uZW50XG5cdFx0XHQqL1xuXHRcdFx0bWF0Y2hbIDEgXSA9IG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsgMSBdLnNsaWNlKCAwLCAzICkgPT09IFwibnRoXCIgKSB7XG5cblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbIDMgXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWyAwIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG51bWVyaWMgeCBhbmQgeSBwYXJhbWV0ZXJzIGZvciBFeHByLmZpbHRlci5DSElMRFxuXHRcdFx0XHQvLyByZW1lbWJlciB0aGF0IGZhbHNlL3RydWUgY2FzdCByZXNwZWN0aXZlbHkgdG8gMC8xXG5cdFx0XHRcdG1hdGNoWyA0IF0gPSArKCBtYXRjaFsgNCBdID9cblx0XHRcdFx0XHRtYXRjaFsgNSBdICsgKCBtYXRjaFsgNiBdIHx8IDEgKSA6XG5cdFx0XHRcdFx0MiAqICggbWF0Y2hbIDMgXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbIDMgXSA9PT0gXCJvZGRcIiApICk7XG5cdFx0XHRcdG1hdGNoWyA1IF0gPSArKCAoIG1hdGNoWyA3IF0gKyBtYXRjaFsgOCBdICkgfHwgbWF0Y2hbIDMgXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbIDMgXSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbIDYgXSAmJiBtYXRjaFsgMiBdO1xuXG5cdFx0XHRpZiAoIG1hdGNoRXhwclsgXCJDSElMRFwiIF0udGVzdCggbWF0Y2hbIDAgXSApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcblx0XHRcdGlmICggbWF0Y2hbIDMgXSApIHtcblx0XHRcdFx0bWF0Y2hbIDIgXSA9IG1hdGNoWyA0IF0gfHwgbWF0Y2hbIDUgXSB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTdHJpcCBleGNlc3MgY2hhcmFjdGVycyBmcm9tIHVucXVvdGVkIGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmXG5cblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KCBleGNlc3MgPSB0b2tlbml6ZSggdW5xdW90ZWQsIHRydWUgKSApICYmXG5cblx0XHRcdFx0Ly8gYWR2YW5jZSB0byB0aGUgbmV4dCBjbG9zaW5nIHBhcmVudGhlc2lzXG5cdFx0XHRcdCggZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoICkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbIDAgXSA9IG1hdGNoWyAwIF0uc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0XHRtYXRjaFsgMiBdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuXHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0KCBwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XHRcdFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApICkgJiYgY2xhc3NDYWNoZShcblx0XHRcdFx0XHRcdGNsYXNzTmFtZSwgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoXG5cdFx0XHRcdFx0XHRcdFx0dHlwZW9mIGVsZW0uY2xhc3NOYW1lID09PSBcInN0cmluZ1wiICYmIGVsZW0uY2xhc3NOYW1lIHx8XG5cdFx0XHRcdFx0XHRcdFx0dHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggXCJjbGFzc1wiICkgfHxcblx0XHRcdFx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gKTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5cblx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIj1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiE9XCIgPyByZXN1bHQgIT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJePVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIio9XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIkPVwiID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ+PVwiID8gKCBcIiBcIiArIHJlc3VsdC5yZXBsYWNlKCByd2hpdGVzcGFjZSwgXCIgXCIgKSArIFwiIFwiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ8PVwiID8gcmVzdWx0ID09PSBjaGVjayB8fCByZXN1bHQuc2xpY2UoIDAsIGNoZWNrLmxlbmd0aCArIDEgKSA9PT0gY2hlY2sgKyBcIi1cIiA6XG5cdFx0XHRcdFx0ZmFsc2U7XG5cdFx0XHRcdC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqL1xuXG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBfYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuXHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRvZlR5cGUgPSB3aGF0ID09PSBcIm9mLXR5cGVcIjtcblxuXHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG5cdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHR9IDpcblxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgX2NvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LFxuXHRcdFx0XHRcdFx0ZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIixcblx0XHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0dXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGUsXG5cdFx0XHRcdFx0XHRkaWZmID0gZmFsc2U7XG5cblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHRcdFx0aWYgKCBzaW1wbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggZGlyICkge1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKCBub2RlID0gbm9kZVsgZGlyIF0gKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmV2ZXJzZSBkaXJlY3Rpb24gZm9yIDpvbmx5LSogKGlmIHdlIGhhdmVuJ3QgeWV0IGRvbmUgc28pXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQgPSBkaXIgPSB0eXBlID09PSBcIm9ubHlcIiAmJiAhc3RhcnQgJiYgXCJuZXh0U2libGluZ1wiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzdGFydCA9IFsgZm9yd2FyZCA/IHBhcmVudC5maXJzdENoaWxkIDogcGFyZW50Lmxhc3RDaGlsZCBdO1xuXG5cdFx0XHRcdFx0XHQvLyBub24teG1sIDpudGgtY2hpbGQoLi4uKSBzdG9yZXMgY2FjaGUgZGF0YSBvbiBgcGFyZW50YFxuXHRcdFx0XHRcdFx0aWYgKCBmb3J3YXJkICYmIHVzZUNhY2hlICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0bm9kZSA9IHBhcmVudDtcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAoIG5vZGVbIGV4cGFuZG8gXSA9IHt9ICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQoIG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9ICk7XG5cblx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAoIG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdCggZGlmZiA9IG5vZGVJbmRleCA9IDAgKSB8fCBzdGFydC5wb3AoKSApICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheVxuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKCBub2RlWyBleHBhbmRvIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQoIG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9ICk7XG5cblx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXg7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyB4bWwgOm50aC1jaGlsZCguLi4pXG5cdFx0XHRcdFx0XHRcdC8vIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdFx0aWYgKCBkaWZmID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAoIG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQoIGRpZmYgPSBub2RlSW5kZXggPSAwICkgfHwgc3RhcnQucG9wKCkgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQrK2RpZmYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCggbm9kZVsgZXhwYW5kbyBdID0ge30gKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KCBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXG5cdFx0XHQvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jcHNldWRvLWNsYXNzZXNcblx0XHRcdC8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzXG5cdFx0XHQvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG5cdFx0XHR2YXIgYXJncyxcblx0XHRcdFx0Zm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cblx0XHRcdC8vIFRoZSB1c2VyIG1heSB1c2UgY3JlYXRlUHNldWRvIHRvIGluZGljYXRlIHRoYXRcblx0XHRcdC8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG5cdFx0XHQvLyBqdXN0IGFzIFNpenpsZSBkb2VzXG5cdFx0XHRpZiAoIGZuWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHJldHVybiBmbiggYXJndW1lbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzXG5cdFx0XHRpZiAoIGZuLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdGFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCBcIlwiLCBhcmd1bWVudCBdO1xuXHRcdFx0XHRyZXR1cm4gRXhwci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KCBwc2V1ZG8udG9Mb3dlckNhc2UoKSApID9cblx0XHRcdFx0XHRtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFsgaSBdICk7XG5cdFx0XHRcdFx0XHRcdHNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkWyBpIF0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZuO1xuXHRcdH1cblx0fSxcblxuXHRwc2V1ZG9zOiB7XG5cblx0XHQvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3Ncblx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblxuXHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG5cdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRyZXN1bHRzID0gW10sXG5cdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/XG5cdFx0XHRcdG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIF9jb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoICggZWxlbSA9IHVubWF0Y2hlZFsgaSBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdHNlZWRbIGkgXSA9ICEoIG1hdGNoZXNbIGkgXSA9IGVsZW0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBfY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WyAwIF0gPSBlbGVtO1xuXHRcdFx0XHRcdG1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTtcblxuXHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0aW5wdXRbIDAgXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0gKSxcblxuXHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7XG5cdFx0XHR9O1xuXHRcdH0gKSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHR9O1xuXHRcdH0gKSxcblxuXHRcdC8vIFwiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvclxuXHRcdC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG5cdFx0Ly8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcblx0XHQvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IFwiLVwiLlxuXHRcdC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuXHRcdC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvXG5cdFx0XCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG5cblx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QoIGxhbmcgfHwgXCJcIiApICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKCBlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggXCJ4bWw6bGFuZ1wiICkgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoIFwibGFuZ1wiICkgKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoICggZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSApICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9ICksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxuXHRcdFx0XHQoICFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpICkgJiZcblx0XHRcdFx0ISEoIGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXggKTtcblx0XHR9LFxuXG5cdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XCJlbmFibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCBmYWxzZSApLFxuXHRcdFwiZGlzYWJsZWRcIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIHRydWUgKSxcblxuXHRcdFwiY2hlY2tlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiAhIWVsZW0uY2hlY2tlZCApIHx8XG5cdFx0XHRcdCggbm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkICk7XG5cdFx0fSxcblxuXHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG5cdFx0XHRcdGVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0Ly8gQ29udGVudHNcblx0XHRcImVtcHR5XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkb1xuXHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0Ly8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLilcblx0XHRcdC8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbIFwiZW1wdHlcIiBdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKCBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICkgKSA9PSBudWxsIHx8XG5cdFx0XHRcdFx0YXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbIDAgXTtcblx0XHR9ICksXG5cblx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZnVuY3Rpb24oIF9tYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHR9ICksXG5cblx0XHRcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZ1bmN0aW9uKCBfbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0cmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuXHRcdH0gKSxcblxuXHRcdFwiZXZlblwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSApLFxuXG5cdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAxO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0gKSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID9cblx0XHRcdFx0YXJndW1lbnQgKyBsZW5ndGggOlxuXHRcdFx0XHRhcmd1bWVudCA+IGxlbmd0aCA/XG5cdFx0XHRcdFx0bGVuZ3RoIDpcblx0XHRcdFx0XHRhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgLS1pID49IDA7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9ICksXG5cblx0XHRcImd0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0gKVxuXHR9XG59O1xuXG5FeHByLnBzZXVkb3NbIFwibnRoXCIgXSA9IEV4cHIucHNldWRvc1sgXCJlcVwiIF07XG5cbi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zXG5mb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApO1xufVxuZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbn1cblxuLy8gRWFzeSBBUEkgZm9yIGNyZWF0aW5nIG5ldyBzZXRGaWx0ZXJzXG5mdW5jdGlvbiBzZXRGaWx0ZXJzKCkge31cbnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuRXhwci5zZXRGaWx0ZXJzID0gbmV3IHNldEZpbHRlcnMoKTtcblxudG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0dmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG5cdFx0c29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcblx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCBjYWNoZWQgKSB7XG5cdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0fVxuXG5cdHNvRmFyID0gc2VsZWN0b3I7XG5cdGdyb3VwcyA9IFtdO1xuXHRwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7XG5cblx0d2hpbGUgKCBzb0ZhciApIHtcblxuXHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRpZiAoICFtYXRjaGVkIHx8ICggbWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSApICkge1xuXHRcdFx0aWYgKCBtYXRjaCApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFsgMCBdLmxlbmd0aCApIHx8IHNvRmFyO1xuXHRcdFx0fVxuXHRcdFx0Z3JvdXBzLnB1c2goICggdG9rZW5zID0gW10gKSApO1xuXHRcdH1cblxuXHRcdG1hdGNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIENvbWJpbmF0b3JzXG5cdFx0aWYgKCAoIG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkgKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goIHtcblx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWyAwIF0ucmVwbGFjZSggcnRyaW0sIFwiIFwiIClcblx0XHRcdH0gKTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoICggbWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApICkgJiYgKCAhcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdCggbWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkgKSApICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goIHtcblx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG1hdGNoZXM6IG1hdGNoXG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG5cdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHQvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnNcblx0cmV0dXJuIHBhcnNlT25seSA/XG5cdFx0c29GYXIubGVuZ3RoIDpcblx0XHRzb0ZhciA/XG5cdFx0XHRTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHQvLyBDYWNoZSB0aGUgdG9rZW5zXG5cdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcbn07XG5cbmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRzZWxlY3RvciArPSB0b2tlbnNbIGkgXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRza2lwID0gY29tYmluYXRvci5uZXh0LFxuXHRcdGtleSA9IHNraXAgfHwgZGlyLFxuXHRcdGNoZWNrTm9uRWxlbWVudHMgPSBiYXNlICYmIGtleSA9PT0gXCJwYXJlbnROb2RlXCIsXG5cdFx0ZG9uZU5hbWUgPSBkb25lKys7XG5cblx0cmV0dXJuIGNvbWJpbmF0b3IuZmlyc3QgP1xuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSxcblx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cblx0XHRcdC8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZ1xuXHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoIGVsZW1bIGV4cGFuZG8gXSA9IHt9ICk7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0KCBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHNraXAgJiYgc2tpcCA9PT0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtID0gZWxlbVsgZGlyIF0gfHwgZWxlbTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoICggb2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsga2V5IF0gKSAmJlxuXHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHJldHVybiAoIG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIGtleSBdID0gbmV3Q2FjaGU7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQSBtYXRjaCBtZWFucyB3ZSdyZSBkb25lOyBhIGZhaWwgbWVhbnMgd2UgaGF2ZSB0byBrZWVwIGNoZWNraW5nXG5cdFx0XHRcdFx0XHRcdGlmICggKCBuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1sgaSBdKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gOlxuXHRcdG1hdGNoZXJzWyAwIF07XG59XG5cbmZ1bmN0aW9uIG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yLCBjb250ZXh0cywgcmVzdWx0cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0U2l6emxlKCBzZWxlY3RvciwgY29udGV4dHNbIGkgXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKCBlbGVtID0gdW5tYXRjaGVkWyBpIF0gKSApIHtcblx0XHRcdGlmICggIWZpbHRlciB8fCBmaWx0ZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRuZXdVbm1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0XHRpZiAoIG1hcHBlZCApIHtcblx0XHRcdFx0XHRtYXAucHVzaCggaSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG5ld1VubWF0Y2hlZDtcbn1cblxuZnVuY3Rpb24gc2V0TWF0Y2hlciggcHJlRmlsdGVyLCBzZWxlY3RvciwgbWF0Y2hlciwgcG9zdEZpbHRlciwgcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICkge1xuXHRpZiAoIHBvc3RGaWx0ZXIgJiYgIXBvc3RGaWx0ZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmlsdGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbHRlciApO1xuXHR9XG5cdGlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTtcblx0fVxuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciB0ZW1wLCBpLCBlbGVtLFxuXHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0ZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoXG5cdFx0XHRcdHNlbGVjdG9yIHx8IFwiKlwiLFxuXHRcdFx0XHRjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LFxuXHRcdFx0XHRbXVxuXHRcdFx0KSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuXHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFtdIDpcblxuXHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdHJlc3VsdHMgOlxuXHRcdFx0XHRtYXRjaGVySW47XG5cblx0XHQvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuXHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdGlmICggcG9zdEZpbHRlciApIHtcblx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG5cdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAoIGVsZW0gPSB0ZW1wWyBpIF0gKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwWyBpIF0gXSA9ICEoIG1hdGNoZXJJblsgcG9zdE1hcFsgaSBdIF0gPSBlbGVtICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGVsZW0gPSBtYXRjaGVyT3V0WyBpIF0gKSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuXHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goICggbWF0Y2hlckluWyBpIF0gPSBlbGVtICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKCBtYXRjaGVyT3V0ID0gW10gKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKCBlbGVtID0gbWF0Y2hlck91dFsgaSBdICkgJiZcblx0XHRcdFx0XHRcdCggdGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mKCBzZWVkLCBlbGVtICkgOiBwcmVNYXBbIGkgXSApID4gLTEgKSB7XG5cblx0XHRcdFx0XHRcdHNlZWRbIHRlbXAgXSA9ICEoIHJlc3VsdHNbIHRlbXAgXSA9IGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEFkZCBlbGVtZW50cyB0byByZXN1bHRzLCB0aHJvdWdoIHBvc3RGaW5kZXIgaWYgZGVmaW5lZFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyT3V0ID0gY29uZGVuc2UoXG5cdFx0XHRcdG1hdGNoZXJPdXQgPT09IHJlc3VsdHMgP1xuXHRcdFx0XHRcdG1hdGNoZXJPdXQuc3BsaWNlKCBwcmVleGlzdGluZywgbWF0Y2hlck91dC5sZW5ndGggKSA6XG5cdFx0XHRcdFx0bWF0Y2hlck91dFxuXHRcdFx0KTtcblx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgcmVzdWx0cywgbWF0Y2hlck91dCwgeG1sICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBtYXRjaGVyT3V0ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9ICk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbIDAgXS50eXBlIF0sXG5cdFx0aW1wbGljaXRSZWxhdGl2ZSA9IGxlYWRpbmdSZWxhdGl2ZSB8fCBFeHByLnJlbGF0aXZlWyBcIiBcIiBdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoIGNoZWNrQ29udGV4dCA9IGNvbnRleHQgKS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0bWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXG5cdFx0XHQvLyBBdm9pZCBoYW5naW5nIG9udG8gZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdGNoZWNrQ29udGV4dCA9IG51bGw7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0gXTtcblxuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRpZiAoICggbWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1sgaSBdLnR5cGUgXSApICkge1xuXHRcdFx0bWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyICkgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlciA9IEV4cHIuZmlsdGVyWyB0b2tlbnNbIGkgXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1sgaSBdLm1hdGNoZXMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXG5cdFx0XHRcdC8vIEZpbmQgdGhlIG5leHQgcmVsYXRpdmUgb3BlcmF0b3IgKGlmIGFueSkgZm9yIHByb3BlciBoYW5kbGluZ1xuXHRcdFx0XHRqID0gKytpO1xuXHRcdFx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbIHRva2Vuc1sgaiBdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHR0b2tlbnNcblx0XHRcdFx0XHRcdC5zbGljZSggMCwgaSAtIDEgKVxuXHRcdFx0XHRcdFx0LmNvbmNhdCggeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0gKVxuXHRcdFx0XHRcdCkucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLFxuXHRcdFx0XHRcdG1hdGNoZXIsXG5cdFx0XHRcdFx0aSA8IGogJiYgbWF0Y2hlckZyb21Ub2tlbnMoIHRva2Vucy5zbGljZSggaSwgaiApICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiBtYXRjaGVyRnJvbVRva2VucyggKCB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSApICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cblx0XHRcdFx0Ly8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFsgXCJUQUdcIiBdKCBcIipcIiwgb3V0ZXJtb3N0ICksXG5cblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9ICggZGlycnVucyArPSBjb250ZXh0QmFja3VwID09IG51bGwgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAwLjEgKSxcblx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0XHRcdFx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdFx0XHRcdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dCA9PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuXHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdFx0XHRcdFx0Ly8gSUUvRWRnZSBzb21ldGltZXMgdGhyb3cgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBzdHJpY3QtY29tcGFyaW5nXG5cdFx0XHRcdFx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0XHRcdFx0XHRpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPSBkb2N1bWVudCApIHtcblx0XHRcdFx0XHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdFx0XHRcdFx0XHR4bWwgPSAhZG9jdW1lbnRJc0hUTUw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0aWYgKCBieVNldCApIHtcblxuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoICggZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0gKSApIHtcblx0XHRcdFx0XHRcdG1hdGNoZWRDb3VudC0tO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIExlbmd0aGVuIHRoZSBhcnJheSBmb3IgZXZlcnkgZWxlbWVudCwgbWF0Y2hlZCBvciBub3Rcblx0XHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBgaWAgaXMgbm93IHRoZSBjb3VudCBvZiBlbGVtZW50cyB2aXNpdGVkIGFib3ZlLCBhbmQgYWRkaW5nIGl0IHRvIGBtYXRjaGVkQ291bnRgXG5cdFx0XHQvLyBtYWtlcyB0aGUgbGF0dGVyIG5vbm5lZ2F0aXZlLlxuXHRcdFx0bWF0Y2hlZENvdW50ICs9IGk7XG5cblx0XHRcdC8vIEFwcGx5IHNldCBmaWx0ZXJzIHRvIHVubWF0Y2hlZCBlbGVtZW50c1xuXHRcdFx0Ly8gTk9URTogVGhpcyBjYW4gYmUgc2tpcHBlZCBpZiB0aGVyZSBhcmUgbm8gdW5tYXRjaGVkIGVsZW1lbnRzIChpLmUuLCBgbWF0Y2hlZENvdW50YFxuXHRcdFx0Ly8gZXF1YWxzIGBpYCksIHVubGVzcyB3ZSBkaWRuJ3QgdmlzaXQgX2FueV8gZWxlbWVudHMgaW4gdGhlIGFib3ZlIGxvb3AgYmVjYXVzZSB3ZSBoYXZlXG5cdFx0XHQvLyBubyBlbGVtZW50IG1hdGNoZXJzIGFuZCBubyBzZWVkLlxuXHRcdFx0Ly8gSW5jcmVtZW50aW5nIGFuIGluaXRpYWxseS1zdHJpbmcgXCIwXCIgYGlgIGFsbG93cyBgaWAgdG8gcmVtYWluIGEgc3RyaW5nIG9ubHkgaW4gdGhhdFxuXHRcdFx0Ly8gY2FzZSwgd2hpY2ggd2lsbCByZXN1bHQgaW4gYSBcIjAwXCIgYG1hdGNoZWRDb3VudGAgdGhhdCBkaWZmZXJzIGZyb20gYGlgIGJ1dCBpcyBhbHNvXG5cdFx0XHQvLyBudW1lcmljYWxseSB6ZXJvLlxuXHRcdFx0aWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHR3aGlsZSAoICggbWF0Y2hlciA9IHNldE1hdGNoZXJzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nXG5cdFx0XHRcdFx0aWYgKCBtYXRjaGVkQ291bnQgPiAwICkge1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggISggdW5tYXRjaGVkWyBpIF0gfHwgc2V0TWF0Y2hlZFsgaSBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0TWF0Y2hlZFsgaSBdID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTtcblxuXHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cblx0XHRcdFx0XHRTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHR9O1xuXG5cdHJldHVybiBieVNldCA/XG5cdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0c3VwZXJNYXRjaGVyO1xufVxuXG5jb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHR2YXIgaSxcblx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdGVsZW1lbnRNYXRjaGVycyA9IFtdLFxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoICFjYWNoZWQgKSB7XG5cblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbIGkgXSApO1xuXHRcdFx0aWYgKCBjYWNoZWRbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0c2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtZW50TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FjaGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZShcblx0XHRcdHNlbGVjdG9yLFxuXHRcdFx0bWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzIClcblx0XHQpO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoIHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IgKSApO1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG9ubHkgb25lIHNlbGVjdG9yIGluIHRoZSBsaXN0IGFuZCBubyBzZWVkXG5cdC8vICh0aGUgbGF0dGVyIG9mIHdoaWNoIGd1YXJhbnRlZXMgdXMgY29udGV4dClcblx0aWYgKCBtYXRjaC5sZW5ndGggPT09IDEgKSB7XG5cblx0XHQvLyBSZWR1Y2UgY29udGV4dCBpZiB0aGUgbGVhZGluZyBjb21wb3VuZCBzZWxlY3RvciBpcyBhbiBJRFxuXHRcdHRva2VucyA9IG1hdGNoWyAwIF0gPSBtYXRjaFsgMCBdLnNsaWNlKCAwICk7XG5cdFx0aWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAoIHRva2VuID0gdG9rZW5zWyAwIF0gKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiYgRXhwci5yZWxhdGl2ZVsgdG9rZW5zWyAxIF0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbIFwiSURcIiBdKCB0b2tlbi5tYXRjaGVzWyAwIF1cblx0XHRcdFx0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksIGNvbnRleHQgKSB8fCBbXSApWyAwIF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByWyBcIm5lZWRzQ29udGV4dFwiIF0udGVzdCggc2VsZWN0b3IgKSA/IDAgOiB0b2tlbnMubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG9rZW4gPSB0b2tlbnNbIGkgXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAoIHR5cGUgPSB0b2tlbi50eXBlICkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICggZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdICkgKSB7XG5cblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKCBzZWVkID0gZmluZChcblx0XHRcdFx0XHR0b2tlbi5tYXRjaGVzWyAwIF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbIDAgXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8XG5cdFx0XHRcdFx0XHRjb250ZXh0XG5cdFx0XHRcdCkgKSApIHtcblxuXHRcdFx0XHRcdC8vIElmIHNlZWQgaXMgZW1wdHkgb3Igbm8gdG9rZW5zIHJlbWFpbiwgd2UgY2FuIHJldHVybiBlYXJseVxuXHRcdFx0XHRcdHRva2Vucy5zcGxpY2UoIGksIDEgKTtcblx0XHRcdFx0XHRzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApO1xuXHRcdFx0XHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2VlZCApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWRcblx0Ly8gUHJvdmlkZSBgbWF0Y2hgIHRvIGF2b2lkIHJldG9rZW5pemF0aW9uIGlmIHdlIG1vZGlmaWVkIHRoZSBzZWxlY3RvciBhYm92ZVxuXHQoIGNvbXBpbGVkIHx8IGNvbXBpbGUoIHNlbGVjdG9yLCBtYXRjaCApICkoXG5cdFx0c2VlZCxcblx0XHRjb250ZXh0LFxuXHRcdCFkb2N1bWVudElzSFRNTCxcblx0XHRyZXN1bHRzLFxuXHRcdCFjb250ZXh0IHx8IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0KTtcblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vLyBPbmUtdGltZSBhc3NpZ25tZW50c1xuXG4vLyBTb3J0IHN0YWJpbGl0eVxuc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdCggXCJcIiApLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oIFwiXCIgKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblxuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGVsLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImZpZWxkc2V0XCIgKSApICYgMTtcbn0gKTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblx0ZWwuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBlbC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKSA9PT0gXCIjXCI7XG59ICkgKSB7XG5cdGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0fVxuXHR9ICk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBkZWZhdWx0VmFsdWUgaW4gcGxhY2Ugb2YgZ2V0QXR0cmlidXRlKFwidmFsdWVcIilcbmlmICggIXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdGVsLmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIjtcblx0ZWwuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xufSApICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIF9uYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiApIHtcblx0XHRcdHJldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTtcblx0XHR9XG5cdH0gKTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuaWYgKCAhYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoIFwiZGlzYWJsZWRcIiApID09IG51bGw7XG59ICkgKSB7XG5cdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgdmFsO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdCggdmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkgKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9ICk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0gKSggd2luZG93ICk7XG5cblxuXG5qUXVlcnkuZmluZCA9IFNpenpsZTtcbmpRdWVyeS5leHByID0gU2l6emxlLnNlbGVjdG9ycztcblxuLy8gRGVwcmVjYXRlZFxualF1ZXJ5LmV4cHJbIFwiOlwiIF0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zO1xualF1ZXJ5LnVuaXF1ZVNvcnQgPSBqUXVlcnkudW5pcXVlID0gU2l6emxlLnVuaXF1ZVNvcnQ7XG5qUXVlcnkudGV4dCA9IFNpenpsZS5nZXRUZXh0O1xualF1ZXJ5LmlzWE1MRG9jID0gU2l6emxlLmlzWE1MO1xualF1ZXJ5LmNvbnRhaW5zID0gU2l6emxlLmNvbnRhaW5zO1xualF1ZXJ5LmVzY2FwZVNlbGVjdG9yID0gU2l6emxlLmVzY2FwZTtcblxuXG5cblxudmFyIGRpciA9IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHR2YXIgbWF0Y2hlZCA9IFtdLFxuXHRcdHRydW5jYXRlID0gdW50aWwgIT09IHVuZGVmaW5lZDtcblxuXHR3aGlsZSAoICggZWxlbSA9IGVsZW1bIGRpciBdICkgJiYgZWxlbS5ub2RlVHlwZSAhPT0gOSApIHtcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRpZiAoIHRydW5jYXRlICYmIGpRdWVyeSggZWxlbSApLmlzKCB1bnRpbCApICkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdG1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbWF0Y2hlZDtcbn07XG5cblxudmFyIHNpYmxpbmdzID0gZnVuY3Rpb24oIG4sIGVsZW0gKSB7XG5cdHZhciBtYXRjaGVkID0gW107XG5cblx0Zm9yICggOyBuOyBuID0gbi5uZXh0U2libGluZyApIHtcblx0XHRpZiAoIG4ubm9kZVR5cGUgPT09IDEgJiYgbiAhPT0gZWxlbSApIHtcblx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBtYXRjaGVkO1xufTtcblxuXG52YXIgcm5lZWRzQ29udGV4dCA9IGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtcblxuXG5cbmZ1bmN0aW9uIG5vZGVOYW1lKCBlbGVtLCBuYW1lICkge1xuXG4gIHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXG59O1xudmFyIHJzaW5nbGVUYWcgPSAoIC9ePChbYS16XVteXFwvXFwwPjpcXHgyMFxcdFxcclxcblxcZl0qKVtcXHgyMFxcdFxcclxcblxcZl0qXFwvPz4oPzo8XFwvXFwxPnwpJC9pICk7XG5cblxuXG4vLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdFxuZnVuY3Rpb24gd2lubm93KCBlbGVtZW50cywgcXVhbGlmaWVyLCBub3QgKSB7XG5cdGlmICggaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gU2luZ2xlIGVsZW1lbnRcblx0aWYgKCBxdWFsaWZpZXIubm9kZVR5cGUgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCBlbGVtID09PSBxdWFsaWZpZXIgKSAhPT0gbm90O1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIEFycmF5bGlrZSBvZiBlbGVtZW50cyAoalF1ZXJ5LCBhcmd1bWVudHMsIEFycmF5KVxuXHRpZiAoIHR5cGVvZiBxdWFsaWZpZXIgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID4gLTEgKSAhPT0gbm90O1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIEZpbHRlcmVkIGRpcmVjdGx5IGZvciBib3RoIHNpbXBsZSBhbmQgY29tcGxleCBzZWxlY3RvcnNcblx0cmV0dXJuIGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMsIG5vdCApO1xufVxuXG5qUXVlcnkuZmlsdGVyID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1zLCBub3QgKSB7XG5cdHZhciBlbGVtID0gZWxlbXNbIDAgXTtcblxuXHRpZiAoIG5vdCApIHtcblx0XHRleHByID0gXCI6bm90KFwiICsgZXhwciArIFwiKVwiO1xuXHR9XG5cblx0aWYgKCBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG5cdH0gKSApO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRmaW5kOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGksIHJldCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2VsZiA9IHRoaXM7XG5cblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9ICkgKTtcblx0XHR9XG5cblx0XHRyZXQgPSB0aGlzLnB1c2hTdGFjayggW10gKTtcblxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRqUXVlcnkuZmluZCggc2VsZWN0b3IsIHNlbGZbIGkgXSwgcmV0ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGxlbiA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggcmV0ICkgOiByZXQ7XG5cdH0sXG5cdGZpbHRlcjogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UgKSApO1xuXHR9LFxuXHRub3Q6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIHRydWUgKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0gKTtcblxuXG4vLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdFxuXG5cbi8vIEEgY2VudHJhbCByZWZlcmVuY2UgdG8gdGhlIHJvb3QgalF1ZXJ5KGRvY3VtZW50KVxudmFyIHJvb3RqUXVlcnksXG5cblx0Ly8gQSBzaW1wbGUgd2F5IHRvIGNoZWNrIGZvciBIVE1MIHN0cmluZ3Ncblx0Ly8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKVxuXHQvLyBTdHJpY3QgSFRNTCByZWNvZ25pdGlvbiAoIzExMjkwOiBtdXN0IHN0YXJ0IHdpdGggPClcblx0Ly8gU2hvcnRjdXQgc2ltcGxlICNpZCBjYXNlIGZvciBzcGVlZFxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gTWV0aG9kIGluaXQoKSBhY2NlcHRzIGFuIGFsdGVybmF0ZSByb290alF1ZXJ5XG5cdFx0Ly8gc28gbWlncmF0ZSBjYW4gc3VwcG9ydCBqUXVlcnkuc3ViIChnaC0yMTAxKVxuXHRcdHJvb3QgPSByb290IHx8IHJvb3RqUXVlcnk7XG5cblx0XHQvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpZiAoIHNlbGVjdG9yWyAwIF0gPT09IFwiPFwiICYmXG5cdFx0XHRcdHNlbGVjdG9yWyBzZWxlY3Rvci5sZW5ndGggLSAxIF0gPT09IFwiPlwiICYmXG5cdFx0XHRcdHNlbGVjdG9yLmxlbmd0aCA+PSAzICkge1xuXG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAoIG1hdGNoWyAxIF0gfHwgIWNvbnRleHQgKSApIHtcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCkgLT4gJChhcnJheSlcblx0XHRcdFx0aWYgKCBtYXRjaFsgMSBdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFsgMCBdIDogY29udGV4dDtcblxuXHRcdFx0XHRcdC8vIE9wdGlvbiB0byBydW4gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdFxuXHRcdFx0XHRcdC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLCBqUXVlcnkucGFyc2VIVE1MKFxuXHRcdFx0XHRcdFx0bWF0Y2hbIDEgXSxcblx0XHRcdFx0XHRcdGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG5cdFx0XHRcdFx0XHR0cnVlXG5cdFx0XHRcdFx0KSApO1xuXG5cdFx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwsIHByb3BzKVxuXHRcdFx0XHRcdGlmICggcnNpbmdsZVRhZy50ZXN0KCBtYXRjaFsgMSBdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUHJvcGVydGllcyBvZiBjb250ZXh0IGFyZSBjYWxsZWQgYXMgbWV0aG9kcyBpZiBwb3NzaWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24oIHRoaXNbIG1hdGNoIF0gKSApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gLi4uYW5kIG90aGVyd2lzZSBzZXQgYXMgYXR0cmlidXRlc1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXR0ciggbWF0Y2gsIGNvbnRleHRbIG1hdGNoIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJCgjaWQpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtYXRjaFsgMiBdICk7XG5cblx0XHRcdFx0XHRpZiAoIGVsZW0gKSB7XG5cblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzWyAwIF0gPSBlbGVtO1xuXHRcdFx0XHRcdFx0dGhpcy5sZW5ndGggPSAxO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKVxuXHRcdFx0fSBlbHNlIGlmICggIWNvbnRleHQgfHwgY29udGV4dC5qcXVlcnkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGNvbnRleHQgfHwgcm9vdCApLmZpbmQoIHNlbGVjdG9yICk7XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCBjb250ZXh0KVxuXHRcdFx0Ly8gKHdoaWNoIGlzIGp1c3QgZXF1aXZhbGVudCB0bzogJChjb250ZXh0KS5maW5kKGV4cHIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvciggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHQvLyBIQU5ETEU6ICQoRE9NRWxlbWVudClcblx0XHR9IGVsc2UgaWYgKCBzZWxlY3Rvci5ub2RlVHlwZSApIHtcblx0XHRcdHRoaXNbIDAgXSA9IHNlbGVjdG9yO1xuXHRcdFx0dGhpcy5sZW5ndGggPSAxO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHQvLyBIQU5ETEU6ICQoZnVuY3Rpb24pXG5cdFx0Ly8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5XG5cdFx0fSBlbHNlIGlmICggaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiByb290LnJlYWR5ICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyb290LnJlYWR5KCBzZWxlY3RvciApIDpcblxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4galF1ZXJ5Lm1ha2VBcnJheSggc2VsZWN0b3IsIHRoaXMgKTtcblx0fTtcblxuLy8gR2l2ZSB0aGUgaW5pdCBmdW5jdGlvbiB0aGUgalF1ZXJ5IHByb3RvdHlwZSBmb3IgbGF0ZXIgaW5zdGFudGlhdGlvblxuaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47XG5cbi8vIEluaXRpYWxpemUgY2VudHJhbCByZWZlcmVuY2VcbnJvb3RqUXVlcnkgPSBqUXVlcnkoIGRvY3VtZW50ICk7XG5cblxudmFyIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLFxuXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0aGFzOiBmdW5jdGlvbiggdGFyZ2V0ICkge1xuXHRcdHZhciB0YXJnZXRzID0galF1ZXJ5KCB0YXJnZXQsIHRoaXMgKSxcblx0XHRcdGwgPSB0YXJnZXRzLmxlbmd0aDtcblxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzWyBpIF0gKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHRhcmdldHMgPSB0eXBlb2Ygc2VsZWN0b3JzICE9PSBcInN0cmluZ1wiICYmIGpRdWVyeSggc2VsZWN0b3JzICk7XG5cblx0XHQvLyBQb3NpdGlvbmFsIHNlbGVjdG9ycyBuZXZlciBtYXRjaCwgc2luY2UgdGhlcmUncyBubyBfc2VsZWN0aW9uXyBjb250ZXh0XG5cdFx0aWYgKCAhcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvcnMgKSApIHtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zm9yICggY3VyID0gdGhpc1sgaSBdOyBjdXIgJiYgY3VyICE9PSBjb250ZXh0OyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblxuXHRcdFx0XHRcdC8vIEFsd2F5cyBza2lwIGRvY3VtZW50IGZyYWdtZW50c1xuXHRcdFx0XHRcdGlmICggY3VyLm5vZGVUeXBlIDwgMTEgJiYgKCB0YXJnZXRzID9cblx0XHRcdFx0XHRcdHRhcmdldHMuaW5kZXgoIGN1ciApID4gLTEgOlxuXG5cdFx0XHRcdFx0XHQvLyBEb24ndCBwYXNzIG5vbi1lbGVtZW50cyB0byBTaXp6bGVcblx0XHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGN1ciwgc2VsZWN0b3JzICkgKSApIHtcblxuXHRcdFx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTtcblx0fSxcblxuXHQvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluIHRoZSBzZXRcblx0aW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnRcblx0XHRpZiAoICFlbGVtICkge1xuXHRcdFx0cmV0dXJuICggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xO1xuXHRcdH1cblxuXHRcdC8vIEluZGV4IGluIHNlbGVjdG9yXG5cdFx0aWYgKCB0eXBlb2YgZWxlbSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBpbmRleE9mLmNhbGwoIGpRdWVyeSggZWxlbSApLCB0aGlzWyAwIF0gKTtcblx0XHR9XG5cblx0XHQvLyBMb2NhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXNpcmVkIGVsZW1lbnRcblx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCB0aGlzLFxuXG5cdFx0XHQvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWRcblx0XHRcdGVsZW0uanF1ZXJ5ID8gZWxlbVsgMCBdIDogZWxlbVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkOiBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKFxuXHRcdFx0alF1ZXJ5LnVuaXF1ZVNvcnQoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxuXHRcdCk7XG5cdH1cbn0gKTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKCBjdXIgPSBjdXJbIGRpciBdICkgJiYgY3VyLm5vZGVUeXBlICE9PSAxICkge31cblx0cmV0dXJuIGN1cjtcbn1cblxualF1ZXJ5LmVhY2goIHtcblx0cGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7XG5cdH0sXG5cdHBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiICk7XG5cdH0sXG5cdHBhcmVudHNVbnRpbDogZnVuY3Rpb24oIGVsZW0sIF9pLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiwgdW50aWwgKTtcblx0fSxcblx0bmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHR9LFxuXHRwcmV2OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBfaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBfaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0c2libGluZ3M6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggKCBlbGVtLnBhcmVudE5vZGUgfHwge30gKS5maXJzdENoaWxkLCBlbGVtICk7XG5cdH0sXG5cdGNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZ3MoIGVsZW0uZmlyc3RDaGlsZCApO1xuXHR9LFxuXHRjb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0aWYgKCBlbGVtLmNvbnRlbnREb2N1bWVudCAhPSBudWxsICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDExK1xuXHRcdFx0Ly8gPG9iamVjdD4gZWxlbWVudHMgd2l0aCBubyBgZGF0YWAgYXR0cmlidXRlIGhhcyBhbiBvYmplY3Rcblx0XHRcdC8vIGBjb250ZW50RG9jdW1lbnRgIHdpdGggYSBgbnVsbGAgcHJvdG90eXBlLlxuXHRcdFx0Z2V0UHJvdG8oIGVsZW0uY29udGVudERvY3VtZW50ICkgKSB7XG5cblx0XHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IC0gMTEgb25seSwgaU9TIDcgb25seSwgQW5kcm9pZCBCcm93c2VyIDw9NC4zIG9ubHlcblx0XHQvLyBUcmVhdCB0aGUgdGVtcGxhdGUgZWxlbWVudCBhcyBhIHJlZ3VsYXIgb25lIGluIGJyb3dzZXJzIHRoYXRcblx0XHQvLyBkb24ndCBzdXBwb3J0IGl0LlxuXHRcdGlmICggbm9kZU5hbWUoIGVsZW0sIFwidGVtcGxhdGVcIiApICkge1xuXHRcdFx0ZWxlbSA9IGVsZW0uY29udGVudCB8fCBlbGVtO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRcdFx0aWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkge1xuXHRcdFx0XHRqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0gKTtcbnZhciBybm90aHRtbHdoaXRlID0gKCAvW15cXHgyMFxcdFxcclxcblxcZl0rL2cgKTtcblxuXG5cbi8vIENvbnZlcnQgU3RyaW5nLWZvcm1hdHRlZCBvcHRpb25zIGludG8gT2JqZWN0LWZvcm1hdHRlZCBvbmVzXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0ge307XG5cdGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSApO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblxuXHRcdC8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzXG5cdFx0bWVtb3J5LFxuXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblxuXHRcdC8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmdcblx0XHRsb2NrZWQsXG5cblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblxuXHRcdC8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0cXVldWUgPSBbXSxcblxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nXG5cdFx0XHRsb2NrZWQgPSBsb2NrZWQgfHwgb3B0aW9ucy5vbmNlO1xuXG5cdFx0XHQvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyxcblx0XHRcdC8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXNcblx0XHRcdGZpcmVkID0gZmlyaW5nID0gdHJ1ZTtcblx0XHRcdGZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkge1xuXHRcdFx0XHRtZW1vcnkgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHR3aGlsZSAoICsrZmlyaW5nSW5kZXggPCBsaXN0Lmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBtZW1vcnlbIDAgXSwgbWVtb3J5WyAxIF0gKSA9PT0gZmFsc2UgJiZcblx0XHRcdFx0XHRcdG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmVcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdFxuXHRcdFx0aWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRmaXJpbmcgPSBmYWxzZTtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2Rcblx0XHRcdGlmICggbG9ja2VkICkge1xuXG5cdFx0XHRcdC8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHNcblx0XHRcdFx0aWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdGhpcyBvYmplY3QgaXMgc3BlbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaXN0ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cblx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgbWVtb3J5IGZyb20gYSBwYXN0IHJ1biwgd2Ugc2hvdWxkIGZpcmUgYWZ0ZXIgYWRkaW5nXG5cdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0cXVldWUucHVzaCggbWVtb3J5ICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0KCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIHRvVHlwZSggYXJnICkgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0gKSggYXJndW1lbnRzICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlc1xuXHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LlxuXHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0cmV0dXJuIGZuID9cblx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDpcblx0XHRcdFx0XHRsaXN0Lmxlbmd0aCA+IDA7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkXG5cdFx0XHQvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdC8vIENsZWFyIGFsbCBjYWxsYmFja3MgYW5kIHZhbHVlc1xuXHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmVcblx0XHRcdC8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpXG5cdFx0XHQvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zXG5cdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0aWYgKCAhbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhbG9ja2VkO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRpZiAoICFsb2NrZWQgKSB7XG5cdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0aWYgKCAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRmaXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmZ1bmN0aW9uIElkZW50aXR5KCB2ICkge1xuXHRyZXR1cm4gdjtcbn1cbmZ1bmN0aW9uIFRocm93ZXIoIGV4ICkge1xuXHR0aHJvdyBleDtcbn1cblxuZnVuY3Rpb24gYWRvcHRWYWx1ZSggdmFsdWUsIHJlc29sdmUsIHJlamVjdCwgbm9WYWx1ZSApIHtcblx0dmFyIG1ldGhvZDtcblxuXHR0cnkge1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIHByb21pc2UgYXNwZWN0IGZpcnN0IHRvIHByaXZpbGVnZSBzeW5jaHJvbm91cyBiZWhhdmlvclxuXHRcdGlmICggdmFsdWUgJiYgaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS5wcm9taXNlICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSApLmRvbmUoIHJlc29sdmUgKS5mYWlsKCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIHRoZW5hYmxlc1xuXHRcdH0gZWxzZSBpZiAoIHZhbHVlICYmIGlzRnVuY3Rpb24oICggbWV0aG9kID0gdmFsdWUudGhlbiApICkgKSB7XG5cdFx0XHRtZXRob2QuY2FsbCggdmFsdWUsIHJlc29sdmUsIHJlamVjdCApO1xuXG5cdFx0Ly8gT3RoZXIgbm9uLXRoZW5hYmxlc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvbnRyb2wgYHJlc29sdmVgIGFyZ3VtZW50cyBieSBsZXR0aW5nIEFycmF5I3NsaWNlIGNhc3QgYm9vbGVhbiBgbm9WYWx1ZWAgdG8gaW50ZWdlcjpcblx0XHRcdC8vICogZmFsc2U6IFsgdmFsdWUgXS5zbGljZSggMCApID0+IHJlc29sdmUoIHZhbHVlIClcblx0XHRcdC8vICogdHJ1ZTogWyB2YWx1ZSBdLnNsaWNlKCAxICkgPT4gcmVzb2x2ZSgpXG5cdFx0XHRyZXNvbHZlLmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXS5zbGljZSggbm9WYWx1ZSApICk7XG5cdFx0fVxuXG5cdC8vIEZvciBQcm9taXNlcy9BKywgY29udmVydCBleGNlcHRpb25zIGludG8gcmVqZWN0aW9uc1xuXHQvLyBTaW5jZSBqUXVlcnkud2hlbiBkb2Vzbid0IHVud3JhcCB0aGVuYWJsZXMsIHdlIGNhbiBza2lwIHRoZSBleHRyYSBjaGVja3MgYXBwZWFyaW5nIGluXG5cdC8vIERlZmVycmVkI3RoZW4gdG8gY29uZGl0aW9uYWxseSBzdXBwcmVzcyByZWplY3Rpb24uXG5cdH0gY2F0Y2ggKCB2YWx1ZSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIG9ubHlcblx0XHQvLyBTdHJpY3QgbW9kZSBmdW5jdGlvbnMgaW52b2tlZCB3aXRob3V0IC5jYWxsLy5hcHBseSBnZXQgZ2xvYmFsLW9iamVjdCBjb250ZXh0XG5cdFx0cmVqZWN0LmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXSApO1xuXHR9XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblxuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgY2FsbGJhY2tzLFxuXHRcdFx0XHQvLyAuLi4gLnRoZW4gaGFuZGxlcnMsIGFyZ3VtZW50IGluZGV4LCBbZmluYWwgc3RhdGVdXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApLCAyIF0sXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgMCwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAxLCBcInJlamVjdGVkXCIgXVxuXHRcdFx0XSxcblx0XHRcdHN0YXRlID0gXCJwZW5kaW5nXCIsXG5cdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRzdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbHdheXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLmRvbmUoIGFyZ3VtZW50cyApLmZhaWwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImNhdGNoXCI6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKCBudWxsLCBmbiApO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0cGlwZTogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggX2ksIHR1cGxlICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIE1hcCB0dXBsZXMgKHByb2dyZXNzLCBkb25lLCBmYWlsKSB0byBhcmd1bWVudHMgKGRvbmUsIGZhaWwsIHByb2dyZXNzKVxuXHRcdFx0XHRcdFx0XHR2YXIgZm4gPSBpc0Z1bmN0aW9uKCBmbnNbIHR1cGxlWyA0IF0gXSApICYmIGZuc1sgdHVwbGVbIDQgXSBdO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLnByb2dyZXNzKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLm5vdGlmeSB9KVxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5kb25lKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlc29sdmUgfSlcblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZmFpbChmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZWplY3QgfSlcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAxIF0gXSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgaXNGdW5jdGlvbiggcmV0dXJuZWQucHJvbWlzZSApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5wcm9ncmVzcyggbmV3RGVmZXIubm90aWZ5IClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmRvbmUoIG5ld0RlZmVyLnJlc29sdmUgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZmFpbCggbmV3RGVmZXIucmVqZWN0ICk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXShcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHNcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRmbnMgPSBudWxsO1xuXHRcdFx0XHRcdH0gKS5wcm9taXNlKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRoZW46IGZ1bmN0aW9uKCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcyApIHtcblx0XHRcdFx0XHR2YXIgbWF4RGVwdGggPSAwO1xuXHRcdFx0XHRcdGZ1bmN0aW9uIHJlc29sdmUoIGRlcHRoLCBkZWZlcnJlZCwgaGFuZGxlciwgc3BlY2lhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBhcmd1bWVudHMsXG5cdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkLCB0aGVuO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuM1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNTlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElnbm9yZSBkb3VibGUtcmVzb2x1dGlvbiBhdHRlbXB0c1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBkZXB0aCA8IG1heERlcHRoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkID0gaGFuZGxlci5hcHBseSggdGhhdCwgYXJncyApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4xXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC00OFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCByZXR1cm5lZCA9PT0gZGVmZXJyZWQucHJvbWlzZSgpICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCBcIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvblwiICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb25zIDIuMy4zLjEsIDMuNVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNTRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTc1XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXRyaWV2ZSBgdGhlbmAgb25seSBvbmNlXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGVuID0gcmV0dXJuZWQgJiZcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy40XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTY0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgY2hlY2sgb2JqZWN0cyBhbmQgZnVuY3Rpb25zIGZvciB0aGVuYWJpbGl0eVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoIHR5cGVvZiByZXR1cm5lZCA9PT0gXCJvYmplY3RcIiB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiByZXR1cm5lZCA9PT0gXCJmdW5jdGlvblwiICkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQudGhlbjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGEgcmV0dXJuZWQgdGhlbmFibGVcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggaXNGdW5jdGlvbiggdGhlbiApICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNwZWNpYWwgcHJvY2Vzc29ycyAobm90aWZ5KSBqdXN0IHdhaXQgZm9yIHJlc29sdXRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBzcGVjaWFsICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoZW4uY2FsbChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBUaHJvd2VyLCBzcGVjaWFsIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE5vcm1hbCBwcm9jZXNzb3JzIChyZXNvbHZlKSBhbHNvIGhvb2sgaW50byBwcm9ncmVzc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gLi4uYW5kIGRpc3JlZ2FyZCBvbGRlciByZXNvbHV0aW9uIHZhbHVlc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1heERlcHRoKys7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGVuLmNhbGwoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgVGhyb3dlciwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgYWxsIG90aGVyIHJldHVybmVkIHZhbHVlc1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHN1YnN0aXR1dGUgaGFuZGxlcnMgcGFzcyBvbiBjb250ZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFuZCBtdWx0aXBsZSB2YWx1ZXMgKG5vbi1zcGVjIGJlaGF2aW9yKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGhhbmRsZXIgIT09IElkZW50aXR5ICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoYXQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncyA9IFsgcmV0dXJuZWQgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFByb2Nlc3MgdGhlIHZhbHVlKHMpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIERlZmF1bHQgcHJvY2VzcyBpcyByZXNvbHZlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCggc3BlY2lhbCB8fCBkZWZlcnJlZC5yZXNvbHZlV2l0aCApKCB0aGF0LCBhcmdzICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgbm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGNhdGNoIGFuZCByZWplY3QgZXhjZXB0aW9uc1xuXHRcdFx0XHRcdFx0XHRcdHByb2Nlc3MgPSBzcGVjaWFsID9cblx0XHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3cgOlxuXHRcdFx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayggZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cHJvY2Vzcy5zdGFja1RyYWNlICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjQuMVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTYxXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIHBvc3QtcmVzb2x1dGlvbiBleGNlcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBkZXB0aCArIDEgPj0gbWF4RGVwdGggKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFuZCBtdWx0aXBsZSB2YWx1ZXMgKG5vbi1zcGVjIGJlaGF2aW9yKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBoYW5kbGVyICE9PSBUaHJvd2VyICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGF0ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzID0gWyBlIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIHRoYXQsIGFyZ3MgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjFcblx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNTdcblx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVzb2x2ZSBwcm9taXNlcyBpbW1lZGlhdGVseSB0byBkb2RnZSBmYWxzZSByZWplY3Rpb24gZnJvbVxuXHRcdFx0XHRcdFx0XHQvLyBzdWJzZXF1ZW50IGVycm9yc1xuXHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoICkge1xuXHRcdFx0XHRcdFx0XHRcdHByb2Nlc3MoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIENhbGwgYW4gb3B0aW9uYWwgaG9vayB0byByZWNvcmQgdGhlIHN0YWNrLCBpbiBjYXNlIG9mIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0XHRcdC8vIHNpbmNlIGl0J3Mgb3RoZXJ3aXNlIGxvc3Qgd2hlbiBleGVjdXRpb24gZ29lcyBhc3luY1xuXHRcdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHByb2Nlc3Muc3RhY2tUcmFjZSA9IGpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2soKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIHByb2Nlc3MgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cblx0XHRcdFx0XHRcdC8vIHByb2dyZXNzX2hhbmRsZXJzLmFkZCggLi4uIClcblx0XHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0aXNGdW5jdGlvbiggb25Qcm9ncmVzcyApID9cblx0XHRcdFx0XHRcdFx0XHRcdG9uUHJvZ3Jlc3MgOlxuXHRcdFx0XHRcdFx0XHRcdFx0SWRlbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIubm90aWZ5V2l0aFxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAxIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvbkZ1bGZpbGxlZCApID9cblx0XHRcdFx0XHRcdFx0XHRcdG9uRnVsZmlsbGVkIDpcblx0XHRcdFx0XHRcdFx0XHRcdElkZW50aXR5XG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdC8vIHJlamVjdGVkX2hhbmRsZXJzLmFkZCggLi4uIClcblx0XHRcdFx0XHRcdHR1cGxlc1sgMiBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0aXNGdW5jdGlvbiggb25SZWplY3RlZCApID9cblx0XHRcdFx0XHRcdFx0XHRcdG9uUmVqZWN0ZWQgOlxuXHRcdFx0XHRcdFx0XHRcdFx0VGhyb3dlclxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0gKS5wcm9taXNlKCk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZFxuXHRcdFx0XHQvLyBJZiBvYmogaXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIGFzcGVjdCBpcyBhZGRlZCB0byB0aGUgb2JqZWN0XG5cdFx0XHRcdHByb21pc2U6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9iaiAhPSBudWxsID8galF1ZXJ5LmV4dGVuZCggb2JqLCBwcm9taXNlICkgOiBwcm9taXNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZGVmZXJyZWQgPSB7fTtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDUgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZS5wcm9ncmVzcyA9IGxpc3QuYWRkXG5cdFx0XHQvLyBwcm9taXNlLmRvbmUgPSBsaXN0LmFkZFxuXHRcdFx0Ly8gcHJvbWlzZS5mYWlsID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWyAxIF0gXSA9IGxpc3QuYWRkO1xuXG5cdFx0XHQvLyBIYW5kbGUgc3RhdGVcblx0XHRcdGlmICggc3RhdGVTdHJpbmcgKSB7XG5cdFx0XHRcdGxpc3QuYWRkKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHQvLyBzdGF0ZSA9IFwicmVzb2x2ZWRcIiAoaS5lLiwgZnVsZmlsbGVkKVxuXHRcdFx0XHRcdFx0Ly8gc3RhdGUgPSBcInJlamVjdGVkXCJcblx0XHRcdFx0XHRcdHN0YXRlID0gc3RhdGVTdHJpbmc7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIHJlamVjdGVkX2NhbGxiYWNrcy5kaXNhYmxlXG5cdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2NhbGxiYWNrcy5kaXNhYmxlXG5cdFx0XHRcdFx0dHVwbGVzWyAzIC0gaSBdWyAyIF0uZGlzYWJsZSxcblxuXHRcdFx0XHRcdC8vIHJlamVjdGVkX2hhbmRsZXJzLmRpc2FibGVcblx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfaGFuZGxlcnMuZGlzYWJsZVxuXHRcdFx0XHRcdHR1cGxlc1sgMyAtIGkgXVsgMyBdLmRpc2FibGUsXG5cblx0XHRcdFx0XHQvLyBwcm9ncmVzc19jYWxsYmFja3MubG9ja1xuXHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAyIF0ubG9jayxcblxuXHRcdFx0XHRcdC8vIHByb2dyZXNzX2hhbmRsZXJzLmxvY2tcblx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMyBdLmxvY2tcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMuZmlyZVxuXHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmZpcmVcblx0XHRcdC8vIHJlamVjdGVkX2hhbmRsZXJzLmZpcmVcblx0XHRcdGxpc3QuYWRkKCB0dXBsZVsgMyBdLmZpcmUgKTtcblxuXHRcdFx0Ly8gZGVmZXJyZWQubm90aWZ5ID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLm5vdGlmeVdpdGgoLi4uKSB9XG5cdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLnJlc29sdmVXaXRoKC4uLikgfVxuXHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0ID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLnJlamVjdFdpdGgoLi4uKSB9XG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSggdGhpcyA9PT0gZGVmZXJyZWQgPyB1bmRlZmluZWQgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnlXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0Ly8gZGVmZXJyZWQucmVzb2x2ZVdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHQvLyBkZWZlcnJlZC5yZWplY3RXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdID0gbGlzdC5maXJlV2l0aDtcblx0XHR9ICk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzaW5nbGVWYWx1ZSApIHtcblx0XHR2YXJcblxuXHRcdFx0Ly8gY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBhcmd1bWVudHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBjb3VudCBvZiB1bnByb2Nlc3NlZCBhcmd1bWVudHNcblx0XHRcdGkgPSByZW1haW5pbmcsXG5cblx0XHRcdC8vIHN1Ym9yZGluYXRlIGZ1bGZpbGxtZW50IGRhdGFcblx0XHRcdHJlc29sdmVDb250ZXh0cyA9IEFycmF5KCBpICksXG5cdFx0XHRyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cblx0XHRcdC8vIHRoZSBtYXN0ZXIgRGVmZXJyZWRcblx0XHRcdG1hc3RlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXG5cdFx0XHQvLyBzdWJvcmRpbmF0ZSBjYWxsYmFjayBmYWN0b3J5XG5cdFx0XHR1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZUNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHJlc29sdmVWYWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gc2xpY2UuY2FsbCggYXJndW1lbnRzICkgOiB2YWx1ZTtcblx0XHRcdFx0XHRpZiAoICEoIC0tcmVtYWluaW5nICkgKSB7XG5cdFx0XHRcdFx0XHRtYXN0ZXIucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH07XG5cblx0XHQvLyBTaW5nbGUtIGFuZCBlbXB0eSBhcmd1bWVudHMgYXJlIGFkb3B0ZWQgbGlrZSBQcm9taXNlLnJlc29sdmVcblx0XHRpZiAoIHJlbWFpbmluZyA8PSAxICkge1xuXHRcdFx0YWRvcHRWYWx1ZSggc2luZ2xlVmFsdWUsIG1hc3Rlci5kb25lKCB1cGRhdGVGdW5jKCBpICkgKS5yZXNvbHZlLCBtYXN0ZXIucmVqZWN0LFxuXHRcdFx0XHQhcmVtYWluaW5nICk7XG5cblx0XHRcdC8vIFVzZSAudGhlbigpIHRvIHVud3JhcCBzZWNvbmRhcnkgdGhlbmFibGVzIChjZi4gZ2gtMzAwMClcblx0XHRcdGlmICggbWFzdGVyLnN0YXRlKCkgPT09IFwicGVuZGluZ1wiIHx8XG5cdFx0XHRcdGlzRnVuY3Rpb24oIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiByZXNvbHZlVmFsdWVzWyBpIF0udGhlbiApICkge1xuXG5cdFx0XHRcdHJldHVybiBtYXN0ZXIudGhlbigpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIE11bHRpcGxlIGFyZ3VtZW50cyBhcmUgYWdncmVnYXRlZCBsaWtlIFByb21pc2UuYWxsIGFycmF5IGVsZW1lbnRzXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRhZG9wdFZhbHVlKCByZXNvbHZlVmFsdWVzWyBpIF0sIHVwZGF0ZUZ1bmMoIGkgKSwgbWFzdGVyLnJlamVjdCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBtYXN0ZXIucHJvbWlzZSgpO1xuXHR9XG59ICk7XG5cblxuLy8gVGhlc2UgdXN1YWxseSBpbmRpY2F0ZSBhIHByb2dyYW1tZXIgbWlzdGFrZSBkdXJpbmcgZGV2ZWxvcG1lbnQsXG4vLyB3YXJuIGFib3V0IHRoZW0gQVNBUCByYXRoZXIgdGhhbiBzd2FsbG93aW5nIHRoZW0gYnkgZGVmYXVsdC5cbnZhciByZXJyb3JOYW1lcyA9IC9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1xuXG5qUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayA9IGZ1bmN0aW9uKCBlcnJvciwgc3RhY2sgKSB7XG5cblx0Ly8gU3VwcG9ydDogSUUgOCAtIDkgb25seVxuXHQvLyBDb25zb2xlIGV4aXN0cyB3aGVuIGRldiB0b29scyBhcmUgb3Blbiwgd2hpY2ggY2FuIGhhcHBlbiBhdCBhbnkgdGltZVxuXHRpZiAoIHdpbmRvdy5jb25zb2xlICYmIHdpbmRvdy5jb25zb2xlLndhcm4gJiYgZXJyb3IgJiYgcmVycm9yTmFtZXMudGVzdCggZXJyb3IubmFtZSApICkge1xuXHRcdHdpbmRvdy5jb25zb2xlLndhcm4oIFwialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogXCIgKyBlcnJvci5tZXNzYWdlLCBlcnJvci5zdGFjaywgc3RhY2sgKTtcblx0fVxufTtcblxuXG5cblxualF1ZXJ5LnJlYWR5RXhjZXB0aW9uID0gZnVuY3Rpb24oIGVycm9yICkge1xuXHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gKTtcbn07XG5cblxuXG5cbi8vIFRoZSBkZWZlcnJlZCB1c2VkIG9uIERPTSByZWFkeVxudmFyIHJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cblx0cmVhZHlMaXN0XG5cdFx0LnRoZW4oIGZuIClcblxuXHRcdC8vIFdyYXAgalF1ZXJ5LnJlYWR5RXhjZXB0aW9uIGluIGEgZnVuY3Rpb24gc28gdGhhdCB0aGUgbG9va3VwXG5cdFx0Ly8gaGFwcGVucyBhdCB0aGUgdGltZSBvZiBlcnJvciBoYW5kbGluZyBpbnN0ZWFkIG9mIGNhbGxiYWNrXG5cdFx0Ly8gcmVnaXN0cmF0aW9uLlxuXHRcdC5jYXRjaCggZnVuY3Rpb24oIGVycm9yICkge1xuXHRcdFx0alF1ZXJ5LnJlYWR5RXhjZXB0aW9uKCBlcnJvciApO1xuXHRcdH0gKTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBJcyB0aGUgRE9NIHJlYWR5IHRvIGJlIHVzZWQ/IFNldCB0byB0cnVlIG9uY2UgaXQgb2NjdXJzLlxuXHRpc1JlYWR5OiBmYWxzZSxcblxuXHQvLyBBIGNvdW50ZXIgdG8gdHJhY2sgaG93IG1hbnkgaXRlbXMgdG8gd2FpdCBmb3IgYmVmb3JlXG5cdC8vIHRoZSByZWFkeSBldmVudCBmaXJlcy4gU2VlICM2NzgxXG5cdHJlYWR5V2FpdDogMSxcblxuXHQvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5XG5cdHJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHtcblxuXHRcdC8vIEFib3J0IGlmIHRoZXJlIGFyZSBwZW5kaW5nIGhvbGRzIG9yIHdlJ3JlIGFscmVhZHkgcmVhZHlcblx0XHRpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZW1lbWJlciB0aGF0IHRoZSBET00gaXMgcmVhZHlcblx0XHRqUXVlcnkuaXNSZWFkeSA9IHRydWU7XG5cblx0XHQvLyBJZiBhIG5vcm1hbCBET00gUmVhZHkgZXZlbnQgZmlyZWQsIGRlY3JlbWVudCwgYW5kIHdhaXQgaWYgbmVlZCBiZVxuXHRcdGlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGVcblx0XHRyZWFkeUxpc3QucmVzb2x2ZVdpdGgoIGRvY3VtZW50LCBbIGpRdWVyeSBdICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LnJlYWR5LnRoZW4gPSByZWFkeUxpc3QudGhlbjtcblxuLy8gVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbmZ1bmN0aW9uIGNvbXBsZXRlZCgpIHtcblx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCApO1xuXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xuXHRqUXVlcnkucmVhZHkoKTtcbn1cblxuLy8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2N1bWVudCkucmVhZHkoKSBpcyBjYWxsZWRcbi8vIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLlxuLy8gU3VwcG9ydDogSUUgPD05IC0gMTAgb25seVxuLy8gT2xkZXIgSUUgc29tZXRpbWVzIHNpZ25hbHMgXCJpbnRlcmFjdGl2ZVwiIHRvbyBzb29uXG5pZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiB8fFxuXHQoIGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiICYmICFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwgKSApIHtcblxuXHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0d2luZG93LnNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG59IGVsc2Uge1xuXG5cdC8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2FsbGJhY2tcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCApO1xuXG5cdC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG59XG5cblxuXG5cbi8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvblxuLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uXG52YXIgYWNjZXNzID0gZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gZWxlbXMubGVuZ3RoLFxuXHRcdGJ1bGsgPSBrZXkgPT0gbnVsbDtcblxuXHQvLyBTZXRzIG1hbnkgdmFsdWVzXG5cdGlmICggdG9UeXBlKCBrZXkgKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXHRcdGZvciAoIGkgaW4ga2V5ICkge1xuXHRcdFx0YWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyYXcgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGlmICggYnVsayApIHtcblxuXHRcdFx0Ly8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0XG5cdFx0XHRpZiAoIHJhdyApIHtcblx0XHRcdFx0Zm4uY2FsbCggZWxlbXMsIHZhbHVlICk7XG5cdFx0XHRcdGZuID0gbnVsbDtcblxuXHRcdFx0Ly8gLi4uZXhjZXB0IHdoZW4gZXhlY3V0aW5nIGZ1bmN0aW9uIHZhbHVlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnVsayA9IGZuO1xuXHRcdFx0XHRmbiA9IGZ1bmN0aW9uKCBlbGVtLCBfa2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGZuKFxuXHRcdFx0XHRcdGVsZW1zWyBpIF0sIGtleSwgcmF3ID9cblx0XHRcdFx0XHR2YWx1ZSA6XG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIGNoYWluYWJsZSApIHtcblx0XHRyZXR1cm4gZWxlbXM7XG5cdH1cblxuXHQvLyBHZXRzXG5cdGlmICggYnVsayApIHtcblx0XHRyZXR1cm4gZm4uY2FsbCggZWxlbXMgKTtcblx0fVxuXG5cdHJldHVybiBsZW4gPyBmbiggZWxlbXNbIDAgXSwga2V5ICkgOiBlbXB0eUdldDtcbn07XG5cblxuLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG52YXIgcm1zUHJlZml4ID0gL14tbXMtLyxcblx0cmRhc2hBbHBoYSA9IC8tKFthLXpdKS9nO1xuXG4vLyBVc2VkIGJ5IGNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcbmZ1bmN0aW9uIGZjYW1lbENhc2UoIF9hbGwsIGxldHRlciApIHtcblx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDE1XG4vLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG5mdW5jdGlvbiBjYW1lbENhc2UoIHN0cmluZyApIHtcblx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG59XG52YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xufTtcblxuXG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0dGhpcy5leHBhbmRvID0galF1ZXJ5LmV4cGFuZG8gKyBEYXRhLnVpZCsrO1xufVxuXG5EYXRhLnVpZCA9IDE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXG5cdGNhY2hlOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGVcblx0XHR2YXIgdmFsdWUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF2YWx1ZSApIHtcblx0XHRcdHZhbHVlID0ge307XG5cblx0XHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdFx0Ly8gYnV0IHdlIHNob3VsZCBub3QsIHNlZSAjODMzNS5cblx0XHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBvd25lciApICkge1xuXG5cdFx0XHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHRcdFx0Ly8gdXNlIHBsYWluIGFzc2lnbm1lbnRcblx0XHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2Ugc2VjdXJlIGl0IGluIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcblx0XHRcdFx0Ly8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHRcdFx0Ly8gZGVsZXRlZCB3aGVuIGRhdGEgaXMgcmVtb3ZlZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCB7IHByb3BlcnRpZXMgfSBdIGFyZ3Ncblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBDb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdFxuXHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBwcm9wICkgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzLmNhY2hlKCBvd25lciApIDpcblxuXHRcdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdICYmIG93bmVyWyB0aGlzLmV4cGFuZG8gXVsgY2FtZWxDYXNlKCBrZXkgKSBdO1xuXHR9LFxuXHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblxuXHRcdC8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHQvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWRcblx0XHQvL1xuXHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdC8vIHdoaWNoIHZhbHVlIHRvIHJldHVybiwgcmVzcGVjdGl2ZWx5IGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHQvLyAgIDIuIFRoZSBkYXRhIHN0b3JlZCBhdCB0aGUga2V5XG5cdFx0Ly9cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdCggKCBrZXkgJiYgdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSApIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0KCBvd25lciwga2V5ICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vXG5cdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cblx0XHQvLyBTaW5jZSB0aGUgXCJzZXRcIiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHNcblx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHR9LFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHZhciBpLFxuXHRcdFx0Y2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHRpZiAoIGNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSgga2V5ICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYga2V5IGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2UgYWx3YXlzIHNldCBjYW1lbENhc2Uga2V5cywgc28gcmVtb3ZlIHRoYXQuXG5cdFx0XHRcdGtleSA9IGtleS5tYXAoIGNhbWVsQ2FzZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0a2V5ID0gY2FtZWxDYXNlKCBrZXkgKTtcblxuXHRcdFx0XHQvLyBJZiBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzLCB1c2UgaXQuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdGtleSA9IGtleSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0WyBrZXkgXSA6XG5cdFx0XHRcdFx0KCBrZXkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpID0ga2V5Lmxlbmd0aDtcblxuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5WyBpIF0gXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgdGhlcmUncyBubyBtb3JlIGRhdGFcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1XG5cdFx0XHQvLyBXZWJraXQgJiBCbGluayBwZXJmb3JtYW5jZSBzdWZmZXJzIHdoZW4gZGVsZXRpbmcgcHJvcGVydGllc1xuXHRcdFx0Ly8gZnJvbSBET00gbm9kZXMsIHNvIHNldCB0byB1bmRlZmluZWQgaW5zdGVhZFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3IChidWcgcmVzdHJpY3RlZClcblx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0dmFyIGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdHJldHVybiBjYWNoZSAhPT0gdW5kZWZpbmVkICYmICFqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKTtcblx0fVxufTtcbnZhciBkYXRhUHJpdiA9IG5ldyBEYXRhKCk7XG5cbnZhciBkYXRhVXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvW0EtWl0vZztcblxuZnVuY3Rpb24gZ2V0RGF0YSggZGF0YSApIHtcblx0aWYgKCBkYXRhID09PSBcInRydWVcIiApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJmYWxzZVwiICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJudWxsXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xuXHRpZiAoIGRhdGEgPT09ICtkYXRhICsgXCJcIiApIHtcblx0XHRyZXR1cm4gK2RhdGE7XG5cdH1cblxuXHRpZiAoIHJicmFjZS50ZXN0KCBkYXRhICkgKSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKTtcblx0fVxuXG5cdHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJCZcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGdldERhdGEoIGRhdGEgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge31cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRkYXRhVXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKTtcblx0fSxcblxuXHRkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YVByaXYgbWV0aG9kcywgdGhlc2UgY2FuIGJlIGRlcHJlY2F0ZWQuXG5cdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGRhdGEsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblxuXHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhUHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBUaGUgYXR0cnMgZWxlbWVudHMgY2FuIGJlIG51bGwgKCMxNDg5NClcblx0XHRcdFx0XHRcdGlmICggYXR0cnNbIGkgXSApIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGF0dHJzWyBpIF0ubmFtZTtcblx0XHRcdFx0XHRcdFx0aWYgKCBuYW1lLmluZGV4T2YoIFwiZGF0YS1cIiApID09PSAwICkge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBjYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9XG5cblx0XHQvLyBTZXRzIG11bHRpcGxlIHZhbHVlc1xuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyBUaGUga2V5IHdpbGwgYWx3YXlzIGJlIGNhbWVsQ2FzZWQgaW4gRGF0YVxuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHQvLyBIVE1MNSBjdXN0b20gZGF0YS0qIGF0dHJzXG5cdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwga2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV2UgdHJpZWQgcmVhbGx5IGhhcmQsIGJ1dCB0aGUgZGF0YSBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgZGF0YS4uLlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBXZSBhbHdheXMgc3RvcmUgdGhlIGNhbWVsQ2FzZWQga2V5XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhVXNlci5yZW1vdmUoIHRoaXMsIGtleSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBxdWV1ZTtcblxuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmdldCggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdGlmICggIXF1ZXVlIHx8IEFycmF5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0gKVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbIDAgXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSApO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0gKTtcbnZhciBwbnVtID0gKCAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLyApLnNvdXJjZTtcblxudmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXG5cblx0dmFyIGlzQXR0YWNoZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHRcdH0sXG5cdFx0Y29tcG9zZWQgPSB7IGNvbXBvc2VkOiB0cnVlIH07XG5cblx0Ly8gU3VwcG9ydDogSUUgOSAtIDExKywgRWRnZSAxMiAtIDE4KywgaU9TIDEwLjAgLSAxMC4yIG9ubHlcblx0Ly8gQ2hlY2sgYXR0YWNobWVudCBhY3Jvc3Mgc2hhZG93IERPTSBib3VuZGFyaWVzIHdoZW4gcG9zc2libGUgKGdoLTM1MDQpXG5cdC8vIFN1cHBvcnQ6IGlPUyAxMC4wLTEwLjIgb25seVxuXHQvLyBFYXJseSBpT1MgMTAgdmVyc2lvbnMgc3VwcG9ydCBgYXR0YWNoU2hhZG93YCBidXQgbm90IGBnZXRSb290Tm9kZWAsXG5cdC8vIGxlYWRpbmcgdG8gZXJyb3JzLiBXZSBuZWVkIHRvIGNoZWNrIGZvciBgZ2V0Um9vdE5vZGVgLlxuXHRpZiAoIGRvY3VtZW50RWxlbWVudC5nZXRSb290Tm9kZSApIHtcblx0XHRpc0F0dGFjaGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSB8fFxuXHRcdFx0XHRlbGVtLmdldFJvb3ROb2RlKCBjb21wb3NlZCApID09PSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0fTtcblx0fVxudmFyIGlzSGlkZGVuV2l0aGluVHJlZSA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblxuXHRcdC8vIGlzSGlkZGVuV2l0aGluVHJlZSBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdGVsZW0gPSBlbCB8fCBlbGVtO1xuXG5cdFx0Ly8gSW5saW5lIHN0eWxlIHRydW1wcyBhbGxcblx0XHRyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fFxuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmXG5cblx0XHRcdC8vIE90aGVyd2lzZSwgY2hlY2sgY29tcHV0ZWQgc3R5bGVcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MyAtIDQ1XG5cdFx0XHQvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgY2FuIGhhdmUgY29tcHV0ZWQgZGlzcGxheTogbm9uZSwgc28gZmlyc3QgY29uZmlybSB0aGF0IGVsZW0gaXNcblx0XHRcdC8vIGluIHRoZSBkb2N1bWVudC5cblx0XHRcdGlzQXR0YWNoZWQoIGVsZW0gKSAmJlxuXG5cdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIjtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7XG5cdHZhciBhZGp1c3RlZCwgc2NhbGUsXG5cdFx0bWF4SXRlcmF0aW9ucyA9IDIwLFxuXHRcdGN1cnJlbnRWYWx1ZSA9IHR3ZWVuID9cblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uY3VyKCk7XG5cdFx0XHR9IDpcblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgXCJcIiApO1xuXHRcdFx0fSxcblx0XHRpbml0aWFsID0gY3VycmVudFZhbHVlKCksXG5cdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG5cdFx0Ly8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcblx0XHRpbml0aWFsSW5Vbml0ID0gZWxlbS5ub2RlVHlwZSAmJlxuXHRcdFx0KCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdHJjc3NOdW0uZXhlYyggalF1ZXJ5LmNzcyggZWxlbSwgcHJvcCApICk7XG5cblx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD01NFxuXHRcdC8vIEhhbHZlIHRoZSBpdGVyYXRpb24gdGFyZ2V0IHZhbHVlIHRvIHByZXZlbnQgaW50ZXJmZXJlbmNlIGZyb20gQ1NTIHVwcGVyIGJvdW5kcyAoZ2gtMjE0NClcblx0XHRpbml0aWFsID0gaW5pdGlhbCAvIDI7XG5cblx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0dW5pdCA9IHVuaXQgfHwgaW5pdGlhbEluVW5pdFsgMyBdO1xuXG5cdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWwgfHwgMTtcblxuXHRcdHdoaWxlICggbWF4SXRlcmF0aW9ucy0tICkge1xuXG5cdFx0XHQvLyBFdmFsdWF0ZSBhbmQgdXBkYXRlIG91ciBiZXN0IGd1ZXNzIChkb3VibGluZyBndWVzc2VzIHRoYXQgemVybyBvdXQpLlxuXHRcdFx0Ly8gRmluaXNoIGlmIHRoZSBzY2FsZSBlcXVhbHMgb3IgY3Jvc3NlcyAxIChtYWtpbmcgdGhlIG9sZCpuZXcgcHJvZHVjdCBub24tcG9zaXRpdmUpLlxuXHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXHRcdFx0aWYgKCAoIDEgLSBzY2FsZSApICogKCAxIC0gKCBzY2FsZSA9IGN1cnJlbnRWYWx1ZSgpIC8gaW5pdGlhbCB8fCAwLjUgKSApIDw9IDAgKSB7XG5cdFx0XHRcdG1heEl0ZXJhdGlvbnMgPSAwO1xuXHRcdFx0fVxuXHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblxuXHRcdH1cblxuXHRcdGluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0ICogMjtcblx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cdH1cblxuXHRpZiAoIHZhbHVlUGFydHMgKSB7XG5cdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7XG5cblx0XHQvLyBBcHBseSByZWxhdGl2ZSBvZmZzZXQgKCs9Ly09KSBpZiBzcGVjaWZpZWRcblx0XHRhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/XG5cdFx0XHRpbml0aWFsSW5Vbml0ICsgKCB2YWx1ZVBhcnRzWyAxIF0gKyAxICkgKiB2YWx1ZVBhcnRzWyAyIF0gOlxuXHRcdFx0K3ZhbHVlUGFydHNbIDIgXTtcblx0XHRpZiAoIHR3ZWVuICkge1xuXHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHR0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7XG5cdFx0XHR0d2Vlbi5lbmQgPSBhZGp1c3RlZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGFkanVzdGVkO1xufVxuXG5cbnZhciBkZWZhdWx0RGlzcGxheU1hcCA9IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApIHtcblx0dmFyIHRlbXAsXG5cdFx0ZG9jID0gZWxlbS5vd25lckRvY3VtZW50LFxuXHRcdG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSxcblx0XHRkaXNwbGF5ID0gZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF07XG5cblx0aWYgKCBkaXNwbGF5ICkge1xuXHRcdHJldHVybiBkaXNwbGF5O1xuXHR9XG5cblx0dGVtcCA9IGRvYy5ib2R5LmFwcGVuZENoaWxkKCBkb2MuY3JlYXRlRWxlbWVudCggbm9kZU5hbWUgKSApO1xuXHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggdGVtcCwgXCJkaXNwbGF5XCIgKTtcblxuXHR0ZW1wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHRlbXAgKTtcblxuXHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdGRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdH1cblx0ZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuXG5cdHJldHVybiBkaXNwbGF5O1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLFxuXHRcdHZhbHVlcyA9IFtdLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cblx0Ly8gRGV0ZXJtaW5lIG5ldyBkaXNwbGF5IHZhbHVlIGZvciBlbGVtZW50cyB0aGF0IG5lZWQgdG8gY2hhbmdlXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdO1xuXHRcdGlmICggIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblxuXHRcdFx0Ly8gU2luY2Ugd2UgZm9yY2UgdmlzaWJpbGl0eSB1cG9uIGNhc2NhZGUtaGlkZGVuIGVsZW1lbnRzLCBhbiBpbW1lZGlhdGUgKGFuZCBzbG93KVxuXHRcdFx0Ly8gY2hlY2sgaXMgcmVxdWlyZWQgaW4gdGhpcyBmaXJzdCBsb29wIHVubGVzcyB3ZSBoYXZlIGEgbm9uZW1wdHkgZGlzcGxheSB2YWx1ZSAoZWl0aGVyXG5cdFx0XHQvLyBpbmxpbmUgb3IgYWJvdXQtdG8tYmUtcmVzdG9yZWQpXG5cdFx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZGlzcGxheVwiICkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCAhdmFsdWVzWyBpbmRleCBdICkge1xuXHRcdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBcIm5vbmVcIjtcblxuXHRcdFx0XHQvLyBSZW1lbWJlciB3aGF0IHdlJ3JlIG92ZXJ3cml0aW5nXG5cdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJkaXNwbGF5XCIsIGRpc3BsYXkgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgdGhlIGRpc3BsYXkgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AgdG8gYXZvaWQgY29uc3RhbnQgcmVmbG93XG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCB2YWx1ZXNbIGluZGV4IF0gIT0gbnVsbCApIHtcblx0XHRcdGVsZW1lbnRzWyBpbmRleCBdLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZXNbIGluZGV4IF07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcywgdHJ1ZSApO1xuXHR9LFxuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcblx0fSxcblx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW5XaXRoaW5UcmVlKCB0aGlzICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmhpZGUoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcbnZhciByY2hlY2thYmxlVHlwZSA9ICggL14oPzpjaGVja2JveHxyYWRpbykkL2kgKTtcblxudmFyIHJ0YWdOYW1lID0gKCAvPChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSopL2kgKTtcblxudmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8Xm1vZHVsZSR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7XG5cblxuXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seVxuXHQvLyBDaGVjayBzdGF0ZSBsb3N0IGlmIHRoZSBuYW1lIGlzIHNldCAoIzExMjE3KVxuXHQvLyBTdXBwb3J0OiBXaW5kb3dzIFdlYiBBcHBzIChXV0EpXG5cdC8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKVxuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcInJhZGlvXCIgKTtcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcImNoZWNrZWRcIiwgXCJjaGVja2VkXCIgKTtcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJ0XCIgKTtcblxuXHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMSBvbmx5XG5cdC8vIE9sZGVyIFdlYktpdCBkb2Vzbid0IGNsb25lIGNoZWNrZWQgc3RhdGUgY29ycmVjdGx5IGluIGZyYWdtZW50c1xuXHRzdXBwb3J0LmNoZWNrQ2xvbmUgPSBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmNoZWNrZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkXG5cdGRpdi5pbm5lckhUTUwgPSBcIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIjtcblx0c3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0Ly8gSUUgPD05IHJlcGxhY2VzIDxvcHRpb24+IHRhZ3Mgd2l0aCB0aGVpciBjb250ZW50cyB3aGVuIGluc2VydGVkIG91dHNpZGUgb2Zcblx0Ly8gdGhlIHNlbGVjdCBlbGVtZW50LlxuXHRkaXYuaW5uZXJIVE1MID0gXCI8b3B0aW9uPjwvb3B0aW9uPlwiO1xuXHRzdXBwb3J0Lm9wdGlvbiA9ICEhZGl2Lmxhc3RDaGlsZDtcbn0gKSgpO1xuXG5cbi8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG52YXIgd3JhcE1hcCA9IHtcblxuXHQvLyBYSFRNTCBwYXJzZXJzIGRvIG5vdCBtYWdpY2FsbHkgaW5zZXJ0IGVsZW1lbnRzIGluIHRoZVxuXHQvLyBzYW1lIHdheSB0aGF0IHRhZyBzb3VwIHBhcnNlcnMgZG8uIFNvIHdlIGNhbm5vdCBzaG9ydGVuXG5cdC8vIHRoaXMgYnkgb21pdHRpbmcgPHRib2R5PiBvciBvdGhlciByZXF1aXJlZCBlbGVtZW50cy5cblx0dGhlYWQ6IFsgMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIiBdLFxuXHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHR0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG5cdHRkOiBbIDMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCIgXSxcblxuXHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cbn07XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuLy8gU3VwcG9ydDogSUUgPD05IG9ubHlcbmlmICggIXN1cHBvcnQub3B0aW9uICkge1xuXHR3cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb24gPSBbIDEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiIF07XG59XG5cblxuZnVuY3Rpb24gZ2V0QWxsKCBjb250ZXh0LCB0YWcgKSB7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHQvLyBVc2UgdHlwZW9mIHRvIGF2b2lkIHplcm8tYXJndW1lbnQgbWV0aG9kIGludm9jYXRpb24gb24gaG9zdCBvYmplY3RzICgjMTUxNTEpXG5cdHZhciByZXQ7XG5cblx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRyZXQgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKTtcblxuXHR9IGVsc2UgaWYgKCB0eXBlb2YgY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdHJldCA9IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICk7XG5cblx0fSBlbHNlIHtcblx0XHRyZXQgPSBbXTtcblx0fVxuXG5cdGlmICggdGFnID09PSB1bmRlZmluZWQgfHwgdGFnICYmIG5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YVByaXYuc2V0KFxuXHRcdFx0ZWxlbXNbIGkgXSxcblx0XHRcdFwiZ2xvYmFsRXZhbFwiLFxuXHRcdFx0IXJlZkVsZW1lbnRzIHx8IGRhdGFQcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuXG52YXIgcmh0bWwgPSAvPHwmIz9cXHcrOy87XG5cbmZ1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24sIGlnbm9yZWQgKSB7XG5cdHZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgYXR0YWNoZWQsIGosXG5cdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRub2RlcyA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGVsZW0gPSBlbGVtc1sgaSBdO1xuXG5cdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdC8vIEFkZCBub2RlcyBkaXJlY3RseVxuXHRcdFx0aWYgKCB0b1R5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cblx0XHRcdC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxuXHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cblx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0dGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTtcblxuXHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0dG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRmcmFnbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cblx0aSA9IDA7XG5cdHdoaWxlICggKCBlbGVtID0gbm9kZXNbIGkrKyBdICkgKSB7XG5cblx0XHQvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KVxuXHRcdGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSA+IC0xICkge1xuXHRcdFx0aWYgKCBpZ25vcmVkICkge1xuXHRcdFx0XHRpZ25vcmVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGF0dGFjaGVkID0gaXNBdHRhY2hlZCggZWxlbSApO1xuXG5cdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0dG1wID0gZ2V0QWxsKCBmcmFnbWVudC5hcHBlbmRDaGlsZCggZWxlbSApLCBcInNjcmlwdFwiICk7XG5cblx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0aWYgKCBhdHRhY2hlZCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIHRtcCApO1xuXHRcdH1cblxuXHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRpZiAoIHNjcmlwdHMgKSB7XG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdG1wWyBqKysgXSApICkge1xuXHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0c2NyaXB0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZnJhZ21lbnQ7XG59XG5cblxudmFyXG5cdHJrZXlFdmVudCA9IC9ea2V5Lyxcblx0cm1vdXNlRXZlbnQgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sXG5cdHJ0eXBlbmFtZXNwYWNlID0gL14oW14uXSopKD86XFwuKC4rKXwpLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDExK1xuLy8gZm9jdXMoKSBhbmQgYmx1cigpIGFyZSBhc3luY2hyb25vdXMsIGV4Y2VwdCB3aGVuIHRoZXkgYXJlIG5vLW9wLlxuLy8gU28gZXhwZWN0IGZvY3VzIHRvIGJlIHN5bmNocm9ub3VzIHdoZW4gdGhlIGVsZW1lbnQgaXMgYWxyZWFkeSBhY3RpdmUsXG4vLyBhbmQgYmx1ciB0byBiZSBzeW5jaHJvbm91cyB3aGVuIHRoZSBlbGVtZW50IGlzIG5vdCBhbHJlYWR5IGFjdGl2ZS5cbi8vIChmb2N1cyBhbmQgYmx1ciBhcmUgYWx3YXlzIHN5bmNocm9ub3VzIGluIG90aGVyIHN1cHBvcnRlZCBicm93c2Vycyxcbi8vIHRoaXMganVzdCBkZWZpbmVzIHdoZW4gd2UgY2FuIGNvdW50IG9uIGl0KS5cbmZ1bmN0aW9uIGV4cGVjdFN5bmMoIGVsZW0sIHR5cGUgKSB7XG5cdHJldHVybiAoIGVsZW0gPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgKSA9PT0gKCB0eXBlID09PSBcImZvY3VzXCIgKTtcbn1cblxuLy8gU3VwcG9ydDogSUUgPD05IG9ubHlcbi8vIEFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiB0aHJvdyB1bmV4cGVjdGVkbHlcbi8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM5M1xuZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cdH0gY2F0Y2ggKCBlcnIgKSB7IH1cbn1cblxuZnVuY3Rpb24gb24oIGVsZW0sIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIG9uZSApIHtcblx0dmFyIG9yaWdGbiwgdHlwZTtcblxuXHQvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnNcblx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgZGF0YSApXG5cdFx0XHRkYXRhID0gZGF0YSB8fCBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0b24oIGVsZW0sIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblxuXHRpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkge1xuXG5cdFx0Ly8gKCB0eXBlcywgZm4gKVxuXHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0ZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHR9IGVsc2UgaWYgKCBmbiA9PSBudWxsICkge1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0fSBlbHNlIGlmICggIWZuICkge1xuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKCBvbmUgPT09IDEgKSB7XG5cdFx0b3JpZ0ZuID0gZm47XG5cdFx0Zm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdC8vIENhbiB1c2UgYW4gZW1wdHkgc2V0LCBzaW5jZSBldmVudCBjb250YWlucyB0aGUgaW5mb1xuXHRcdFx0alF1ZXJ5KCkub2ZmKCBldmVudCApO1xuXHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fTtcblxuXHRcdC8vIFVzZSBzYW1lIGd1aWQgc28gY2FsbGVyIGNhbiByZW1vdmUgdXNpbmcgb3JpZ0ZuXG5cdFx0Zm4uZ3VpZCA9IG9yaWdGbi5ndWlkIHx8ICggb3JpZ0ZuLmd1aWQgPSBqUXVlcnkuZ3VpZCsrICk7XG5cdH1cblx0cmV0dXJuIGVsZW0uZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0alF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApO1xuXHR9ICk7XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHQvLyBPbmx5IGF0dGFjaCBldmVudHMgdG8gb2JqZWN0cyB0aGF0IGFjY2VwdCBkYXRhXG5cdFx0aWYgKCAhYWNjZXB0RGF0YSggZWxlbSApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhbiBvYmplY3Qgb2YgY3VzdG9tIGRhdGEgaW4gbGlldSBvZiB0aGUgaGFuZGxlclxuXHRcdGlmICggaGFuZGxlci5oYW5kbGVyICkge1xuXHRcdFx0aGFuZGxlT2JqSW4gPSBoYW5kbGVyO1xuXHRcdFx0aGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7XG5cdFx0XHRzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yO1xuXHRcdH1cblxuXHRcdC8vIEVuc3VyZSB0aGF0IGludmFsaWQgc2VsZWN0b3JzIHRocm93IGV4Y2VwdGlvbnMgYXQgYXR0YWNoIHRpbWVcblx0XHQvLyBFdmFsdWF0ZSBhZ2FpbnN0IGRvY3VtZW50RWxlbWVudCBpbiBjYXNlIGVsZW0gaXMgYSBub24tZWxlbWVudCBub2RlIChlLmcuLCBkb2N1bWVudClcblx0XHRpZiAoIHNlbGVjdG9yICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBkb2N1bWVudEVsZW1lbnQsIHNlbGVjdG9yICk7XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgdGhlIGhhbmRsZXIgaGFzIGEgdW5pcXVlIElELCB1c2VkIHRvIGZpbmQvcmVtb3ZlIGl0IGxhdGVyXG5cdFx0aWYgKCAhaGFuZGxlci5ndWlkICkge1xuXHRcdFx0aGFuZGxlci5ndWlkID0galF1ZXJ5Lmd1aWQrKztcblx0XHR9XG5cblx0XHQvLyBJbml0IHRoZSBlbGVtZW50J3MgZXZlbnQgc3RydWN0dXJlIGFuZCBtYWluIGhhbmRsZXIsIGlmIHRoaXMgaXMgdGhlIGZpcnN0XG5cdFx0aWYgKCAhKCBldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgKSApIHtcblx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IE9iamVjdC5jcmVhdGUoIG51bGwgKTtcblx0XHR9XG5cdFx0aWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHQvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuXHRcdFx0XHQvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuXHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRzZWxlY3Rvcjogc2VsZWN0b3IsXG5cdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApXG5cdFx0XHR9LCBoYW5kbGVPYmpJbiApO1xuXG5cdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKCBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdICkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHxcblx0XHRcdFx0XHRzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0aWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnRcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107XG5cdFx0XHR0bXAgPSB0bXBbIDIgXSAmJlxuXHRcdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIG1hdGNoaW5nIGV2ZW50c1xuXHRcdFx0b3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaiBdO1xuXG5cdFx0XHRcdGlmICggKCBtYXBwZWRUeXBlcyB8fCBvcmlnVHlwZSA9PT0gaGFuZGxlT2JqLm9yaWdUeXBlICkgJiZcblx0XHRcdFx0XHQoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJlxuXHRcdFx0XHRcdCggIXRtcCB8fCB0bXAudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgJiZcblx0XHRcdFx0XHQoICFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gaGFuZGxlT2JqLnNlbGVjdG9yIHx8XG5cdFx0XHRcdFx0XHRzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC50ZWFyZG93bi5jYWxsKCBlbGVtLCBuYW1lc3BhY2VzLCBlbGVtRGF0YS5oYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVsZXRlIGV2ZW50c1sgdHlwZSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSBkYXRhIGFuZCB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkXG5cdFx0aWYgKCBqUXVlcnkuaXNFbXB0eU9iamVjdCggZXZlbnRzICkgKSB7XG5cdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiaGFuZGxlIGV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdGRpc3BhdGNoOiBmdW5jdGlvbiggbmF0aXZlRXZlbnQgKSB7XG5cblx0XHR2YXIgaSwgaiwgcmV0LCBtYXRjaGVkLCBoYW5kbGVPYmosIGhhbmRsZXJRdWV1ZSxcblx0XHRcdGFyZ3MgPSBuZXcgQXJyYXkoIGFyZ3VtZW50cy5sZW5ndGggKSxcblxuXHRcdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0XHRldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIG5hdGl2ZUV2ZW50ICksXG5cblx0XHRcdGhhbmRsZXJzID0gKFxuXHRcdFx0XHRcdGRhdGFQcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IE9iamVjdC5jcmVhdGUoIG51bGwgKVxuXHRcdFx0XHQpWyBldmVudC50eXBlIF0gfHwgW10sXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGV2ZW50LnR5cGUgXSB8fCB7fTtcblxuXHRcdC8vIFVzZSB0aGUgZml4LWVkIGpRdWVyeS5FdmVudCByYXRoZXIgdGhhbiB0aGUgKHJlYWQtb25seSkgbmF0aXZlIGV2ZW50XG5cdFx0YXJnc1sgMCBdID0gZXZlbnQ7XG5cblx0XHRmb3IgKCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKyApIHtcblx0XHRcdGFyZ3NbIGkgXSA9IGFyZ3VtZW50c1sgaSBdO1xuXHRcdH1cblxuXHRcdGV2ZW50LmRlbGVnYXRlVGFyZ2V0ID0gdGhpcztcblxuXHRcdC8vIENhbGwgdGhlIHByZURpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZSwgYW5kIGxldCBpdCBiYWlsIGlmIGRlc2lyZWRcblx0XHRpZiAoIHNwZWNpYWwucHJlRGlzcGF0Y2ggJiYgc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaGFuZGxlcnNcblx0XHRoYW5kbGVyUXVldWUgPSBqUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCggdGhpcywgZXZlbnQsIGhhbmRsZXJzICk7XG5cblx0XHQvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBtYXRjaGVkID0gaGFuZGxlclF1ZXVlWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJlxuXHRcdFx0XHQhZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGUgZXZlbnQgaXMgbmFtZXNwYWNlZCwgdGhlbiBlYWNoIGhhbmRsZXIgaXMgb25seSBpbnZva2VkIGlmIGl0IGlzXG5cdFx0XHRcdC8vIHNwZWNpYWxseSB1bml2ZXJzYWwgb3IgaXRzIG5hbWVzcGFjZXMgYXJlIGEgc3VwZXJzZXQgb2YgdGhlIGV2ZW50J3MuXG5cdFx0XHRcdGlmICggIWV2ZW50LnJuYW1lc3BhY2UgfHwgaGFuZGxlT2JqLm5hbWVzcGFjZSA9PT0gZmFsc2UgfHxcblx0XHRcdFx0XHRldmVudC5ybmFtZXNwYWNlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblxuXHRcdFx0XHRcdGV2ZW50LmhhbmRsZU9iaiA9IGhhbmRsZU9iajtcblx0XHRcdFx0XHRldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7XG5cblx0XHRcdFx0XHRyZXQgPSAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9ICkuaGFuZGxlIHx8XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlciApLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggcmV0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgaGFuZGxlT2JqLCBzZWwsIG1hdGNoZWRIYW5kbGVycywgbWF0Y2hlZFNlbGVjdG9ycyxcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0ZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsXG5cdFx0XHRjdXIgPSBldmVudC50YXJnZXQ7XG5cblx0XHQvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OVxuXHRcdFx0Ly8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKHRyYWMtMTMxODApXG5cdFx0XHRjdXIubm9kZVR5cGUgJiZcblxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTQyXG5cdFx0XHQvLyBTdXBwcmVzcyBzcGVjLXZpb2xhdGluZyBjbGlja3MgaW5kaWNhdGluZyBhIG5vbi1wcmltYXJ5IHBvaW50ZXIgYnV0dG9uICh0cmFjLTM4NjEpXG5cdFx0XHQvLyBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudC10eXBlLWNsaWNrXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHQvLyAuLi5idXQgbm90IGFycm93IGtleSBcImNsaWNrc1wiIG9mIHJhZGlvIGlucHV0cywgd2hpY2ggY2FuIGhhdmUgYGJ1dHRvbmAgLTEgKGdoLTIzNDMpXG5cdFx0XHQhKCBldmVudC50eXBlID09PSBcImNsaWNrXCIgJiYgZXZlbnQuYnV0dG9uID49IDEgKSApIHtcblxuXHRcdFx0Zm9yICggOyBjdXIgIT09IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgY2hlY2sgbm9uLWVsZW1lbnRzICgjMTMyMDgpXG5cdFx0XHRcdC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KVxuXHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA9PT0gMSAmJiAhKCBldmVudC50eXBlID09PSBcImNsaWNrXCIgJiYgY3VyLmRpc2FibGVkID09PSB0cnVlICkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlZEhhbmRsZXJzID0gW107XG5cdFx0XHRcdFx0bWF0Y2hlZFNlbGVjdG9ycyA9IHt9O1xuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGkgXTtcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMylcblx0XHRcdFx0XHRcdHNlbCA9IGhhbmRsZU9iai5zZWxlY3RvciArIFwiIFwiO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdID0gaGFuZGxlT2JqLm5lZWRzQ29udGV4dCA/XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5KCBzZWwsIHRoaXMgKS5pbmRleCggY3VyICkgPiAtMSA6XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQoIHNlbCwgdGhpcywgbnVsbCwgWyBjdXIgXSApLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlZFNlbGVjdG9yc1sgc2VsIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZWRIYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBtYXRjaGVkSGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogbWF0Y2hlZEhhbmRsZXJzIH0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIHJlbWFpbmluZyAoZGlyZWN0bHktYm91bmQpIGhhbmRsZXJzXG5cdFx0Y3VyID0gdGhpcztcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGFuZGxlclF1ZXVlO1xuXHR9LFxuXG5cdGFkZFByb3A6IGZ1bmN0aW9uKCBuYW1lLCBob29rICkge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSwgbmFtZSwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblxuXHRcdFx0Z2V0OiBpc0Z1bmN0aW9uKCBob29rICkgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGhvb2soIHRoaXMub3JpZ2luYWxFdmVudCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50WyBuYW1lIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCB0aGlzLCBuYW1lLCB7XG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRcdFx0dmFsdWU6IHZhbHVlXG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggb3JpZ2luYWxFdmVudCApIHtcblx0XHRyZXR1cm4gb3JpZ2luYWxFdmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRvcmlnaW5hbEV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTtcblx0fSxcblxuXHRzcGVjaWFsOiB7XG5cdFx0bG9hZDoge1xuXG5cdFx0XHQvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkXG5cdFx0XHRub0J1YmJsZTogdHJ1ZVxuXHRcdH0sXG5cdFx0Y2xpY2s6IHtcblxuXHRcdFx0Ly8gVXRpbGl6ZSBuYXRpdmUgZXZlbnQgdG8gZW5zdXJlIGNvcnJlY3Qgc3RhdGUgZm9yIGNoZWNrYWJsZSBpbnB1dHNcblx0XHRcdHNldHVwOiBmdW5jdGlvbiggZGF0YSApIHtcblxuXHRcdFx0XHQvLyBGb3IgbXV0dWFsIGNvbXByZXNzaWJpbGl0eSB3aXRoIF9kZWZhdWx0LCByZXBsYWNlIGB0aGlzYCBhY2Nlc3Mgd2l0aCBhIGxvY2FsIHZhci5cblx0XHRcdFx0Ly8gYHx8IGRhdGFgIGlzIGRlYWQgY29kZSBtZWFudCBvbmx5IHRvIHByZXNlcnZlIHRoZSB2YXJpYWJsZSB0aHJvdWdoIG1pbmlmaWNhdGlvbi5cblx0XHRcdFx0dmFyIGVsID0gdGhpcyB8fCBkYXRhO1xuXG5cdFx0XHRcdC8vIENsYWltIHRoZSBmaXJzdCBoYW5kbGVyXG5cdFx0XHRcdGlmICggcmNoZWNrYWJsZVR5cGUudGVzdCggZWwudHlwZSApICYmXG5cdFx0XHRcdFx0ZWwuY2xpY2sgJiYgbm9kZU5hbWUoIGVsLCBcImlucHV0XCIgKSApIHtcblxuXHRcdFx0XHRcdC8vIGRhdGFQcml2LnNldCggZWwsIFwiY2xpY2tcIiwgLi4uIClcblx0XHRcdFx0XHRsZXZlcmFnZU5hdGl2ZSggZWwsIFwiY2xpY2tcIiwgcmV0dXJuVHJ1ZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmV0dXJuIGZhbHNlIHRvIGFsbG93IG5vcm1hbCBwcm9jZXNzaW5nIGluIHRoZSBjYWxsZXJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSxcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCBkYXRhICkge1xuXG5cdFx0XHRcdC8vIEZvciBtdXR1YWwgY29tcHJlc3NpYmlsaXR5IHdpdGggX2RlZmF1bHQsIHJlcGxhY2UgYHRoaXNgIGFjY2VzcyB3aXRoIGEgbG9jYWwgdmFyLlxuXHRcdFx0XHQvLyBgfHwgZGF0YWAgaXMgZGVhZCBjb2RlIG1lYW50IG9ubHkgdG8gcHJlc2VydmUgdGhlIHZhcmlhYmxlIHRocm91Z2ggbWluaWZpY2F0aW9uLlxuXHRcdFx0XHR2YXIgZWwgPSB0aGlzIHx8IGRhdGE7XG5cblx0XHRcdFx0Ly8gRm9yY2Ugc2V0dXAgYmVmb3JlIHRyaWdnZXJpbmcgYSBjbGlja1xuXHRcdFx0XHRpZiAoIHJjaGVja2FibGVUeXBlLnRlc3QoIGVsLnR5cGUgKSAmJlxuXHRcdFx0XHRcdGVsLmNsaWNrICYmIG5vZGVOYW1lKCBlbCwgXCJpbnB1dFwiICkgKSB7XG5cblx0XHRcdFx0XHRsZXZlcmFnZU5hdGl2ZSggZWwsIFwiY2xpY2tcIiApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmV0dXJuIG5vbi1mYWxzZSB0byBhbGxvdyBub3JtYWwgZXZlbnQtcGF0aCBwcm9wYWdhdGlvblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cblx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBzdXBwcmVzcyBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdC8vIEFsc28gcHJldmVudCBpdCBpZiB3ZSdyZSBjdXJyZW50bHkgaW5zaWRlIGEgbGV2ZXJhZ2VkIG5hdGl2ZS1ldmVudCBzdGFja1xuXHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblx0XHRcdFx0cmV0dXJuIHJjaGVja2FibGVUeXBlLnRlc3QoIHRhcmdldC50eXBlICkgJiZcblx0XHRcdFx0XHR0YXJnZXQuY2xpY2sgJiYgbm9kZU5hbWUoIHRhcmdldCwgXCJpbnB1dFwiICkgJiZcblx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRhcmdldCwgXCJjbGlja1wiICkgfHxcblx0XHRcdFx0XHRub2RlTmFtZSggdGFyZ2V0LCBcImFcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRiZWZvcmV1bmxvYWQ6IHtcblx0XHRcdHBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArXG5cdFx0XHRcdC8vIEZpcmVmb3ggZG9lc24ndCBhbGVydCBpZiB0aGUgcmV0dXJuVmFsdWUgZmllbGQgaXMgbm90IHNldC5cblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBldmVudC5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbi8vIEVuc3VyZSB0aGUgcHJlc2VuY2Ugb2YgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBoYW5kbGVzIG1hbnVhbGx5LXRyaWdnZXJlZFxuLy8gc3ludGhldGljIGV2ZW50cyBieSBpbnRlcnJ1cHRpbmcgcHJvZ3Jlc3MgdW50aWwgcmVpbnZva2VkIGluIHJlc3BvbnNlIHRvXG4vLyAqbmF0aXZlKiBldmVudHMgdGhhdCBpdCBmaXJlcyBkaXJlY3RseSwgZW5zdXJpbmcgdGhhdCBzdGF0ZSBjaGFuZ2VzIGhhdmVcbi8vIGFscmVhZHkgb2NjdXJyZWQgYmVmb3JlIG90aGVyIGxpc3RlbmVycyBhcmUgaW52b2tlZC5cbmZ1bmN0aW9uIGxldmVyYWdlTmF0aXZlKCBlbCwgdHlwZSwgZXhwZWN0U3luYyApIHtcblxuXHQvLyBNaXNzaW5nIGV4cGVjdFN5bmMgaW5kaWNhdGVzIGEgdHJpZ2dlciBjYWxsLCB3aGljaCBtdXN0IGZvcmNlIHNldHVwIHRocm91Z2ggalF1ZXJ5LmV2ZW50LmFkZFxuXHRpZiAoICFleHBlY3RTeW5jICkge1xuXHRcdGlmICggZGF0YVByaXYuZ2V0KCBlbCwgdHlwZSApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuYWRkKCBlbCwgdHlwZSwgcmV0dXJuVHJ1ZSApO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBSZWdpc3RlciB0aGUgY29udHJvbGxlciBhcyBhIHNwZWNpYWwgdW5pdmVyc2FsIGhhbmRsZXIgZm9yIGFsbCBldmVudCBuYW1lc3BhY2VzXG5cdGRhdGFQcml2LnNldCggZWwsIHR5cGUsIGZhbHNlICk7XG5cdGpRdWVyeS5ldmVudC5hZGQoIGVsLCB0eXBlLCB7XG5cdFx0bmFtZXNwYWNlOiBmYWxzZSxcblx0XHRoYW5kbGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgbm90QXN5bmMsIHJlc3VsdCxcblx0XHRcdFx0c2F2ZWQgPSBkYXRhUHJpdi5nZXQoIHRoaXMsIHR5cGUgKTtcblxuXHRcdFx0aWYgKCAoIGV2ZW50LmlzVHJpZ2dlciAmIDEgKSAmJiB0aGlzWyB0eXBlIF0gKSB7XG5cblx0XHRcdFx0Ly8gSW50ZXJydXB0IHByb2Nlc3Npbmcgb2YgdGhlIG91dGVyIHN5bnRoZXRpYyAudHJpZ2dlcigpZWQgZXZlbnRcblx0XHRcdFx0Ly8gU2F2ZWQgZGF0YSBzaG91bGQgYmUgZmFsc2UgaW4gc3VjaCBjYXNlcywgYnV0IG1pZ2h0IGJlIGEgbGVmdG92ZXIgY2FwdHVyZSBvYmplY3Rcblx0XHRcdFx0Ly8gZnJvbSBhbiBhc3luYyBuYXRpdmUgaGFuZGxlciAoZ2gtNDM1MClcblx0XHRcdFx0aWYgKCAhc2F2ZWQubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0Ly8gU3RvcmUgYXJndW1lbnRzIGZvciB1c2Ugd2hlbiBoYW5kbGluZyB0aGUgaW5uZXIgbmF0aXZlIGV2ZW50XG5cdFx0XHRcdFx0Ly8gVGhlcmUgd2lsbCBhbHdheXMgYmUgYXQgbGVhc3Qgb25lIGFyZ3VtZW50IChhbiBldmVudCBvYmplY3QpLCBzbyB0aGlzIGFycmF5XG5cdFx0XHRcdFx0Ly8gd2lsbCBub3QgYmUgY29uZnVzZWQgd2l0aCBhIGxlZnRvdmVyIGNhcHR1cmUgb2JqZWN0LlxuXHRcdFx0XHRcdHNhdmVkID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCB0eXBlLCBzYXZlZCApO1xuXG5cdFx0XHRcdFx0Ly8gVHJpZ2dlciB0aGUgbmF0aXZlIGV2ZW50IGFuZCBjYXB0dXJlIGl0cyByZXN1bHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMStcblx0XHRcdFx0XHQvLyBmb2N1cygpIGFuZCBibHVyKCkgYXJlIGFzeW5jaHJvbm91c1xuXHRcdFx0XHRcdG5vdEFzeW5jID0gZXhwZWN0U3luYyggdGhpcywgdHlwZSApO1xuXHRcdFx0XHRcdHRoaXNbIHR5cGUgXSgpO1xuXHRcdFx0XHRcdHJlc3VsdCA9IGRhdGFQcml2LmdldCggdGhpcywgdHlwZSApO1xuXHRcdFx0XHRcdGlmICggc2F2ZWQgIT09IHJlc3VsdCB8fCBub3RBc3luYyApIHtcblx0XHRcdFx0XHRcdGRhdGFQcml2LnNldCggdGhpcywgdHlwZSwgZmFsc2UgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc2F2ZWQgIT09IHJlc3VsdCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSBvdXRlciBzeW50aGV0aWMgZXZlbnRcblx0XHRcdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQudmFsdWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgYW4gaW5uZXIgc3ludGhldGljIGV2ZW50IGZvciBhbiBldmVudCB3aXRoIGEgYnViYmxpbmcgc3Vycm9nYXRlXG5cdFx0XHRcdC8vIChmb2N1cyBvciBibHVyKSwgYXNzdW1lIHRoYXQgdGhlIHN1cnJvZ2F0ZSBhbHJlYWR5IHByb3BhZ2F0ZWQgZnJvbSB0cmlnZ2VyaW5nIHRoZVxuXHRcdFx0XHQvLyBuYXRpdmUgZXZlbnQgYW5kIHByZXZlbnQgdGhhdCBmcm9tIGhhcHBlbmluZyBhZ2FpbiBoZXJlLlxuXHRcdFx0XHQvLyBUaGlzIHRlY2huaWNhbGx5IGdldHMgdGhlIG9yZGVyaW5nIHdyb25nIHcuci50LiB0byBgLnRyaWdnZXIoKWAgKGluIHdoaWNoIHRoZVxuXHRcdFx0XHQvLyBidWJibGluZyBzdXJyb2dhdGUgcHJvcGFnYXRlcyAqYWZ0ZXIqIHRoZSBub24tYnViYmxpbmcgYmFzZSksIGJ1dCB0aGF0IHNlZW1zXG5cdFx0XHRcdC8vIGxlc3MgYmFkIHRoYW4gZHVwbGljYXRpb24uXG5cdFx0XHRcdH0gZWxzZSBpZiAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fSApLmRlbGVnYXRlVHlwZSApIHtcblx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgbmF0aXZlIGV2ZW50IHRyaWdnZXJlZCBhYm92ZSwgZXZlcnl0aGluZyBpcyBub3cgaW4gb3JkZXJcblx0XHRcdC8vIEZpcmUgYW4gaW5uZXIgc3ludGhldGljIGV2ZW50IHdpdGggdGhlIG9yaWdpbmFsIGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggc2F2ZWQubGVuZ3RoICkge1xuXG5cdFx0XHRcdC8vIC4uLmFuZCBjYXB0dXJlIHRoZSByZXN1bHRcblx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCB0eXBlLCB7XG5cdFx0XHRcdFx0dmFsdWU6IGpRdWVyeS5ldmVudC50cmlnZ2VyKFxuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMStcblx0XHRcdFx0XHRcdC8vIEV4dGVuZCB3aXRoIHRoZSBwcm90b3R5cGUgdG8gcmVzZXQgdGhlIGFib3ZlIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG5cdFx0XHRcdFx0XHRqUXVlcnkuZXh0ZW5kKCBzYXZlZFsgMCBdLCBqUXVlcnkuRXZlbnQucHJvdG90eXBlICksXG5cdFx0XHRcdFx0XHRzYXZlZC5zbGljZSggMSApLFxuXHRcdFx0XHRcdFx0dGhpc1xuXHRcdFx0XHRcdClcblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdC8vIEFib3J0IGhhbmRsaW5nIG9mIHRoZSBuYXRpdmUgZXZlbnRcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9ICk7XG59XG5cbmpRdWVyeS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7XG5cblx0Ly8gVGhpcyBcImlmXCIgaXMgbmVlZGVkIGZvciBwbGFpbiBvYmplY3RzXG5cdGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuXHRcdGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXG5cdC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuXHRpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQgKSApIHtcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5FdmVudCggc3JjLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gRXZlbnQgb2JqZWN0XG5cdGlmICggc3JjICYmIHNyYy50eXBlICkge1xuXHRcdHRoaXMub3JpZ2luYWxFdmVudCA9IHNyYztcblx0XHR0aGlzLnR5cGUgPSBzcmMudHlwZTtcblxuXHRcdC8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkXG5cdFx0Ly8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBzcmMuZGVmYXVsdFByZXZlbnRlZCB8fFxuXHRcdFx0XHRzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTIuMyBvbmx5XG5cdFx0XHRcdHNyYy5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0cmV0dXJuVHJ1ZSA6XG5cdFx0XHRyZXR1cm5GYWxzZTtcblxuXHRcdC8vIENyZWF0ZSB0YXJnZXQgcHJvcGVydGllc1xuXHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA8PTYgLSA3IG9ubHlcblx0XHQvLyBUYXJnZXQgc2hvdWxkIG5vdCBiZSBhIHRleHQgbm9kZSAoIzUwNCwgIzEzMTQzKVxuXHRcdHRoaXMudGFyZ2V0ID0gKCBzcmMudGFyZ2V0ICYmIHNyYy50YXJnZXQubm9kZVR5cGUgPT09IDMgKSA/XG5cdFx0XHRzcmMudGFyZ2V0LnBhcmVudE5vZGUgOlxuXHRcdFx0c3JjLnRhcmdldDtcblxuXHRcdHRoaXMuY3VycmVudFRhcmdldCA9IHNyYy5jdXJyZW50VGFyZ2V0O1xuXHRcdHRoaXMucmVsYXRlZFRhcmdldCA9IHNyYy5yZWxhdGVkVGFyZ2V0O1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IERhdGUubm93KCk7XG5cblx0Ly8gTWFyayBpdCBhcyBmaXhlZFxuXHR0aGlzWyBqUXVlcnkuZXhwYW5kbyBdID0gdHJ1ZTtcbn07XG5cbi8vIGpRdWVyeS5FdmVudCBpcyBiYXNlZCBvbiBET00zIEV2ZW50cyBhcyBzcGVjaWZpZWQgYnkgdGhlIEVDTUFTY3JpcHQgTGFuZ3VhZ2UgQmluZGluZ1xuLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMDMwMzMxL2VjbWEtc2NyaXB0LWJpbmRpbmcuaHRtbFxualF1ZXJ5LkV2ZW50LnByb3RvdHlwZSA9IHtcblx0Y29uc3RydWN0b3I6IGpRdWVyeS5FdmVudCxcblx0aXNEZWZhdWx0UHJldmVudGVkOiByZXR1cm5GYWxzZSxcblx0aXNQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzU2ltdWxhdGVkOiBmYWxzZSxcblxuXHRwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0fSxcblx0c3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cblx0XHR0aGlzLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9XG59O1xuXG4vLyBJbmNsdWRlcyBhbGwgY29tbW9uIGV2ZW50IHByb3BzIGluY2x1ZGluZyBLZXlFdmVudCBhbmQgTW91c2VFdmVudCBzcGVjaWZpYyBwcm9wc1xualF1ZXJ5LmVhY2goIHtcblx0YWx0S2V5OiB0cnVlLFxuXHRidWJibGVzOiB0cnVlLFxuXHRjYW5jZWxhYmxlOiB0cnVlLFxuXHRjaGFuZ2VkVG91Y2hlczogdHJ1ZSxcblx0Y3RybEtleTogdHJ1ZSxcblx0ZGV0YWlsOiB0cnVlLFxuXHRldmVudFBoYXNlOiB0cnVlLFxuXHRtZXRhS2V5OiB0cnVlLFxuXHRwYWdlWDogdHJ1ZSxcblx0cGFnZVk6IHRydWUsXG5cdHNoaWZ0S2V5OiB0cnVlLFxuXHR2aWV3OiB0cnVlLFxuXHRcImNoYXJcIjogdHJ1ZSxcblx0Y29kZTogdHJ1ZSxcblx0Y2hhckNvZGU6IHRydWUsXG5cdGtleTogdHJ1ZSxcblx0a2V5Q29kZTogdHJ1ZSxcblx0YnV0dG9uOiB0cnVlLFxuXHRidXR0b25zOiB0cnVlLFxuXHRjbGllbnRYOiB0cnVlLFxuXHRjbGllbnRZOiB0cnVlLFxuXHRvZmZzZXRYOiB0cnVlLFxuXHRvZmZzZXRZOiB0cnVlLFxuXHRwb2ludGVySWQ6IHRydWUsXG5cdHBvaW50ZXJUeXBlOiB0cnVlLFxuXHRzY3JlZW5YOiB0cnVlLFxuXHRzY3JlZW5ZOiB0cnVlLFxuXHR0YXJnZXRUb3VjaGVzOiB0cnVlLFxuXHR0b0VsZW1lbnQ6IHRydWUsXG5cdHRvdWNoZXM6IHRydWUsXG5cblx0d2hpY2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgYnV0dG9uID0gZXZlbnQuYnV0dG9uO1xuXG5cdFx0Ly8gQWRkIHdoaWNoIGZvciBrZXkgZXZlbnRzXG5cdFx0aWYgKCBldmVudC53aGljaCA9PSBudWxsICYmIHJrZXlFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7XG5cdFx0XHRyZXR1cm4gZXZlbnQuY2hhckNvZGUgIT0gbnVsbCA/IGV2ZW50LmNoYXJDb2RlIDogZXZlbnQua2V5Q29kZTtcblx0XHR9XG5cblx0XHQvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0XG5cdFx0aWYgKCAhZXZlbnQud2hpY2ggJiYgYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgcm1vdXNlRXZlbnQudGVzdCggZXZlbnQudHlwZSApICkge1xuXHRcdFx0aWYgKCBidXR0b24gJiAxICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBidXR0b24gJiAyICkge1xuXHRcdFx0XHRyZXR1cm4gMztcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBidXR0b24gJiA0ICkge1xuXHRcdFx0XHRyZXR1cm4gMjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LndoaWNoO1xuXHR9XG59LCBqUXVlcnkuZXZlbnQuYWRkUHJvcCApO1xuXG5qUXVlcnkuZWFjaCggeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggdHlwZSwgZGVsZWdhdGVUeXBlICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdID0ge1xuXG5cdFx0Ly8gVXRpbGl6ZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBDbGFpbSB0aGUgZmlyc3QgaGFuZGxlclxuXHRcdFx0Ly8gZGF0YVByaXYuc2V0KCB0aGlzLCBcImZvY3VzXCIsIC4uLiApXG5cdFx0XHQvLyBkYXRhUHJpdi5zZXQoIHRoaXMsIFwiYmx1clwiLCAuLi4gKVxuXHRcdFx0bGV2ZXJhZ2VOYXRpdmUoIHRoaXMsIHR5cGUsIGV4cGVjdFN5bmMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIGZhbHNlIHRvIGFsbG93IG5vcm1hbCBwcm9jZXNzaW5nIGluIHRoZSBjYWxsZXJcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBGb3JjZSBzZXR1cCBiZWZvcmUgdHJpZ2dlclxuXHRcdFx0bGV2ZXJhZ2VOYXRpdmUoIHRoaXMsIHR5cGUgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIG5vbi1mYWxzZSB0byBhbGxvdyBub3JtYWwgZXZlbnQtcGF0aCBwcm9wYWdhdGlvblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdGRlbGVnYXRlVHlwZTogZGVsZWdhdGVUeXBlXG5cdH07XG59ICk7XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cbi8vIERvIHRoZSBzYW1lIGZvciBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGFuZCBwb2ludGVyb3Zlci9wb2ludGVyb3V0XG4vL1xuLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuLy8gU2FmYXJpIHNlbmRzIG1vdXNlZW50ZXIgdG9vIG9mdGVuOyBzZWU6XG4vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NzAyNThcbi8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuXG5qUXVlcnkuZWFjaCgge1xuXHRtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLFxuXHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiXG59LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdGRlbGVnYXRlVHlwZTogZml4LFxuXHRcdGJpbmRUeXBlOiBmaXgsXG5cblx0XHRoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LFxuXHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cblx0XHRcdC8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG5cdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkge1xuXHRcdFx0XHRldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlO1xuXHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTtcblx0fSxcblx0b2ZmOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBmbiApIHtcblx0XHR2YXIgaGFuZGxlT2JqLCB0eXBlO1xuXHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID9cblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOlxuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSxcblx0XHRcdFx0aGFuZGxlT2JqLnNlbGVjdG9yLFxuXHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzIFssIGZuXSApXG5cdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxudmFyXG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExLCBFZGdlIDEyIC0gMTMgb25seVxuXHQvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLlxuXHQvLyBTZWUgaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy8xNzM2NTEyL1xuXHRybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxcblxuXHQvLyBjaGVja2VkPVwiY2hlY2tlZFwiIG9yIGNoZWNrZWRcblx0cmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuXHRyY2xlYW5TY3JpcHQgPSAvXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2c7XG5cbi8vIFByZWZlciBhIHRib2R5IG92ZXIgaXRzIHBhcmVudCB0YWJsZSBmb3IgY29udGFpbmluZyBuZXcgcm93c1xuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRpZiAoIG5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdG5vZGVOYW1lKCBjb250ZW50Lm5vZGVUeXBlICE9PSAxMSA/IGNvbnRlbnQgOiBjb250ZW50LmZpcnN0Q2hpbGQsIFwidHJcIiApICkge1xuXG5cdFx0cmV0dXJuIGpRdWVyeSggZWxlbSApLmNoaWxkcmVuKCBcInRib2R5XCIgKVsgMCBdIHx8IGVsZW07XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKCBlbGVtLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSAhPT0gbnVsbCApICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdHJldHVybiBlbGVtO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0aWYgKCAoIGVsZW0udHlwZSB8fCBcIlwiICkuc2xpY2UoIDAsIDUgKSA9PT0gXCJ0cnVlL1wiICkge1xuXHRcdGVsZW0udHlwZSA9IGVsZW0udHlwZS5zbGljZSggNSApO1xuXHR9IGVsc2Uge1xuXHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBcInR5cGVcIiApO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YVByaXYuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0cGRhdGFPbGQgPSBkYXRhUHJpdi5nZXQoIHNyYyApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBkZXN0LCBcImhhbmRsZSBldmVudHNcIiApO1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhVXNlci5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHR1ZGF0YU9sZCA9IGRhdGFVc2VyLmFjY2Vzcyggc3JjICk7XG5cdFx0dWRhdGFDdXIgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdWRhdGFPbGQgKTtcblxuXHRcdGRhdGFVc2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG4vLyBGaXggSUUgYnVncywgc2VlIHN1cHBvcnQgdGVzdHNcbmZ1bmN0aW9uIGZpeElucHV0KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHQvLyBGYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94IG9yIHJhZGlvIGJ1dHRvbi5cblx0aWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmIHJjaGVja2FibGVUeXBlLnRlc3QoIHNyYy50eXBlICkgKSB7XG5cdFx0ZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7XG5cblx0Ly8gRmFpbHMgdG8gcmV0dXJuIHRoZSBzZWxlY3RlZCBvcHRpb24gdG8gdGhlIGRlZmF1bHQgc2VsZWN0ZWQgc3RhdGUgd2hlbiBjbG9uaW5nIG9wdGlvbnNcblx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiB8fCBub2RlTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICkge1xuXHRcdGRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBkb21NYW5pcCggY29sbGVjdGlvbiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKSB7XG5cblx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRhcmdzID0gZmxhdCggYXJncyApO1xuXG5cdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRpID0gMCxcblx0XHRsID0gY29sbGVjdGlvbi5sZW5ndGgsXG5cdFx0aU5vQ2xvbmUgPSBsIC0gMSxcblx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHR2YWx1ZUlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRpZiAoIHZhbHVlSXNGdW5jdGlvbiB8fFxuXHRcdFx0KCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7XG5cdFx0cmV0dXJuIGNvbGxlY3Rpb24uZWFjaCggZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdFx0dmFyIHNlbGYgPSBjb2xsZWN0aW9uLmVxKCBpbmRleCApO1xuXHRcdFx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdGFyZ3NbIDAgXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApO1xuXHRcdFx0fVxuXHRcdFx0ZG9tTWFuaXAoIHNlbGYsIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICk7XG5cdFx0fSApO1xuXHR9XG5cblx0aWYgKCBsICkge1xuXHRcdGZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7XG5cdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0aWYgKCBmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdGZyYWdtZW50ID0gZmlyc3Q7XG5cdFx0fVxuXG5cdFx0Ly8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrXG5cdFx0aWYgKCBmaXJzdCB8fCBpZ25vcmVkICkge1xuXHRcdFx0c2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuXHRcdFx0aGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXG5cdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtXG5cdFx0XHQvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcblx0XHRcdC8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuXG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdG5vZGUgPSBmcmFnbWVudDtcblxuXHRcdFx0XHRpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuXHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cblx0XHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBzY3JpcHRzLCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cblx0XHRcdFx0Ly8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRub2RlID0gc2NyaXB0c1sgaSBdO1xuXHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8IFwiXCIgKSAmJlxuXHRcdFx0XHRcdFx0IWRhdGFQcml2LmFjY2Vzcyggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBub2RlLnNyYyAmJiAoIG5vZGUudHlwZSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSAgIT09IFwibW9kdWxlXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gT3B0aW9uYWwgQUpBWCBkZXBlbmRlbmN5LCBidXQgd29uJ3QgcnVuIHNjcmlwdHMgaWYgbm90IHByZXNlbnRcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgJiYgIW5vZGUubm9Nb2R1bGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5Ll9ldmFsVXJsKCBub2RlLnNyYywge1xuXHRcdFx0XHRcdFx0XHRcdFx0bm9uY2U6IG5vZGUubm9uY2UgfHwgbm9kZS5nZXRBdHRyaWJ1dGUoIFwibm9uY2VcIiApXG5cdFx0XHRcdFx0XHRcdFx0fSwgZG9jICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdERPTUV2YWwoIG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSggcmNsZWFuU2NyaXB0LCBcIlwiICksIG5vZGUsIGRvYyApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBjb2xsZWN0aW9uO1xufVxuXG5mdW5jdGlvbiByZW1vdmUoIGVsZW0sIHNlbGVjdG9yLCBrZWVwRGF0YSApIHtcblx0dmFyIG5vZGUsXG5cdFx0bm9kZXMgPSBzZWxlY3RvciA/IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBlbGVtICkgOiBlbGVtLFxuXHRcdGkgPSAwO1xuXG5cdGZvciAoIDsgKCBub2RlID0gbm9kZXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRpZiAoICFrZWVwRGF0YSAmJiBub2RlLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBub2RlICkgKTtcblx0XHR9XG5cblx0XHRpZiAoIG5vZGUucGFyZW50Tm9kZSApIHtcblx0XHRcdGlmICgga2VlcERhdGEgJiYgaXNBdHRhY2hlZCggbm9kZSApICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0cmV0dXJuIGh0bWw7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGlzQXR0YWNoZWQoIGVsZW0gKTtcblxuXHRcdC8vIEZpeCBJRSBjbG9uaW5nIGlzc3Vlc1xuXHRcdGlmICggIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQgJiYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiZcblx0XHRcdFx0IWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXG5cdFx0XHQvLyBXZSBlc2NoZXcgU2l6emxlIGhlcmUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM6IGh0dHBzOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTtcblx0XHRcdHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cblx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmaXhJbnB1dCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0aWYgKCBkYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0aWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZGVzdEVsZW1lbnRzIHx8IGdldEFsbCggY2xvbmUgKTtcblxuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIGVsZW0sIGNsb25lICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRpZiAoIGRlc3RFbGVtZW50cy5sZW5ndGggPiAwICkge1xuXHRcdFx0c2V0R2xvYmFsRXZhbCggZGVzdEVsZW1lbnRzLCAhaW5QYWdlICYmIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHRoZSBjbG9uZWQgc2V0XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9LFxuXG5cdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdHZhciBkYXRhLCBlbGVtLCB0eXBlLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPT0gdW5kZWZpbmVkOyBpKysgKSB7XG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0aWYgKCAoIGRhdGEgPSBlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBzcGVjaWFsWyB0eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgYSBzaG9ydGN1dCB0byBhdm9pZCBqUXVlcnkuZXZlbnQucmVtb3ZlJ3Mgb3ZlcmhlYWRcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSApIHtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTM1IC0gNDUrXG5cdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0ZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciApO1xuXHR9LFxuXG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fSxcblxuXHRhcHBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRwcmVwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGFmdGVyOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKCBlbGVtID0gdGhpc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uaW5uZXJIVE1MO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZWUgaWYgd2UgY2FuIHRha2UgYSBzaG9ydGN1dCBhbmQganVzdCB1c2UgaW5uZXJIVE1MXG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiZcblx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIHZhbHVlICk7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG5cdFx0XHRcdFx0XHRcdGVsZW0uaW5uZXJIVE1MID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbSA9IDA7XG5cblx0XHRcdFx0Ly8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kXG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpZ25vcmVkID0gW107XG5cblx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuXG5cdFx0XHRpZiAoIGpRdWVyeS5pbkFycmF5KCB0aGlzLCBpZ25vcmVkICkgPCAwICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIHRoaXMgKSApO1xuXHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0XHRwYXJlbnQucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb25cblx0XHR9LCBpZ25vcmVkICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHQvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcblx0fTtcbn0gKTtcbnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblxudmFyIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5LCBGaXJlZm94IDw9MzAgKCMxNTA5OCwgIzE0MTUwKVxuXHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdHZhciB2aWV3ID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG5cdFx0aWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7XG5cdFx0XHR2aWV3ID0gd2luZG93O1xuXHRcdH1cblxuXHRcdHJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcblx0fTtcblxudmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2sgKSB7XG5cdHZhciByZXQsIG5hbWUsXG5cdFx0b2xkID0ge307XG5cblx0Ly8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG5cdH1cblxuXHRyZXQgPSBjYWxsYmFjay5jYWxsKCBlbGVtICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cbnZhciByYm94U3R5bGUgPSBuZXcgUmVnRXhwKCBjc3NFeHBhbmQuam9pbiggXCJ8XCIgKSwgXCJpXCIgKTtcblxuXG5cbiggZnVuY3Rpb24oKSB7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuXG5cdFx0Ly8gVGhpcyBpcyBhIHNpbmdsZXRvbiwgd2UgbmVlZCB0byBleGVjdXRlIGl0IG9ubHkgb25jZVxuXHRcdGlmICggIWRpdiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O1wiICtcblx0XHRcdFwibWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowXCI7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XCJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7XCIgK1xuXHRcdFx0XCJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O1wiICtcblx0XHRcdFwid2lkdGg6NjAlO3RvcDoxJVwiO1xuXHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICkuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG5cdFx0dmFyIGRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApO1xuXHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gNDRcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLm1hcmdpbkxlZnQgKSA9PT0gMTI7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBTYWZhcmkgPD05LjEgLSAxMC4xLCBpT1MgPD03LjAgLSA5LjNcblx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRkaXYuc3R5bGUucmlnaHQgPSBcIjYwJVwiO1xuXHRcdHBpeGVsQm94U3R5bGVzVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS5yaWdodCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdFx0Ly8gRGV0ZWN0IG1pc3JlcG9ydGluZyBvZiBjb250ZW50IGRpbWVuc2lvbnMgZm9yIGJveC1zaXppbmc6Ym9yZGVyLWJveCBlbGVtZW50c1xuXHRcdGJveFNpemluZ1JlbGlhYmxlVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS53aWR0aCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdC8vIERldGVjdCBvdmVyZmxvdzpzY3JvbGwgc2NyZXdpbmVzcyAoZ2gtMzY5OSlcblx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD02NFxuXHRcdC8vIERvbid0IGdldCB0cmlja2VkIHdoZW4gem9vbSBhZmZlY3RzIG9mZnNldFdpZHRoIChnaC00MDI5KVxuXHRcdGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRzY3JvbGxib3hTaXplVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXYub2Zmc2V0V2lkdGggLyAzICkgPT09IDEyO1xuXG5cdFx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdC8vIE51bGxpZnkgdGhlIGRpdiBzbyBpdCB3b3VsZG4ndCBiZSBzdG9yZWQgaW4gdGhlIG1lbW9yeSBhbmRcblx0XHQvLyBpdCB3aWxsIGFsc28gYmUgYSBzaWduIHRoYXQgY2hlY2tzIGFscmVhZHkgcGVyZm9ybWVkXG5cdFx0ZGl2ID0gbnVsbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJvdW5kUGl4ZWxNZWFzdXJlcyggbWVhc3VyZSApIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCggcGFyc2VGbG9hdCggbWVhc3VyZSApICk7XG5cdH1cblxuXHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsIHNjcm9sbGJveFNpemVWYWwsIHBpeGVsQm94U3R5bGVzVmFsLFxuXHRcdHJlbGlhYmxlVHJEaW1lbnNpb25zVmFsLCByZWxpYWJsZU1hcmdpbkxlZnRWYWwsXG5cdFx0Y29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuXHQvLyBGaW5pc2ggZWFybHkgaW4gbGltaXRlZCAobm9uLWJyb3dzZXIpIGVudmlyb25tZW50c1xuXHRpZiAoICFkaXYuc3R5bGUgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHQvLyBTdHlsZSBvZiBjbG9uZWQgZWxlbWVudCBhZmZlY3RzIHNvdXJjZSBlbGVtZW50IGNsb25lZCAoIzg5MDgpXG5cdGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiY29udGVudC1ib3hcIjtcblx0ZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJcIjtcblx0c3VwcG9ydC5jbGVhckNsb25lU3R5bGUgPSBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPT09IFwiY29udGVudC1ib3hcIjtcblxuXHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBib3hTaXppbmdSZWxpYWJsZVZhbDtcblx0XHR9LFxuXHRcdHBpeGVsQm94U3R5bGVzOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcGl4ZWxCb3hTdHlsZXNWYWw7XG5cdFx0fSxcblx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHR9LFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHJlbGlhYmxlTWFyZ2luTGVmdFZhbDtcblx0XHR9LFxuXHRcdHNjcm9sbGJveFNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBzY3JvbGxib3hTaXplVmFsO1xuXHRcdH0sXG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IC0gMTErLCBFZGdlIDE1IC0gMTgrXG5cdFx0Ly8gSUUvRWRnZSBtaXNyZXBvcnQgYGdldENvbXB1dGVkU3R5bGVgIG9mIHRhYmxlIHJvd3Mgd2l0aCB3aWR0aC9oZWlnaHRcblx0XHQvLyBzZXQgaW4gQ1NTIHdoaWxlIGBvZmZzZXQqYCBwcm9wZXJ0aWVzIHJlcG9ydCBjb3JyZWN0IHZhbHVlcy5cblx0XHQvLyBCZWhhdmlvciBpbiBJRSA5IGlzIG1vcmUgc3VidGxlIHRoYW4gaW4gbmV3ZXIgdmVyc2lvbnMgJiBpdCBwYXNzZXNcblx0XHQvLyBzb21lIHZlcnNpb25zIG9mIHRoaXMgdGVzdDsgbWFrZSBzdXJlIG5vdCB0byBtYWtlIGl0IHBhc3MgdGhlcmUhXG5cdFx0cmVsaWFibGVUckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHRhYmxlLCB0ciwgdHJDaGlsZCwgdHJTdHlsZTtcblx0XHRcdGlmICggcmVsaWFibGVUckRpbWVuc2lvbnNWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0dGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInRhYmxlXCIgKTtcblx0XHRcdFx0dHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInRyXCIgKTtcblx0XHRcdFx0dHJDaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuXHRcdFx0XHR0YWJsZS5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4XCI7XG5cdFx0XHRcdHRyLnN0eWxlLmhlaWdodCA9IFwiMXB4XCI7XG5cdFx0XHRcdHRyQ2hpbGQuc3R5bGUuaGVpZ2h0ID0gXCI5cHhcIjtcblxuXHRcdFx0XHRkb2N1bWVudEVsZW1lbnRcblx0XHRcdFx0XHQuYXBwZW5kQ2hpbGQoIHRhYmxlIClcblx0XHRcdFx0XHQuYXBwZW5kQ2hpbGQoIHRyIClcblx0XHRcdFx0XHQuYXBwZW5kQ2hpbGQoIHRyQ2hpbGQgKTtcblxuXHRcdFx0XHR0clN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIHRyICk7XG5cdFx0XHRcdHJlbGlhYmxlVHJEaW1lbnNpb25zVmFsID0gcGFyc2VJbnQoIHRyU3R5bGUuaGVpZ2h0ICkgPiAzO1xuXG5cdFx0XHRcdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggdGFibGUgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZWxpYWJsZVRyRGltZW5zaW9uc1ZhbDtcblx0XHR9XG5cdH0gKTtcbn0gKSgpO1xuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDUxK1xuXHRcdC8vIFJldHJpZXZpbmcgc3R5bGUgYmVmb3JlIGNvbXB1dGVkIHNvbWVob3dcblx0XHQvLyBmaXhlcyBhbiBpc3N1ZSB3aXRoIGdldHRpbmcgd3JvbmcgdmFsdWVzXG5cdFx0Ly8gb24gZGV0YWNoZWQgZWxlbWVudHNcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0Y29tcHV0ZWQgPSBjb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKTtcblxuXHQvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG5lZWRlZCBmb3I6XG5cdC8vICAgLmNzcygnZmlsdGVyJykgKElFIDkgb25seSwgIzEyNTM3KVxuXHQvLyAgIC5jc3MoJy0tY3VzdG9tUHJvcGVydHkpICgjMzE0NClcblx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRyZXQgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXTtcblxuXHRcdGlmICggcmV0ID09PSBcIlwiICYmICFpc0F0dGFjaGVkKCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBBIHRyaWJ1dGUgdG8gdGhlIFwiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkc1wiXG5cdFx0Ly8gQW5kcm9pZCBCcm93c2VyIHJldHVybnMgcGVyY2VudGFnZSBmb3Igc29tZSB2YWx1ZXMsXG5cdFx0Ly8gYnV0IHdpZHRoIHNlZW1zIHRvIGJlIHJlbGlhYmx5IHBpeGVscy5cblx0XHQvLyBUaGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6XG5cdFx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoICFzdXBwb3J0LnBpeGVsQm94U3R5bGVzKCkgJiYgcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJib3hTdHlsZS50ZXN0KCBuYW1lICkgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcblx0XHRcdHdpZHRoID0gc3R5bGUud2lkdGg7XG5cdFx0XHRtaW5XaWR0aCA9IHN0eWxlLm1pbldpZHRoO1xuXHRcdFx0bWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblxuXHRcdFx0Ly8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuXHRcdFx0c3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0O1xuXHRcdFx0cmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cblx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdHN0eWxlLndpZHRoID0gd2lkdGg7XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoO1xuXHRcdFx0c3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmV0ICE9PSB1bmRlZmluZWQgP1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdC8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuXG5cdFx0cmV0ICsgXCJcIiA6XG5cdFx0cmV0O1xufVxuXG5cbmZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHtcblxuXHQvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLlxuXHRyZXR1cm4ge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGNvbmRpdGlvbkZuKCkgKSB7XG5cblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICggdGhpcy5nZXQgPSBob29rRm4gKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fVxuXHR9O1xufVxuXG5cbnZhciBjc3NQcmVmaXhlcyA9IFsgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJtc1wiIF0sXG5cdGVtcHR5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkuc3R5bGUsXG5cdHZlbmRvclByb3BzID0ge307XG5cbi8vIFJldHVybiBhIHZlbmRvci1wcmVmaXhlZCBwcm9wZXJ0eSBvciB1bmRlZmluZWRcbmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkge1xuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWyAwIF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fVxufVxuXG4vLyBSZXR1cm4gYSBwb3RlbnRpYWxseS1tYXBwZWQgalF1ZXJ5LmNzc1Byb3BzIG9yIHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gZmluYWxQcm9wTmFtZSggbmFtZSApIHtcblx0dmFyIGZpbmFsID0galF1ZXJ5LmNzc1Byb3BzWyBuYW1lIF0gfHwgdmVuZG9yUHJvcHNbIG5hbWUgXTtcblxuXHRpZiAoIGZpbmFsICkge1xuXHRcdHJldHVybiBmaW5hbDtcblx0fVxuXHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXHRyZXR1cm4gdmVuZG9yUHJvcHNbIG5hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBuYW1lICkgfHwgbmFtZTtcbn1cblxuXG52YXJcblxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlXG5cdC8vIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRyY3VzdG9tUHJvcCA9IC9eLS0vLFxuXHRjc3NTaG93ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSxcblx0Y3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuXHRcdGxldHRlclNwYWNpbmc6IFwiMFwiLFxuXHRcdGZvbnRXZWlnaHQ6IFwiNDAwXCJcblx0fTtcblxuZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIF9lbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cblx0Ly8gQW55IHJlbGF0aXZlICgrLy0pIHZhbHVlcyBoYXZlIGFscmVhZHkgYmVlblxuXHQvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnRcblx0dmFyIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblxuXHRcdC8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkIFwic3VidHJhY3RcIiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzXG5cdFx0TWF0aC5tYXgoIDAsIG1hdGNoZXNbIDIgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSA6XG5cdFx0dmFsdWU7XG59XG5cbmZ1bmN0aW9uIGJveE1vZGVsQWRqdXN0bWVudCggZWxlbSwgZGltZW5zaW9uLCBib3gsIGlzQm9yZGVyQm94LCBzdHlsZXMsIGNvbXB1dGVkVmFsICkge1xuXHR2YXIgaSA9IGRpbWVuc2lvbiA9PT0gXCJ3aWR0aFwiID8gMSA6IDAsXG5cdFx0ZXh0cmEgPSAwLFxuXHRcdGRlbHRhID0gMDtcblxuXHQvLyBBZGp1c3RtZW50IG1heSBub3QgYmUgbmVjZXNzYXJ5XG5cdGlmICggYm94ID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgKSB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cblx0XHQvLyBCb3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW5cblx0XHRpZiAoIGJveCA9PT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIGJveCArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBJZiB3ZSBnZXQgaGVyZSB3aXRoIGEgY29udGVudC1ib3gsIHdlJ3JlIHNlZWtpbmcgXCJwYWRkaW5nXCIgb3IgXCJib3JkZXJcIiBvciBcIm1hcmdpblwiXG5cdFx0aWYgKCAhaXNCb3JkZXJCb3ggKSB7XG5cblx0XHRcdC8vIEFkZCBwYWRkaW5nXG5cdFx0XHRkZWx0YSArPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblxuXHRcdFx0Ly8gRm9yIFwiYm9yZGVyXCIgb3IgXCJtYXJnaW5cIiwgYWRkIGJvcmRlclxuXHRcdFx0aWYgKCBib3ggIT09IFwicGFkZGluZ1wiICkge1xuXHRcdFx0XHRkZWx0YSArPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBCdXQgc3RpbGwga2VlcCB0cmFjayBvZiBpdCBvdGhlcndpc2Vcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGV4dHJhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHQvLyBJZiB3ZSBnZXQgaGVyZSB3aXRoIGEgYm9yZGVyLWJveCAoY29udGVudCArIHBhZGRpbmcgKyBib3JkZXIpLCB3ZSdyZSBzZWVraW5nIFwiY29udGVudFwiIG9yXG5cdFx0Ly8gXCJwYWRkaW5nXCIgb3IgXCJtYXJnaW5cIlxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIEZvciBcImNvbnRlbnRcIiwgc3VidHJhY3QgcGFkZGluZ1xuXHRcdFx0aWYgKCBib3ggPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHRkZWx0YSAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yIFwiY29udGVudFwiIG9yIFwicGFkZGluZ1wiLCBzdWJ0cmFjdCBib3JkZXJcblx0XHRcdGlmICggYm94ICE9PSBcIm1hcmdpblwiICkge1xuXHRcdFx0XHRkZWx0YSAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFjY291bnQgZm9yIHBvc2l0aXZlIGNvbnRlbnQtYm94IHNjcm9sbCBndXR0ZXIgd2hlbiByZXF1ZXN0ZWQgYnkgcHJvdmlkaW5nIGNvbXB1dGVkVmFsXG5cdGlmICggIWlzQm9yZGVyQm94ICYmIGNvbXB1dGVkVmFsID49IDAgKSB7XG5cblx0XHQvLyBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgaXMgYSByb3VuZGVkIHN1bSBvZiBjb250ZW50LCBwYWRkaW5nLCBzY3JvbGwgZ3V0dGVyLCBhbmQgYm9yZGVyXG5cdFx0Ly8gQXNzdW1pbmcgaW50ZWdlciBzY3JvbGwgZ3V0dGVyLCBzdWJ0cmFjdCB0aGUgcmVzdCBhbmQgcm91bmQgZG93blxuXHRcdGRlbHRhICs9IE1hdGgubWF4KCAwLCBNYXRoLmNlaWwoXG5cdFx0XHRlbGVtWyBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApIF0gLVxuXHRcdFx0Y29tcHV0ZWRWYWwgLVxuXHRcdFx0ZGVsdGEgLVxuXHRcdFx0ZXh0cmEgLVxuXHRcdFx0MC41XG5cblx0XHQvLyBJZiBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgaXMgdW5rbm93biwgdGhlbiB3ZSBjYW4ndCBkZXRlcm1pbmUgY29udGVudC1ib3ggc2Nyb2xsIGd1dHRlclxuXHRcdC8vIFVzZSBhbiBleHBsaWNpdCB6ZXJvIHRvIGF2b2lkIE5hTiAoZ2gtMzk2NClcblx0XHQpICkgfHwgMDtcblx0fVxuXG5cdHJldHVybiBkZWx0YTtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApIHtcblxuXHQvLyBTdGFydCB3aXRoIGNvbXB1dGVkIHN0eWxlXG5cdHZhciBzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblxuXHRcdC8vIFRvIGF2b2lkIGZvcmNpbmcgYSByZWZsb3csIG9ubHkgZmV0Y2ggYm94U2l6aW5nIGlmIHdlIG5lZWQgaXQgKGdoLTQzMjIpLlxuXHRcdC8vIEZha2UgY29udGVudC1ib3ggdW50aWwgd2Uga25vdyBpdCdzIG5lZWRlZCB0byBrbm93IHRoZSB0cnVlIHZhbHVlLlxuXHRcdGJveFNpemluZ05lZWRlZCA9ICFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgZXh0cmEsXG5cdFx0aXNCb3JkZXJCb3ggPSBib3hTaXppbmdOZWVkZWQgJiZcblx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94LFxuXG5cdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBkaW1lbnNpb24sIHN0eWxlcyApLFxuXHRcdG9mZnNldFByb3AgPSBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApO1xuXG5cdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD01NFxuXHQvLyBSZXR1cm4gYSBjb25mb3VuZGluZyBub24tcGl4ZWwgdmFsdWUgb3IgZmVpZ24gaWdub3JhbmNlLCBhcyBhcHByb3ByaWF0ZS5cblx0aWYgKCBybnVtbm9ucHgudGVzdCggdmFsICkgKSB7XG5cdFx0aWYgKCAhZXh0cmEgKSB7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblx0XHR2YWwgPSBcImF1dG9cIjtcblx0fVxuXG5cblx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHlcblx0Ly8gVXNlIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBmb3Igd2hlbiBib3ggc2l6aW5nIGlzIHVucmVsaWFibGUuXG5cdC8vIEluIHRob3NlIGNhc2VzLCB0aGUgY29tcHV0ZWQgdmFsdWUgY2FuIGJlIHRydXN0ZWQgdG8gYmUgYm9yZGVyLWJveC5cblx0aWYgKCAoICFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgJiYgaXNCb3JkZXJCb3ggfHxcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDEwIC0gMTErLCBFZGdlIDE1IC0gMTgrXG5cdFx0Ly8gSUUvRWRnZSBtaXNyZXBvcnQgYGdldENvbXB1dGVkU3R5bGVgIG9mIHRhYmxlIHJvd3Mgd2l0aCB3aWR0aC9oZWlnaHRcblx0XHQvLyBzZXQgaW4gQ1NTIHdoaWxlIGBvZmZzZXQqYCBwcm9wZXJ0aWVzIHJlcG9ydCBjb3JyZWN0IHZhbHVlcy5cblx0XHQvLyBJbnRlcmVzdGluZ2x5LCBpbiBzb21lIGNhc2VzIElFIDkgZG9lc24ndCBzdWZmZXIgZnJvbSB0aGlzIGlzc3VlLlxuXHRcdCFzdXBwb3J0LnJlbGlhYmxlVHJEaW1lbnNpb25zKCkgJiYgbm9kZU5hbWUoIGVsZW0sIFwidHJcIiApIHx8XG5cblx0XHQvLyBGYWxsIGJhY2sgdG8gb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IHdoZW4gdmFsdWUgaXMgXCJhdXRvXCJcblx0XHQvLyBUaGlzIGhhcHBlbnMgZm9yIGlubGluZSBlbGVtZW50cyB3aXRoIG5vIGV4cGxpY2l0IHNldHRpbmcgKGdoLTM1NzEpXG5cdFx0dmFsID09PSBcImF1dG9cIiB8fFxuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMSAtIDQuMyBvbmx5XG5cdFx0Ly8gQWxzbyB1c2Ugb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGZvciBtaXNyZXBvcnRlZCBpbmxpbmUgZGltZW5zaW9ucyAoZ2gtMzYwMilcblx0XHQhcGFyc2VGbG9hdCggdmFsICkgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJpbmxpbmVcIiApICYmXG5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIGVsZW1lbnQgaXMgdmlzaWJsZSAmIGNvbm5lY3RlZFxuXHRcdGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0XHQvLyBXaGVyZSBhdmFpbGFibGUsIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBhcHByb3hpbWF0ZSBib3JkZXIgYm94IGRpbWVuc2lvbnMuXG5cdFx0Ly8gV2hlcmUgbm90IGF2YWlsYWJsZSAoZS5nLiwgU1ZHKSwgYXNzdW1lIHVucmVsaWFibGUgYm94LXNpemluZyBhbmQgaW50ZXJwcmV0IHRoZVxuXHRcdC8vIHJldHJpZXZlZCB2YWx1ZSBhcyBhIGNvbnRlbnQgYm94IGRpbWVuc2lvbi5cblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gb2Zmc2V0UHJvcCBpbiBlbGVtO1xuXHRcdGlmICggdmFsdWVJc0JvcmRlckJveCApIHtcblx0XHRcdHZhbCA9IGVsZW1bIG9mZnNldFByb3AgXTtcblx0XHR9XG5cdH1cblxuXHQvLyBOb3JtYWxpemUgXCJcIiBhbmQgYXV0b1xuXHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXG5cdC8vIEFkanVzdCBmb3IgdGhlIGVsZW1lbnQncyBib3ggbW9kZWxcblx0cmV0dXJuICggdmFsICtcblx0XHRib3hNb2RlbEFkanVzdG1lbnQoXG5cdFx0XHRlbGVtLFxuXHRcdFx0ZGltZW5zaW9uLFxuXHRcdFx0ZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApLFxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdHN0eWxlcyxcblxuXHRcdFx0Ly8gUHJvdmlkZSB0aGUgY3VycmVudCBjb21wdXRlZCBzaXplIHRvIHJlcXVlc3Qgc2Nyb2xsIGd1dHRlciBjYWxjdWxhdGlvbiAoZ2gtMzU4OSlcblx0XHRcdHZhbFxuXHRcdClcblx0KSArIFwicHhcIjtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0Y3NzSG9va3M6IHtcblx0XHRvcGFjaXR5OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0dmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0Y3NzTnVtYmVyOiB7XG5cdFx0XCJhbmltYXRpb25JdGVyYXRpb25Db3VudFwiOiB0cnVlLFxuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwiZ3JpZEFyZWFcIjogdHJ1ZSxcblx0XHRcImdyaWRDb2x1bW5cIjogdHJ1ZSxcblx0XHRcImdyaWRDb2x1bW5FbmRcIjogdHJ1ZSxcblx0XHRcImdyaWRDb2x1bW5TdGFydFwiOiB0cnVlLFxuXHRcdFwiZ3JpZFJvd1wiOiB0cnVlLFxuXHRcdFwiZ3JpZFJvd0VuZFwiOiB0cnVlLFxuXHRcdFwiZ3JpZFJvd1N0YXJ0XCI6IHRydWUsXG5cdFx0XCJsaW5lSGVpZ2h0XCI6IHRydWUsXG5cdFx0XCJvcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJvcmRlclwiOiB0cnVlLFxuXHRcdFwib3JwaGFuc1wiOiB0cnVlLFxuXHRcdFwid2lkb3dzXCI6IHRydWUsXG5cdFx0XCJ6SW5kZXhcIjogdHJ1ZSxcblx0XHRcInpvb21cIjogdHJ1ZVxuXHR9LFxuXG5cdC8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmVcblx0Ly8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZVxuXHRjc3NQcm9wczoge30sXG5cblx0Ly8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGVcblx0c3R5bGU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSwgZXh0cmEgKSB7XG5cblx0XHQvLyBEb24ndCBzZXQgc3R5bGVzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCB8fCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHR2YXIgcmV0LCB0eXBlLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0gY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRpc0N1c3RvbVByb3AgPSByY3VzdG9tUHJvcC50ZXN0KCBuYW1lICksXG5cdFx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUuIFdlIGRvbid0XG5cdFx0Ly8gd2FudCB0byBxdWVyeSB0aGUgdmFsdWUgaWYgaXQgaXMgYSBDU1MgY3VzdG9tIHByb3BlcnR5XG5cdFx0Ly8gc2luY2UgdGhleSBhcmUgdXNlci1kZWZpbmVkLlxuXHRcdGlmICggIWlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdG5hbWUgPSBmaW5hbFByb3BOYW1lKCBvcmlnTmFtZSApO1xuXHRcdH1cblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHtcblx0XHRcdFx0dmFsdWUgPSBhZGp1c3RDU1MoIGVsZW0sIG5hbWUsIHJldCApO1xuXG5cdFx0XHRcdC8vIEZpeGVzIGJ1ZyAjOTIzN1xuXHRcdFx0XHR0eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0ICgjNzExNilcblx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBudW1iZXIgd2FzIHBhc3NlZCBpbiwgYWRkIHRoZSB1bml0IChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHQvLyBUaGUgaXNDdXN0b21Qcm9wIGNoZWNrIGNhbiBiZSByZW1vdmVkIGluIGpRdWVyeSA0LjAgd2hlbiB3ZSBvbmx5IGF1dG8tYXBwZW5kXG5cdFx0XHQvLyBcInB4XCIgdG8gYSBmZXcgaGFyZGNvZGVkIHZhbHVlcy5cblx0XHRcdGlmICggdHlwZSA9PT0gXCJudW1iZXJcIiAmJiAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0XHR2YWx1ZSArPSByZXQgJiYgcmV0WyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdID8gXCJcIiA6IFwicHhcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gXCJcIiAmJiBuYW1lLmluZGV4T2YoIFwiYmFja2dyb3VuZFwiICkgPT09IDAgKSB7XG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHxcblx0XHRcdFx0KCB2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0XHRcdHN0eWxlLnNldFByb3BlcnR5KCBuYW1lLCB2YWx1ZSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdGNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7XG5cdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0gY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRpc0N1c3RvbVByb3AgPSByY3VzdG9tUHJvcC50ZXN0KCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUuIFdlIGRvbid0XG5cdFx0Ly8gd2FudCB0byBtb2RpZnkgdGhlIHZhbHVlIGlmIGl0IGlzIGEgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuXHRcdC8vIHNpbmNlIHRoZXkgYXJlIHVzZXItZGVmaW5lZC5cblx0XHRpZiAoICFpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRuYW1lID0gZmluYWxQcm9wTmFtZSggb3JpZ05hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBUcnkgcHJlZml4ZWQgbmFtZSBmb2xsb3dlZCBieSB0aGUgdW5wcmVmaXhlZCBuYW1lXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbCA9IGhvb2tzLmdldCggZWxlbSwgdHJ1ZSwgZXh0cmEgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdFxuXHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgXCJub3JtYWxcIiB0byBjb21wdXRlZCB2YWx1ZVxuXHRcdGlmICggdmFsID09PSBcIm5vcm1hbFwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkge1xuXHRcdFx0dmFsID0gY3NzTm9ybWFsVHJhbnNmb3JtWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBudW1lcmljIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljXG5cdFx0aWYgKCBleHRyYSA9PT0gXCJcIiB8fCBleHRyYSApIHtcblx0XHRcdG51bSA9IHBhcnNlRmxvYXQoIHZhbCApO1xuXHRcdFx0cmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGlzRmluaXRlKCBudW0gKSA/IG51bSB8fCAwIDogdmFsO1xuXHRcdH1cblxuXHRcdHJldHVybiB2YWw7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBfaSwgZGltZW5zaW9uICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIGRpbWVuc2lvbiBdID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdHJldHVybiByZGlzcGxheXN3YXAudGVzdCggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApICYmXG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCtcblx0XHRcdFx0XHQvLyBUYWJsZSBjb2x1bW5zIGluIFNhZmFyaSBoYXZlIG5vbi16ZXJvIG9mZnNldFdpZHRoICYgemVyb1xuXHRcdFx0XHRcdC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHVubGVzcyBkaXNwbGF5IGlzIGNoYW5nZWQuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0XHRcdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYSBkaXNjb25uZWN0ZWQgbm9kZVxuXHRcdFx0XHRcdC8vIGluIElFIHRocm93cyBhbiBlcnJvci5cblx0XHRcdFx0XHQoICFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoIHx8ICFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICkgP1xuXHRcdFx0XHRcdFx0c3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBkaW1lbnNpb24sIGV4dHJhICk7XG5cdFx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSB7XG5cdFx0XHR2YXIgbWF0Y2hlcyxcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cblx0XHRcdFx0Ly8gT25seSByZWFkIHN0eWxlcy5wb3NpdGlvbiBpZiB0aGUgdGVzdCBoYXMgYSBjaGFuY2UgdG8gZmFpbFxuXHRcdFx0XHQvLyB0byBhdm9pZCBmb3JjaW5nIGEgcmVmbG93LlxuXHRcdFx0XHRzY3JvbGxib3hTaXplQnVnZ3kgPSAhc3VwcG9ydC5zY3JvbGxib3hTaXplKCkgJiZcblx0XHRcdFx0XHRzdHlsZXMucG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIixcblxuXHRcdFx0XHQvLyBUbyBhdm9pZCBmb3JjaW5nIGEgcmVmbG93LCBvbmx5IGZldGNoIGJveFNpemluZyBpZiB3ZSBuZWVkIGl0IChnaC0zOTkxKVxuXHRcdFx0XHRib3hTaXppbmdOZWVkZWQgPSBzY3JvbGxib3hTaXplQnVnZ3kgfHwgZXh0cmEsXG5cdFx0XHRcdGlzQm9yZGVyQm94ID0gYm94U2l6aW5nTmVlZGVkICYmXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0c3VidHJhY3QgPSBleHRyYSA/XG5cdFx0XHRcdFx0Ym94TW9kZWxBZGp1c3RtZW50KFxuXHRcdFx0XHRcdFx0ZWxlbSxcblx0XHRcdFx0XHRcdGRpbWVuc2lvbixcblx0XHRcdFx0XHRcdGV4dHJhLFxuXHRcdFx0XHRcdFx0aXNCb3JkZXJCb3gsXG5cdFx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0XHQpIDpcblx0XHRcdFx0XHQwO1xuXG5cdFx0XHQvLyBBY2NvdW50IGZvciB1bnJlbGlhYmxlIGJvcmRlci1ib3ggZGltZW5zaW9ucyBieSBjb21wYXJpbmcgb2Zmc2V0KiB0byBjb21wdXRlZCBhbmRcblx0XHRcdC8vIGZha2luZyBhIGNvbnRlbnQtYm94IHRvIGdldCBib3JkZXIgYW5kIHBhZGRpbmcgKGdoLTM2OTkpXG5cdFx0XHRpZiAoIGlzQm9yZGVyQm94ICYmIHNjcm9sbGJveFNpemVCdWdneSApIHtcblx0XHRcdFx0c3VidHJhY3QgLT0gTWF0aC5jZWlsKFxuXHRcdFx0XHRcdGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXSAtXG5cdFx0XHRcdFx0cGFyc2VGbG9hdCggc3R5bGVzWyBkaW1lbnNpb24gXSApIC1cblx0XHRcdFx0XHRib3hNb2RlbEFkanVzdG1lbnQoIGVsZW0sIGRpbWVuc2lvbiwgXCJib3JkZXJcIiwgZmFsc2UsIHN0eWxlcyApIC1cblx0XHRcdFx0XHQwLjVcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCB0byBwaXhlbHMgaWYgdmFsdWUgYWRqdXN0bWVudCBpcyBuZWVkZWRcblx0XHRcdGlmICggc3VidHJhY3QgJiYgKCBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiZcblx0XHRcdFx0KCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgIT09IFwicHhcIiApIHtcblxuXHRcdFx0XHRlbGVtLnN0eWxlWyBkaW1lbnNpb24gXSA9IHZhbHVlO1xuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5jc3MoIGVsZW0sIGRpbWVuc2lvbiApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApO1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LFxuXHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdHJldHVybiAoIHBhcnNlRmxvYXQoIGN1ckNTUyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIgKSApIHx8XG5cdFx0XHRcdGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtXG5cdFx0XHRcdFx0c3dhcCggZWxlbSwgeyBtYXJnaW5MZWZ0OiAwIH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblx0XHRcdFx0XHR9IClcblx0XHRcdFx0KSArIFwicHhcIjtcblx0XHR9XG5cdH1cbik7XG5cbi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXNcbmpRdWVyeS5lYWNoKCB7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdCggXCIgXCIgKSA6IFsgdmFsdWUgXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgNDsgaSsrICkge1xuXHRcdFx0XHRleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9XG5cdFx0XHRcdFx0cGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdFx0fVxuXHR9O1xuXG5cdGlmICggcHJlZml4ICE9PSBcIm1hcmdpblwiICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgc3R5bGVzLCBsZW4sXG5cdFx0XHRcdG1hcCA9IHt9LFxuXHRcdFx0XHRpID0gMDtcblxuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBuYW1lICkgKSB7XG5cdFx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0XHRsZW4gPSBuYW1lLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRtYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbWFwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSwgdmFsdWUgKSA6XG5cdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTtcblx0XHR9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fVxufSApO1xuXG5cbmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcblx0cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbn1cbmpRdWVyeS5Ud2VlbiA9IFR3ZWVuO1xuXG5Ud2Vlbi5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBUd2Vlbixcblx0aW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuXHRcdHRoaXMuZWxlbSA9IGVsZW07XG5cdFx0dGhpcy5wcm9wID0gcHJvcDtcblx0XHR0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0O1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0Ly8gVXNlIGEgcHJvcGVydHkgb24gdGhlIGVsZW1lbnQgZGlyZWN0bHkgd2hlbiBpdCBpcyBub3QgYSBET00gZWxlbWVudCxcblx0XHRcdC8vIG9yIHdoZW4gdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc3R5bGUgcHJvcGVydHkgdGhhdCBleGlzdHMuXG5cdFx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgIT09IDEgfHxcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiYgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIFBhc3NpbmcgYW4gZW1wdHkgc3RyaW5nIGFzIGEgM3JkIHBhcmFtZXRlciB0byAuY3NzIHdpbGwgYXV0b21hdGljYWxseVxuXHRcdFx0Ly8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy5cblx0XHRcdC8vIFNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0O1xuXHRcdFx0Ly8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyBcInJvdGF0ZSgxcmFkKVwiIGFyZSByZXR1cm5lZCBhcy1pcy5cblx0XHRcdHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcblxuXHRcdFx0Ly8gRW1wdHkgc3RyaW5ncywgbnVsbCwgdW5kZWZpbmVkIGFuZCBcImF1dG9cIiBhcmUgY29udmVydGVkIHRvIDAuXG5cdFx0XHRyZXR1cm4gIXJlc3VsdCB8fCByZXN1bHQgPT09IFwiYXV0b1wiID8gMCA6IHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0XHRqUXVlcnkuY3NzSG9va3NbIHR3ZWVuLnByb3AgXSB8fFxuXHRcdFx0XHRcdHR3ZWVuLmVsZW0uc3R5bGVbIGZpbmFsUHJvcE5hbWUoIHR3ZWVuLnByb3AgKSBdICE9IG51bGwgKSApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gUGFuaWMgYmFzZWQgYXBwcm9hY2ggdG8gc2V0dGluZyB0aGluZ3Mgb24gZGlzY29ubmVjdGVkIG5vZGVzXG5Ud2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7XG5cdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZWFzaW5nID0ge1xuXHRsaW5lYXI6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwO1xuXHR9LFxuXHRzd2luZzogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjtcblx0fSxcblx0X2RlZmF1bHQ6IFwic3dpbmdcIlxufTtcblxualF1ZXJ5LmZ4ID0gVHdlZW4ucHJvdG90eXBlLmluaXQ7XG5cbi8vIEJhY2sgY29tcGF0IDwxLjggZXh0ZW5zaW9uIHBvaW50XG5qUXVlcnkuZnguc3RlcCA9IHt9O1xuXG5cblxuXG52YXJcblx0ZnhOb3csIGluUHJvZ3Jlc3MsXG5cdHJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFxuXHRycnVuID0gL3F1ZXVlSG9va3MkLztcblxuZnVuY3Rpb24gc2NoZWR1bGUoKSB7XG5cdGlmICggaW5Qcm9ncmVzcyApIHtcblx0XHRpZiAoIGRvY3VtZW50LmhpZGRlbiA9PT0gZmFsc2UgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSApIHtcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHNjaGVkdWxlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBzY2hlZHVsZSwgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdFx0fVxuXG5cdFx0alF1ZXJ5LmZ4LnRpY2soKTtcblx0fVxufVxuXG4vLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5mdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9ICk7XG5cdHJldHVybiAoIGZ4Tm93ID0gRGF0ZS5ub3coKSApO1xufVxuXG4vLyBHZW5lcmF0ZSBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIGFuaW1hdGlvblxuZnVuY3Rpb24gZ2VuRngoIHR5cGUsIGluY2x1ZGVXaWR0aCApIHtcblx0dmFyIHdoaWNoLFxuXHRcdGkgPSAwLFxuXHRcdGF0dHJzID0geyBoZWlnaHQ6IHR5cGUgfTtcblxuXHQvLyBJZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsXG5cdC8vIG90aGVyd2lzZSBzdGVwIHZhbHVlIGlzIDIgdG8gc2tpcCBvdmVyIExlZnQgYW5kIFJpZ2h0XG5cdGluY2x1ZGVXaWR0aCA9IGluY2x1ZGVXaWR0aCA/IDEgOiAwO1xuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7XG5cdFx0d2hpY2ggPSBjc3NFeHBhbmRbIGkgXTtcblx0XHRhdHRyc1sgXCJtYXJnaW5cIiArIHdoaWNoIF0gPSBhdHRyc1sgXCJwYWRkaW5nXCIgKyB3aGljaCBdID0gdHlwZTtcblx0fVxuXG5cdGlmICggaW5jbHVkZVdpZHRoICkge1xuXHRcdGF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7XG5cdH1cblxuXHRyZXR1cm4gYXR0cnM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuXHR2YXIgdHdlZW4sXG5cdFx0Y29sbGVjdGlvbiA9ICggQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIEFuaW1hdGlvbi50d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICggdHdlZW4gPSBjb2xsZWN0aW9uWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgcHJvcCwgdmFsdWUgKSApICkge1xuXG5cdFx0XHQvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eVxuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIGhvb2tzLCBvbGRmaXJlLCBwcm9wVHdlZW4sIHJlc3RvcmVEaXNwbGF5LCBkaXNwbGF5LFxuXHRcdGlzQm94ID0gXCJ3aWR0aFwiIGluIHByb3BzIHx8IFwiaGVpZ2h0XCIgaW4gcHJvcHMsXG5cdFx0YW5pbSA9IHRoaXMsXG5cdFx0b3JpZyA9IHt9LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZSxcblx0XHRoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cblx0Ly8gUXVldWUtc2tpcHBpbmcgYW5pbWF0aW9ucyBoaWphY2sgdGhlIGZ4IGhvb2tzXG5cdGlmICggIW9wdHMucXVldWUgKSB7XG5cdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIFwiZnhcIiApO1xuXHRcdGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcblx0XHRcdGhvb2tzLnVucXVldWVkID0gMDtcblx0XHRcdG9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlO1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICFob29rcy51bnF1ZXVlZCApIHtcblx0XHRcdFx0XHRvbGRmaXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHRcdGhvb2tzLnVucXVldWVkKys7XG5cblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzXG5cdFx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGhvb2tzLnVucXVldWVkLS07XG5cdFx0XHRcdGlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgXCJmeFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIERldGVjdCBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLnRlc3QoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIFByZXRlbmQgdG8gYmUgaGlkZGVuIGlmIHRoaXMgaXMgYSBcInNob3dcIiBhbmRcblx0XHRcdFx0Ly8gdGhlcmUgaXMgc3RpbGwgZGF0YSBmcm9tIGEgc3RvcHBlZCBzaG93L2hpZGVcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gXCJzaG93XCIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IHRydWU7XG5cblx0XHRcdFx0Ly8gSWdub3JlIGFsbCBvdGhlciBuby1vcCBzaG93L2hpZGUgZGF0YVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIEJhaWwgb3V0IGlmIHRoaXMgaXMgYSBuby1vcCBsaWtlIC5oaWRlKCkuaGlkZSgpXG5cdHByb3BUd2VlbiA9ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcHMgKTtcblx0aWYgKCAhcHJvcFR3ZWVuICYmIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gUmVzdHJpY3QgXCJvdmVyZmxvd1wiIGFuZCBcImRpc3BsYXlcIiBzdHlsZXMgZHVyaW5nIGJveCBhbmltYXRpb25zXG5cdGlmICggaXNCb3ggJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExLCBFZGdlIDEyIC0gMTVcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFIGRvZXMgbm90IGluZmVyIHRoZSBzaG9ydGhhbmRcblx0XHQvLyBmcm9tIGlkZW50aWNhbGx5LXZhbHVlZCBvdmVyZmxvd1ggYW5kIG92ZXJmbG93WSBhbmQgRWRnZSBqdXN0IG1pcnJvcnNcblx0XHQvLyB0aGUgb3ZlcmZsb3dYIHZhbHVlIHRoZXJlLlxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gSWRlbnRpZnkgYSBkaXNwbGF5IHR5cGUsIHByZWZlcnJpbmcgb2xkIHNob3cvaGlkZSBkYXRhIG92ZXIgdGhlIENTUyBjYXNjYWRlXG5cdFx0cmVzdG9yZURpc3BsYXkgPSBkYXRhU2hvdyAmJiBkYXRhU2hvdy5kaXNwbGF5O1xuXHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdH1cblx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0aWYgKCByZXN0b3JlRGlzcGxheSApIHtcblx0XHRcdFx0ZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBHZXQgbm9uZW1wdHkgdmFsdWUocykgYnkgdGVtcG9yYXJpbHkgZm9yY2luZyB2aXNpYmlsaXR5XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSwgdHJ1ZSApO1xuXHRcdFx0XHRyZXN0b3JlRGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheSB8fCByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFuaW1hdGUgaW5saW5lIGVsZW1lbnRzIGFzIGlubGluZS1ibG9ja1xuXHRcdGlmICggZGlzcGxheSA9PT0gXCJpbmxpbmVcIiB8fCBkaXNwbGF5ID09PSBcImlubGluZS1ibG9ja1wiICYmIHJlc3RvcmVEaXNwbGF5ICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZmxvYXRcIiApID09PSBcIm5vbmVcIiApIHtcblxuXHRcdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlIGF0IHRoZSBlbmQgb2YgcHVyZSBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRcdFx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0aWYgKCByZXN0b3JlRGlzcGxheSA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0ZGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XG5cdFx0XHRcdFx0XHRyZXN0b3JlRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID8gXCJcIiA6IGRpc3BsYXk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRzdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gSW1wbGVtZW50IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdHByb3BUd2VlbiA9IGZhbHNlO1xuXHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cblx0XHQvLyBHZW5lcmFsIHNob3cvaGlkZSBzZXR1cCBmb3IgdGhpcyBlbGVtZW50IGFuaW1hdGlvblxuXHRcdGlmICggIXByb3BUd2VlbiApIHtcblx0XHRcdGlmICggZGF0YVNob3cgKSB7XG5cdFx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRhdGFTaG93ID0gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBcImZ4c2hvd1wiLCB7IGRpc3BsYXk6IHJlc3RvcmVEaXNwbGF5IH0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RvcmUgaGlkZGVuL3Zpc2libGUgZm9yIHRvZ2dsZSBzbyBgLnN0b3AoKS50b2dnbGUoKWAgXCJyZXZlcnNlc1wiXG5cdFx0XHRpZiAoIHRvZ2dsZSApIHtcblx0XHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2hvdyBlbGVtZW50cyBiZWZvcmUgYW5pbWF0aW5nIHRoZW1cblx0XHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tbG9vcC1mdW5jICovXG5cblx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tbG9vcC1mdW5jICovXG5cblx0XHRcdFx0Ly8gVGhlIGZpbmFsIHN0ZXAgb2YgYSBcImhpZGVcIiBhbmltYXRpb24gaXMgYWN0dWFsbHkgaGlkaW5nIHRoZSBlbGVtZW50XG5cdFx0XHRcdGlmICggIWhpZGRlbiApIHtcblx0XHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiZnhzaG93XCIgKTtcblx0XHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHQvLyBQZXItcHJvcGVydHkgc2V0dXBcblx0XHRwcm9wVHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblx0XHRpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHtcblx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSBwcm9wVHdlZW4uc3RhcnQ7XG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0cHJvcFR3ZWVuLmVuZCA9IHByb3BUd2Vlbi5zdGFydDtcblx0XHRcdFx0cHJvcFR3ZWVuLnN0YXJ0ID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBjYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0ZWFzaW5nID0gc3BlY2lhbEVhc2luZ1sgbmFtZSBdO1xuXHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF07XG5cdFx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IG5hbWUgKSB7XG5cdFx0XHRwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0fVxuXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG5cdFx0XHQvLyBOb3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGtleXMuXG5cdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuXHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcblx0dmFyIHJlc3VsdCxcblx0XHRzdG9wcGVkLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsXG5cdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBEb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3Jcblx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0fSApLFxuXHRcdHRpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0cmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zIG9ubHlcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7XG5cblx0XHRcdC8vIElmIHRoZXJlJ3MgbW9yZSB0byBkbywgeWllbGRcblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGlzIHdhcyBhbiBlbXB0eSBhbmltYXRpb24sIHN5bnRoZXNpemUgYSBmaW5hbCBwcm9ncmVzcyBub3RpZmljYXRpb25cblx0XHRcdGlmICggIWxlbmd0aCApIHtcblx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXNvbHZlIHRoZSBhbmltYXRpb24gYW5kIHJlcG9ydCBpdHMgY29uY2x1c2lvblxuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdGFuaW1hdGlvbiA9IGRlZmVycmVkLnByb21pc2UoIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcblx0XHRcdG9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHtcblx0XHRcdFx0c3BlY2lhbEVhc2luZzoge30sXG5cdFx0XHRcdGVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdFxuXHRcdFx0fSwgb3B0aW9ucyApLFxuXHRcdFx0b3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuXHRcdFx0b3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuXHRcdFx0c3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0ZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG5cdFx0XHR0d2VlbnM6IFtdLFxuXHRcdFx0Y3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7XG5cdFx0XHRcdHZhciB0d2VlbiA9IGpRdWVyeS5Ud2VlbiggZWxlbSwgYW5pbWF0aW9uLm9wdHMsIHByb3AsIGVuZCxcblx0XHRcdFx0XHRcdGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmdbIHByb3AgXSB8fCBhbmltYXRpb24ub3B0cy5lYXNpbmcgKTtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApO1xuXHRcdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0XHR9LFxuXHRcdFx0c3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IDAsXG5cblx0XHRcdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGVuZCwgd2Ugd2FudCB0byBydW4gYWxsIHRoZSB0d2VlbnNcblx0XHRcdFx0XHQvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnRcblx0XHRcdFx0XHRsZW5ndGggPSBnb3RvRW5kID8gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGggOiAwO1xuXHRcdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0c3RvcHBlZCA9IHRydWU7XG5cdFx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fSApLFxuXHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXG5cdHByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRyZXN1bHQgPSBBbmltYXRpb24ucHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApO1xuXHRcdGlmICggcmVzdWx0ICkge1xuXHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCByZXN1bHQuc3RvcCApICkge1xuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIGFuaW1hdGlvbi5lbGVtLCBhbmltYXRpb24ub3B0cy5xdWV1ZSApLnN0b3AgPVxuXHRcdFx0XHRcdHJlc3VsdC5zdG9wLmJpbmQoIHJlc3VsdCApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH1cblxuXHRqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApO1xuXG5cdGlmICggaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcblx0XHRhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcblx0fVxuXG5cdC8vIEF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdGFuaW1hdGlvblxuXHRcdC5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKVxuXHRcdC5kb25lKCBhbmltYXRpb24ub3B0cy5kb25lLCBhbmltYXRpb24ub3B0cy5jb21wbGV0ZSApXG5cdFx0LmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuXHRcdC5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApO1xuXG5cdGpRdWVyeS5meC50aW1lcihcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0YW5pbTogYW5pbWF0aW9uLFxuXHRcdFx0cXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlXG5cdFx0fSApXG5cdCk7XG5cblx0cmV0dXJuIGFuaW1hdGlvbjtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXJzOiB7XG5cdFx0XCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdGFkanVzdENTUyggdHdlZW4uZWxlbSwgcHJvcCwgcmNzc051bS5leGVjKCB2YWx1ZSApLCB0d2VlbiApO1xuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH0gXVxuXHR9LFxuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0Y2FsbGJhY2sgPSBwcm9wcztcblx0XHRcdHByb3BzID0gWyBcIipcIiBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcm9wcyA9IHByb3BzLm1hdGNoKCBybm90aHRtbHdoaXRlICk7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gPSBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9LFxuXG5cdHByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXG5cdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG5cdFx0XHRpc0Z1bmN0aW9uKCBzcGVlZCApICYmIHNwZWVkLFxuXHRcdGR1cmF0aW9uOiBzcGVlZCxcblx0XHRlYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdC8vIEdvIHRvIHRoZSBlbmQgc3RhdGUgaWYgZnggYXJlIG9mZlxuXHRpZiAoIGpRdWVyeS5meC5vZmYgKSB7XG5cdFx0b3B0LmR1cmF0aW9uID0gMDtcblxuXHR9IGVsc2Uge1xuXHRcdGlmICggdHlwZW9mIG9wdC5kdXJhdGlvbiAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdGlmICggb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgKSB7XG5cdFx0XHRcdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHNbIG9wdC5kdXJhdGlvbiBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIE5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuXHRpZiAoIG9wdC5xdWV1ZSA9PSBudWxsIHx8IG9wdC5xdWV1ZSA9PT0gdHJ1ZSApIHtcblx0XHRvcHQucXVldWUgPSBcImZ4XCI7XG5cdH1cblxuXHQvLyBRdWV1ZWluZ1xuXHRvcHQub2xkID0gb3B0LmNvbXBsZXRlO1xuXG5cdG9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW5XaXRoaW5UcmVlICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG5cdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdC5lbmQoKS5hbmltYXRlKCB7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuXHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cblx0XHRcdFx0Ly8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG5cdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0YW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuXHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuXHRcdHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG5cdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdHN0b3AoIGdvdG9FbmQgKTtcblx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0Y2xlYXJRdWV1ZSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGNsZWFyUXVldWUgKSB7XG5cdFx0XHR0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0aW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArIFwicXVldWVIb29rc1wiLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cblx0XHRcdGlmICggaW5kZXggKSB7XG5cdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdCggdHlwZSA9PSBudWxsIHx8IHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApICkge1xuXG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdGRlcXVldWUgPSBmYWxzZTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHQvLyBUaW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoXG5cdFx0XHQvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuXG5cdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXHRmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICksXG5cdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRob29rcyA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlSG9va3NcIiBdLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cblx0XHRcdC8vIEVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGFcblx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuXHRcdFx0Ly8gRW1wdHkgdGhlIHF1ZXVlIGZpcnN0XG5cdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcblx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBxdWV1ZVsgaW5kZXggXSAmJiBxdWV1ZVsgaW5kZXggXS5maW5pc2ggKSB7XG5cdFx0XHRcdFx0cXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0ZGVsZXRlIGRhdGEuZmluaXNoO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIF9pLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSApO1xuXG4vLyBHZW5lcmF0ZSBzaG9ydGN1dHMgZm9yIGN1c3RvbSBhbmltYXRpb25zXG5qUXVlcnkuZWFjaCgge1xuXHRzbGlkZURvd246IGdlbkZ4KCBcInNob3dcIiApLFxuXHRzbGlkZVVwOiBnZW5GeCggXCJoaWRlXCIgKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KCBcInRvZ2dsZVwiICksXG5cdGZhZGVJbjogeyBvcGFjaXR5OiBcInNob3dcIiB9LFxuXHRmYWRlT3V0OiB7IG9wYWNpdHk6IFwiaGlkZVwiIH0sXG5cdGZhZGVUb2dnbGU6IHsgb3BhY2l0eTogXCJ0b2dnbGVcIiB9XG59LCBmdW5jdGlvbiggbmFtZSwgcHJvcHMgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLmFuaW1hdGUoIHByb3BzLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSApO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IERhdGUubm93KCk7XG5cblx0Zm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuXHRcdHRpbWVyID0gdGltZXJzWyBpIF07XG5cblx0XHQvLyBSdW4gdGhlIHRpbWVyIGFuZCBzYWZlbHkgcmVtb3ZlIGl0IHdoZW4gZG9uZSAoYWxsb3dpbmcgZm9yIGV4dGVybmFsIHJlbW92YWwpXG5cdFx0aWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7XG5cdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoICF0aW1lcnMubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5meC5zdG9wKCk7XG5cdH1cblx0ZnhOb3cgPSB1bmRlZmluZWQ7XG59O1xuXG5qUXVlcnkuZngudGltZXIgPSBmdW5jdGlvbiggdGltZXIgKSB7XG5cdGpRdWVyeS50aW1lcnMucHVzaCggdGltZXIgKTtcblx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG59O1xuXG5qUXVlcnkuZnguaW50ZXJ2YWwgPSAxMztcbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoIGluUHJvZ3Jlc3MgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aW5Qcm9ncmVzcyA9IHRydWU7XG5cdHNjaGVkdWxlKCk7XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRpblByb2dyZXNzID0gbnVsbDtcbn07XG5cbmpRdWVyeS5meC5zcGVlZHMgPSB7XG5cdHNsb3c6IDYwMCxcblx0ZmFzdDogMjAwLFxuXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5L1xualF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7XG5cdHRpbWUgPSBqUXVlcnkuZnggPyBqUXVlcnkuZnguc3BlZWRzWyB0aW1lIF0gfHwgdGltZSA6IHRpbWU7XG5cdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSwgZnVuY3Rpb24oIG5leHQsIGhvb2tzICkge1xuXHRcdHZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcblx0XHRob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSApO1xufTtcblxuXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKSxcblx0XHRzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNlbGVjdFwiICksXG5cdFx0b3B0ID0gc2VsZWN0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9wdGlvblwiICkgKTtcblxuXHRpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjMgb25seVxuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIE11c3QgYWNjZXNzIHNlbGVjdGVkSW5kZXggdG8gbWFrZSBkZWZhdWx0IG9wdGlvbnMgc2VsZWN0XG5cdHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIEFuIGlucHV0IGxvc2VzIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvXG5cdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cdGlucHV0LnZhbHVlID0gXCJ0XCI7XG5cdGlucHV0LnR5cGUgPSBcInJhZGlvXCI7XG5cdHN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSBcInRcIjtcbn0gKSgpO1xuXG5cbnZhciBib29sSG9vayxcblx0YXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBhdHRyaWJ1dGVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTtcblx0XHR9XG5cblx0XHQvLyBBdHRyaWJ1dGUgaG9va3MgYXJlIGRldGVybWluZWQgYnkgdGhlIGxvd2VyY2FzZSB2ZXJzaW9uXG5cdFx0Ly8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZFxuXHRcdGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXHRcdFx0aG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiB1bmRlZmluZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArIFwiXCIgKTtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cblx0XHRyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdHJldHVybiByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDtcblx0fSxcblxuXHRhdHRySG9va3M6IHtcblx0XHR0eXBlOiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSBcInJhZGlvXCIgJiZcblx0XHRcdFx0XHRub2RlTmFtZSggZWxlbSwgXCJpbnB1dFwiICkgKSB7XG5cdFx0XHRcdFx0dmFyIHZhbCA9IGVsZW0udmFsdWU7XG5cdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuXHRcdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdFx0ZWxlbS52YWx1ZSA9IHZhbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHR2YXIgbmFtZSxcblx0XHRcdGkgPSAwLFxuXG5cdFx0XHQvLyBBdHRyaWJ1dGUgbmFtZXMgY2FuIGNvbnRhaW4gbm9uLUhUTUwgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzXG5cdFx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcblx0XHRcdGF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBuYW1lICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIEhvb2tzIGZvciBib29sZWFuIGF0dHJpYnV0ZXNcbmJvb2xIb29rID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcblx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblxuXHRcdFx0Ly8gUmVtb3ZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aGVuIHNldCB0byBmYWxzZVxuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cbn07XG5cbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggX2ksIG5hbWUgKSB7XG5cdHZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjtcblxuXHRhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHJldCwgaGFuZGxlLFxuXHRcdFx0bG93ZXJjYXNlTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHRcdGlmICggIWlzWE1MICkge1xuXG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdGxvd2VyY2FzZU5hbWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gaGFuZGxlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xufSApO1xuXG5cblxuXG52YXIgcmZvY3VzYWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJjbGlja2FibGUgPSAvXig/OmF8YXJlYSkkL2k7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRlbGV0ZSB0aGlzWyBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUgXTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1bIG5hbWUgXTtcblx0fSxcblxuXHRwcm9wSG9va3M6IHtcblx0XHR0YWJJbmRleDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdFx0XHRcdC8vIGVsZW0udGFiSW5kZXggZG9lc24ndCBhbHdheXMgcmV0dXJuIHRoZVxuXHRcdFx0XHQvLyBjb3JyZWN0IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXRcblx0XHRcdFx0Ly8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTQxMTE2MjMzMzQ3L2h0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvXG5cdFx0XHRcdC8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpXG5cdFx0XHRcdHZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidGFiaW5kZXhcIiApO1xuXG5cdFx0XHRcdGlmICggdGFiaW5kZXggKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KCB0YWJpbmRleCwgMTAgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fFxuXHRcdFx0XHRcdHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmXG5cdFx0XHRcdFx0ZWxlbS5ocmVmXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRwcm9wRml4OiB7XG5cdFx0XCJmb3JcIjogXCJodG1sRm9yXCIsXG5cdFx0XCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG5cdH1cbn0gKTtcblxuLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG4vLyBBY2Nlc3NpbmcgdGhlIHNlbGVjdGVkSW5kZXggcHJvcGVydHlcbi8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWRcbi8vIG9uIHRoZSBvcHRpb25cbi8vIFRoZSBnZXR0ZXIgZW5zdXJlcyBhIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkXG4vLyB3aGVuIGluIGFuIG9wdGdyb3VwXG4vLyBlc2xpbnQgcnVsZSBcIm5vLXVudXNlZC1leHByZXNzaW9uc1wiIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvZGVcbi8vIHNpbmNlIGl0IGNvbnNpZGVycyBzdWNoIGFjY2Vzc2lvbnMgbm9vcFxuaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcblx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHQvKiBlc2xpbnQgbm8tdW51c2VkLWV4cHJlc3Npb25zOiBcIm9mZlwiICovXG5cblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoIHBhcmVudCAmJiBwYXJlbnQucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogXCJvZmZcIiAqL1xuXG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdHBhcmVudC5zZWxlY3RlZEluZGV4O1xuXG5cdFx0XHRcdGlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxualF1ZXJ5LmVhY2goIFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59ICk7XG5cblxuXG5cblx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2UgYWNjb3JkaW5nIHRvIEhUTUwgc3BlY1xuXHQvLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLWFzY2lpLXdoaXRlc3BhY2Vcblx0ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSggdmFsdWUgKSB7XG5cdFx0dmFyIHRva2VucyA9IHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cdFx0cmV0dXJuIHRva2Vucy5qb2luKCBcIiBcIiApO1xuXHR9XG5cblxuZnVuY3Rpb24gZ2V0Q2xhc3MoIGVsZW0gKSB7XG5cdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggXCJjbGFzc1wiICkgfHwgXCJcIjtcbn1cblxuZnVuY3Rpb24gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICkge1xuXHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXHR9XG5cdHJldHVybiBbXTtcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRjbGFzc2VzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIGNsYXNzZXMubGVuZ3RoICkge1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGN1clZhbHVlICkgKyBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciArPSBjbGF6eiArIFwiIFwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB0aGlzLmF0dHIoIFwiY2xhc3NcIiwgXCJcIiApO1xuXHRcdH1cblxuXHRcdGNsYXNzZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdGlmICggY2xhc3Nlcy5sZW5ndGggKSB7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTtcblxuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBjdXJWYWx1ZSApICsgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzXG5cdFx0XHRcdFx0XHR3aGlsZSAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgPSBjdXIucmVwbGFjZSggXCIgXCIgKyBjbGF6eiArIFwiIFwiLCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0dmFyIHR5cGUgPSB0eXBlb2YgdmFsdWUsXG5cdFx0XHRpc1ZhbGlkVmFsdWUgPSB0eXBlID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgaXNWYWxpZFZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKFxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIHRoaXMsIGksIGdldENsYXNzKCB0aGlzICksIHN0YXRlVmFsICksXG5cdFx0XHRcdFx0c3RhdGVWYWxcblx0XHRcdFx0KTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjbGFzc05hbWUsIGksIHNlbGYsIGNsYXNzTmFtZXM7XG5cblx0XHRcdGlmICggaXNWYWxpZFZhbHVlICkge1xuXG5cdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICk7XG5cdFx0XHRcdGNsYXNzTmFtZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdFx0XHR3aGlsZSAoICggY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0gKSApIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRcdGlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG5cdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRjbGFzc05hbWUgPSBnZXRDbGFzcyggdGhpcyApO1xuXHRcdFx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdC8vIFN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0aWYgKCB0aGlzLnNldEF0dHJpYnV0ZSApIHtcblx0XHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRcdFx0XHRcIlwiIDpcblx0XHRcdFx0XHRcdGRhdGFQcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRoYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBjbGFzc05hbWUsIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIjtcblx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0KCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGdldENsYXNzKCBlbGVtICkgKSArIFwiIFwiICkuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIHJyZXR1cm4gPSAvXFxyL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIHZhbHVlSXNGdW5jdGlvbixcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF07XG5cblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgZWxlbS50eXBlIF0gfHxcblx0XHRcdFx0XHRqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiZcblx0XHRcdFx0XHRcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIFwidmFsdWVcIiApICkgIT09IHVuZGVmaW5lZFxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzXG5cdFx0XHRcdGlmICggdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0LnJlcGxhY2UoIHJyZXR1cm4sIFwiXCIgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRyZXR1cm4gcmV0ID09IG51bGwgPyBcIlwiIDogcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFsdWVJc0Z1bmN0aW9uID0gaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdmFsdWVJc0Z1bmN0aW9uICkge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZS5jYWxsKCB0aGlzLCBpLCBqUXVlcnkoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFsID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHZhbCA9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBBcnJheS5pc0FycmF5KCB2YWwgKSApIHtcblx0XHRcdFx0dmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyB0aGlzLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHQvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZ1xuXHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCBcInZhbHVlXCIgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHR0aGlzLnZhbHVlID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdHZhbEhvb2tzOiB7XG5cdFx0b3B0aW9uOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExIG9ubHlcblx0XHRcdFx0XHQvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpXG5cdFx0XHRcdFx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2Vcblx0XHRcdFx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNzdHJpcC1hbmQtY29sbGFwc2Utd2hpdGVzcGFjZVxuXHRcdFx0XHRcdHN0cmlwQW5kQ29sbGFwc2UoIGpRdWVyeS50ZXh0KCBlbGVtICkgKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNlbGVjdDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHZhbHVlLCBvcHRpb24sIGksXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHRpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCxcblx0XHRcdFx0XHRvbmUgPSBlbGVtLnR5cGUgPT09IFwic2VsZWN0LW9uZVwiLFxuXHRcdFx0XHRcdHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcblx0XHRcdFx0XHRtYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHRpZiAoIGluZGV4IDwgMCApIHtcblx0XHRcdFx0XHRpID0gbWF4O1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aSA9IG9uZSA/IGluZGV4IDogMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIHNlbGVjdGVkIG9wdGlvbnNcblx0XHRcdFx0Zm9yICggOyBpIDwgbWF4OyBpKysgKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHQvLyBJRTgtOSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcblx0XHRcdFx0XHRpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcblxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCFvcHRpb24uZGlzYWJsZWQgJiZcblx0XHRcdFx0XHRcdFx0KCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHxcblx0XHRcdFx0XHRcdFx0XHQhbm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cblx0XHRcdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXG5cdFx0XHRcdFx0aWYgKCBvcHRpb24uc2VsZWN0ZWQgPVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPiAtMVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uU2V0ID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldFxuXHRcdFx0XHRpZiAoICFvcHRpb25TZXQgKSB7XG5cdFx0XHRcdFx0ZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXJcbmpRdWVyeS5lYWNoKCBbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdGlmICggIXN1cHBvcnQuY2hlY2tPbiApIHtcblx0XHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXG5cbnN1cHBvcnQuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXG5cbnZhciByZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0c3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiggZSApIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9O1xuXG5qUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZXZlbnQsIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcblxuXHRcdHZhciBpLCBjdXIsIHRtcCwgYnViYmxlVHlwZSwgb250eXBlLCBoYW5kbGUsIHNwZWNpYWwsIGxhc3RFbGVtZW50LFxuXHRcdFx0ZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG5cdFx0XHR0eXBlID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcInR5cGVcIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LFxuXHRcdFx0bmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KCBcIi5cIiApIDogW107XG5cblx0XHRjdXIgPSBsYXN0RWxlbWVudCA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoIFwiLlwiICkgPiAtMSApIHtcblxuXHRcdFx0Ly8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKVxuXHRcdFx0bmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoIFwiLlwiICk7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZiggXCI6XCIgKSA8IDAgJiYgXCJvblwiICsgdHlwZTtcblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZ1xuXHRcdGV2ZW50ID0gZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0ZXZlbnQgOlxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSBcIm9iamVjdFwiICYmIGV2ZW50ICk7XG5cblx0XHQvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpXG5cdFx0ZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG5cdFx0ZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApO1xuXHRcdGV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgP1xuXHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICkgOlxuXHRcdFx0bnVsbDtcblxuXHRcdC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuXHRcdGV2ZW50LnJlc3VsdCA9IHVuZGVmaW5lZDtcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBlbGVtO1xuXHRcdH1cblxuXHRcdC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3Rcblx0XHRkYXRhID0gZGF0YSA9PSBudWxsID9cblx0XHRcdFsgZXZlbnQgXSA6XG5cdFx0XHRqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTtcblxuXHRcdC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcblx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcblx0XHQvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KVxuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhc3BlY2lhbC5ub0J1YmJsZSAmJiAhaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIGN1ciA9IGV2ZW50UGF0aFsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGxhc3RFbGVtZW50ID0gY3VyO1xuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9IChcblx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIGN1ciwgXCJldmVudHNcIiApIHx8IE9iamVjdC5jcmVhdGUoIG51bGwgKVxuXHRcdFx0XHQpWyBldmVudC50eXBlIF0gJiZcblx0XHRcdFx0ZGF0YVByaXYuZ2V0KCBjdXIsIFwiaGFuZGxlXCIgKTtcblx0XHRcdGlmICggaGFuZGxlICkge1xuXHRcdFx0XHRoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOYXRpdmUgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG5cdFx0XHRpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCAhc3BlY2lhbC5fZGVmYXVsdCB8fFxuXHRcdFx0XHRzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UgKSAmJlxuXHRcdFx0XHRhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cblx0XHRcdFx0Ly8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBldmVudC5cblx0XHRcdFx0Ly8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKVxuXHRcdFx0XHRpZiAoIG9udHlwZSAmJiBpc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cblx0XHRcdFx0XHRpZiAoIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRcdFx0XHRsYXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBzdG9wUHJvcGFnYXRpb25DYWxsYmFjayApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW1bIHR5cGUgXSgpO1xuXG5cdFx0XHRcdFx0aWYgKCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0XHRcdFx0bGFzdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IHRtcDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZVxuXHQvLyBVc2VkIG9ubHkgZm9yIGBmb2N1cyhpbiB8IG91dClgIGV2ZW50c1xuXHRzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkge1xuXHRcdHZhciBlID0galF1ZXJ5LmV4dGVuZChcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoKSxcblx0XHRcdGV2ZW50LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRpc1NpbXVsYXRlZDogdHJ1ZVxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHR9XG5cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcblx0XHR9ICk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXTtcblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxuXG4vLyBTdXBwb3J0OiBGaXJlZm94IDw9NDRcbi8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHNcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3XG4vL1xuLy8gU3VwcG9ydDogQ2hyb21lIDw9NDggLSA0OSwgU2FmYXJpIDw9OS4wIC0gOS4xXG4vLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cyxcbi8vIHdoaWNoIGlzIHNwZWMgdmlvbGF0aW9uIC0gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudHMtZm9jdXNldmVudC1ldmVudC1vcmRlclxuLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTdcbmlmICggIXN1cHBvcnQuZm9jdXNpbiApIHtcblx0alF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblxuXHRcdC8vIEF0dGFjaCBhIHNpbmdsZSBjYXB0dXJpbmcgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQgd2hpbGUgc29tZW9uZSB3YW50cyBmb2N1c2luL2ZvY3Vzb3V0XG5cdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApICk7XG5cdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBIYW5kbGU6IHJlZ3VsYXIgbm9kZXMgKHZpYSBgdGhpcy5vd25lckRvY3VtZW50YCksIHdpbmRvd1xuXHRcdFx0XHQvLyAodmlhIGB0aGlzLmRvY3VtZW50YCkgJiBkb2N1bWVudCAodmlhIGB0aGlzYCkuXG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcy5kb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG5cdFx0XHR9LFxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMuZG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKSAtIDE7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSApO1xufVxudmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuXG52YXIgbm9uY2UgPSB7IGd1aWQ6IERhdGUubm93KCkgfTtcblxudmFyIHJxdWVyeSA9ICggL1xcPy8gKTtcblxuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sO1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHlcblx0Ly8gSUUgdGhyb3dzIG9uIHBhcnNlRnJvbVN0cmluZyB3aXRoIGludmFsaWQgaW5wdXQuXG5cdHRyeSB7XG5cdFx0eG1sID0gKCBuZXcgd2luZG93LkRPTVBhcnNlcigpICkucGFyc2VGcm9tU3RyaW5nKCBkYXRhLCBcInRleHQveG1sXCIgKTtcblx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0eG1sID0gdW5kZWZpbmVkO1xuXHR9XG5cblx0aWYgKCAheG1sIHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJwYXJzZXJlcnJvclwiICkubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5lcnJvciggXCJJbnZhbGlkIFhNTDogXCIgKyBkYXRhICk7XG5cdH1cblx0cmV0dXJuIHhtbDtcbn07XG5cblxudmFyXG5cdHJicmFja2V0ID0gL1xcW1xcXSQvLFxuXHRyQ1JMRiA9IC9cXHI/XFxuL2csXG5cdHJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxcblx0cnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO1xuXG5mdW5jdGlvbiBidWlsZFBhcmFtcyggcHJlZml4LCBvYmosIHRyYWRpdGlvbmFsLCBhZGQgKSB7XG5cdHZhciBuYW1lO1xuXG5cdGlmICggQXJyYXkuaXNBcnJheSggb2JqICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cblx0XHRcdFx0Ly8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLlxuXHRcdFx0XHRhZGQoIHByZWZpeCwgdiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LlxuXHRcdFx0XHRidWlsZFBhcmFtcyhcblx0XHRcdFx0XHRwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPSBudWxsID8gaSA6IFwiXCIgKSArIFwiXVwiLFxuXHRcdFx0XHRcdHYsXG5cdFx0XHRcdFx0dHJhZGl0aW9uYWwsXG5cdFx0XHRcdFx0YWRkXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdH0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiB0b1R5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIG9iamVjdCBpdGVtLlxuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgbmFtZSArIFwiXVwiLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHNjYWxhciBpdGVtLlxuXHRcdGFkZCggcHJlZml4LCBvYmogKTtcblx0fVxufVxuXG4vLyBTZXJpYWxpemUgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cyBvciBhIHNldCBvZlxuLy8ga2V5L3ZhbHVlcyBpbnRvIGEgcXVlcnkgc3RyaW5nXG5qUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7XG5cdHZhciBwcmVmaXgsXG5cdFx0cyA9IFtdLFxuXHRcdGFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlT3JGdW5jdGlvbiApIHtcblxuXHRcdFx0Ly8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCB1c2UgaXRzIHJldHVybiB2YWx1ZVxuXHRcdFx0dmFyIHZhbHVlID0gaXNGdW5jdGlvbiggdmFsdWVPckZ1bmN0aW9uICkgP1xuXHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb24oKSA6XG5cdFx0XHRcdHZhbHVlT3JGdW5jdGlvbjtcblxuXHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSApO1xuXHRcdH07XG5cblx0aWYgKCBhID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRpZiAoIEFycmF5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0gKTtcblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSApXG5cdFx0LmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdHlwZSA9IHRoaXMudHlwZTtcblxuXHRcdFx0Ly8gVXNlIC5pcyggXCI6ZGlzYWJsZWRcIiApIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzXG5cdFx0XHRyZXR1cm4gdGhpcy5uYW1lICYmICFqUXVlcnkoIHRoaXMgKS5pcyggXCI6ZGlzYWJsZWRcIiApICYmXG5cdFx0XHRcdHJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiZcblx0XHRcdFx0KCB0aGlzLmNoZWNrZWQgfHwgIXJjaGVja2FibGVUeXBlLnRlc3QoIHR5cGUgKSApO1xuXHRcdH0gKVxuXHRcdC5tYXAoIGZ1bmN0aW9uKCBfaSwgZWxlbSApIHtcblx0XHRcdHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdH0gKS5nZXQoKTtcblx0fVxufSApO1xuXG5cbnZhclxuXHRyMjAgPSAvJTIwL2csXG5cdHJoYXNoID0gLyMuKiQvLFxuXHRyYW50aUNhY2hlID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cblx0Ly8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uXG5cdHJsb2NhbFByb3RvY29sID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sXG5cdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRycHJvdG9jb2wgPSAvXlxcL1xcLy8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBBbmNob3IgdGFnIGZvciBwYXJzaW5nIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b3JpZ2luQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblx0b3JpZ2luQW5jaG9yLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggZnVuYyApICkge1xuXG5cdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHR3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0aWYgKCBkYXRhVHlwZVsgMCBdID09PSBcIitcIiApIHtcblx0XHRcdFx0XHRkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgXCIqXCI7XG5cdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG4vLyBCYXNlIGluc3BlY3Rpb24gZnVuY3Rpb24gZm9yIHByZWZpbHRlcnMgYW5kIHRyYW5zcG9ydHNcbmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cblx0dmFyIGluc3BlY3RlZCA9IHt9LFxuXHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXG5cdGZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkge1xuXHRcdHZhciBzZWxlY3RlZDtcblx0XHRpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlO1xuXHRcdGpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7XG5cdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVPclRyYW5zcG9ydCA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQhc2Vla2luZ1RyYW5zcG9ydCAmJiAhaW5zcGVjdGVkWyBkYXRhVHlwZU9yVHJhbnNwb3J0IF0gKSB7XG5cblx0XHRcdFx0b3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRpbnNwZWN0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG5cdFx0XHRcdHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0cmV0dXJuIHNlbGVjdGVkO1xuXHR9XG5cblx0cmV0dXJuIGluc3BlY3QoIG9wdGlvbnMuZGF0YVR5cGVzWyAwIF0gKSB8fCAhaW5zcGVjdGVkWyBcIipcIiBdICYmIGluc3BlY3QoIFwiKlwiICk7XG59XG5cbi8vIEEgc3BlY2lhbCBleHRlbmQgZm9yIGFqYXggb3B0aW9uc1xuLy8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcbi8vIEZpeGVzICM5ODg3XG5mdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHtcblx0dmFyIGtleSwgZGVlcCxcblx0XHRmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307XG5cblx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdCggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8ICggZGVlcCA9IHt9ICkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG5cdFx0fVxuXHR9XG5cdGlmICggZGVlcCApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXQ7XG59XG5cbi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAqIC0gZmluZHMgdGhlIHJpZ2h0IGRhdGFUeXBlIChtZWRpYXRlcyBiZXR3ZWVuIGNvbnRlbnQtdHlwZSBhbmQgZXhwZWN0ZWQgZGF0YVR5cGUpXG4gKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApIHtcblxuXHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0Y29udGVudHMgPSBzLmNvbnRlbnRzLFxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzO1xuXG5cdC8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzXG5cdHdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09IFwiKlwiICkge1xuXHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdGlmICggY3QgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJDb250ZW50LVR5cGVcIiApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdGZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0aWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbIDAgXSBdICkge1xuXHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRmaXJzdERhdGFUeXBlID0gdHlwZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblxuXHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpO1xuXG5cdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRpZiAoIGRhdGFUeXBlc1sgMSBdICkge1xuXHRcdGZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkge1xuXHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHR9XG5cdH1cblxuXHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0d2hpbGUgKCBjdXJyZW50ICkge1xuXG5cdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZFxuXHRcdGlmICggIXByZXYgJiYgaXNTdWNjZXNzICYmIHMuZGF0YUZpbHRlciApIHtcblx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdH1cblxuXHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHRcdGlmICggY3VycmVudCApIHtcblxuXHRcdFx0Ly8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0b1xuXHRcdFx0aWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblxuXHRcdFx0XHRjdXJyZW50ID0gcHJldjtcblxuXHRcdFx0Ly8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudFxuXHRcdFx0fSBlbHNlIGlmICggcHJldiAhPT0gXCIqXCIgJiYgcHJldiAhPT0gY3VycmVudCApIHtcblxuXHRcdFx0XHQvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuXHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbIFwiKiBcIiArIGN1cnJlbnQgXTtcblxuXHRcdFx0XHQvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuXHRcdFx0XHRpZiAoICFjb252ICkge1xuXHRcdFx0XHRcdGZvciAoIGNvbnYyIGluIGNvbnZlcnRlcnMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudFxuXHRcdFx0XHRcdFx0dG1wID0gY29udjIuc3BsaXQoIFwiIFwiICk7XG5cdFx0XHRcdFx0XHRpZiAoIHRtcFsgMSBdID09PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dFxuXHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgdG1wWyAwIF0gXSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnZlcnRlcnNbIFwiKiBcIiArIHRtcFsgMCBdIF07XG5cdFx0XHRcdFx0XHRcdGlmICggY29udiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgcy50aHJvd3MgKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXRlOiBcInBhcnNlcmVycm9yXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzXG5cdGFjdGl2ZTogMCxcblxuXHQvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0XG5cdGxhc3RNb2RpZmllZDoge30sXG5cdGV0YWc6IHt9LFxuXG5cdGFqYXhTZXR0aW5nczoge1xuXHRcdHVybDogbG9jYXRpb24uaHJlZixcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGxvY2F0aW9uLnByb3RvY29sICksXG5cdFx0Z2xvYmFsOiB0cnVlLFxuXHRcdHByb2Nlc3NEYXRhOiB0cnVlLFxuXHRcdGFzeW5jOiB0cnVlLFxuXHRcdGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLFxuXG5cdFx0Lypcblx0XHR0aW1lb3V0OiAwLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0ZGF0YVR5cGU6IG51bGwsXG5cdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0cGFzc3dvcmQ6IG51bGwsXG5cdFx0Y2FjaGU6IG51bGwsXG5cdFx0dGhyb3dzOiBmYWxzZSxcblx0XHR0cmFkaXRpb25hbDogZmFsc2UsXG5cdFx0aGVhZGVyczoge30sXG5cdFx0Ki9cblxuXHRcdGFjY2VwdHM6IHtcblx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdHRleHQ6IFwidGV4dC9wbGFpblwiLFxuXHRcdFx0aHRtbDogXCJ0ZXh0L2h0bWxcIixcblx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiXG5cdFx0fSxcblxuXHRcdGNvbnRlbnRzOiB7XG5cdFx0XHR4bWw6IC9cXGJ4bWxcXGIvLFxuXHRcdFx0aHRtbDogL1xcYmh0bWwvLFxuXHRcdFx0anNvbjogL1xcYmpzb25cXGIvXG5cdFx0fSxcblxuXHRcdHJlc3BvbnNlRmllbGRzOiB7XG5cdFx0XHR4bWw6IFwicmVzcG9uc2VYTUxcIixcblx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRqc29uOiBcInJlc3BvbnNlSlNPTlwiXG5cdFx0fSxcblxuXHRcdC8vIERhdGEgY29udmVydGVyc1xuXHRcdC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2Vcblx0XHRjb252ZXJ0ZXJzOiB7XG5cblx0XHRcdC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuXHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXG5cdFx0XHQvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbilcblx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cblx0XHRcdC8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb25cblx0XHRcdFwidGV4dCBqc29uXCI6IEpTT04ucGFyc2UsXG5cblx0XHRcdC8vIFBhcnNlIHRleHQgYXMgeG1sXG5cdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdH0sXG5cblx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdC8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWZcblx0XHQvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuXHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdGZsYXRPcHRpb25zOiB7XG5cdFx0XHR1cmw6IHRydWUsXG5cdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0fVxuXHR9LFxuXG5cdC8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0XG5cdC8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy5cblx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0YWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHtcblx0XHRyZXR1cm4gc2V0dGluZ3MgP1xuXG5cdFx0XHQvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdFxuXHRcdFx0YWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG5cdFx0XHQvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzXG5cdFx0XHRhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTtcblx0fSxcblxuXHRhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSxcblx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cblx0Ly8gTWFpbiBtZXRob2Rcblx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblxuXHRcdC8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlXG5cdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0b3B0aW9ucyA9IHVybDtcblx0XHRcdHVybCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0dmFyIHRyYW5zcG9ydCxcblxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cblx0XHRcdC8vIFJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyxcblx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblxuXHRcdFx0Ly8gdGltZW91dCBoYW5kbGVcblx0XHRcdHRpbWVvdXRUaW1lcixcblxuXHRcdFx0Ly8gVXJsIGNsZWFudXAgdmFyXG5cdFx0XHR1cmxBbmNob3IsXG5cblx0XHRcdC8vIFJlcXVlc3Qgc3RhdGUgKGJlY29tZXMgZmFsc2UgdXBvbiBzZW5kIGFuZCB0cnVlIHVwb24gY29tcGxldGlvbilcblx0XHRcdGNvbXBsZXRlZCxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG5cdFx0XHRmaXJlR2xvYmFscyxcblxuXHRcdFx0Ly8gTG9vcCB2YXJpYWJsZVxuXHRcdFx0aSxcblxuXHRcdFx0Ly8gdW5jYWNoZWQgcGFydCBvZiB0aGUgdXJsXG5cdFx0XHR1bmNhY2hlZCxcblxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cblx0XHRcdC8vIENhbGxiYWNrcyBjb250ZXh0XG5cdFx0XHRjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcblxuXHRcdFx0Ly8gQ29udGV4dCBmb3IgZ2xvYmFsIGV2ZW50cyBpcyBjYWxsYmFja0NvbnRleHQgaWYgaXQgaXMgYSBET00gbm9kZSBvciBqUXVlcnkgY29sbGVjdGlvblxuXHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0ID0gcy5jb250ZXh0ICYmXG5cdFx0XHRcdCggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LFxuXG5cdFx0XHQvLyBEZWZlcnJlZHNcblx0XHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkID0galF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LFxuXG5cdFx0XHQvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKVxuXHRcdFx0cmVxdWVzdEhlYWRlcnMgPSB7fSxcblx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXMgPSB7fSxcblxuXHRcdFx0Ly8gRGVmYXVsdCBhYm9ydCBtZXNzYWdlXG5cdFx0XHRzdHJBYm9ydCA9IFwiY2FuY2VsZWRcIixcblxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAoIG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSArIFwiIFwiIF0gPVxuXHRcdFx0XHRcdFx0XHRcdFx0KCByZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSArIFwiIFwiIF0gfHwgW10gKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuY29uY2F0KCBtYXRjaFsgMiBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSArIFwiIFwiIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXRjaCA9PSBudWxsID8gbnVsbCA6IG1hdGNoLmpvaW4oIFwiLCBcIiApO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFJhdyBzdHJpbmdcblx0XHRcdFx0Z2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29tcGxldGVkID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdG5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSA9XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXNbIG5hbWUudG9Mb3dlckNhc2UoKSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRzLm1pbWVUeXBlID0gdHlwZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0c3RhdHVzQ29kZTogZnVuY3Rpb24oIG1hcCApIHtcblx0XHRcdFx0XHR2YXIgY29kZTtcblx0XHRcdFx0XHRpZiAoIG1hcCApIHtcblx0XHRcdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrc1xuXHRcdFx0XHRcdFx0XHRqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFja3MgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXNcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSByZXF1ZXN0XG5cdFx0XHRcdGFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHR2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDtcblx0XHRcdFx0XHRpZiAoIHRyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5hYm9ydCggZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRvbmUoIDAsIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0Ly8gQXR0YWNoIGRlZmVycmVkc1xuXHRcdGRlZmVycmVkLnByb21pc2UoIGpxWEhSICk7XG5cblx0XHQvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkIChwcmVmaWx0ZXJzIG1pZ2h0IGV4cGVjdCBpdClcblx0XHQvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuXHRcdC8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxuXHRcdHMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBsb2NhdGlvbi5ocmVmICkgKyBcIlwiIClcblx0XHRcdC5yZXBsYWNlKCBycHJvdG9jb2wsIGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICk7XG5cblx0XHQvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDRcblx0XHRzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlO1xuXG5cdFx0Ly8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuXHRcdHMuZGF0YVR5cGVzID0gKCBzLmRhdGFUeXBlIHx8IFwiKlwiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHRoZSBvcmlnaW4gZG9lc24ndCBtYXRjaCB0aGUgY3VycmVudCBvcmlnaW4uXG5cdFx0aWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7XG5cdFx0XHR1cmxBbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggLSAxMSwgRWRnZSAxMiAtIDE1XG5cdFx0XHQvLyBJRSB0aHJvd3MgZXhjZXB0aW9uIG9uIGFjY2Vzc2luZyB0aGUgaHJlZiBwcm9wZXJ0eSBpZiB1cmwgaXMgbWFsZm9ybWVkLFxuXHRcdFx0Ly8gZS5nLiBodHRwOi8vZXhhbXBsZS5jb206ODB4L1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dXJsQW5jaG9yLmhyZWYgPSBzLnVybDtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggLSAxMSBvbmx5XG5cdFx0XHRcdC8vIEFuY2hvcidzIGhvc3QgcHJvcGVydHkgaXNuJ3QgY29ycmVjdGx5IHNldCB3aGVuIHMudXJsIGlzIHJlbGF0aXZlXG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gdXJsQW5jaG9yLmhyZWY7XG5cdFx0XHRcdHMuY3Jvc3NEb21haW4gPSBvcmlnaW5BbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyBvcmlnaW5BbmNob3IuaG9zdCAhPT1cblx0XHRcdFx0XHR1cmxBbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyB1cmxBbmNob3IuaG9zdDtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGFuIGVycm9yIHBhcnNpbmcgdGhlIFVSTCwgYXNzdW1lIGl0IGlzIGNyb3NzRG9tYWluLFxuXHRcdFx0XHQvLyBpdCBjYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIHRyYW5zcG9ydCBpZiBpdCBpcyBpbnZhbGlkXG5cdFx0XHRcdHMuY3Jvc3NEb21haW4gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZ1xuXHRcdGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcHJlZmlsdGVyc1xuXHRcdGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYSBwcmVmaWx0ZXIsIHN0b3AgdGhlcmVcblx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RhcnRcIiApO1xuXHRcdH1cblxuXHRcdC8vIFVwcGVyY2FzZSB0aGUgdHlwZVxuXHRcdHMudHlwZSA9IHMudHlwZS50b1VwcGVyQ2FzZSgpO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIGlmIHJlcXVlc3QgaGFzIGNvbnRlbnRcblx0XHRzLmhhc0NvbnRlbnQgPSAhcm5vQ29udGVudC50ZXN0KCBzLnR5cGUgKTtcblxuXHRcdC8vIFNhdmUgdGhlIFVSTCBpbiBjYXNlIHdlJ3JlIHRveWluZyB3aXRoIHRoZSBJZi1Nb2RpZmllZC1TaW5jZVxuXHRcdC8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvblxuXHRcdC8vIFJlbW92ZSBoYXNoIHRvIHNpbXBsaWZ5IHVybCBtYW5pcHVsYXRpb25cblx0XHRjYWNoZVVSTCA9IHMudXJsLnJlcGxhY2UoIHJoYXNoLCBcIlwiICk7XG5cblx0XHQvLyBNb3JlIG9wdGlvbnMgaGFuZGxpbmcgZm9yIHJlcXVlc3RzIHdpdGggbm8gY29udGVudFxuXHRcdGlmICggIXMuaGFzQ29udGVudCApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIGhhc2ggc28gd2UgY2FuIHB1dCBpdCBiYWNrXG5cdFx0XHR1bmNhY2hlZCA9IHMudXJsLnNsaWNlKCBjYWNoZVVSTC5sZW5ndGggKTtcblxuXHRcdFx0Ly8gSWYgZGF0YSBpcyBhdmFpbGFibGUgYW5kIHNob3VsZCBiZSBwcm9jZXNzZWQsIGFwcGVuZCBkYXRhIHRvIHVybFxuXHRcdFx0aWYgKCBzLmRhdGEgJiYgKCBzLnByb2Nlc3NEYXRhIHx8IHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgKSApIHtcblx0XHRcdFx0Y2FjaGVVUkwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YTtcblxuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvciB1cGRhdGUgYW50aS1jYWNoZSBwYXJhbSBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdGNhY2hlVVJMID0gY2FjaGVVUkwucmVwbGFjZSggcmFudGlDYWNoZSwgXCIkMVwiICk7XG5cdFx0XHRcdHVuY2FjaGVkID0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIFwiXz1cIiArICggbm9uY2UuZ3VpZCsrICkgK1xuXHRcdFx0XHRcdHVuY2FjaGVkO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQdXQgaGFzaCBhbmQgYW50aS1jYWNoZSBvbiB0aGUgVVJMIHRoYXQgd2lsbCBiZSByZXF1ZXN0ZWQgKGdoLTE3MzIpXG5cdFx0XHRzLnVybCA9IGNhY2hlVVJMICsgdW5jYWNoZWQ7XG5cblx0XHQvLyBDaGFuZ2UgJyUyMCcgdG8gJysnIGlmIHRoaXMgaXMgZW5jb2RlZCBmb3JtIGJvZHkgY29udGVudCAoZ2gtMjY1OClcblx0XHR9IGVsc2UgaWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJlxuXHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKS5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgKSB7XG5cdFx0XHRzLmRhdGEgPSBzLmRhdGEucmVwbGFjZSggcjIwLCBcIitcIiApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICtcblx0XHRcdFx0XHQoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0KCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBjb21wbGV0ZWQgKSApIHtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG5cdFx0XHRyZXR1cm4ganFYSFIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHQvLyBBYm9ydGluZyBpcyBubyBsb25nZXIgYSBjYW5jZWxsYXRpb25cblx0XHRzdHJBYm9ydCA9IFwiYWJvcnRcIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkc1xuXHRcdGNvbXBsZXRlRGVmZXJyZWQuYWRkKCBzLmNvbXBsZXRlICk7XG5cdFx0anFYSFIuZG9uZSggcy5zdWNjZXNzICk7XG5cdFx0anFYSFIuZmFpbCggcy5lcnJvciApO1xuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmVcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0anFYSFIuYWJvcnQoIFwidGltZW91dFwiICk7XG5cdFx0XHRcdH0sIHMudGltZW91dCApO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBSZXRocm93IHBvc3QtY29tcGxldGlvbiBleGNlcHRpb25zXG5cdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQcm9wYWdhdGUgb3RoZXJzIGFzIHJlc3VsdHNcblx0XHRcdFx0ZG9uZSggLTEsIGUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmVcblx0XHRmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHtcblx0XHRcdHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG5cdFx0XHRcdHN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0O1xuXG5cdFx0XHQvLyBJZ25vcmUgcmVwZWF0IGludm9jYXRpb25zXG5cdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb21wbGV0ZWQgPSB0cnVlO1xuXG5cdFx0XHQvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0c1xuXHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0Ly8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZClcblx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTZXQgcmVhZHlTdGF0ZVxuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWxcblx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXG5cdFx0XHQvLyBHZXQgcmVzcG9uc2UgZGF0YVxuXHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBVc2UgYSBub29wIGNvbnZlcnRlciBmb3IgbWlzc2luZyBzY3JpcHRcblx0XHRcdGlmICggIWlzU3VjY2VzcyAmJiBqUXVlcnkuaW5BcnJheSggXCJzY3JpcHRcIiwgcy5kYXRhVHlwZXMgKSA+IC0xICkge1xuXHRcdFx0XHRzLmNvbnZlcnRlcnNbIFwidGV4dCBzY3JpcHRcIiBdID0gZnVuY3Rpb24oKSB7fTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiTGFzdC1Nb2RpZmllZFwiICk7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJldGFnXCIgKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpZiBubyBjb250ZW50XG5cdFx0XHRcdGlmICggc3RhdHVzID09PSAyMDQgfHwgcy50eXBlID09PSBcIkhFQURcIiApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub2NvbnRlbnRcIjtcblxuXHRcdFx0XHQvLyBpZiBub3QgbW9kaWZpZWRcblx0XHRcdFx0fSBlbHNlIGlmICggc3RhdHVzID09PSAzMDQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm90bW9kaWZpZWRcIjtcblxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdGU7XG5cdFx0XHRcdFx0c3VjY2VzcyA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0ZXJyb3IgPSByZXNwb25zZS5lcnJvcjtcblx0XHRcdFx0XHRpc1N1Y2Nlc3MgPSAhZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXG5cdFx0XHRcdC8vIEhhbmRsZSB0aGUgZ2xvYmFsIEFKQVggY291bnRlclxuXHRcdFx0XHRpZiAoICEoIC0talF1ZXJ5LmFjdGl2ZSApICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdG9wXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBqcVhIUjtcblx0fSxcblxuXHRnZXRKU09OOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgXCJqc29uXCIgKTtcblx0fSxcblxuXHRnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIHVuZGVmaW5lZCwgY2FsbGJhY2ssIFwic2NyaXB0XCIgKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcImdldFwiLCBcInBvc3RcIiBdLCBmdW5jdGlvbiggX2ksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXG5cdFx0Ly8gU2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcblx0XHRpZiAoIGlzRnVuY3Rpb24oIGRhdGEgKSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrO1xuXHRcdFx0Y2FsbGJhY2sgPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBUaGUgdXJsIGNhbiBiZSBhbiBvcHRpb25zIG9iamVjdCAod2hpY2ggdGhlbiBtdXN0IGhhdmUgLnVybClcblx0XHRyZXR1cm4galF1ZXJ5LmFqYXgoIGpRdWVyeS5leHRlbmQoIHtcblx0XHRcdHVybDogdXJsLFxuXHRcdFx0dHlwZTogbWV0aG9kLFxuXHRcdFx0ZGF0YVR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0c3VjY2VzczogY2FsbGJhY2tcblx0XHR9LCBqUXVlcnkuaXNQbGFpbk9iamVjdCggdXJsICkgJiYgdXJsICkgKTtcblx0fTtcbn0gKTtcblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIGZ1bmN0aW9uKCBzICkge1xuXHR2YXIgaTtcblx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0aWYgKCBpLnRvTG93ZXJDYXNlKCkgPT09IFwiY29udGVudC10eXBlXCIgKSB7XG5cdFx0XHRzLmNvbnRlbnRUeXBlID0gcy5oZWFkZXJzWyBpIF0gfHwgXCJcIjtcblx0XHR9XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsLCBvcHRpb25zLCBkb2MgKSB7XG5cdHJldHVybiBqUXVlcnkuYWpheCgge1xuXHRcdHVybDogdXJsLFxuXG5cdFx0Ly8gTWFrZSB0aGlzIGV4cGxpY2l0LCBzaW5jZSB1c2VyIGNhbiBvdmVycmlkZSB0aGlzIHRocm91Z2ggYWpheFNldHVwICgjMTEyNjQpXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRkYXRhVHlwZTogXCJzY3JpcHRcIixcblx0XHRjYWNoZTogdHJ1ZSxcblx0XHRhc3luYzogZmFsc2UsXG5cdFx0Z2xvYmFsOiBmYWxzZSxcblxuXHRcdC8vIE9ubHkgZXZhbHVhdGUgdGhlIHJlc3BvbnNlIGlmIGl0IGlzIHN1Y2Nlc3NmdWwgKGdoLTQxMjYpXG5cdFx0Ly8gZGF0YUZpbHRlciBpcyBub3QgaW52b2tlZCBmb3IgZmFpbHVyZSByZXNwb25zZXMsIHNvIHVzaW5nIGl0IGluc3RlYWRcblx0XHQvLyBvZiB0aGUgZGVmYXVsdCBjb252ZXJ0ZXIgaXMga2x1ZGd5IGJ1dCBpdCB3b3Jrcy5cblx0XHRjb252ZXJ0ZXJzOiB7XG5cdFx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCkge31cblx0XHR9LFxuXHRcdGRhdGFGaWx0ZXI6IGZ1bmN0aW9uKCByZXNwb25zZSApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCByZXNwb25zZSwgb3B0aW9ucywgZG9jICk7XG5cdFx0fVxuXHR9ICk7XG59O1xuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0d3JhcEFsbDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIHdyYXA7XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblx0XHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0XHRodG1sID0gaHRtbC5jYWxsKCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xuXG5cdFx0XHRcdHdoaWxlICggZWxlbS5maXJzdEVsZW1lbnRDaGlsZCApIHtcblx0XHRcdFx0XHRlbGVtID0gZWxlbS5maXJzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbGVtO1xuXHRcdFx0fSApLmFwcGVuZCggdGhpcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciBodG1sSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIGh0bWwgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbElzRnVuY3Rpb24gPyBodG1sLmNhbGwoIHRoaXMsIGkgKSA6IGh0bWwgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dGhpcy5wYXJlbnQoIHNlbGVjdG9yICkubm90KCBcImJvZHlcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApO1xuXHRcdH0gKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHByLnBzZXVkb3MuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhalF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlKCBlbGVtICk7XG59O1xualF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhISggZWxlbS5vZmZzZXRXaWR0aCB8fCBlbGVtLm9mZnNldEhlaWdodCB8fCBlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICk7XG59O1xuXG5cblxuXG5qUXVlcnkuYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2ggKCBlICkge31cbn07XG5cbnZhciB4aHJTdWNjZXNzU3RhdHVzID0ge1xuXG5cdFx0Ly8gRmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdC8vICMxNDUwOiBzb21ldGltZXMgSUUgcmV0dXJucyAxMjIzIHdoZW4gaXQgc2hvdWxkIGJlIDIwNFxuXHRcdDEyMjM6IDIwNFxuXHR9LFxuXHR4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpO1xuXG5zdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoIFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyU3VwcG9ydGVkICk7XG5zdXBwb3J0LmFqYXggPSB4aHJTdXBwb3J0ZWQgPSAhIXhoclN1cHBvcnRlZDtcblxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKTtcblxuXHRcdFx0XHR4aHIub3Blbihcblx0XHRcdFx0XHRvcHRpb25zLnR5cGUsXG5cdFx0XHRcdFx0b3B0aW9ucy51cmwsXG5cdFx0XHRcdFx0b3B0aW9ucy5hc3luYyxcblx0XHRcdFx0XHRvcHRpb25zLnVzZXJuYW1lLFxuXHRcdFx0XHRcdG9wdGlvbnMucGFzc3dvcmRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gKSB7XG5cdFx0XHRcdFx0aGVhZGVyc1sgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNldCBoZWFkZXJzXG5cdFx0XHRcdGZvciAoIGkgaW4gaGVhZGVycyApIHtcblx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gZXJyb3JDYWxsYmFjayA9IHhoci5vbmxvYWQgPVxuXHRcdFx0XHRcdFx0XHRcdHhoci5vbmVycm9yID0geGhyLm9uYWJvcnQgPSB4aHIub250aW1lb3V0ID1cblx0XHRcdFx0XHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIE9uIGEgbWFudWFsIG5hdGl2ZSBhYm9ydCwgSUU5IHRocm93c1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVycm9ycyBvbiBhbnkgcHJvcGVydHkgYWNjZXNzIHRoYXQgaXMgbm90IHJlYWR5U3RhdGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIDAsIFwiZXJyb3JcIiApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0LFxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSUU5IGhhcyBubyBYSFIyIGJ1dCB0aHJvd3Mgb24gYmluYXJ5ICh0cmFjLTExNDI2KVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIFhIUjIgbm9uLXRleHQsIGxldCB0aGUgY2FsbGVyIGhhbmRsZSBpdCAoZ2gtMjQ5OClcblx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0eyBiaW5hcnk6IHhoci5yZXNwb25zZSB9IDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gZXZlbnRzXG5cdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRlcnJvckNhbGxiYWNrID0geGhyLm9uZXJyb3IgPSB4aHIub250aW1lb3V0ID0gY2FsbGJhY2soIFwiZXJyb3JcIiApO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdFx0XHQvLyBVc2Ugb25yZWFkeXN0YXRlY2hhbmdlIHRvIHJlcGxhY2Ugb25hYm9ydFxuXHRcdFx0XHQvLyB0byBoYW5kbGUgdW5jYXVnaHQgYWJvcnRzXG5cdFx0XHRcdGlmICggeGhyLm9uYWJvcnQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR4aHIub25hYm9ydCA9IGVycm9yQ2FsbGJhY2s7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHQvLyBDaGVjayByZWFkeVN0YXRlIGJlZm9yZSB0aW1lb3V0IGFzIGl0IGNoYW5nZXNcblx0XHRcdFx0XHRcdGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQWxsb3cgb25lcnJvciB0byBiZSBjYWxsZWQgZmlyc3QsXG5cdFx0XHRcdFx0XHRcdC8vIGJ1dCB0aGF0IHdpbGwgbm90IGhhbmRsZSBhIG5hdGl2ZSBhYm9ydFxuXHRcdFx0XHRcdFx0XHQvLyBBbHNvLCBzYXZlIGVycm9yQ2FsbGJhY2sgdG8gYSB2YXJpYWJsZVxuXHRcdFx0XHRcdFx0XHQvLyBhcyB4aHIub25lcnJvciBjYW5ub3QgYmUgYWNjZXNzZWRcblx0XHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJvckNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayggXCJhYm9ydFwiICk7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHR4aHIuc2VuZCggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSB8fCBudWxsICk7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG4vLyBQcmV2ZW50IGF1dG8tZXhlY3V0aW9uIG9mIHNjcmlwdHMgd2hlbiBubyBleHBsaWNpdCBkYXRhVHlwZSB3YXMgcHJvdmlkZWQgKFNlZSBnaC0yNDMyKVxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy5jb250ZW50cy5zY3JpcHQgPSBmYWxzZTtcblx0fVxufSApO1xuXG4vLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZVxualF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRhY2NlcHRzOiB7XG5cdFx0c2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgXCIgK1xuXHRcdFx0XCJhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIlxuXHR9LFxuXHRjb250ZW50czoge1xuXHRcdHNjcmlwdDogL1xcYig/OmphdmF8ZWNtYSlzY3JpcHRcXGIvXG5cdH0sXG5cdGNvbnZlcnRlcnM6IHtcblx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIHRleHQgKTtcblx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGNyb3NzRG9tYWluXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHMuY2FjaGUgPSBmYWxzZTtcblx0fVxuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy50eXBlID0gXCJHRVRcIjtcblx0fVxufSApO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblxuXHQvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIG9yIGZvcmNlZC1ieS1hdHRycyByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gfHwgcy5zY3JpcHRBdHRycyApIHtcblx0XHR2YXIgc2NyaXB0LCBjYWxsYmFjaztcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIF8sIGNvbXBsZXRlICkge1xuXHRcdFx0XHRzY3JpcHQgPSBqUXVlcnkoIFwiPHNjcmlwdD5cIiApXG5cdFx0XHRcdFx0LmF0dHIoIHMuc2NyaXB0QXR0cnMgfHwge30gKVxuXHRcdFx0XHRcdC5wcm9wKCB7IGNoYXJzZXQ6IHMuc2NyaXB0Q2hhcnNldCwgc3JjOiBzLnVybCB9IClcblx0XHRcdFx0XHQub24oIFwibG9hZCBlcnJvclwiLCBjYWxsYmFjayA9IGZ1bmN0aW9uKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAoIGV2dCApIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIGV2dC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdC8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeVxuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHRbIDAgXSApO1xuXHRcdFx0fSxcblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0anNvbnA6IFwiY2FsbGJhY2tcIixcblx0anNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyBcIl9cIiArICggbm9uY2UuZ3VpZCsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0gKTtcblxuLy8gRGV0ZWN0LCBub3JtYWxpemUgb3B0aW9ucyBhbmQgaW5zdGFsbCBjYWxsYmFja3MgZm9yIGpzb25wIHJlcXVlc3RzXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJqc29uIGpzb25wXCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHtcblxuXHR2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsXG5cdFx0anNvblByb3AgPSBzLmpzb25wICE9PSBmYWxzZSAmJiAoIHJqc29ucC50ZXN0KCBzLnVybCApID9cblx0XHRcdFwidXJsXCIgOlxuXHRcdFx0dHlwZW9mIHMuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQoIHMuY29udGVudFR5cGUgfHwgXCJcIiApXG5cdFx0XHRcdFx0LmluZGV4T2YoIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgKSA9PT0gMCAmJlxuXHRcdFx0XHRyanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcblx0XHQpO1xuXG5cdC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcblx0aWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cblx0XHQvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0XG5cdFx0Y2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0gaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgP1xuXHRcdFx0cy5qc29ucENhbGxiYWNrKCkgOlxuXHRcdFx0cy5qc29ucENhbGxiYWNrO1xuXG5cdFx0Ly8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuXHRcdGlmICgganNvblByb3AgKSB7XG5cdFx0XHRzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuXHRcdH0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkge1xuXHRcdFx0cy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuanNvbnAgKyBcIj1cIiArIGNhbGxiYWNrTmFtZTtcblx0XHR9XG5cblx0XHQvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uXG5cdFx0cy5jb252ZXJ0ZXJzWyBcInNjcmlwdCBqc29uXCIgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIEZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXRcblx0XHRcdGlmICggb3ZlcndyaXR0ZW4gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0alF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTtcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2F2ZSBiYWNrIGFzIGZyZWVcblx0XHRcdGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG5cblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kXG5cdFx0XHRcdHMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjaztcblxuXHRcdFx0XHQvLyBTYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlXG5cdFx0XHRcdG9sZENhbGxiYWNrcy5wdXNoKCBjYWxsYmFja05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlXG5cdFx0XHRpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSApO1xuXG5cdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gU3VwcG9ydDogU2FmYXJpIDggb25seVxuLy8gSW4gU2FmYXJpIDggZG9jdW1lbnRzIGNyZWF0ZWQgdmlhIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudFxuLy8gY29sbGFwc2Ugc2libGluZyBmb3JtczogdGhlIHNlY29uZCBvbmUgYmVjb21lcyBhIGNoaWxkIG9mIHRoZSBmaXJzdCBvbmUuXG4vLyBCZWNhdXNlIG9mIHRoYXQsIHRoaXMgc2VjdXJpdHkgbWVhc3VyZSBoYXMgdG8gYmUgZGlzYWJsZWQgaW4gU2FmYXJpIDguXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3MzM3XG5zdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCA9ICggZnVuY3Rpb24oKSB7XG5cdHZhciBib2R5ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCBcIlwiICkuYm9keTtcblx0Ym9keS5pbm5lckhUTUwgPSBcIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCI7XG5cdHJldHVybiBib2R5LmNoaWxkTm9kZXMubGVuZ3RoID09PSAyO1xufSApKCk7XG5cblxuLy8gQXJndW1lbnQgXCJkYXRhXCIgc2hvdWxkIGJlIHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsXG4vLyBkZWZhdWx0cyB0byBkb2N1bWVudFxuLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xualF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0aWYgKCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0a2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuXHRcdGNvbnRleHQgPSBmYWxzZTtcblx0fVxuXG5cdHZhciBiYXNlLCBwYXJzZWQsIHNjcmlwdHM7XG5cblx0aWYgKCAhY29udGV4dCApIHtcblxuXHRcdC8vIFN0b3Agc2NyaXB0cyBvciBpbmxpbmUgZXZlbnQgaGFuZGxlcnMgZnJvbSBiZWluZyBleGVjdXRlZCBpbW1lZGlhdGVseVxuXHRcdC8vIGJ5IHVzaW5nIGRvY3VtZW50LmltcGxlbWVudGF0aW9uXG5cdFx0aWYgKCBzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCApIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIFwiXCIgKTtcblxuXHRcdFx0Ly8gU2V0IHRoZSBiYXNlIGhyZWYgZm9yIHRoZSBjcmVhdGVkIGRvY3VtZW50XG5cdFx0XHQvLyBzbyBhbnkgcGFyc2VkIGVsZW1lbnRzIHdpdGggVVJMc1xuXHRcdFx0Ly8gYXJlIGJhc2VkIG9uIHRoZSBkb2N1bWVudCdzIFVSTCAoZ2gtMjk2NSlcblx0XHRcdGJhc2UgPSBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiYmFzZVwiICk7XG5cdFx0XHRiYXNlLmhyZWYgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmO1xuXHRcdFx0Y29udGV4dC5oZWFkLmFwcGVuZENoaWxkKCBiYXNlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudDtcblx0XHR9XG5cdH1cblxuXHRwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKTtcblx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuXHQvLyBTaW5nbGUgdGFnXG5cdGlmICggcGFyc2VkICkge1xuXHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdO1xuXHR9XG5cblx0cGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZiggXCIgXCIgKTtcblxuXHRpZiAoIG9mZiA+IC0xICkge1xuXHRcdHNlbGVjdG9yID0gc3RyaXBBbmRDb2xsYXBzZSggdXJsLnNsaWNlKCBvZmYgKSApO1xuXHRcdHVybCA9IHVybC5zbGljZSggMCwgb2ZmICk7XG5cdH1cblxuXHQvLyBJZiBpdCdzIGEgZnVuY3Rpb25cblx0aWYgKCBpc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoIHtcblx0XHRcdHVybDogdXJsLFxuXG5cdFx0XHQvLyBJZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkLlxuXHRcdFx0Ly8gTWFrZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGV4cGxpY2l0IHNpbmNlXG5cdFx0XHQvLyB1c2VyIGNhbiBvdmVycmlkZSBpdCB0aHJvdWdoIGFqYXhTZXR1cCBtZXRob2Rcblx0XHRcdHR5cGU6IHR5cGUgfHwgXCJHRVRcIixcblx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcblx0XHRcdGRhdGE6IHBhcmFtc1xuXHRcdH0gKS5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkge1xuXG5cdFx0XHQvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2tcblx0XHRcdHJlc3BvbnNlID0gYXJndW1lbnRzO1xuXG5cdFx0XHRzZWxmLmh0bWwoIHNlbGVjdG9yID9cblxuXHRcdFx0XHQvLyBJZiBhIHNlbGVjdG9yIHdhcyBzcGVjaWZpZWQsIGxvY2F0ZSB0aGUgcmlnaHQgZWxlbWVudHMgaW4gYSBkdW1teSBkaXZcblx0XHRcdFx0Ly8gRXhjbHVkZSBzY3JpcHRzIHRvIGF2b2lkIElFICdQZXJtaXNzaW9uIERlbmllZCcgZXJyb3JzXG5cdFx0XHRcdGpRdWVyeSggXCI8ZGl2PlwiICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0Ly8gSWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImRhdGFcIiwgXCJzdGF0dXNcIiwgXCJqcVhIUlwiXG5cdFx0Ly8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLlxuXHRcdC8vIElmIGl0IGZhaWxzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJqcVhIUlwiLCBcInN0YXR1c1wiLCBcImVycm9yXCJcblx0XHR9ICkuYWx3YXlzKCBjYWxsYmFjayAmJiBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcblx0XHRcdHNlbGYuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmFuaW1hdGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9ICkubGVuZ3RoO1xufTtcblxuXG5cblxualF1ZXJ5Lm9mZnNldCA9IHtcblx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHR2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuXHRcdFx0cG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdHByb3BzID0ge307XG5cblx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0fVxuXG5cdFx0Y3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcblx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0Y3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG5cdFx0Y2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG5cdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG5cblx0XHRcdC8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KVxuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgalF1ZXJ5LmV4dGVuZCgge30sIGN1ck9mZnNldCApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCB0eXBlb2YgcHJvcHMudG9wID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRwcm9wcy50b3AgKz0gXCJweFwiO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCB0eXBlb2YgcHJvcHMubGVmdCA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0cHJvcHMubGVmdCArPSBcInB4XCI7XG5cdFx0XHR9XG5cdFx0XHRjdXJFbGVtLmNzcyggcHJvcHMgKTtcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHQvLyBvZmZzZXQoKSByZWxhdGVzIGFuIGVsZW1lbnQncyBib3JkZXIgYm94IHRvIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuXHRcdC8vIFByZXNlcnZlIGNoYWluaW5nIGZvciBzZXR0ZXJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5Lm9mZnNldC5zZXRPZmZzZXQoIHRoaXMsIG9wdGlvbnMsIGkgKTtcblx0XHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHZhciByZWN0LCB3aW4sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gemVyb3MgZm9yIGRpc2Nvbm5lY3RlZCBhbmQgaGlkZGVuIChkaXNwbGF5OiBub25lKSBlbGVtZW50cyAoZ2gtMjMxMClcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHQvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhXG5cdFx0Ly8gZGlzY29ubmVjdGVkIG5vZGUgaW4gSUUgdGhyb3dzIGFuIGVycm9yXG5cdFx0aWYgKCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcdH1cblxuXHRcdC8vIEdldCBkb2N1bWVudC1yZWxhdGl2ZSBwb3NpdGlvbiBieSBhZGRpbmcgdmlld3BvcnQgc2Nyb2xsIHRvIHZpZXdwb3J0LXJlbGF0aXZlIGdCQ1Jcblx0XHRyZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR3aW4gPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogcmVjdC50b3AgKyB3aW4ucGFnZVlPZmZzZXQsXG5cdFx0XHRsZWZ0OiByZWN0LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXRcblx0XHR9O1xuXHR9LFxuXG5cdC8vIHBvc2l0aW9uKCkgcmVsYXRlcyBhbiBlbGVtZW50J3MgbWFyZ2luIGJveCB0byBpdHMgb2Zmc2V0IHBhcmVudCdzIHBhZGRpbmcgYm94XG5cdC8vIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIGJlaGF2aW9yIG9mIENTUyBhYnNvbHV0ZSBwb3NpdGlvbmluZ1xuXHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAhdGhpc1sgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCwgZG9jLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cblx0XHQvLyBwb3NpdGlvbjpmaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gdGhlIHZpZXdwb3J0LCB3aGljaCBpdHNlbGYgYWx3YXlzIGhhcyB6ZXJvIG9mZnNldFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblxuXHRcdFx0Ly8gQXNzdW1lIHBvc2l0aW9uOmZpeGVkIGltcGxpZXMgYXZhaWxhYmlsaXR5IG9mIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRvZmZzZXQgPSB0aGlzLm9mZnNldCgpO1xuXG5cdFx0XHQvLyBBY2NvdW50IGZvciB0aGUgKnJlYWwqIG9mZnNldCBwYXJlbnQsIHdoaWNoIGNhbiBiZSB0aGUgZG9jdW1lbnQgb3IgaXRzIHJvb3QgZWxlbWVudFxuXHRcdFx0Ly8gd2hlbiBhIHN0YXRpY2FsbHkgcG9zaXRpb25lZCBlbGVtZW50IGlzIGlkZW50aWZpZWRcblx0XHRcdGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcblx0XHRcdG9mZnNldFBhcmVudCA9IGVsZW0ub2Zmc2V0UGFyZW50IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJlxuXHRcdFx0XHQoIG9mZnNldFBhcmVudCA9PT0gZG9jLmJvZHkgfHwgb2Zmc2V0UGFyZW50ID09PSBkb2MuZG9jdW1lbnRFbGVtZW50ICkgJiZcblx0XHRcdFx0alF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblxuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGlmICggb2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudCAhPT0gZWxlbSAmJiBvZmZzZXRQYXJlbnQubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgYm9yZGVycyBpbnRvIGl0cyBvZmZzZXQsIHNpbmNlIHRoZXkgYXJlIG91dHNpZGUgaXRzIGNvbnRlbnQgb3JpZ2luXG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IGpRdWVyeSggb2Zmc2V0UGFyZW50ICkub2Zmc2V0KCk7XG5cdFx0XHRcdHBhcmVudE9mZnNldC50b3AgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdFx0cGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdC8vIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGRvY3VtZW50RWxlbWVudCBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOlxuXHQvLyAxKSBGb3IgdGhlIGVsZW1lbnQgaW5zaWRlIHRoZSBpZnJhbWUgd2l0aG91dCBvZmZzZXRQYXJlbnQsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuXG5cdC8vICAgIGRvY3VtZW50RWxlbWVudCBvZiB0aGUgcGFyZW50IHdpbmRvd1xuXHQvLyAyKSBGb3IgdGhlIGhpZGRlbiBvciBkZXRhY2hlZCBlbGVtZW50XG5cdC8vIDMpIEZvciBib2R5IG9yIGh0bWwgZWxlbWVudCwgaS5lLiBpbiBjYXNlIG9mIHRoZSBodG1sIG5vZGUgLSBpdCB3aWxsIHJldHVybiBpdHNlbGZcblx0Ly9cblx0Ly8gYnV0IHRob3NlIGV4Y2VwdGlvbnMgd2VyZSBuZXZlciBwcmVzZW50ZWQgYXMgYSByZWFsIGxpZmUgdXNlLWNhc2VzXG5cdC8vIGFuZCBtaWdodCBiZSBjb25zaWRlcmVkIGFzIG1vcmUgcHJlZmVyYWJsZSByZXN1bHRzLlxuXHQvL1xuXHQvLyBUaGlzIGxvZ2ljLCBob3dldmVyLCBpcyBub3QgZ3VhcmFudGVlZCBhbmQgY2FuIGNoYW5nZSBhdCBhbnkgcG9pbnQgaW4gdGhlIGZ1dHVyZVxuXHRvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQ7XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRcdG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnRFbGVtZW50O1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG4vLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgcHJvcCApIHtcblx0dmFyIHRvcCA9IFwicGFnZVlPZmZzZXRcIiA9PT0gcHJvcDtcblxuXHRqUXVlcnkuZm5bIG1ldGhvZCBdID0gZnVuY3Rpb24oIHZhbCApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7XG5cblx0XHRcdC8vIENvYWxlc2NlIGRvY3VtZW50cyBhbmQgd2luZG93c1xuXHRcdFx0dmFyIHdpbjtcblx0XHRcdGlmICggaXNXaW5kb3coIGVsZW0gKSApIHtcblx0XHRcdFx0d2luID0gZWxlbTtcblx0XHRcdH0gZWxzZSBpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHdpbiA9IGVsZW0uZGVmYXVsdFZpZXc7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiB3aW4gPyB3aW5bIHByb3AgXSA6IGVsZW1bIG1ldGhvZCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHdpbiApIHtcblx0XHRcdFx0d2luLnNjcm9sbFRvKFxuXHRcdFx0XHRcdCF0b3AgPyB2YWwgOiB3aW4ucGFnZVhPZmZzZXQsXG5cdFx0XHRcdFx0dG9wID8gdmFsIDogd2luLnBhZ2VZT2Zmc2V0XG5cdFx0XHRcdCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1bIG1ldGhvZCBdID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0sIG1ldGhvZCwgdmFsLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH07XG59ICk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaSA8PTcgLSA5LjEsIENocm9tZSA8PTM3IC0gNDlcbi8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uXG4vLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODRcbi8vIEJsaW5rIGJ1ZzogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTg5MzQ3XG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBfaSwgcHJvcCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcm9wIF0gPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucGl4ZWxQb3NpdGlvbixcblx0XHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0XHRjb21wdXRlZCA9IGN1ckNTUyggZWxlbSwgcHJvcCApO1xuXG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSApO1xuXG5cbi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkge1xuXHRqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiBcImlubmVyXCIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCBcIlwiOiBcIm91dGVyXCIgKyBuYW1lIH0sXG5cdFx0ZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cblx0XHQvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcblx0XHRqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHtcblx0XHRcdHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG5cdFx0XHRcdGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblxuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZG9jO1xuXG5cdFx0XHRcdGlmICggaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vICQoIHdpbmRvdyApLm91dGVyV2lkdGgvSGVpZ2h0IHJldHVybiB3L2ggaW5jbHVkaW5nIHNjcm9sbGJhcnMgKGdoLTE3MjkpXG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmNOYW1lLmluZGV4T2YoIFwib3V0ZXJcIiApID09PSAwID9cblx0XHRcdFx0XHRcdGVsZW1bIFwiaW5uZXJcIiArIG5hbWUgXSA6XG5cdFx0XHRcdFx0XHRlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgXCJjbGllbnRcIiArIG5hbWUgXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHRcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdGRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLFxuXHRcdFx0XHRcdC8vIHdoaWNoZXZlciBpcyBncmVhdGVzdFxuXHRcdFx0XHRcdHJldHVybiBNYXRoLm1heChcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJzY3JvbGxcIiArIG5hbWUgXSwgZG9jWyBcInNjcm9sbFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcIm9mZnNldFwiICsgbmFtZSBdLCBkb2NbIFwib2Zmc2V0XCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSApO1xuXHRcdH07XG5cdH0gKTtcbn0gKTtcblxuXG5qUXVlcnkuZWFjaCggW1xuXHRcImFqYXhTdGFydFwiLFxuXHRcImFqYXhTdG9wXCIsXG5cdFwiYWpheENvbXBsZXRlXCIsXG5cdFwiYWpheEVycm9yXCIsXG5cdFwiYWpheFN1Y2Nlc3NcIixcblx0XCJhamF4U2VuZFwiXG5dLCBmdW5jdGlvbiggX2ksIHR5cGUgKSB7XG5cdGpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlLCBmbiApO1xuXHR9O1xufSApO1xuXG5cblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblxuXHRcdC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/XG5cdFx0XHR0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDpcblx0XHRcdHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuXHR9LFxuXG5cdGhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHtcblx0XHRyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggKCBcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudVwiICkuc3BsaXQoIFwiIFwiICksXG5cdGZ1bmN0aW9uKCBfaSwgbmFtZSApIHtcblxuXHRcdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgP1xuXHRcdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdFx0fTtcblx0fSApO1xuXG5cblxuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcbi8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUFxudmFyIHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO1xuXG4vLyBCaW5kIGEgZnVuY3Rpb24gdG8gYSBjb250ZXh0LCBvcHRpb25hbGx5IHBhcnRpYWxseSBhcHBseWluZyBhbnlcbi8vIGFyZ3VtZW50cy5cbi8vIGpRdWVyeS5wcm94eSBpcyBkZXByZWNhdGVkIHRvIHByb21vdGUgc3RhbmRhcmRzIChzcGVjaWZpY2FsbHkgRnVuY3Rpb24jYmluZClcbi8vIEhvd2V2ZXIsIGl0IGlzIG5vdCBzbGF0ZWQgZm9yIHJlbW92YWwgYW55IHRpbWUgc29vblxualF1ZXJ5LnByb3h5ID0gZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHR2YXIgdG1wLCBhcmdzLCBwcm94eTtcblxuXHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuXHRcdHRtcCA9IGZuWyBjb250ZXh0IF07XG5cdFx0Y29udGV4dCA9IGZuO1xuXHRcdGZuID0gdG1wO1xuXHR9XG5cblx0Ly8gUXVpY2sgY2hlY2sgdG8gZGV0ZXJtaW5lIGlmIHRhcmdldCBpcyBjYWxsYWJsZSwgaW4gdGhlIHNwZWNcblx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0aWYgKCAhaXNGdW5jdGlvbiggZm4gKSApIHtcblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0Ly8gU2ltdWxhdGVkIGJpbmRcblx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApO1xuXHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApO1xuXHR9O1xuXG5cdC8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZFxuXHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblxuXHRyZXR1cm4gcHJveHk7XG59O1xuXG5qUXVlcnkuaG9sZFJlYWR5ID0gZnVuY3Rpb24oIGhvbGQgKSB7XG5cdGlmICggaG9sZCApIHtcblx0XHRqUXVlcnkucmVhZHlXYWl0Kys7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdH1cbn07XG5qUXVlcnkuaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5qUXVlcnkucGFyc2VKU09OID0gSlNPTi5wYXJzZTtcbmpRdWVyeS5ub2RlTmFtZSA9IG5vZGVOYW1lO1xualF1ZXJ5LmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xualF1ZXJ5LmlzV2luZG93ID0gaXNXaW5kb3c7XG5qUXVlcnkuY2FtZWxDYXNlID0gY2FtZWxDYXNlO1xualF1ZXJ5LnR5cGUgPSB0b1R5cGU7XG5cbmpRdWVyeS5ub3cgPSBEYXRlLm5vdztcblxualF1ZXJ5LmlzTnVtZXJpYyA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cblx0Ly8gQXMgb2YgalF1ZXJ5IDMuMCwgaXNOdW1lcmljIGlzIGxpbWl0ZWQgdG9cblx0Ly8gc3RyaW5ncyBhbmQgbnVtYmVycyAocHJpbWl0aXZlcyBvciBvYmplY3RzKVxuXHQvLyB0aGF0IGNhbiBiZSBjb2VyY2VkIHRvIGZpbml0ZSBudW1iZXJzIChnaC0yNjYyKVxuXHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblx0cmV0dXJuICggdHlwZSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlID09PSBcInN0cmluZ1wiICkgJiZcblxuXHRcdC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChcIlwiKVxuXHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHQhaXNOYU4oIG9iaiAtIHBhcnNlRmxvYXQoIG9iaiApICk7XG59O1xuXG5qUXVlcnkudHJpbSA9IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRyZXR1cm4gdGV4dCA9PSBudWxsID9cblx0XHRcIlwiIDpcblx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcbn07XG5cblxuXG4vLyBSZWdpc3RlciBhcyBhIG5hbWVkIEFNRCBtb2R1bGUsIHNpbmNlIGpRdWVyeSBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbi8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXRcbi8vIHVuZGVyc3RhbmRzIGFub255bW91cyBBTUQgbW9kdWxlcy4gQSBuYW1lZCBBTUQgaXMgc2FmZXN0IGFuZCBtb3N0IHJvYnVzdFxuLy8gd2F5IHRvIHJlZ2lzdGVyLiBMb3dlcmNhc2UganF1ZXJ5IGlzIHVzZWQgYmVjYXVzZSBBTUQgbW9kdWxlIG5hbWVzIGFyZVxuLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlXG4vLyBmaWxlIG5hbWUuIERvIHRoaXMgYWZ0ZXIgY3JlYXRpbmcgdGhlIGdsb2JhbCBzbyB0aGF0IGlmIGFuIEFNRCBtb2R1bGUgd2FudHNcbi8vIHRvIGNhbGwgbm9Db25mbGljdCB0byBoaWRlIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnksIGl0IHdpbGwgd29yay5cblxuLy8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGRcbi8vIGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBhbm9ueW1vdXMgbW9kdWxlcywgYW5kIGF2b2lkIHNldHRpbmcgYSBnbG9iYWwgaWYgYW5cbi8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4vLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uXG5cbmlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cdGRlZmluZSggXCJqcXVlcnlcIiwgW10sIGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnk7XG5cdH0gKTtcbn1cblxuXG5cblxudmFyXG5cblx0Ly8gTWFwIG92ZXIgalF1ZXJ5IGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG5cdF9qUXVlcnkgPSB3aW5kb3cualF1ZXJ5LFxuXG5cdC8vIE1hcCBvdmVyIHRoZSAkIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG5cdF8kID0gd2luZG93LiQ7XG5cbmpRdWVyeS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oIGRlZXAgKSB7XG5cdGlmICggd2luZG93LiQgPT09IGpRdWVyeSApIHtcblx0XHR3aW5kb3cuJCA9IF8kO1xuXHR9XG5cblx0aWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHtcblx0XHR3aW5kb3cualF1ZXJ5ID0gX2pRdWVyeTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnk7XG59O1xuXG4vLyBFeHBvc2UgalF1ZXJ5IGFuZCAkIGlkZW50aWZpZXJzLCBldmVuIGluIEFNRFxuLy8gKCM3MTAyI2NvbW1lbnQ6MTAsIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNTU3KVxuLy8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KVxuaWYgKCB0eXBlb2Ygbm9HbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdHdpbmRvdy5qUXVlcnkgPSB3aW5kb3cuJCA9IGpRdWVyeTtcbn1cblxuXG5cblxucmV0dXJuIGpRdWVyeTtcbn0gKTtcbiIsIi8qIEZpbGVTYXZlci5qc1xuICogQSBzYXZlQXMoKSBGaWxlU2F2ZXIgaW1wbGVtZW50YXRpb24uXG4gKiAxLjEuMjAxNjAzMjhcbiAqXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4gKiBMaWNlbnNlOiBNSVRcbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cblxuLypnbG9iYWwgc2VsZiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgaW5kZW50OiA0LCBsYXhicmVhazogdHJ1ZSwgbGF4Y29tbWE6IHRydWUsIHNtYXJ0dGFiczogdHJ1ZSwgcGx1c3BsdXM6IHRydWUgKi9cblxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cblxudmFyIHNhdmVBcyA9IHNhdmVBcyB8fCAoZnVuY3Rpb24odmlldykge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0Ly8gSUUgPDEwIGlzIGV4cGxpY2l0bHkgdW5zdXBwb3J0ZWRcblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgWzEtOV1cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyXG5cdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XG5cdFx0ICAvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuXHRcdCwgZ2V0X1VSTCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0fVxuXHRcdCwgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpXG5cdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcblx0XHQsIGNsaWNrID0gZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0dmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKTtcblx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0fVxuXHRcdCwgaXNfc2FmYXJpID0gL1ZlcnNpb25cXC9bXFxkXFwuXSsuKlNhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXHRcdCwgd2Via2l0X3JlcV9mcyA9IHZpZXcud2Via2l0UmVxdWVzdEZpbGVTeXN0ZW1cblx0XHQsIHJlcV9mcyA9IHZpZXcucmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2Via2l0X3JlcV9mcyB8fCB2aWV3Lm1velJlcXVlc3RGaWxlU3lzdGVtXG5cdFx0LCB0aHJvd19vdXRzaWRlID0gZnVuY3Rpb24oZXgpIHtcblx0XHRcdCh2aWV3LnNldEltbWVkaWF0ZSB8fCB2aWV3LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aHJvdyBleDtcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0XHQsIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG5cdFx0LCBmc19taW5fc2l6ZSA9IDBcblx0XHQvLyB0aGUgQmxvYiBBUEkgaXMgZnVuZGFtZW50YWxseSBicm9rZW4gYXMgdGhlcmUgaXMgbm8gXCJkb3dubG9hZGZpbmlzaGVkXCIgZXZlbnQgdG8gc3Vic2NyaWJlIHRvXG5cdFx0LCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQgPSAxMDAwICogNDAgLy8gaW4gbXNcblx0XHQsIHJldm9rZSA9IGZ1bmN0aW9uKGZpbGUpIHtcblx0XHRcdHZhciByZXZva2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIikgeyAvLyBmaWxlIGlzIGFuIG9iamVjdCBVUkxcblx0XHRcdFx0XHRnZXRfVVJMKCkucmV2b2tlT2JqZWN0VVJMKGZpbGUpO1xuXHRcdFx0XHR9IGVsc2UgeyAvLyBmaWxlIGlzIGEgRmlsZVxuXHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHQvKiAvLyBUYWtlIG5vdGUgVzNDOlxuXHRcdFx0dmFyXG5cdFx0XHQgIHVyaSA9IHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiID8gZmlsZSA6IGZpbGUudG9VUkwoKVxuXHRcdFx0LCByZXZva2VyID0gZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHRcdC8vIGlkZWFseSBEb3dubG9hZEZpbmlzaGVkRXZlbnQuZGF0YSB3b3VsZCBiZSB0aGUgVVJMIHJlcXVlc3RlZFxuXHRcdFx0XHRpZiAoZXZ0LmRhdGEgPT09IHVyaSkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIikgeyAvLyBmaWxlIGlzIGFuIG9iamVjdCBVUkxcblx0XHRcdFx0XHRcdGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcblx0XHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQ7XG5cdFx0XHR2aWV3LmFkZEV2ZW50TGlzdGVuZXIoXCJkb3dubG9hZGZpbmlzaGVkXCIsIHJldm9rZXIpO1xuXHRcdFx0Ki9cblx0XHRcdHNldFRpbWVvdXQocmV2b2tlciwgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0KTtcblx0XHR9XG5cdFx0LCBkaXNwYXRjaCA9IGZ1bmN0aW9uKGZpbGVzYXZlciwgZXZlbnRfdHlwZXMsIGV2ZW50KSB7XG5cdFx0XHRldmVudF90eXBlcyA9IFtdLmNvbmNhdChldmVudF90eXBlcyk7XG5cdFx0XHR2YXIgaSA9IGV2ZW50X3R5cGVzLmxlbmd0aDtcblx0XHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdFx0dmFyIGxpc3RlbmVyID0gZmlsZXNhdmVyW1wib25cIiArIGV2ZW50X3R5cGVzW2ldXTtcblx0XHRcdFx0aWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyLmNhbGwoZmlsZXNhdmVyLCBldmVudCB8fCBmaWxlc2F2ZXIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGV4KSB7XG5cdFx0XHRcdFx0XHR0aHJvd19vdXRzaWRlKGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0LCBhdXRvX2JvbSA9IGZ1bmN0aW9uKGJsb2IpIHtcblx0XHRcdC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG5cdFx0XHRpZiAoL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEJsb2IoW1wiXFx1ZmVmZlwiLCBibG9iXSwge3R5cGU6IGJsb2IudHlwZX0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGJsb2I7XG5cdFx0fVxuXHRcdCwgRmlsZVNhdmVyID0gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gRmlyc3QgdHJ5IGEuZG93bmxvYWQsIHRoZW4gd2ViIGZpbGVzeXN0ZW0sIHRoZW4gb2JqZWN0IFVSTHNcblx0XHRcdHZhclxuXHRcdFx0XHQgIGZpbGVzYXZlciA9IHRoaXNcblx0XHRcdFx0LCB0eXBlID0gYmxvYi50eXBlXG5cdFx0XHRcdCwgYmxvYl9jaGFuZ2VkID0gZmFsc2Vcblx0XHRcdFx0LCBvYmplY3RfdXJsXG5cdFx0XHRcdCwgdGFyZ2V0X3ZpZXdcblx0XHRcdFx0LCBkaXNwYXRjaF9hbGwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZFwiLnNwbGl0KFwiIFwiKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gb24gYW55IGZpbGVzeXMgZXJyb3JzIHJldmVydCB0byBzYXZpbmcgd2l0aCBvYmplY3QgVVJMc1xuXHRcdFx0XHQsIGZzX2Vycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKHRhcmdldF92aWV3ICYmIGlzX3NhZmFyaSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0Ly8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiB1cmxzXG5cdFx0XHRcdFx0XHR2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdFx0XHRcdHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGJhc2U2NERhdGEgPSByZWFkZXIucmVzdWx0O1xuXHRcdFx0XHRcdFx0XHR0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmID0gXCJkYXRhOmF0dGFjaG1lbnQvZmlsZVwiICsgYmFzZTY0RGF0YS5zbGljZShiYXNlNjREYXRhLnNlYXJjaCgvWyw7XS8pKTtcblx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG5cdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBkb24ndCBjcmVhdGUgbW9yZSBvYmplY3QgVVJMcyB0aGFuIG5lZWRlZFxuXHRcdFx0XHRcdGlmIChibG9iX2NoYW5nZWQgfHwgIW9iamVjdF91cmwpIHtcblx0XHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGFyZ2V0X3ZpZXcpIHtcblx0XHRcdFx0XHRcdHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgbmV3X3RhYiA9IHZpZXcub3BlbihvYmplY3RfdXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0XHRcdGlmIChuZXdfdGFiID09PSB1bmRlZmluZWQgJiYgaXNfc2FmYXJpKSB7XG5cdFx0XHRcdFx0XHRcdC8vQXBwbGUgZG8gbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cDovL2JpdC5seS8xa1pmZlJJXG5cdFx0XHRcdFx0XHRcdHZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmxcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcblx0XHRcdFx0XHRyZXZva2Uob2JqZWN0X3VybCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0LCBhYm9ydGFibGUgPSBmdW5jdGlvbihmdW5jKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKGZpbGVzYXZlci5yZWFkeVN0YXRlICE9PSBmaWxlc2F2ZXIuRE9ORSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0LCBjcmVhdGVfaWZfbm90X2ZvdW5kID0ge2NyZWF0ZTogdHJ1ZSwgZXhjbHVzaXZlOiBmYWxzZX1cblx0XHRcdFx0LCBzbGljZVxuXHRcdFx0O1xuXHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDtcblx0XHRcdGlmICghbmFtZSkge1xuXHRcdFx0XHRuYW1lID0gXCJkb3dubG9hZFwiO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7XG5cdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuXHRcdFx0XHRcdGNsaWNrKHNhdmVfbGluayk7XG5cdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xuXHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBPYmplY3QgYW5kIHdlYiBmaWxlc3lzdGVtIFVSTHMgaGF2ZSBhIHByb2JsZW0gc2F2aW5nIGluIEdvb2dsZSBDaHJvbWUgd2hlblxuXHRcdFx0Ly8gdmlld2VkIGluIGEgdGFiLCBzbyBJIGZvcmNlIHNhdmUgd2l0aCBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cblx0XHRcdC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTkxMTU4XG5cdFx0XHQvLyBVcGRhdGU6IEdvb2dsZSBlcnJhbnRseSBjbG9zZWQgOTExNTgsIEkgc3VibWl0dGVkIGl0IGFnYWluOlxuXHRcdFx0Ly8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM4OTY0MlxuXHRcdFx0aWYgKHZpZXcuY2hyb21lICYmIHR5cGUgJiYgdHlwZSAhPT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSkge1xuXHRcdFx0XHRzbGljZSA9IGJsb2Iuc2xpY2UgfHwgYmxvYi53ZWJraXRTbGljZTtcblx0XHRcdFx0YmxvYiA9IHNsaWNlLmNhbGwoYmxvYiwgMCwgYmxvYi5zaXplLCBmb3JjZV9zYXZlYWJsZV90eXBlKTtcblx0XHRcdFx0YmxvYl9jaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdC8vIFNpbmNlIEkgY2FuJ3QgYmUgc3VyZSB0aGF0IHRoZSBndWVzc2VkIG1lZGlhIHR5cGUgd2lsbCB0cmlnZ2VyIGEgZG93bmxvYWRcblx0XHRcdC8vIGluIFdlYktpdCwgSSBhcHBlbmQgLmRvd25sb2FkIHRvIHRoZSBmaWxlbmFtZS5cblx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD02NTQ0MFxuXHRcdFx0aWYgKHdlYmtpdF9yZXFfZnMgJiYgbmFtZSAhPT0gXCJkb3dubG9hZFwiKSB7XG5cdFx0XHRcdG5hbWUgKz0gXCIuZG93bmxvYWRcIjtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlID09PSBmb3JjZV9zYXZlYWJsZV90eXBlIHx8IHdlYmtpdF9yZXFfZnMpIHtcblx0XHRcdFx0dGFyZ2V0X3ZpZXcgPSB2aWV3O1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFyZXFfZnMpIHtcblx0XHRcdFx0ZnNfZXJyb3IoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZnNfbWluX3NpemUgKz0gYmxvYi5zaXplO1xuXHRcdFx0cmVxX2ZzKHZpZXcuVEVNUE9SQVJZLCBmc19taW5fc2l6ZSwgYWJvcnRhYmxlKGZ1bmN0aW9uKGZzKSB7XG5cdFx0XHRcdGZzLnJvb3QuZ2V0RGlyZWN0b3J5KFwic2F2ZWRcIiwgY3JlYXRlX2lmX25vdF9mb3VuZCwgYWJvcnRhYmxlKGZ1bmN0aW9uKGRpcikge1xuXHRcdFx0XHRcdHZhciBzYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRkaXIuZ2V0RmlsZShuYW1lLCBjcmVhdGVfaWZfbm90X2ZvdW5kLCBhYm9ydGFibGUoZnVuY3Rpb24oZmlsZSkge1xuXHRcdFx0XHRcdFx0XHRmaWxlLmNyZWF0ZVdyaXRlcihhYm9ydGFibGUoZnVuY3Rpb24od3JpdGVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0d3JpdGVyLm9ud3JpdGVlbmQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IGZpbGUudG9VUkwoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdFx0XHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVlbmRcIiwgZXZlbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV2b2tlKGZpbGUpO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0d3JpdGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHdyaXRlci5lcnJvcjtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnJvci5jb2RlICE9PSBlcnJvci5BQk9SVF9FUlIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZnNfZXJyb3IoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSBhYm9ydFwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3cml0ZXJbXCJvblwiICsgZXZlbnRdID0gZmlsZXNhdmVyW1wib25cIiArIGV2ZW50XTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR3cml0ZXIud3JpdGUoYmxvYik7XG5cdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLmFib3J0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3cml0ZXIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5XUklUSU5HO1xuXHRcdFx0XHRcdFx0XHR9KSwgZnNfZXJyb3IpO1xuXHRcdFx0XHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGRpci5nZXRGaWxlKG5hbWUsIHtjcmVhdGU6IGZhbHNlfSwgYWJvcnRhYmxlKGZ1bmN0aW9uKGZpbGUpIHtcblx0XHRcdFx0XHRcdC8vIGRlbGV0ZSBmaWxlIGlmIGl0IGFscmVhZHkgZXhpc3RzXG5cdFx0XHRcdFx0XHRmaWxlLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0c2F2ZSgpO1xuXHRcdFx0XHRcdH0pLCBhYm9ydGFibGUoZnVuY3Rpb24oZXgpIHtcblx0XHRcdFx0XHRcdGlmIChleC5jb2RlID09PSBleC5OT1RfRk9VTkRfRVJSKSB7XG5cdFx0XHRcdFx0XHRcdHNhdmUoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHR9KSwgZnNfZXJyb3IpO1xuXHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHR9XG5cdFx0LCBGU19wcm90byA9IEZpbGVTYXZlci5wcm90b3R5cGVcblx0XHQsIHNhdmVBcyA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRyZXR1cm4gbmV3IEZpbGVTYXZlcihibG9iLCBuYW1lLCBub19hdXRvX2JvbSk7XG5cdFx0fVxuXHQ7XG5cdC8vIElFIDEwKyAobmF0aXZlIHNhdmVBcylcblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUgfHwgXCJkb3dubG9hZFwiKTtcblx0XHR9O1xuXHR9XG5cblx0RlNfcHJvdG8uYWJvcnQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZmlsZXNhdmVyID0gdGhpcztcblx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdGRpc3BhdGNoKGZpbGVzYXZlciwgXCJhYm9ydFwiKTtcblx0fTtcblx0RlNfcHJvdG8ucmVhZHlTdGF0ZSA9IEZTX3Byb3RvLklOSVQgPSAwO1xuXHRGU19wcm90by5XUklUSU5HID0gMTtcblx0RlNfcHJvdG8uRE9ORSA9IDI7XG5cblx0RlNfcHJvdG8uZXJyb3IgPVxuXHRGU19wcm90by5vbndyaXRlc3RhcnQgPVxuXHRGU19wcm90by5vbnByb2dyZXNzID1cblx0RlNfcHJvdG8ub253cml0ZSA9XG5cdEZTX3Byb3RvLm9uYWJvcnQgPVxuXHRGU19wcm90by5vbmVycm9yID1cblx0RlNfcHJvdG8ub253cml0ZWVuZCA9XG5cdFx0bnVsbDtcblxuXHRyZXR1cm4gc2F2ZUFzO1xufShcblx0ICAgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZlxuXHR8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1xuXHR8fCB0aGlzLmNvbnRlbnRcbikpO1xuLy8gYHNlbGZgIGlzIHVuZGVmaW5lZCBpbiBGaXJlZm94IGZvciBBbmRyb2lkIGNvbnRlbnQgc2NyaXB0IGNvbnRleHRcbi8vIHdoaWxlIGB0aGlzYCBpcyBuc0lDb250ZW50RnJhbWVNZXNzYWdlTWFuYWdlclxuLy8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cy5zYXZlQXMgPSBzYXZlQXM7XG59IGVsc2UgaWYgKCh0eXBlb2YgZGVmaW5lICE9PSBcInVuZGVmaW5lZFwiICYmIGRlZmluZSAhPT0gbnVsbCkgJiYgKGRlZmluZS5hbWQgIT09IG51bGwpKSB7XG4gIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNhdmVBcztcbiAgfSk7XG59XG4iLCIvKmdsb2JhbCBkZWZpbmU6ZmFsc2UgKi9cbi8qKlxuICogQ29weXJpZ2h0IDIwMTItMjAxNyBDcmFpZyBDYW1wYmVsbFxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqIE1vdXNldHJhcCBpcyBhIHNpbXBsZSBrZXlib2FyZCBzaG9ydGN1dCBsaWJyYXJ5IGZvciBKYXZhc2NyaXB0IHdpdGhcbiAqIG5vIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuICpcbiAqIEB2ZXJzaW9uIDEuNi41XG4gKiBAdXJsIGNyYWlnLmlzL2tpbGxpbmcvbWljZVxuICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cbiAgICAvLyBDaGVjayBpZiBtb3VzZXRyYXAgaXMgdXNlZCBpbnNpZGUgYnJvd3NlciwgaWYgbm90LCByZXR1cm5cbiAgICBpZiAoIXdpbmRvdykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWFwcGluZyBvZiBzcGVjaWFsIGtleWNvZGVzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcga2V5c1xuICAgICAqXG4gICAgICogZXZlcnl0aGluZyBpbiB0aGlzIGRpY3Rpb25hcnkgY2Fubm90IHVzZSBrZXlwcmVzcyBldmVudHNcbiAgICAgKiBzbyBpdCBoYXMgdG8gYmUgaGVyZSB0byBtYXAgdG8gdGhlIGNvcnJlY3Qga2V5Y29kZXMgZm9yXG4gICAgICoga2V5dXAva2V5ZG93biBldmVudHNcbiAgICAgKlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdmFyIF9NQVAgPSB7XG4gICAgICAgIDg6ICdiYWNrc3BhY2UnLFxuICAgICAgICA5OiAndGFiJyxcbiAgICAgICAgMTM6ICdlbnRlcicsXG4gICAgICAgIDE2OiAnc2hpZnQnLFxuICAgICAgICAxNzogJ2N0cmwnLFxuICAgICAgICAxODogJ2FsdCcsXG4gICAgICAgIDIwOiAnY2Fwc2xvY2snLFxuICAgICAgICAyNzogJ2VzYycsXG4gICAgICAgIDMyOiAnc3BhY2UnLFxuICAgICAgICAzMzogJ3BhZ2V1cCcsXG4gICAgICAgIDM0OiAncGFnZWRvd24nLFxuICAgICAgICAzNTogJ2VuZCcsXG4gICAgICAgIDM2OiAnaG9tZScsXG4gICAgICAgIDM3OiAnbGVmdCcsXG4gICAgICAgIDM4OiAndXAnLFxuICAgICAgICAzOTogJ3JpZ2h0JyxcbiAgICAgICAgNDA6ICdkb3duJyxcbiAgICAgICAgNDU6ICdpbnMnLFxuICAgICAgICA0NjogJ2RlbCcsXG4gICAgICAgIDkxOiAnbWV0YScsXG4gICAgICAgIDkzOiAnbWV0YScsXG4gICAgICAgIDIyNDogJ21ldGEnXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIG1hcHBpbmcgZm9yIHNwZWNpYWwgY2hhcmFjdGVycyBzbyB0aGV5IGNhbiBzdXBwb3J0XG4gICAgICpcbiAgICAgKiB0aGlzIGRpY3Rpb25hcnkgaXMgb25seSB1c2VkIGluY2FzZSB5b3Ugd2FudCB0byBiaW5kIGFcbiAgICAgKiBrZXl1cCBvciBrZXlkb3duIGV2ZW50IHRvIG9uZSBvZiB0aGVzZSBrZXlzXG4gICAgICpcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHZhciBfS0VZQ09ERV9NQVAgPSB7XG4gICAgICAgIDEwNjogJyonLFxuICAgICAgICAxMDc6ICcrJyxcbiAgICAgICAgMTA5OiAnLScsXG4gICAgICAgIDExMDogJy4nLFxuICAgICAgICAxMTEgOiAnLycsXG4gICAgICAgIDE4NjogJzsnLFxuICAgICAgICAxODc6ICc9JyxcbiAgICAgICAgMTg4OiAnLCcsXG4gICAgICAgIDE4OTogJy0nLFxuICAgICAgICAxOTA6ICcuJyxcbiAgICAgICAgMTkxOiAnLycsXG4gICAgICAgIDE5MjogJ2AnLFxuICAgICAgICAyMTk6ICdbJyxcbiAgICAgICAgMjIwOiAnXFxcXCcsXG4gICAgICAgIDIyMTogJ10nLFxuICAgICAgICAyMjI6ICdcXCcnXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHRoaXMgaXMgYSBtYXBwaW5nIG9mIGtleXMgdGhhdCByZXF1aXJlIHNoaWZ0IG9uIGEgVVMga2V5cGFkXG4gICAgICogYmFjayB0byB0aGUgbm9uIHNoaWZ0IGVxdWl2ZWxlbnRzXG4gICAgICpcbiAgICAgKiB0aGlzIGlzIHNvIHlvdSBjYW4gdXNlIGtleXVwIGV2ZW50cyB3aXRoIHRoZXNlIGtleXNcbiAgICAgKlxuICAgICAqIG5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSB3b3JrIHJlbGlhYmx5IG9uIFVTIGtleWJvYXJkc1xuICAgICAqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB2YXIgX1NISUZUX01BUCA9IHtcbiAgICAgICAgJ34nOiAnYCcsXG4gICAgICAgICchJzogJzEnLFxuICAgICAgICAnQCc6ICcyJyxcbiAgICAgICAgJyMnOiAnMycsXG4gICAgICAgICckJzogJzQnLFxuICAgICAgICAnJSc6ICc1JyxcbiAgICAgICAgJ14nOiAnNicsXG4gICAgICAgICcmJzogJzcnLFxuICAgICAgICAnKic6ICc4JyxcbiAgICAgICAgJygnOiAnOScsXG4gICAgICAgICcpJzogJzAnLFxuICAgICAgICAnXyc6ICctJyxcbiAgICAgICAgJysnOiAnPScsXG4gICAgICAgICc6JzogJzsnLFxuICAgICAgICAnXFxcIic6ICdcXCcnLFxuICAgICAgICAnPCc6ICcsJyxcbiAgICAgICAgJz4nOiAnLicsXG4gICAgICAgICc/JzogJy8nLFxuICAgICAgICAnfCc6ICdcXFxcJ1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiB0aGlzIGlzIGEgbGlzdCBvZiBzcGVjaWFsIHN0cmluZ3MgeW91IGNhbiB1c2UgdG8gbWFwXG4gICAgICogdG8gbW9kaWZpZXIga2V5cyB3aGVuIHlvdSBzcGVjaWZ5IHlvdXIga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgICpcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHZhciBfU1BFQ0lBTF9BTElBU0VTID0ge1xuICAgICAgICAnb3B0aW9uJzogJ2FsdCcsXG4gICAgICAgICdjb21tYW5kJzogJ21ldGEnLFxuICAgICAgICAncmV0dXJuJzogJ2VudGVyJyxcbiAgICAgICAgJ2VzY2FwZSc6ICdlc2MnLFxuICAgICAgICAncGx1cyc6ICcrJyxcbiAgICAgICAgJ21vZCc6IC9NYWN8aVBvZHxpUGhvbmV8aVBhZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pID8gJ21ldGEnIDogJ2N0cmwnXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBmbGlwcGVkIHZlcnNpb24gb2YgX01BUCBmcm9tIGFib3ZlXG4gICAgICogbmVlZGVkIHRvIGNoZWNrIGlmIHdlIHNob3VsZCB1c2Uga2V5cHJlc3Mgb3Igbm90IHdoZW4gbm8gYWN0aW9uXG4gICAgICogaXMgc3BlY2lmaWVkXG4gICAgICpcbiAgICAgKiBAdHlwZSB7T2JqZWN0fHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB2YXIgX1JFVkVSU0VfTUFQO1xuXG4gICAgLyoqXG4gICAgICogbG9vcCB0aHJvdWdoIHRoZSBmIGtleXMsIGYxIHRvIGYxOSBhbmQgYWRkIHRoZW0gdG8gdGhlIG1hcFxuICAgICAqIHByb2dyYW1hdGljYWxseVxuICAgICAqL1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMjA7ICsraSkge1xuICAgICAgICBfTUFQWzExMSArIGldID0gJ2YnICsgaTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsb29wIHRocm91Z2ggdG8gbWFwIG51bWJlcnMgb24gdGhlIG51bWVyaWMga2V5cGFkXG4gICAgICovXG4gICAgZm9yIChpID0gMDsgaSA8PSA5OyArK2kpIHtcblxuICAgICAgICAvLyBUaGlzIG5lZWRzIHRvIHVzZSBhIHN0cmluZyBjYXVzZSBvdGhlcndpc2Ugc2luY2UgMCBpcyBmYWxzZXlcbiAgICAgICAgLy8gbW91c2V0cmFwIHdpbGwgbmV2ZXIgZmlyZSBmb3IgbnVtcGFkIDAgcHJlc3NlZCBhcyBwYXJ0IG9mIGEga2V5ZG93blxuICAgICAgICAvLyBldmVudC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2NhbXBiZWxsL21vdXNldHJhcC9wdWxsLzI1OFxuICAgICAgICBfTUFQW2kgKyA5Nl0gPSBpLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY3Jvc3MgYnJvd3NlciBhZGQgZXZlbnQgbWV0aG9kXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR8SFRNTERvY3VtZW50fSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9hZGRFdmVudChvYmplY3QsIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChvYmplY3QuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgb2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9iamVjdC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRha2VzIHRoZSBldmVudCBhbmQgcmV0dXJucyB0aGUga2V5IGNoYXJhY3RlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfY2hhcmFjdGVyRnJvbUV2ZW50KGUpIHtcblxuICAgICAgICAvLyBmb3Iga2V5cHJlc3MgZXZlbnRzIHdlIHNob3VsZCByZXR1cm4gdGhlIGNoYXJhY3RlciBhcyBpc1xuICAgICAgICBpZiAoZS50eXBlID09ICdrZXlwcmVzcycpIHtcbiAgICAgICAgICAgIHZhciBjaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgc2hpZnQga2V5IGlzIG5vdCBwcmVzc2VkIHRoZW4gaXQgaXMgc2FmZSB0byBhc3N1bWVcbiAgICAgICAgICAgIC8vIHRoYXQgd2Ugd2FudCB0aGUgY2hhcmFjdGVyIHRvIGJlIGxvd2VyY2FzZS4gIHRoaXMgbWVhbnMgaWZcbiAgICAgICAgICAgIC8vIHlvdSBhY2NpZGVudGFsbHkgaGF2ZSBjYXBzIGxvY2sgb24gdGhlbiB5b3VyIGtleSBiaW5kaW5nc1xuICAgICAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byB3b3JrXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gdGhlIG9ubHkgc2lkZSBlZmZlY3QgdGhhdCBtaWdodCBub3QgYmUgZGVzaXJlZCBpcyBpZiB5b3VcbiAgICAgICAgICAgIC8vIGJpbmQgc29tZXRoaW5nIGxpa2UgJ0EnIGNhdXNlIHlvdSB3YW50IHRvIHRyaWdnZXIgYW5cbiAgICAgICAgICAgIC8vIGV2ZW50IHdoZW4gY2FwaXRhbCBBIGlzIHByZXNzZWQgY2FwcyBsb2NrIHdpbGwgbm8gbG9uZ2VyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHRoZSBldmVudC4gIHNoaWZ0K2Egd2lsbCB0aG91Z2guXG4gICAgICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIgPSBjaGFyYWN0ZXIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNoYXJhY3RlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZvciBub24ga2V5cHJlc3MgZXZlbnRzIHRoZSBzcGVjaWFsIG1hcHMgYXJlIG5lZWRlZFxuICAgICAgICBpZiAoX01BUFtlLndoaWNoXSkge1xuICAgICAgICAgICAgcmV0dXJuIF9NQVBbZS53aGljaF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX0tFWUNPREVfTUFQW2Uud2hpY2hdKSB7XG4gICAgICAgICAgICByZXR1cm4gX0tFWUNPREVfTUFQW2Uud2hpY2hdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgaXQgaXMgbm90IGluIHRoZSBzcGVjaWFsIG1hcFxuXG4gICAgICAgIC8vIHdpdGgga2V5ZG93biBhbmQga2V5dXAgZXZlbnRzIHRoZSBjaGFyYWN0ZXIgc2VlbXMgdG8gYWx3YXlzXG4gICAgICAgIC8vIGNvbWUgaW4gYXMgYW4gdXBwZXJjYXNlIGNoYXJhY3RlciB3aGV0aGVyIHlvdSBhcmUgcHJlc3Npbmcgc2hpZnRcbiAgICAgICAgLy8gb3Igbm90LiAgd2Ugc2hvdWxkIG1ha2Ugc3VyZSBpdCBpcyBhbHdheXMgbG93ZXJjYXNlIGZvciBjb21wYXJpc29uc1xuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNoZWNrcyBpZiB0d28gYXJyYXlzIGFyZSBlcXVhbFxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gbW9kaWZpZXJzMVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG1vZGlmaWVyczJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfbW9kaWZpZXJzTWF0Y2gobW9kaWZpZXJzMSwgbW9kaWZpZXJzMikge1xuICAgICAgICByZXR1cm4gbW9kaWZpZXJzMS5zb3J0KCkuam9pbignLCcpID09PSBtb2RpZmllcnMyLnNvcnQoKS5qb2luKCcsJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdGFrZXMgYSBrZXkgZXZlbnQgYW5kIGZpZ3VyZXMgb3V0IHdoYXQgdGhlIG1vZGlmaWVycyBhcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICovXG4gICAgZnVuY3Rpb24gX2V2ZW50TW9kaWZpZXJzKGUpIHtcbiAgICAgICAgdmFyIG1vZGlmaWVycyA9IFtdO1xuXG4gICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBtb2RpZmllcnMucHVzaCgnc2hpZnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLmFsdEtleSkge1xuICAgICAgICAgICAgbW9kaWZpZXJzLnB1c2goJ2FsdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgbW9kaWZpZXJzLnB1c2goJ2N0cmwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLm1ldGFLZXkpIHtcbiAgICAgICAgICAgIG1vZGlmaWVycy5wdXNoKCdtZXRhJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbW9kaWZpZXJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHByZXZlbnRzIGRlZmF1bHQgZm9yIHRoaXMgZXZlbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgZnVuY3Rpb24gX3ByZXZlbnREZWZhdWx0KGUpIHtcbiAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdG9wcyBwcm9wb2dhdGlvbiBmb3IgdGhpcyBldmVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc3RvcFByb3BhZ2F0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRldGVybWluZXMgaWYgdGhlIGtleWNvZGUgc3BlY2lmaWVkIGlzIGEgbW9kaWZpZXIga2V5IG9yIG5vdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9pc01vZGlmaWVyKGtleSkge1xuICAgICAgICByZXR1cm4ga2V5ID09ICdzaGlmdCcgfHwga2V5ID09ICdjdHJsJyB8fCBrZXkgPT0gJ2FsdCcgfHwga2V5ID09ICdtZXRhJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXZlcnNlcyB0aGUgbWFwIGxvb2t1cCBzbyB0aGF0IHdlIGNhbiBsb29rIGZvciBzcGVjaWZpYyBrZXlzXG4gICAgICogdG8gc2VlIHdoYXQgY2FuIGFuZCBjYW4ndCB1c2Uga2V5cHJlc3NcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfZ2V0UmV2ZXJzZU1hcCgpIHtcbiAgICAgICAgaWYgKCFfUkVWRVJTRV9NQVApIHtcbiAgICAgICAgICAgIF9SRVZFUlNFX01BUCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF9NQVApIHtcblxuICAgICAgICAgICAgICAgIC8vIHB1bGwgb3V0IHRoZSBudW1lcmljIGtleXBhZCBmcm9tIGhlcmUgY2F1c2Uga2V5cHJlc3Mgc2hvdWxkXG4gICAgICAgICAgICAgICAgLy8gYmUgYWJsZSB0byBkZXRlY3QgdGhlIGtleXMgZnJvbSB0aGUgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA+IDk1ICYmIGtleSA8IDExMikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoX01BUC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9SRVZFUlNFX01BUFtfTUFQW2tleV1dID0ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX1JFVkVSU0VfTUFQO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHBpY2tzIHRoZSBiZXN0IGFjdGlvbiBiYXNlZCBvbiB0aGUga2V5IGNvbWJpbmF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gY2hhcmFjdGVyIGZvciBrZXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBtb2RpZmllcnNcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGFjdGlvbiBwYXNzZWQgaW5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfcGlja0Jlc3RBY3Rpb24oa2V5LCBtb2RpZmllcnMsIGFjdGlvbikge1xuXG4gICAgICAgIC8vIGlmIG5vIGFjdGlvbiB3YXMgcGlja2VkIGluIHdlIHNob3VsZCB0cnkgdG8gcGljayB0aGUgb25lXG4gICAgICAgIC8vIHRoYXQgd2UgdGhpbmsgd291bGQgd29yayBiZXN0IGZvciB0aGlzIGtleVxuICAgICAgICBpZiAoIWFjdGlvbikge1xuICAgICAgICAgICAgYWN0aW9uID0gX2dldFJldmVyc2VNYXAoKVtrZXldID8gJ2tleWRvd24nIDogJ2tleXByZXNzJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vZGlmaWVyIGtleXMgZG9uJ3Qgd29yayBhcyBleHBlY3RlZCB3aXRoIGtleXByZXNzLFxuICAgICAgICAvLyBzd2l0Y2ggdG8ga2V5ZG93blxuICAgICAgICBpZiAoYWN0aW9uID09ICdrZXlwcmVzcycgJiYgbW9kaWZpZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgYWN0aW9uID0gJ2tleWRvd24nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBmcm9tIGEgc3RyaW5nIGtleSBjb21iaW5hdGlvbiB0byBhbiBhcnJheVxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjb21iaW5hdGlvbiBsaWtlIFwiY29tbWFuZCtzaGlmdCtsXCJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfa2V5c0Zyb21TdHJpbmcoY29tYmluYXRpb24pIHtcbiAgICAgICAgaWYgKGNvbWJpbmF0aW9uID09PSAnKycpIHtcbiAgICAgICAgICAgIHJldHVybiBbJysnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbWJpbmF0aW9uID0gY29tYmluYXRpb24ucmVwbGFjZSgvXFwrezJ9L2csICcrcGx1cycpO1xuICAgICAgICByZXR1cm4gY29tYmluYXRpb24uc3BsaXQoJysnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGluZm8gZm9yIGEgc3BlY2lmaWMga2V5IGNvbWJpbmF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbWJpbmF0aW9uIGtleSBjb21iaW5hdGlvbiAoXCJjb21tYW5kK3NcIiBvciBcImFcIiBvciBcIipcIilcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmc9fSBhY3Rpb25cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9nZXRLZXlJbmZvKGNvbWJpbmF0aW9uLCBhY3Rpb24pIHtcbiAgICAgICAgdmFyIGtleXM7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgbW9kaWZpZXJzID0gW107XG5cbiAgICAgICAgLy8gdGFrZSB0aGUga2V5cyBmcm9tIHRoaXMgcGF0dGVybiBhbmQgZmlndXJlIG91dCB3aGF0IHRoZSBhY3R1YWxcbiAgICAgICAgLy8gcGF0dGVybiBpcyBhbGwgYWJvdXRcbiAgICAgICAga2V5cyA9IF9rZXlzRnJvbVN0cmluZyhjb21iaW5hdGlvbik7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGtleSA9IGtleXNbaV07XG5cbiAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBrZXkgbmFtZXNcbiAgICAgICAgICAgIGlmIChfU1BFQ0lBTF9BTElBU0VTW2tleV0pIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBfU1BFQ0lBTF9BTElBU0VTW2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgbm90IGEga2V5cHJlc3MgZXZlbnQgdGhlbiB3ZSBzaG91bGRcbiAgICAgICAgICAgIC8vIGJlIHNtYXJ0IGFib3V0IHVzaW5nIHNoaWZ0IGtleXNcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBvbmx5IHdvcmsgZm9yIFVTIGtleWJvYXJkcyBob3dldmVyXG4gICAgICAgICAgICBpZiAoYWN0aW9uICYmIGFjdGlvbiAhPSAna2V5cHJlc3MnICYmIF9TSElGVF9NQVBba2V5XSkge1xuICAgICAgICAgICAgICAgIGtleSA9IF9TSElGVF9NQVBba2V5XTtcbiAgICAgICAgICAgICAgICBtb2RpZmllcnMucHVzaCgnc2hpZnQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhpcyBrZXkgaXMgYSBtb2RpZmllciB0aGVuIGFkZCBpdCB0byB0aGUgbGlzdCBvZiBtb2RpZmllcnNcbiAgICAgICAgICAgIGlmIChfaXNNb2RpZmllcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRlcGVuZGluZyBvbiB3aGF0IHRoZSBrZXkgY29tYmluYXRpb24gaXNcbiAgICAgICAgLy8gd2Ugd2lsbCB0cnkgdG8gcGljayB0aGUgYmVzdCBldmVudCBmb3IgaXRcbiAgICAgICAgYWN0aW9uID0gX3BpY2tCZXN0QWN0aW9uKGtleSwgbW9kaWZpZXJzLCBhY3Rpb24pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYmVsb25nc1RvKGVsZW1lbnQsIGFuY2VzdG9yKSB7XG4gICAgICAgIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IGRvY3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudCA9PT0gYW5jZXN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9iZWxvbmdzVG8oZWxlbWVudC5wYXJlbnROb2RlLCBhbmNlc3Rvcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTW91c2V0cmFwKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRhcmdldEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50IHx8IGRvY3VtZW50O1xuXG4gICAgICAgIGlmICghKHNlbGYgaW5zdGFuY2VvZiBNb3VzZXRyYXApKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1vdXNldHJhcCh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBlbGVtZW50IHRvIGF0dGFjaCBrZXkgZXZlbnRzIHRvXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi50YXJnZXQgPSB0YXJnZXRFbGVtZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhIGxpc3Qgb2YgYWxsIHRoZSBjYWxsYmFja3Mgc2V0dXAgdmlhIE1vdXNldHJhcC5iaW5kKClcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuX2NhbGxiYWNrcyA9IHt9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkaXJlY3QgbWFwIG9mIHN0cmluZyBjb21iaW5hdGlvbnMgdG8gY2FsbGJhY2tzIHVzZWQgZm9yIHRyaWdnZXIoKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5fZGlyZWN0TWFwID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGtlZXBzIHRyYWNrIG9mIHdoYXQgbGV2ZWwgZWFjaCBzZXF1ZW5jZSBpcyBhdCBzaW5jZSBtdWx0aXBsZVxuICAgICAgICAgKiBzZXF1ZW5jZXMgY2FuIHN0YXJ0IG91dCB3aXRoIHRoZSBzYW1lIHNlcXVlbmNlXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgX3NlcXVlbmNlTGV2ZWxzID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBzZXRUaW1lb3V0IGNhbGxcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge251bGx8bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIF9yZXNldFRpbWVyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0ZW1wb3Jhcnkgc3RhdGUgd2hlcmUgd2Ugd2lsbCBpZ25vcmUgdGhlIG5leHQga2V5dXBcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW58c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIF9pZ25vcmVOZXh0S2V5dXAgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGVtcG9yYXJ5IHN0YXRlIHdoZXJlIHdlIHdpbGwgaWdub3JlIHRoZSBuZXh0IGtleXByZXNzXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIF9pZ25vcmVOZXh0S2V5cHJlc3MgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYXJlIHdlIGN1cnJlbnRseSBpbnNpZGUgb2YgYSBzZXF1ZW5jZT9cbiAgICAgICAgICogdHlwZSBvZiBhY3Rpb24gKFwia2V5dXBcIiBvciBcImtleWRvd25cIiBvciBcImtleXByZXNzXCIpIG9yIGZhbHNlXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufHN0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHZhciBfbmV4dEV4cGVjdGVkQWN0aW9uID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlc2V0cyBhbGwgc2VxdWVuY2UgY291bnRlcnMgZXhjZXB0IGZvciB0aGUgb25lcyBwYXNzZWQgaW5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRvTm90UmVzZXRcbiAgICAgICAgICogQHJldHVybnMgdm9pZFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3Jlc2V0U2VxdWVuY2VzKGRvTm90UmVzZXQpIHtcbiAgICAgICAgICAgIGRvTm90UmVzZXQgPSBkb05vdFJlc2V0IHx8IHt9O1xuXG4gICAgICAgICAgICB2YXIgYWN0aXZlU2VxdWVuY2VzID0gZmFsc2UsXG4gICAgICAgICAgICAgICAga2V5O1xuXG4gICAgICAgICAgICBmb3IgKGtleSBpbiBfc2VxdWVuY2VMZXZlbHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9Ob3RSZXNldFtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNlcXVlbmNlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfc2VxdWVuY2VMZXZlbHNba2V5XSA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghYWN0aXZlU2VxdWVuY2VzKSB7XG4gICAgICAgICAgICAgICAgX25leHRFeHBlY3RlZEFjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZpbmRzIGFsbCBjYWxsYmFja3MgdGhhdCBtYXRjaCBiYXNlZCBvbiB0aGUga2V5Y29kZSwgbW9kaWZpZXJzLFxuICAgICAgICAgKiBhbmQgYWN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gbW9kaWZpZXJzXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR8T2JqZWN0fSBlXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gc2VxdWVuY2VOYW1lIC0gbmFtZSBvZiB0aGUgc2VxdWVuY2Ugd2UgYXJlIGxvb2tpbmcgZm9yXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gY29tYmluYXRpb25cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXI9fSBsZXZlbFxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfZ2V0TWF0Y2hlcyhjaGFyYWN0ZXIsIG1vZGlmaWVycywgZSwgc2VxdWVuY2VOYW1lLCBjb21iaW5hdGlvbiwgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrO1xuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSBlLnR5cGU7XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBldmVudHMgcmVsYXRlZCB0byB0aGlzIGtleWNvZGVcbiAgICAgICAgICAgIGlmICghc2VsZi5fY2FsbGJhY2tzW2NoYXJhY3Rlcl0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIGEgbW9kaWZpZXIga2V5IGlzIGNvbWluZyB1cCBvbiBpdHMgb3duIHdlIHNob3VsZCBhbGxvdyBpdFxuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSAna2V5dXAnICYmIF9pc01vZGlmaWVyKGNoYXJhY3RlcikpIHtcbiAgICAgICAgICAgICAgICBtb2RpZmllcnMgPSBbY2hhcmFjdGVyXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGFsbCBjYWxsYmFja3MgZm9yIHRoZSBrZXkgdGhhdCB3YXMgcHJlc3NlZFxuICAgICAgICAgICAgLy8gYW5kIHNlZSBpZiBhbnkgb2YgdGhlbSBtYXRjaFxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbGYuX2NhbGxiYWNrc1tjaGFyYWN0ZXJdLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBzZWxmLl9jYWxsYmFja3NbY2hhcmFjdGVyXVtpXTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIGEgc2VxdWVuY2UgbmFtZSBpcyBub3Qgc3BlY2lmaWVkLCBidXQgdGhpcyBpcyBhIHNlcXVlbmNlIGF0XG4gICAgICAgICAgICAgICAgLy8gdGhlIHdyb25nIGxldmVsIHRoZW4gbW92ZSBvbnRvIHRoZSBuZXh0IG1hdGNoXG4gICAgICAgICAgICAgICAgaWYgKCFzZXF1ZW5jZU5hbWUgJiYgY2FsbGJhY2suc2VxICYmIF9zZXF1ZW5jZUxldmVsc1tjYWxsYmFjay5zZXFdICE9IGNhbGxiYWNrLmxldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBhY3Rpb24gd2UgYXJlIGxvb2tpbmcgZm9yIGRvZXNuJ3QgbWF0Y2ggdGhlIGFjdGlvbiB3ZSBnb3RcbiAgICAgICAgICAgICAgICAvLyB0aGVuIHdlIHNob3VsZCBrZWVwIGdvaW5nXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiAhPSBjYWxsYmFjay5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGtleXByZXNzIGV2ZW50IGFuZCB0aGUgbWV0YSBrZXkgYW5kIGNvbnRyb2wga2V5XG4gICAgICAgICAgICAgICAgLy8gYXJlIG5vdCBwcmVzc2VkIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIG9ubHkgbG9vayBhdCB0aGVcbiAgICAgICAgICAgICAgICAvLyBjaGFyYWN0ZXIsIG90aGVyd2lzZSBjaGVjayB0aGUgbW9kaWZpZXJzIGFzIHdlbGxcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIGNocm9tZSB3aWxsIG5vdCBmaXJlIGEga2V5cHJlc3MgaWYgbWV0YSBvciBjb250cm9sIGlzIGRvd25cbiAgICAgICAgICAgICAgICAvLyBzYWZhcmkgd2lsbCBmaXJlIGEga2V5cHJlc3MgaWYgbWV0YSBvciBtZXRhK3NoaWZ0IGlzIGRvd25cbiAgICAgICAgICAgICAgICAvLyBmaXJlZm94IHdpbGwgZmlyZSBhIGtleXByZXNzIGlmIG1ldGEgb3IgY29udHJvbCBpcyBkb3duXG4gICAgICAgICAgICAgICAgaWYgKChhY3Rpb24gPT0gJ2tleXByZXNzJyAmJiAhZS5tZXRhS2V5ICYmICFlLmN0cmxLZXkpIHx8IF9tb2RpZmllcnNNYXRjaChtb2RpZmllcnMsIGNhbGxiYWNrLm1vZGlmaWVycykpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHlvdSBiaW5kIGEgY29tYmluYXRpb24gb3Igc2VxdWVuY2UgYSBzZWNvbmQgdGltZSBpdFxuICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQgb3ZlcndyaXRlIHRoZSBmaXJzdCBvbmUuICBpZiBhIHNlcXVlbmNlTmFtZSBvclxuICAgICAgICAgICAgICAgICAgICAvLyBjb21iaW5hdGlvbiBpcyBzcGVjaWZpZWQgaW4gdGhpcyBjYWxsIGl0IGRvZXMganVzdCB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0b2RvIG1ha2UgZGVsZXRpbmcgaXRzIG93biBtZXRob2Q/XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGVDb21ibyA9ICFzZXF1ZW5jZU5hbWUgJiYgY2FsbGJhY2suY29tYm8gPT0gY29tYmluYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGVTZXF1ZW5jZSA9IHNlcXVlbmNlTmFtZSAmJiBjYWxsYmFjay5zZXEgPT0gc2VxdWVuY2VOYW1lICYmIGNhbGxiYWNrLmxldmVsID09IGxldmVsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlQ29tYm8gfHwgZGVsZXRlU2VxdWVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrc1tjaGFyYWN0ZXJdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhY3R1YWxseSBjYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogaWYgeW91ciBjYWxsYmFjayBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIHRoaXMgd2lsbCB1c2UgdGhlIGpxdWVyeVxuICAgICAgICAgKiBjb252ZW50aW9uIC0gcHJldmVudCBkZWZhdWx0IGFuZCBzdG9wIHByb3BvZ2F0aW9uIG9uIHRoZSBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9maXJlQ2FsbGJhY2soY2FsbGJhY2ssIGUsIGNvbWJvLCBzZXF1ZW5jZSkge1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGV2ZW50IHNob3VsZCBub3QgaGFwcGVuIHN0b3AgaGVyZVxuICAgICAgICAgICAgaWYgKHNlbGYuc3RvcENhbGxiYWNrKGUsIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCwgY29tYm8sIHNlcXVlbmNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGUsIGNvbWJvKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgICAgICAgICAgX3N0b3BQcm9wYWdhdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBoYW5kbGVzIGEgY2hhcmFjdGVyIGtleSBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IG1vZGlmaWVyc1xuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuX2hhbmRsZUtleSA9IGZ1bmN0aW9uKGNoYXJhY3RlciwgbW9kaWZpZXJzLCBlKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tzID0gX2dldE1hdGNoZXMoY2hhcmFjdGVyLCBtb2RpZmllcnMsIGUpO1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICB2YXIgZG9Ob3RSZXNldCA9IHt9O1xuICAgICAgICAgICAgdmFyIG1heExldmVsID0gMDtcbiAgICAgICAgICAgIHZhciBwcm9jZXNzZWRTZXF1ZW5jZUNhbGxiYWNrID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbWF4TGV2ZWwgZm9yIHNlcXVlbmNlcyBzbyB3ZSBjYW4gb25seSBleGVjdXRlIHRoZSBsb25nZXN0IGNhbGxiYWNrIHNlcXVlbmNlXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrc1tpXS5zZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4TGV2ZWwgPSBNYXRoLm1heChtYXhMZXZlbCwgY2FsbGJhY2tzW2ldLmxldmVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBtYXRjaGluZyBjYWxsYmFja3MgZm9yIHRoaXMga2V5IGV2ZW50XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgKytpKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBmaXJlIGZvciBhbGwgc2VxdWVuY2UgY2FsbGJhY2tzXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBiZWNhdXNlIGlmIGZvciBleGFtcGxlIHlvdSBoYXZlIG11bHRpcGxlIHNlcXVlbmNlc1xuICAgICAgICAgICAgICAgIC8vIGJvdW5kIHN1Y2ggYXMgXCJnIGlcIiBhbmQgXCJnIHRcIiB0aGV5IGJvdGggbmVlZCB0byBmaXJlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrIGZvciBtYXRjaGluZyBnIGNhdXNlIG90aGVyd2lzZSB5b3UgY2FuIG9ubHkgZXZlclxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzW2ldLnNlcSkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgZmlyZSBjYWxsYmFja3MgZm9yIHRoZSBtYXhMZXZlbCB0byBwcmV2ZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnNlcXVlbmNlcyBmcm9tIGFsc28gZmlyaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciBleGFtcGxlICdhIG9wdGlvbiBiJyBzaG91bGQgbm90IGNhdXNlICdvcHRpb24gYicgdG8gZmlyZVxuICAgICAgICAgICAgICAgICAgICAvLyBldmVuIHRob3VnaCAnb3B0aW9uIGInIGlzIHBhcnQgb2YgdGhlIG90aGVyIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGFueSBzZXF1ZW5jZXMgdGhhdCBkbyBub3QgbWF0Y2ggaGVyZSB3aWxsIGJlIGRpc2NhcmRlZFxuICAgICAgICAgICAgICAgICAgICAvLyBiZWxvdyBieSB0aGUgX3Jlc2V0U2VxdWVuY2VzIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrc1tpXS5sZXZlbCAhPSBtYXhMZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRTZXF1ZW5jZUNhbGxiYWNrID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIGEgbGlzdCBvZiB3aGljaCBzZXF1ZW5jZXMgd2VyZSBtYXRjaGVzIGZvciBsYXRlclxuICAgICAgICAgICAgICAgICAgICBkb05vdFJlc2V0W2NhbGxiYWNrc1tpXS5zZXFdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgX2ZpcmVDYWxsYmFjayhjYWxsYmFja3NbaV0uY2FsbGJhY2ssIGUsIGNhbGxiYWNrc1tpXS5jb21ibywgY2FsbGJhY2tzW2ldLnNlcSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdlcmUgbm8gc2VxdWVuY2UgbWF0Y2hlcyBidXQgd2UgYXJlIHN0aWxsIGhlcmVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IG1lYW5zIHRoaXMgaXMgYSByZWd1bGFyIG1hdGNoIHNvIHdlIHNob3VsZCBmaXJlIHRoYXRcbiAgICAgICAgICAgICAgICBpZiAoIXByb2Nlc3NlZFNlcXVlbmNlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgX2ZpcmVDYWxsYmFjayhjYWxsYmFja3NbaV0uY2FsbGJhY2ssIGUsIGNhbGxiYWNrc1tpXS5jb21ibyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0aGUga2V5IHlvdSBwcmVzc2VkIG1hdGNoZXMgdGhlIHR5cGUgb2Ygc2VxdWVuY2Ugd2l0aG91dFxuICAgICAgICAgICAgLy8gYmVpbmcgYSBtb2RpZmllciAoaWUgXCJrZXl1cFwiIG9yIFwia2V5cHJlc3NcIikgdGhlbiB3ZSBzaG91bGRcbiAgICAgICAgICAgIC8vIHJlc2V0IGFsbCBzZXF1ZW5jZXMgdGhhdCB3ZXJlIG5vdCBtYXRjaGVkIGJ5IHRoaXMgZXZlbnRcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHNvLCBmb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUgdGhlIHNlcXVlbmNlIFwiaCBhIHRcIiBhbmQgeW91XG4gICAgICAgICAgICAvLyB0eXBlIFwiaCBlIGEgciB0XCIgaXQgZG9lcyBub3QgbWF0Y2guICBpbiB0aGlzIGNhc2UgdGhlIFwiZVwiIHdpbGxcbiAgICAgICAgICAgIC8vIGNhdXNlIHRoZSBzZXF1ZW5jZSB0byByZXNldFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIG1vZGlmaWVyIGtleXMgYXJlIGlnbm9yZWQgYmVjYXVzZSB5b3UgY2FuIGhhdmUgYSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gdGhhdCBjb250YWlucyBtb2RpZmllcnMgc3VjaCBhcyBcImVudGVyIGN0cmwrc3BhY2VcIiBhbmQgaW4gbW9zdFxuICAgICAgICAgICAgLy8gY2FzZXMgdGhlIG1vZGlmaWVyIGtleSB3aWxsIGJlIHByZXNzZWQgYmVmb3JlIHRoZSBuZXh0IGtleVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIGFsc28gaWYgeW91IGhhdmUgYSBzZXF1ZW5jZSBzdWNoIGFzIFwiY3RybCtiIGFcIiB0aGVuIHByZXNzaW5nIHRoZVxuICAgICAgICAgICAgLy8gXCJiXCIga2V5IHdpbGwgdHJpZ2dlciBhIFwia2V5cHJlc3NcIiBhbmQgYSBcImtleWRvd25cIlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIHRoZSBcImtleWRvd25cIiBpcyBleHBlY3RlZCB3aGVuIHRoZXJlIGlzIGEgbW9kaWZpZXIsIGJ1dCB0aGVcbiAgICAgICAgICAgIC8vIFwia2V5cHJlc3NcIiBlbmRzIHVwIG1hdGNoaW5nIHRoZSBfbmV4dEV4cGVjdGVkQWN0aW9uIHNpbmNlIGl0IG9jY3Vyc1xuICAgICAgICAgICAgLy8gYWZ0ZXIgYW5kIHRoYXQgY2F1c2VzIHRoZSBzZXF1ZW5jZSB0byByZXNldFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIHdlIGlnbm9yZSBrZXlwcmVzc2VzIGluIGEgc2VxdWVuY2UgdGhhdCBkaXJlY3RseSBmb2xsb3cgYSBrZXlkb3duXG4gICAgICAgICAgICAvLyBmb3IgdGhlIHNhbWUgY2hhcmFjdGVyXG4gICAgICAgICAgICB2YXIgaWdub3JlVGhpc0tleXByZXNzID0gZS50eXBlID09ICdrZXlwcmVzcycgJiYgX2lnbm9yZU5leHRLZXlwcmVzcztcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT0gX25leHRFeHBlY3RlZEFjdGlvbiAmJiAhX2lzTW9kaWZpZXIoY2hhcmFjdGVyKSAmJiAhaWdub3JlVGhpc0tleXByZXNzKSB7XG4gICAgICAgICAgICAgICAgX3Jlc2V0U2VxdWVuY2VzKGRvTm90UmVzZXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfaWdub3JlTmV4dEtleXByZXNzID0gcHJvY2Vzc2VkU2VxdWVuY2VDYWxsYmFjayAmJiBlLnR5cGUgPT0gJ2tleWRvd24nO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBoYW5kbGVzIGEga2V5ZG93biBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9oYW5kbGVLZXlFdmVudChlKSB7XG5cbiAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBlLndoaWNoIGZvciBrZXkgZXZlbnRzXG4gICAgICAgICAgICAvLyBAc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDI4NTYyNy9qYXZhc2NyaXB0LWtleWNvZGUtdnMtY2hhcmNvZGUtdXR0ZXItY29uZnVzaW9uXG4gICAgICAgICAgICBpZiAodHlwZW9mIGUud2hpY2ggIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgZS53aGljaCA9IGUua2V5Q29kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNoYXJhY3RlciA9IF9jaGFyYWN0ZXJGcm9tRXZlbnQoZSk7XG5cbiAgICAgICAgICAgIC8vIG5vIGNoYXJhY3RlciBmb3VuZCB0aGVuIHN0b3BcbiAgICAgICAgICAgIGlmICghY2hhcmFjdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBuZWVkIHRvIHVzZSA9PT0gZm9yIHRoZSBjaGFyYWN0ZXIgY2hlY2sgYmVjYXVzZSB0aGUgY2hhcmFjdGVyIGNhbiBiZSAwXG4gICAgICAgICAgICBpZiAoZS50eXBlID09ICdrZXl1cCcgJiYgX2lnbm9yZU5leHRLZXl1cCA9PT0gY2hhcmFjdGVyKSB7XG4gICAgICAgICAgICAgICAgX2lnbm9yZU5leHRLZXl1cCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5oYW5kbGVLZXkoY2hhcmFjdGVyLCBfZXZlbnRNb2RpZmllcnMoZSksIGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB0byBzZXQgYSAxIHNlY29uZCB0aW1lb3V0IG9uIHRoZSBzcGVjaWZpZWQgc2VxdWVuY2VcbiAgICAgICAgICpcbiAgICAgICAgICogdGhpcyBpcyBzbyBhZnRlciBlYWNoIGtleSBwcmVzcyBpbiB0aGUgc2VxdWVuY2UgeW91IGhhdmUgMSBzZWNvbmRcbiAgICAgICAgICogdG8gcHJlc3MgdGhlIG5leHQga2V5IGJlZm9yZSB5b3UgaGF2ZSB0byBzdGFydCBvdmVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9yZXNldFNlcXVlbmNlVGltZXIoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoX3Jlc2V0VGltZXIpO1xuICAgICAgICAgICAgX3Jlc2V0VGltZXIgPSBzZXRUaW1lb3V0KF9yZXNldFNlcXVlbmNlcywgMTAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogYmluZHMgYSBrZXkgc2VxdWVuY2UgdG8gYW4gZXZlbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbWJvIC0gY29tYm8gc3BlY2lmaWVkIGluIGJpbmQgY2FsbFxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBrZXlzXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYWN0aW9uXG4gICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9iaW5kU2VxdWVuY2UoY29tYm8sIGtleXMsIGNhbGxiYWNrLCBhY3Rpb24pIHtcblxuICAgICAgICAgICAgLy8gc3RhcnQgb2ZmIGJ5IGFkZGluZyBhIHNlcXVlbmNlIGxldmVsIHJlY29yZCBmb3IgdGhpcyBjb21iaW5hdGlvblxuICAgICAgICAgICAgLy8gYW5kIHNldHRpbmcgdGhlIGxldmVsIHRvIDBcbiAgICAgICAgICAgIF9zZXF1ZW5jZUxldmVsc1tjb21ib10gPSAwO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGNhbGxiYWNrIHRvIGluY3JlYXNlIHRoZSBzZXF1ZW5jZSBsZXZlbCBmb3IgdGhpcyBzZXF1ZW5jZSBhbmQgcmVzZXRcbiAgICAgICAgICAgICAqIGFsbCBvdGhlciBzZXF1ZW5jZXMgdGhhdCB3ZXJlIGFjdGl2ZVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0QWN0aW9uXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9pbmNyZWFzZVNlcXVlbmNlKG5leHRBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF9uZXh0RXhwZWN0ZWRBY3Rpb24gPSBuZXh0QWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICArK19zZXF1ZW5jZUxldmVsc1tjb21ib107XG4gICAgICAgICAgICAgICAgICAgIF9yZXNldFNlcXVlbmNlVGltZXIoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHdyYXBzIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgaW5zaWRlIG9mIGFub3RoZXIgZnVuY3Rpb24gaW4gb3JkZXJcbiAgICAgICAgICAgICAqIHRvIHJlc2V0IGFsbCBzZXF1ZW5jZSBjb3VudGVycyBhcyBzb29uIGFzIHRoaXMgc2VxdWVuY2UgaXMgZG9uZVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX2NhbGxiYWNrQW5kUmVzZXQoZSkge1xuICAgICAgICAgICAgICAgIF9maXJlQ2FsbGJhY2soY2FsbGJhY2ssIGUsIGNvbWJvKTtcblxuICAgICAgICAgICAgICAgIC8vIHdlIHNob3VsZCBpZ25vcmUgdGhlIG5leHQga2V5IHVwIGlmIHRoZSBhY3Rpb24gaXMga2V5IGRvd25cbiAgICAgICAgICAgICAgICAvLyBvciBrZXlwcmVzcy4gIHRoaXMgaXMgc28gaWYgeW91IGZpbmlzaCBhIHNlcXVlbmNlIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbGVhc2UgdGhlIGtleSB0aGUgZmluYWwga2V5IHdpbGwgbm90IHRyaWdnZXIgYSBrZXl1cFxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gIT09ICdrZXl1cCcpIHtcbiAgICAgICAgICAgICAgICAgICAgX2lnbm9yZU5leHRLZXl1cCA9IF9jaGFyYWN0ZXJGcm9tRXZlbnQoZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gd2VpcmQgcmFjZSBjb25kaXRpb24gaWYgYSBzZXF1ZW5jZSBlbmRzIHdpdGggdGhlIGtleVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgc2VxdWVuY2UgYmVnaW5zIHdpdGhcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9yZXNldFNlcXVlbmNlcywgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2gga2V5cyBvbmUgYXQgYSB0aW1lIGFuZCBiaW5kIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24uICBmb3IgYW55IGtleSBsZWFkaW5nIHVwIHRvIHRoZSBmaW5hbCBvbmUgaXQgc2hvdWxkXG4gICAgICAgICAgICAvLyBpbmNyZWFzZSB0aGUgc2VxdWVuY2UuIGFmdGVyIHRoZSBmaW5hbCwgaXQgc2hvdWxkIHJlc2V0IGFsbCBzZXF1ZW5jZXNcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBpZiBhbiBhY3Rpb24gaXMgc3BlY2lmaWVkIGluIHRoZSBvcmlnaW5hbCBiaW5kIGNhbGwgdGhlbiB0aGF0IHdpbGxcbiAgICAgICAgICAgIC8vIGJlIHVzZWQgdGhyb3VnaG91dC4gIG90aGVyd2lzZSB3ZSB3aWxsIHBhc3MgdGhlIGFjdGlvbiB0aGF0IHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBrZXkgaW4gdGhlIHNlcXVlbmNlIHNob3VsZCBtYXRjaC4gIHRoaXMgYWxsb3dzIGEgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIHRvIG1peCBhbmQgbWF0Y2gga2V5cHJlc3MgYW5kIGtleWRvd24gZXZlbnRzIGRlcGVuZGluZyBvbiB3aGljaFxuICAgICAgICAgICAgLy8gb25lcyBhcmUgYmV0dGVyIHN1aXRlZCB0byB0aGUga2V5IHByb3ZpZGVkXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNGaW5hbCA9IGkgKyAxID09PSBrZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZENhbGxiYWNrID0gaXNGaW5hbCA/IF9jYWxsYmFja0FuZFJlc2V0IDogX2luY3JlYXNlU2VxdWVuY2UoYWN0aW9uIHx8IF9nZXRLZXlJbmZvKGtleXNbaSArIDFdKS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIF9iaW5kU2luZ2xlKGtleXNbaV0sIHdyYXBwZWRDYWxsYmFjaywgYWN0aW9uLCBjb21ibywgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogYmluZHMgYSBzaW5nbGUga2V5Ym9hcmQgY29tYmluYXRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbWJpbmF0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYWN0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gc2VxdWVuY2VOYW1lIC0gbmFtZSBvZiBzZXF1ZW5jZSBpZiBwYXJ0IG9mIHNlcXVlbmNlXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbGV2ZWwgLSB3aGF0IHBhcnQgb2YgdGhlIHNlcXVlbmNlIHRoZSBjb21tYW5kIGlzXG4gICAgICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9iaW5kU2luZ2xlKGNvbWJpbmF0aW9uLCBjYWxsYmFjaywgYWN0aW9uLCBzZXF1ZW5jZU5hbWUsIGxldmVsKSB7XG5cbiAgICAgICAgICAgIC8vIHN0b3JlIGEgZGlyZWN0IG1hcHBlZCByZWZlcmVuY2UgZm9yIHVzZSB3aXRoIE1vdXNldHJhcC50cmlnZ2VyXG4gICAgICAgICAgICBzZWxmLl9kaXJlY3RNYXBbY29tYmluYXRpb24gKyAnOicgKyBhY3Rpb25dID0gY2FsbGJhY2s7XG5cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBtdWx0aXBsZSBzcGFjZXMgaW4gYSByb3cgYmVjb21lIGEgc2luZ2xlIHNwYWNlXG4gICAgICAgICAgICBjb21iaW5hdGlvbiA9IGNvbWJpbmF0aW9uLnJlcGxhY2UoL1xccysvZywgJyAnKTtcblxuICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gY29tYmluYXRpb24uc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIHZhciBpbmZvO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIHBhdHRlcm4gaXMgYSBzZXF1ZW5jZSBvZiBrZXlzIHRoZW4gcnVuIHRocm91Z2ggdGhpcyBtZXRob2RcbiAgICAgICAgICAgIC8vIHRvIHJlcHJvY2VzcyBlYWNoIHBhdHRlcm4gb25lIGtleSBhdCBhIHRpbWVcbiAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgX2JpbmRTZXF1ZW5jZShjb21iaW5hdGlvbiwgc2VxdWVuY2UsIGNhbGxiYWNrLCBhY3Rpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5mbyA9IF9nZXRLZXlJbmZvKGNvbWJpbmF0aW9uLCBhY3Rpb24pO1xuXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdG8gaW5pdGlhbGl6ZSBhcnJheSBpZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgICAgICAvLyBhIGNhbGxiYWNrIGlzIGFkZGVkIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2tzW2luZm8ua2V5XSA9IHNlbGYuX2NhbGxiYWNrc1tpbmZvLmtleV0gfHwgW107XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbiBleGlzdGluZyBtYXRjaCBpZiB0aGVyZSBpcyBvbmVcbiAgICAgICAgICAgIF9nZXRNYXRjaGVzKGluZm8ua2V5LCBpbmZvLm1vZGlmaWVycywge3R5cGU6IGluZm8uYWN0aW9ufSwgc2VxdWVuY2VOYW1lLCBjb21iaW5hdGlvbiwgbGV2ZWwpO1xuXG4gICAgICAgICAgICAvLyBhZGQgdGhpcyBjYWxsIGJhY2sgdG8gdGhlIGFycmF5XG4gICAgICAgICAgICAvLyBpZiBpdCBpcyBhIHNlcXVlbmNlIHB1dCBpdCBhdCB0aGUgYmVnaW5uaW5nXG4gICAgICAgICAgICAvLyBpZiBub3QgcHV0IGl0IGF0IHRoZSBlbmRcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHRoZSB3YXkgdGhlc2UgYXJlIHByb2Nlc3NlZCBleHBlY3RzXG4gICAgICAgICAgICAvLyB0aGUgc2VxdWVuY2Ugb25lcyB0byBjb21lIGZpcnN0XG4gICAgICAgICAgICBzZWxmLl9jYWxsYmFja3NbaW5mby5rZXldW3NlcXVlbmNlTmFtZSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IGluZm8ubW9kaWZpZXJzLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogaW5mby5hY3Rpb24sXG4gICAgICAgICAgICAgICAgc2VxOiBzZXF1ZW5jZU5hbWUsXG4gICAgICAgICAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICAgICAgICAgIGNvbWJvOiBjb21iaW5hdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogYmluZHMgbXVsdGlwbGUgY29tYmluYXRpb25zIHRvIHRoZSBzYW1lIGNhbGxiYWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGNvbWJpbmF0aW9uc1xuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGFjdGlvblxuICAgICAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLl9iaW5kTXVsdGlwbGUgPSBmdW5jdGlvbihjb21iaW5hdGlvbnMsIGNhbGxiYWNrLCBhY3Rpb24pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tYmluYXRpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgX2JpbmRTaW5nbGUoY29tYmluYXRpb25zW2ldLCBjYWxsYmFjaywgYWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBzdGFydCFcbiAgICAgICAgX2FkZEV2ZW50KHRhcmdldEVsZW1lbnQsICdrZXlwcmVzcycsIF9oYW5kbGVLZXlFdmVudCk7XG4gICAgICAgIF9hZGRFdmVudCh0YXJnZXRFbGVtZW50LCAna2V5ZG93bicsIF9oYW5kbGVLZXlFdmVudCk7XG4gICAgICAgIF9hZGRFdmVudCh0YXJnZXRFbGVtZW50LCAna2V5dXAnLCBfaGFuZGxlS2V5RXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGJpbmRzIGFuIGV2ZW50IHRvIG1vdXNldHJhcFxuICAgICAqXG4gICAgICogY2FuIGJlIGEgc2luZ2xlIGtleSwgYSBjb21iaW5hdGlvbiBvZiBrZXlzIHNlcGFyYXRlZCB3aXRoICssXG4gICAgICogYW4gYXJyYXkgb2Yga2V5cywgb3IgYSBzZXF1ZW5jZSBvZiBrZXlzIHNlcGFyYXRlZCBieSBzcGFjZXNcbiAgICAgKlxuICAgICAqIGJlIHN1cmUgdG8gbGlzdCB0aGUgbW9kaWZpZXIga2V5cyBmaXJzdCB0byBtYWtlIHN1cmUgdGhhdCB0aGVcbiAgICAgKiBjb3JyZWN0IGtleSBlbmRzIHVwIGdldHRpbmcgYm91bmQgKHRoZSBsYXN0IGtleSBpbiB0aGUgcGF0dGVybilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5fSBrZXlzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGFjdGlvbiAtICdrZXlwcmVzcycsICdrZXlkb3duJywgb3IgJ2tleXVwJ1xuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBNb3VzZXRyYXAucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbihrZXlzLCBjYWxsYmFjaywgYWN0aW9uKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAga2V5cyA9IGtleXMgaW5zdGFuY2VvZiBBcnJheSA/IGtleXMgOiBba2V5c107XG4gICAgICAgIHNlbGYuX2JpbmRNdWx0aXBsZS5jYWxsKHNlbGYsIGtleXMsIGNhbGxiYWNrLCBhY3Rpb24pO1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogdW5iaW5kcyBhbiBldmVudCB0byBtb3VzZXRyYXBcbiAgICAgKlxuICAgICAqIHRoZSB1bmJpbmRpbmcgc2V0cyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gb2YgdGhlIHNwZWNpZmllZCBrZXkgY29tYm9cbiAgICAgKiB0byBhbiBlbXB0eSBmdW5jdGlvbiBhbmQgZGVsZXRlcyB0aGUgY29ycmVzcG9uZGluZyBrZXkgaW4gdGhlXG4gICAgICogX2RpcmVjdE1hcCBkaWN0LlxuICAgICAqXG4gICAgICogVE9ETzogYWN0dWFsbHkgcmVtb3ZlIHRoaXMgZnJvbSB0aGUgX2NhbGxiYWNrcyBkaWN0aW9uYXJ5IGluc3RlYWRcbiAgICAgKiBvZiBiaW5kaW5nIGFuIGVtcHR5IGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiB0aGUga2V5Y29tYm8rYWN0aW9uIGhhcyB0byBiZSBleGFjdGx5IHRoZSBzYW1lIGFzXG4gICAgICogaXQgd2FzIGRlZmluZWQgaW4gdGhlIGJpbmQgbWV0aG9kXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheX0ga2V5c1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgTW91c2V0cmFwLnByb3RvdHlwZS51bmJpbmQgPSBmdW5jdGlvbihrZXlzLCBhY3Rpb24pIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gc2VsZi5iaW5kLmNhbGwoc2VsZiwga2V5cywgZnVuY3Rpb24oKSB7fSwgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogdHJpZ2dlcnMgYW4gZXZlbnQgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGJvdW5kXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5c1xuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYWN0aW9uXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIE1vdXNldHJhcC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKGtleXMsIGFjdGlvbikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLl9kaXJlY3RNYXBba2V5cyArICc6JyArIGFjdGlvbl0pIHtcbiAgICAgICAgICAgIHNlbGYuX2RpcmVjdE1hcFtrZXlzICsgJzonICsgYWN0aW9uXSh7fSwga2V5cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJlc2V0cyB0aGUgbGlicmFyeSBiYWNrIHRvIGl0cyBpbml0aWFsIHN0YXRlLiAgdGhpcyBpcyB1c2VmdWxcbiAgICAgKiBpZiB5b3Ugd2FudCB0byBjbGVhciBvdXQgdGhlIGN1cnJlbnQga2V5Ym9hcmQgc2hvcnRjdXRzIGFuZCBiaW5kXG4gICAgICogbmV3IG9uZXMgLSBmb3IgZXhhbXBsZSBpZiB5b3Ugc3dpdGNoIHRvIGFub3RoZXIgcGFnZVxuICAgICAqXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIE1vdXNldHJhcC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzZWxmLl9jYWxsYmFja3MgPSB7fTtcbiAgICAgICAgc2VsZi5fZGlyZWN0TWFwID0ge307XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBzaG91bGQgd2Ugc3RvcCB0aGlzIGV2ZW50IGJlZm9yZSBmaXJpbmcgb2ZmIGNhbGxiYWNrc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgTW91c2V0cmFwLnByb3RvdHlwZS5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbihlLCBlbGVtZW50KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAvLyBpZiB0aGUgZWxlbWVudCBoYXMgdGhlIGNsYXNzIFwibW91c2V0cmFwXCIgdGhlbiBubyBuZWVkIHRvIHN0b3BcbiAgICAgICAgaWYgKCgnICcgKyBlbGVtZW50LmNsYXNzTmFtZSArICcgJykuaW5kZXhPZignIG1vdXNldHJhcCAnKSA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2JlbG9uZ3NUbyhlbGVtZW50LCBzZWxmLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2ZW50cyBvcmlnaW5hdGluZyBmcm9tIGEgc2hhZG93IERPTSBhcmUgcmUtdGFyZ2V0dGVkIGFuZCBgZS50YXJnZXRgIGlzIHRoZSBzaGFkb3cgaG9zdCxcbiAgICAgICAgLy8gbm90IHRoZSBpbml0aWFsIGV2ZW50IHRhcmdldCBpbiB0aGUgc2hhZG93IHRyZWUuIE5vdGUgdGhhdCBub3QgYWxsIGV2ZW50cyBjcm9zcyB0aGVcbiAgICAgICAgLy8gc2hhZG93IGJvdW5kYXJ5LlxuICAgICAgICAvLyBGb3Igc2hhZG93IHRyZWVzIHdpdGggYG1vZGU6ICdvcGVuJ2AsIHRoZSBpbml0aWFsIGV2ZW50IHRhcmdldCBpcyB0aGUgZmlyc3QgZWxlbWVudCBpblxuICAgICAgICAvLyB0aGUgZXZlbnTigJlzIGNvbXBvc2VkIHBhdGguIEZvciBzaGFkb3cgdHJlZXMgd2l0aCBgbW9kZTogJ2Nsb3NlZCdgLCB0aGUgaW5pdGlhbCBldmVudFxuICAgICAgICAvLyB0YXJnZXQgY2Fubm90IGJlIG9idGFpbmVkLlxuICAgICAgICBpZiAoJ2NvbXBvc2VkUGF0aCcgaW4gZSAmJiB0eXBlb2YgZS5jb21wb3NlZFBhdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIEZvciBvcGVuIHNoYWRvdyB0cmVlcywgdXBkYXRlIGBlbGVtZW50YCBzbyB0aGF0IHRoZSBmb2xsb3dpbmcgY2hlY2sgd29ya3MuXG4gICAgICAgICAgICB2YXIgaW5pdGlhbEV2ZW50VGFyZ2V0ID0gZS5jb21wb3NlZFBhdGgoKVswXTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsRXZlbnRUYXJnZXQgIT09IGUudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGluaXRpYWxFdmVudFRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHN0b3AgZm9yIGlucHV0LCBzZWxlY3QsIGFuZCB0ZXh0YXJlYVxuICAgICAgICByZXR1cm4gZWxlbWVudC50YWdOYW1lID09ICdJTlBVVCcgfHwgZWxlbWVudC50YWdOYW1lID09ICdTRUxFQ1QnIHx8IGVsZW1lbnQudGFnTmFtZSA9PSAnVEVYVEFSRUEnIHx8IGVsZW1lbnQuaXNDb250ZW50RWRpdGFibGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGV4cG9zZXMgX2hhbmRsZUtleSBwdWJsaWNseSBzbyBpdCBjYW4gYmUgb3ZlcndyaXR0ZW4gYnkgZXh0ZW5zaW9uc1xuICAgICAqL1xuICAgIE1vdXNldHJhcC5wcm90b3R5cGUuaGFuZGxlS2V5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hhbmRsZUtleS5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBhbGxvdyBjdXN0b20ga2V5IG1hcHBpbmdzXG4gICAgICovXG4gICAgTW91c2V0cmFwLmFkZEtleWNvZGVzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIF9NQVBba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9SRVZFUlNFX01BUCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXQgdGhlIGdsb2JhbCBtb3VzZXRyYXAgZnVuY3Rpb25zXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBuZWVkZWQgdG8gYWxsb3cgdGhlIGdsb2JhbCBtb3VzZXRyYXAgZnVuY3Rpb25zIHRvIHdvcmtcbiAgICAgKiBub3cgdGhhdCBtb3VzZXRyYXAgaXMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBNb3VzZXRyYXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZG9jdW1lbnRNb3VzZXRyYXAgPSBNb3VzZXRyYXAoZG9jdW1lbnQpO1xuICAgICAgICBmb3IgKHZhciBtZXRob2QgaW4gZG9jdW1lbnRNb3VzZXRyYXApIHtcbiAgICAgICAgICAgIGlmIChtZXRob2QuY2hhckF0KDApICE9PSAnXycpIHtcbiAgICAgICAgICAgICAgICBNb3VzZXRyYXBbbWV0aG9kXSA9IChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50TW91c2V0cmFwW21ldGhvZF0uYXBwbHkoZG9jdW1lbnRNb3VzZXRyYXAsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSAobWV0aG9kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgTW91c2V0cmFwLmluaXQoKTtcblxuICAgIC8vIGV4cG9zZSBtb3VzZXRyYXAgdG8gdGhlIGdsb2JhbCBvYmplY3RcbiAgICB3aW5kb3cuTW91c2V0cmFwID0gTW91c2V0cmFwO1xuXG4gICAgLy8gZXhwb3NlIGFzIGEgY29tbW9uIGpzIG1vZHVsZVxuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IE1vdXNldHJhcDtcbiAgICB9XG5cbiAgICAvLyBleHBvc2UgbW91c2V0cmFwIGFzIGFuIEFNRCBtb2R1bGVcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBNb3VzZXRyYXA7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IG51bGwsIHR5cGVvZiAgd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogbnVsbCk7XG4iLCJ2YXIgZXNyaTJnZW8gPSB7fTtcclxuKGZ1bmN0aW9uICgpIHtcclxuICBmdW5jdGlvbiB0b0dlb0pTT04oZGF0YSwgY2Ipe1xyXG4gICAgaWYodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKXtcclxuICAgICAgaWYoY2Ipe1xyXG4gICAgICAgIGFqYXgoZGF0YSwgZnVuY3Rpb24oZXJyLCBkKXtcclxuICAgICAgICBcdHRvR2VvSlNPTihkLGNiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NhbGxiYWNrIG5lZWRlZCBmb3IgdXJsJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBvdXRQdXQgPSB7IFwidHlwZVwiOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXCJmZWF0dXJlc1wiOiBbXX07XHJcbiAgICB2YXIgZmwgPSBkYXRhLmZlYXR1cmVzLmxlbmd0aDtcclxuICAgIHZhciBpID0gMDtcclxuICAgIHdoaWxlKGZsPmkpe1xyXG4gICAgICB2YXIgZnQgPSBkYXRhLmZlYXR1cmVzW2ldO1xyXG4gICAgICAvKiBhcyBvbmx5IEVTUkkgYmFzZWQgcHJvZHVjdHMgY2FyZSBpZiBhbGwgdGhlIGZlYXR1cmVzIGFyZSB0aGUgc2FtZSB0eXBlIG9mIGdlb21ldHJ5LCBjaGVjayBmb3IgZ2VvbWV0cnkgdHlwZSBhdCBhIGZlYXR1cmUgbGV2ZWwqL1xyXG4gICAgICB2YXIgb3V0RlQgPSB7XHJcbiAgICAgICAgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOnByb3AoZnQuYXR0cmlidXRlcylcclxuICAgICAgfTtcclxuICAgICAgaWYoZnQuZ2VvbWV0cnkueCl7XHJcbiAgICAgICAgLy9jaGVjayBpZiBpdCdzIGEgcG9pbnRcclxuICAgICAgICBvdXRGVC5nZW9tZXRyeT1wb2ludChmdC5nZW9tZXRyeSk7XHJcbiAgICAgIH1lbHNlIGlmKGZ0Lmdlb21ldHJ5LnBvaW50cyl7XHJcbiAgICAgICAgLy9jaGVjayBpZiBpdCBpcyBhIG11bHRpcG9pbnRcclxuICAgICAgICBvdXRGVC5nZW9tZXRyeT1wb2ludHMoZnQuZ2VvbWV0cnkpO1xyXG4gICAgICB9ZWxzZSBpZihmdC5nZW9tZXRyeS5wYXRocyl7XHJcbiAgICAgICAgLy9jaGVjayBpZiBhIGxpbmUgKG9yIFwiQVJDXCIgaW4gRVNSSSB0ZXJtcylcclxuICAgICAgICBvdXRGVC5nZW9tZXRyeT1saW5lKGZ0Lmdlb21ldHJ5KTtcclxuICAgICAgfWVsc2UgaWYoZnQuZ2VvbWV0cnkucmluZ3Mpe1xyXG4gICAgICAgIC8vY2hlY2sgaWYgYSBwb2x5LlxyXG4gICAgICAgIG91dEZULmdlb21ldHJ5PXBvbHkoZnQuZ2VvbWV0cnkpO1xyXG4gICAgICB9XHJcbiAgICAgIG91dFB1dC5mZWF0dXJlcy5wdXNoKG91dEZUKTtcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgY2IobnVsbCwgb3V0UHV0KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gcG9pbnQoZ2VvbWV0cnkpe1xyXG4gICAgLy90aGlzIG9uZSBpcyBlYXN5XHJcbiAgICByZXR1cm4ge1widHlwZVwiOiBcIlBvaW50XCIsXCJjb29yZGluYXRlc1wiOiBbZ2VvbWV0cnkueCxnZW9tZXRyeS55XX07ICBcclxuICB9XHJcbiAgZnVuY3Rpb24gcG9pbnRzKGdlb21ldHJ5KXtcclxuICAgIC8vY2hlY2tzIGlmIHRoZSBtdWx0aXBvaW50IG9ubHkgaGFzIG9uZSBwb2ludCwgaWYgc28gZXhwb3J0cyBhcyBwb2ludCBpbnN0ZWFkXHJcbiAgICBpZihnZW9tZXRyeS5wb2ludHMubGVuZ3RoPT09MSl7XHJcbiAgICAgIHJldHVybiB7XCJ0eXBlXCI6IFwiUG9pbnRcIixcImNvb3JkaW5hdGVzXCI6IGdlb21ldHJ5LnBvaW50c1swXX07XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuIHsgXCJ0eXBlXCI6IFwiTXVsdGlQb2ludFwiLFwiY29vcmRpbmF0ZXNcIjpnZW9tZXRyeS5wb2ludHN9OyBcclxuICAgIH1cclxuICB9XHJcbiAgZnVuY3Rpb24gbGluZShnZW9tZXRyeSl7XHJcbiAgICAvL2NoZWNrcyBpZiB0aGVpciBhcmUgbXVsdGlwbGUgcGF0aHMgb3IganVzdCBvbmVcclxuICAgIGlmKGdlb21ldHJ5LnBhdGhzLmxlbmd0aD09PTEpe1xyXG4gICAgICByZXR1cm4ge1widHlwZVwiOiBcIkxpbmVTdHJpbmdcIixcImNvb3JkaW5hdGVzXCI6IGdlb21ldHJ5LnBhdGhzWzBdfTtcclxuICAgIH1lbHNle1xyXG4gICAgICByZXR1cm4geyBcInR5cGVcIjogXCJNdWx0aUxpbmVTdHJpbmdcIixcImNvb3JkaW5hdGVzXCI6Z2VvbWV0cnkucGF0aHN9OyBcclxuICAgIH1cclxuICB9XHJcbiAgZnVuY3Rpb24gcG9seShnZW9tZXRyeSl7XHJcbiAgICAvL2ZpcnN0IHdlIGNoZWNrIGZvciBzb21lIGVhc3kgY2FzZXMsIGxpa2UgaWYgdGhlaXIgaXMgb25seSBvbmUgcmluZ1xyXG4gICAgaWYoZ2VvbWV0cnkucmluZ3MubGVuZ3RoPT09MSl7XHJcbiAgICAgIHJldHVybiB7XCJ0eXBlXCI6IFwiUG9seWdvblwiLFwiY29vcmRpbmF0ZXNcIjogZ2VvbWV0cnkucmluZ3N9O1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIC8qaWYgaXQgaXNuJ3QgdGhhdCBlYXN5IHRoZW4gd2UgaGF2ZSB0byBzdGFydCBjaGVja2luZyByaW5nIGRpcmVjdGlvbiwgYmFzaWNhbGx5IHRoZSByaW5nIGdvZXMgY2xvY2t3aXNlIGl0cyBwYXJ0IG9mIHRoZSBwb2x5Z29uLFxyXG4gICAgICBpZiBpdCBnb2VzIGNvdW50ZXJjbG9ja3dpc2UgaXQgaXMgYSBob2xlIGluIHRoZSBwb2x5Z29uLCBidXQgZ2VvanNvbiBkb2VzIGl0IGJ5IGhhdmVpbmcgYW4gYXJyYXkgd2l0aCB0aGUgZmlyc3QgZWxlbWVudCBiZSB0aGUgcG9seWdvbnMgXHJcbiAgICAgIGFuZCB0aGUgbmV4dCBlbGVtZW50cyBiZWluZyBob2xlcyBpbiBpdCovXHJcbiAgICAgIHJldHVybiBkZWNvZGVQb2x5Z29uKGdlb21ldHJ5LnJpbmdzKTtcclxuICAgIH1cclxuICB9XHJcbiAgZnVuY3Rpb24gZGVjb2RlUG9seWdvbihhKXtcclxuICAgIC8vcmV0dXJucyB0aGUgZmVhdHVyZVxyXG4gICAgdmFyIGNvb3JkcyA9IFtdLHR5cGU7XHJcbiAgICB2YXIgbGVuID0gYS5sZW5ndGg7XHJcbiAgICB2YXIgaSA9IDA7XHJcbiAgICB2YXIgbGVuMiA9IGNvb3Jkcy5sZW5ndGgtMTtcclxuICAgIHdoaWxlKGxlbj5pKXtcclxuICAgICAgaWYocmluZ0lzQ2xvY2t3aXNlKGFbaV0pKXtcclxuICAgICAgICBjb29yZHMucHVzaChbYVtpXV0pO1xyXG4gICAgICAgIGxlbjIrKztcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgY29vcmRzW2xlbjJdLnB1c2goYVtpXSk7XHJcbiAgICAgIH1cclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgaWYoY29vcmRzLmxlbmd0aD09PTEpe1xyXG4gICAgICB0eXBlPVwiUG9seWdvblwiO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIHR5cGU9XCJNdWx0aVBvbHlnb25cIjtcclxuICAgIH1cclxuICAgIHJldHVybiB7XCJ0eXBlXCI6dHlwZSxcImNvb3JkaW5hdGVzXCI6KGNvb3Jkcy5sZW5ndGg9PT0xKT9jb29yZHNbMF06Y29vcmRzfTtcclxuICB9XHJcbiAgLypkZXRlcm1pbmUgaWYgcG9seWdvbiByaW5nIGNvb3JkaW5hdGVzIGFyZSBjbG9ja3dpc2UuIGNsb2Nrd2lzZSBzaWduaWZpZXMgb3V0ZXIgcmluZywgY291bnRlci1jbG9ja3dpc2UgYW4gaW5uZXIgcmluZ1xyXG4gIG9yIGhvbGUuIHRoaXMgbG9naWMgd2FzIGZvdW5kIGF0IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTE2NTY0Ny9ob3ctdG8tZGV0ZXJtaW5lLWlmLWEtbGlzdC1vZi1wb2x5Z29uLVxyXG4gIHBvaW50cy1hcmUtaW4tY2xvY2t3aXNlLW9yZGVyXHJcbiAgdGhpcyBjb2RlIHRha2VuIGZyb20gaHR0cDovL2VzcmkuZ2l0aHViLmNvbS9nZW9qc29uLXV0aWxzL3NyYy9qc29uQ29udmVydGVycy5qcyBieSBKYW1lcyBDYXJkb25hIChNSVQgbGlzZW5zZSlcclxuICAqL1xyXG4gIGZ1bmN0aW9uIHJpbmdJc0Nsb2Nrd2lzZShyaW5nVG9UZXN0KSB7XHJcbiAgICB2YXIgdG90YWwgPSAwLFxyXG4gICAgICBpID0gMCxcclxuICAgICAgckxlbmd0aCA9IHJpbmdUb1Rlc3QubGVuZ3RoLFxyXG4gICAgICBwdDEgPSByaW5nVG9UZXN0W2ldLFxyXG4gICAgICBwdDI7XHJcbiAgICBmb3IgKGk7IGkgPCByTGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgIHB0MiA9IHJpbmdUb1Rlc3RbaSArIDFdO1xyXG4gICAgICB0b3RhbCArPSAocHQyWzBdIC0gcHQxWzBdKSAqIChwdDJbMV0gKyBwdDFbMV0pO1xyXG4gICAgICBwdDEgPSBwdDI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKHRvdGFsID49IDApO1xyXG4gIH1cclxuICBmdW5jdGlvbiBwcm9wKGEpe1xyXG4gICAgdmFyIHAgPSB7fTtcclxuICAgIGZvcih2YXIgayBpbiBhKXtcclxuICAgICAgaWYoYVtrXSl7XHJcbiAgICAgICAgcFtrXT1hW2tdOyAgXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG4gIH1cclxuXHJcblxyXG4gIGZ1bmN0aW9uIGFqYXgodXJsLCBjYil7XHJcbiAgICBpZih0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKXtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHJlcXVpcmUoXCJyZXF1ZXN0XCIpO1xyXG4gICAgICAgIHJlcXVlc3QodXJsLHtqc29uOnRydWV9LGZ1bmN0aW9uKGUscixiKXtcclxuICAgICAgICAgIGNiKGUsYik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gdGhlIGZvbGxvd2luZyBpcyBmcm9tIEphdmFTY3JpcHQ6IFRoZSBEZWZpbml0aXZlIEd1aWRlXHJcbiAgICB2YXIgcmVzcG9uc2U7XHJcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PT0gNCAmJiByZXEuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgIGNiKG51bGwsIEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCkpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcclxuICAgIHJlcS5zZW5kKCk7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKXtcclxuICAgIG1vZHVsZS5leHBvcnRzID0gdG9HZW9KU09OO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBlc3JpMmdlby50b0dlb0pTT04gPSB0b0dlb0pTT047XHJcbiAgfVxyXG59KCkpOyIsIiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIG47bj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsbi5vc210b2dlb2pzb249ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZShuLHQscil7ZnVuY3Rpb24gbyhpLHMpe2lmKCF0W2ldKXtpZighbltpXSl7dmFyIGw9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighcyYmbClyZXR1cm4gbChpLCEwKTtpZihhKXJldHVybiBhKGksITApO3ZhciB1PW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgdS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLHV9dmFyIGM9dFtpXT17ZXhwb3J0czp7fX07bltpXVswXS5jYWxsKGMuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgdD1uW2ldWzFdW2VdO3JldHVybiBvKHQ/dDplKX0sYyxjLmV4cG9ydHMsZSxuLHQscil9cmV0dXJuIHRbaV0uZXhwb3J0c31mb3IodmFyIGE9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTxyLmxlbmd0aDtpKyspbyhyW2ldKTtyZXR1cm4gb30oezE6W2Z1bmN0aW9uKGUsbix0KXt2YXIgcj1lKFwiLi9sb2Rhc2guY3VzdG9tLmpzXCIpLG89ZShcImdlb2pzb24tcmV3aW5kXCIpLGE9e307ZShcIm9zbS1wb2x5Z29uLWZlYXR1cmVzXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoXCJhbGxcIj09PWUucG9seWdvbilhW2Uua2V5XT0hMDtlbHNle3ZhciBuPVwid2hpdGVsaXN0XCI9PT1lLnBvbHlnb24/XCJpbmNsdWRlZF92YWx1ZXNcIjpcImV4Y2x1ZGVkX3ZhbHVlc1wiLHQ9e307ZS52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPSEwfSksYVtlLmtleV09e30sYVtlLmtleV1bbl09dH19KTt2YXIgaT17fTtpPWZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXtmdW5jdGlvbiBuKGUpe3ZhciBuPXIuY2xvbmUoZSk7bi5sYXQ9ZS5jZW50ZXIubGF0LG4ubG9uPWUuY2VudGVyLmxvbixuLl9faXNfY2VudGVyX3BsYWNlaG9sZGVyPSEwLGkucHVzaChuKX1mdW5jdGlvbiB0KGUpe2Z1bmN0aW9uIG4oZSxuLHIpe3ZhciBvPXt0eXBlOlwibm9kZVwiLGlkOlwiX1wiK3QudHlwZStcIi9cIit0LmlkK1wiYm91bmRzXCIrcixsYXQ6ZSxsb246bn07dC5ub2Rlcy5wdXNoKG8uaWQpLGkucHVzaChvKX12YXIgdD1yLmNsb25lKGUpO3Qubm9kZXM9W10sbih0LmJvdW5kcy5taW5sYXQsdC5ib3VuZHMubWlubG9uLDEpLG4odC5ib3VuZHMubWF4bGF0LHQuYm91bmRzLm1pbmxvbiwyKSxuKHQuYm91bmRzLm1heGxhdCx0LmJvdW5kcy5tYXhsb24sMyksbih0LmJvdW5kcy5taW5sYXQsdC5ib3VuZHMubWF4bG9uLDQpLHQubm9kZXMucHVzaCh0Lm5vZGVzWzBdKSx0Ll9faXNfYm91bmRzX3BsYWNlaG9sZGVyPSEwLGwucHVzaCh0KX1mdW5jdGlvbiBvKGUpe2Z1bmN0aW9uIG4oZSxuLHQpe3ZhciByPXt0eXBlOlwibm9kZVwiLGlkOnQsbGF0OmUsbG9uOm4sX19pc191bmludGVyZXN0aW5nOiEwfTtpLnB1c2gocil9ci5pc0FycmF5KGUubm9kZXMpfHwoZS5ub2Rlcz1lLmdlb21ldHJ5Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWU/XCJfYW5vbnltb3VzQFwiK2UubGF0K1wiL1wiK2UubG9uOlwiX2Fub255bW91c0B1bmtub3duX2xvY2F0aW9uXCJ9KSksZS5nZW9tZXRyeS5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dCYmbih0LmxhdCx0LmxvbixlLm5vZGVzW3JdKX0pfWZ1bmN0aW9uIGEoZSl7ZnVuY3Rpb24gbihlLG4sdCl7dmFyIHI9e3R5cGU6XCJub2RlXCIsaWQ6dCxsYXQ6ZSxsb246bn07aS5wdXNoKHIpfWZ1bmN0aW9uIHQoZSxuKXtmdW5jdGlvbiB0KGUsbil7dmFyIHQ9e3R5cGU6XCJub2RlXCIsaWQ6XCJfYW5vbnltb3VzQFwiK2UrXCIvXCIrbixsYXQ6ZSxsb246bixfX2lzX3VuaW50ZXJlc3Rpbmc6ITB9O3Iubm9kZXMucHVzaCh0LmlkKSxpLnB1c2godCl9aWYoIWwuc29tZShmdW5jdGlvbihlKXtyZXR1cm5cIndheVwiPT1lLnR5cGUmJmUuaWQ9PW59KSl7dmFyIHI9e3R5cGU6XCJ3YXlcIixpZDpuLG5vZGVzOltdfTtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZT90KGUubGF0LGUubG9uKTpyLm5vZGVzLnB1c2godm9pZCAwKX0pLGwucHVzaChyKX19ZS5tZW1iZXJzLmZvckVhY2goZnVuY3Rpb24oZSxyKXtcIm5vZGVcIj09ZS50eXBlP2UubGF0JiZuKGUubGF0LGUubG9uLGUucmVmKTpcIndheVwiPT1lLnR5cGUmJmUuZ2VvbWV0cnkmJihlLnJlZj1cIl9mdWxsR2VvbVwiK2UucmVmLHQoZS5nZW9tZXRyeSxlLnJlZikpfSl9Zm9yKHZhciBpPW5ldyBBcnJheSxsPW5ldyBBcnJheSx1PW5ldyBBcnJheSxjPTA7YzxlLmVsZW1lbnRzLmxlbmd0aDtjKyspc3dpdGNoKGUuZWxlbWVudHNbY10udHlwZSl7Y2FzZVwibm9kZVwiOnZhciBmPWUuZWxlbWVudHNbY107aS5wdXNoKGYpO2JyZWFrO2Nhc2VcIndheVwiOnZhciBwPXIuY2xvbmUoZS5lbGVtZW50c1tjXSk7cC5ub2Rlcz1yLmNsb25lKHAubm9kZXMpLGwucHVzaChwKSxwLmNlbnRlciYmbihwKSxwLmdlb21ldHJ5P28ocCk6cC5ib3VuZHMmJnQocCk7YnJlYWs7Y2FzZVwicmVsYXRpb25cIjp2YXIgeT1yLmNsb25lKGUuZWxlbWVudHNbY10pO3kubWVtYmVycz1yLmNsb25lKHkubWVtYmVycyksdS5wdXNoKHkpO3ZhciBnPXkubWVtYmVycyYmeS5tZW1iZXJzLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuXCJub2RlXCI9PWUudHlwZSYmZS5sYXR8fFwid2F5XCI9PWUudHlwZSYmZS5nZW9tZXRyeSYmZS5nZW9tZXRyeS5sZW5ndGg+MH0pO3kuY2VudGVyJiZuKHkpLGc/YSh5KTp5LmJvdW5kcyYmdCh5KX1yZXR1cm4gcyhpLGwsdSl9ZnVuY3Rpb24gaShlKXtmdW5jdGlvbiBuKGUsbix0KXtlLmhhc0F0dHJpYnV0ZSh0KSYmKG5bdF09ZS5nZXRBdHRyaWJ1dGUodCkpfWZ1bmN0aW9uIHQoZSx0KXt2YXIgbz1yLmNsb25lKGUpO24odCxvLFwibGF0XCIpLG4odCxvLFwibG9uXCIpLG8uX19pc19jZW50ZXJfcGxhY2Vob2xkZXI9ITAsbC5wdXNoKG8pfWZ1bmN0aW9uIG8oZSxuKXtmdW5jdGlvbiB0KGUsbix0KXt2YXIgcj17dHlwZTpcIm5vZGVcIixpZDpcIl9cIitvLnR5cGUrXCIvXCIrby5pZCtcImJvdW5kc1wiK3QsbGF0OmUsbG9uOm59O28ubm9kZXMucHVzaChyLmlkKSxsLnB1c2gocil9dmFyIG89ci5jbG9uZShlKTtvLm5vZGVzPVtdLHQobi5nZXRBdHRyaWJ1dGUoXCJtaW5sYXRcIiksbi5nZXRBdHRyaWJ1dGUoXCJtaW5sb25cIiksMSksdChuLmdldEF0dHJpYnV0ZShcIm1heGxhdFwiKSxuLmdldEF0dHJpYnV0ZShcIm1pbmxvblwiKSwyKSx0KG4uZ2V0QXR0cmlidXRlKFwibWF4bGF0XCIpLG4uZ2V0QXR0cmlidXRlKFwibWF4bG9uXCIpLDMpLHQobi5nZXRBdHRyaWJ1dGUoXCJtaW5sYXRcIiksbi5nZXRBdHRyaWJ1dGUoXCJtYXhsb25cIiksNCksby5ub2Rlcy5wdXNoKG8ubm9kZXNbMF0pLG8uX19pc19ib3VuZHNfcGxhY2Vob2xkZXI9ITAsdS5wdXNoKG8pfWZ1bmN0aW9uIGEoZSxuKXtmdW5jdGlvbiB0KGUsbix0KXt2YXIgcj17dHlwZTpcIm5vZGVcIixpZDp0LGxhdDplLGxvbjpuLF9faXNfdW5pbnRlcmVzdGluZzohMH07cmV0dXJuIGwucHVzaChyKSxyLmlkfXIuaXNBcnJheShlLm5vZGVzKXx8KGUubm9kZXM9W10sci5lYWNoKG4sZnVuY3Rpb24obix0KXtlLm5vZGVzLnB1c2goXCJfYW5vbnltb3VzQFwiK24uZ2V0QXR0cmlidXRlKFwibGF0XCIpK1wiL1wiK24uZ2V0QXR0cmlidXRlKFwibG9uXCIpKX0pKSxyLmVhY2gobixmdW5jdGlvbihuLHIpe24uZ2V0QXR0cmlidXRlKFwibGF0XCIpJiZ0KG4uZ2V0QXR0cmlidXRlKFwibGF0XCIpLG4uZ2V0QXR0cmlidXRlKFwibG9uXCIpLGUubm9kZXNbcl0pfSl9ZnVuY3Rpb24gaShlLG4pe2Z1bmN0aW9uIHQoZSxuLHQpe3ZhciByPXt0eXBlOlwibm9kZVwiLGlkOnQsbGF0OmUsbG9uOm59O2wucHVzaChyKX1mdW5jdGlvbiBvKGUsbil7ZnVuY3Rpb24gdChlLG4pe3ZhciB0PXt0eXBlOlwibm9kZVwiLGlkOlwiX2Fub255bW91c0BcIitlK1wiL1wiK24sbGF0OmUsbG9uOm4sX19pc191bmludGVyZXN0aW5nOiEwfTtvLm5vZGVzLnB1c2godC5pZCksbC5wdXNoKHQpfWlmKCF1LnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuXCJ3YXlcIj09ZS50eXBlJiZlLmlkPT1ufSkpe3ZhciBvPXt0eXBlOlwid2F5XCIsaWQ6bixub2RlczpbXX07ci5lYWNoKGUsZnVuY3Rpb24oZSl7ZS5nZXRBdHRyaWJ1dGUoXCJsYXRcIik/dChlLmdldEF0dHJpYnV0ZShcImxhdFwiKSxlLmdldEF0dHJpYnV0ZShcImxvblwiKSk6by5ub2Rlcy5wdXNoKHZvaWQgMCl9KSx1LnB1c2gobyl9fXIuZWFjaChuLGZ1bmN0aW9uKG4scil7XCJub2RlXCI9PWUubWVtYmVyc1tyXS50eXBlP24uZ2V0QXR0cmlidXRlKFwibGF0XCIpJiZ0KG4uZ2V0QXR0cmlidXRlKFwibGF0XCIpLG4uZ2V0QXR0cmlidXRlKFwibG9uXCIpLGUubWVtYmVyc1tyXS5yZWYpOlwid2F5XCI9PWUubWVtYmVyc1tyXS50eXBlJiZuLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibmRcIikubGVuZ3RoPjAmJihlLm1lbWJlcnNbcl0ucmVmPVwiX2Z1bGxHZW9tXCIrZS5tZW1iZXJzW3JdLnJlZixvKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJuZFwiKSxlLm1lbWJlcnNbcl0ucmVmKSl9KX12YXIgbD1uZXcgQXJyYXksdT1uZXcgQXJyYXksYz1uZXcgQXJyYXk7ci5lYWNoKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJub2RlXCIpLGZ1bmN0aW9uKGUsdCl7dmFyIG89e307ci5lYWNoKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0YWdcIiksZnVuY3Rpb24oZSl7b1tlLmdldEF0dHJpYnV0ZShcImtcIildPWUuZ2V0QXR0cmlidXRlKFwidlwiKX0pO3ZhciBhPXt0eXBlOlwibm9kZVwifTtuKGUsYSxcImlkXCIpLG4oZSxhLFwibGF0XCIpLG4oZSxhLFwibG9uXCIpLG4oZSxhLFwidmVyc2lvblwiKSxuKGUsYSxcInRpbWVzdGFtcFwiKSxuKGUsYSxcImNoYW5nZXNldFwiKSxuKGUsYSxcInVpZFwiKSxuKGUsYSxcInVzZXJcIiksci5pc0VtcHR5KG8pfHwoYS50YWdzPW8pLGwucHVzaChhKX0pO3ZhciBmLHA7cmV0dXJuIHIuZWFjaChlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwid2F5XCIpLGZ1bmN0aW9uKGUsaSl7dmFyIHM9e30sbD1bXTtyLmVhY2goZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRhZ1wiKSxmdW5jdGlvbihlKXtzW2UuZ2V0QXR0cmlidXRlKFwia1wiKV09ZS5nZXRBdHRyaWJ1dGUoXCJ2XCIpfSk7dmFyIGM9ITE7ci5lYWNoKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJuZFwiKSxmdW5jdGlvbihlLG4pe3ZhciB0Oyh0PWUuZ2V0QXR0cmlidXRlKFwicmVmXCIpKSYmKGxbbl09dCksIWMmJmUuZ2V0QXR0cmlidXRlKFwibGF0XCIpJiYoYz0hMCl9KTt2YXIgeT17dHlwZTpcIndheVwifTtuKGUseSxcImlkXCIpLG4oZSx5LFwidmVyc2lvblwiKSxuKGUseSxcInRpbWVzdGFtcFwiKSxuKGUseSxcImNoYW5nZXNldFwiKSxuKGUseSxcInVpZFwiKSxuKGUseSxcInVzZXJcIiksbC5sZW5ndGg+MCYmKHkubm9kZXM9bCksci5pc0VtcHR5KHMpfHwoeS50YWdzPXMpLChmPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjZW50ZXJcIilbMF0pJiZ0KHksZiksYz9hKHksZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm5kXCIpKToocD1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm91bmRzXCIpWzBdKSYmbyh5LHApLHUucHVzaCh5KX0pLHIuZWFjaChlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicmVsYXRpb25cIiksZnVuY3Rpb24oZSxhKXt2YXIgcz17fSxsPVtdO3IuZWFjaChlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGFnXCIpLGZ1bmN0aW9uKGUpe3NbZS5nZXRBdHRyaWJ1dGUoXCJrXCIpXT1lLmdldEF0dHJpYnV0ZShcInZcIil9KTt2YXIgdT0hMTtyLmVhY2goZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm1lbWJlclwiKSxmdW5jdGlvbihlLHQpe2xbdF09e30sbihlLGxbdF0sXCJyZWZcIiksbihlLGxbdF0sXCJyb2xlXCIpLG4oZSxsW3RdLFwidHlwZVwiKSwoIXUmJlwibm9kZVwiPT1sW3RdLnR5cGUmJmUuZ2V0QXR0cmlidXRlKFwibGF0XCIpfHxcIndheVwiPT1sW3RdLnR5cGUmJmUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJuZFwiKS5sZW5ndGg+MCkmJih1PSEwKX0pO3ZhciB5PXt0eXBlOlwicmVsYXRpb25cIn07bihlLHksXCJpZFwiKSxuKGUseSxcInZlcnNpb25cIiksbihlLHksXCJ0aW1lc3RhbXBcIiksbihlLHksXCJjaGFuZ2VzZXRcIiksbihlLHksXCJ1aWRcIiksbihlLHksXCJ1c2VyXCIpLGwubGVuZ3RoPjAmJih5Lm1lbWJlcnM9bCksci5pc0VtcHR5KHMpfHwoeS50YWdzPXMpLChmPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjZW50ZXJcIilbMF0pJiZ0KHksZiksdT9pKHksZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm1lbWJlclwiKSk6KHA9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvdW5kc1wiKVswXSkmJm8oeSxwKSxjLnB1c2goeSl9KSxzKGwsdSxjKX1mdW5jdGlvbiBzKGUsdCxhKXtmdW5jdGlvbiBpKGUsdCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHQmJih0PXt9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLnVuaW50ZXJlc3RpbmdUYWdzKXJldHVybiFuLnVuaW50ZXJlc3RpbmdUYWdzKGUsdCk7Zm9yKHZhciByIGluIGUpaWYobi51bmludGVyZXN0aW5nVGFnc1tyXSE9PSEwJiZ0W3JdIT09ITAmJnRbcl0hPT1lW3JdKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHMoZSl7dmFyIG49e3RpbWVzdGFtcDplLnRpbWVzdGFtcCx2ZXJzaW9uOmUudmVyc2lvbixjaGFuZ2VzZXQ6ZS5jaGFuZ2VzZXQsdXNlcjplLnVzZXIsdWlkOmUudWlkfTtmb3IodmFyIHQgaW4gbil2b2lkIDA9PT1uW3RdJiZkZWxldGUgblt0XTtyZXR1cm4gbn1mdW5jdGlvbiB1KGUsdCl7ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQscixvLGEsaSxzLGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF19LGY9ZnVuY3Rpb24oZSl7cmV0dXJuIGVbZS5sZW5ndGgtMV19LHA9W107ZS5sZW5ndGg7KWZvcih0PWUucG9wKCkubm9kZXMuc2xpY2UoKSxwLnB1c2godCk7ZS5sZW5ndGgmJmwodCkhPT1mKHQpOyl7Zm9yKHI9bCh0KSxvPWYodCksYT0wO2E8ZS5sZW5ndGg7YSsrKXtpZihzPWVbYV0ubm9kZXMsbz09PWwocykpe2k9dC5wdXNoLHM9cy5zbGljZSgxKTticmVha31pZihvPT09ZihzKSl7aT10LnB1c2gscz1zLnNsaWNlKDAsLTEpLnJldmVyc2UoKTticmVha31pZihyPT1mKHMpKXtpPXQudW5zaGlmdCxzPXMuc2xpY2UoMCwtMSk7YnJlYWt9aWYocj09bChzKSl7aT10LnVuc2hpZnQscz1zLnNsaWNlKDEpLnJldmVyc2UoKTticmVha31zPWk9bnVsbH1pZighcyl7bi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJNdWx0aXBvbHlnb25cIix1K1wiL1wiK2MsXCJjb250YWlucyB1bmNsb3NlZCByaW5nIGdlb21ldHJ5XCIpO2JyZWFrfWUuc3BsaWNlKGEsMSksaS5hcHBseSh0LHMpfXJldHVybiBwfWZ1bmN0aW9uIGEoZSl7dmFyIG4sdCxyPWZ1bmN0aW9uKGUsbil7Zm9yKHZhciB0PTA7dDxuLmxlbmd0aDt0KyspaWYoYShuW3RdLGUpKXJldHVybiEwO3JldHVybiExfSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bK2UubGF0LCtlLmxvbl19KX0sYT1mdW5jdGlvbihlLG4pe2Zvcih2YXIgdD1lWzBdLHI9ZVsxXSxvPSExLGE9MCxpPW4ubGVuZ3RoLTE7YTxuLmxlbmd0aDtpPWErKyl7dmFyIHM9blthXVswXSxsPW5bYV1bMV0sdT1uW2ldWzBdLGM9bltpXVsxXSxmPWw+ciE9Yz5yJiZ0PCh1LXMpKihyLWwpLyhjLWwpK3M7ZiYmKG89IW8pfXJldHVybiBvfTtmb3IoZT1vKGUpLG49MDtuPGYubGVuZ3RoO24rKylpZih0PW8oZltuXSkscih0LGUpKXJldHVybiBufXZhciBpLGw9ITEsdT1QP1wid2F5XCI6XCJyZWxhdGlvblwiLGM9XCJudW1iZXJcIj09dHlwZW9mIGUuaWQ/ZS5pZDorZS5pZC5yZXBsYWNlKFwiX2Z1bGxHZW9tXCIsXCJcIik7aT10Lm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwid2F5XCI9PT1lLnR5cGV9KSxpPWkubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWdbZS5yZWZdO3JldHVybiB2b2lkIDA9PT10PyhuLnZlcmJvc2UmJmNvbnNvbGUud2FybihcIk11bHRpcG9seWdvblwiLHUrXCIvXCIrYyxcInRhaW50ZWQgYnkgYSBtaXNzaW5nIHdheVwiLGUudHlwZStcIi9cIitlLnJlZiksdm9pZChsPSEwKSk6e2lkOmUucmVmLHJvbGU6ZS5yb2xlfHxcIm91dGVyXCIsd2F5OnQsbm9kZXM6dC5ub2Rlcy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXR8fChsPSEwLG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTXVsdGlwb2x5Z29uXCIsdStcIi9cIitjLFwidGFpbnRlZCBieSBhIHdheVwiLGUudHlwZStcIi9cIitlLnJlZixcIndpdGggYSBtaXNzaW5nIG5vZGVcIiksITEpfSl9fSksaT1yLmNvbXBhY3QoaSk7dmFyIGYscDtmPW8oaS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJvdXRlclwiPT09ZS5yb2xlfSkpLHA9byhpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImlubmVyXCI9PT1lLnJvbGV9KSk7dmFyIHk7eT1mLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bZV19KTtmb3IodmFyIGQ9MDtkPHAubGVuZ3RoO2QrKyl7dmFyIGI9YShwW2RdKTt2b2lkIDAhPT1iP3lbYl0ucHVzaChwW2RdKTpuLnZlcmJvc2UmJmNvbnNvbGUud2FybihcIk11bHRpcG9seWdvblwiLHUrXCIvXCIrYyxcImNvbnRhaW5zIGFuIGlubmVyIHJpbmcgd2l0aCBubyBjb250YWluaW5nIG91dGVyXCIpfXZhciBtPVtdO2lmKG09ci5jb21wYWN0KHkubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PXIuY29tcGFjdChlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGg8ND92b2lkKG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTXVsdGlwb2x5Z29uXCIsdStcIi9cIitjLFwiY29udGFpbnMgYSByaW5nIHdpdGggbGVzcyB0aGFuIGZvdXIgbm9kZXNcIikpOnIuY29tcGFjdChlLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bK2UubG9uLCtlLmxhdF19KSl9KSk7cmV0dXJuIDA9PXQubGVuZ3RoP3ZvaWQobi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJNdWx0aXBvbHlnb25cIix1K1wiL1wiK2MsXCJjb250YWlucyBhbiBlbXB0eSByaW5nIGNsdXN0ZXJcIikpOnR9KSksMD09bS5sZW5ndGgpcmV0dXJuIG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTXVsdGlwb2x5Z29uXCIsdStcIi9cIitjLFwiY29udGFpbnMgbm8gY29vcmRpbmF0ZXNcIiksITE7dmFyIHY9XCJNdWx0aVBvbHlnb25cIjsxPT09bS5sZW5ndGgmJih2PVwiUG9seWdvblwiLG09bVswXSk7dmFyIHc9e3R5cGU6XCJGZWF0dXJlXCIsaWQ6ZS50eXBlK1wiL1wiK2MscHJvcGVydGllczp7dHlwZTplLnR5cGUsaWQ6Yyx0YWdzOmUudGFnc3x8e30scmVsYXRpb25zOmhbZS50eXBlXVtlLmlkXXx8W10sbWV0YTpzKGUpfSxnZW9tZXRyeTp7dHlwZTp2LGNvb3JkaW5hdGVzOm19fTtyZXR1cm4gbCYmKG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTXVsdGlwb2x5Z29uXCIsdStcIi9cIitjLFwiaXMgdGFpbnRlZFwiKSx3LnByb3BlcnRpZXMudGFpbnRlZD0hMCksd31mb3IodmFyIGM9bmV3IE9iamVjdCxmPTA7ZjxlLmxlbmd0aDtmKyspdm9pZCAwIT09ZVtmXS5sYXQ/Y1tlW2ZdLmlkXT1lW2ZdOm4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTm9kZVwiLGVbZl0udHlwZStcIi9cIitlW2ZdLmlkLFwiaWdub3JlZCBiZWNhdXNlIGl0IGhhcyBubyBjb29yZGluYXRlc1wiKTtmb3IodmFyIHA9bmV3IE9iamVjdCxmPTA7ZjxlLmxlbmd0aDtmKyspXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGVbZl0udGFncyYmaShlW2ZdLnRhZ3MpJiYocFtlW2ZdLmlkXT0hMCk7Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspaWYoci5pc0FycmF5KGFbZl0ubWVtYmVycykpZm9yKHZhciB5PTA7eTxhW2ZdLm1lbWJlcnMubGVuZ3RoO3krKylcIm5vZGVcIj09YVtmXS5tZW1iZXJzW3ldLnR5cGUmJihwW2FbZl0ubWVtYmVyc1t5XS5yZWZdPSEwKTtlbHNlIG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiUmVsYXRpb25cIixhW2ZdLnR5cGUrXCIvXCIrYVtmXS5pZCxcImlnbm9yZWQgYmVjYXVzZSBpdCBoYXMgbm8gbWVtYmVyc1wiKTtmb3IodmFyIGc9bmV3IE9iamVjdCxkPW5ldyBPYmplY3QsZj0wO2Y8dC5sZW5ndGg7ZisrKWlmKHIuaXNBcnJheSh0W2ZdLm5vZGVzKSl7Z1t0W2ZdLmlkXT10W2ZdO2Zvcih2YXIgeT0wO3k8dFtmXS5ub2Rlcy5sZW5ndGg7eSsrKWRbdFtmXS5ub2Rlc1t5XV09ITAsdFtmXS5ub2Rlc1t5XT1jW3RbZl0ubm9kZXNbeV1dfWVsc2Ugbi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJXYXlcIix0W2ZdLnR5cGUrXCIvXCIrdFtmXS5pZCxcImlnbm9yZWQgYmVjYXVzZSBpdCBoYXMgbm8gbm9kZXNcIik7Zm9yKHZhciBiPW5ldyBBcnJheSxmPTA7ZjxlLmxlbmd0aDtmKyspZFtlW2ZdLmlkXSYmIXBbZVtmXS5pZF18fGVbZl0uX19pc191bmludGVyZXN0aW5nfHxiLnB1c2goZVtmXSk7Zm9yKHZhciBtPW5ldyBBcnJheSxmPTA7ZjxhLmxlbmd0aDtmKyspci5pc0FycmF5KGFbZl0ubWVtYmVycyk/bVthW2ZdLmlkXT1hW2ZdOm4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiUmVsYXRpb25cIixhW2ZdLnR5cGUrXCIvXCIrYVtmXS5pZCxcImlnbm9yZWQgYmVjYXVzZSBpdCBoYXMgbm8gbWVtYmVyc1wiKTtmb3IodmFyIGg9e25vZGU6e30sd2F5Ont9LHJlbGF0aW9uOnt9fSxmPTA7ZjxhLmxlbmd0aDtmKyspaWYoci5pc0FycmF5KGFbZl0ubWVtYmVycykpZm9yKHZhciB5PTA7eTxhW2ZdLm1lbWJlcnMubGVuZ3RoO3krKyl7dmFyIHY9YVtmXS5tZW1iZXJzW3ldLnR5cGUsdz1hW2ZdLm1lbWJlcnNbeV0ucmVmO1wibnVtYmVyXCIhPXR5cGVvZiB3JiYodz13LnJlcGxhY2UoXCJfZnVsbEdlb21cIixcIlwiKSksaFt2XT8oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGhbdl1bd10mJihoW3ZdW3ddPVtdKSxoW3ZdW3ddLnB1c2goe3JvbGU6YVtmXS5tZW1iZXJzW3ldLnJvbGUscmVsOmFbZl0uaWQscmVsdGFnczphW2ZdLnRhZ3N9KSk6bi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJSZWxhdGlvblwiLGFbZl0udHlwZStcIi9cIithW2ZdLmlkLFwibWVtYmVyXCIsditcIi9cIit3LFwiaWdub3JlZCBiZWNhdXNlIGl0IGhhcyBhbiBpbnZhbGlkIHR5cGVcIil9ZWxzZSBuLnZlcmJvc2UmJmNvbnNvbGUud2FybihcIlJlbGF0aW9uXCIsYVtmXS50eXBlK1wiL1wiK2FbZl0uaWQsXCJpZ25vcmVkIGJlY2F1c2UgaXQgaGFzIG5vIG1lbWJlcnNcIik7dmFyIF8seD17dHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsZmVhdHVyZXM6bmV3IEFycmF5fTtmb3IoZj0wO2Y8Yi5sZW5ndGg7ZisrKWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiW2ZdLmxvbiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGJbZl0ubGF0KXt2YXIgaz17dHlwZTpcIkZlYXR1cmVcIixpZDpiW2ZdLnR5cGUrXCIvXCIrYltmXS5pZCxwcm9wZXJ0aWVzOnt0eXBlOmJbZl0udHlwZSxpZDpiW2ZdLmlkLHRhZ3M6YltmXS50YWdzfHx7fSxyZWxhdGlvbnM6aC5ub2RlW2JbZl0uaWRdfHxbXSxtZXRhOnMoYltmXSl9LGdlb21ldHJ5Ont0eXBlOlwiUG9pbnRcIixjb29yZGluYXRlczpbK2JbZl0ubG9uLCtiW2ZdLmxhdF19fTtiW2ZdLl9faXNfY2VudGVyX3BsYWNlaG9sZGVyJiYoay5wcm9wZXJ0aWVzLmdlb21ldHJ5PVwiY2VudGVyXCIpLHguZmVhdHVyZXMucHVzaChrKX1lbHNlIG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiUE9JXCIsYltmXS50eXBlK1wiL1wiK2JbZl0uaWQsXCJpZ25vcmVkIGJlY2F1c2UgaXQgbGFja3MgY29vcmRpbmF0ZXNcIik7Zm9yKHZhciBBPXt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczpuZXcgQXJyYXl9LGo9e3R5cGU6XCJGZWF0dXJlQ29sbGVjdGlvblwiLGZlYXR1cmVzOm5ldyBBcnJheX0sZj0wO2Y8YS5sZW5ndGg7ZisrKWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhW2ZdLnRhZ3MmJihcIm11bHRpcG9seWdvblwiPT1hW2ZdLnRhZ3MudHlwZXx8XCJib3VuZGFyeVwiPT1hW2ZdLnRhZ3MudHlwZSkpe2lmKCFyLmlzQXJyYXkoYVtmXS5tZW1iZXJzKSl7bi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJNdWx0aXBvbHlnb25cIixhW2ZdLnR5cGUrXCIvXCIrYVtmXS5pZCxcImlnbm9yZWQgYmVjYXVzZSBpdCBoYXMgbm8gbWVtYmVyc1wiKTtjb250aW51ZX1mb3IodmFyIEU9MCx5PTA7eTxhW2ZdLm1lbWJlcnMubGVuZ3RoO3krKylcIm91dGVyXCI9PWFbZl0ubWVtYmVyc1t5XS5yb2xlP0UrKzpuLnZlcmJvc2UmJlwiaW5uZXJcIiE9YVtmXS5tZW1iZXJzW3ldLnJvbGUmJmNvbnNvbGUud2FybihcIk11bHRpcG9seWdvblwiLGFbZl0udHlwZStcIi9cIithW2ZdLmlkLFwibWVtYmVyXCIsYVtmXS5tZW1iZXJzW3ldLnR5cGUrXCIvXCIrYVtmXS5tZW1iZXJzW3ldLnJlZiwnaWdub3JlZCBiZWNhdXNlIGl0IGhhcyBhbiBpbnZhbGlkIHJvbGU6IFwiJythW2ZdLm1lbWJlcnNbeV0ucm9sZSsnXCInKTtpZihhW2ZdLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtnW2UucmVmXSYmKFwib3V0ZXJcIiE9PWUucm9sZXx8aShnW2UucmVmXS50YWdzLGFbZl0udGFncyl8fChnW2UucmVmXS5pc19tdWx0aXBvbHlnb25fb3V0bGluZT0hMCksXCJpbm5lclwiIT09ZS5yb2xlfHxpKGdbZS5yZWZdLnRhZ3MpfHwoZ1tlLnJlZl0uaXNfbXVsdGlwb2x5Z29uX291dGxpbmU9ITApKX0pLDA9PUUpe24udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTXVsdGlwb2x5Z29uIHJlbGF0aW9uXCIsYVtmXS50eXBlK1wiL1wiK2FbZl0uaWQsXCJpZ25vcmVkIGJlY2F1c2UgaXQgaGFzIG5vIG91dGVyIHdheXNcIik7Y29udGludWV9dmFyIFA9ITE7MSE9RXx8aShhW2ZdLnRhZ3Mse3R5cGU6ITB9KXx8KFA9ITApO3ZhciBrPW51bGw7aWYoUCl7dmFyIE89YVtmXS5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cIm91dGVyXCI9PT1lLnJvbGV9KVswXTtpZihPPWdbTy5yZWZdLHZvaWQgMD09PU8pe24udmVyYm9zZSYmY29uc29sZS53YXJuKFwiTXVsdGlwb2x5Z29uIHJlbGF0aW9uXCIsYVtmXS50eXBlK1wiL1wiK2FbZl0uaWQsXCJpZ25vcmVkIGJlY2F1c2Ugb3V0ZXIgd2F5XCIsTy50eXBlK1wiL1wiK08ucmVmLFwiaXMgbWlzc2luZ1wiKTtjb250aW51ZX1PLmlzX211bHRpcG9seWdvbl9vdXRsaW5lPSEwLGs9dShPLGFbZl0pfWVsc2Ugaz11KGFbZl0sYVtmXSk7aWYoaz09PSExKXtuLnZlcmJvc2UmJmNvbnNvbGUud2FybihcIk11bHRpcG9seWdvbiByZWxhdGlvblwiLGFbZl0udHlwZStcIi9cIithW2ZdLmlkLFwiaWdub3JlZCBiZWNhdXNlIGl0IGhhcyBpbnZhbGlkIGdlb21ldHJ5XCIpO2NvbnRpbnVlfWouZmVhdHVyZXMucHVzaChrKX1mb3IodmFyIGY9MDtmPHQubGVuZ3RoO2YrKylpZihyLmlzQXJyYXkodFtmXS5ub2Rlcykpe2lmKCF0W2ZdLmlzX211bHRpcG9seWdvbl9vdXRsaW5lKXtcIm51bWJlclwiIT10eXBlb2YgdFtmXS5pZCYmKHRbZl0uaWQ9K3RbZl0uaWQucmVwbGFjZShcIl9mdWxsR2VvbVwiLFwiXCIpKSx0W2ZdLnRhaW50ZWQ9ITEsdFtmXS5oaWRkZW49ITE7dmFyIFQ9bmV3IEFycmF5O2Zvcih5PTA7eTx0W2ZdLm5vZGVzLmxlbmd0aDt5KyspXCJvYmplY3RcIj09dHlwZW9mIHRbZl0ubm9kZXNbeV0/VC5wdXNoKFsrdFtmXS5ub2Rlc1t5XS5sb24sK3RbZl0ubm9kZXNbeV0ubGF0XSk6KG4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiV2F5XCIsdFtmXS50eXBlK1wiL1wiK3RbZl0uaWQsXCJpcyB0YWludGVkIGJ5IGFuIGludmFsaWQgbm9kZVwiKSx0W2ZdLnRhaW50ZWQ9ITApO2lmKFQubGVuZ3RoPD0xKW4udmVyYm9zZSYmY29uc29sZS53YXJuKFwiV2F5XCIsdFtmXS50eXBlK1wiL1wiK3RbZl0uaWQsXCJpZ25vcmVkIGJlY2F1c2UgaXQgY29udGFpbnMgdG9vIGZldyBub2Rlc1wiKTtlbHNle3ZhciBOPVwiTGluZVN0cmluZ1wiO1widW5kZWZpbmVkXCIhPXR5cGVvZiB0W2ZdLm5vZGVzWzBdJiZ0W2ZdLm5vZGVzWzBdPT09dFtmXS5ub2Rlc1t0W2ZdLm5vZGVzLmxlbmd0aC0xXSYmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0W2ZdLnRhZ3MmJmwodFtmXS50YWdzKXx8dFtmXS5fX2lzX2JvdW5kc19wbGFjZWhvbGRlcikmJihOPVwiUG9seWdvblwiLFQ9W1RdKTt2YXIgaz17dHlwZTpcIkZlYXR1cmVcIixpZDp0W2ZdLnR5cGUrXCIvXCIrdFtmXS5pZCxwcm9wZXJ0aWVzOnt0eXBlOnRbZl0udHlwZSxpZDp0W2ZdLmlkLHRhZ3M6dFtmXS50YWdzfHx7fSxyZWxhdGlvbnM6aC53YXlbdFtmXS5pZF18fFtdLG1ldGE6cyh0W2ZdKX0sZ2VvbWV0cnk6e3R5cGU6Tixjb29yZGluYXRlczpUfX07dFtmXS50YWludGVkJiYobi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJXYXlcIix0W2ZdLnR5cGUrXCIvXCIrdFtmXS5pZCxcImlzIHRhaW50ZWRcIiksay5wcm9wZXJ0aWVzLnRhaW50ZWQ9ITApLHRbZl0uX19pc19ib3VuZHNfcGxhY2Vob2xkZXImJihrLnByb3BlcnRpZXMuZ2VvbWV0cnk9XCJib3VuZHNcIiksXCJMaW5lU3RyaW5nXCI9PU4/QS5mZWF0dXJlcy5wdXNoKGspOmouZmVhdHVyZXMucHVzaChrKX19fWVsc2Ugbi52ZXJib3NlJiZjb25zb2xlLndhcm4oXCJXYXlcIix0W2ZdLnR5cGUrXCIvXCIrdFtmXS5pZCxcImlnbm9yZWQgYmVjYXVzZSBpdCBoYXMgbm8gbm9kZXNcIik7cmV0dXJuIF89e3R5cGU6XCJGZWF0dXJlQ29sbGVjdGlvblwiLGZlYXR1cmVzOltdfSxfLmZlYXR1cmVzPV8uZmVhdHVyZXMuY29uY2F0KGouZmVhdHVyZXMpLF8uZmVhdHVyZXM9Xy5mZWF0dXJlcy5jb25jYXQoQS5mZWF0dXJlcyksXy5mZWF0dXJlcz1fLmZlYXR1cmVzLmNvbmNhdCh4LmZlYXR1cmVzKSxuLmZsYXRQcm9wZXJ0aWVzJiZfLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5wcm9wZXJ0aWVzPXIubWVyZ2UoZS5wcm9wZXJ0aWVzLm1ldGEsZS5wcm9wZXJ0aWVzLnRhZ3Mse2lkOmUucHJvcGVydGllcy50eXBlK1wiL1wiK2UucHJvcGVydGllcy5pZH0pfSksXz1vKF8sITApfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9bi5wb2x5Z29uRmVhdHVyZXM7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdClyZXR1cm4gdChlKTtpZihcIm5vXCI9PT1lLmFyZWEpcmV0dXJuITE7Zm9yKHZhciByIGluIGUpe3ZhciBvPWVbcl0sYT10W3JdO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhJiZcIm5vXCIhPT1vKXtpZihhPT09ITApcmV0dXJuITA7aWYoYS5pbmNsdWRlZF92YWx1ZXMmJmEuaW5jbHVkZWRfdmFsdWVzW29dPT09ITApcmV0dXJuITA7aWYoYS5leGNsdWRlZF92YWx1ZXMmJmEuZXhjbHVkZWRfdmFsdWVzW29dIT09ITApcmV0dXJuITB9fXJldHVybiExfW49ci5tZXJnZSh7dmVyYm9zZTohMSxmbGF0UHJvcGVydGllczohMSx1bmludGVyZXN0aW5nVGFnczp7c291cmNlOiEwLHNvdXJjZV9yZWY6ITAsXCJzb3VyY2U6cmVmXCI6ITAsaGlzdG9yeTohMCxhdHRyaWJ1dGlvbjohMCxjcmVhdGVkX2J5OiEwLFwidGlnZXI6Y291bnR5XCI6ITAsXCJ0aWdlcjp0bGlkXCI6ITAsXCJ0aWdlcjp1cGxvYWRfdXVpZFwiOiEwfSxwb2x5Z29uRmVhdHVyZXM6YX0sbik7dmFyIHU7cmV0dXJuIHU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTERvY3VtZW50JiZlIGluc3RhbmNlb2YgWE1MRG9jdW1lbnR8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBYTUxEb2N1bWVudCYmZS5jaGlsZE5vZGVzP2koZSk6dChlKX0saS50b0dlb2pzb249aSxuLmV4cG9ydHM9aX0se1wiLi9sb2Rhc2guY3VzdG9tLmpzXCI6MixcImdlb2pzb24tcmV3aW5kXCI6MyxcIm9zbS1wb2x5Z29uLWZlYXR1cmVzXCI6Nn1dLDI6W2Z1bmN0aW9uKGUsbix0KXsoZnVuY3Rpb24oZSl7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe3JldHVybiBTLnBvcCgpfHxbXX1mdW5jdGlvbiBvKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGUudG9TdHJpbmcmJlwic3RyaW5nXCI9PXR5cGVvZihlK1wiXCIpfWZ1bmN0aW9uIGEoZSl7ZS5sZW5ndGg9MCxTLmxlbmd0aDxNJiZTLnB1c2goZSl9ZnVuY3Rpb24gaShlLG4sdCl7bnx8KG49MCksXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQmJih0PWU/ZS5sZW5ndGg6MCk7Zm9yKHZhciByPS0xLG89dC1ufHwwLGE9QXJyYXkobzwwPzA6byk7KytyPG87KWFbcl09ZVtuK3JdO3JldHVybiBhfWZ1bmN0aW9uIHMoKXt9ZnVuY3Rpb24gbChlKXtmdW5jdGlvbiBuKCl7aWYocil7dmFyIGU9aShyKTtwZS5hcHBseShlLGFyZ3VtZW50cyl9aWYodGhpcyBpbnN0YW5jZW9mIG4pe3ZhciBhPWModC5wcm90b3R5cGUpLHM9dC5hcHBseShhLGV8fGFyZ3VtZW50cyk7cmV0dXJuIHgocyk/czphfXJldHVybiB0LmFwcGx5KG8sZXx8YXJndW1lbnRzKX12YXIgdD1lWzBdLHI9ZVsyXSxvPWVbNF07cmV0dXJuIGtlKG4sZSksbn1mdW5jdGlvbiB1KGUsbix0LHMsbCl7aWYodCl7dmFyIGM9dChlKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYylyZXR1cm4gY312YXIgZj14KGUpO2lmKCFmKXJldHVybiBlO3ZhciBwPXNlLmNhbGwoZSk7aWYoIXpbcF18fCFfZS5ub2RlQ2xhc3MmJm8oZSkpcmV0dXJuIGU7dmFyIHk9dmVbcF07c3dpdGNoKHApe2Nhc2UgRzpjYXNlIEg6cmV0dXJuIG5ldyB5KCgrZSkpO2Nhc2UgcTpjYXNlIFY6cmV0dXJuIG5ldyB5KGUpO2Nhc2UgWDpyZXR1cm4gYz15KGUuc291cmNlLEwuZXhlYyhlKSksYy5sYXN0SW5kZXg9ZS5sYXN0SW5kZXgsY312YXIgZz1BZShlKTtpZihuKXt2YXIgZD0hcztzfHwocz1yKCkpLGx8fChsPXIoKSk7Zm9yKHZhciBiPXMubGVuZ3RoO2ItLTspaWYoc1tiXT09ZSlyZXR1cm4gbFtiXTtjPWc/eShlLmxlbmd0aCk6e319ZWxzZSBjPWc/aShlKTpTZSh7fSxlKTtyZXR1cm4gZyYmKGZlLmNhbGwoZSxcImluZGV4XCIpJiYoYy5pbmRleD1lLmluZGV4KSxmZS5jYWxsKGUsXCJpbnB1dFwiKSYmKGMuaW5wdXQ9ZS5pbnB1dCkpLG4/KHMucHVzaChlKSxsLnB1c2goYyksKGc/TmU6TWUpKGUsZnVuY3Rpb24oZSxyKXtjW3JdPXUoZSxuLHQscyxsKX0pLGQmJihhKHMpLGEobCkpLGMpOmN9ZnVuY3Rpb24gYyhlLG4pe3JldHVybiB4KGUpP2JlKGUpOnt9fWZ1bmN0aW9uIGYoZSxuLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJuIFQ7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIG58fCEoXCJwcm90b3R5cGVcImluIGUpKXJldHVybiBlO3ZhciByPWUuX19iaW5kRGF0YV9fO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiByJiYoX2UuZnVuY05hbWVzJiYocj0hZS5uYW1lKSxyPXJ8fCFfZS5mdW5jRGVjb21wLCFyKSl7dmFyIG89dWUuY2FsbChlKTtfZS5mdW5jTmFtZXN8fChyPSFCLnRlc3QobykpLHJ8fChyPUYudGVzdChvKSxrZShlLHIpKX1pZihyPT09ITF8fHIhPT0hMCYmMSZyWzFdKXJldHVybiBlO3N3aXRjaCh0KXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmNhbGwobix0KX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlLmNhbGwobix0LHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHQscixvKXtyZXR1cm4gZS5jYWxsKG4sdCxyLG8pfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKHQscixvLGEpe3JldHVybiBlLmNhbGwobix0LHIsbyxhKX19cmV0dXJuIE8oZSxuKX1mdW5jdGlvbiBwKGUpe2Z1bmN0aW9uIG4oKXt2YXIgZT11P3M6dGhpcztpZihvKXt2YXIgYj1pKG8pO3BlLmFwcGx5KGIsYXJndW1lbnRzKX1pZigoYXx8eSkmJihifHwoYj1pKGFyZ3VtZW50cykpLGEmJnBlLmFwcGx5KGIsYSkseSYmYi5sZW5ndGg8bCkpcmV0dXJuIHJ8PTE2LHAoW3QsZz9yOnImLTQsYixudWxsLHMsbF0pO2lmKGJ8fChiPWFyZ3VtZW50cyksZiYmKHQ9ZVtkXSksdGhpcyBpbnN0YW5jZW9mIG4pe2U9Yyh0LnByb3RvdHlwZSk7dmFyIG09dC5hcHBseShlLGIpO3JldHVybiB4KG0pP206ZX1yZXR1cm4gdC5hcHBseShlLGIpfXZhciB0PWVbMF0scj1lWzFdLG89ZVsyXSxhPWVbM10scz1lWzRdLGw9ZVs1XSx1PTEmcixmPTImcix5PTQmcixnPTgmcixkPXQ7cmV0dXJuIGtlKG4sZSksbn1mdW5jdGlvbiB5KGUsbix0LHIsbyl7KEFlKG4pP0U6TWUpKG4sZnVuY3Rpb24obixhKXt2YXIgaSxzLGw9bix1PWVbYV07aWYobiYmKChzPUFlKG4pKXx8TGUobikpKXtmb3IodmFyIGM9ci5sZW5ndGg7Yy0tOylpZihpPXJbY109PW4pe3U9b1tjXTticmVha31pZighaSl7dmFyIGY7dCYmKGw9dCh1LG4pLChmPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBsKSYmKHU9bCkpLGZ8fCh1PXM/QWUodSk/dTpbXTpMZSh1KT91Ont9KSxyLnB1c2gobiksby5wdXNoKHUpLGZ8fHkodSxuLHQscixvKX19ZWxzZSB0JiYobD10KHUsbiksXCJ1bmRlZmluZWRcIj09dHlwZW9mIGwmJihsPW4pKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgbCYmKHU9bCk7ZVthXT11fSl9ZnVuY3Rpb24gZyhlLG4sdCxyLG8sYSl7dmFyIHM9MSZuLHU9MiZuLGM9NCZuLGY9MTYmbix5PTMyJm47aWYoIXUmJiFfKGUpKXRocm93IG5ldyBUeXBlRXJyb3I7ZiYmIXQubGVuZ3RoJiYobiY9LTE3LGY9dD0hMSkseSYmIXIubGVuZ3RoJiYobiY9LTMzLHk9cj0hMSk7dmFyIGQ9ZSYmZS5fX2JpbmREYXRhX187aWYoZCYmZCE9PSEwKXJldHVybiBkPWkoZCksZFsyXSYmKGRbMl09aShkWzJdKSksZFszXSYmKGRbM109aShkWzNdKSksIXN8fDEmZFsxXXx8KGRbNF09byksIXMmJjEmZFsxXSYmKG58PTgpLCFjfHw0JmRbMV18fChkWzVdPWEpLGYmJnBlLmFwcGx5KGRbMl18fChkWzJdPVtdKSx0KSx5JiZnZS5hcHBseShkWzNdfHwoZFszXT1bXSksciksZFsxXXw9bixnLmFwcGx5KG51bGwsZCk7dmFyIGI9MT09bnx8MTc9PT1uP2w6cDtyZXR1cm4gYihbZSxuLHQscixvLGFdKX1mdW5jdGlvbiBkKCl7Sy5zaGFkb3dlZFByb3BzPUksSy5hcnJheT1LLmJvdHRvbT1LLmxvb3A9Sy50b3A9XCJcIixLLmluaXQ9XCJpdGVyYWJsZVwiLEsudXNlSGFzPSEwO2Zvcih2YXIgZSxuPTA7ZT1hcmd1bWVudHNbbl07bisrKWZvcih2YXIgdCBpbiBlKUtbdF09ZVt0XTt2YXIgcj1LLmFyZ3M7Sy5maXJzdEFyZz0vXlteLF0rLy5leGVjKHIpWzBdO3ZhciBvPUZ1bmN0aW9uKFwiYmFzZUNyZWF0ZUNhbGxiYWNrLCBlcnJvckNsYXNzLCBlcnJvclByb3RvLCBoYXNPd25Qcm9wZXJ0eSwgaW5kaWNhdG9yT2JqZWN0LCBpc0FyZ3VtZW50cywgaXNBcnJheSwgaXNTdHJpbmcsIGtleXMsIG9iamVjdFByb3RvLCBvYmplY3RUeXBlcywgbm9uRW51bVByb3BzLCBzdHJpbmdDbGFzcywgc3RyaW5nUHJvdG8sIHRvU3RyaW5nXCIsXCJyZXR1cm4gZnVuY3Rpb24oXCIrcitcIikge1xcblwiK3hlKEspK1wiXFxufVwiKTtyZXR1cm4gbyhmLFUsb2UsZmUsQyxoLEFlLEEsSy5rZXlzLGFlLFEsd2UsVixpZSxzZSl9ZnVuY3Rpb24gYihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZsZS50ZXN0KGUpfWZ1bmN0aW9uIG0oZSl7dmFyIG4sdDtyZXR1cm4hKCEoZSYmc2UuY2FsbChlKT09JCYmKG49ZS5jb25zdHJ1Y3RvciwhXyhuKXx8biBpbnN0YW5jZW9mIG4pKXx8IV9lLmFyZ3NDbGFzcyYmaChlKXx8IV9lLm5vZGVDbGFzcyYmbyhlKSkmJihfZS5vd25MYXN0PyhDZShlLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdD1mZS5jYWxsKHIsbiksITF9KSx0IT09ITEpOihDZShlLGZ1bmN0aW9uKGUsbil7dD1ufSksXCJ1bmRlZmluZWRcIj09dHlwZW9mIHR8fGZlLmNhbGwoZSx0KSkpfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgmJnNlLmNhbGwoZSk9PUR8fCExfWZ1bmN0aW9uIHYoZSxuLHQscil7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBuJiZudWxsIT1uJiYocj10LHQ9bixuPSExKSx1KGUsbixcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZmKHQsciwxKSl9ZnVuY3Rpb24gdyhlKXt2YXIgbj0hMDtpZighZSlyZXR1cm4gbjt2YXIgdD1zZS5jYWxsKGUpLHI9ZS5sZW5ndGg7cmV0dXJuIHQ9PVJ8fHQ9PVZ8fChfZS5hcmdzQ2xhc3M/dD09RDpoKGUpKXx8dD09JCYmXCJudW1iZXJcIj09dHlwZW9mIHImJl8oZS5zcGxpY2UpPyFyOihNZShlLGZ1bmN0aW9uKCl7cmV0dXJuIG49ITF9KSxuKX1mdW5jdGlvbiBfKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9ZnVuY3Rpb24geChlKXtyZXR1cm4hKCFlfHwhUVt0eXBlb2YgZV0pfWZ1bmN0aW9uIEEoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV8fGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZzZS5jYWxsKGUpPT1WfHwhMX1mdW5jdGlvbiBqKGUpe3ZhciBuPWFyZ3VtZW50cyx0PTI7aWYoIXgoZSkpcmV0dXJuIGU7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG5bMl0mJih0PW4ubGVuZ3RoKSx0PjMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG5bdC0yXSl2YXIgbz1mKG5bLS10LTFdLG5bdC0tXSwyKTtlbHNlIHQ+MiYmXCJmdW5jdGlvblwiPT10eXBlb2Ygblt0LTFdJiYobz1uWy0tdF0pO2Zvcih2YXIgcz1pKGFyZ3VtZW50cywxLHQpLGw9LTEsdT1yKCksYz1yKCk7KytsPHQ7KXkoZSxzW2xdLG8sdSxjKTtyZXR1cm4gYSh1KSxhKGMpLGV9ZnVuY3Rpb24gRShlLG4sdCl7aWYobiYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQmJkFlKGUpKWZvcih2YXIgcj0tMSxvPWUubGVuZ3RoOysrcjxvJiZuKGVbcl0scixlKSE9PSExOyk7ZWxzZSBOZShlLG4sdCk7cmV0dXJuIGV9ZnVuY3Rpb24gUChlKXtmb3IodmFyIG49LTEsdD1lP2UubGVuZ3RoOjAscj1bXTsrK248dDspe3ZhciBvPWVbbl07byYmci5wdXNoKG8pfXJldHVybiByfWZ1bmN0aW9uIE8oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4yP2coZSwxNyxpKGFyZ3VtZW50cywyKSxudWxsLG4pOmcoZSwxLG51bGwsbnVsbCxuKX1mdW5jdGlvbiBUKGUpe3JldHVybiBlfWZ1bmN0aW9uIE4oKXt9dmFyIFM9W10sQz17fSxNPTQwLEw9L1xcdyokLyxCPS9eXFxzKmZ1bmN0aW9uWyBcXG5cXHJcXHRdK1xcdy8sRj0vXFxidGhpc1xcYi8sST1bXCJjb25zdHJ1Y3RvclwiLFwiaGFzT3duUHJvcGVydHlcIixcImlzUHJvdG90eXBlT2ZcIixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXCJ0b0xvY2FsZVN0cmluZ1wiLFwidG9TdHJpbmdcIixcInZhbHVlT2ZcIl0sRD1cIltvYmplY3QgQXJndW1lbnRzXVwiLFI9XCJbb2JqZWN0IEFycmF5XVwiLEc9XCJbb2JqZWN0IEJvb2xlYW5dXCIsSD1cIltvYmplY3QgRGF0ZV1cIixVPVwiW29iamVjdCBFcnJvcl1cIixXPVwiW29iamVjdCBGdW5jdGlvbl1cIixxPVwiW29iamVjdCBOdW1iZXJdXCIsJD1cIltvYmplY3QgT2JqZWN0XVwiLFg9XCJbb2JqZWN0IFJlZ0V4cF1cIixWPVwiW29iamVjdCBTdHJpbmddXCIsej17fTt6W1ddPSExLHpbRF09eltSXT16W0ddPXpbSF09eltxXT16WyRdPXpbWF09eltWXT0hMDt2YXIgSj17Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITEsdmFsdWU6bnVsbCx3cml0YWJsZTohMX0sSz17YXJnczpcIlwiLGFycmF5Om51bGwsYm90dG9tOlwiXCIsZmlyc3RBcmc6XCJcIixpbml0OlwiXCIsa2V5czpudWxsLGxvb3A6XCJcIixzaGFkb3dlZFByb3BzOm51bGwsc3VwcG9ydDpudWxsLHRvcDpcIlwiLHVzZUhhczohMX0sUT17Ym9vbGVhbjohMSxmdW5jdGlvbjohMCxvYmplY3Q6ITAsbnVtYmVyOiExLHN0cmluZzohMSx1bmRlZmluZWQ6ITF9LFk9UVt0eXBlb2Ygd2luZG93XSYmd2luZG93fHx0aGlzLFo9UVt0eXBlb2YgdF0mJnQmJiF0Lm5vZGVUeXBlJiZ0LGVlPVFbdHlwZW9mIG5dJiZuJiYhbi5ub2RlVHlwZSYmbixuZT1lZSYmZWUuZXhwb3J0cz09PVomJlosdGU9UVt0eXBlb2YgZV0mJmU7IXRlfHx0ZS5nbG9iYWwhPT10ZSYmdGUud2luZG93IT09dGV8fChZPXRlKTt2YXIgcmU9W10sb2U9RXJyb3IucHJvdG90eXBlLGFlPU9iamVjdC5wcm90b3R5cGUsaWU9U3RyaW5nLnByb3RvdHlwZSxzZT1hZS50b1N0cmluZyxsZT1SZWdFeHAoXCJeXCIrU3RyaW5nKHNlKS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZyxcIlxcXFwkJlwiKS5yZXBsYWNlKC90b1N0cmluZ3wgZm9yIFteXFxdXSsvZyxcIi4qP1wiKStcIiRcIiksdWU9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLGNlPWIoY2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKSYmY2UsZmU9YWUuaGFzT3duUHJvcGVydHkscGU9cmUucHVzaCx5ZT1hZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZT1yZS51bnNoaWZ0LGRlPWZ1bmN0aW9uKCl7dHJ5e3ZhciBlPXt9LG49YihuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSkmJm4sdD1uKGUsZSxlKSYmbn1jYXRjaChlKXt9cmV0dXJuIHR9KCksYmU9YihiZT1PYmplY3QuY3JlYXRlKSYmYmUsbWU9YihtZT1BcnJheS5pc0FycmF5KSYmbWUsaGU9YihoZT1PYmplY3Qua2V5cykmJmhlLHZlPXt9O3ZlW1JdPUFycmF5LHZlW0ddPUJvb2xlYW4sdmVbSF09RGF0ZSx2ZVtXXT1GdW5jdGlvbix2ZVskXT1PYmplY3QsdmVbcV09TnVtYmVyLHZlW1hdPVJlZ0V4cCx2ZVtWXT1TdHJpbmc7dmFyIHdlPXt9O3dlW1JdPXdlW0hdPXdlW3FdPXtjb25zdHJ1Y3RvcjohMCx0b0xvY2FsZVN0cmluZzohMCx0b1N0cmluZzohMCx2YWx1ZU9mOiEwfSx3ZVtHXT13ZVtWXT17Y29uc3RydWN0b3I6ITAsdG9TdHJpbmc6ITAsdmFsdWVPZjohMH0sd2VbVV09d2VbV109d2VbWF09e2NvbnN0cnVjdG9yOiEwLHRvU3RyaW5nOiEwfSx3ZVskXT17Y29uc3RydWN0b3I6ITB9LGZ1bmN0aW9uKCl7Zm9yKHZhciBlPUkubGVuZ3RoO2UtLTspe3ZhciBuPUlbZV07Zm9yKHZhciB0IGluIHdlKWZlLmNhbGwod2UsdCkmJiFmZS5jYWxsKHdlW3RdLG4pJiYod2VbdF1bbl09ITEpfX0oKTt2YXIgX2U9cy5zdXBwb3J0PXt9OyFmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKCl7dGhpcy54PTF9LG49ezA6MSxsZW5ndGg6MX0sdD1bXTtlLnByb3RvdHlwZT17dmFsdWVPZjoxLHk6MX07Zm9yKHZhciByIGluIG5ldyBlKXQucHVzaChyKTtmb3IociBpbiBhcmd1bWVudHMpO19lLmFyZ3NDbGFzcz1zZS5jYWxsKGFyZ3VtZW50cyk9PUQsX2UuYXJnc09iamVjdD1hcmd1bWVudHMuY29uc3RydWN0b3I9PU9iamVjdCYmIShhcmd1bWVudHMgaW5zdGFuY2VvZiBBcnJheSksX2UuZW51bUVycm9yUHJvcHM9eWUuY2FsbChvZSxcIm1lc3NhZ2VcIil8fHllLmNhbGwob2UsXCJuYW1lXCIpLF9lLmVudW1Qcm90b3R5cGVzPXllLmNhbGwoZSxcInByb3RvdHlwZVwiKSxfZS5mdW5jRGVjb21wPSFiKFkuV2luUlRFcnJvcikmJkYudGVzdChmdW5jdGlvbigpe3JldHVybiB0aGlzfSksX2UuZnVuY05hbWVzPVwic3RyaW5nXCI9PXR5cGVvZiBGdW5jdGlvbi5uYW1lLF9lLm5vbkVudW1BcmdzPTAhPXIsX2Uubm9uRW51bVNoYWRvd3M9IS92YWx1ZU9mLy50ZXN0KHQpLF9lLm93bkxhc3Q9XCJ4XCIhPXRbMF0sX2Uuc3BsaWNlT2JqZWN0cz0ocmUuc3BsaWNlLmNhbGwobiwwLDEpLCFuWzBdKSxfZS51bmluZGV4ZWRDaGFycz1cInhcIlswXStPYmplY3QoXCJ4XCIpWzBdIT1cInh4XCI7dHJ5e19lLm5vZGVDbGFzcz0hKHNlLmNhbGwoZG9jdW1lbnQpPT0kJiYhKHt0b1N0cmluZzowfStcIlwiKSl9Y2F0Y2goZSl7X2Uubm9kZUNsYXNzPSEwfX0oMSk7dmFyIHhlPWZ1bmN0aW9uKGUpe3ZhciBuPVwidmFyIGluZGV4LCBpdGVyYWJsZSA9IFwiK2UuZmlyc3RBcmcrXCIsIHJlc3VsdCA9IFwiK2UuaW5pdCtcIjtcXG5pZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xcblwiK2UudG9wK1wiO1wiO2UuYXJyYXk/KG4rPVwiXFxudmFyIGxlbmd0aCA9IGl0ZXJhYmxlLmxlbmd0aDsgaW5kZXggPSAtMTtcXG5pZiAoXCIrZS5hcnJheStcIikgeyAgXCIsX2UudW5pbmRleGVkQ2hhcnMmJihuKz1cIlxcbiAgaWYgKGlzU3RyaW5nKGl0ZXJhYmxlKSkge1xcbiAgICBpdGVyYWJsZSA9IGl0ZXJhYmxlLnNwbGl0KCcnKVxcbiAgfSAgXCIpLG4rPVwiXFxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xcbiAgICBcIitlLmxvb3ArXCI7XFxuICB9XFxufVxcbmVsc2UgeyAgXCIpOl9lLm5vbkVudW1BcmdzJiYobis9XCJcXG4gIHZhciBsZW5ndGggPSBpdGVyYWJsZS5sZW5ndGg7IGluZGV4ID0gLTE7XFxuICBpZiAobGVuZ3RoICYmIGlzQXJndW1lbnRzKGl0ZXJhYmxlKSkge1xcbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xcbiAgICAgIGluZGV4ICs9ICcnO1xcbiAgICAgIFwiK2UubG9vcCtcIjtcXG4gICAgfVxcbiAgfSBlbHNlIHsgIFwiKSxfZS5lbnVtUHJvdG90eXBlcyYmKG4rPVwiXFxuICB2YXIgc2tpcFByb3RvID0gdHlwZW9mIGl0ZXJhYmxlID09ICdmdW5jdGlvbic7XFxuICBcIiksX2UuZW51bUVycm9yUHJvcHMmJihuKz1cIlxcbiAgdmFyIHNraXBFcnJvclByb3BzID0gaXRlcmFibGUgPT09IGVycm9yUHJvdG8gfHwgaXRlcmFibGUgaW5zdGFuY2VvZiBFcnJvcjtcXG4gIFwiKTt2YXIgdD1bXTtpZihfZS5lbnVtUHJvdG90eXBlcyYmdC5wdXNoKCchKHNraXBQcm90byAmJiBpbmRleCA9PSBcInByb3RvdHlwZVwiKScpLF9lLmVudW1FcnJvclByb3BzJiZ0LnB1c2goJyEoc2tpcEVycm9yUHJvcHMgJiYgKGluZGV4ID09IFwibWVzc2FnZVwiIHx8IGluZGV4ID09IFwibmFtZVwiKSknKSxlLnVzZUhhcyYmZS5rZXlzKW4rPVwiXFxuICB2YXIgb3duSW5kZXggPSAtMSxcXG4gICAgICBvd25Qcm9wcyA9IG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0gJiYga2V5cyhpdGVyYWJsZSksXFxuICAgICAgbGVuZ3RoID0gb3duUHJvcHMgPyBvd25Qcm9wcy5sZW5ndGggOiAwO1xcblxcbiAgd2hpbGUgKCsrb3duSW5kZXggPCBsZW5ndGgpIHtcXG4gICAgaW5kZXggPSBvd25Qcm9wc1tvd25JbmRleF07XFxuXCIsdC5sZW5ndGgmJihuKz1cIiAgICBpZiAoXCIrdC5qb2luKFwiICYmIFwiKStcIikge1xcbiAgXCIpLG4rPWUubG9vcCtcIjsgICAgXCIsdC5sZW5ndGgmJihuKz1cIlxcbiAgICB9XCIpLG4rPVwiXFxuICB9ICBcIjtlbHNlIGlmKG4rPVwiXFxuICBmb3IgKGluZGV4IGluIGl0ZXJhYmxlKSB7XFxuXCIsZS51c2VIYXMmJnQucHVzaChcImhhc093blByb3BlcnR5LmNhbGwoaXRlcmFibGUsIGluZGV4KVwiKSx0Lmxlbmd0aCYmKG4rPVwiICAgIGlmIChcIit0LmpvaW4oXCIgJiYgXCIpK1wiKSB7XFxuICBcIiksbis9ZS5sb29wK1wiOyAgICBcIix0Lmxlbmd0aCYmKG4rPVwiXFxuICAgIH1cIiksbis9XCJcXG4gIH0gICAgXCIsX2Uubm9uRW51bVNoYWRvd3Mpe2ZvcihuKz1cIlxcblxcbiAgaWYgKGl0ZXJhYmxlICE9PSBvYmplY3RQcm90bykge1xcbiAgICB2YXIgY3RvciA9IGl0ZXJhYmxlLmNvbnN0cnVjdG9yLFxcbiAgICAgICAgaXNQcm90byA9IGl0ZXJhYmxlID09PSAoY3RvciAmJiBjdG9yLnByb3RvdHlwZSksXFxuICAgICAgICBjbGFzc05hbWUgPSBpdGVyYWJsZSA9PT0gc3RyaW5nUHJvdG8gPyBzdHJpbmdDbGFzcyA6IGl0ZXJhYmxlID09PSBlcnJvclByb3RvID8gZXJyb3JDbGFzcyA6IHRvU3RyaW5nLmNhbGwoaXRlcmFibGUpLFxcbiAgICAgICAgbm9uRW51bSA9IG5vbkVudW1Qcm9wc1tjbGFzc05hbWVdO1xcbiAgICAgIFwiLGs9MDtrPDc7aysrKW4rPVwiXFxuICAgIGluZGV4ID0gJ1wiK2Uuc2hhZG93ZWRQcm9wc1trXStcIic7XFxuICAgIGlmICgoIShpc1Byb3RvICYmIG5vbkVudW1baW5kZXhdKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZXJhYmxlLCBpbmRleCkpXCIsZS51c2VIYXN8fChuKz1cIiB8fCAoIW5vbkVudW1baW5kZXhdICYmIGl0ZXJhYmxlW2luZGV4XSAhPT0gb2JqZWN0UHJvdG9baW5kZXhdKVwiKSxuKz1cIikge1xcbiAgICAgIFwiK2UubG9vcCtcIjtcXG4gICAgfSAgICAgIFwiO24rPVwiXFxuICB9ICAgIFwifXJldHVybihlLmFycmF5fHxfZS5ub25FbnVtQXJncykmJihuKz1cIlxcbn1cIiksbis9ZS5ib3R0b20rXCI7XFxucmV0dXJuIHJlc3VsdFwifTtiZXx8KGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBmdW5jdGlvbihuKXtpZih4KG4pKXtlLnByb3RvdHlwZT1uO3ZhciB0PW5ldyBlO2UucHJvdG90eXBlPW51bGx9cmV0dXJuIHR8fFkuT2JqZWN0KCl9fSgpKTt2YXIga2U9ZGU/ZnVuY3Rpb24oZSxuKXtKLnZhbHVlPW4sZGUoZSxcIl9fYmluZERhdGFfX1wiLEopfTpOO19lLmFyZ3NDbGFzc3x8KGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgmJmZlLmNhbGwoZSxcImNhbGxlZVwiKSYmIXllLmNhbGwoZSxcImNhbGxlZVwiKXx8ITF9KTt2YXIgQWU9bWV8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoJiZzZS5jYWxsKGUpPT1SfHwhMX0samU9ZCh7YXJnczpcIm9iamVjdFwiLGluaXQ6XCJbXVwiLHRvcDpcImlmICghKG9iamVjdFR5cGVzW3R5cGVvZiBvYmplY3RdKSkgcmV0dXJuIHJlc3VsdFwiLGxvb3A6XCJyZXN1bHQucHVzaChpbmRleClcIn0pLEVlPWhlP2Z1bmN0aW9uKGUpe3JldHVybiB4KGUpP19lLmVudW1Qcm90b3R5cGVzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlfHxfZS5ub25FbnVtQXJncyYmZS5sZW5ndGgmJmgoZSk/amUoZSk6aGUoZSk6W119OmplLFBlPXthcmdzOlwiY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmdcIix0b3A6XCJjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpXCIsYXJyYXk6XCJ0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInXCIsa2V5czpFZSxsb29wOlwiaWYgKGNhbGxiYWNrKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkgcmV0dXJuIHJlc3VsdFwifSxPZT17YXJnczpcIm9iamVjdCwgc291cmNlLCBndWFyZFwiLHRvcDpcInZhciBhcmdzID0gYXJndW1lbnRzLFxcbiAgICBhcmdzSW5kZXggPSAwLFxcbiAgICBhcmdzTGVuZ3RoID0gdHlwZW9mIGd1YXJkID09ICdudW1iZXInID8gMiA6IGFyZ3MubGVuZ3RoO1xcbndoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcXG4gIGl0ZXJhYmxlID0gYXJnc1thcmdzSW5kZXhdO1xcbiAgaWYgKGl0ZXJhYmxlICYmIG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHtcIixrZXlzOkVlLGxvb3A6XCJpZiAodHlwZW9mIHJlc3VsdFtpbmRleF0gPT0gJ3VuZGVmaW5lZCcpIHJlc3VsdFtpbmRleF0gPSBpdGVyYWJsZVtpbmRleF1cIixib3R0b206XCIgIH1cXG59XCJ9LFRlPXt0b3A6XCJpZiAoIW9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHJldHVybiByZXN1bHQ7XFxuXCIrUGUudG9wLGFycmF5OiExfSxOZT1kKFBlKSxTZT1kKE9lLHt0b3A6T2UudG9wLnJlcGxhY2UoXCI7XCIsXCI7XFxuaWYgKGFyZ3NMZW5ndGggPiAzICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAyXSA9PSAnZnVuY3Rpb24nKSB7XFxuICB2YXIgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soYXJnc1stLWFyZ3NMZW5ndGggLSAxXSwgYXJnc1thcmdzTGVuZ3RoLS1dLCAyKTtcXG59IGVsc2UgaWYgKGFyZ3NMZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAxXSA9PSAnZnVuY3Rpb24nKSB7XFxuICBjYWxsYmFjayA9IGFyZ3NbLS1hcmdzTGVuZ3RoXTtcXG59XCIpLGxvb3A6XCJyZXN1bHRbaW5kZXhdID0gY2FsbGJhY2sgPyBjYWxsYmFjayhyZXN1bHRbaW5kZXhdLCBpdGVyYWJsZVtpbmRleF0pIDogaXRlcmFibGVbaW5kZXhdXCJ9KSxDZT1kKFBlLFRlLHt1c2VIYXM6ITF9KSxNZT1kKFBlLFRlKTtfKC94LykmJihfPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJnNlLmNhbGwoZSk9PVd9KTt2YXIgTGU9Y2U/ZnVuY3Rpb24oZSl7aWYoIWV8fHNlLmNhbGwoZSkhPSR8fCFfZS5hcmdzQ2xhc3MmJmgoZSkpcmV0dXJuITE7dmFyIG49ZS52YWx1ZU9mLHQ9YihuKSYmKHQ9Y2UobikpJiZjZSh0KTtyZXR1cm4gdD9lPT10fHxjZShlKT09dDptKGUpfTptO3MuYXNzaWduPVNlLHMuYmluZD1PLHMuY29tcGFjdD1QLHMuZm9yRWFjaD1FLHMuZm9ySW49Q2Uscy5mb3JPd249TWUscy5rZXlzPUVlLHMubWVyZ2U9aixzLmVhY2g9RSxzLmV4dGVuZD1TZSxzLmNsb25lPXYscy5pZGVudGl0eT1ULHMuaXNBcmd1bWVudHM9aCxzLmlzQXJyYXk9QWUscy5pc0VtcHR5PXcscy5pc0Z1bmN0aW9uPV8scy5pc09iamVjdD14LHMuaXNQbGFpbk9iamVjdD1MZSxzLmlzU3RyaW5nPUEscy5ub29wPU4scy5WRVJTSU9OPVwiMi40LjFcIixaJiZlZSYmbmUmJigoZWUuZXhwb3J0cz1zKS5fPXMpfSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDM6W2Z1bmN0aW9uKGUsbix0KXtmdW5jdGlvbiByKGUsbil7c3dpdGNoKGUmJmUudHlwZXx8bnVsbCl7Y2FzZVwiRmVhdHVyZUNvbGxlY3Rpb25cIjpyZXR1cm4gZS5mZWF0dXJlcz1lLmZlYXR1cmVzLm1hcChvKHIsbikpLGU7Y2FzZVwiRmVhdHVyZVwiOnJldHVybiBlLmdlb21ldHJ5PXIoZS5nZW9tZXRyeSxuKSxlO2Nhc2VcIlBvbHlnb25cIjpjYXNlXCJNdWx0aVBvbHlnb25cIjpyZXR1cm4gYShlLG4pO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIG8oZSxuKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodCxuKX19ZnVuY3Rpb24gYShlLG4pe3JldHVyblwiUG9seWdvblwiPT09ZS50eXBlP2UuY29vcmRpbmF0ZXM9aShlLmNvb3JkaW5hdGVzLG4pOlwiTXVsdGlQb2x5Z29uXCI9PT1lLnR5cGUmJihlLmNvb3JkaW5hdGVzPWUuY29vcmRpbmF0ZXMubWFwKG8oaSxuKSkpLGV9ZnVuY3Rpb24gaShlLG4pe249ISFuLGVbMF09cyhlWzBdLCFuKTtmb3IodmFyIHQ9MTt0PGUubGVuZ3RoO3QrKyllW3RdPXMoZVt0XSxuKTtyZXR1cm4gZX1mdW5jdGlvbiBzKGUsbil7cmV0dXJuIGwoZSk9PT1uP2U6ZS5yZXZlcnNlKCl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gdS5yaW5nKGUpPj0wfXZhciB1PWUoXCJnZW9qc29uLWFyZWFcIik7bi5leHBvcnRzPXJ9LHtcImdlb2pzb24tYXJlYVwiOjR9XSw0OltmdW5jdGlvbihlLG4sdCl7ZnVuY3Rpb24gcihlKXtpZihcIlBvbHlnb25cIj09PWUudHlwZSlyZXR1cm4gbyhlLmNvb3JkaW5hdGVzKTtpZihcIk11bHRpUG9seWdvblwiPT09ZS50eXBlKXtmb3IodmFyIG49MCx0PTA7dDxlLmNvb3JkaW5hdGVzLmxlbmd0aDt0Kyspbis9byhlLmNvb3JkaW5hdGVzW3RdKTtyZXR1cm4gbn1yZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGUpe3ZhciBuPTA7aWYoZSYmZS5sZW5ndGg+MCl7bis9TWF0aC5hYnMoYShlWzBdKSk7Zm9yKHZhciB0PTE7dDxlLmxlbmd0aDt0Kyspbi09TWF0aC5hYnMoYShlW3RdKSl9cmV0dXJuIG59ZnVuY3Rpb24gYShlKXt2YXIgbj0wO2lmKGUubGVuZ3RoPjIpe2Zvcih2YXIgdCxyLG89MDtvPGUubGVuZ3RoLTE7bysrKXQ9ZVtvXSxyPWVbbysxXSxuKz1pKHJbMF0tdFswXSkqKDIrTWF0aC5zaW4oaSh0WzFdKSkrTWF0aC5zaW4oaShyWzFdKSkpO249bipzLlJBRElVUypzLlJBRElVUy8yfXJldHVybiBufWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGUqTWF0aC5QSS8xODB9dmFyIHM9ZShcIndnczg0XCIpO24uZXhwb3J0cy5nZW9tZXRyeT1yLG4uZXhwb3J0cy5yaW5nPWF9LHt3Z3M4NDo1fV0sNTpbZnVuY3Rpb24oZSxuLHQpe24uZXhwb3J0cy5SQURJVVM9NjM3ODEzNyxuLmV4cG9ydHMuRkxBVFRFTklORz0xLzI5OC4yNTcyMjM1NjMsbi5leHBvcnRzLlBPTEFSX1JBRElVUz02MzU2NzUyLjMxNDJ9LHt9XSw2OltmdW5jdGlvbihlLG4sdCl7bi5leHBvcnRzPWUoXCIuL3BvbHlnb24tZmVhdHVyZXMuanNvblwiKX0se1wiLi9wb2x5Z29uLWZlYXR1cmVzLmpzb25cIjo3fV0sNzpbZnVuY3Rpb24oZSxuLHQpe24uZXhwb3J0cz1be2tleTpcImJ1aWxkaW5nXCIscG9seWdvbjpcImFsbFwifSx7a2V5OlwiaGlnaHdheVwiLHBvbHlnb246XCJ3aGl0ZWxpc3RcIix2YWx1ZXM6W1wic2VydmljZXNcIixcInJlc3RfYXJlYVwiLFwiZXNjYXBlXCIsXCJlbGV2YXRvclwiXX0se2tleTpcIm5hdHVyYWxcIixwb2x5Z29uOlwiYmxhY2tsaXN0XCIsdmFsdWVzOltcImNvYXN0bGluZVwiLFwiY2xpZmZcIixcInJpZGdlXCIsXCJhcmV0ZVwiLFwidHJlZV9yb3dcIl19LHtrZXk6XCJsYW5kdXNlXCIscG9seWdvbjpcImFsbFwifSx7a2V5Olwid2F0ZXJ3YXlcIixwb2x5Z29uOlwid2hpdGVsaXN0XCIsdmFsdWVzOltcInJpdmVyYmFua1wiLFwiZG9ja1wiLFwiYm9hdHlhcmRcIixcImRhbVwiXX0se2tleTpcImFtZW5pdHlcIixwb2x5Z29uOlwiYWxsXCJ9LHtrZXk6XCJsZWlzdXJlXCIscG9seWdvbjpcImFsbFwifSx7a2V5OlwiYmFycmllclwiLHBvbHlnb246XCJ3aGl0ZWxpc3RcIix2YWx1ZXM6W1wiY2l0eV93YWxsXCIsXCJkaXRjaFwiLFwiaGVkZ2VcIixcInJldGFpbmluZ193YWxsXCIsXCJ3YWxsXCIsXCJzcGlrZXNcIl19LHtrZXk6XCJyYWlsd2F5XCIscG9seWdvbjpcIndoaXRlbGlzdFwiLHZhbHVlczpbXCJzdGF0aW9uXCIsXCJ0dXJudGFibGVcIixcInJvdW5kaG91c2VcIixcInBsYXRmb3JtXCJdfSx7a2V5OlwiYXJlYVwiLHBvbHlnb246XCJhbGxcIn0se2tleTpcImJvdW5kYXJ5XCIscG9seWdvbjpcImFsbFwifSx7a2V5OlwibWFuX21hZGVcIixwb2x5Z29uOlwiYmxhY2tsaXN0XCIsdmFsdWVzOltcImN1dGxpbmVcIixcImVtYmFua21lbnRcIixcInBpcGVsaW5lXCJdfSx7a2V5OlwicG93ZXJcIixwb2x5Z29uOlwid2hpdGVsaXN0XCIsdmFsdWVzOltcInBsYW50XCIsXCJzdWJzdGF0aW9uXCIsXCJnZW5lcmF0b3JcIixcInRyYW5zZm9ybWVyXCJdfSx7a2V5OlwicGxhY2VcIixwb2x5Z29uOlwiYWxsXCJ9LHtrZXk6XCJzaG9wXCIscG9seWdvbjpcImFsbFwifSx7a2V5OlwiYWVyb3dheVwiLHBvbHlnb246XCJibGFja2xpc3RcIix2YWx1ZXM6W1widGF4aXdheVwiXX0se2tleTpcInRvdXJpc21cIixwb2x5Z29uOlwiYWxsXCJ9LHtrZXk6XCJoaXN0b3JpY1wiLHBvbHlnb246XCJhbGxcIn0se2tleTpcInB1YmxpY190cmFuc3BvcnRcIixwb2x5Z29uOlwiYWxsXCJ9LHtrZXk6XCJvZmZpY2VcIixwb2x5Z29uOlwiYWxsXCJ9LHtrZXk6XCJidWlsZGluZzpwYXJ0XCIscG9seWdvbjpcImFsbFwifSx7a2V5OlwibWlsaXRhcnlcIixwb2x5Z29uOlwiYWxsXCJ9LHtrZXk6XCJydWluc1wiLHBvbHlnb246XCJhbGxcIn0se2tleTpcImFyZWE6aGlnaHdheVwiLHBvbHlnb246XCJhbGxcIn0se2tleTpcImNyYWZ0XCIscG9seWdvbjpcImFsbFwifSx7a2V5OlwiZ29sZlwiLHBvbHlnb246XCJhbGxcIn1dfSx7fV19LHt9LFsxXSkoMSl9KTsiLCIoZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9Zy5zaHB3cml0ZSA9IGYoKX19KShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjBcbi8vXG4vLyBUSElTIElTIE5PVCBURVNURUQgTk9SIExJS0VMWSBUTyBXT1JLIE9VVFNJREUgVjghXG4vL1xuLy8gT3JpZ2luYWxseSBmcm9tIG5hcndoYWwuanMgKGh0dHA6Ly9uYXJ3aGFsanMub3JnKVxuLy8gQ29weXJpZ2h0IChjKSAyMDA5IFRob21hcyBSb2JpbnNvbiA8Mjgwbm9ydGguY29tPlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0b1xuLy8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGVcbi8vIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuLy8gc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU5cbi8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbi8vIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyB3aGVuIHVzZWQgaW4gbm9kZSwgdGhpcyB3aWxsIGFjdHVhbGx5IGxvYWQgdGhlIHV0aWwgbW9kdWxlIHdlIGRlcGVuZCBvblxuLy8gdmVyc3VzIGxvYWRpbmcgdGhlIGJ1aWx0aW4gdXRpbCBtb2R1bGUgYXMgaGFwcGVucyBvdGhlcndpc2Vcbi8vIHRoaXMgaXMgYSBidWcgaW4gbm9kZSBtb2R1bGUgbG9hZGluZyBhcyBmYXIgYXMgSSBhbSBjb25jZXJuZWRcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTtcblxudmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvd1xuLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlXG4vLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblxudmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7XG5cbi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC5cbi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KVxuXG5hc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG4gIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7XG4gIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjtcbiAgaWYgKG9wdGlvbnMubWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcbiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7XG4gIH1cbiAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG5cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuICAgIGlmIChlcnIuc3RhY2spIHtcbiAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cbiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lc1xuICAgICAgdmFyIGZuX25hbWUgPSBzdGFja1N0YXJ0RnVuY3Rpb24ubmFtZTtcbiAgICAgIHZhciBpZHggPSBvdXQuaW5kZXhPZignXFxuJyArIGZuX25hbWUpO1xuICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZVxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHN0cmlwIG91dCBldmVyeXRoaW5nIGJlZm9yZSBpdCAoYW5kIGl0cyBsaW5lKVxuICAgICAgICB2YXIgbmV4dF9saW5lID0gb3V0LmluZGV4T2YoJ1xcbicsIGlkeCArIDEpO1xuICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YWNrID0gb3V0O1xuICAgIH1cbiAgfVxufTtcblxuLy8gYXNzZXJ0LkFzc2VydGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3JcbnV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7XG5cbmZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgaWYgKHV0aWwuaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuICcnICsgdmFsdWU7XG4gIH1cbiAgaWYgKHV0aWwuaXNOdW1iZXIodmFsdWUpICYmICFpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuICBpZiAodXRpbC5pc0Z1bmN0aW9uKHZhbHVlKSB8fCB1dGlsLmlzUmVnRXhwKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuICBpZiAodXRpbC5pc1N0cmluZyhzKSkge1xuICAgIHJldHVybiBzLmxlbmd0aCA8IG4gPyBzIDogcy5zbGljZSgwLCBuKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHtcbiAgcmV0dXJuIHRydW5jYXRlKEpTT04uc3RyaW5naWZ5KHNlbGYuYWN0dWFsLCByZXBsYWNlciksIDEyOCkgKyAnICcgK1xuICAgICAgICAgc2VsZi5vcGVyYXRvciArICcgJyArXG4gICAgICAgICB0cnVuY2F0ZShKU09OLnN0cmluZ2lmeShzZWxmLmV4cGVjdGVkLCByZXBsYWNlciksIDEyOCk7XG59XG5cbi8vIEF0IHByZXNlbnQgb25seSB0aGUgdGhyZWUga2V5cyBtZW50aW9uZWQgYWJvdmUgYXJlIHVzZWQgYW5kXG4vLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3Ncbi8vIG90aGVyIGtleXMgdG8gdGhlIEFzc2VydGlvbkVycm9yJ3MgY29uc3RydWN0b3IgLSB0aGV5IHdpbGwgYmVcbi8vIGlnbm9yZWQuXG5cbi8vIDMuIEFsbCBvZiB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBtdXN0IHRocm93IGFuIEFzc2VydGlvbkVycm9yXG4vLyB3aGVuIGEgY29ycmVzcG9uZGluZyBjb25kaXRpb24gaXMgbm90IG1ldCwgd2l0aCBhIG1lc3NhZ2UgdGhhdFxuLy8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZVxuLy8gYm90aCB0aGUgYWN0dWFsIGFuZCBleHBlY3RlZCB2YWx1ZXMgdG8gdGhlIGFzc2VydGlvbiBlcnJvciBmb3Jcbi8vIGRpc3BsYXkgcHVycG9zZXMuXG5cbmZ1bmN0aW9uIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IsIHN0YWNrU3RhcnRGdW5jdGlvbikge1xuICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcbiAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIGFjdHVhbDogYWN0dWFsLFxuICAgIGV4cGVjdGVkOiBleHBlY3RlZCxcbiAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG4gICAgc3RhY2tTdGFydEZ1bmN0aW9uOiBzdGFja1N0YXJ0RnVuY3Rpb25cbiAgfSk7XG59XG5cbi8vIEVYVEVOU0lPTiEgYWxsb3dzIGZvciB3ZWxsIGJlaGF2ZWQgZXJyb3JzIGRlZmluZWQgZWxzZXdoZXJlLlxuYXNzZXJ0LmZhaWwgPSBmYWlsO1xuXG4vLyA0LiBQdXJlIGFzc2VydGlvbiB0ZXN0cyB3aGV0aGVyIGEgdmFsdWUgaXMgdHJ1dGh5LCBhcyBkZXRlcm1pbmVkXG4vLyBieSAhIWd1YXJkLlxuLy8gYXNzZXJ0Lm9rKGd1YXJkLCBtZXNzYWdlX29wdCk7XG4vLyBUaGlzIHN0YXRlbWVudCBpcyBlcXVpdmFsZW50IHRvIGFzc2VydC5lcXVhbCh0cnVlLCAhIWd1YXJkLFxuLy8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZVxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKHRydWUsIGd1YXJkLCBtZXNzYWdlX29wdCk7LlxuXG5mdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkge1xuICBpZiAoIXZhbHVlKSBmYWlsKHZhbHVlLCB0cnVlLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQub2spO1xufVxuYXNzZXJ0Lm9rID0gb2s7XG5cbi8vIDUuIFRoZSBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc2hhbGxvdywgY29lcmNpdmUgZXF1YWxpdHkgd2l0aFxuLy8gPT0uXG4vLyBhc3NlcnQuZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgIT0gZXhwZWN0ZWQpIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09JywgYXNzZXJ0LmVxdWFsKTtcbn07XG5cbi8vIDYuIFRoZSBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciB3aGV0aGVyIHR3byBvYmplY3RzIGFyZSBub3QgZXF1YWxcbi8vIHdpdGggIT0gYXNzZXJ0Lm5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdEVxdWFsID0gZnVuY3Rpb24gbm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpO1xuICB9XG59O1xuXG4vLyA3LiBUaGUgZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGEgZGVlcCBlcXVhbGl0eSByZWxhdGlvbi5cbi8vIGFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuZGVlcEVxdWFsID0gZnVuY3Rpb24gZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkge1xuICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9IGVsc2UgaWYgKHV0aWwuaXNCdWZmZXIoYWN0dWFsKSAmJiB1dGlsLmlzQnVmZmVyKGV4cGVjdGVkKSkge1xuICAgIGlmIChhY3R1YWwubGVuZ3RoICE9IGV4cGVjdGVkLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3R1YWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhY3R1YWxbaV0gIT09IGV4cGVjdGVkW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBEYXRlIG9iamVjdCB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSB0aW1lLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuICAvLyBwcm9wZXJ0aWVzIChgZ2xvYmFsYCwgYG11bHRpbGluZWAsIGBsYXN0SW5kZXhgLCBgaWdub3JlQ2FzZWApLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcbiAgICAgICAgICAgYWN0dWFsLmdsb2JhbCA9PT0gZXhwZWN0ZWQuZ2xvYmFsICYmXG4gICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJlxuICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcbiAgICAgICAgICAgYWN0dWFsLmlnbm9yZUNhc2UgPT09IGV4cGVjdGVkLmlnbm9yZUNhc2U7XG5cbiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKCF1dGlsLmlzT2JqZWN0KGFjdHVhbCkgJiYgIXV0aWwuaXNPYmplY3QoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiKSB7XG4gIGlmICh1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGEpIHx8IHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYikpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuXG4gIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcbiAgLy8gaWYgb25lIGlzIGEgcHJpbWl0aXZlLCB0aGUgb3RoZXIgbXVzdCBiZSBzYW1lXG4gIGlmICh1dGlsLmlzUHJpbWl0aXZlKGEpIHx8IHV0aWwuaXNQcmltaXRpdmUoYikpIHtcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfVxuICB2YXIgYUlzQXJncyA9IGlzQXJndW1lbnRzKGEpLFxuICAgICAgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpO1xuICBpZiAoKGFJc0FyZ3MgJiYgIWJJc0FyZ3MpIHx8ICghYUlzQXJncyAmJiBiSXNBcmdzKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChhSXNBcmdzKSB7XG4gICAgYSA9IHBTbGljZS5jYWxsKGEpO1xuICAgIGIgPSBwU2xpY2UuY2FsbChiKTtcbiAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiKTtcbiAgfVxuICB2YXIga2EgPSBvYmplY3RLZXlzKGEpLFxuICAgICAga2IgPSBvYmplY3RLZXlzKGIpLFxuICAgICAga2V5LCBpO1xuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9IGtiLmxlbmd0aClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG4gIGthLnNvcnQoKTtcbiAga2Iuc29ydCgpO1xuICAvL35+fmNoZWFwIGtleSB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKGthW2ldICE9IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS5cbi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwRXF1YWwnLCBhc3NlcnQubm90RGVlcEVxdWFsKTtcbiAgfVxufTtcblxuLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PT0nLCBhc3NlcnQuc3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG4vLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXNcbi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9PScsIGFzc2VydC5ub3RTdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChleHBlY3RlZCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpO1xuICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGFjdHVhbDtcblxuICBpZiAodXRpbC5pc1N0cmluZyhleHBlY3RlZCkpIHtcbiAgICBtZXNzYWdlID0gZXhwZWN0ZWQ7XG4gICAgZXhwZWN0ZWQgPSBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgYWN0dWFsID0gZTtcbiAgfVxuXG4gIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgK1xuICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblxuICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKCFzaG91bGRUaHJvdyAmJiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ0dvdCB1bndhbnRlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICBpZiAoKHNob3VsZFRocm93ICYmIGFjdHVhbCAmJiBleHBlY3RlZCAmJlxuICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHtcbiAgICB0aHJvdyBhY3R1YWw7XG4gIH1cbn1cblxuLy8gMTEuIEV4cGVjdGVkIHRvIHRocm93IGFuIGVycm9yOlxuLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC50aHJvd3MgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cy5hcHBseSh0aGlzLCBbdHJ1ZV0uY29uY2F0KHBTbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbn07XG5cbi8vIEVYVEVOU0lPTiEgVGhpcyBpcyBhbm5veWluZyB0byB3cml0ZSBvdXRzaWRlIHRoaXMgbW9kdWxlLlxuYXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG4gIF90aHJvd3MuYXBwbHkodGhpcywgW2ZhbHNlXS5jb25jYXQocFNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xufTtcblxuYXNzZXJ0LmlmRXJyb3IgPSBmdW5jdGlvbihlcnIpIHsgaWYgKGVycikge3Rocm93IGVycjt9fTtcblxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn07XG5cbn0se1widXRpbC9cIjo1M31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuOyhmdW5jdGlvbiAoZXhwb3J0cykge1xuICAndXNlIHN0cmljdCdcblxuICB2YXIgaVxuICB2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuICB2YXIgbG9va3VwID0gW11cbiAgZm9yIChpID0gMDsgaSA8IGNvZGUubGVuZ3RoOyBpKyspIHtcbiAgICBsb29rdXBbaV0gPSBjb2RlW2ldXG4gIH1cbiAgdmFyIHJldkxvb2t1cCA9IFtdXG5cbiAgZm9yIChpID0gMDsgaSA8IGNvZGUubGVuZ3RoOyArK2kpIHtcbiAgICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbiAgfVxuICByZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcbiAgcmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbiAgdmFyIEFyciA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgPyBVaW50OEFycmF5XG4gICAgOiBBcnJheVxuXG4gIGZ1bmN0aW9uIGRlY29kZSAoZWx0KSB7XG4gICAgdmFyIHYgPSByZXZMb29rdXBbZWx0LmNoYXJDb2RlQXQoMCldXG4gICAgcmV0dXJuIHYgIT09IHVuZGVmaW5lZCA/IHYgOiAtMVxuICB9XG5cbiAgZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkgKGI2NCkge1xuICAgIHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG5cbiAgICBpZiAoYjY0Lmxlbmd0aCAlIDQgPiAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICAgIH1cblxuICAgIC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG4gICAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuICAgIC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuICAgIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuICAgIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2VcbiAgICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICAgIHBsYWNlSG9sZGVycyA9IGI2NC5jaGFyQXQobGVuIC0gMikgPT09ICc9JyA/IDIgOiBiNjQuY2hhckF0KGxlbiAtIDEpID09PSAnPScgPyAxIDogMFxuXG4gICAgLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG4gICAgYXJyID0gbmV3IEFycihiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cbiAgICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gICAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBiNjQubGVuZ3RoIC0gNCA6IGI2NC5sZW5ndGhcblxuICAgIHZhciBMID0gMFxuXG4gICAgZnVuY3Rpb24gcHVzaCAodikge1xuICAgICAgYXJyW0wrK10gPSB2XG4gICAgfVxuXG4gICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuICAgICAgdG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxOCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCAxMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA8PCA2KSB8IGRlY29kZShiNjQuY2hhckF0KGkgKyAzKSlcbiAgICAgIHB1c2goKHRtcCAmIDB4RkYwMDAwKSA+PiAxNilcbiAgICAgIHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOClcbiAgICAgIHB1c2godG1wICYgMHhGRilcbiAgICB9XG5cbiAgICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG4gICAgICB0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPj4gNClcbiAgICAgIHB1c2godG1wICYgMHhGRilcbiAgICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuICAgICAgdG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxMCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCA0KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpID4+IDIpXG4gICAgICBwdXNoKCh0bXAgPj4gOCkgJiAweEZGKVxuICAgICAgcHVzaCh0bXAgJiAweEZGKVxuICAgIH1cblxuICAgIHJldHVybiBhcnJcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuY29kZSAobnVtKSB7XG4gICAgcmV0dXJuIGxvb2t1cFtudW1dXG4gIH1cblxuICBmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICAgIHJldHVybiBlbmNvZGUobnVtID4+IDE4ICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDEyICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDYgJiAweDNGKSArIGVuY29kZShudW0gJiAweDNGKVxuICB9XG5cbiAgZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gICAgdmFyIHRlbXBcbiAgICB2YXIgb3V0cHV0ID0gW11cbiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgICAgdGVtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcbiAgICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0ZW1wKSlcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxuICB9XG5cbiAgZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcbiAgICB2YXIgaVxuICAgIHZhciBleHRyYUJ5dGVzID0gdWludDgubGVuZ3RoICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICAgIHZhciBvdXRwdXQgPSAnJ1xuICAgIHZhciBwYXJ0cyA9IFtdXG4gICAgdmFyIHRlbXAsIGxlbmd0aFxuICAgIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gICAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXG4gICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdWludDgubGVuZ3RoIC0gZXh0cmFCeXRlczsgaSA8IGxlbmd0aDsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW5ndGggPyBsZW5ndGggOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG4gICAgfVxuXG4gICAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICAgIHN3aXRjaCAoZXh0cmFCeXRlcykge1xuICAgICAgY2FzZSAxOlxuICAgICAgICB0ZW1wID0gdWludDhbdWludDgubGVuZ3RoIC0gMV1cbiAgICAgICAgb3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDIpXG4gICAgICAgIG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgNCkgJiAweDNGKVxuICAgICAgICBvdXRwdXQgKz0gJz09J1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAyOlxuICAgICAgICB0ZW1wID0gKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDJdIDw8IDgpICsgKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdKVxuICAgICAgICBvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMTApXG4gICAgICAgIG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPj4gNCkgJiAweDNGKVxuICAgICAgICBvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDIpICYgMHgzRilcbiAgICAgICAgb3V0cHV0ICs9ICc9J1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBwYXJ0cy5wdXNoKG91dHB1dClcblxuICAgIHJldHVybiBwYXJ0cy5qb2luKCcnKVxuICB9XG5cbiAgZXhwb3J0cy50b0J5dGVBcnJheSA9IGI2NFRvQnl0ZUFycmF5XG4gIGV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IHVpbnQ4VG9CYXNlNjRcbn0odHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnID8gKHRoaXMuYmFzZTY0anMgPSB7fSkgOiBleHBvcnRzKSlcblxufSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbnZhciByb290UGFyZW50ID0ge31cblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSlcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpcy5sZW5ndGggPSAwXG4gICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLCBhcmcpXG4gIH1cblxuICAvLyBTbGlnaHRseSBsZXNzIGNvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGlzLCBhcmcsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogJ3V0ZjgnKVxuICB9XG5cbiAgLy8gVW51c3VhbC5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhpcywgYXJnKVxufVxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiBmcm9tTnVtYmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChsZW5ndGgpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIC8vIEFzc3VtcHRpb246IGJ5dGVMZW5ndGgoKSByZXR1cm4gdmFsdWUgaXMgYWx3YXlzIDwga01heExlbmd0aC5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmplY3QpKSByZXR1cm4gZnJvbUJ1ZmZlcih0aGF0LCBvYmplY3QpXG5cbiAgaWYgKGlzQXJyYXkob2JqZWN0KSkgcmV0dXJuIGZyb21BcnJheSh0aGF0LCBvYmplY3QpXG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAob2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gZnJvbVR5cGVkQXJyYXkodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgfVxuXG4gIGlmIChvYmplY3QubGVuZ3RoKSByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmplY3QpXG5cbiAgcmV0dXJuIGZyb21Kc29uT2JqZWN0KHRoYXQsIG9iamVjdClcbn1cblxuZnVuY3Rpb24gZnJvbUJ1ZmZlciAodGhhdCwgYnVmZmVyKSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGJ1ZmZlci5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBidWZmZXIuY29weSh0aGF0LCAwLCAwLCBsZW5ndGgpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIER1cGxpY2F0ZSBvZiBmcm9tQXJyYXkoKSB0byBrZWVwIGZyb21BcnJheSgpIG1vbm9tb3JwaGljLlxuZnVuY3Rpb24gZnJvbVR5cGVkQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIC8vIFRydW5jYXRpbmcgdGhlIGVsZW1lbnRzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHBlb3BsZSBleHBlY3QgZnJvbSB0eXBlZFxuICAvLyBhcnJheXMgd2l0aCBCWVRFU19QRVJfRUxFTUVOVCA+IDEgYnV0IGl0J3MgY29tcGF0aWJsZSB3aXRoIHRoZSBiZWhhdmlvclxuICAvLyBvZiB0aGUgb2xkIEJ1ZmZlciBjb25zdHJ1Y3Rvci5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXkpIHtcbiAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEZXNlcmlhbGl6ZSB7IHR5cGU6ICdCdWZmZXInLCBkYXRhOiBbMSwyLDMsLi4uXSB9IGludG8gYSBCdWZmZXIgb2JqZWN0LlxuLy8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy5cbmZ1bmN0aW9uIGZyb21Kc29uT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgdmFyIGFycmF5XG4gIHZhciBsZW5ndGggPSAwXG5cbiAgaWYgKG9iamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iamVjdC5kYXRhKSkge1xuICAgIGFycmF5ID0gb2JqZWN0LmRhdGFcbiAgICBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIH1cbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmXG4gICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcbiAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cbn0gZWxzZSB7XG4gIC8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG4gIEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG4gIEJ1ZmZlci5wcm90b3R5cGUucGFyZW50ID0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHZhciBmcm9tUG9vbCA9IGxlbmd0aCAhPT0gMCAmJiBsZW5ndGggPD0gQnVmZmVyLnBvb2xTaXplID4+PiAxXG4gIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2xvd0J1ZmZlcikpIHJldHVybiBuZXcgU2xvd0J1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcbiAgZGVsZXRlIGJ1Zi5wYXJlbnRcbiAgcmV0dXJuIGJ1ZlxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgdmFyIGkgPSAwXG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSBicmVha1xuXG4gICAgKytpXG4gIH1cblxuICBpZiAoaSAhPT0gbGVuKSB7XG4gICAgeCA9IGFbaV1cbiAgICB5ID0gYltpXVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICdyYXcnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV1cbiAgICBpdGVtLmNvcHkoYnVmLCBwb3MpXG4gICAgcG9zICs9IGl0ZW0ubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgc3RyaW5nID0gJycgKyBzdHJpbmdcblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgIC8vIERlcHJlY2F0ZWRcbiAgICAgIGNhc2UgJ3Jhdyc6XG4gICAgICBjYXNlICdyYXdzJzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICBzdGFydCA9IHN0YXJ0IHwgMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPT09IEluZmluaXR5ID8gdGhpcy5sZW5ndGggOiBlbmQgfCAwXG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcbiAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKGVuZCA8PSBzdGFydCkgcmV0dXJuICcnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiAwXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQpIHtcbiAgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICBieXRlT2Zmc2V0ID4+PSAwXG5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gdGhpcy5sZW5ndGgpIHJldHVybiAtMVxuXG4gIC8vIE5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gTWF0aC5tYXgodGhpcy5sZW5ndGggKyBieXRlT2Zmc2V0LCAwKVxuXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSByZXR1cm4gLTEgLy8gc3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcgYWx3YXlzIGZhaWxzXG4gICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgfVxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgfVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgWyB2YWwgXSwgYnl0ZU9mZnNldClcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yICh2YXIgaSA9IDA7IGJ5dGVPZmZzZXQgKyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYXJyW2J5dGVPZmZzZXQgKyBpXSA9PT0gdmFsW2ZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4XSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbC5sZW5ndGgpIHJldHVybiBieXRlT2Zmc2V0ICsgZm91bmRJbmRleFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoIHwgMFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgdGFyZ2V0LFxuICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIGZpbGwodmFsdWUsIHN0YXJ0PTAsIGVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGhcblxuICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cbiAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7XCJiYXNlNjQtanNcIjoyLFwiaWVlZTc1NFwiOjEwLFwiaXNhcnJheVwiOjR9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzLnN0cnVjdHVyZSA9IHJlcXVpcmUoJy4vc3JjL3N0cnVjdHVyZScpO1xuXG59LHtcIi4vc3JjL3N0cnVjdHVyZVwiOjl9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBmaWVsZFNpemUgPSByZXF1aXJlKCcuL2ZpZWxkc2l6ZScpO1xuXG52YXIgdHlwZXMgPSB7XG4gICAgc3RyaW5nOiAnQycsXG4gICAgbnVtYmVyOiAnTicsXG4gICAgYm9vbGVhbjogJ0wnLFxuICAgIC8vIHR5cGUgdG8gdXNlIGlmIGFsbCB2YWx1ZXMgb2YgYSBmaWVsZCBhcmUgbnVsbFxuICAgIG51bGw6ICdDJ1xufTtcblxubW9kdWxlLmV4cG9ydHMubXVsdGkgPSBtdWx0aTtcbm1vZHVsZS5leHBvcnRzLmJ5dGVzUGVyID0gYnl0ZXNQZXI7XG5tb2R1bGUuZXhwb3J0cy5vYmogPSBvYmo7XG5cbmZ1bmN0aW9uIG11bHRpKGZlYXR1cmVzKSB7XG4gICAgdmFyIGZpZWxkcyA9IHt9O1xuICAgIGZlYXR1cmVzLmZvckVhY2goY29sbGVjdCk7XG4gICAgZnVuY3Rpb24gY29sbGVjdChmKSB7IGluaGVyaXQoZmllbGRzLCBmKTsgfVxuICAgIHJldHVybiBvYmooZmllbGRzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGluaGVyaXQoYSwgYikge1xuICAgIGZvciAodmFyIGkgaW4gYikge1xuICAgICAgICB2YXIgaXNEZWYgPSB0eXBlb2YgYltpXSAhPT0gJ3VuZGVmaW5lZCcgJiYgYltpXSAhPT0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBhW2ldID09PSAndW5kZWZpbmVkJyB8fCBpc0RlZikge1xuICAgICAgICAgIGFbaV0gPSBiW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBvYmooXykge1xuICAgIHZhciBmaWVsZHMgPSB7fSwgbyA9IFtdO1xuICAgIGZvciAodmFyIHAgaW4gXykgZmllbGRzW3BdID0gX1twXSA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBfW3BdO1xuICAgIGZvciAodmFyIG4gaW4gZmllbGRzKSB7XG4gICAgICAgIHZhciB0ID0gdHlwZXNbZmllbGRzW25dXTtcbiAgICAgICAgaWYodCl7XG4gICAgICAgICAgICAgby5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuLFxuICAgICAgICAgICAgICAgIHR5cGU6IHQsXG4gICAgICAgICAgICAgICAgc2l6ZTogZmllbGRTaXplW3RdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5fSBmaWVsZHNcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gYnl0ZXNQZXIoZmllbGRzKSB7XG4gICAgLy8gZGVsZXRlZCBmbGFnXG4gICAgcmV0dXJuIGZpZWxkcy5yZWR1Y2UoZnVuY3Rpb24obWVtbywgZikgeyByZXR1cm4gbWVtbyArIGYuc2l6ZTsgfSwgMSk7XG59XG5cbn0se1wiLi9maWVsZHNpemVcIjo3fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAvLyBzdHJpbmdcbiAgICBDOiAyNTQsXG4gICAgLy8gYm9vbGVhblxuICAgIEw6IDEsXG4gICAgLy8gZGF0ZVxuICAgIEQ6IDgsXG4gICAgLy8gbnVtYmVyXG4gICAgTjogMTgsXG4gICAgLy8gbnVtYmVyXG4gICAgTTogMTgsXG4gICAgLy8gbnVtYmVyLCBmbG9hdFxuICAgIEY6IDE4LFxuICAgIC8vIG51bWJlclxuICAgIEI6IDgsXG59O1xuXG59LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHBhcmFtIHtudW1iZXJ9IGxlblxuICogQHBhcmFtIHtzdHJpbmd9IGNoYXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbm1vZHVsZS5leHBvcnRzLmxwYWQgPSBmdW5jdGlvbiBscGFkKHN0ciwgbGVuLCBjaGFyKSB7XG4gICAgd2hpbGUgKHN0ci5sZW5ndGggPCBsZW4pIHsgc3RyID0gY2hhciArIHN0cjsgfSByZXR1cm4gc3RyO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xubW9kdWxlLmV4cG9ydHMucnBhZCA9IGZ1bmN0aW9uIHJwYWQoc3RyLCBsZW4sIGNoYXIpIHtcbiAgICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbikgeyBzdHIgPSBzdHIgKyBjaGFyOyB9IHJldHVybiBzdHI7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSB2aWV3XG4gKiBAcGFyYW0ge251bWJlcn0gZmllbGRMZW5ndGhcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbm1vZHVsZS5leHBvcnRzLndyaXRlRmllbGQgPSBmdW5jdGlvbiB3cml0ZUZpZWxkKHZpZXcsIGZpZWxkTGVuZ3RoLCBzdHIsIG9mZnNldCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGRMZW5ndGg7IGkrKykge1xuICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCwgc3RyLmNoYXJDb2RlQXQoaSkpOyBvZmZzZXQrKztcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn07XG5cbn0se31dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGZpZWxkU2l6ZSA9IHJlcXVpcmUoJy4vZmllbGRzaXplJyksXG4gICAgbGliID0gcmVxdWlyZSgnLi9saWInKSxcbiAgICBmaWVsZHMgPSByZXF1aXJlKCcuL2ZpZWxkcycpO1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAqIEBwYXJhbSB7QXJyYXl9IG1ldGFcbiAqIEByZXR1cm5zIHtPYmplY3R9IHZpZXdcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdHJ1Y3R1cmUoZGF0YSwgbWV0YSkge1xuXG4gICAgdmFyIGZpZWxkX21ldGEgPSBtZXRhIHx8IGZpZWxkcy5tdWx0aShkYXRhKSxcbiAgICAgICAgZmllbGREZXNjTGVuZ3RoID0gKDMyICogZmllbGRfbWV0YS5sZW5ndGgpICsgMSxcbiAgICAgICAgYnl0ZXNQZXJSZWNvcmQgPSBmaWVsZHMuYnl0ZXNQZXIoZmllbGRfbWV0YSksIC8vIGRlbGV0ZWQgZmxhZ1xuICAgICAgICBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoXG4gICAgICAgICAgICAvLyBmaWVsZCBoZWFkZXJcbiAgICAgICAgICAgIGZpZWxkRGVzY0xlbmd0aCArXG4gICAgICAgICAgICAvLyBoZWFkZXJcbiAgICAgICAgICAgIDMyICtcbiAgICAgICAgICAgIC8vIGNvbnRlbnRzXG4gICAgICAgICAgICAoYnl0ZXNQZXJSZWNvcmQgKiBkYXRhLmxlbmd0aCkgK1xuICAgICAgICAgICAgLy8gRU9GIG1hcmtlclxuICAgICAgICAgICAgMVxuICAgICksXG4gICAgICAgIG5vdyA9IG5ldyBEYXRlKCksXG4gICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcblxuICAgIC8vIHZlcnNpb24gbnVtYmVyIC0gZEJhc2UgSUlJXG4gICAgdmlldy5zZXRVaW50OCgwLCAweDAzKTtcbiAgICAvLyBkYXRlIG9mIGxhc3QgdXBkYXRlXG4gICAgdmlldy5zZXRVaW50OCgxLCBub3cuZ2V0RnVsbFllYXIoKSAtIDE5MDApO1xuICAgIHZpZXcuc2V0VWludDgoMiwgbm93LmdldE1vbnRoKCkpO1xuICAgIHZpZXcuc2V0VWludDgoMywgbm93LmdldERhdGUoKSk7XG4gICAgLy8gbnVtYmVyIG9mIHJlY29yZHNcbiAgICB2aWV3LnNldFVpbnQzMig0LCBkYXRhLmxlbmd0aCwgdHJ1ZSk7XG5cbiAgICAvLyBsZW5ndGggb2YgaGVhZGVyXG4gICAgdmFyIGhlYWRlckxlbmd0aCA9IGZpZWxkRGVzY0xlbmd0aCArIDMyO1xuICAgIHZpZXcuc2V0VWludDE2KDgsIGhlYWRlckxlbmd0aCwgdHJ1ZSk7XG4gICAgLy8gbGVuZ3RoIG9mIGVhY2ggcmVjb3JkXG4gICAgdmlldy5zZXRVaW50MTYoMTAsIGJ5dGVzUGVyUmVjb3JkLCB0cnVlKTtcblxuICAgIC8vIFRlcm1pbmF0b3JcbiAgICB2aWV3LnNldEludDgoMzIgKyBmaWVsZERlc2NMZW5ndGggLSAxLCAweDBEKTtcblxuICAgIGZpZWxkX21ldGEuZm9yRWFjaChmdW5jdGlvbihmLCBpKSB7XG4gICAgICAgIC8vIGZpZWxkIG5hbWVcbiAgICAgICAgZi5uYW1lLnNwbGl0KCcnKS5zbGljZSgwLCA4KS5mb3JFYWNoKGZ1bmN0aW9uKGMsIHgpIHtcbiAgICAgICAgICAgIHZpZXcuc2V0SW50OCgzMiArIGkgKiAzMiArIHgsIGMuY2hhckNvZGVBdCgwKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBmaWVsZCB0eXBlXG4gICAgICAgIHZpZXcuc2V0SW50OCgzMiArIGkgKiAzMiArIDExLCBmLnR5cGUuY2hhckNvZGVBdCgwKSk7XG4gICAgICAgIC8vIGZpZWxkIGxlbmd0aFxuICAgICAgICB2aWV3LnNldEludDgoMzIgKyBpICogMzIgKyAxNiwgZi5zaXplKTtcbiAgICAgICAgaWYgKGYudHlwZSA9PSAnTicpIHZpZXcuc2V0SW50OCgzMiArIGkgKiAzMiArIDE3LCAwKTtcbiAgICB9KTtcblxuICAgIG9mZnNldCA9IGZpZWxkRGVzY0xlbmd0aCArIDMyO1xuXG4gICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHJvdywgbnVtKSB7XG4gICAgICAgIC8vIGRlbGV0ZSBmbGFnOiB0aGlzIGlzIG5vdCBkZWxldGVkXG4gICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0LCAzMik7XG4gICAgICAgIG9mZnNldCsrO1xuICAgICAgICBmaWVsZF9tZXRhLmZvckVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHJvd1tmLm5hbWVdO1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykgdmFsID0gJyc7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZi50eXBlKSB7XG4gICAgICAgICAgICAgICAgLy8gYm9vbGVhblxuICAgICAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCwgdmFsID8gODQgOiA3MCk7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCsrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIGRhdGVcbiAgICAgICAgICAgICAgICBjYXNlICdEJzpcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gbGliLndyaXRlRmllbGQodmlldywgOCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpYi5scGFkKHZhbC50b1N0cmluZygpLCA4LCAnICcpLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIG51bWJlclxuICAgICAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBsaWIud3JpdGVGaWVsZCh2aWV3LCBmLnNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWIubHBhZCh2YWwudG9TdHJpbmcoKSwgZi5zaXplLCAnICcpLnN1YnN0cigwLCAxOCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIHN0cmluZ1xuICAgICAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBsaWIud3JpdGVGaWVsZCh2aWV3LCBmLnNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWIucnBhZCh2YWwudG9TdHJpbmcoKSwgZi5zaXplLCAnICcpLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBmaWVsZCB0eXBlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gRU9GIGZsYWdcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCwgMHgxQSk7XG5cbiAgICByZXR1cm4gdmlldztcbn07XG5cbn0se1wiLi9maWVsZHNcIjo2LFwiLi9maWVsZHNpemVcIjo3LFwiLi9saWJcIjo4fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG5cbn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuXG59LHt9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBwcml2YXRlIHByb3BlcnR5XG52YXIgX2tleVN0ciA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtcblxuXG4vLyBwdWJsaWMgbWV0aG9kIGZvciBlbmNvZGluZ1xuZXhwb3J0cy5lbmNvZGUgPSBmdW5jdGlvbihpbnB1dCwgdXRmOCkge1xuICAgIHZhciBvdXRwdXQgPSBcIlwiO1xuICAgIHZhciBjaHIxLCBjaHIyLCBjaHIzLCBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0O1xuICAgIHZhciBpID0gMDtcblxuICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XG5cbiAgICAgICAgY2hyMSA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY2hyMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY2hyMyA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcblxuICAgICAgICBlbmMxID0gY2hyMSA+PiAyO1xuICAgICAgICBlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTtcbiAgICAgICAgZW5jMyA9ICgoY2hyMiAmIDE1KSA8PCAyKSB8IChjaHIzID4+IDYpO1xuICAgICAgICBlbmM0ID0gY2hyMyAmIDYzO1xuXG4gICAgICAgIGlmIChpc05hTihjaHIyKSkge1xuICAgICAgICAgICAgZW5jMyA9IGVuYzQgPSA2NDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc05hTihjaHIzKSkge1xuICAgICAgICAgICAgZW5jNCA9IDY0O1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgX2tleVN0ci5jaGFyQXQoZW5jMSkgKyBfa2V5U3RyLmNoYXJBdChlbmMyKSArIF9rZXlTdHIuY2hhckF0KGVuYzMpICsgX2tleVN0ci5jaGFyQXQoZW5jNCk7XG5cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xufTtcblxuLy8gcHVibGljIG1ldGhvZCBmb3IgZGVjb2RpbmdcbmV4cG9ydHMuZGVjb2RlID0gZnVuY3Rpb24oaW5wdXQsIHV0ZjgpIHtcbiAgICB2YXIgb3V0cHV0ID0gXCJcIjtcbiAgICB2YXIgY2hyMSwgY2hyMiwgY2hyMztcbiAgICB2YXIgZW5jMSwgZW5jMiwgZW5jMywgZW5jNDtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXFw9XS9nLCBcIlwiKTtcblxuICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XG5cbiAgICAgICAgZW5jMSA9IF9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG4gICAgICAgIGVuYzIgPSBfa2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuICAgICAgICBlbmMzID0gX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcbiAgICAgICAgZW5jNCA9IF9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG5cbiAgICAgICAgY2hyMSA9IChlbmMxIDw8IDIpIHwgKGVuYzIgPj4gNCk7XG4gICAgICAgIGNocjIgPSAoKGVuYzIgJiAxNSkgPDwgNCkgfCAoZW5jMyA+PiAyKTtcbiAgICAgICAgY2hyMyA9ICgoZW5jMyAmIDMpIDw8IDYpIHwgZW5jNDtcblxuICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjEpO1xuXG4gICAgICAgIGlmIChlbmMzICE9IDY0KSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmM0ICE9IDY0KSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjMpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuXG59O1xuXG59LHt9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5mdW5jdGlvbiBDb21wcmVzc2VkT2JqZWN0KCkge1xuICAgIHRoaXMuY29tcHJlc3NlZFNpemUgPSAwO1xuICAgIHRoaXMudW5jb21wcmVzc2VkU2l6ZSA9IDA7XG4gICAgdGhpcy5jcmMzMiA9IDA7XG4gICAgdGhpcy5jb21wcmVzc2lvbk1ldGhvZCA9IG51bGw7XG4gICAgdGhpcy5jb21wcmVzc2VkQ29udGVudCA9IG51bGw7XG59XG5cbkNvbXByZXNzZWRPYmplY3QucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgZGVjb21wcmVzc2VkIGNvbnRlbnQgaW4gYW4gdW5zcGVjaWZpZWQgZm9ybWF0LlxuICAgICAqIFRoZSBmb3JtYXQgd2lsbCBkZXBlbmQgb24gdGhlIGRlY29tcHJlc3Nvci5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBkZWNvbXByZXNzZWQgY29udGVudC5cbiAgICAgKi9cbiAgICBnZXRDb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIHNlZSBpbXBsZW1lbnRhdGlvblxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb21wcmVzc2VkIGNvbnRlbnQgaW4gYW4gdW5zcGVjaWZpZWQgZm9ybWF0LlxuICAgICAqIFRoZSBmb3JtYXQgd2lsbCBkZXBlbmQgb24gdGhlIGNvbXByZXNzZWQgY29udGVuIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBjb21wcmVzc2VkIGNvbnRlbnQuXG4gICAgICovXG4gICAgZ2V0Q29tcHJlc3NlZENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbDsgLy8gc2VlIGltcGxlbWVudGF0aW9uXG4gICAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gQ29tcHJlc3NlZE9iamVjdDtcblxufSx7fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuZXhwb3J0cy5TVE9SRSA9IHtcbiAgICBtYWdpYzogXCJcXHgwMFxceDAwXCIsXG4gICAgY29tcHJlc3M6IGZ1bmN0aW9uKGNvbnRlbnQsIGNvbXByZXNzaW9uT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gY29udGVudDsgLy8gbm8gY29tcHJlc3Npb25cbiAgICB9LFxuICAgIHVuY29tcHJlc3M6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7IC8vIG5vIGNvbXByZXNzaW9uXG4gICAgfSxcbiAgICBjb21wcmVzc0lucHV0VHlwZTogbnVsbCxcbiAgICB1bmNvbXByZXNzSW5wdXRUeXBlOiBudWxsXG59O1xuZXhwb3J0cy5ERUZMQVRFID0gcmVxdWlyZSgnLi9mbGF0ZScpO1xuXG59LHtcIi4vZmxhdGVcIjoxOX1dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG52YXIgdGFibGUgPSBbXG4gICAgMHgwMDAwMDAwMCwgMHg3NzA3MzA5NiwgMHhFRTBFNjEyQywgMHg5OTA5NTFCQSxcbiAgICAweDA3NkRDNDE5LCAweDcwNkFGNDhGLCAweEU5NjNBNTM1LCAweDlFNjQ5NUEzLFxuICAgIDB4MEVEQjg4MzIsIDB4NzlEQ0I4QTQsIDB4RTBENUU5MUUsIDB4OTdEMkQ5ODgsXG4gICAgMHgwOUI2NEMyQiwgMHg3RUIxN0NCRCwgMHhFN0I4MkQwNywgMHg5MEJGMUQ5MSxcbiAgICAweDFEQjcxMDY0LCAweDZBQjAyMEYyLCAweEYzQjk3MTQ4LCAweDg0QkU0MURFLFxuICAgIDB4MUFEQUQ0N0QsIDB4NkREREU0RUIsIDB4RjRENEI1NTEsIDB4ODNEMzg1QzcsXG4gICAgMHgxMzZDOTg1NiwgMHg2NDZCQThDMCwgMHhGRDYyRjk3QSwgMHg4QTY1QzlFQyxcbiAgICAweDE0MDE1QzRGLCAweDYzMDY2Q0Q5LCAweEZBMEYzRDYzLCAweDhEMDgwREY1LFxuICAgIDB4M0I2RTIwQzgsIDB4NEM2OTEwNUUsIDB4RDU2MDQxRTQsIDB4QTI2NzcxNzIsXG4gICAgMHgzQzAzRTREMSwgMHg0QjA0RDQ0NywgMHhEMjBEODVGRCwgMHhBNTBBQjU2QixcbiAgICAweDM1QjVBOEZBLCAweDQyQjI5ODZDLCAweERCQkJDOUQ2LCAweEFDQkNGOTQwLFxuICAgIDB4MzJEODZDRTMsIDB4NDVERjVDNzUsIDB4RENENjBEQ0YsIDB4QUJEMTNENTksXG4gICAgMHgyNkQ5MzBBQywgMHg1MURFMDAzQSwgMHhDOEQ3NTE4MCwgMHhCRkQwNjExNixcbiAgICAweDIxQjRGNEI1LCAweDU2QjNDNDIzLCAweENGQkE5NTk5LCAweEI4QkRBNTBGLFxuICAgIDB4MjgwMkI4OUUsIDB4NUYwNTg4MDgsIDB4QzYwQ0Q5QjIsIDB4QjEwQkU5MjQsXG4gICAgMHgyRjZGN0M4NywgMHg1ODY4NEMxMSwgMHhDMTYxMURBQiwgMHhCNjY2MkQzRCxcbiAgICAweDc2REM0MTkwLCAweDAxREI3MTA2LCAweDk4RDIyMEJDLCAweEVGRDUxMDJBLFxuICAgIDB4NzFCMTg1ODksIDB4MDZCNkI1MUYsIDB4OUZCRkU0QTUsIDB4RThCOEQ0MzMsXG4gICAgMHg3ODA3QzlBMiwgMHgwRjAwRjkzNCwgMHg5NjA5QTg4RSwgMHhFMTBFOTgxOCxcbiAgICAweDdGNkEwREJCLCAweDA4NkQzRDJELCAweDkxNjQ2Qzk3LCAweEU2NjM1QzAxLFxuICAgIDB4NkI2QjUxRjQsIDB4MUM2QzYxNjIsIDB4ODU2NTMwRDgsIDB4RjI2MjAwNEUsXG4gICAgMHg2QzA2OTVFRCwgMHgxQjAxQTU3QiwgMHg4MjA4RjRDMSwgMHhGNTBGQzQ1NyxcbiAgICAweDY1QjBEOUM2LCAweDEyQjdFOTUwLCAweDhCQkVCOEVBLCAweEZDQjk4ODdDLFxuICAgIDB4NjJERDFEREYsIDB4MTVEQTJENDksIDB4OENEMzdDRjMsIDB4RkJENDRDNjUsXG4gICAgMHg0REIyNjE1OCwgMHgzQUI1NTFDRSwgMHhBM0JDMDA3NCwgMHhENEJCMzBFMixcbiAgICAweDRBREZBNTQxLCAweDNERDg5NUQ3LCAweEE0RDFDNDZELCAweEQzRDZGNEZCLFxuICAgIDB4NDM2OUU5NkEsIDB4MzQ2RUQ5RkMsIDB4QUQ2Nzg4NDYsIDB4REE2MEI4RDAsXG4gICAgMHg0NDA0MkQ3MywgMHgzMzAzMURFNSwgMHhBQTBBNEM1RiwgMHhERDBEN0NDOSxcbiAgICAweDUwMDU3MTNDLCAweDI3MDI0MUFBLCAweEJFMEIxMDEwLCAweEM5MEMyMDg2LFxuICAgIDB4NTc2OEI1MjUsIDB4MjA2Rjg1QjMsIDB4Qjk2NkQ0MDksIDB4Q0U2MUU0OUYsXG4gICAgMHg1RURFRjkwRSwgMHgyOUQ5Qzk5OCwgMHhCMEQwOTgyMiwgMHhDN0Q3QThCNCxcbiAgICAweDU5QjMzRDE3LCAweDJFQjQwRDgxLCAweEI3QkQ1QzNCLCAweEMwQkE2Q0FELFxuICAgIDB4RURCODgzMjAsIDB4OUFCRkIzQjYsIDB4MDNCNkUyMEMsIDB4NzRCMUQyOUEsXG4gICAgMHhFQUQ1NDczOSwgMHg5REQyNzdBRiwgMHgwNERCMjYxNSwgMHg3M0RDMTY4MyxcbiAgICAweEUzNjMwQjEyLCAweDk0NjQzQjg0LCAweDBENkQ2QTNFLCAweDdBNkE1QUE4LFxuICAgIDB4RTQwRUNGMEIsIDB4OTMwOUZGOUQsIDB4MEEwMEFFMjcsIDB4N0QwNzlFQjEsXG4gICAgMHhGMDBGOTM0NCwgMHg4NzA4QTNEMiwgMHgxRTAxRjI2OCwgMHg2OTA2QzJGRSxcbiAgICAweEY3NjI1NzVELCAweDgwNjU2N0NCLCAweDE5NkMzNjcxLCAweDZFNkIwNkU3LFxuICAgIDB4RkVENDFCNzYsIDB4ODlEMzJCRTAsIDB4MTBEQTdBNUEsIDB4NjdERDRBQ0MsXG4gICAgMHhGOUI5REY2RiwgMHg4RUJFRUZGOSwgMHgxN0I3QkU0MywgMHg2MEIwOEVENSxcbiAgICAweEQ2RDZBM0U4LCAweEExRDE5MzdFLCAweDM4RDhDMkM0LCAweDRGREZGMjUyLFxuICAgIDB4RDFCQjY3RjEsIDB4QTZCQzU3NjcsIDB4M0ZCNTA2REQsIDB4NDhCMjM2NEIsXG4gICAgMHhEODBEMkJEQSwgMHhBRjBBMUI0QywgMHgzNjAzNEFGNiwgMHg0MTA0N0E2MCxcbiAgICAweERGNjBFRkMzLCAweEE4NjdERjU1LCAweDMxNkU4RUVGLCAweDQ2NjlCRTc5LFxuICAgIDB4Q0I2MUIzOEMsIDB4QkM2NjgzMUEsIDB4MjU2RkQyQTAsIDB4NTI2OEUyMzYsXG4gICAgMHhDQzBDNzc5NSwgMHhCQjBCNDcwMywgMHgyMjAyMTZCOSwgMHg1NTA1MjYyRixcbiAgICAweEM1QkEzQkJFLCAweEIyQkQwQjI4LCAweDJCQjQ1QTkyLCAweDVDQjM2QTA0LFxuICAgIDB4QzJEN0ZGQTcsIDB4QjVEMENGMzEsIDB4MkNEOTlFOEIsIDB4NUJERUFFMUQsXG4gICAgMHg5QjY0QzJCMCwgMHhFQzYzRjIyNiwgMHg3NTZBQTM5QywgMHgwMjZEOTMwQSxcbiAgICAweDlDMDkwNkE5LCAweEVCMEUzNjNGLCAweDcyMDc2Nzg1LCAweDA1MDA1NzEzLFxuICAgIDB4OTVCRjRBODIsIDB4RTJCODdBMTQsIDB4N0JCMTJCQUUsIDB4MENCNjFCMzgsXG4gICAgMHg5MkQyOEU5QiwgMHhFNUQ1QkUwRCwgMHg3Q0RDRUZCNywgMHgwQkRCREYyMSxcbiAgICAweDg2RDNEMkQ0LCAweEYxRDRFMjQyLCAweDY4RERCM0Y4LCAweDFGREE4MzZFLFxuICAgIDB4ODFCRTE2Q0QsIDB4RjZCOTI2NUIsIDB4NkZCMDc3RTEsIDB4MThCNzQ3NzcsXG4gICAgMHg4ODA4NUFFNiwgMHhGRjBGNkE3MCwgMHg2NjA2M0JDQSwgMHgxMTAxMEI1QyxcbiAgICAweDhGNjU5RUZGLCAweEY4NjJBRTY5LCAweDYxNkJGRkQzLCAweDE2NkNDRjQ1LFxuICAgIDB4QTAwQUUyNzgsIDB4RDcwREQyRUUsIDB4NEUwNDgzNTQsIDB4MzkwM0IzQzIsXG4gICAgMHhBNzY3MjY2MSwgMHhEMDYwMTZGNywgMHg0OTY5NDc0RCwgMHgzRTZFNzdEQixcbiAgICAweEFFRDE2QTRBLCAweEQ5RDY1QURDLCAweDQwREYwQjY2LCAweDM3RDgzQkYwLFxuICAgIDB4QTlCQ0FFNTMsIDB4REVCQjlFQzUsIDB4NDdCMkNGN0YsIDB4MzBCNUZGRTksXG4gICAgMHhCREJERjIxQywgMHhDQUJBQzI4QSwgMHg1M0IzOTMzMCwgMHgyNEI0QTNBNixcbiAgICAweEJBRDAzNjA1LCAweENERDcwNjkzLCAweDU0REU1NzI5LCAweDIzRDk2N0JGLFxuICAgIDB4QjM2NjdBMkUsIDB4QzQ2MTRBQjgsIDB4NUQ2ODFCMDIsIDB4MkE2RjJCOTQsXG4gICAgMHhCNDBCQkUzNywgMHhDMzBDOEVBMSwgMHg1QTA1REYxQiwgMHgyRDAyRUY4RFxuXTtcblxuLyoqXG4gKlxuICogIEphdmFzY3JpcHQgY3JjMzJcbiAqICBodHRwOi8vd3d3LndlYnRvb2xraXQuaW5mby9cbiAqXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JjMzIoaW5wdXQsIGNyYykge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwidW5kZWZpbmVkXCIgfHwgIWlucHV0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICB2YXIgaXNBcnJheSA9IHV0aWxzLmdldFR5cGVPZihpbnB1dCkgIT09IFwic3RyaW5nXCI7XG5cbiAgICBpZiAodHlwZW9mKGNyYykgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjcmMgPSAwO1xuICAgIH1cbiAgICB2YXIgeCA9IDA7XG4gICAgdmFyIHkgPSAwO1xuICAgIHZhciBiID0gMDtcblxuICAgIGNyYyA9IGNyYyBeICgtMSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlUb3AgPSBpbnB1dC5sZW5ndGg7IGkgPCBpVG9wOyBpKyspIHtcbiAgICAgICAgYiA9IGlzQXJyYXkgPyBpbnB1dFtpXSA6IGlucHV0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIHkgPSAoY3JjIF4gYikgJiAweEZGO1xuICAgICAgICB4ID0gdGFibGVbeV07XG4gICAgICAgIGNyYyA9IChjcmMgPj4+IDgpIF4geDtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JjIF4gKC0xKTtcbn07XG4vLyB2aW06IHNldCBzaGlmdHdpZHRoPTQgc29mdHRhYnN0b3A9NDpcblxufSx7XCIuL3V0aWxzXCI6MzJ9XSwxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIERhdGFSZWFkZXIoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IG51bGw7IC8vIHR5cGUgOiBzZWUgaW1wbGVtZW50YXRpb25cbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5pbmRleCA9IDA7XG59XG5EYXRhUmVhZGVyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGF0IHRoZSBvZmZzZXQgd2lsbCBub3QgZ28gdG9vIGZhci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2Zmc2V0IHRoZSBhZGRpdGlvbmFsIG9mZnNldCB0byBjaGVjay5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gYW4gRXJyb3IgaWYgdGhlIG9mZnNldCBpcyBvdXQgb2YgYm91bmRzLlxuICAgICAqL1xuICAgIGNoZWNrT2Zmc2V0OiBmdW5jdGlvbihvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5jaGVja0luZGV4KHRoaXMuaW5kZXggKyBvZmZzZXQpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhhdCB0aGUgc3BlY2lmZWQgaW5kZXggd2lsbCBub3QgYmUgdG9vIGZhci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3SW5kZXggdGhlIGluZGV4IHRvIGNoZWNrLlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBhbiBFcnJvciBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kcy5cbiAgICAgKi9cbiAgICBjaGVja0luZGV4OiBmdW5jdGlvbihuZXdJbmRleCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPCBuZXdJbmRleCB8fCBuZXdJbmRleCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVuZCBvZiBkYXRhIHJlYWNoZWQgKGRhdGEgbGVuZ3RoID0gXCIgKyB0aGlzLmxlbmd0aCArIFwiLCBhc2tlZCBpbmRleCA9IFwiICsgKG5ld0luZGV4KSArIFwiKS4gQ29ycnVwdGVkIHppcCA/XCIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDaGFuZ2UgdGhlIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdJbmRleCBUaGUgbmV3IGluZGV4LlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgbmV3IGluZGV4IGlzIG91dCBvZiB0aGUgZGF0YS5cbiAgICAgKi9cbiAgICBzZXRJbmRleDogZnVuY3Rpb24obmV3SW5kZXgpIHtcbiAgICAgICAgdGhpcy5jaGVja0luZGV4KG5ld0luZGV4KTtcbiAgICAgICAgdGhpcy5pbmRleCA9IG5ld0luZGV4O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2tpcCB0aGUgbmV4dCBuIGJ5dGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gc2tpcC5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGhlIG5ldyBpbmRleCBpcyBvdXQgb2YgdGhlIGRhdGEuXG4gICAgICovXG4gICAgc2tpcDogZnVuY3Rpb24obikge1xuICAgICAgICB0aGlzLnNldEluZGV4KHRoaXMuaW5kZXggKyBuKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYnl0ZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpIHRoZSBpbmRleCB0byB1c2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBhIGJ5dGUuXG4gICAgICovXG4gICAgYnl0ZUF0OiBmdW5jdGlvbihpKSB7XG4gICAgICAgIC8vIHNlZSBpbXBsZW1lbnRhdGlvbnNcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmV4dCBudW1iZXIgd2l0aCBhIGdpdmVuIGJ5dGUgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgY29ycmVzcG9uZGluZyBudW1iZXIuXG4gICAgICovXG4gICAgcmVhZEludDogZnVuY3Rpb24oc2l6ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gMCxcbiAgICAgICAgICAgIGk7XG4gICAgICAgIHRoaXMuY2hlY2tPZmZzZXQoc2l6ZSk7XG4gICAgICAgIGZvciAoaSA9IHRoaXMuaW5kZXggKyBzaXplIC0gMTsgaSA+PSB0aGlzLmluZGV4OyBpLS0pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgKyB0aGlzLmJ5dGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluZGV4ICs9IHNpemU7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG5leHQgc3RyaW5nIHdpdGggYSBnaXZlbiBieXRlIHNpemUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgdGhlIG51bWJlciBvZiBieXRlcyB0byByZWFkLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gdGhlIGNvcnJlc3BvbmRpbmcgc3RyaW5nLlxuICAgICAqL1xuICAgIHJlYWRTdHJpbmc6IGZ1bmN0aW9uKHNpemUpIHtcbiAgICAgICAgcmV0dXJuIHV0aWxzLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsIHRoaXMucmVhZERhdGEoc2l6ZSkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IHJhdyBkYXRhIHdpdGhvdXQgY29udmVyc2lvbiwgPHNpemU+IGJ5dGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSByYXcgZGF0YSwgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXG4gICAgICovXG4gICAgcmVhZERhdGE6IGZ1bmN0aW9uKHNpemUpIHtcbiAgICAgICAgLy8gc2VlIGltcGxlbWVudGF0aW9uc1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgbGFzdCBvY2N1cmVuY2Ugb2YgYSB6aXAgc2lnbmF0dXJlICg0IGJ5dGVzKS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2lnIHRoZSBzaWduYXR1cmUgdG8gZmluZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBvY2N1cmVuY2UsIC0xIGlmIG5vdCBmb3VuZC5cbiAgICAgKi9cbiAgICBsYXN0SW5kZXhPZlNpZ25hdHVyZTogZnVuY3Rpb24oc2lnKSB7XG4gICAgICAgIC8vIHNlZSBpbXBsZW1lbnRhdGlvbnNcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmV4dCBkYXRlLlxuICAgICAqIEByZXR1cm4ge0RhdGV9IHRoZSBkYXRlLlxuICAgICAqL1xuICAgIHJlYWREYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRvc3RpbWUgPSB0aGlzLnJlYWRJbnQoNCk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShcbiAgICAgICAgKChkb3N0aW1lID4+IDI1KSAmIDB4N2YpICsgMTk4MCwgLy8geWVhclxuICAgICAgICAoKGRvc3RpbWUgPj4gMjEpICYgMHgwZikgLSAxLCAvLyBtb250aFxuICAgICAgICAoZG9zdGltZSA+PiAxNikgJiAweDFmLCAvLyBkYXlcbiAgICAgICAgKGRvc3RpbWUgPj4gMTEpICYgMHgxZiwgLy8gaG91clxuICAgICAgICAoZG9zdGltZSA+PiA1KSAmIDB4M2YsIC8vIG1pbnV0ZVxuICAgICAgICAoZG9zdGltZSAmIDB4MWYpIDw8IDEpOyAvLyBzZWNvbmRcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBEYXRhUmVhZGVyO1xuXG59LHtcIi4vdXRpbHNcIjozMn1dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbmV4cG9ydHMuYmFzZTY0ID0gZmFsc2U7XG5leHBvcnRzLmJpbmFyeSA9IGZhbHNlO1xuZXhwb3J0cy5kaXIgPSBmYWxzZTtcbmV4cG9ydHMuY3JlYXRlRm9sZGVycyA9IGZhbHNlO1xuZXhwb3J0cy5kYXRlID0gbnVsbDtcbmV4cG9ydHMuY29tcHJlc3Npb24gPSBudWxsO1xuZXhwb3J0cy5jb21wcmVzc2lvbk9wdGlvbnMgPSBudWxsO1xuZXhwb3J0cy5jb21tZW50ID0gbnVsbDtcbmV4cG9ydHMudW5peFBlcm1pc3Npb25zID0gbnVsbDtcbmV4cG9ydHMuZG9zUGVybWlzc2lvbnMgPSBudWxsO1xuXG59LHt9XSwxODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy5zdHJpbmcyYmluYXJ5ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHV0aWxzLnN0cmluZzJiaW5hcnkoc3RyKTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy5zdHJpbmcyVWludDhBcnJheSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiB1dGlscy50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIiwgc3RyKTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy51aW50OEFycmF5MlN0cmluZyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIHV0aWxzLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsIGFycmF5KTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy5zdHJpbmcyQmxvYiA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHZhciBidWZmZXIgPSB1dGlscy50cmFuc2Zvcm1UbyhcImFycmF5YnVmZmVyXCIsIHN0cik7XG4gICAgcmV0dXJuIHV0aWxzLmFycmF5QnVmZmVyMkJsb2IoYnVmZmVyKTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy5hcnJheUJ1ZmZlcjJCbG9iID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgcmV0dXJuIHV0aWxzLmFycmF5QnVmZmVyMkJsb2IoYnVmZmVyKTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy50cmFuc2Zvcm1UbyA9IGZ1bmN0aW9uKG91dHB1dFR5cGUsIGlucHV0KSB7XG4gICAgcmV0dXJuIHV0aWxzLnRyYW5zZm9ybVRvKG91dHB1dFR5cGUsIGlucHV0KTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy5nZXRUeXBlT2YgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgIHJldHVybiB1dGlscy5nZXRUeXBlT2YoaW5wdXQpO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiB3aXRob3V0IHJlcGxhY2VtZW50LlxuICovXG5leHBvcnRzLmNoZWNrU3VwcG9ydCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICByZXR1cm4gdXRpbHMuY2hlY2tTdXBwb3J0KHR5cGUpO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICogVGhpcyB2YWx1ZSB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiB3aXRob3V0IHJlcGxhY2VtZW50LlxuICovXG5leHBvcnRzLk1BWF9WQUxVRV8xNkJJVFMgPSB1dGlscy5NQVhfVkFMVUVfMTZCSVRTO1xuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKiBUaGlzIHZhbHVlIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIHdpdGhvdXQgcmVwbGFjZW1lbnQuXG4gKi9cbmV4cG9ydHMuTUFYX1ZBTFVFXzMyQklUUyA9IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFM7XG5cblxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiB3aXRob3V0IHJlcGxhY2VtZW50LlxuICovXG5leHBvcnRzLnByZXR0eSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiB1dGlscy5wcmV0dHkoc3RyKTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAqL1xuZXhwb3J0cy5maW5kQ29tcHJlc3Npb24gPSBmdW5jdGlvbihjb21wcmVzc2lvbk1ldGhvZCkge1xuICAgIHJldHVybiB1dGlscy5maW5kQ29tcHJlc3Npb24oY29tcHJlc3Npb25NZXRob2QpO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiB3aXRob3V0IHJlcGxhY2VtZW50LlxuICovXG5leHBvcnRzLmlzUmVnRXhwID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiB1dGlscy5pc1JlZ0V4cChvYmplY3QpO1xufTtcblxuXG59LHtcIi4vdXRpbHNcIjozMn1dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBVU0VfVFlQRURBUlJBWSA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmICh0eXBlb2YgVWludDE2QXJyYXkgIT09ICd1bmRlZmluZWQnKSAmJiAodHlwZW9mIFVpbnQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyk7XG5cbnZhciBwYWtvID0gcmVxdWlyZShcInBha29cIik7XG5leHBvcnRzLnVuY29tcHJlc3NJbnB1dFR5cGUgPSBVU0VfVFlQRURBUlJBWSA/IFwidWludDhhcnJheVwiIDogXCJhcnJheVwiO1xuZXhwb3J0cy5jb21wcmVzc0lucHV0VHlwZSA9IFVTRV9UWVBFREFSUkFZID8gXCJ1aW50OGFycmF5XCIgOiBcImFycmF5XCI7XG5cbmV4cG9ydHMubWFnaWMgPSBcIlxceDA4XFx4MDBcIjtcbmV4cG9ydHMuY29tcHJlc3MgPSBmdW5jdGlvbihpbnB1dCwgY29tcHJlc3Npb25PcHRpb25zKSB7XG4gICAgcmV0dXJuIHBha28uZGVmbGF0ZVJhdyhpbnB1dCwge1xuICAgICAgICBsZXZlbCA6IGNvbXByZXNzaW9uT3B0aW9ucy5sZXZlbCB8fCAtMSAvLyBkZWZhdWx0IGNvbXByZXNzaW9uXG4gICAgfSk7XG59O1xuZXhwb3J0cy51bmNvbXByZXNzID0gIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgcmV0dXJuIHBha28uaW5mbGF0ZVJhdyhpbnB1dCk7XG59O1xuXG59LHtcInBha29cIjozNX1dLDIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG5cbi8qKlxuVXNhZ2U6XG4gICB6aXAgPSBuZXcgSlNaaXAoKTtcbiAgIHppcC5maWxlKFwiaGVsbG8udHh0XCIsIFwiSGVsbG8sIFdvcmxkIVwiKS5maWxlKFwidGVtcGZpbGVcIiwgXCJub3RoaW5nXCIpO1xuICAgemlwLmZvbGRlcihcImltYWdlc1wiKS5maWxlKFwic21pbGUuZ2lmXCIsIGJhc2U2NERhdGEsIHtiYXNlNjQ6IHRydWV9KTtcbiAgIHppcC5maWxlKFwiWG1hcy50eHRcIiwgXCJIbyBobyBobyAhXCIsIHtkYXRlIDogbmV3IERhdGUoXCJEZWNlbWJlciAyNSwgMjAwNyAwMDowMDowMVwiKX0pO1xuICAgemlwLnJlbW92ZShcInRlbXBmaWxlXCIpO1xuXG4gICBiYXNlNjR6aXAgPSB6aXAuZ2VuZXJhdGUoKTtcblxuKiovXG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gYSBvZiB6aXAgZmlsZSBpbiBqc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZz18QXJyYXlCdWZmZXI9fFVpbnQ4QXJyYXk9fSBkYXRhIHRoZSBkYXRhIHRvIGxvYWQsIGlmIGFueSAob3B0aW9uYWwpLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIG9iamVjdHMgKG9wdGlvbmFsKS5cbiAqL1xuZnVuY3Rpb24gSlNaaXAoZGF0YSwgb3B0aW9ucykge1xuICAgIC8vIGlmIHRoaXMgY29uc3RydWN0b3IgaXPCoHVzZWQgd2l0aG91dMKgYG5ld2AsIGl0wqBhZGRzIGBuZXdgIGJlZm9yZcKgaXRzZWxmOlxuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIEpTWmlwKSkgcmV0dXJuIG5ldyBKU1ppcChkYXRhLCBvcHRpb25zKTtcblxuICAgIC8vIG9iamVjdCBjb250YWluaW5nIHRoZSBmaWxlcyA6XG4gICAgLy8ge1xuICAgIC8vICAgXCJmb2xkZXIvXCIgOiB7Li4ufSxcbiAgICAvLyAgIFwiZm9sZGVyL2RhdGEudHh0XCIgOiB7Li4ufVxuICAgIC8vIH1cbiAgICB0aGlzLmZpbGVzID0ge307XG5cbiAgICB0aGlzLmNvbW1lbnQgPSBudWxsO1xuXG4gICAgLy8gV2hlcmUgd2UgYXJlIGluIHRoZSBoaWVyYXJjaHlcbiAgICB0aGlzLnJvb3QgPSBcIlwiO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHRoaXMubG9hZChkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbmV3T2JqID0gbmV3IEpTWmlwKCk7XG4gICAgICAgIGZvciAodmFyIGkgaW4gdGhpcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2ldICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdPYmpbaV0gPSB0aGlzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfTtcbn1cbkpTWmlwLnByb3RvdHlwZSA9IHJlcXVpcmUoJy4vb2JqZWN0Jyk7XG5KU1ppcC5wcm90b3R5cGUubG9hZCA9IHJlcXVpcmUoJy4vbG9hZCcpO1xuSlNaaXAuc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpO1xuSlNaaXAuZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIFRoaXMgbmFtZXNwYWNlIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIHdpdGhvdXQgcmVwbGFjZW1lbnQuXG4gKi9cbkpTWmlwLnV0aWxzID0gcmVxdWlyZSgnLi9kZXByZWNhdGVkUHVibGljVXRpbHMnKTtcblxuSlNaaXAuYmFzZTY0ID0ge1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gd2l0aG91dCByZXBsYWNlbWVudC5cbiAgICAgKi9cbiAgICBlbmNvZGUgOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gYmFzZTY0LmVuY29kZShpbnB1dCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIHdpdGhvdXQgcmVwbGFjZW1lbnQuXG4gICAgICovXG4gICAgZGVjb2RlIDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGUoaW5wdXQpO1xuICAgIH1cbn07XG5KU1ppcC5jb21wcmVzc2lvbnMgPSByZXF1aXJlKCcuL2NvbXByZXNzaW9ucycpO1xubW9kdWxlLmV4cG9ydHMgPSBKU1ppcDtcblxufSx7XCIuL2Jhc2U2NFwiOjEyLFwiLi9jb21wcmVzc2lvbnNcIjoxNCxcIi4vZGVmYXVsdHNcIjoxNyxcIi4vZGVwcmVjYXRlZFB1YmxpY1V0aWxzXCI6MTgsXCIuL2xvYWRcIjoyMSxcIi4vb2JqZWN0XCI6MjQsXCIuL3N1cHBvcnRcIjoyOH1dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBiYXNlNjQgPSByZXF1aXJlKCcuL2Jhc2U2NCcpO1xudmFyIFppcEVudHJpZXMgPSByZXF1aXJlKCcuL3ppcEVudHJpZXMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xuICAgIHZhciBmaWxlcywgemlwRW50cmllcywgaSwgaW5wdXQ7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgaWYgKG9wdGlvbnMuYmFzZTY0KSB7XG4gICAgICAgIGRhdGEgPSBiYXNlNjQuZGVjb2RlKGRhdGEpO1xuICAgIH1cblxuICAgIHppcEVudHJpZXMgPSBuZXcgWmlwRW50cmllcyhkYXRhLCBvcHRpb25zKTtcbiAgICBmaWxlcyA9IHppcEVudHJpZXMuZmlsZXM7XG4gICAgZm9yIChpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlucHV0ID0gZmlsZXNbaV07XG4gICAgICAgIHRoaXMuZmlsZShpbnB1dC5maWxlTmFtZSwgaW5wdXQuZGVjb21wcmVzc2VkLCB7XG4gICAgICAgICAgICBiaW5hcnk6IHRydWUsXG4gICAgICAgICAgICBvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6IHRydWUsXG4gICAgICAgICAgICBkYXRlOiBpbnB1dC5kYXRlLFxuICAgICAgICAgICAgZGlyOiBpbnB1dC5kaXIsXG4gICAgICAgICAgICBjb21tZW50IDogaW5wdXQuZmlsZUNvbW1lbnQubGVuZ3RoID8gaW5wdXQuZmlsZUNvbW1lbnQgOiBudWxsLFxuICAgICAgICAgICAgdW5peFBlcm1pc3Npb25zIDogaW5wdXQudW5peFBlcm1pc3Npb25zLFxuICAgICAgICAgICAgZG9zUGVybWlzc2lvbnMgOiBpbnB1dC5kb3NQZXJtaXNzaW9ucyxcbiAgICAgICAgICAgIGNyZWF0ZUZvbGRlcnM6IG9wdGlvbnMuY3JlYXRlRm9sZGVyc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHppcEVudHJpZXMuemlwQ29tbWVudC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jb21tZW50ID0gemlwRW50cmllcy56aXBDb21tZW50O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufTtcblxufSx7XCIuL2Jhc2U2NFwiOjEyLFwiLi96aXBFbnRyaWVzXCI6MzN9XSwyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKEJ1ZmZlcil7XG4ndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEsIGVuY29kaW5nKXtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihkYXRhLCBlbmNvZGluZyk7XG59O1xubW9kdWxlLmV4cG9ydHMudGVzdCA9IGZ1bmN0aW9uKGIpe1xuICAgIHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYik7XG59O1xuXG59KS5jYWxsKHRoaXMscmVxdWlyZShcImJ1ZmZlclwiKS5CdWZmZXIpXG59LHtcImJ1ZmZlclwiOjN9XSwyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgVWludDhBcnJheVJlYWRlciA9IHJlcXVpcmUoJy4vdWludDhBcnJheVJlYWRlcicpO1xuXG5mdW5jdGlvbiBOb2RlQnVmZmVyUmVhZGVyKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICB0aGlzLmluZGV4ID0gMDtcbn1cbk5vZGVCdWZmZXJSZWFkZXIucHJvdG90eXBlID0gbmV3IFVpbnQ4QXJyYXlSZWFkZXIoKTtcblxuLyoqXG4gKiBAc2VlIERhdGFSZWFkZXIucmVhZERhdGFcbiAqL1xuTm9kZUJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZERhdGEgPSBmdW5jdGlvbihzaXplKSB7XG4gICAgdGhpcy5jaGVja09mZnNldChzaXplKTtcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyBzaXplKTtcbiAgICB0aGlzLmluZGV4ICs9IHNpemU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IE5vZGVCdWZmZXJSZWFkZXI7XG5cbn0se1wiLi91aW50OEFycmF5UmVhZGVyXCI6Mjl9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGNyYzMyID0gcmVxdWlyZSgnLi9jcmMzMicpO1xudmFyIHNpZ25hdHVyZSA9IHJlcXVpcmUoJy4vc2lnbmF0dXJlJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcbnZhciBjb21wcmVzc2lvbnMgPSByZXF1aXJlKCcuL2NvbXByZXNzaW9ucycpO1xudmFyIENvbXByZXNzZWRPYmplY3QgPSByZXF1aXJlKCcuL2NvbXByZXNzZWRPYmplY3QnKTtcbnZhciBub2RlQnVmZmVyID0gcmVxdWlyZSgnLi9ub2RlQnVmZmVyJyk7XG52YXIgdXRmOCA9IHJlcXVpcmUoJy4vdXRmOCcpO1xudmFyIFN0cmluZ1dyaXRlciA9IHJlcXVpcmUoJy4vc3RyaW5nV3JpdGVyJyk7XG52YXIgVWludDhBcnJheVdyaXRlciA9IHJlcXVpcmUoJy4vdWludDhBcnJheVdyaXRlcicpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHJhdyBkYXRhIG9mIGEgWmlwT2JqZWN0LCBkZWNvbXByZXNzIHRoZSBjb250ZW50IGlmIG5lY2Vzc2FyeS5cbiAqIEBwYXJhbSB7WmlwT2JqZWN0fSBmaWxlIHRoZSBmaWxlIHRvIHVzZS5cbiAqIEByZXR1cm4ge1N0cmluZ3xBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gdGhlIGRhdGEuXG4gKi9cbnZhciBnZXRSYXdEYXRhID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIGlmIChmaWxlLl9kYXRhIGluc3RhbmNlb2YgQ29tcHJlc3NlZE9iamVjdCkge1xuICAgICAgICBmaWxlLl9kYXRhID0gZmlsZS5fZGF0YS5nZXRDb250ZW50KCk7XG4gICAgICAgIGZpbGUub3B0aW9ucy5iaW5hcnkgPSB0cnVlO1xuICAgICAgICBmaWxlLm9wdGlvbnMuYmFzZTY0ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHV0aWxzLmdldFR5cGVPZihmaWxlLl9kYXRhKSA9PT0gXCJ1aW50OGFycmF5XCIpIHtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gZmlsZS5fZGF0YTtcbiAgICAgICAgICAgIC8vIHdoZW4gcmVhZGluZyBhbiBhcnJheWJ1ZmZlciwgdGhlIENvbXByZXNzZWRPYmplY3QgbWVjaGFuaXNtIHdpbGwga2VlcCBpdCBhbmQgc3ViYXJyYXkoKSBhIFVpbnQ4QXJyYXkuXG4gICAgICAgICAgICAvLyBpZiB3ZSByZXF1ZXN0IGEgZmlsZSBpbiB0aGUgc2FtZSBmb3JtYXQsIHdlIG1pZ2h0IGdldCB0aGUgc2FtZSBVaW50OEFycmF5IG9yIGl0cyBBcnJheUJ1ZmZlciAodGhlIG9yaWdpbmFsIHppcCBmaWxlKS5cbiAgICAgICAgICAgIGZpbGUuX2RhdGEgPSBuZXcgVWludDhBcnJheShjb3B5Lmxlbmd0aCk7XG4gICAgICAgICAgICAvLyB3aXRoIGFuIGVtcHR5IFVpbnQ4QXJyYXksIE9wZXJhIGZhaWxzIHdpdGggYSBcIk9mZnNldCBsYXJnZXIgdGhhbiBhcnJheSBzaXplXCJcbiAgICAgICAgICAgIGlmIChjb3B5Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGZpbGUuX2RhdGEuc2V0KGNvcHksIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaWxlLl9kYXRhO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkYXRhIG9mIGEgWmlwT2JqZWN0IGluIGEgYmluYXJ5IGZvcm0uIElmIHRoZSBjb250ZW50IGlzIGFuIHVuaWNvZGUgc3RyaW5nLCBlbmNvZGUgaXQuXG4gKiBAcGFyYW0ge1ppcE9iamVjdH0gZmlsZSB0aGUgZmlsZSB0byB1c2UuXG4gKiBAcmV0dXJuIHtTdHJpbmd8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IHRoZSBkYXRhLlxuICovXG52YXIgZ2V0QmluYXJ5RGF0YSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gZ2V0UmF3RGF0YShmaWxlKSxcbiAgICAgICAgdHlwZSA9IHV0aWxzLmdldFR5cGVPZihyZXN1bHQpO1xuICAgIGlmICh0eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmICghZmlsZS5vcHRpb25zLmJpbmFyeSkge1xuICAgICAgICAgICAgLy8gdW5pY29kZSB0ZXh0ICFcbiAgICAgICAgICAgIC8vIHVuaWNvZGUgc3RyaW5nID0+IGJpbmFyeSBzdHJpbmcgaXMgYSBwYWluZnVsIHByb2Nlc3MsIGNoZWNrIGlmIHdlIGNhbiBhdm9pZCBpdC5cbiAgICAgICAgICAgIGlmIChzdXBwb3J0Lm5vZGVidWZmZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZUJ1ZmZlcihyZXN1bHQsIFwidXRmLThcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGUuYXNCaW5hcnkoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtIHRoaXMuX2RhdGEgaW50byBhIHN0cmluZy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZpbHRlciBhIGZ1bmN0aW9uIFN0cmluZyAtPiBTdHJpbmcsIGFwcGxpZWQgaWYgbm90IG51bGwgb24gdGhlIHJlc3VsdC5cbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcy5fZGF0YS5cbiAqL1xudmFyIGRhdGFUb1N0cmluZyA9IGZ1bmN0aW9uKGFzVVRGOCkge1xuICAgIHZhciByZXN1bHQgPSBnZXRSYXdEYXRhKHRoaXMpO1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgLy8gaWYgdGhlIGRhdGEgaXMgYSBiYXNlNjQgc3RyaW5nLCB3ZSBkZWNvZGUgaXQgYmVmb3JlIGNoZWNraW5nIHRoZSBlbmNvZGluZyAhXG4gICAgaWYgKHRoaXMub3B0aW9ucy5iYXNlNjQpIHtcbiAgICAgICAgcmVzdWx0ID0gYmFzZTY0LmRlY29kZShyZXN1bHQpO1xuICAgIH1cbiAgICBpZiAoYXNVVEY4ICYmIHRoaXMub3B0aW9ucy5iaW5hcnkpIHtcbiAgICAgICAgLy8gSlNaaXAucHJvdG90eXBlLnV0ZjhkZWNvZGUgc3VwcG9ydHMgYXJyYXlzIGFzIGlucHV0XG4gICAgICAgIC8vIHNraXAgdG8gYXJyYXkgPT4gc3RyaW5nIHN0ZXAsIHV0ZjhkZWNvZGUgd2lsbCBkbyBpdC5cbiAgICAgICAgcmVzdWx0ID0gb3V0LnV0ZjhkZWNvZGUocmVzdWx0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG5vIHV0ZjggdHJhbnNmb3JtYXRpb24sIGRvIHRoZSBhcnJheSA9PiBzdHJpbmcgc3RlcC5cbiAgICAgICAgcmVzdWx0ID0gdXRpbHMudHJhbnNmb3JtVG8oXCJzdHJpbmdcIiwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICBpZiAoIWFzVVRGOCAmJiAhdGhpcy5vcHRpb25zLmJpbmFyeSkge1xuICAgICAgICByZXN1bHQgPSB1dGlscy50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLCBvdXQudXRmOGVuY29kZShyZXN1bHQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIEEgc2ltcGxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBmaWxlIGluIHRoZSB6aXAgZmlsZS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhIHRoZSBkYXRhXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgb3B0aW9ucyBvZiB0aGUgZmlsZVxuICovXG52YXIgWmlwT2JqZWN0ID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb3B0aW9ucykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5kaXIgPSBvcHRpb25zLmRpcjtcbiAgICB0aGlzLmRhdGUgPSBvcHRpb25zLmRhdGU7XG4gICAgdGhpcy5jb21tZW50ID0gb3B0aW9ucy5jb21tZW50O1xuICAgIHRoaXMudW5peFBlcm1pc3Npb25zID0gb3B0aW9ucy51bml4UGVybWlzc2lvbnM7XG4gICAgdGhpcy5kb3NQZXJtaXNzaW9ucyA9IG9wdGlvbnMuZG9zUGVybWlzc2lvbnM7XG5cbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgLypcbiAgICAgKiBUaGlzIG9iamVjdCBjb250YWlucyBpbml0aWFsIHZhbHVlcyBmb3IgZGlyIGFuZCBkYXRlLlxuICAgICAqIFdpdGggdGhlbSwgd2UgY2FuIGNoZWNrIGlmIHRoZSB1c2VyIGNoYW5nZWQgdGhlIGRlcHJlY2F0ZWQgbWV0YWRhdGEgaW5cbiAgICAgKiBgWmlwT2JqZWN0I29wdGlvbnNgIG9yIG5vdC5cbiAgICAgKi9cbiAgICB0aGlzLl9pbml0aWFsTWV0YWRhdGEgPSB7XG4gICAgICBkaXIgOiBvcHRpb25zLmRpcixcbiAgICAgIGRhdGUgOiBvcHRpb25zLmRhdGVcbiAgICB9O1xufTtcblxuWmlwT2JqZWN0LnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvbnRlbnQgYXMgVVRGOCBzdHJpbmcuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSB0aGUgVVRGOCBzdHJpbmcuXG4gICAgICovXG4gICAgYXNUZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRhdGFUb1N0cmluZy5jYWxsKHRoaXMsIHRydWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYmluYXJ5IGNvbnRlbnQuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSB0aGUgY29udGVudCBhcyBiaW5hcnkuXG4gICAgICovXG4gICAgYXNCaW5hcnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZGF0YVRvU3RyaW5nLmNhbGwodGhpcywgZmFsc2UpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29udGVudCBhcyBhIG5vZGVqcyBCdWZmZXIuXG4gICAgICogQHJldHVybiB7QnVmZmVyfSB0aGUgY29udGVudCBhcyBhIEJ1ZmZlci5cbiAgICAgKi9cbiAgICBhc05vZGVCdWZmZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0QmluYXJ5RGF0YSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHV0aWxzLnRyYW5zZm9ybVRvKFwibm9kZWJ1ZmZlclwiLCByZXN1bHQpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29udGVudCBhcyBhbiBVaW50OEFycmF5LlxuICAgICAqIEByZXR1cm4ge1VpbnQ4QXJyYXl9IHRoZSBjb250ZW50IGFzIGFuIFVpbnQ4QXJyYXkuXG4gICAgICovXG4gICAgYXNVaW50OEFycmF5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGdldEJpbmFyeURhdGEodGhpcyk7XG4gICAgICAgIHJldHVybiB1dGlscy50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIiwgcmVzdWx0KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvbnRlbnQgYXMgYW4gQXJyYXlCdWZmZXIuXG4gICAgICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IHRoZSBjb250ZW50IGFzIGFuIEFycmF5QnVmZXIuXG4gICAgICovXG4gICAgYXNBcnJheUJ1ZmZlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzVWludDhBcnJheSgpLmJ1ZmZlcjtcbiAgICB9XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybSBhbiBpbnRlZ2VyIGludG8gYSBzdHJpbmcgaW4gaGV4YWRlY2ltYWwuXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGRlYyB0aGUgbnVtYmVyIHRvIGNvbnZlcnQuXG4gKiBAcGFyYW0ge251bWJlcn0gYnl0ZXMgdGhlIG51bWJlciBvZiBieXRlcyB0byBnZW5lcmF0ZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSByZXN1bHQuXG4gKi9cbnZhciBkZWNUb0hleCA9IGZ1bmN0aW9uKGRlYywgYnl0ZXMpIHtcbiAgICB2YXIgaGV4ID0gXCJcIixcbiAgICAgICAgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYnl0ZXM7IGkrKykge1xuICAgICAgICBoZXggKz0gU3RyaW5nLmZyb21DaGFyQ29kZShkZWMgJiAweGZmKTtcbiAgICAgICAgZGVjID0gZGVjID4+PiA4O1xuICAgIH1cbiAgICByZXR1cm4gaGV4O1xufTtcblxuLyoqXG4gKiBNZXJnZSB0aGUgb2JqZWN0cyBwYXNzZWQgYXMgcGFyYW1ldGVycyBpbnRvIGEgbmV3IG9uZS5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX2FyZ3MgQWxsIG9iamVjdHMgdG8gbWVyZ2UuXG4gKiBAcmV0dXJuIHtPYmplY3R9IGEgbmV3IG9iamVjdCB3aXRoIHRoZSBkYXRhIG9mIHRoZSBvdGhlcnMuXG4gKi9cbnZhciBleHRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzdWx0ID0ge30sIGksIGF0dHI7XG4gICAgZm9yIChpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyAvLyBhcmd1bWVudHMgaXMgbm90IGVudW1lcmFibGUgaW4gc29tZSBicm93c2Vyc1xuICAgICAgICBmb3IgKGF0dHIgaW4gYXJndW1lbnRzW2ldKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldLmhhc093blByb3BlcnR5KGF0dHIpICYmIHR5cGVvZiByZXN1bHRbYXR0cl0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbYXR0cl0gPSBhcmd1bWVudHNbaV1bYXR0cl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgKGluY29tcGxldGUpIG9wdGlvbnMgZnJvbSB0aGUgdXNlciBpbnRvIHRoZSBjb21wbGV0ZVxuICogc2V0IG9mIG9wdGlvbnMgdG8gY3JlYXRlIGEgZmlsZS5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbyB0aGUgb3B0aW9ucyBmcm9tIHRoZSB1c2VyLlxuICogQHJldHVybiB7T2JqZWN0fSB0aGUgY29tcGxldGUgc2V0IG9mIG9wdGlvbnMuXG4gKi9cbnZhciBwcmVwYXJlRmlsZUF0dHJzID0gZnVuY3Rpb24obykge1xuICAgIG8gPSBvIHx8IHt9O1xuICAgIGlmIChvLmJhc2U2NCA9PT0gdHJ1ZSAmJiAoby5iaW5hcnkgPT09IG51bGwgfHwgby5iaW5hcnkgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgby5iaW5hcnkgPSB0cnVlO1xuICAgIH1cbiAgICBvID0gZXh0ZW5kKG8sIGRlZmF1bHRzKTtcbiAgICBvLmRhdGUgPSBvLmRhdGUgfHwgbmV3IERhdGUoKTtcbiAgICBpZiAoby5jb21wcmVzc2lvbiAhPT0gbnVsbCkgby5jb21wcmVzc2lvbiA9IG8uY29tcHJlc3Npb24udG9VcHBlckNhc2UoKTtcblxuICAgIHJldHVybiBvO1xufTtcblxuLyoqXG4gKiBBZGQgYSBmaWxlIGluIHRoZSBjdXJyZW50IGZvbGRlci5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZmlsZVxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IGRhdGEgdGhlIGRhdGEgb2YgdGhlIGZpbGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvIHRoZSBvcHRpb25zIG9mIHRoZSBmaWxlXG4gKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBuZXcgZmlsZS5cbiAqL1xudmFyIGZpbGVBZGQgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBvKSB7XG4gICAgLy8gYmUgc3VyZSBzdWIgZm9sZGVycyBleGlzdFxuICAgIHZhciBkYXRhVHlwZSA9IHV0aWxzLmdldFR5cGVPZihkYXRhKSxcbiAgICAgICAgcGFyZW50O1xuXG4gICAgbyA9IHByZXBhcmVGaWxlQXR0cnMobyk7XG5cbiAgICBpZiAodHlwZW9mIG8udW5peFBlcm1pc3Npb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG8udW5peFBlcm1pc3Npb25zID0gcGFyc2VJbnQoby51bml4UGVybWlzc2lvbnMsIDgpO1xuICAgIH1cblxuICAgIC8vIFVOWF9JRkRJUiAgMDA0MDAwMCBzZWUgemlwaW5mby5jXG4gICAgaWYgKG8udW5peFBlcm1pc3Npb25zICYmIChvLnVuaXhQZXJtaXNzaW9ucyAmIDB4NDAwMCkpIHtcbiAgICAgICAgby5kaXIgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBCaXQgNCAgICBEaXJlY3RvcnlcbiAgICBpZiAoby5kb3NQZXJtaXNzaW9ucyAmJiAoby5kb3NQZXJtaXNzaW9ucyAmIDB4MDAxMCkpIHtcbiAgICAgICAgby5kaXIgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChvLmRpcikge1xuICAgICAgICBuYW1lID0gZm9yY2VUcmFpbGluZ1NsYXNoKG5hbWUpO1xuICAgIH1cblxuICAgIGlmIChvLmNyZWF0ZUZvbGRlcnMgJiYgKHBhcmVudCA9IHBhcmVudEZvbGRlcihuYW1lKSkpIHtcbiAgICAgICAgZm9sZGVyQWRkLmNhbGwodGhpcywgcGFyZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoby5kaXIgfHwgZGF0YSA9PT0gbnVsbCB8fCB0eXBlb2YgZGF0YSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBvLmJhc2U2NCA9IGZhbHNlO1xuICAgICAgICBvLmJpbmFyeSA9IGZhbHNlO1xuICAgICAgICBkYXRhID0gbnVsbDtcbiAgICAgICAgZGF0YVR5cGUgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoby5iaW5hcnkgJiYgIW8uYmFzZTY0KSB7XG4gICAgICAgICAgICAvLyBvcHRpbWl6ZWRCaW5hcnlTdHJpbmcgPT0gdHJ1ZSBtZWFucyB0aGF0IHRoZSBmaWxlIGhhcyBhbHJlYWR5IGJlZW4gZmlsdGVyZWQgd2l0aCBhIDB4RkYgbWFza1xuICAgICAgICAgICAgaWYgKG8ub3B0aW1pemVkQmluYXJ5U3RyaW5nICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhIHN0cmluZywgbm90IGluIGEgYmFzZTY0IGZvcm1hdC5cbiAgICAgICAgICAgICAgICAvLyBCZSBzdXJlIHRoYXQgdGhpcyBpcyBhIGNvcnJlY3QgXCJiaW5hcnkgc3RyaW5nXCJcbiAgICAgICAgICAgICAgICBkYXRhID0gdXRpbHMuc3RyaW5nMmJpbmFyeShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHsgLy8gYXJyYXlidWZmZXIsIHVpbnQ4YXJyYXksIC4uLlxuICAgICAgICBvLmJhc2U2NCA9IGZhbHNlO1xuICAgICAgICBvLmJpbmFyeSA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFkYXRhVHlwZSAmJiAhKGRhdGEgaW5zdGFuY2VvZiBDb21wcmVzc2VkT2JqZWN0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRhdGEgb2YgJ1wiICsgbmFtZSArIFwiJyBpcyBpbiBhbiB1bnN1cHBvcnRlZCBmb3JtYXQgIVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZSA6IGl0J3Mgd2F5IGVhc2llciB0byB3b3JrIHdpdGggVWludDhBcnJheSB0aGFuIHdpdGggQXJyYXlCdWZmZXJcbiAgICAgICAgaWYgKGRhdGFUeXBlID09PSBcImFycmF5YnVmZmVyXCIpIHtcbiAgICAgICAgICAgIGRhdGEgPSB1dGlscy50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIiwgZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgb2JqZWN0ID0gbmV3IFppcE9iamVjdChuYW1lLCBkYXRhLCBvKTtcbiAgICB0aGlzLmZpbGVzW25hbWVdID0gb2JqZWN0O1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG4vKipcbiAqIEZpbmQgdGhlIHBhcmVudCBmb2xkZXIgb2YgdGhlIHBhdGguXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggdGhlIHBhdGggdG8gdXNlXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBwYXJlbnQgZm9sZGVyLCBvciBcIlwiXG4gKi9cbnZhciBwYXJlbnRGb2xkZXIgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIGlmIChwYXRoLnNsaWNlKC0xKSA9PSAnLycpIHtcbiAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyaW5nKDAsIHBhdGgubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIHZhciBsYXN0U2xhc2ggPSBwYXRoLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgcmV0dXJuIChsYXN0U2xhc2ggPiAwKSA/IHBhdGguc3Vic3RyaW5nKDAsIGxhc3RTbGFzaCkgOiBcIlwiO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBhdGggd2l0aCBhIHNsYXNoIGF0IHRoZSBlbmQuXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggdGhlIHBhdGggdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBwYXRoIHdpdGggYSB0cmFpbGluZyBzbGFzaC5cbiAqL1xudmFyIGZvcmNlVHJhaWxpbmdTbGFzaCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAvLyBDaGVjayB0aGUgbmFtZSBlbmRzIHdpdGggYSAvXG4gICAgaWYgKHBhdGguc2xpY2UoLTEpICE9IFwiL1wiKSB7XG4gICAgICAgIHBhdGggKz0gXCIvXCI7IC8vIElFIGRvZXNuJ3QgbGlrZSBzdWJzdHIoLTEpXG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufTtcbi8qKlxuICogQWRkIGEgKHN1YikgZm9sZGVyIGluIHRoZSBjdXJyZW50IGZvbGRlci5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgZm9sZGVyJ3MgbmFtZVxuICogQHBhcmFtIHtib29sZWFuPX0gW2NyZWF0ZUZvbGRlcnNdIElmIHRydWUsIGF1dG9tYXRpY2FsbHkgY3JlYXRlIHN1YlxuICogIGZvbGRlcnMuIERlZmF1bHRzIHRvIGZhbHNlLlxuICogQHJldHVybiB7T2JqZWN0fSB0aGUgbmV3IGZvbGRlci5cbiAqL1xudmFyIGZvbGRlckFkZCA9IGZ1bmN0aW9uKG5hbWUsIGNyZWF0ZUZvbGRlcnMpIHtcbiAgICBjcmVhdGVGb2xkZXJzID0gKHR5cGVvZiBjcmVhdGVGb2xkZXJzICE9PSAndW5kZWZpbmVkJykgPyBjcmVhdGVGb2xkZXJzIDogZmFsc2U7XG5cbiAgICBuYW1lID0gZm9yY2VUcmFpbGluZ1NsYXNoKG5hbWUpO1xuXG4gICAgLy8gRG9lcyB0aGlzIGZvbGRlciBhbHJlYWR5IGV4aXN0P1xuICAgIGlmICghdGhpcy5maWxlc1tuYW1lXSkge1xuICAgICAgICBmaWxlQWRkLmNhbGwodGhpcywgbmFtZSwgbnVsbCwge1xuICAgICAgICAgICAgZGlyOiB0cnVlLFxuICAgICAgICAgICAgY3JlYXRlRm9sZGVyczogY3JlYXRlRm9sZGVyc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmlsZXNbbmFtZV07XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgSlNaaXAuQ29tcHJlc3NlZE9iamVjdCBmb3IgYSBnaXZlbiB6aXBPamVjdC5cbiAqIEBwYXJhbSB7WmlwT2JqZWN0fSBmaWxlIHRoZSBvYmplY3QgdG8gcmVhZC5cbiAqIEBwYXJhbSB7SlNaaXAuY29tcHJlc3Npb259IGNvbXByZXNzaW9uIHRoZSBjb21wcmVzc2lvbiB0byB1c2UuXG4gKiBAcGFyYW0ge09iamVjdH0gY29tcHJlc3Npb25PcHRpb25zIHRoZSBvcHRpb25zIHRvIHVzZSB3aGVuIGNvbXByZXNzaW5nLlxuICogQHJldHVybiB7SlNaaXAuQ29tcHJlc3NlZE9iamVjdH0gdGhlIGNvbXByZXNzZWQgcmVzdWx0LlxuICovXG52YXIgZ2VuZXJhdGVDb21wcmVzc2VkT2JqZWN0RnJvbSA9IGZ1bmN0aW9uKGZpbGUsIGNvbXByZXNzaW9uLCBjb21wcmVzc2lvbk9wdGlvbnMpIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IENvbXByZXNzZWRPYmplY3QoKSxcbiAgICAgICAgY29udGVudDtcblxuICAgIC8vIHRoZSBkYXRhIGhhcyBub3QgYmVlbiBkZWNvbXByZXNzZWQsIHdlIG1pZ2h0IHJldXNlIHRoaW5ncyAhXG4gICAgaWYgKGZpbGUuX2RhdGEgaW5zdGFuY2VvZiBDb21wcmVzc2VkT2JqZWN0KSB7XG4gICAgICAgIHJlc3VsdC51bmNvbXByZXNzZWRTaXplID0gZmlsZS5fZGF0YS51bmNvbXByZXNzZWRTaXplO1xuICAgICAgICByZXN1bHQuY3JjMzIgPSBmaWxlLl9kYXRhLmNyYzMyO1xuXG4gICAgICAgIGlmIChyZXN1bHQudW5jb21wcmVzc2VkU2l6ZSA9PT0gMCB8fCBmaWxlLmRpcikge1xuICAgICAgICAgICAgY29tcHJlc3Npb24gPSBjb21wcmVzc2lvbnNbJ1NUT1JFJ107XG4gICAgICAgICAgICByZXN1bHQuY29tcHJlc3NlZENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgcmVzdWx0LmNyYzMyID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWxlLl9kYXRhLmNvbXByZXNzaW9uTWV0aG9kID09PSBjb21wcmVzc2lvbi5tYWdpYykge1xuICAgICAgICAgICAgcmVzdWx0LmNvbXByZXNzZWRDb250ZW50ID0gZmlsZS5fZGF0YS5nZXRDb21wcmVzc2VkQ29udGVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGVudCA9IGZpbGUuX2RhdGEuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgLy8gbmVlZCB0byBkZWNvbXByZXNzIC8gcmVjb21wcmVzc1xuICAgICAgICAgICAgcmVzdWx0LmNvbXByZXNzZWRDb250ZW50ID0gY29tcHJlc3Npb24uY29tcHJlc3ModXRpbHMudHJhbnNmb3JtVG8oY29tcHJlc3Npb24uY29tcHJlc3NJbnB1dFR5cGUsIGNvbnRlbnQpLCBjb21wcmVzc2lvbk9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBoYXZlIHVuY29tcHJlc3NlZCBkYXRhXG4gICAgICAgIGNvbnRlbnQgPSBnZXRCaW5hcnlEYXRhKGZpbGUpO1xuICAgICAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC5sZW5ndGggPT09IDAgfHwgZmlsZS5kaXIpIHtcbiAgICAgICAgICAgIGNvbXByZXNzaW9uID0gY29tcHJlc3Npb25zWydTVE9SRSddO1xuICAgICAgICAgICAgY29udGVudCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LnVuY29tcHJlc3NlZFNpemUgPSBjb250ZW50Lmxlbmd0aDtcbiAgICAgICAgcmVzdWx0LmNyYzMyID0gY3JjMzIoY29udGVudCk7XG4gICAgICAgIHJlc3VsdC5jb21wcmVzc2VkQ29udGVudCA9IGNvbXByZXNzaW9uLmNvbXByZXNzKHV0aWxzLnRyYW5zZm9ybVRvKGNvbXByZXNzaW9uLmNvbXByZXNzSW5wdXRUeXBlLCBjb250ZW50KSwgY29tcHJlc3Npb25PcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXN1bHQuY29tcHJlc3NlZFNpemUgPSByZXN1bHQuY29tcHJlc3NlZENvbnRlbnQubGVuZ3RoO1xuICAgIHJlc3VsdC5jb21wcmVzc2lvbk1ldGhvZCA9IGNvbXByZXNzaW9uLm1hZ2ljO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG5cbi8qKlxuICogR2VuZXJhdGUgdGhlIFVOSVggcGFydCBvZiB0aGUgZXh0ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHtPYmplY3R9IHVuaXhQZXJtaXNzaW9ucyB0aGUgdW5peCBwZXJtaXNzaW9ucyBvciBudWxsLlxuICogQHBhcmFtIHtCb29sZWFufSBpc0RpciB0cnVlIGlmIHRoZSBlbnRyeSBpcyBhIGRpcmVjdG9yeSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICogQHJldHVybiB7TnVtYmVyfSBhIDMyIGJpdCBpbnRlZ2VyLlxuICpcbiAqIGFkYXB0ZWQgZnJvbSBodHRwOi8vdW5peC5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMTQ3MDUvdGhlLXppcC1mb3JtYXRzLWV4dGVybmFsLWZpbGUtYXR0cmlidXRlIDpcbiAqXG4gKiBUVFRUc3N0cnd4cnd4cnd4MDAwMDAwMDAwMEFEVlNIUlxuICogXl5eXl9fX19fX19fX19fX19fX19fX19fX19fX19fX18gZmlsZSB0eXBlLCBzZWUgemlwaW5mby5jIChVTlhfKilcbiAqICAgICBeXl5fX19fX19fX19fX19fX19fX19fX19fX19fIHNldHVpZCwgc2V0Z2lkLCBzdGlja3lcbiAqICAgICAgICBeXl5eXl5eXl5fX19fX19fX19fX19fX19fIHBlcm1pc3Npb25zXG4gKiAgICAgICAgICAgICAgICAgXl5eXl5eXl5eXl9fX19fXyBub3QgdXNlZCA/XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXiBET1MgYXR0cmlidXRlIGJpdHMgOiBBcmNoaXZlLCBEaXJlY3RvcnksIFZvbHVtZSBsYWJlbCwgU3lzdGVtIGZpbGUsIEhpZGRlbiwgUmVhZCBvbmx5XG4gKi9cbnZhciBnZW5lcmF0ZVVuaXhFeHRlcm5hbEZpbGVBdHRyID0gZnVuY3Rpb24gKHVuaXhQZXJtaXNzaW9ucywgaXNEaXIpIHtcblxuICAgIHZhciByZXN1bHQgPSB1bml4UGVybWlzc2lvbnM7XG4gICAgaWYgKCF1bml4UGVybWlzc2lvbnMpIHtcbiAgICAgICAgLy8gSSBjYW4ndCB1c2Ugb2N0YWwgdmFsdWVzIGluIHN0cmljdCBtb2RlLCBoZW5jZSB0aGUgaGV4YS5cbiAgICAgICAgLy8gIDA0MDc3NSA9PiAweDQxZmRcbiAgICAgICAgLy8gMDEwMDY2NCA9PiAweDgxYjRcbiAgICAgICAgcmVzdWx0ID0gaXNEaXIgPyAweDQxZmQgOiAweDgxYjQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIChyZXN1bHQgJiAweEZGRkYpIDw8IDE2O1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgRE9TIHBhcnQgb2YgdGhlIGV4dGVybmFsIGZpbGUgYXR0cmlidXRlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkb3NQZXJtaXNzaW9ucyB0aGUgZG9zIHBlcm1pc3Npb25zIG9yIG51bGwuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzRGlyIHRydWUgaWYgdGhlIGVudHJ5IGlzIGEgZGlyZWN0b3J5LCBmYWxzZSBvdGhlcndpc2UuXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGEgMzIgYml0IGludGVnZXIuXG4gKlxuICogQml0IDAgICAgIFJlYWQtT25seVxuICogQml0IDEgICAgIEhpZGRlblxuICogQml0IDIgICAgIFN5c3RlbVxuICogQml0IDMgICAgIFZvbHVtZSBMYWJlbFxuICogQml0IDQgICAgIERpcmVjdG9yeVxuICogQml0IDUgICAgIEFyY2hpdmVcbiAqL1xudmFyIGdlbmVyYXRlRG9zRXh0ZXJuYWxGaWxlQXR0ciA9IGZ1bmN0aW9uIChkb3NQZXJtaXNzaW9ucywgaXNEaXIpIHtcblxuICAgIC8vIHRoZSBkaXIgZmxhZyBpcyBhbHJlYWR5IHNldCBmb3IgY29tcGF0aWJpbGl0eVxuXG4gICAgcmV0dXJuIChkb3NQZXJtaXNzaW9ucyB8fCAwKSAgJiAweDNGO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgdmFyaW91cyBwYXJ0cyB1c2VkIGluIHRoZSBjb25zdHJ1Y3Rpb24gb2YgdGhlIGZpbmFsIHppcCBmaWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGZpbGUgbmFtZS5cbiAqIEBwYXJhbSB7WmlwT2JqZWN0fSBmaWxlIHRoZSBmaWxlIGNvbnRlbnQuXG4gKiBAcGFyYW0ge0pTWmlwLkNvbXByZXNzZWRPYmplY3R9IGNvbXByZXNzZWRPYmplY3QgdGhlIGNvbXByZXNzZWQgb2JqZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCB0aGUgY3VycmVudCBvZmZzZXQgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHppcCBmaWxlLlxuICogQHBhcmFtIHtTdHJpbmd9IHBsYXRmb3JtIGxldCdzIHByZXRlbmQgd2UgYXJlIHRoaXMgcGxhdGZvcm0gKGNoYW5nZSBwbGF0Zm9ybSBkZXBlbmRlbnRzIGZpZWxkcylcbiAqIEByZXR1cm4ge29iamVjdH0gdGhlIHppcCBwYXJ0cy5cbiAqL1xudmFyIGdlbmVyYXRlWmlwUGFydHMgPSBmdW5jdGlvbihuYW1lLCBmaWxlLCBjb21wcmVzc2VkT2JqZWN0LCBvZmZzZXQsIHBsYXRmb3JtKSB7XG4gICAgdmFyIGRhdGEgPSBjb21wcmVzc2VkT2JqZWN0LmNvbXByZXNzZWRDb250ZW50LFxuICAgICAgICB1dGZFbmNvZGVkRmlsZU5hbWUgPSB1dGlscy50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLCB1dGY4LnV0ZjhlbmNvZGUoZmlsZS5uYW1lKSksXG4gICAgICAgIGNvbW1lbnQgPSBmaWxlLmNvbW1lbnQgfHwgXCJcIixcbiAgICAgICAgdXRmRW5jb2RlZENvbW1lbnQgPSB1dGlscy50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLCB1dGY4LnV0ZjhlbmNvZGUoY29tbWVudCkpLFxuICAgICAgICB1c2VVVEY4Rm9yRmlsZU5hbWUgPSB1dGZFbmNvZGVkRmlsZU5hbWUubGVuZ3RoICE9PSBmaWxlLm5hbWUubGVuZ3RoLFxuICAgICAgICB1c2VVVEY4Rm9yQ29tbWVudCA9IHV0ZkVuY29kZWRDb21tZW50Lmxlbmd0aCAhPT0gY29tbWVudC5sZW5ndGgsXG4gICAgICAgIG8gPSBmaWxlLm9wdGlvbnMsXG4gICAgICAgIGRvc1RpbWUsXG4gICAgICAgIGRvc0RhdGUsXG4gICAgICAgIGV4dHJhRmllbGRzID0gXCJcIixcbiAgICAgICAgdW5pY29kZVBhdGhFeHRyYUZpZWxkID0gXCJcIixcbiAgICAgICAgdW5pY29kZUNvbW1lbnRFeHRyYUZpZWxkID0gXCJcIixcbiAgICAgICAgZGlyLCBkYXRlO1xuXG5cbiAgICAvLyBoYW5kbGUgdGhlIGRlcHJlY2F0ZWQgb3B0aW9ucy5kaXJcbiAgICBpZiAoZmlsZS5faW5pdGlhbE1ldGFkYXRhLmRpciAhPT0gZmlsZS5kaXIpIHtcbiAgICAgICAgZGlyID0gZmlsZS5kaXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlyID0gby5kaXI7XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIHRoZSBkZXByZWNhdGVkIG9wdGlvbnMuZGF0ZVxuICAgIGlmKGZpbGUuX2luaXRpYWxNZXRhZGF0YS5kYXRlICE9PSBmaWxlLmRhdGUpIHtcbiAgICAgICAgZGF0ZSA9IGZpbGUuZGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkYXRlID0gby5kYXRlO1xuICAgIH1cblxuICAgIHZhciBleHRGaWxlQXR0ciA9IDA7XG4gICAgdmFyIHZlcnNpb25NYWRlQnkgPSAwO1xuICAgIGlmIChkaXIpIHtcbiAgICAgICAgLy8gZG9zIG9yIHVuaXgsIHdlIHNldCB0aGUgZG9zIGRpciBmbGFnXG4gICAgICAgIGV4dEZpbGVBdHRyIHw9IDB4MDAwMTA7XG4gICAgfVxuICAgIGlmKHBsYXRmb3JtID09PSBcIlVOSVhcIikge1xuICAgICAgICB2ZXJzaW9uTWFkZUJ5ID0gMHgwMzFFOyAvLyBVTklYLCB2ZXJzaW9uIDMuMFxuICAgICAgICBleHRGaWxlQXR0ciB8PSBnZW5lcmF0ZVVuaXhFeHRlcm5hbEZpbGVBdHRyKGZpbGUudW5peFBlcm1pc3Npb25zLCBkaXIpO1xuICAgIH0gZWxzZSB7IC8vIERPUyBvciBvdGhlciwgZmFsbGJhY2sgdG8gRE9TXG4gICAgICAgIHZlcnNpb25NYWRlQnkgPSAweDAwMTQ7IC8vIERPUywgdmVyc2lvbiAyLjBcbiAgICAgICAgZXh0RmlsZUF0dHIgfD0gZ2VuZXJhdGVEb3NFeHRlcm5hbEZpbGVBdHRyKGZpbGUuZG9zUGVybWlzc2lvbnMsIGRpcik7XG4gICAgfVxuXG4gICAgLy8gZGF0ZVxuICAgIC8vIEBzZWUgaHR0cDovL3d3dy5kZWxvcmllLmNvbS9kamdwcC9kb2MvcmJpbnRlci9pdC81Mi8xMy5odG1sXG4gICAgLy8gQHNlZSBodHRwOi8vd3d3LmRlbG9yaWUuY29tL2RqZ3BwL2RvYy9yYmludGVyL2l0LzY1LzE2Lmh0bWxcbiAgICAvLyBAc2VlIGh0dHA6Ly93d3cuZGVsb3JpZS5jb20vZGpncHAvZG9jL3JiaW50ZXIvaXQvNjYvMTYuaHRtbFxuXG4gICAgZG9zVGltZSA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBkb3NUaW1lID0gZG9zVGltZSA8PCA2O1xuICAgIGRvc1RpbWUgPSBkb3NUaW1lIHwgZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgZG9zVGltZSA9IGRvc1RpbWUgPDwgNTtcbiAgICBkb3NUaW1lID0gZG9zVGltZSB8IGRhdGUuZ2V0U2Vjb25kcygpIC8gMjtcblxuICAgIGRvc0RhdGUgPSBkYXRlLmdldEZ1bGxZZWFyKCkgLSAxOTgwO1xuICAgIGRvc0RhdGUgPSBkb3NEYXRlIDw8IDQ7XG4gICAgZG9zRGF0ZSA9IGRvc0RhdGUgfCAoZGF0ZS5nZXRNb250aCgpICsgMSk7XG4gICAgZG9zRGF0ZSA9IGRvc0RhdGUgPDwgNTtcbiAgICBkb3NEYXRlID0gZG9zRGF0ZSB8IGRhdGUuZ2V0RGF0ZSgpO1xuXG4gICAgaWYgKHVzZVVURjhGb3JGaWxlTmFtZSkge1xuICAgICAgICAvLyBzZXQgdGhlIHVuaWNvZGUgcGF0aCBleHRyYSBmaWVsZC4gdW56aXAgbmVlZHMgYXQgbGVhc3Qgb25lIGV4dHJhXG4gICAgICAgIC8vIGZpZWxkIHRvIGNvcnJlY3RseSBoYW5kbGUgdW5pY29kZSBwYXRoLCBzbyB1c2luZyB0aGUgcGF0aCBpcyBhcyBnb29kXG4gICAgICAgIC8vIGFzIGFueSBvdGhlciBpbmZvcm1hdGlvbi4gVGhpcyBjb3VsZCBpbXByb3ZlIHRoZSBzaXR1YXRpb24gd2l0aFxuICAgICAgICAvLyBvdGhlciBhcmNoaXZlIG1hbmFnZXJzIHRvby5cbiAgICAgICAgLy8gVGhpcyBmaWVsZCBpcyB1c3VhbGx5IHVzZWQgd2l0aG91dCB0aGUgdXRmOCBmbGFnLCB3aXRoIGEgbm9uXG4gICAgICAgIC8vIHVuaWNvZGUgcGF0aCBpbiB0aGUgaGVhZGVyICh3aW5yYXIsIHdpbnppcCkuIFRoaXMgaGVscHMgKGEgYml0KVxuICAgICAgICAvLyB3aXRoIHRoZSBtZXNzeSBXaW5kb3dzJyBkZWZhdWx0IGNvbXByZXNzZWQgZm9sZGVycyBmZWF0dXJlIGJ1dFxuICAgICAgICAvLyBicmVha3Mgb24gcDd6aXAgd2hpY2ggZG9lc24ndCBzZWVrIHRoZSB1bmljb2RlIHBhdGggZXh0cmEgZmllbGQuXG4gICAgICAgIC8vIFNvIGZvciBub3csIFVURi04IGV2ZXJ5d2hlcmUgIVxuICAgICAgICB1bmljb2RlUGF0aEV4dHJhRmllbGQgPVxuICAgICAgICAgICAgLy8gVmVyc2lvblxuICAgICAgICAgICAgZGVjVG9IZXgoMSwgMSkgK1xuICAgICAgICAgICAgLy8gTmFtZUNSQzMyXG4gICAgICAgICAgICBkZWNUb0hleChjcmMzMih1dGZFbmNvZGVkRmlsZU5hbWUpLCA0KSArXG4gICAgICAgICAgICAvLyBVbmljb2RlTmFtZVxuICAgICAgICAgICAgdXRmRW5jb2RlZEZpbGVOYW1lO1xuXG4gICAgICAgIGV4dHJhRmllbGRzICs9XG4gICAgICAgICAgICAvLyBJbmZvLVpJUCBVbmljb2RlIFBhdGggRXh0cmEgRmllbGRcbiAgICAgICAgICAgIFwiXFx4NzVcXHg3MFwiICtcbiAgICAgICAgICAgIC8vIHNpemVcbiAgICAgICAgICAgIGRlY1RvSGV4KHVuaWNvZGVQYXRoRXh0cmFGaWVsZC5sZW5ndGgsIDIpICtcbiAgICAgICAgICAgIC8vIGNvbnRlbnRcbiAgICAgICAgICAgIHVuaWNvZGVQYXRoRXh0cmFGaWVsZDtcbiAgICB9XG5cbiAgICBpZih1c2VVVEY4Rm9yQ29tbWVudCkge1xuXG4gICAgICAgIHVuaWNvZGVDb21tZW50RXh0cmFGaWVsZCA9XG4gICAgICAgICAgICAvLyBWZXJzaW9uXG4gICAgICAgICAgICBkZWNUb0hleCgxLCAxKSArXG4gICAgICAgICAgICAvLyBDb21tZW50Q1JDMzJcbiAgICAgICAgICAgIGRlY1RvSGV4KHRoaXMuY3JjMzIodXRmRW5jb2RlZENvbW1lbnQpLCA0KSArXG4gICAgICAgICAgICAvLyBVbmljb2RlTmFtZVxuICAgICAgICAgICAgdXRmRW5jb2RlZENvbW1lbnQ7XG5cbiAgICAgICAgZXh0cmFGaWVsZHMgKz1cbiAgICAgICAgICAgIC8vIEluZm8tWklQIFVuaWNvZGUgUGF0aCBFeHRyYSBGaWVsZFxuICAgICAgICAgICAgXCJcXHg3NVxceDYzXCIgK1xuICAgICAgICAgICAgLy8gc2l6ZVxuICAgICAgICAgICAgZGVjVG9IZXgodW5pY29kZUNvbW1lbnRFeHRyYUZpZWxkLmxlbmd0aCwgMikgK1xuICAgICAgICAgICAgLy8gY29udGVudFxuICAgICAgICAgICAgdW5pY29kZUNvbW1lbnRFeHRyYUZpZWxkO1xuICAgIH1cblxuICAgIHZhciBoZWFkZXIgPSBcIlwiO1xuXG4gICAgLy8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdFxuICAgIGhlYWRlciArPSBcIlxceDBBXFx4MDBcIjtcbiAgICAvLyBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWdcbiAgICAvLyBzZXQgYml0IDExIGlmIHV0ZjhcbiAgICBoZWFkZXIgKz0gKHVzZVVURjhGb3JGaWxlTmFtZSB8fCB1c2VVVEY4Rm9yQ29tbWVudCkgPyBcIlxceDAwXFx4MDhcIiA6IFwiXFx4MDBcXHgwMFwiO1xuICAgIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgIGhlYWRlciArPSBjb21wcmVzc2VkT2JqZWN0LmNvbXByZXNzaW9uTWV0aG9kO1xuICAgIC8vIGxhc3QgbW9kIGZpbGUgdGltZVxuICAgIGhlYWRlciArPSBkZWNUb0hleChkb3NUaW1lLCAyKTtcbiAgICAvLyBsYXN0IG1vZCBmaWxlIGRhdGVcbiAgICBoZWFkZXIgKz0gZGVjVG9IZXgoZG9zRGF0ZSwgMik7XG4gICAgLy8gY3JjLTMyXG4gICAgaGVhZGVyICs9IGRlY1RvSGV4KGNvbXByZXNzZWRPYmplY3QuY3JjMzIsIDQpO1xuICAgIC8vIGNvbXByZXNzZWQgc2l6ZVxuICAgIGhlYWRlciArPSBkZWNUb0hleChjb21wcmVzc2VkT2JqZWN0LmNvbXByZXNzZWRTaXplLCA0KTtcbiAgICAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgIGhlYWRlciArPSBkZWNUb0hleChjb21wcmVzc2VkT2JqZWN0LnVuY29tcHJlc3NlZFNpemUsIDQpO1xuICAgIC8vIGZpbGUgbmFtZSBsZW5ndGhcbiAgICBoZWFkZXIgKz0gZGVjVG9IZXgodXRmRW5jb2RlZEZpbGVOYW1lLmxlbmd0aCwgMik7XG4gICAgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG4gICAgaGVhZGVyICs9IGRlY1RvSGV4KGV4dHJhRmllbGRzLmxlbmd0aCwgMik7XG5cblxuICAgIHZhciBmaWxlUmVjb3JkID0gc2lnbmF0dXJlLkxPQ0FMX0ZJTEVfSEVBREVSICsgaGVhZGVyICsgdXRmRW5jb2RlZEZpbGVOYW1lICsgZXh0cmFGaWVsZHM7XG5cbiAgICB2YXIgZGlyUmVjb3JkID0gc2lnbmF0dXJlLkNFTlRSQUxfRklMRV9IRUFERVIgK1xuICAgIC8vIHZlcnNpb24gbWFkZSBieSAoMDA6IERPUylcbiAgICBkZWNUb0hleCh2ZXJzaW9uTWFkZUJ5LCAyKSArXG4gICAgLy8gZmlsZSBoZWFkZXIgKGNvbW1vbiB0byBmaWxlIGFuZCBjZW50cmFsIGRpcmVjdG9yeSlcbiAgICBoZWFkZXIgK1xuICAgIC8vIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICBkZWNUb0hleCh1dGZFbmNvZGVkQ29tbWVudC5sZW5ndGgsIDIpICtcbiAgICAvLyBkaXNrIG51bWJlciBzdGFydFxuICAgIFwiXFx4MDBcXHgwMFwiICtcbiAgICAvLyBpbnRlcm5hbCBmaWxlIGF0dHJpYnV0ZXMgVE9ET1xuICAgIFwiXFx4MDBcXHgwMFwiICtcbiAgICAvLyBleHRlcm5hbCBmaWxlIGF0dHJpYnV0ZXNcbiAgICBkZWNUb0hleChleHRGaWxlQXR0ciwgNCkgK1xuICAgIC8vIHJlbGF0aXZlIG9mZnNldCBvZiBsb2NhbCBoZWFkZXJcbiAgICBkZWNUb0hleChvZmZzZXQsIDQpICtcbiAgICAvLyBmaWxlIG5hbWVcbiAgICB1dGZFbmNvZGVkRmlsZU5hbWUgK1xuICAgIC8vIGV4dHJhIGZpZWxkXG4gICAgZXh0cmFGaWVsZHMgK1xuICAgIC8vIGZpbGUgY29tbWVudFxuICAgIHV0ZkVuY29kZWRDb21tZW50O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZVJlY29yZDogZmlsZVJlY29yZCxcbiAgICAgICAgZGlyUmVjb3JkOiBkaXJSZWNvcmQsXG4gICAgICAgIGNvbXByZXNzZWRPYmplY3Q6IGNvbXByZXNzZWRPYmplY3RcbiAgICB9O1xufTtcblxuXG4vLyByZXR1cm4gdGhlIGFjdHVhbCBwcm90b3R5cGUgb2YgSlNaaXBcbnZhciBvdXQgPSB7XG4gICAgLyoqXG4gICAgICogUmVhZCBhbiBleGlzdGluZyB6aXAgYW5kIG1lcmdlIHRoZSBkYXRhIGluIHRoZSBjdXJyZW50IEpTWmlwIG9iamVjdC5cbiAgICAgKiBUaGUgaW1wbGVtZW50YXRpb24gaXMgaW4ganN6aXAtbG9hZC5qcywgZG9uJ3QgZm9yZ2V0IHRvIGluY2x1ZGUgaXQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IHN0cmVhbSAgVGhlIHN0cmVhbSB0byBsb2FkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBmb3IgbG9hZGluZyB0aGUgc3RyZWFtLlxuICAgICAqICBvcHRpb25zLmJhc2U2NCA6IGlzIHRoZSBzdHJlYW0gaW4gYmFzZTY0ID8gZGVmYXVsdCA6IGZhbHNlXG4gICAgICogQHJldHVybiB7SlNaaXB9IHRoZSBjdXJyZW50IEpTWmlwIG9iamVjdFxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKHN0cmVhbSwgb3B0aW9ucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkIG1ldGhvZCBpcyBub3QgZGVmaW5lZC4gSXMgdGhlIGZpbGUganN6aXAtbG9hZC5qcyBpbmNsdWRlZCA/XCIpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgbmVzdGVkIGZpbGVzL2ZvbGRlcnMgd2l0aCB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlYXJjaCB0aGUgcHJlZGljYXRlIHRvIHVzZSA6XG4gICAgICogZnVuY3Rpb24gKHJlbGF0aXZlUGF0aCwgZmlsZSkgey4uLn1cbiAgICAgKiBJdCB0YWtlcyAyIGFyZ3VtZW50cyA6IHRoZSByZWxhdGl2ZSBwYXRoIGFuZCB0aGUgZmlsZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2YgbWF0Y2hpbmcgZWxlbWVudHMuXG4gICAgICovXG4gICAgZmlsdGVyOiBmdW5jdGlvbihzZWFyY2gpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICAgICAgZmlsZW5hbWUsIHJlbGF0aXZlUGF0aCwgZmlsZSwgZmlsZUNsb25lO1xuICAgICAgICBmb3IgKGZpbGVuYW1lIGluIHRoaXMuZmlsZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5maWxlcy5oYXNPd25Qcm9wZXJ0eShmaWxlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGUgPSB0aGlzLmZpbGVzW2ZpbGVuYW1lXTtcbiAgICAgICAgICAgIC8vIHJldHVybiBhIG5ldyBvYmplY3QsIGRvbid0IGxldCB0aGUgdXNlciBtZXNzIHdpdGggb3VyIGludGVybmFsIG9iamVjdHMgOilcbiAgICAgICAgICAgIGZpbGVDbG9uZSA9IG5ldyBaaXBPYmplY3QoZmlsZS5uYW1lLCBmaWxlLl9kYXRhLCBleHRlbmQoZmlsZS5vcHRpb25zKSk7XG4gICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBmaWxlbmFtZS5zbGljZSh0aGlzLnJvb3QubGVuZ3RoLCBmaWxlbmFtZS5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGZpbGVuYW1lLnNsaWNlKDAsIHRoaXMucm9vdC5sZW5ndGgpID09PSB0aGlzLnJvb3QgJiYgLy8gdGhlIGZpbGUgaXMgaW4gdGhlIGN1cnJlbnQgcm9vdFxuICAgICAgICAgICAgc2VhcmNoKHJlbGF0aXZlUGF0aCwgZmlsZUNsb25lKSkgeyAvLyBhbmQgdGhlIGZpbGUgbWF0Y2hlcyB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChmaWxlQ2xvbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGZpbGUgdG8gdGhlIHppcCBmaWxlLCBvciBzZWFyY2ggYSBmaWxlLlxuICAgICAqIEBwYXJhbSAgIHtzdHJpbmd8UmVnRXhwfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBmaWxlIHRvIGFkZCAoaWYgZGF0YSBpcyBkZWZpbmVkKSxcbiAgICAgKiB0aGUgbmFtZSBvZiB0aGUgZmlsZSB0byBmaW5kIChpZiBubyBkYXRhKSBvciBhIHJlZ2V4IHRvIG1hdGNoIGZpbGVzLlxuICAgICAqIEBwYXJhbSAgIHtTdHJpbmd8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IGRhdGEgIFRoZSBmaWxlIGRhdGEsIGVpdGhlciByYXcgb3IgYmFzZTY0IGVuY29kZWRcbiAgICAgKiBAcGFyYW0gICB7T2JqZWN0fSBvICAgICBGaWxlIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuICB7SlNaaXB8T2JqZWN0fEFycmF5fSB0aGlzIEpTWmlwIG9iamVjdCAod2hlbiBhZGRpbmcgYSBmaWxlKSxcbiAgICAgKiBhIGZpbGUgKHdoZW4gc2VhcmNoaW5nIGJ5IHN0cmluZykgb3IgYW4gYXJyYXkgb2YgZmlsZXMgKHdoZW4gc2VhcmNoaW5nIGJ5IHJlZ2V4KS5cbiAgICAgKi9cbiAgICBmaWxlOiBmdW5jdGlvbihuYW1lLCBkYXRhLCBvKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAodXRpbHMuaXNSZWdFeHAobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnZXhwID0gbmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24ocmVsYXRpdmVQYXRoLCBmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhZmlsZS5kaXIgJiYgcmVnZXhwLnRlc3QocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgeyAvLyB0ZXh0XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKHJlbGF0aXZlUGF0aCwgZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWZpbGUuZGlyICYmIHJlbGF0aXZlUGF0aCA9PT0gbmFtZTtcbiAgICAgICAgICAgICAgICB9KVswXSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAvLyBtb3JlIHRoYW4gb25lIGFyZ3VtZW50IDogd2UgaGF2ZSBkYXRhICFcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnJvb3QgKyBuYW1lO1xuICAgICAgICAgICAgZmlsZUFkZC5jYWxsKHRoaXMsIG5hbWUsIGRhdGEsIG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBkaXJlY3RvcnkgdG8gdGhlIHppcCBmaWxlLCBvciBzZWFyY2guXG4gICAgICogQHBhcmFtICAge1N0cmluZ3xSZWdFeHB9IGFyZyBUaGUgbmFtZSBvZiB0aGUgZGlyZWN0b3J5IHRvIGFkZCwgb3IgYSByZWdleCB0byBzZWFyY2ggZm9sZGVycy5cbiAgICAgKiBAcmV0dXJuICB7SlNaaXB9IGFuIG9iamVjdCB3aXRoIHRoZSBuZXcgZGlyZWN0b3J5IGFzIHRoZSByb290LCBvciBhbiBhcnJheSBjb250YWluaW5nIG1hdGNoaW5nIGZvbGRlcnMuXG4gICAgICovXG4gICAgZm9sZGVyOiBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgaWYgKCFhcmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzUmVnRXhwKGFyZykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihyZWxhdGl2ZVBhdGgsIGZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS5kaXIgJiYgYXJnLnRlc3QocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZWxzZSwgbmFtZSBpcyBhIG5ldyBmb2xkZXJcbiAgICAgICAgdmFyIG5hbWUgPSB0aGlzLnJvb3QgKyBhcmc7XG4gICAgICAgIHZhciBuZXdGb2xkZXIgPSBmb2xkZXJBZGQuY2FsbCh0aGlzLCBuYW1lKTtcblxuICAgICAgICAvLyBBbGxvdyBjaGFpbmluZyBieSByZXR1cm5pbmcgYSBuZXcgb2JqZWN0IHdpdGggdGhpcyBmb2xkZXIgYXMgdGhlIHJvb3RcbiAgICAgICAgdmFyIHJldCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgcmV0LnJvb3QgPSBuZXdGb2xkZXIubmFtZTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgZmlsZSwgb3IgYSBkaXJlY3RvcnkgYW5kIGFsbCBzdWItZmlsZXMsIGZyb20gdGhlIHppcFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWxlIHRvIGRlbGV0ZVxuICAgICAqIEByZXR1cm4ge0pTWmlwfSB0aGlzIEpTWmlwIG9iamVjdFxuICAgICAqL1xuICAgIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBuYW1lID0gdGhpcy5yb290ICsgbmFtZTtcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzW25hbWVdO1xuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIC8vIExvb2sgZm9yIGFueSBmb2xkZXJzXG4gICAgICAgICAgICBpZiAobmFtZS5zbGljZSgtMSkgIT0gXCIvXCIpIHtcbiAgICAgICAgICAgICAgICBuYW1lICs9IFwiL1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlsZSA9IHRoaXMuZmlsZXNbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZSAmJiAhZmlsZS5kaXIpIHtcbiAgICAgICAgICAgIC8vIGZpbGVcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmZpbGVzW25hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbWF5YmUgYSBmb2xkZXIsIGRlbGV0ZSByZWN1cnNpdmVseVxuICAgICAgICAgICAgdmFyIGtpZHMgPSB0aGlzLmZpbHRlcihmdW5jdGlvbihyZWxhdGl2ZVBhdGgsIGZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lLnNsaWNlKDAsIG5hbWUubGVuZ3RoKSA9PT0gbmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBraWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmlsZXNba2lkc1tpXS5uYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSB0aGUgY29tcGxldGUgemlwIGZpbGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgb3B0aW9ucyB0byBnZW5lcmF0ZSB0aGUgemlwIGZpbGUgOlxuICAgICAqIC0gYmFzZTY0LCAoZGVwcmVjYXRlZCwgdXNlIHR5cGUgaW5zdGVhZCkgdHJ1ZSB0byBnZW5lcmF0ZSBiYXNlNjQuXG4gICAgICogLSBjb21wcmVzc2lvbiwgXCJTVE9SRVwiIGJ5IGRlZmF1bHQuXG4gICAgICogLSB0eXBlLCBcImJhc2U2NFwiIGJ5IGRlZmF1bHQuIFZhbHVlcyBhcmUgOiBzdHJpbmcsIGJhc2U2NCwgdWludDhhcnJheSwgYXJyYXlidWZmZXIsIGJsb2IuXG4gICAgICogQHJldHVybiB7U3RyaW5nfFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ8QnVmZmVyfEJsb2J9IHRoZSB6aXAgZmlsZVxuICAgICAqL1xuICAgIGdlbmVyYXRlOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBleHRlbmQob3B0aW9ucyB8fCB7fSwge1xuICAgICAgICAgICAgYmFzZTY0OiB0cnVlLFxuICAgICAgICAgICAgY29tcHJlc3Npb246IFwiU1RPUkVcIixcbiAgICAgICAgICAgIGNvbXByZXNzaW9uT3B0aW9ucyA6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgcGxhdGZvcm06IFwiRE9TXCIsXG4gICAgICAgICAgICBjb21tZW50OiBudWxsLFxuICAgICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi96aXAnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHV0aWxzLmNoZWNrU3VwcG9ydChvcHRpb25zLnR5cGUpO1xuXG4gICAgICAgIC8vIGFjY2VwdCBub2RlanMgYHByb2Nlc3MucGxhdGZvcm1gXG4gICAgICAgIGlmKFxuICAgICAgICAgIG9wdGlvbnMucGxhdGZvcm0gPT09ICdkYXJ3aW4nIHx8XG4gICAgICAgICAgb3B0aW9ucy5wbGF0Zm9ybSA9PT0gJ2ZyZWVic2QnIHx8XG4gICAgICAgICAgb3B0aW9ucy5wbGF0Zm9ybSA9PT0gJ2xpbnV4JyB8fFxuICAgICAgICAgIG9wdGlvbnMucGxhdGZvcm0gPT09ICdzdW5vcydcbiAgICAgICAgKSB7XG4gICAgICAgICAgb3B0aW9ucy5wbGF0Zm9ybSA9IFwiVU5JWFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnBsYXRmb3JtID09PSAnd2luMzInKSB7XG4gICAgICAgICAgb3B0aW9ucy5wbGF0Zm9ybSA9IFwiRE9TXCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgemlwRGF0YSA9IFtdLFxuICAgICAgICAgICAgbG9jYWxEaXJMZW5ndGggPSAwLFxuICAgICAgICAgICAgY2VudHJhbERpckxlbmd0aCA9IDAsXG4gICAgICAgICAgICB3cml0ZXIsIGksXG4gICAgICAgICAgICB1dGZFbmNvZGVkQ29tbWVudCA9IHV0aWxzLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsIHRoaXMudXRmOGVuY29kZShvcHRpb25zLmNvbW1lbnQgfHwgdGhpcy5jb21tZW50IHx8IFwiXCIpKTtcblxuICAgICAgICAvLyBmaXJzdCwgZ2VuZXJhdGUgYWxsIHRoZSB6aXAgcGFydHMuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5maWxlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbbmFtZV07XG5cbiAgICAgICAgICAgIHZhciBjb21wcmVzc2lvbk5hbWUgPSBmaWxlLm9wdGlvbnMuY29tcHJlc3Npb24gfHwgb3B0aW9ucy5jb21wcmVzc2lvbi50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgdmFyIGNvbXByZXNzaW9uID0gY29tcHJlc3Npb25zW2NvbXByZXNzaW9uTmFtZV07XG4gICAgICAgICAgICBpZiAoIWNvbXByZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNvbXByZXNzaW9uTmFtZSArIFwiIGlzIG5vdCBhIHZhbGlkIGNvbXByZXNzaW9uIG1ldGhvZCAhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbXByZXNzaW9uT3B0aW9ucyA9IGZpbGUub3B0aW9ucy5jb21wcmVzc2lvbk9wdGlvbnMgfHwgb3B0aW9ucy5jb21wcmVzc2lvbk9wdGlvbnMgfHwge307XG5cbiAgICAgICAgICAgIHZhciBjb21wcmVzc2VkT2JqZWN0ID0gZ2VuZXJhdGVDb21wcmVzc2VkT2JqZWN0RnJvbS5jYWxsKHRoaXMsIGZpbGUsIGNvbXByZXNzaW9uLCBjb21wcmVzc2lvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICB2YXIgemlwUGFydCA9IGdlbmVyYXRlWmlwUGFydHMuY2FsbCh0aGlzLCBuYW1lLCBmaWxlLCBjb21wcmVzc2VkT2JqZWN0LCBsb2NhbERpckxlbmd0aCwgb3B0aW9ucy5wbGF0Zm9ybSk7XG4gICAgICAgICAgICBsb2NhbERpckxlbmd0aCArPSB6aXBQYXJ0LmZpbGVSZWNvcmQubGVuZ3RoICsgY29tcHJlc3NlZE9iamVjdC5jb21wcmVzc2VkU2l6ZTtcbiAgICAgICAgICAgIGNlbnRyYWxEaXJMZW5ndGggKz0gemlwUGFydC5kaXJSZWNvcmQubGVuZ3RoO1xuICAgICAgICAgICAgemlwRGF0YS5wdXNoKHppcFBhcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpckVuZCA9IFwiXCI7XG5cbiAgICAgICAgLy8gZW5kIG9mIGNlbnRyYWwgZGlyIHNpZ25hdHVyZVxuICAgICAgICBkaXJFbmQgPSBzaWduYXR1cmUuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EICtcbiAgICAgICAgLy8gbnVtYmVyIG9mIHRoaXMgZGlza1xuICAgICAgICBcIlxceDAwXFx4MDBcIiArXG4gICAgICAgIC8vIG51bWJlciBvZiB0aGUgZGlzayB3aXRoIHRoZSBzdGFydCBvZiB0aGUgY2VudHJhbCBkaXJlY3RvcnlcbiAgICAgICAgXCJcXHgwMFxceDAwXCIgK1xuICAgICAgICAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllcyBpbiB0aGUgY2VudHJhbCBkaXJlY3Rvcnkgb24gdGhpcyBkaXNrXG4gICAgICAgIGRlY1RvSGV4KHppcERhdGEubGVuZ3RoLCAyKSArXG4gICAgICAgIC8vIHRvdGFsIG51bWJlciBvZiBlbnRyaWVzIGluIHRoZSBjZW50cmFsIGRpcmVjdG9yeVxuICAgICAgICBkZWNUb0hleCh6aXBEYXRhLmxlbmd0aCwgMikgK1xuICAgICAgICAvLyBzaXplIG9mIHRoZSBjZW50cmFsIGRpcmVjdG9yeSAgIDQgYnl0ZXNcbiAgICAgICAgZGVjVG9IZXgoY2VudHJhbERpckxlbmd0aCwgNCkgK1xuICAgICAgICAvLyBvZmZzZXQgb2Ygc3RhcnQgb2YgY2VudHJhbCBkaXJlY3Rvcnkgd2l0aCByZXNwZWN0IHRvIHRoZSBzdGFydGluZyBkaXNrIG51bWJlclxuICAgICAgICBkZWNUb0hleChsb2NhbERpckxlbmd0aCwgNCkgK1xuICAgICAgICAvLyAuWklQIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICAgICAgZGVjVG9IZXgodXRmRW5jb2RlZENvbW1lbnQubGVuZ3RoLCAyKSArXG4gICAgICAgIC8vIC5aSVAgZmlsZSBjb21tZW50XG4gICAgICAgIHV0ZkVuY29kZWRDb21tZW50O1xuXG5cbiAgICAgICAgLy8gd2UgaGF2ZSBhbGwgdGhlIHBhcnRzIChhbmQgdGhlIHRvdGFsIGxlbmd0aClcbiAgICAgICAgLy8gdGltZSB0byBjcmVhdGUgYSB3cml0ZXIgIVxuICAgICAgICB2YXIgdHlwZU5hbWUgPSBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYodHlwZU5hbWU9PT1cInVpbnQ4YXJyYXlcInx8dHlwZU5hbWU9PT1cImFycmF5YnVmZmVyXCJ8fHR5cGVOYW1lPT09XCJibG9iXCJ8fHR5cGVOYW1lPT09XCJub2RlYnVmZmVyXCIpIHtcbiAgICAgICAgICAgIHdyaXRlciA9IG5ldyBVaW50OEFycmF5V3JpdGVyKGxvY2FsRGlyTGVuZ3RoICsgY2VudHJhbERpckxlbmd0aCArIGRpckVuZC5sZW5ndGgpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHdyaXRlciA9IG5ldyBTdHJpbmdXcml0ZXIobG9jYWxEaXJMZW5ndGggKyBjZW50cmFsRGlyTGVuZ3RoICsgZGlyRW5kLmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgemlwRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgd3JpdGVyLmFwcGVuZCh6aXBEYXRhW2ldLmZpbGVSZWNvcmQpO1xuICAgICAgICAgICAgd3JpdGVyLmFwcGVuZCh6aXBEYXRhW2ldLmNvbXByZXNzZWRPYmplY3QuY29tcHJlc3NlZENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB6aXBEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB3cml0ZXIuYXBwZW5kKHppcERhdGFbaV0uZGlyUmVjb3JkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdyaXRlci5hcHBlbmQoZGlyRW5kKTtcblxuICAgICAgICB2YXIgemlwID0gd3JpdGVyLmZpbmFsaXplKCk7XG5cblxuXG4gICAgICAgIHN3aXRjaChvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgLy8gY2FzZSBcInppcCBpcyBhbiBVaW50OEFycmF5XCJcbiAgICAgICAgICAgIGNhc2UgXCJ1aW50OGFycmF5XCIgOlxuICAgICAgICAgICAgY2FzZSBcImFycmF5YnVmZmVyXCIgOlxuICAgICAgICAgICAgY2FzZSBcIm5vZGVidWZmZXJcIiA6XG4gICAgICAgICAgICAgICByZXR1cm4gdXRpbHMudHJhbnNmb3JtVG8ob3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKCksIHppcCk7XG4gICAgICAgICAgICBjYXNlIFwiYmxvYlwiIDpcbiAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5hcnJheUJ1ZmZlcjJCbG9iKHV0aWxzLnRyYW5zZm9ybVRvKFwiYXJyYXlidWZmZXJcIiwgemlwKSwgb3B0aW9ucy5taW1lVHlwZSk7XG4gICAgICAgICAgICAvLyBjYXNlIFwiemlwIGlzIGEgc3RyaW5nXCJcbiAgICAgICAgICAgIGNhc2UgXCJiYXNlNjRcIiA6XG4gICAgICAgICAgICAgICByZXR1cm4gKG9wdGlvbnMuYmFzZTY0KSA/IGJhc2U2NC5lbmNvZGUoemlwKSA6IHppcDtcbiAgICAgICAgICAgIGRlZmF1bHQgOiAvLyBjYXNlIFwic3RyaW5nXCIgOlxuICAgICAgICAgICAgICAgcmV0dXJuIHppcDtcbiAgICAgICAgIH1cblxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIHdpdGhvdXQgcmVwbGFjZW1lbnQuXG4gICAgICovXG4gICAgY3JjMzI6IGZ1bmN0aW9uIChpbnB1dCwgY3JjKSB7XG4gICAgICAgIHJldHVybiBjcmMzMihpbnB1dCwgY3JjKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiB3aXRob3V0IHJlcGxhY2VtZW50LlxuICAgICAqL1xuICAgIHV0ZjhlbmNvZGU6IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHV0aWxzLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsIHV0ZjgudXRmOGVuY29kZShzdHJpbmcpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiB3aXRob3V0IHJlcGxhY2VtZW50LlxuICAgICAqL1xuICAgIHV0ZjhkZWNvZGU6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gdXRmOC51dGY4ZGVjb2RlKGlucHV0KTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBvdXQ7XG5cbn0se1wiLi9iYXNlNjRcIjoxMixcIi4vY29tcHJlc3NlZE9iamVjdFwiOjEzLFwiLi9jb21wcmVzc2lvbnNcIjoxNCxcIi4vY3JjMzJcIjoxNSxcIi4vZGVmYXVsdHNcIjoxNyxcIi4vbm9kZUJ1ZmZlclwiOjIyLFwiLi9zaWduYXR1cmVcIjoyNSxcIi4vc3RyaW5nV3JpdGVyXCI6MjcsXCIuL3N1cHBvcnRcIjoyOCxcIi4vdWludDhBcnJheVdyaXRlclwiOjMwLFwiLi91dGY4XCI6MzEsXCIuL3V0aWxzXCI6MzJ9XSwyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5leHBvcnRzLkxPQ0FMX0ZJTEVfSEVBREVSID0gXCJQS1xceDAzXFx4MDRcIjtcbmV4cG9ydHMuQ0VOVFJBTF9GSUxFX0hFQURFUiA9IFwiUEtcXHgwMVxceDAyXCI7XG5leHBvcnRzLkNFTlRSQUxfRElSRUNUT1JZX0VORCA9IFwiUEtcXHgwNVxceDA2XCI7XG5leHBvcnRzLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IgPSBcIlBLXFx4MDZcXHgwN1wiO1xuZXhwb3J0cy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQgPSBcIlBLXFx4MDZcXHgwNlwiO1xuZXhwb3J0cy5EQVRBX0RFU0NSSVBUT1IgPSBcIlBLXFx4MDdcXHgwOFwiO1xuXG59LHt9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgRGF0YVJlYWRlciA9IHJlcXVpcmUoJy4vZGF0YVJlYWRlcicpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG5mdW5jdGlvbiBTdHJpbmdSZWFkZXIoZGF0YSwgb3B0aW1pemVkQmluYXJ5U3RyaW5nKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICBpZiAoIW9wdGltaXplZEJpbmFyeVN0cmluZykge1xuICAgICAgICB0aGlzLmRhdGEgPSB1dGlscy5zdHJpbmcyYmluYXJ5KHRoaXMuZGF0YSk7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICB0aGlzLmluZGV4ID0gMDtcbn1cblN0cmluZ1JlYWRlci5wcm90b3R5cGUgPSBuZXcgRGF0YVJlYWRlcigpO1xuLyoqXG4gKiBAc2VlIERhdGFSZWFkZXIuYnl0ZUF0XG4gKi9cblN0cmluZ1JlYWRlci5wcm90b3R5cGUuYnl0ZUF0ID0gZnVuY3Rpb24oaSkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdChpKTtcbn07XG4vKipcbiAqIEBzZWUgRGF0YVJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZVxuICovXG5TdHJpbmdSZWFkZXIucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlID0gZnVuY3Rpb24oc2lnKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5sYXN0SW5kZXhPZihzaWcpO1xufTtcbi8qKlxuICogQHNlZSBEYXRhUmVhZGVyLnJlYWREYXRhXG4gKi9cblN0cmluZ1JlYWRlci5wcm90b3R5cGUucmVhZERhdGEgPSBmdW5jdGlvbihzaXplKSB7XG4gICAgdGhpcy5jaGVja09mZnNldChzaXplKTtcbiAgICAvLyB0aGlzIHdpbGwgd29yayBiZWNhdXNlIHRoZSBjb25zdHJ1Y3RvciBhcHBsaWVkIHRoZSBcIiYgMHhmZlwiIG1hc2suXG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0YS5zbGljZSh0aGlzLmluZGV4LCB0aGlzLmluZGV4ICsgc2l6ZSk7XG4gICAgdGhpcy5pbmRleCArPSBzaXplO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTdHJpbmdSZWFkZXI7XG5cbn0se1wiLi9kYXRhUmVhZGVyXCI6MTYsXCIuL3V0aWxzXCI6MzJ9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gd3JpdGUgYW55IGNvbnRlbnQgdG8gYSBzdHJpbmcuXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIFN0cmluZ1dyaXRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZGF0YSA9IFtdO1xufTtcblN0cmluZ1dyaXRlci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogQXBwZW5kIGFueSBjb250ZW50IHRvIHRoZSBjdXJyZW50IHN0cmluZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXQgdGhlIGNvbnRlbnQgdG8gYWRkLlxuICAgICAqL1xuICAgIGFwcGVuZDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaW5wdXQgPSB1dGlscy50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLCBpbnB1dCk7XG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKGlucHV0KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEZpbmFsaXplIHRoZSBjb25zdHJ1Y3Rpb24gYW4gcmV0dXJuIHRoZSByZXN1bHQuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSB0aGUgZ2VuZXJhdGVkIHN0cmluZy5cbiAgICAgKi9cbiAgICBmaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuam9pbihcIlwiKTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmluZ1dyaXRlcjtcblxufSx7XCIuL3V0aWxzXCI6MzJ9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKEJ1ZmZlcil7XG4ndXNlIHN0cmljdCc7XG5leHBvcnRzLmJhc2U2NCA9IHRydWU7XG5leHBvcnRzLmFycmF5ID0gdHJ1ZTtcbmV4cG9ydHMuc3RyaW5nID0gdHJ1ZTtcbmV4cG9ydHMuYXJyYXlidWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIFVpbnQ4QXJyYXkgIT09IFwidW5kZWZpbmVkXCI7XG4vLyBjb250YWlucyB0cnVlIGlmIEpTWmlwIGNhbiByZWFkL2dlbmVyYXRlIG5vZGVqcyBCdWZmZXIsIGZhbHNlIG90aGVyd2lzZS5cbi8vIEJyb3dzZXJpZnkgd2lsbCBwcm92aWRlIGEgQnVmZmVyIGltcGxlbWVudGF0aW9uIGZvciBicm93c2Vycywgd2hpY2ggaXNcbi8vIGFuIGF1Z21lbnRlZCBVaW50OEFycmF5IChpLmUuLCBjYW4gYmUgdXNlZCBhcyBlaXRoZXIgQnVmZmVyIG9yIFU4KS5cbmV4cG9ydHMubm9kZWJ1ZmZlciA9IHR5cGVvZiBCdWZmZXIgIT09IFwidW5kZWZpbmVkXCI7XG4vLyBjb250YWlucyB0cnVlIGlmIEpTWmlwIGNhbiByZWFkL2dlbmVyYXRlIFVpbnQ4QXJyYXksIGZhbHNlIG90aGVyd2lzZS5cbmV4cG9ydHMudWludDhhcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSBcInVuZGVmaW5lZFwiO1xuXG5pZiAodHlwZW9mIEFycmF5QnVmZmVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgZXhwb3J0cy5ibG9iID0gZmFsc2U7XG59XG5lbHNlIHtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgIHRyeSB7XG4gICAgICAgIGV4cG9ydHMuYmxvYiA9IG5ldyBCbG9iKFtidWZmZXJdLCB7XG4gICAgICAgICAgICB0eXBlOiBcImFwcGxpY2F0aW9uL3ppcFwiXG4gICAgICAgIH0pLnNpemUgPT09IDA7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgQnVpbGRlciA9IHdpbmRvdy5CbG9iQnVpbGRlciB8fCB3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgd2luZG93Lk1vekJsb2JCdWlsZGVyIHx8IHdpbmRvdy5NU0Jsb2JCdWlsZGVyO1xuICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgQnVpbGRlcigpO1xuICAgICAgICAgICAgYnVpbGRlci5hcHBlbmQoYnVmZmVyKTtcbiAgICAgICAgICAgIGV4cG9ydHMuYmxvYiA9IGJ1aWxkZXIuZ2V0QmxvYignYXBwbGljYXRpb24vemlwJykuc2l6ZSA9PT0gMDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXhwb3J0cy5ibG9iID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKFwiYnVmZmVyXCIpLkJ1ZmZlcilcbn0se1wiYnVmZmVyXCI6M31dLDI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBEYXRhUmVhZGVyID0gcmVxdWlyZSgnLi9kYXRhUmVhZGVyJyk7XG5cbmZ1bmN0aW9uIFVpbnQ4QXJyYXlSZWFkZXIoZGF0YSkge1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxufVxuVWludDhBcnJheVJlYWRlci5wcm90b3R5cGUgPSBuZXcgRGF0YVJlYWRlcigpO1xuLyoqXG4gKiBAc2VlIERhdGFSZWFkZXIuYnl0ZUF0XG4gKi9cblVpbnQ4QXJyYXlSZWFkZXIucHJvdG90eXBlLmJ5dGVBdCA9IGZ1bmN0aW9uKGkpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhW2ldO1xufTtcbi8qKlxuICogQHNlZSBEYXRhUmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlXG4gKi9cblVpbnQ4QXJyYXlSZWFkZXIucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlID0gZnVuY3Rpb24oc2lnKSB7XG4gICAgdmFyIHNpZzAgPSBzaWcuY2hhckNvZGVBdCgwKSxcbiAgICAgICAgc2lnMSA9IHNpZy5jaGFyQ29kZUF0KDEpLFxuICAgICAgICBzaWcyID0gc2lnLmNoYXJDb2RlQXQoMiksXG4gICAgICAgIHNpZzMgPSBzaWcuY2hhckNvZGVBdCgzKTtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSA0OyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAodGhpcy5kYXRhW2ldID09PSBzaWcwICYmIHRoaXMuZGF0YVtpICsgMV0gPT09IHNpZzEgJiYgdGhpcy5kYXRhW2kgKyAyXSA9PT0gc2lnMiAmJiB0aGlzLmRhdGFbaSArIDNdID09PSBzaWczKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAtMTtcbn07XG4vKipcbiAqIEBzZWUgRGF0YVJlYWRlci5yZWFkRGF0YVxuICovXG5VaW50OEFycmF5UmVhZGVyLnByb3RvdHlwZS5yZWFkRGF0YSA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgICB0aGlzLmNoZWNrT2Zmc2V0KHNpemUpO1xuICAgIGlmKHNpemUgPT09IDApIHtcbiAgICAgICAgLy8gaW4gSUUxMCwgd2hlbiB1c2luZyBzdWJhcnJheShpZHgsIGlkeCksIHdlIGdldCB0aGUgYXJyYXkgWzB4MDBdIGluc3RlYWQgb2YgW10uXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLmluZGV4LCB0aGlzLmluZGV4ICsgc2l6ZSk7XG4gICAgdGhpcy5pbmRleCArPSBzaXplO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBVaW50OEFycmF5UmVhZGVyO1xuXG59LHtcIi4vZGF0YVJlYWRlclwiOjE2fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIHdyaXRlIGFueSBjb250ZW50IHRvIGFuIFVpbnQ4QXJyYXkuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggVGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gKi9cbnZhciBVaW50OEFycmF5V3JpdGVyID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdGhpcy5kYXRhID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICB0aGlzLmluZGV4ID0gMDtcbn07XG5VaW50OEFycmF5V3JpdGVyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBBcHBlbmQgYW55IGNvbnRlbnQgdG8gdGhlIGN1cnJlbnQgYXJyYXkuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0IHRoZSBjb250ZW50IHRvIGFkZC5cbiAgICAgKi9cbiAgICBhcHBlbmQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIC8vIHdpdGggYW4gZW1wdHkgVWludDhBcnJheSwgT3BlcmEgZmFpbHMgd2l0aCBhIFwiT2Zmc2V0IGxhcmdlciB0aGFuIGFycmF5IHNpemVcIlxuICAgICAgICAgICAgaW5wdXQgPSB1dGlscy50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIiwgaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLnNldChpbnB1dCwgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICB0aGlzLmluZGV4ICs9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogRmluYWxpemUgdGhlIGNvbnN0cnVjdGlvbiBhbiByZXR1cm4gdGhlIHJlc3VsdC5cbiAgICAgKiBAcmV0dXJuIHtVaW50OEFycmF5fSB0aGUgZ2VuZXJhdGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZpbmFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFVpbnQ4QXJyYXlXcml0ZXI7XG5cbn0se1wiLi91dGlsc1wiOjMyfV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpO1xudmFyIG5vZGVCdWZmZXIgPSByZXF1aXJlKCcuL25vZGVCdWZmZXInKTtcblxuLyoqXG4gKiBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBjb21lIGZyb20gcGFrbywgZnJvbSBwYWtvL2xpYi91dGlscy9zdHJpbmdzXG4gKiByZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UsIHNlZSBwYWtvIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrby9cbiAqL1xuXG4vLyBUYWJsZSB3aXRoIHV0ZjggbGVuZ3RocyAoY2FsY3VsYXRlZCBieSBmaXJzdCBieXRlIG9mIHNlcXVlbmNlKVxuLy8gTm90ZSwgdGhhdCA1ICYgNi1ieXRlIHZhbHVlcyBhbmQgc29tZSA0LWJ5dGUgdmFsdWVzIGNhbiBub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlMsXG4vLyBiZWNhdXNlIG1heCBwb3NzaWJsZSBjb2RlcG9pbnQgaXMgMHgxMGZmZmZcbnZhciBfdXRmOGxlbiA9IG5ldyBBcnJheSgyNTYpO1xuZm9yICh2YXIgaT0wOyBpPDI1NjsgaSsrKSB7XG4gIF91dGY4bGVuW2ldID0gKGkgPj0gMjUyID8gNiA6IGkgPj0gMjQ4ID8gNSA6IGkgPj0gMjQwID8gNCA6IGkgPj0gMjI0ID8gMyA6IGkgPj0gMTkyID8gMiA6IDEpO1xufVxuX3V0ZjhsZW5bMjU0XT1fdXRmOGxlblsyNTRdPTE7IC8vIEludmFsaWQgc2VxdWVuY2Ugc3RhcnRcblxuLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKVxudmFyIHN0cmluZzJidWYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgdmFyIGJ1ZiwgYywgYzIsIG1fcG9zLCBpLCBzdHJfbGVuID0gc3RyLmxlbmd0aCwgYnVmX2xlbiA9IDA7XG5cbiAgICAvLyBjb3VudCBiaW5hcnkgc2l6ZVxuICAgIGZvciAobV9wb3MgPSAwOyBtX3BvcyA8IHN0cl9sZW47IG1fcG9zKyspIHtcbiAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTtcbiAgICAgICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcysxIDwgc3RyX2xlbikpIHtcbiAgICAgICAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MrMSk7XG4gICAgICAgICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XG4gICAgICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7XG4gICAgICAgICAgICAgICAgbV9wb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBidWZfbGVuICs9IGMgPCAweDgwID8gMSA6IGMgPCAweDgwMCA/IDIgOiBjIDwgMHgxMDAwMCA/IDMgOiA0O1xuICAgIH1cblxuICAgIC8vIGFsbG9jYXRlIGJ1ZmZlclxuICAgIGlmIChzdXBwb3J0LnVpbnQ4YXJyYXkpIHtcbiAgICAgICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYnVmX2xlbik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnVmID0gbmV3IEFycmF5KGJ1Zl9sZW4pO1xuICAgIH1cblxuICAgIC8vIGNvbnZlcnRcbiAgICBmb3IgKGk9MCwgbV9wb3MgPSAwOyBpIDwgYnVmX2xlbjsgbV9wb3MrKykge1xuICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpO1xuICAgICAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zKzEgPCBzdHJfbGVuKSkge1xuICAgICAgICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcysxKTtcbiAgICAgICAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTtcbiAgICAgICAgICAgICAgICBtX3BvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgICAgICAgLyogb25lIGJ5dGUgKi9cbiAgICAgICAgICAgIGJ1ZltpKytdID0gYztcbiAgICAgICAgfSBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgICAgICAgIC8qIHR3byBieXRlcyAqL1xuICAgICAgICAgICAgYnVmW2krK10gPSAweEMwIHwgKGMgPj4+IDYpO1xuICAgICAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICAgICAgfSBlbHNlIGlmIChjIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgLyogdGhyZWUgYnl0ZXMgKi9cbiAgICAgICAgICAgIGJ1ZltpKytdID0gMHhFMCB8IChjID4+PiAxMik7XG4gICAgICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpO1xuICAgICAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8qIGZvdXIgYnl0ZXMgKi9cbiAgICAgICAgICAgIGJ1ZltpKytdID0gMHhmMCB8IChjID4+PiAxOCk7XG4gICAgICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTtcbiAgICAgICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7XG4gICAgICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1Zjtcbn07XG5cbi8vIENhbGN1bGF0ZSBtYXggcG9zc2libGUgcG9zaXRpb24gaW4gdXRmOCBidWZmZXIsXG4vLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlXG4vLyAtICh2ZXJ5IHNtYWxsIGxpbWl0cykgcmV0dXJuIG1heCBzaXplIGFzIGlzLlxuLy9cbi8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheVxuLy8gbWF4ICAgLSBsZW5ndGggbGltaXQgKG1hbmRhdG9yeSk7XG52YXIgdXRmOGJvcmRlciA9IGZ1bmN0aW9uKGJ1ZiwgbWF4KSB7XG4gICAgdmFyIHBvcztcblxuICAgIG1heCA9IG1heCB8fCBidWYubGVuZ3RoO1xuICAgIGlmIChtYXggPiBidWYubGVuZ3RoKSB7IG1heCA9IGJ1Zi5sZW5ndGg7IH1cblxuICAgIC8vIGdvIGJhY2sgZnJvbSBsYXN0IHBvc2l0aW9uLCB1bnRpbCBzdGFydCBvZiBzZXF1ZW5jZSBmb3VuZFxuICAgIHBvcyA9IG1heC0xO1xuICAgIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAweEMwKSA9PT0gMHg4MCkgeyBwb3MtLTsgfVxuXG4gICAgLy8gRnVja3VwIC0gdmVyeSBzbWFsbCBhbmQgYnJva2VuIHNlcXVlbmNlLFxuICAgIC8vIHJldHVybiBtYXgsIGJlY2F1c2Ugd2Ugc2hvdWxkIHJldHVybiBzb21ldGhpbmcgYW55d2F5LlxuICAgIGlmIChwb3MgPCAwKSB7IHJldHVybiBtYXg7IH1cblxuICAgIC8vIElmIHdlIGNhbWUgdG8gc3RhcnQgb2YgYnVmZmVyIC0gdGhhdCBtZWFucyB2dWZmZXIgaXMgdG9vIHNtYWxsLFxuICAgIC8vIHJldHVybiBtYXggdG9vLlxuICAgIGlmIChwb3MgPT09IDApIHsgcmV0dXJuIG1heDsgfVxuXG4gICAgcmV0dXJuIChwb3MgKyBfdXRmOGxlbltidWZbcG9zXV0gPiBtYXgpID8gcG9zIDogbWF4O1xufTtcblxuLy8gY29udmVydCBhcnJheSB0byBzdHJpbmdcbnZhciBidWYyc3RyaW5nID0gZnVuY3Rpb24gKGJ1Zikge1xuICAgIHZhciBzdHIsIGksIG91dCwgYywgY19sZW47XG4gICAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7XG5cbiAgICAvLyBSZXNlcnZlIG1heCBwb3NzaWJsZSBsZW5ndGggKDIgd29yZHMgcGVyIGNoYXIpXG4gICAgLy8gTkI6IGJ5IHVua25vd24gcmVhc29ucywgQXJyYXkgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgZm9yXG4gICAgLy8gICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgdGhhbiBVaW50MTZBcnJheS5cbiAgICB2YXIgdXRmMTZidWYgPSBuZXcgQXJyYXkobGVuKjIpO1xuXG4gICAgZm9yIChvdXQ9MCwgaT0wOyBpPGxlbjspIHtcbiAgICAgICAgYyA9IGJ1ZltpKytdO1xuICAgICAgICAvLyBxdWljayBwcm9jZXNzIGFzY2lpXG4gICAgICAgIGlmIChjIDwgMHg4MCkgeyB1dGYxNmJ1ZltvdXQrK10gPSBjOyBjb250aW51ZTsgfVxuXG4gICAgICAgIGNfbGVuID0gX3V0ZjhsZW5bY107XG4gICAgICAgIC8vIHNraXAgNSAmIDYgYnl0ZSBjb2Rlc1xuICAgICAgICBpZiAoY19sZW4gPiA0KSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgaSArPSBjX2xlbi0xOyBjb250aW51ZTsgfVxuXG4gICAgICAgIC8vIGFwcGx5IG1hc2sgb24gZmlyc3QgYnl0ZVxuICAgICAgICBjICY9IGNfbGVuID09PSAyID8gMHgxZiA6IGNfbGVuID09PSAzID8gMHgwZiA6IDB4MDc7XG4gICAgICAgIC8vIGpvaW4gdGhlIHJlc3RcbiAgICAgICAgd2hpbGUgKGNfbGVuID4gMSAmJiBpIDwgbGVuKSB7XG4gICAgICAgICAgICBjID0gKGMgPDwgNikgfCAoYnVmW2krK10gJiAweDNmKTtcbiAgICAgICAgICAgIGNfbGVuLS07XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0ZXJtaW5hdGVkIGJ5IGVuZCBvZiBzdHJpbmc/XG4gICAgICAgIGlmIChjX2xlbiA+IDEpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBjb250aW51ZTsgfVxuXG4gICAgICAgIGlmIChjIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgdXRmMTZidWZbb3V0KytdID0gYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMgLT0gMHgxMDAwMDtcbiAgICAgICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZDgwMCB8ICgoYyA+PiAxMCkgJiAweDNmZik7XG4gICAgICAgICAgICB1dGYxNmJ1ZltvdXQrK10gPSAweGRjMDAgfCAoYyAmIDB4M2ZmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNocmlua0J1Zih1dGYxNmJ1Ziwgb3V0KVxuICAgIGlmICh1dGYxNmJ1Zi5sZW5ndGggIT09IG91dCkge1xuICAgICAgICBpZih1dGYxNmJ1Zi5zdWJhcnJheSkge1xuICAgICAgICAgICAgdXRmMTZidWYgPSB1dGYxNmJ1Zi5zdWJhcnJheSgwLCBvdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXRmMTZidWYubGVuZ3RoID0gb3V0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdXRmMTZidWYpO1xuICAgIHJldHVybiB1dGlscy5hcHBseUZyb21DaGFyQ29kZSh1dGYxNmJ1Zik7XG59O1xuXG5cbi8vIFRoYXQncyBhbGwgZm9yIHRoZSBwYWtvIGZ1bmN0aW9ucy5cblxuXG4vKipcbiAqIFRyYW5zZm9ybSBhIGphdmFzY3JpcHQgc3RyaW5nIGludG8gYW4gYXJyYXkgKHR5cGVkIGlmIHBvc3NpYmxlKSBvZiBieXRlcyxcbiAqIFVURi04IGVuY29kZWQuXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcmV0dXJuIHtBcnJheXxVaW50OEFycmF5fEJ1ZmZlcn0gdGhlIFVURi04IGVuY29kZWQgc3RyaW5nLlxuICovXG5leHBvcnRzLnV0ZjhlbmNvZGUgPSBmdW5jdGlvbiB1dGY4ZW5jb2RlKHN0cikge1xuICAgIGlmIChzdXBwb3J0Lm5vZGVidWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVCdWZmZXIoc3RyLCBcInV0Zi04XCIpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHJpbmcyYnVmKHN0cik7XG59O1xuXG5cbi8qKlxuICogVHJhbnNmb3JtIGEgYnl0ZXMgYXJyYXkgKG9yIGEgcmVwcmVzZW50YXRpb24pIHJlcHJlc2VudGluZyBhbiBVVEYtOCBlbmNvZGVkXG4gKiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgc3RyaW5nLlxuICogQHBhcmFtIHtBcnJheXxVaW50OEFycmF5fEJ1ZmZlcn0gYnVmIHRoZSBkYXRhIGRlIGRlY29kZVxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGVjb2RlZCBzdHJpbmcuXG4gKi9cbmV4cG9ydHMudXRmOGRlY29kZSA9IGZ1bmN0aW9uIHV0ZjhkZWNvZGUoYnVmKSB7XG4gICAgaWYgKHN1cHBvcnQubm9kZWJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gdXRpbHMudHJhbnNmb3JtVG8oXCJub2RlYnVmZmVyXCIsIGJ1ZikudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbiAgICB9XG5cbiAgICBidWYgPSB1dGlscy50cmFuc2Zvcm1UbyhzdXBwb3J0LnVpbnQ4YXJyYXkgPyBcInVpbnQ4YXJyYXlcIiA6IFwiYXJyYXlcIiwgYnVmKTtcblxuICAgIC8vIHJldHVybiBidWYyc3RyaW5nKGJ1Zik7XG4gICAgLy8gQ2hyb21lIHByZWZlcnMgdG8gd29yayB3aXRoIFwic21hbGxcIiBjaHVua3Mgb2YgZGF0YVxuICAgIC8vIGZvciB0aGUgbWV0aG9kIGJ1ZjJzdHJpbmcuXG4gICAgLy8gRmlyZWZveCBhbmQgQ2hyb21lIGhhcyB0aGVpciBvd24gc2hvcnRjdXQsIElFIGRvZXNuJ3Qgc2VlbSB0byByZWFsbHkgY2FyZS5cbiAgICB2YXIgcmVzdWx0ID0gW10sIGsgPSAwLCBsZW4gPSBidWYubGVuZ3RoLCBjaHVuayA9IDY1NTM2O1xuICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIHZhciBuZXh0Qm91bmRhcnkgPSB1dGY4Ym9yZGVyKGJ1ZiwgTWF0aC5taW4oayArIGNodW5rLCBsZW4pKTtcbiAgICAgICAgaWYgKHN1cHBvcnQudWludDhhcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goYnVmMnN0cmluZyhidWYuc3ViYXJyYXkoaywgbmV4dEJvdW5kYXJ5KSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goYnVmMnN0cmluZyhidWYuc2xpY2UoaywgbmV4dEJvdW5kYXJ5KSkpO1xuICAgICAgICB9XG4gICAgICAgIGsgPSBuZXh0Qm91bmRhcnk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcblxufTtcbi8vIHZpbTogc2V0IHNoaWZ0d2lkdGg9NCBzb2Z0dGFic3RvcD00OlxuXG59LHtcIi4vbm9kZUJ1ZmZlclwiOjIyLFwiLi9zdXBwb3J0XCI6MjgsXCIuL3V0aWxzXCI6MzJ9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpO1xudmFyIGNvbXByZXNzaW9ucyA9IHJlcXVpcmUoJy4vY29tcHJlc3Npb25zJyk7XG52YXIgbm9kZUJ1ZmZlciA9IHJlcXVpcmUoJy4vbm9kZUJ1ZmZlcicpO1xuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgXCJiaW5hcnkgc3RyaW5nXCIgOiBhIHN0cmluZyBjb250YWluaW5nIG9ubHkgY2hhciBjb2RlcyBiZXR3ZWVuIDAgYW5kIDI1NS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgdGhlIHN0cmluZyB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBiaW5hcnkgc3RyaW5nLlxuICovXG5leHBvcnRzLnN0cmluZzJiaW5hcnkgPSBmdW5jdGlvbihzdHIpIHtcbiAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzdHIuY2hhckNvZGVBdChpKSAmIDB4ZmYpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbmV4cG9ydHMuYXJyYXlCdWZmZXIyQmxvYiA9IGZ1bmN0aW9uKGJ1ZmZlciwgbWltZVR5cGUpIHtcbiAgICBleHBvcnRzLmNoZWNrU3VwcG9ydChcImJsb2JcIik7XG5cdG1pbWVUeXBlID0gbWltZVR5cGUgfHwgJ2FwcGxpY2F0aW9uL3ppcCc7XG5cbiAgICB0cnkge1xuICAgICAgICAvLyBCbG9iIGNvbnN0cnVjdG9yXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYnVmZmVyXSwge1xuICAgICAgICAgICAgdHlwZTogbWltZVR5cGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGRlcHJlY2F0ZWQsIGJyb3dzZXIgb25seSwgb2xkIHdheVxuICAgICAgICAgICAgdmFyIEJ1aWxkZXIgPSB3aW5kb3cuQmxvYkJ1aWxkZXIgfHwgd2luZG93LldlYktpdEJsb2JCdWlsZGVyIHx8IHdpbmRvdy5Nb3pCbG9iQnVpbGRlciB8fCB3aW5kb3cuTVNCbG9iQnVpbGRlcjtcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IEJ1aWxkZXIoKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuYXBwZW5kKGJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlci5nZXRCbG9iKG1pbWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuXG4gICAgICAgICAgICAvLyB3ZWxsLCBmdWNrID8hXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiBjYW4ndCBjb25zdHJ1Y3QgdGhlIEJsb2IuXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn07XG4vKipcbiAqIFRoZSBpZGVudGl0eSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dCB0aGUgaW5wdXQuXG4gKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBzYW1lIGlucHV0LlxuICovXG5mdW5jdGlvbiBpZGVudGl0eShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dDtcbn1cblxuLyoqXG4gKiBGaWxsIGluIGFuIGFycmF5IHdpdGggYSBzdHJpbmcuXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzdHJpbmcgdG8gdXNlLlxuICogQHBhcmFtIHtBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gYXJyYXkgdGhlIGFycmF5IHRvIGZpbGwgaW4gKHdpbGwgYmUgbXV0YXRlZCkuXG4gKiBAcmV0dXJuIHtBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gdGhlIHVwZGF0ZWQgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ1RvQXJyYXlMaWtlKHN0ciwgYXJyYXkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgICAgICBhcnJheVtpXSA9IHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRjtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybSBhbiBhcnJheS1saWtlIG9iamVjdCB0byBhIHN0cmluZy5cbiAqIEBwYXJhbSB7QXJyYXl8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IGFycmF5IHRoZSBhcnJheSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZVRvU3RyaW5nKGFycmF5KSB7XG4gICAgLy8gUGVyZm9ybWFuY2VzIG5vdGVzIDpcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYXJyYXkpIGlzIHRoZSBmYXN0ZXN0LCBzZWVcbiAgICAvLyBzZWUgaHR0cDovL2pzcGVyZi5jb20vY29udmVydGluZy1hLXVpbnQ4YXJyYXktdG8tYS1zdHJpbmcvMlxuICAgIC8vIGJ1dCB0aGUgc3RhY2sgaXMgbGltaXRlZCAoYW5kIHdlIGNhbiBnZXQgaHVnZSBhcnJheXMgISkuXG4gICAgLy9cbiAgICAvLyByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShhcnJheVtpXSk7IGdlbmVyYXRlIHRvbyBtYW55IHN0cmluZ3MgIVxuICAgIC8vXG4gICAgLy8gVGhpcyBjb2RlIGlzIGluc3BpcmVkIGJ5IGh0dHA6Ly9qc3BlcmYuY29tL2FycmF5YnVmZmVyLXRvLXN0cmluZy1hcHBseS1wZXJmb3JtYW5jZS8yXG4gICAgdmFyIGNodW5rID0gNjU1MzY7XG4gICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICBsZW4gPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIHR5cGUgPSBleHBvcnRzLmdldFR5cGVPZihhcnJheSksXG4gICAgICAgIGsgPSAwLFxuICAgICAgICBjYW5Vc2VBcHBseSA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ1aW50OGFycmF5XCI6XG4gICAgICAgICAgICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDApKTtcbiAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5vZGVidWZmZXJcIjpcbiAgICAgICAgICAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbm9kZUJ1ZmZlcigwKSk7XG4gICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgIH1cbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgY2FuVXNlQXBwbHkgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gbm8gYXBwbHkgOiBzbG93IGFuZCBwYWluZnVsIGFsZ29yaXRobVxuICAgICAgLy8gZGVmYXVsdCBicm93c2VyIG9uIGFuZHJvaWQgNC4qXG4gICAgICBpZiAoIWNhblVzZUFwcGx5KSB7XG4gICAgICAgICB2YXIgcmVzdWx0U3RyID0gXCJcIjtcbiAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICByZXN1bHRTdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShhcnJheVtpXSk7XG4gICAgICAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFN0cjtcbiAgICB9XG4gICAgd2hpbGUgKGsgPCBsZW4gJiYgY2h1bmsgPiAxKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJhcnJheVwiIHx8IHR5cGUgPT09IFwibm9kZWJ1ZmZlclwiKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBhcnJheS5zbGljZShrLCBNYXRoLm1pbihrICsgY2h1bmssIGxlbikpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGFycmF5LnN1YmFycmF5KGssIE1hdGgubWluKGsgKyBjaHVuaywgbGVuKSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGsgKz0gY2h1bms7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNodW5rID0gTWF0aC5mbG9vcihjaHVuayAvIDIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcbn1cblxuZXhwb3J0cy5hcHBseUZyb21DaGFyQ29kZSA9IGFycmF5TGlrZVRvU3RyaW5nO1xuXG5cbi8qKlxuICogQ29weSB0aGUgZGF0YSBmcm9tIGFuIGFycmF5LWxpa2UgdG8gYW4gb3RoZXIgYXJyYXktbGlrZS5cbiAqIEBwYXJhbSB7QXJyYXl8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IGFycmF5RnJvbSB0aGUgb3JpZ2luIGFycmF5LlxuICogQHBhcmFtIHtBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gYXJyYXlUbyB0aGUgZGVzdGluYXRpb24gYXJyYXkgd2hpY2ggd2lsbCBiZSBtdXRhdGVkLlxuICogQHJldHVybiB7QXJyYXl8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IHRoZSB1cGRhdGVkIGRlc3RpbmF0aW9uIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheUxpa2VUb0FycmF5TGlrZShhcnJheUZyb20sIGFycmF5VG8pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5RnJvbS5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJheVRvW2ldID0gYXJyYXlGcm9tW2ldO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlUbztcbn1cblxuLy8gYSBtYXRyaXggY29udGFpbmluZyBmdW5jdGlvbnMgdG8gdHJhbnNmb3JtIGV2ZXJ5dGhpbmcgaW50byBldmVyeXRoaW5nLlxudmFyIHRyYW5zZm9ybSA9IHt9O1xuXG4vLyBzdHJpbmcgdG8gP1xudHJhbnNmb3JtW1wic3RyaW5nXCJdID0ge1xuICAgIFwic3RyaW5nXCI6IGlkZW50aXR5LFxuICAgIFwiYXJyYXlcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQXJyYXlMaWtlKGlucHV0LCBuZXcgQXJyYXkoaW5wdXQubGVuZ3RoKSk7XG4gICAgfSxcbiAgICBcImFycmF5YnVmZmVyXCI6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1bXCJzdHJpbmdcIl1bXCJ1aW50OGFycmF5XCJdKGlucHV0KS5idWZmZXI7XG4gICAgfSxcbiAgICBcInVpbnQ4YXJyYXlcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQXJyYXlMaWtlKGlucHV0LCBuZXcgVWludDhBcnJheShpbnB1dC5sZW5ndGgpKTtcbiAgICB9LFxuICAgIFwibm9kZWJ1ZmZlclwiOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nVG9BcnJheUxpa2UoaW5wdXQsIG5vZGVCdWZmZXIoaW5wdXQubGVuZ3RoKSk7XG4gICAgfVxufTtcblxuLy8gYXJyYXkgdG8gP1xudHJhbnNmb3JtW1wiYXJyYXlcIl0gPSB7XG4gICAgXCJzdHJpbmdcIjogYXJyYXlMaWtlVG9TdHJpbmcsXG4gICAgXCJhcnJheVwiOiBpZGVudGl0eSxcbiAgICBcImFycmF5YnVmZmVyXCI6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiAobmV3IFVpbnQ4QXJyYXkoaW5wdXQpKS5idWZmZXI7XG4gICAgfSxcbiAgICBcInVpbnQ4YXJyYXlcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGlucHV0KTtcbiAgICB9LFxuICAgIFwibm9kZWJ1ZmZlclwiOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gbm9kZUJ1ZmZlcihpbnB1dCk7XG4gICAgfVxufTtcblxuLy8gYXJyYXlidWZmZXIgdG8gP1xudHJhbnNmb3JtW1wiYXJyYXlidWZmZXJcIl0gPSB7XG4gICAgXCJzdHJpbmdcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5TGlrZVRvU3RyaW5nKG5ldyBVaW50OEFycmF5KGlucHV0KSk7XG4gICAgfSxcbiAgICBcImFycmF5XCI6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5TGlrZShuZXcgVWludDhBcnJheShpbnB1dCksIG5ldyBBcnJheShpbnB1dC5ieXRlTGVuZ3RoKSk7XG4gICAgfSxcbiAgICBcImFycmF5YnVmZmVyXCI6IGlkZW50aXR5LFxuICAgIFwidWludDhhcnJheVwiOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaW5wdXQpO1xuICAgIH0sXG4gICAgXCJub2RlYnVmZmVyXCI6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBub2RlQnVmZmVyKG5ldyBVaW50OEFycmF5KGlucHV0KSk7XG4gICAgfVxufTtcblxuLy8gdWludDhhcnJheSB0byA/XG50cmFuc2Zvcm1bXCJ1aW50OGFycmF5XCJdID0ge1xuICAgIFwic3RyaW5nXCI6IGFycmF5TGlrZVRvU3RyaW5nLFxuICAgIFwiYXJyYXlcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXlMaWtlKGlucHV0LCBuZXcgQXJyYXkoaW5wdXQubGVuZ3RoKSk7XG4gICAgfSxcbiAgICBcImFycmF5YnVmZmVyXCI6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5idWZmZXI7XG4gICAgfSxcbiAgICBcInVpbnQ4YXJyYXlcIjogaWRlbnRpdHksXG4gICAgXCJub2RlYnVmZmVyXCI6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBub2RlQnVmZmVyKGlucHV0KTtcbiAgICB9XG59O1xuXG4vLyBub2RlYnVmZmVyIHRvID9cbnRyYW5zZm9ybVtcIm5vZGVidWZmZXJcIl0gPSB7XG4gICAgXCJzdHJpbmdcIjogYXJyYXlMaWtlVG9TdHJpbmcsXG4gICAgXCJhcnJheVwiOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gYXJyYXlMaWtlVG9BcnJheUxpa2UoaW5wdXQsIG5ldyBBcnJheShpbnB1dC5sZW5ndGgpKTtcbiAgICB9LFxuICAgIFwiYXJyYXlidWZmZXJcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVtcIm5vZGVidWZmZXJcIl1bXCJ1aW50OGFycmF5XCJdKGlucHV0KS5idWZmZXI7XG4gICAgfSxcbiAgICBcInVpbnQ4YXJyYXlcIjogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXlMaWtlKGlucHV0LCBuZXcgVWludDhBcnJheShpbnB1dC5sZW5ndGgpKTtcbiAgICB9LFxuICAgIFwibm9kZWJ1ZmZlclwiOiBpZGVudGl0eVxufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gYW4gaW5wdXQgaW50byBhbnkgdHlwZS5cbiAqIFRoZSBzdXBwb3J0ZWQgb3V0cHV0IHR5cGUgYXJlIDogc3RyaW5nLCBhcnJheSwgdWludDhhcnJheSwgYXJyYXlidWZmZXIsIG5vZGVidWZmZXIuXG4gKiBJZiBubyBvdXRwdXQgdHlwZSBpcyBzcGVjaWZpZWQsIHRoZSB1bm1vZGlmaWVkIGlucHV0IHdpbGwgYmUgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge1N0cmluZ30gb3V0cHV0VHlwZSB0aGUgb3V0cHV0IHR5cGUuXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gaW5wdXQgdGhlIGlucHV0IHRvIGNvbnZlcnQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gYW4gRXJyb3IgaWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSByZXF1ZXN0ZWQgb3V0cHV0IHR5cGUuXG4gKi9cbmV4cG9ydHMudHJhbnNmb3JtVG8gPSBmdW5jdGlvbihvdXRwdXRUeXBlLCBpbnB1dCkge1xuICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgLy8gdW5kZWZpbmVkLCBudWxsLCBldGNcbiAgICAgICAgLy8gYW4gZW1wdHkgc3RyaW5nIHdvbid0IGhhcm0uXG4gICAgICAgIGlucHV0ID0gXCJcIjtcbiAgICB9XG4gICAgaWYgKCFvdXRwdXRUeXBlKSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gICAgZXhwb3J0cy5jaGVja1N1cHBvcnQob3V0cHV0VHlwZSk7XG4gICAgdmFyIGlucHV0VHlwZSA9IGV4cG9ydHMuZ2V0VHlwZU9mKGlucHV0KTtcbiAgICB2YXIgcmVzdWx0ID0gdHJhbnNmb3JtW2lucHV0VHlwZV1bb3V0cHV0VHlwZV0oaW5wdXQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgdHlwZSBvZiB0aGUgaW5wdXQuXG4gKiBUaGUgdHlwZSB3aWxsIGJlIGluIGEgZm9ybWF0IHZhbGlkIGZvciBKU1ppcC51dGlscy50cmFuc2Zvcm1UbyA6IHN0cmluZywgYXJyYXksIHVpbnQ4YXJyYXksIGFycmF5YnVmZmVyLlxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0IHRoZSBpbnB1dCB0byBpZGVudGlmeS5cbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIChsb3dlcmNhc2UpIHR5cGUgb2YgdGhlIGlucHV0LlxuICovXG5leHBvcnRzLmdldFR5cGVPZiA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICB9XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09IFwiW29iamVjdCBBcnJheV1cIikge1xuICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgIH1cbiAgICBpZiAoc3VwcG9ydC5ub2RlYnVmZmVyICYmIG5vZGVCdWZmZXIudGVzdChpbnB1dCkpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZWJ1ZmZlclwiO1xuICAgIH1cbiAgICBpZiAoc3VwcG9ydC51aW50OGFycmF5ICYmIGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gXCJ1aW50OGFycmF5XCI7XG4gICAgfVxuICAgIGlmIChzdXBwb3J0LmFycmF5YnVmZmVyICYmIGlucHV0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlidWZmZXJcIjtcbiAgICB9XG59O1xuXG4vKipcbiAqIFRocm93IGFuIGV4Y2VwdGlvbiBpZiB0aGUgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdGhlIHR5cGUgdG8gY2hlY2suXG4gKiBAdGhyb3dzIHtFcnJvcn0gYW4gRXJyb3IgaWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSByZXF1ZXN0ZWQgdHlwZS5cbiAqL1xuZXhwb3J0cy5jaGVja1N1cHBvcnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgdmFyIHN1cHBvcnRlZCA9IHN1cHBvcnRbdHlwZS50b0xvd2VyQ2FzZSgpXTtcbiAgICBpZiAoIXN1cHBvcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZSArIFwiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyXCIpO1xuICAgIH1cbn07XG5leHBvcnRzLk1BWF9WQUxVRV8xNkJJVFMgPSA2NTUzNTtcbmV4cG9ydHMuTUFYX1ZBTFVFXzMyQklUUyA9IC0xOyAvLyB3ZWxsLCBcIlxceEZGXFx4RkZcXHhGRlxceEZGXFx4RkZcXHhGRlxceEZGXFx4RkZcIiBpcyBwYXJzZWQgYXMgLTFcblxuLyoqXG4gKiBQcmV0dGlmeSBhIHN0cmluZyByZWFkIGFzIGJpbmFyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgdGhlIHN0cmluZyB0byBwcmV0dGlmeS5cbiAqIEByZXR1cm4ge3N0cmluZ30gYSBwcmV0dHkgc3RyaW5nLlxuICovXG5leHBvcnRzLnByZXR0eSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHZhciByZXMgPSAnJyxcbiAgICAgICAgY29kZSwgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgKHN0ciB8fCBcIlwiKS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIHJlcyArPSAnXFxcXHgnICsgKGNvZGUgPCAxNiA/IFwiMFwiIDogXCJcIikgKyBjb2RlLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcblxuLyoqXG4gKiBGaW5kIGEgY29tcHJlc3Npb24gcmVnaXN0ZXJlZCBpbiBKU1ppcC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wcmVzc2lvbk1ldGhvZCB0aGUgbWV0aG9kIG1hZ2ljIHRvIGZpbmQuXG4gKiBAcmV0dXJuIHtPYmplY3R8bnVsbH0gdGhlIEpTWmlwIGNvbXByZXNzaW9uIG9iamVjdCwgbnVsbCBpZiBub25lIGZvdW5kLlxuICovXG5leHBvcnRzLmZpbmRDb21wcmVzc2lvbiA9IGZ1bmN0aW9uKGNvbXByZXNzaW9uTWV0aG9kKSB7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGNvbXByZXNzaW9ucykge1xuICAgICAgICBpZiAoIWNvbXByZXNzaW9ucy5oYXNPd25Qcm9wZXJ0eShtZXRob2QpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcHJlc3Npb25zW21ldGhvZF0ubWFnaWMgPT09IGNvbXByZXNzaW9uTWV0aG9kKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcHJlc3Npb25zW21ldGhvZF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuLyoqXG4qIENyb3NzLXdpbmRvdywgY3Jvc3MtTm9kZS1jb250ZXh0IHJlZ3VsYXIgZXhwcmVzc2lvbiBkZXRlY3Rpb25cbiogQHBhcmFtICB7T2JqZWN0fSAgb2JqZWN0IEFueXRoaW5nXG4qIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24sXG4qIGZhbHNlIG90aGVyd2lzZVxuKi9cbmV4cG9ydHMuaXNSZWdFeHAgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSBcIltvYmplY3QgUmVnRXhwXVwiO1xufTtcblxuXG59LHtcIi4vY29tcHJlc3Npb25zXCI6MTQsXCIuL25vZGVCdWZmZXJcIjoyMixcIi4vc3VwcG9ydFwiOjI4fV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIFN0cmluZ1JlYWRlciA9IHJlcXVpcmUoJy4vc3RyaW5nUmVhZGVyJyk7XG52YXIgTm9kZUJ1ZmZlclJlYWRlciA9IHJlcXVpcmUoJy4vbm9kZUJ1ZmZlclJlYWRlcicpO1xudmFyIFVpbnQ4QXJyYXlSZWFkZXIgPSByZXF1aXJlKCcuL3VpbnQ4QXJyYXlSZWFkZXInKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBzaWcgPSByZXF1aXJlKCcuL3NpZ25hdHVyZScpO1xudmFyIFppcEVudHJ5ID0gcmVxdWlyZSgnLi96aXBFbnRyeScpO1xudmFyIHN1cHBvcnQgPSByZXF1aXJlKCcuL3N1cHBvcnQnKTtcbnZhciBqc3ppcFByb3RvID0gcmVxdWlyZSgnLi9vYmplY3QnKTtcbi8vICBjbGFzcyBaaXBFbnRyaWVzIHt7e1xuLyoqXG4gKiBBbGwgdGhlIGVudHJpZXMgaW4gdGhlIHppcCBmaWxlLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheUJ1ZmZlcnxVaW50OEFycmF5fSBkYXRhIHRoZSBiaW5hcnkgc3RyZWFtIHRvIGxvYWQuXG4gKiBAcGFyYW0ge09iamVjdH0gbG9hZE9wdGlvbnMgT3B0aW9ucyBmb3IgbG9hZGluZyB0aGUgc3RyZWFtLlxuICovXG5mdW5jdGlvbiBaaXBFbnRyaWVzKGRhdGEsIGxvYWRPcHRpb25zKSB7XG4gICAgdGhpcy5maWxlcyA9IFtdO1xuICAgIHRoaXMubG9hZE9wdGlvbnMgPSBsb2FkT3B0aW9ucztcbiAgICBpZiAoZGF0YSkge1xuICAgICAgICB0aGlzLmxvYWQoZGF0YSk7XG4gICAgfVxufVxuWmlwRW50cmllcy5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhhdCB0aGUgcmVhZGVyIGlzIG9uIHRoZSBzcGVmaWNpZWQgc2lnbmF0dXJlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHBlY3RlZFNpZ25hdHVyZSB0aGUgZXhwZWN0ZWQgc2lnbmF0dXJlLlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiBpdCBpcyBhbiBvdGhlciBzaWduYXR1cmUuXG4gICAgICovXG4gICAgY2hlY2tTaWduYXR1cmU6IGZ1bmN0aW9uKGV4cGVjdGVkU2lnbmF0dXJlKSB7XG4gICAgICAgIHZhciBzaWduYXR1cmUgPSB0aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpO1xuICAgICAgICBpZiAoc2lnbmF0dXJlICE9PSBleHBlY3RlZFNpZ25hdHVyZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCBvciBidWcgOiB1bmV4cGVjdGVkIHNpZ25hdHVyZSBcIiArIFwiKFwiICsgdXRpbHMucHJldHR5KHNpZ25hdHVyZSkgKyBcIiwgZXhwZWN0ZWQgXCIgKyB1dGlscy5wcmV0dHkoZXhwZWN0ZWRTaWduYXR1cmUpICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWFkIHRoZSBlbmQgb2YgdGhlIGNlbnRyYWwgZGlyZWN0b3J5LlxuICAgICAqL1xuICAgIHJlYWRCbG9ja0VuZE9mQ2VudHJhbDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGlza051bWJlciA9IHRoaXMucmVhZGVyLnJlYWRJbnQoMik7XG4gICAgICAgIHRoaXMuZGlza1dpdGhDZW50cmFsRGlyU3RhcnQgPSB0aGlzLnJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICB0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzayA9IHRoaXMucmVhZGVyLnJlYWRJbnQoMik7XG4gICAgICAgIHRoaXMuY2VudHJhbERpclJlY29yZHMgPSB0aGlzLnJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICB0aGlzLmNlbnRyYWxEaXJTaXplID0gdGhpcy5yZWFkZXIucmVhZEludCg0KTtcbiAgICAgICAgdGhpcy5jZW50cmFsRGlyT2Zmc2V0ID0gdGhpcy5yZWFkZXIucmVhZEludCg0KTtcblxuICAgICAgICB0aGlzLnppcENvbW1lbnRMZW5ndGggPSB0aGlzLnJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICAvLyB3YXJuaW5nIDogdGhlIGVuY29kaW5nIGRlcGVuZHMgb2YgdGhlIHN5c3RlbSBsb2NhbGVcbiAgICAgICAgLy8gT24gYSBsaW51eCBtYWNoaW5lIHdpdGggTEFORz1lbl9VUy51dGY4LCB0aGlzIGZpZWxkIGlzIHV0ZjggZW5jb2RlZC5cbiAgICAgICAgLy8gT24gYSB3aW5kb3dzIG1hY2hpbmUsIHRoaXMgZmllbGQgaXMgZW5jb2RlZCB3aXRoIHRoZSBsb2NhbGl6ZWQgd2luZG93cyBjb2RlIHBhZ2UuXG4gICAgICAgIHRoaXMuemlwQ29tbWVudCA9IHRoaXMucmVhZGVyLnJlYWRTdHJpbmcodGhpcy56aXBDb21tZW50TGVuZ3RoKTtcbiAgICAgICAgLy8gVG8gZ2V0IGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCB0aGUgZ2VuZXJhdGlvbiBwYXJ0LCB3ZSB3aWxsIGFzc3VtZSB0aGF0XG4gICAgICAgIC8vIHRoaXMgaXMgdXRmOCBlbmNvZGVkLlxuICAgICAgICB0aGlzLnppcENvbW1lbnQgPSBqc3ppcFByb3RvLnV0ZjhkZWNvZGUodGhpcy56aXBDb21tZW50KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJlYWQgdGhlIGVuZCBvZiB0aGUgWmlwIDY0IGNlbnRyYWwgZGlyZWN0b3J5LlxuICAgICAqIE5vdCBtZXJnZWQgd2l0aCB0aGUgbWV0aG9kIHJlYWRFbmRPZkNlbnRyYWwgOlxuICAgICAqIFRoZSBlbmQgb2YgY2VudHJhbCBjYW4gY29leGlzdCB3aXRoIGl0cyBaaXA2NCBicm90aGVyLFxuICAgICAqIEkgZG9uJ3Qgd2FudCB0byByZWFkIHRoZSB3cm9uZyBudW1iZXIgb2YgYnl0ZXMgIVxuICAgICAqL1xuICAgIHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpO1xuICAgICAgICB0aGlzLnZlcnNpb25NYWRlQnkgPSB0aGlzLnJlYWRlci5yZWFkU3RyaW5nKDIpO1xuICAgICAgICB0aGlzLnZlcnNpb25OZWVkZWQgPSB0aGlzLnJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICB0aGlzLmRpc2tOdW1iZXIgPSB0aGlzLnJlYWRlci5yZWFkSW50KDQpO1xuICAgICAgICB0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0ID0gdGhpcy5yZWFkZXIucmVhZEludCg0KTtcbiAgICAgICAgdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2sgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpO1xuICAgICAgICB0aGlzLmNlbnRyYWxEaXJSZWNvcmRzID0gdGhpcy5yZWFkZXIucmVhZEludCg4KTtcbiAgICAgICAgdGhpcy5jZW50cmFsRGlyU2l6ZSA9IHRoaXMucmVhZGVyLnJlYWRJbnQoOCk7XG4gICAgICAgIHRoaXMuY2VudHJhbERpck9mZnNldCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoOCk7XG5cbiAgICAgICAgdGhpcy56aXA2NEV4dGVuc2libGVEYXRhID0ge307XG4gICAgICAgIHZhciBleHRyYURhdGFTaXplID0gdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUgLSA0NCxcbiAgICAgICAgICAgIGluZGV4ID0gMCxcbiAgICAgICAgICAgIGV4dHJhRmllbGRJZCxcbiAgICAgICAgICAgIGV4dHJhRmllbGRMZW5ndGgsXG4gICAgICAgICAgICBleHRyYUZpZWxkVmFsdWU7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGV4dHJhRGF0YVNpemUpIHtcbiAgICAgICAgICAgIGV4dHJhRmllbGRJZCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoMik7XG4gICAgICAgICAgICBleHRyYUZpZWxkTGVuZ3RoID0gdGhpcy5yZWFkZXIucmVhZEludCg0KTtcbiAgICAgICAgICAgIGV4dHJhRmllbGRWYWx1ZSA9IHRoaXMucmVhZGVyLnJlYWRTdHJpbmcoZXh0cmFGaWVsZExlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLnppcDY0RXh0ZW5zaWJsZURhdGFbZXh0cmFGaWVsZElkXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogZXh0cmFGaWVsZElkLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogZXh0cmFGaWVsZExlbmd0aCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZXh0cmFGaWVsZFZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWFkIHRoZSBlbmQgb2YgdGhlIFppcCA2NCBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yLlxuICAgICAqL1xuICAgIHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGlza1dpdGhaaXA2NENlbnRyYWxEaXJTdGFydCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoNCk7XG4gICAgICAgIHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpciA9IHRoaXMucmVhZGVyLnJlYWRJbnQoOCk7XG4gICAgICAgIHRoaXMuZGlza3NDb3VudCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoNCk7XG4gICAgICAgIGlmICh0aGlzLmRpc2tzQ291bnQgPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aS12b2x1bWVzIHppcCBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVhZCB0aGUgbG9jYWwgZmlsZXMsIGJhc2VkIG9uIHRoZSBvZmZzZXQgcmVhZCBpbiB0aGUgY2VudHJhbCBwYXJ0LlxuICAgICAqL1xuICAgIHJlYWRMb2NhbEZpbGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIGZpbGU7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmaWxlID0gdGhpcy5maWxlc1tpXTtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KGZpbGUubG9jYWxIZWFkZXJPZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5jaGVja1NpZ25hdHVyZShzaWcuTE9DQUxfRklMRV9IRUFERVIpO1xuICAgICAgICAgICAgZmlsZS5yZWFkTG9jYWxQYXJ0KHRoaXMucmVhZGVyKTtcbiAgICAgICAgICAgIGZpbGUuaGFuZGxlVVRGOCgpO1xuICAgICAgICAgICAgZmlsZS5wcm9jZXNzQXR0cmlidXRlcygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWFkIHRoZSBjZW50cmFsIGRpcmVjdG9yeS5cbiAgICAgKi9cbiAgICByZWFkQ2VudHJhbERpcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmaWxlO1xuXG4gICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KHRoaXMuY2VudHJhbERpck9mZnNldCk7XG4gICAgICAgIHdoaWxlICh0aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpID09PSBzaWcuQ0VOVFJBTF9GSUxFX0hFQURFUikge1xuICAgICAgICAgICAgZmlsZSA9IG5ldyBaaXBFbnRyeSh7XG4gICAgICAgICAgICAgICAgemlwNjQ6IHRoaXMuemlwNjRcbiAgICAgICAgICAgIH0sIHRoaXMubG9hZE9wdGlvbnMpO1xuICAgICAgICAgICAgZmlsZS5yZWFkQ2VudHJhbFBhcnQodGhpcy5yZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5maWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWFkIHRoZSBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkuXG4gICAgICovXG4gICAgcmVhZEVuZE9mQ2VudHJhbDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLnJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZShzaWcuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKTtcbiAgICAgICAgaWYgKG9mZnNldCA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250ZW50IGlzIGEgdHJ1bmNhdGVkIHppcCBvciBjb21wbGV0ZSBnYXJiYWdlLlxuICAgICAgICAgICAgLy8gQSBcIkxPQ0FMX0ZJTEVfSEVBREVSXCIgaXMgbm90IHJlcXVpcmVkIGF0IHRoZSBiZWdpbm5pbmcgKGF1dG9cbiAgICAgICAgICAgIC8vIGV4dHJhY3RpYmxlIHppcCBmb3IgZXhhbXBsZSkgYnV0IGl0IGNhbiBnaXZlIGEgZ29vZCBoaW50LlxuICAgICAgICAgICAgLy8gSWYgYW4gYWpheCByZXF1ZXN0IHdhcyB1c2VkIHdpdGhvdXQgcmVzcG9uc2VUeXBlLCB3ZSB3aWxsIGFsc29cbiAgICAgICAgICAgIC8vIGdldCB1bnJlYWRhYmxlIGRhdGEuXG4gICAgICAgICAgICB2YXIgaXNHYXJiYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXIuc2V0SW5kZXgoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1NpZ25hdHVyZShzaWcuTE9DQUxfRklMRV9IRUFERVIpO1xuICAgICAgICAgICAgICAgIGlzR2FyYmFnZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICAgICAgaWYgKGlzR2FyYmFnZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGZpbmQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IDogaXMgdGhpcyBhIHppcCBmaWxlID8gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIklmIGl0IGlzLCBzZWUgaHR0cDovL3N0dWsuZ2l0aHViLmlvL2pzemlwL2RvY3VtZW50YXRpb24vaG93dG8vcmVhZF96aXAuaHRtbFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCA6IGNhbid0IGZpbmQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KG9mZnNldCk7XG4gICAgICAgIHRoaXMuY2hlY2tTaWduYXR1cmUoc2lnLkNFTlRSQUxfRElSRUNUT1JZX0VORCk7XG4gICAgICAgIHRoaXMucmVhZEJsb2NrRW5kT2ZDZW50cmFsKCk7XG5cblxuICAgICAgICAvKiBleHRyYWN0IGZyb20gdGhlIHppcCBzcGVjIDpcbiAgICAgICAgICAgIDQpICBJZiBvbmUgb2YgdGhlIGZpZWxkcyBpbiB0aGUgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgcmVjb3JkIGlzIHRvbyBzbWFsbCB0byBob2xkIHJlcXVpcmVkIGRhdGEsIHRoZSBmaWVsZFxuICAgICAgICAgICAgICAgIHNob3VsZCBiZSBzZXQgdG8gLTEgKDB4RkZGRiBvciAweEZGRkZGRkZGKSBhbmQgdGhlXG4gICAgICAgICAgICAgICAgWklQNjQgZm9ybWF0IHJlY29yZCBzaG91bGQgYmUgY3JlYXRlZC5cbiAgICAgICAgICAgIDUpICBUaGUgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IHJlY29yZCBhbmQgdGhlXG4gICAgICAgICAgICAgICAgWmlwNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IGxvY2F0b3IgcmVjb3JkIG11c3RcbiAgICAgICAgICAgICAgICByZXNpZGUgb24gdGhlIHNhbWUgZGlzayB3aGVuIHNwbGl0dGluZyBvciBzcGFubmluZ1xuICAgICAgICAgICAgICAgIGFuIGFyY2hpdmUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodGhpcy5kaXNrTnVtYmVyID09PSB1dGlscy5NQVhfVkFMVUVfMTZCSVRTIHx8IHRoaXMuZGlza1dpdGhDZW50cmFsRGlyU3RhcnQgPT09IHV0aWxzLk1BWF9WQUxVRV8xNkJJVFMgfHwgdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2sgPT09IHV0aWxzLk1BWF9WQUxVRV8xNkJJVFMgfHwgdGhpcy5jZW50cmFsRGlyUmVjb3JkcyA9PT0gdXRpbHMuTUFYX1ZBTFVFXzE2QklUUyB8fCB0aGlzLmNlbnRyYWxEaXJTaXplID09PSB1dGlscy5NQVhfVkFMVUVfMzJCSVRTIHx8IHRoaXMuY2VudHJhbERpck9mZnNldCA9PT0gdXRpbHMuTUFYX1ZBTFVFXzMyQklUUykge1xuICAgICAgICAgICAgdGhpcy56aXA2NCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBXYXJuaW5nIDogdGhlIHppcDY0IGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWQsIGJ1dCBPTkxZIGlmIHRoZSA2NGJpdHMgaW50ZWdlciByZWFkIGZyb21cbiAgICAgICAgICAgIHRoZSB6aXAgZmlsZSBjYW4gZml0IGludG8gYSAzMmJpdHMgaW50ZWdlci4gVGhpcyBjYW5ub3QgYmUgc29sdmVkIDogSmF2YXNjcmlwdCByZXByZXNlbnRzXG4gICAgICAgICAgICBhbGwgbnVtYmVycyBhcyA2NC1iaXQgZG91YmxlIHByZWNpc2lvbiBJRUVFIDc1NCBmbG9hdGluZyBwb2ludCBudW1iZXJzLlxuICAgICAgICAgICAgU28sIHdlIGhhdmUgNTNiaXRzIGZvciBpbnRlZ2VycyBhbmQgYml0d2lzZSBvcGVyYXRpb25zIHRyZWF0IGV2ZXJ5dGhpbmcgYXMgMzJiaXRzLlxuICAgICAgICAgICAgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL0JpdHdpc2VfT3BlcmF0b3JzXG4gICAgICAgICAgICBhbmQgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL3B1YmxpY2F0aW9ucy9maWxlcy9FQ01BLVNUL0VDTUEtMjYyLnBkZiBzZWN0aW9uIDguNVxuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLy8gc2hvdWxkIGxvb2sgZm9yIGEgemlwNjQgRU9DRCBsb2NhdG9yXG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLnJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZShzaWcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfTE9DQVRPUik7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBjYW4ndCBmaW5kIHRoZSBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KG9mZnNldCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrU2lnbmF0dXJlKHNpZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SKTtcbiAgICAgICAgICAgIHRoaXMucmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWxMb2NhdG9yKCk7XG5cbiAgICAgICAgICAgIC8vIG5vdyB0aGUgemlwNjQgRU9DRCByZWNvcmRcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcik7XG4gICAgICAgICAgICB0aGlzLmNoZWNrU2lnbmF0dXJlKHNpZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpO1xuICAgICAgICAgICAgdGhpcy5yZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBwcmVwYXJlUmVhZGVyOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciB0eXBlID0gdXRpbHMuZ2V0VHlwZU9mKGRhdGEpO1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAhc3VwcG9ydC51aW50OGFycmF5KSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlciA9IG5ldyBTdHJpbmdSZWFkZXIoZGF0YSwgdGhpcy5sb2FkT3B0aW9ucy5vcHRpbWl6ZWRCaW5hcnlTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFwibm9kZWJ1ZmZlclwiKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlciA9IG5ldyBOb2RlQnVmZmVyUmVhZGVyKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXIgPSBuZXcgVWludDhBcnJheVJlYWRlcih1dGlscy50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIiwgZGF0YSkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWFkIGEgemlwIGZpbGUgYW5kIGNyZWF0ZSBaaXBFbnRyaWVzLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhIHRoZSBiaW5hcnkgc3RyaW5nIHJlcHJlc2VudGluZyBhIHppcCBmaWxlLlxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdGhpcy5wcmVwYXJlUmVhZGVyKGRhdGEpO1xuICAgICAgICB0aGlzLnJlYWRFbmRPZkNlbnRyYWwoKTtcbiAgICAgICAgdGhpcy5yZWFkQ2VudHJhbERpcigpO1xuICAgICAgICB0aGlzLnJlYWRMb2NhbEZpbGVzKCk7XG4gICAgfVxufTtcbi8vIH19fSBlbmQgb2YgWmlwRW50cmllc1xubW9kdWxlLmV4cG9ydHMgPSBaaXBFbnRyaWVzO1xuXG59LHtcIi4vbm9kZUJ1ZmZlclJlYWRlclwiOjIzLFwiLi9vYmplY3RcIjoyNCxcIi4vc2lnbmF0dXJlXCI6MjUsXCIuL3N0cmluZ1JlYWRlclwiOjI2LFwiLi9zdXBwb3J0XCI6MjgsXCIuL3VpbnQ4QXJyYXlSZWFkZXJcIjoyOSxcIi4vdXRpbHNcIjozMixcIi4vemlwRW50cnlcIjozNH1dLDM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBTdHJpbmdSZWFkZXIgPSByZXF1aXJlKCcuL3N0cmluZ1JlYWRlcicpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIENvbXByZXNzZWRPYmplY3QgPSByZXF1aXJlKCcuL2NvbXByZXNzZWRPYmplY3QnKTtcbnZhciBqc3ppcFByb3RvID0gcmVxdWlyZSgnLi9vYmplY3QnKTtcblxudmFyIE1BREVfQllfRE9TID0gMHgwMDtcbnZhciBNQURFX0JZX1VOSVggPSAweDAzO1xuXG4vLyBjbGFzcyBaaXBFbnRyeSB7e3tcbi8qKlxuICogQW4gZW50cnkgaW4gdGhlIHppcCBmaWxlLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9mIHRoZSBjdXJyZW50IGZpbGUuXG4gKiBAcGFyYW0ge09iamVjdH0gbG9hZE9wdGlvbnMgT3B0aW9ucyBmb3IgbG9hZGluZyB0aGUgc3RyZWFtLlxuICovXG5mdW5jdGlvbiBaaXBFbnRyeShvcHRpb25zLCBsb2FkT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5sb2FkT3B0aW9ucyA9IGxvYWRPcHRpb25zO1xufVxuWmlwRW50cnkucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNheSBpZiB0aGUgZmlsZSBpcyBlbmNyeXB0ZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZmlsZSBpcyBlbmNyeXB0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0VuY3J5cHRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGJpdCAxIGlzIHNldFxuICAgICAgICByZXR1cm4gKHRoaXMuYml0RmxhZyAmIDB4MDAwMSkgPT09IDB4MDAwMTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIHNheSBpZiB0aGUgZmlsZSBoYXMgdXRmLTggZmlsZW5hbWUvY29tbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBmaWxlbmFtZS9jb21tZW50IGlzIGluIHV0Zi04LCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgdXNlVVRGODogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGJpdCAxMSBpcyBzZXRcbiAgICAgICAgcmV0dXJuICh0aGlzLmJpdEZsYWcgJiAweDA4MDApID09PSAweDA4MDA7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjb21wcmVzc2VkIGNvbnRlbnQgZnJvbSB0aGlzIFppcEZpbGUuXG4gICAgICogQHBhcmFtIHtEYXRhUmVhZGVyfSByZWFkZXIgdGhlIHJlYWRlciB0byB1c2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb20gdGhlIG9mZnNldCBmcm9tIHdoZXJlIHdlIHNob3VsZCByZWFkIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggdGhlIGxlbmd0aCBvZiB0aGUgZGF0YSB0byByZWFkLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgY2FsbGJhY2sgdG8gZ2V0IHRoZSBjb21wcmVzc2VkIGNvbnRlbnQgKHRoZSB0eXBlIGRlcGVuZHMgb2YgdGhlIERhdGFSZWFkZXIgY2xhc3MpLlxuICAgICAqL1xuICAgIHByZXBhcmVDb21wcmVzc2VkQ29udGVudDogZnVuY3Rpb24ocmVhZGVyLCBmcm9tLCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzSW5kZXggPSByZWFkZXIuaW5kZXg7XG4gICAgICAgICAgICByZWFkZXIuc2V0SW5kZXgoZnJvbSk7XG4gICAgICAgICAgICB2YXIgY29tcHJlc3NlZEZpbGVEYXRhID0gcmVhZGVyLnJlYWREYXRhKGxlbmd0aCk7XG4gICAgICAgICAgICByZWFkZXIuc2V0SW5kZXgocHJldmlvdXNJbmRleCk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb21wcmVzc2VkRmlsZURhdGE7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIHRoZSB1bmNvbXByZXNzZWQgY29udGVudCBmcm9tIHRoaXMgWmlwRmlsZS5cbiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZnJvbSB0aGUgb2Zmc2V0IGZyb20gd2hlcmUgd2Ugc2hvdWxkIHJlYWQgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCB0aGUgbGVuZ3RoIG9mIHRoZSBkYXRhIHRvIHJlYWQuXG4gICAgICogQHBhcmFtIHtKU1ppcC5jb21wcmVzc2lvbn0gY29tcHJlc3Npb24gdGhlIGNvbXByZXNzaW9uIHVzZWQgb24gdGhpcyBmaWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1bmNvbXByZXNzZWRTaXplIHRoZSB1bmNvbXByZXNzZWQgc2l6ZSB0byBleHBlY3QuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBjYWxsYmFjayB0byBnZXQgdGhlIHVuY29tcHJlc3NlZCBjb250ZW50ICh0aGUgdHlwZSBkZXBlbmRzIG9mIHRoZSBEYXRhUmVhZGVyIGNsYXNzKS5cbiAgICAgKi9cbiAgICBwcmVwYXJlQ29udGVudDogZnVuY3Rpb24ocmVhZGVyLCBmcm9tLCBsZW5ndGgsIGNvbXByZXNzaW9uLCB1bmNvbXByZXNzZWRTaXplKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyIGNvbXByZXNzZWRGaWxlRGF0YSA9IHV0aWxzLnRyYW5zZm9ybVRvKGNvbXByZXNzaW9uLnVuY29tcHJlc3NJbnB1dFR5cGUsIHRoaXMuZ2V0Q29tcHJlc3NlZENvbnRlbnQoKSk7XG4gICAgICAgICAgICB2YXIgdW5jb21wcmVzc2VkRmlsZURhdGEgPSBjb21wcmVzc2lvbi51bmNvbXByZXNzKGNvbXByZXNzZWRGaWxlRGF0YSk7XG5cbiAgICAgICAgICAgIGlmICh1bmNvbXByZXNzZWRGaWxlRGF0YS5sZW5ndGggIT09IHVuY29tcHJlc3NlZFNpemUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiB1bmNvbXByZXNzZWQgZGF0YSBzaXplIG1pc21hdGNoXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdW5jb21wcmVzc2VkRmlsZURhdGE7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWFkIHRoZSBsb2NhbCBwYXJ0IG9mIGEgemlwIGZpbGUgYW5kIGFkZCB0aGUgaW5mbyBpbiB0aGlzIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS5cbiAgICAgKi9cbiAgICByZWFkTG9jYWxQYXJ0OiBmdW5jdGlvbihyZWFkZXIpIHtcbiAgICAgICAgdmFyIGNvbXByZXNzaW9uLCBsb2NhbEV4dHJhRmllbGRzTGVuZ3RoO1xuXG4gICAgICAgIC8vIHdlIGFscmVhZHkga25vdyBldmVyeXRoaW5nIGZyb20gdGhlIGNlbnRyYWwgZGlyICFcbiAgICAgICAgLy8gSWYgdGhlIGNlbnRyYWwgZGlyIGRhdGEgYXJlIGZhbHNlLCB3ZSBhcmUgZG9vbWVkLlxuICAgICAgICAvLyBPbiB0aGUgYnJpZ2h0IHNpZGUsIHRoZSBsb2NhbCBwYXJ0IGlzIHNjYXJ5ICA6IHppcDY0LCBkYXRhIGRlc2NyaXB0b3JzLCBib3RoLCBldGMuXG4gICAgICAgIC8vIFRoZSBsZXNzIGRhdGEgd2UgZ2V0IGhlcmUsIHRoZSBtb3JlIHJlbGlhYmxlIHRoaXMgc2hvdWxkIGJlLlxuICAgICAgICAvLyBMZXQncyBza2lwIHRoZSB3aG9sZSBoZWFkZXIgYW5kIGRhc2ggdG8gdGhlIGRhdGEgIVxuICAgICAgICByZWFkZXIuc2tpcCgyMik7XG4gICAgICAgIC8vIGluIHNvbWUgemlwIGNyZWF0ZWQgb24gd2luZG93cywgdGhlIGZpbGVuYW1lIHN0b3JlZCBpbiB0aGUgY2VudHJhbCBkaXIgY29udGFpbnMgXFwgaW5zdGVhZCBvZiAvLlxuICAgICAgICAvLyBTdHJhbmdlbHksIHRoZSBmaWxlbmFtZSBoZXJlIGlzIE9LLlxuICAgICAgICAvLyBJIHdvdWxkIGxvdmUgdG8gdHJlYXQgdGhlc2UgemlwIGZpbGVzIGFzIGNvcnJ1cHRlZCAoc2VlIGh0dHA6Ly93d3cuaW5mby16aXAub3JnL0ZBUS5odG1sI2JhY2tzbGFzaGVzXG4gICAgICAgIC8vIG9yIEFQUE5PVEUjNC40LjE3LjEsIFwiQWxsIHNsYXNoZXMgTVVTVCBiZSBmb3J3YXJkIHNsYXNoZXMgJy8nXCIpIGJ1dCB0aGVyZSBhcmUgYSBsb3Qgb2YgYmFkIHppcCBnZW5lcmF0b3JzLi4uXG4gICAgICAgIC8vIFNlYXJjaCBcInVuemlwIG1pc21hdGNoaW5nIFwibG9jYWxcIiBmaWxlbmFtZSBjb250aW51aW5nIHdpdGggXCJjZW50cmFsXCIgZmlsZW5hbWUgdmVyc2lvblwiIG9uXG4gICAgICAgIC8vIHRoZSBpbnRlcm5ldC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSSB0aGluayBJIHNlZSB0aGUgbG9naWMgaGVyZSA6IHRoZSBjZW50cmFsIGRpcmVjdG9yeSBpcyB1c2VkIHRvIGRpc3BsYXlcbiAgICAgICAgLy8gY29udGVudCBhbmQgdGhlIGxvY2FsIGRpcmVjdG9yeSBpcyB1c2VkIHRvIGV4dHJhY3QgdGhlIGZpbGVzLiBNaXhpbmcgLyBhbmQgXFxcbiAgICAgICAgLy8gbWF5IGJlIHVzZWQgdG8gZGlzcGxheSBcXCB0byB3aW5kb3dzIHVzZXJzIGFuZCB1c2UgLyB3aGVuIGV4dHJhY3RpbmcgdGhlIGZpbGVzLlxuICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGlzIGxlYWQgYWxzbyB0byBzb21lIGlzc3VlcyA6IGh0dHA6Ly9zZWNsaXN0cy5vcmcvZnVsbGRpc2Nsb3N1cmUvMjAwOS9TZXAvMzk0XG4gICAgICAgIHRoaXMuZmlsZU5hbWVMZW5ndGggPSByZWFkZXIucmVhZEludCgyKTtcbiAgICAgICAgbG9jYWxFeHRyYUZpZWxkc0xlbmd0aCA9IHJlYWRlci5yZWFkSW50KDIpOyAvLyBjYW4ndCBiZSBzdXJlIHRoaXMgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aGUgY2VudHJhbCBkaXJcbiAgICAgICAgdGhpcy5maWxlTmFtZSA9IHJlYWRlci5yZWFkU3RyaW5nKHRoaXMuZmlsZU5hbWVMZW5ndGgpO1xuICAgICAgICByZWFkZXIuc2tpcChsb2NhbEV4dHJhRmllbGRzTGVuZ3RoKTtcblxuICAgICAgICBpZiAodGhpcy5jb21wcmVzc2VkU2l6ZSA9PSAtMSB8fCB0aGlzLnVuY29tcHJlc3NlZFNpemUgPT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJ1ZyBvciBjb3JydXB0ZWQgemlwIDogZGlkbid0IGdldCBlbm91Z2ggaW5mb3JtYXRpb25zIGZyb20gdGhlIGNlbnRyYWwgZGlyZWN0b3J5IFwiICsgXCIoY29tcHJlc3NlZFNpemUgPT0gLTEgfHwgdW5jb21wcmVzc2VkU2l6ZSA9PSAtMSlcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wcmVzc2lvbiA9IHV0aWxzLmZpbmRDb21wcmVzc2lvbih0aGlzLmNvbXByZXNzaW9uTWV0aG9kKTtcbiAgICAgICAgaWYgKGNvbXByZXNzaW9uID09PSBudWxsKSB7IC8vIG5vIGNvbXByZXNzaW9uIGZvdW5kXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY29tcHJlc3Npb24gXCIgKyB1dGlscy5wcmV0dHkodGhpcy5jb21wcmVzc2lvbk1ldGhvZCkgKyBcIiB1bmtub3duIChpbm5lciBmaWxlIDogXCIgKyB0aGlzLmZpbGVOYW1lICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVjb21wcmVzc2VkID0gbmV3IENvbXByZXNzZWRPYmplY3QoKTtcbiAgICAgICAgdGhpcy5kZWNvbXByZXNzZWQuY29tcHJlc3NlZFNpemUgPSB0aGlzLmNvbXByZXNzZWRTaXplO1xuICAgICAgICB0aGlzLmRlY29tcHJlc3NlZC51bmNvbXByZXNzZWRTaXplID0gdGhpcy51bmNvbXByZXNzZWRTaXplO1xuICAgICAgICB0aGlzLmRlY29tcHJlc3NlZC5jcmMzMiA9IHRoaXMuY3JjMzI7XG4gICAgICAgIHRoaXMuZGVjb21wcmVzc2VkLmNvbXByZXNzaW9uTWV0aG9kID0gdGhpcy5jb21wcmVzc2lvbk1ldGhvZDtcbiAgICAgICAgdGhpcy5kZWNvbXByZXNzZWQuZ2V0Q29tcHJlc3NlZENvbnRlbnQgPSB0aGlzLnByZXBhcmVDb21wcmVzc2VkQ29udGVudChyZWFkZXIsIHJlYWRlci5pbmRleCwgdGhpcy5jb21wcmVzc2VkU2l6ZSwgY29tcHJlc3Npb24pO1xuICAgICAgICB0aGlzLmRlY29tcHJlc3NlZC5nZXRDb250ZW50ID0gdGhpcy5wcmVwYXJlQ29udGVudChyZWFkZXIsIHJlYWRlci5pbmRleCwgdGhpcy5jb21wcmVzc2VkU2l6ZSwgY29tcHJlc3Npb24sIHRoaXMudW5jb21wcmVzc2VkU2l6ZSk7XG5cbiAgICAgICAgLy8gd2UgbmVlZCB0byBjb21wdXRlIHRoZSBjcmMzMi4uLlxuICAgICAgICBpZiAodGhpcy5sb2FkT3B0aW9ucy5jaGVja0NSQzMyKSB7XG4gICAgICAgICAgICB0aGlzLmRlY29tcHJlc3NlZCA9IHV0aWxzLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsIHRoaXMuZGVjb21wcmVzc2VkLmdldENvbnRlbnQoKSk7XG4gICAgICAgICAgICBpZiAoanN6aXBQcm90by5jcmMzMih0aGlzLmRlY29tcHJlc3NlZCkgIT09IHRoaXMuY3JjMzIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogQ1JDMzIgbWlzbWF0Y2hcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVhZCB0aGUgY2VudHJhbCBwYXJ0IG9mIGEgemlwIGZpbGUgYW5kIGFkZCB0aGUgaW5mbyBpbiB0aGlzIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS5cbiAgICAgKi9cbiAgICByZWFkQ2VudHJhbFBhcnQ6IGZ1bmN0aW9uKHJlYWRlcikge1xuICAgICAgICB0aGlzLnZlcnNpb25NYWRlQnkgPSByZWFkZXIucmVhZEludCgyKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uTmVlZGVkID0gcmVhZGVyLnJlYWRJbnQoMik7XG4gICAgICAgIHRoaXMuYml0RmxhZyA9IHJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICB0aGlzLmNvbXByZXNzaW9uTWV0aG9kID0gcmVhZGVyLnJlYWRTdHJpbmcoMik7XG4gICAgICAgIHRoaXMuZGF0ZSA9IHJlYWRlci5yZWFkRGF0ZSgpO1xuICAgICAgICB0aGlzLmNyYzMyID0gcmVhZGVyLnJlYWRJbnQoNCk7XG4gICAgICAgIHRoaXMuY29tcHJlc3NlZFNpemUgPSByZWFkZXIucmVhZEludCg0KTtcbiAgICAgICAgdGhpcy51bmNvbXByZXNzZWRTaXplID0gcmVhZGVyLnJlYWRJbnQoNCk7XG4gICAgICAgIHRoaXMuZmlsZU5hbWVMZW5ndGggPSByZWFkZXIucmVhZEludCgyKTtcbiAgICAgICAgdGhpcy5leHRyYUZpZWxkc0xlbmd0aCA9IHJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICB0aGlzLmZpbGVDb21tZW50TGVuZ3RoID0gcmVhZGVyLnJlYWRJbnQoMik7XG4gICAgICAgIHRoaXMuZGlza051bWJlclN0YXJ0ID0gcmVhZGVyLnJlYWRJbnQoMik7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxGaWxlQXR0cmlidXRlcyA9IHJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICB0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMgPSByZWFkZXIucmVhZEludCg0KTtcbiAgICAgICAgdGhpcy5sb2NhbEhlYWRlck9mZnNldCA9IHJlYWRlci5yZWFkSW50KDQpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzRW5jcnlwdGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRlZCB6aXAgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZpbGVOYW1lID0gcmVhZGVyLnJlYWRTdHJpbmcodGhpcy5maWxlTmFtZUxlbmd0aCk7XG4gICAgICAgIHRoaXMucmVhZEV4dHJhRmllbGRzKHJlYWRlcik7XG4gICAgICAgIHRoaXMucGFyc2VaSVA2NEV4dHJhRmllbGQocmVhZGVyKTtcbiAgICAgICAgdGhpcy5maWxlQ29tbWVudCA9IHJlYWRlci5yZWFkU3RyaW5nKHRoaXMuZmlsZUNvbW1lbnRMZW5ndGgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZXh0ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzIGFuZCBnZXQgdGhlIHVuaXgvZG9zIHBlcm1pc3Npb25zLlxuICAgICAqL1xuICAgIHByb2Nlc3NBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5peFBlcm1pc3Npb25zID0gbnVsbDtcbiAgICAgICAgdGhpcy5kb3NQZXJtaXNzaW9ucyA9IG51bGw7XG4gICAgICAgIHZhciBtYWRlQnkgPSB0aGlzLnZlcnNpb25NYWRlQnkgPj4gODtcblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHRoZSBET1MgZGlyZWN0b3J5IGZsYWcgc2V0LlxuICAgICAgICAvLyBXZSBsb29rIGZvciBpdCBpbiB0aGUgRE9TIGFuZCBVTklYIHBlcm1pc3Npb25zXG4gICAgICAgIC8vIGJ1dCBzb21lIHVua25vd24gcGxhdGZvcm0gY291bGQgc2V0IGl0IGFzIGEgY29tcGF0aWJpbGl0eSBmbGFnLlxuICAgICAgICB0aGlzLmRpciA9IHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcyAmIDB4MDAxMCA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICBpZihtYWRlQnkgPT09IE1BREVfQllfRE9TKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCA2IGJpdHMgKDAgdG8gNSlcbiAgICAgICAgICAgIHRoaXMuZG9zUGVybWlzc2lvbnMgPSB0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMgJiAweDNGO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYobWFkZUJ5ID09PSBNQURFX0JZX1VOSVgpIHtcbiAgICAgICAgICAgIHRoaXMudW5peFBlcm1pc3Npb25zID0gKHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcyA+PiAxNikgJiAweEZGRkY7XG4gICAgICAgICAgICAvLyB0aGUgb2N0YWwgcGVybWlzc2lvbnMgYXJlIGluICh0aGlzLnVuaXhQZXJtaXNzaW9ucyAmIDB4MDFGRikudG9TdHJpbmcoOCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmYWlsIHNhZmUgOiBpZiB0aGUgbmFtZSBlbmRzIHdpdGggYSAvIGl0IHByb2JhYmx5IG1lYW5zIGEgZm9sZGVyXG4gICAgICAgIGlmICghdGhpcy5kaXIgJiYgdGhpcy5maWxlTmFtZS5zbGljZSgtMSkgPT09ICcvJykge1xuICAgICAgICAgICAgdGhpcy5kaXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBaSVA2NCBleHRyYSBmaWVsZCBhbmQgbWVyZ2UgdGhlIGluZm8gaW4gdGhlIGN1cnJlbnQgWmlwRW50cnkuXG4gICAgICogQHBhcmFtIHtEYXRhUmVhZGVyfSByZWFkZXIgdGhlIHJlYWRlciB0byB1c2UuXG4gICAgICovXG4gICAgcGFyc2VaSVA2NEV4dHJhRmllbGQ6IGZ1bmN0aW9uKHJlYWRlcikge1xuXG4gICAgICAgIGlmICghdGhpcy5leHRyYUZpZWxkc1sweDAwMDFdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaG91bGQgYmUgc29tZXRoaW5nLCBwcmVwYXJpbmcgdGhlIGV4dHJhIHJlYWRlclxuICAgICAgICB2YXIgZXh0cmFSZWFkZXIgPSBuZXcgU3RyaW5nUmVhZGVyKHRoaXMuZXh0cmFGaWVsZHNbMHgwMDAxXS52YWx1ZSk7XG5cbiAgICAgICAgLy8gSSByZWFsbHkgaG9wZSB0aGF0IHRoZXNlIDY0Yml0cyBpbnRlZ2VyIGNhbiBmaXQgaW4gMzIgYml0cyBpbnRlZ2VyLCBiZWNhdXNlIGpzXG4gICAgICAgIC8vIHdvbid0IGxldCB1cyBoYXZlIG1vcmUuXG4gICAgICAgIGlmICh0aGlzLnVuY29tcHJlc3NlZFNpemUgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMpIHtcbiAgICAgICAgICAgIHRoaXMudW5jb21wcmVzc2VkU2l6ZSA9IGV4dHJhUmVhZGVyLnJlYWRJbnQoOCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29tcHJlc3NlZFNpemUgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3NlZFNpemUgPSBleHRyYVJlYWRlci5yZWFkSW50KDgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0ID09PSB1dGlscy5NQVhfVkFMVUVfMzJCSVRTKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0ID0gZXh0cmFSZWFkZXIucmVhZEludCg4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNrTnVtYmVyU3RhcnQgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMpIHtcbiAgICAgICAgICAgIHRoaXMuZGlza051bWJlclN0YXJ0ID0gZXh0cmFSZWFkZXIucmVhZEludCg0KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVhZCB0aGUgY2VudHJhbCBwYXJ0IG9mIGEgemlwIGZpbGUgYW5kIGFkZCB0aGUgaW5mbyBpbiB0aGlzIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS5cbiAgICAgKi9cbiAgICByZWFkRXh0cmFGaWVsZHM6IGZ1bmN0aW9uKHJlYWRlcikge1xuICAgICAgICB2YXIgc3RhcnQgPSByZWFkZXIuaW5kZXgsXG4gICAgICAgICAgICBleHRyYUZpZWxkSWQsXG4gICAgICAgICAgICBleHRyYUZpZWxkTGVuZ3RoLFxuICAgICAgICAgICAgZXh0cmFGaWVsZFZhbHVlO1xuXG4gICAgICAgIHRoaXMuZXh0cmFGaWVsZHMgPSB0aGlzLmV4dHJhRmllbGRzIHx8IHt9O1xuXG4gICAgICAgIHdoaWxlIChyZWFkZXIuaW5kZXggPCBzdGFydCArIHRoaXMuZXh0cmFGaWVsZHNMZW5ndGgpIHtcbiAgICAgICAgICAgIGV4dHJhRmllbGRJZCA9IHJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICAgICAgZXh0cmFGaWVsZExlbmd0aCA9IHJlYWRlci5yZWFkSW50KDIpO1xuICAgICAgICAgICAgZXh0cmFGaWVsZFZhbHVlID0gcmVhZGVyLnJlYWRTdHJpbmcoZXh0cmFGaWVsZExlbmd0aCk7XG5cbiAgICAgICAgICAgIHRoaXMuZXh0cmFGaWVsZHNbZXh0cmFGaWVsZElkXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogZXh0cmFGaWVsZElkLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogZXh0cmFGaWVsZExlbmd0aCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZXh0cmFGaWVsZFZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBBcHBseSBhbiBVVEY4IHRyYW5zZm9ybWF0aW9uIGlmIG5lZWRlZC5cbiAgICAgKi9cbiAgICBoYW5kbGVVVEY4OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlVVRGOCgpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVOYW1lID0ganN6aXBQcm90by51dGY4ZGVjb2RlKHRoaXMuZmlsZU5hbWUpO1xuICAgICAgICAgICAgdGhpcy5maWxlQ29tbWVudCA9IGpzemlwUHJvdG8udXRmOGRlY29kZSh0aGlzLmZpbGVDb21tZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1cGF0aCA9IHRoaXMuZmluZEV4dHJhRmllbGRVbmljb2RlUGF0aCgpO1xuICAgICAgICAgICAgaWYgKHVwYXRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlTmFtZSA9IHVwYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVjb21tZW50ID0gdGhpcy5maW5kRXh0cmFGaWVsZFVuaWNvZGVDb21tZW50KCk7XG4gICAgICAgICAgICBpZiAodWNvbW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVDb21tZW50ID0gdWNvbW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgdW5pY29kZSBwYXRoIGRlY2xhcmVkIGluIHRoZSBleHRyYSBmaWVsZCwgaWYgYW55LlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaWNvZGUgcGF0aCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZmluZEV4dHJhRmllbGRVbmljb2RlUGF0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1cGF0aEZpZWxkID0gdGhpcy5leHRyYUZpZWxkc1sweDcwNzVdO1xuICAgICAgICBpZiAodXBhdGhGaWVsZCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhUmVhZGVyID0gbmV3IFN0cmluZ1JlYWRlcih1cGF0aEZpZWxkLnZhbHVlKTtcblxuICAgICAgICAgICAgLy8gd3JvbmcgdmVyc2lvblxuICAgICAgICAgICAgaWYgKGV4dHJhUmVhZGVyLnJlYWRJbnQoMSkgIT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGhlIGNyYyBvZiB0aGUgZmlsZW5hbWUgY2hhbmdlZCwgdGhpcyBmaWVsZCBpcyBvdXQgb2YgZGF0ZS5cbiAgICAgICAgICAgIGlmIChqc3ppcFByb3RvLmNyYzMyKHRoaXMuZmlsZU5hbWUpICE9PSBleHRyYVJlYWRlci5yZWFkSW50KDQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBqc3ppcFByb3RvLnV0ZjhkZWNvZGUoZXh0cmFSZWFkZXIucmVhZFN0cmluZyh1cGF0aEZpZWxkLmxlbmd0aCAtIDUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgdW5pY29kZSBjb21tZW50IGRlY2xhcmVkIGluIHRoZSBleHRyYSBmaWVsZCwgaWYgYW55LlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaWNvZGUgY29tbWVudCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZmluZEV4dHJhRmllbGRVbmljb2RlQ29tbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1Y29tbWVudEZpZWxkID0gdGhpcy5leHRyYUZpZWxkc1sweDYzNzVdO1xuICAgICAgICBpZiAodWNvbW1lbnRGaWVsZCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhUmVhZGVyID0gbmV3IFN0cmluZ1JlYWRlcih1Y29tbWVudEZpZWxkLnZhbHVlKTtcblxuICAgICAgICAgICAgLy8gd3JvbmcgdmVyc2lvblxuICAgICAgICAgICAgaWYgKGV4dHJhUmVhZGVyLnJlYWRJbnQoMSkgIT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGhlIGNyYyBvZiB0aGUgY29tbWVudCBjaGFuZ2VkLCB0aGlzIGZpZWxkIGlzIG91dCBvZiBkYXRlLlxuICAgICAgICAgICAgaWYgKGpzemlwUHJvdG8uY3JjMzIodGhpcy5maWxlQ29tbWVudCkgIT09IGV4dHJhUmVhZGVyLnJlYWRJbnQoNCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGpzemlwUHJvdG8udXRmOGRlY29kZShleHRyYVJlYWRlci5yZWFkU3RyaW5nKHVjb21tZW50RmllbGQubGVuZ3RoIC0gNSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFppcEVudHJ5O1xuXG59LHtcIi4vY29tcHJlc3NlZE9iamVjdFwiOjEzLFwiLi9vYmplY3RcIjoyNCxcIi4vc3RyaW5nUmVhZGVyXCI6MjYsXCIuL3V0aWxzXCI6MzJ9XSwzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBUb3AgbGV2ZWwgZmlsZSBpcyBqdXN0IGEgbWl4aW4gb2Ygc3VibW9kdWxlcyAmIGNvbnN0YW50c1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNzaWduICAgID0gcmVxdWlyZSgnLi9saWIvdXRpbHMvY29tbW9uJykuYXNzaWduO1xuXG52YXIgZGVmbGF0ZSAgID0gcmVxdWlyZSgnLi9saWIvZGVmbGF0ZScpO1xudmFyIGluZmxhdGUgICA9IHJlcXVpcmUoJy4vbGliL2luZmxhdGUnKTtcbnZhciBjb25zdGFudHMgPSByZXF1aXJlKCcuL2xpYi96bGliL2NvbnN0YW50cycpO1xuXG52YXIgcGFrbyA9IHt9O1xuXG5hc3NpZ24ocGFrbywgZGVmbGF0ZSwgaW5mbGF0ZSwgY29uc3RhbnRzKTtcblxubW9kdWxlLmV4cG9ydHMgPSBwYWtvO1xuXG59LHtcIi4vbGliL2RlZmxhdGVcIjozNixcIi4vbGliL2luZmxhdGVcIjozNyxcIi4vbGliL3V0aWxzL2NvbW1vblwiOjM4LFwiLi9saWIvemxpYi9jb25zdGFudHNcIjo0MX1dLDM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgemxpYl9kZWZsYXRlID0gcmVxdWlyZSgnLi96bGliL2RlZmxhdGUuanMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvY29tbW9uJyk7XG52YXIgc3RyaW5ncyA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaW5ncycpO1xudmFyIG1zZyA9IHJlcXVpcmUoJy4vemxpYi9tZXNzYWdlcycpO1xudmFyIHpzdHJlYW0gPSByZXF1aXJlKCcuL3psaWIvenN0cmVhbScpO1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxudmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG52YXIgWl9GSU5JU0ggICAgICAgID0gNDtcblxudmFyIFpfT0sgICAgICAgICAgICA9IDA7XG52YXIgWl9TVFJFQU1fRU5EICAgID0gMTtcbnZhciBaX1NZTkNfRkxVU0ggICAgPSAyO1xuXG52YXIgWl9ERUZBVUxUX0NPTVBSRVNTSU9OID0gLTE7XG5cbnZhciBaX0RFRkFVTFRfU1RSQVRFR1kgICAgPSAwO1xuXG52YXIgWl9ERUZMQVRFRCAgPSA4O1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qKlxuICogY2xhc3MgRGVmbGF0ZVxuICpcbiAqIEdlbmVyaWMgSlMtc3R5bGUgd3JhcHBlciBmb3IgemxpYiBjYWxscy4gSWYgeW91IGRvbid0IG5lZWRcbiAqIHN0cmVhbWluZyBiZWhhdmlvdXIgLSB1c2UgbW9yZSBzaW1wbGUgZnVuY3Rpb25zOiBbW2RlZmxhdGVdXSxcbiAqIFtbZGVmbGF0ZVJhd11dIGFuZCBbW2d6aXBdXS5cbiAqKi9cblxuLyogaW50ZXJuYWxcbiAqIERlZmxhdGUuY2h1bmtzIC0+IEFycmF5XG4gKlxuICogQ2h1bmtzIG9mIG91dHB1dCBkYXRhLCBpZiBbW0RlZmxhdGUjb25EYXRhXV0gbm90IG92ZXJyaWRlbi5cbiAqKi9cblxuLyoqXG4gKiBEZWZsYXRlLnJlc3VsdCAtPiBVaW50OEFycmF5fEFycmF5XG4gKlxuICogQ29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbRGVmbGF0ZSNvbkRhdGFdXVxuICogYW5kIFtbRGVmbGF0ZSNvbkVuZF1dIGhhbmRsZXJzLiBGaWxsZWQgYWZ0ZXIgeW91IHB1c2ggbGFzdCBjaHVua1xuICogKGNhbGwgW1tEZWZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pICBvciBpZiB5b3VcbiAqIHB1c2ggYSBjaHVuayB3aXRoIGV4cGxpY2l0IGZsdXNoIChjYWxsIFtbRGVmbGF0ZSNwdXNoXV0gd2l0aFxuICogYFpfU1lOQ19GTFVTSGAgcGFyYW0pLlxuICoqL1xuXG4vKipcbiAqIERlZmxhdGUuZXJyIC0+IE51bWJlclxuICpcbiAqIEVycm9yIGNvZGUgYWZ0ZXIgZGVmbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy5cbiAqIFlvdSB3aWxsIG5vdCBuZWVkIGl0IGluIHJlYWwgbGlmZSwgYmVjYXVzZSBkZWZsYXRlIGVycm9yc1xuICogYXJlIHBvc3NpYmxlIG9ubHkgb24gd3Jvbmcgb3B0aW9ucyBvciBiYWQgYG9uRGF0YWAgLyBgb25FbmRgXG4gKiBjdXN0b20gaGFuZGxlcnMuXG4gKiovXG5cbi8qKlxuICogRGVmbGF0ZS5tc2cgLT4gU3RyaW5nXG4gKlxuICogRXJyb3IgbWVzc2FnZSwgaWYgW1tEZWZsYXRlLmVycl1dICE9IDBcbiAqKi9cblxuXG4vKipcbiAqIG5ldyBEZWZsYXRlKG9wdGlvbnMpXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgZGVmbGF0ZSBvcHRpb25zLlxuICpcbiAqIENyZWF0ZXMgbmV3IGRlZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvblxuICogb24gYmFkIHBhcmFtcy4gU3VwcG9ydGVkIG9wdGlvbnM6XG4gKlxuICogLSBgbGV2ZWxgXG4gKiAtIGB3aW5kb3dCaXRzYFxuICogLSBgbWVtTGV2ZWxgXG4gKiAtIGBzdHJhdGVneWBcbiAqXG4gKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZS5cbiAqXG4gKiBBZGRpdGlvbmFsIG9wdGlvbnMsIGZvciBpbnRlcm5hbCBuZWVkczpcbiAqXG4gKiAtIGBjaHVua1NpemVgIC0gc2l6ZSBvZiBnZW5lcmF0ZWQgZGF0YSBjaHVua3MgKDE2SyBieSBkZWZhdWx0KVxuICogLSBgcmF3YCAoQm9vbGVhbikgLSBkbyByYXcgZGVmbGF0ZVxuICogLSBgZ3ppcGAgKEJvb2xlYW4pIC0gY3JlYXRlIGd6aXAgd3JhcHBlclxuICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgXCJiaW5hcnkgc3RyaW5nXCJcbiAqICAgIChlYWNoIGNoYXIgY29kZSBbMC4uMjU1XSlcbiAqIC0gYGhlYWRlcmAgKE9iamVjdCkgLSBjdXN0b20gaGVhZGVyIGZvciBnemlwXG4gKiAgIC0gYHRleHRgIChCb29sZWFuKSAtIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHRcbiAqICAgLSBgdGltZWAgKE51bWJlcikgLSBtb2RpZmljYXRpb24gdGltZSwgdW5peCB0aW1lc3RhbXBcbiAqICAgLSBgb3NgIChOdW1iZXIpIC0gb3BlcmF0aW9uIHN5c3RlbSBjb2RlXG4gKiAgIC0gYGV4dHJhYCAoQXJyYXkpIC0gYXJyYXkgb2YgYnl0ZXMgd2l0aCBleHRyYSBkYXRhIChtYXggNjU1MzYpXG4gKiAgIC0gYG5hbWVgIChTdHJpbmcpIC0gZmlsZSBuYW1lIChiaW5hcnkgc3RyaW5nKVxuICogICAtIGBjb21tZW50YCAoU3RyaW5nKSAtIGNvbW1lbnQgKGJpbmFyeSBzdHJpbmcpXG4gKiAgIC0gYGhjcmNgIChCb29sZWFuKSAtIHRydWUgaWYgaGVhZGVyIGNyYyBzaG91bGQgYmUgYWRkZWRcbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgY2h1bmsxID0gVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIGNodW5rMiA9IFVpbnQ4QXJyYXkoWzEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XSk7XG4gKlxuICogdmFyIGRlZmxhdGUgPSBuZXcgcGFrby5EZWZsYXRlKHsgbGV2ZWw6IDN9KTtcbiAqXG4gKiBkZWZsYXRlLnB1c2goY2h1bmsxLCBmYWxzZSk7XG4gKiBkZWZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVua1xuICpcbiAqIGlmIChkZWZsYXRlLmVycikgeyB0aHJvdyBuZXcgRXJyb3IoZGVmbGF0ZS5lcnIpOyB9XG4gKlxuICogY29uc29sZS5sb2coZGVmbGF0ZS5yZXN1bHQpO1xuICogYGBgXG4gKiovXG52YXIgRGVmbGF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICB0aGlzLm9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe1xuICAgIGxldmVsOiBaX0RFRkFVTFRfQ09NUFJFU1NJT04sXG4gICAgbWV0aG9kOiBaX0RFRkxBVEVELFxuICAgIGNodW5rU2l6ZTogMTYzODQsXG4gICAgd2luZG93Qml0czogMTUsXG4gICAgbWVtTGV2ZWw6IDgsXG4gICAgc3RyYXRlZ3k6IFpfREVGQVVMVF9TVFJBVEVHWSxcbiAgICB0bzogJydcbiAgfSwgb3B0aW9ucyB8fCB7fSk7XG5cbiAgdmFyIG9wdCA9IHRoaXMub3B0aW9ucztcblxuICBpZiAob3B0LnJhdyAmJiAob3B0LndpbmRvd0JpdHMgPiAwKSkge1xuICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzO1xuICB9XG5cbiAgZWxzZSBpZiAob3B0Lmd6aXAgJiYgKG9wdC53aW5kb3dCaXRzID4gMCkgJiYgKG9wdC53aW5kb3dCaXRzIDwgMTYpKSB7XG4gICAgb3B0LndpbmRvd0JpdHMgKz0gMTY7XG4gIH1cblxuICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spXG4gIHRoaXMubXNnICAgID0gJyc7ICAgICAvLyBlcnJvciBtZXNzYWdlXG4gIHRoaXMuZW5kZWQgID0gZmFsc2U7ICAvLyB1c2VkIHRvIGF2b2lkIG11bHRpcGxlIG9uRW5kKCkgY2FsbHNcbiAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGFcblxuICB0aGlzLnN0cm0gPSBuZXcgenN0cmVhbSgpO1xuICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDtcblxuICB2YXIgc3RhdHVzID0gemxpYl9kZWZsYXRlLmRlZmxhdGVJbml0MihcbiAgICB0aGlzLnN0cm0sXG4gICAgb3B0LmxldmVsLFxuICAgIG9wdC5tZXRob2QsXG4gICAgb3B0LndpbmRvd0JpdHMsXG4gICAgb3B0Lm1lbUxldmVsLFxuICAgIG9wdC5zdHJhdGVneVxuICApO1xuXG4gIGlmIChzdGF0dXMgIT09IFpfT0spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pO1xuICB9XG5cbiAgaWYgKG9wdC5oZWFkZXIpIHtcbiAgICB6bGliX2RlZmxhdGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sIG9wdC5oZWFkZXIpO1xuICB9XG59O1xuXG4vKipcbiAqIERlZmxhdGUjcHVzaChkYXRhWywgbW9kZV0pIC0+IEJvb2xlYW5cbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxBcnJheUJ1ZmZlcnxTdHJpbmcpOiBpbnB1dCBkYXRhLiBTdHJpbmdzIHdpbGwgYmVcbiAqICAgY29udmVydGVkIHRvIHV0ZjggYnl0ZSBzZXF1ZW5jZS5cbiAqIC0gbW9kZSAoTnVtYmVyfEJvb2xlYW4pOiAwLi42IGZvciBjb3JyZXNwb25kaW5nIFpfTk9fRkxVU0guLlpfVFJFRSBtb2Rlcy5cbiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFuc2ggWl9GSU5JU0guXG4gKlxuICogU2VuZHMgaW5wdXQgZGF0YSB0byBkZWZsYXRlIHBpcGUsIGdlbmVyYXRpbmcgW1tEZWZsYXRlI29uRGF0YV1dIGNhbGxzIHdpdGhcbiAqIG5ldyBjb21wcmVzc2VkIGNodW5rcy4gUmV0dXJucyBgdHJ1ZWAgb24gc3VjY2Vzcy4gVGhlIGxhc3QgZGF0YSBibG9jayBtdXN0IGhhdmVcbiAqIG1vZGUgWl9GSU5JU0ggKG9yIGB0cnVlYCkuIFRoYXQgd2lsbCBmbHVzaCBpbnRlcm5hbCBwZW5kaW5nIGJ1ZmZlcnMgYW5kIGNhbGxcbiAqIFtbRGVmbGF0ZSNvbkVuZF1dLiBGb3IgaW50ZXJpbSBleHBsaWNpdCBmbHVzaGVzICh3aXRob3V0IGVuZGluZyB0aGUgc3RyZWFtKSB5b3VcbiAqIGNhbiB1c2UgbW9kZSBaX1NZTkNfRkxVU0gsIGtlZXBpbmcgdGhlIGNvbXByZXNzaW9uIGNvbnRleHQuXG4gKlxuICogT24gZmFpbCBjYWxsIFtbRGVmbGF0ZSNvbkVuZF1dIHdpdGggZXJyb3IgY29kZSBhbmQgcmV0dXJuIGZhbHNlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCB0byB1c2UgYFVpbnQ4QXJyYXlgIG9uIGlucHV0IGZvciBiZXN0IHNwZWVkIChvdXRwdXRcbiAqIGFycmF5IGZvcm1hdCBpcyBkZXRlY3RlZCBhdXRvbWF0aWNhbGx5KS4gQWxzbywgZG9uJ3Qgc2tpcCBsYXN0IHBhcmFtIGFuZCBhbHdheXNcbiAqIHVzZSB0aGUgc2FtZSB0eXBlIGluIHlvdXIgY29kZSAoYm9vbGVhbiBvciBudW1iZXIpLiBUaGF0IHdpbGwgaW1wcm92ZSBKUyBzcGVlZC5cbiAqXG4gKiBGb3IgcmVndWxhciBgQXJyYXlgLXMgbWFrZSBzdXJlIGFsbCBlbGVtZW50cyBhcmUgWzAuLjI1NV0uXG4gKlxuICogIyMjIyMgRXhhbXBsZVxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHB1c2goY2h1bmssIGZhbHNlKTsgLy8gcHVzaCBvbmUgb2YgZGF0YSBjaHVua3NcbiAqIC4uLlxuICogcHVzaChjaHVuaywgdHJ1ZSk7ICAvLyBwdXNoIGxhc3QgY2h1bmtcbiAqIGBgYFxuICoqL1xuRGVmbGF0ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGRhdGEsIG1vZGUpIHtcbiAgdmFyIHN0cm0gPSB0aGlzLnN0cm07XG4gIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplO1xuICB2YXIgc3RhdHVzLCBfbW9kZTtcblxuICBpZiAodGhpcy5lbmRlZCkgeyByZXR1cm4gZmFsc2U7IH1cblxuICBfbW9kZSA9IChtb2RlID09PSB+fm1vZGUpID8gbW9kZSA6ICgobW9kZSA9PT0gdHJ1ZSkgPyBaX0ZJTklTSCA6IFpfTk9fRkxVU0gpO1xuXG4gIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIC8vIElmIHdlIG5lZWQgdG8gY29tcHJlc3MgdGV4dCwgY2hhbmdlIGVuY29kaW5nIHRvIHV0ZjguXG4gICAgc3RybS5pbnB1dCA9IHN0cmluZ3Muc3RyaW5nMmJ1ZihkYXRhKTtcbiAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRhdGEpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICB9IGVsc2Uge1xuICAgIHN0cm0uaW5wdXQgPSBkYXRhO1xuICB9XG5cbiAgc3RybS5uZXh0X2luID0gMDtcbiAgc3RybS5hdmFpbF9pbiA9IHN0cm0uaW5wdXQubGVuZ3RoO1xuXG4gIGRvIHtcbiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IHV0aWxzLkJ1ZjgoY2h1bmtTaXplKTtcbiAgICAgIHN0cm0ubmV4dF9vdXQgPSAwO1xuICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemU7XG4gICAgfVxuICAgIHN0YXR1cyA9IHpsaWJfZGVmbGF0ZS5kZWZsYXRlKHN0cm0sIF9tb2RlKTsgICAgLyogbm8gYmFkIHJldHVybiB2YWx1ZSAqL1xuXG4gICAgaWYgKHN0YXR1cyAhPT0gWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gWl9PSykge1xuICAgICAgdGhpcy5vbkVuZChzdGF0dXMpO1xuICAgICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiAoX21vZGUgPT09IFpfRklOSVNIIHx8IF9tb2RlID09PSBaX1NZTkNfRkxVU0gpKSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5vbkRhdGEoc3RyaW5ncy5idWYyYmluc3RyaW5nKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25EYXRhKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IFpfU1RSRUFNX0VORCk7XG5cbiAgLy8gRmluYWxpemUgb24gdGhlIGxhc3QgY2h1bmsuXG4gIGlmIChfbW9kZSA9PT0gWl9GSU5JU0gpIHtcbiAgICBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pO1xuICAgIHRoaXMub25FbmQoc3RhdHVzKTtcbiAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gc3RhdHVzID09PSBaX09LO1xuICB9XG5cbiAgLy8gY2FsbGJhY2sgaW50ZXJpbSByZXN1bHRzIGlmIFpfU1lOQ19GTFVTSC5cbiAgaWYgKF9tb2RlID09PSBaX1NZTkNfRkxVU0gpIHtcbiAgICB0aGlzLm9uRW5kKFpfT0spO1xuICAgIHN0cm0uYXZhaWxfb3V0ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIERlZmxhdGUjb25EYXRhKGNodW5rKSAtPiBWb2lkXG4gKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91cHV0IGRhdGEuIFR5cGUgb2YgYXJyYXkgZGVwZW5kc1xuICogICBvbiBqcyBlbmdpbmUgc3VwcG9ydC4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwgZWFjaCBjaHVua1xuICogICB3aWxsIGJlIHN0cmluZy5cbiAqXG4gKiBCeSBkZWZhdWx0LCBzdG9yZXMgZGF0YSBibG9ja3MgaW4gYGNodW5rc1tdYCBwcm9wZXJ0eSBhbmQgZ2x1ZVxuICogdGhvc2UgaW4gYG9uRW5kYC4gT3ZlcnJpZGUgdGhpcyBoYW5kbGVyLCBpZiB5b3UgbmVlZCBhbm90aGVyIGJlaGF2aW91ci5cbiAqKi9cbkRlZmxhdGUucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uKGNodW5rKSB7XG4gIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspO1xufTtcblxuXG4vKipcbiAqIERlZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkXG4gKiAtIHN0YXR1cyAoTnVtYmVyKTogZGVmbGF0ZSBzdGF0dXMuIDAgKFpfT0spIG9uIHN1Y2Nlc3MsXG4gKiAgIG90aGVyIGlmIG5vdC5cbiAqXG4gKiBDYWxsZWQgb25jZSBhZnRlciB5b3UgdGVsbCBkZWZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpc1xuICogY29tcGxldGUgKFpfRklOSVNIKSBvciBzaG91bGQgYmUgZmx1c2hlZCAoWl9TWU5DX0ZMVVNIKVxuICogb3IgaWYgYW4gZXJyb3IgaGFwcGVuZWQuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsXG4gKiBmcmVlIG1lbW9yeSBhbmQgZmlsbCBgcmVzdWx0c2AgLyBgZXJyYCBwcm9wZXJ0aWVzLlxuICoqL1xuRGVmbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgLy8gT24gc3VjY2VzcyAtIGpvaW5cbiAgaWYgKHN0YXR1cyA9PT0gWl9PSykge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHV0aWxzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpO1xuICAgIH1cbiAgfVxuICB0aGlzLmNodW5rcyA9IFtdO1xuICB0aGlzLmVyciA9IHN0YXR1cztcbiAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnO1xufTtcblxuXG4vKipcbiAqIGRlZmxhdGUoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgZGVmbGF0ZSBvcHRpb25zLlxuICpcbiAqIENvbXByZXNzIGBkYXRhYCB3aXRoIGRlZmxhdGUgYWxyb3J5dGhtIGFuZCBgb3B0aW9uc2AuXG4gKlxuICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOlxuICpcbiAqIC0gbGV2ZWxcbiAqIC0gd2luZG93Qml0c1xuICogLSBtZW1MZXZlbFxuICogLSBzdHJhdGVneVxuICpcbiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZClcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZXNlLlxuICpcbiAqIFN1Z2FyIChvcHRpb25zKTpcbiAqXG4gKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5XG4gKiAgIG5lZ2F0aXZlIHdpbmRvd0JpdHMgaW1wbGljaXRseS5cbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIFwiYmluYXJ5IHN0cmluZ1wiXG4gKiAgICAoZWFjaCBjaGFyIGNvZGUgWzAuLjI1NV0pXG4gKlxuICogIyMjIyMgRXhhbXBsZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKVxuICogICAsIGRhdGEgPSBVaW50OEFycmF5KFsxLDIsMyw0LDUsNiw3LDgsOV0pO1xuICpcbiAqIGNvbnNvbGUubG9nKHBha28uZGVmbGF0ZShkYXRhKSk7XG4gKiBgYGBcbiAqKi9cbmZ1bmN0aW9uIGRlZmxhdGUoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIGRlZmxhdG9yID0gbmV3IERlZmxhdGUob3B0aW9ucyk7XG5cbiAgZGVmbGF0b3IucHVzaChpbnB1dCwgdHJ1ZSk7XG5cbiAgLy8gVGhhdCB3aWxsIG5ldmVyIGhhcHBlbnMsIGlmIHlvdSBkb24ndCBjaGVhdCB3aXRoIG9wdGlvbnMgOilcbiAgaWYgKGRlZmxhdG9yLmVycikgeyB0aHJvdyBkZWZsYXRvci5tc2c7IH1cblxuICByZXR1cm4gZGVmbGF0b3IucmVzdWx0O1xufVxuXG5cbi8qKlxuICogZGVmbGF0ZVJhdyhkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBkZWZsYXRlIG9wdGlvbnMuXG4gKlxuICogVGhlIHNhbWUgYXMgW1tkZWZsYXRlXV0sIGJ1dCBjcmVhdGVzIHJhdyBkYXRhLCB3aXRob3V0IHdyYXBwZXJcbiAqIChoZWFkZXIgYW5kIGFkbGVyMzIgY3JjKS5cbiAqKi9cbmZ1bmN0aW9uIGRlZmxhdGVSYXcoaW5wdXQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMucmF3ID0gdHJ1ZTtcbiAgcmV0dXJuIGRlZmxhdGUoaW5wdXQsIG9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogZ3ppcChkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBkZWZsYXRlIG9wdGlvbnMuXG4gKlxuICogVGhlIHNhbWUgYXMgW1tkZWZsYXRlXV0sIGJ1dCBjcmVhdGUgZ3ppcCB3cmFwcGVyIGluc3RlYWQgb2ZcbiAqIGRlZmxhdGUgb25lLlxuICoqL1xuZnVuY3Rpb24gZ3ppcChpbnB1dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5nemlwID0gdHJ1ZTtcbiAgcmV0dXJuIGRlZmxhdGUoaW5wdXQsIG9wdGlvbnMpO1xufVxuXG5cbmV4cG9ydHMuRGVmbGF0ZSA9IERlZmxhdGU7XG5leHBvcnRzLmRlZmxhdGUgPSBkZWZsYXRlO1xuZXhwb3J0cy5kZWZsYXRlUmF3ID0gZGVmbGF0ZVJhdztcbmV4cG9ydHMuZ3ppcCA9IGd6aXA7XG5cbn0se1wiLi91dGlscy9jb21tb25cIjozOCxcIi4vdXRpbHMvc3RyaW5nc1wiOjM5LFwiLi96bGliL2RlZmxhdGUuanNcIjo0MyxcIi4vemxpYi9tZXNzYWdlc1wiOjQ4LFwiLi96bGliL3pzdHJlYW1cIjo1MH1dLDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgemxpYl9pbmZsYXRlID0gcmVxdWlyZSgnLi96bGliL2luZmxhdGUuanMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvY29tbW9uJyk7XG52YXIgc3RyaW5ncyA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaW5ncycpO1xudmFyIGMgPSByZXF1aXJlKCcuL3psaWIvY29uc3RhbnRzJyk7XG52YXIgbXNnID0gcmVxdWlyZSgnLi96bGliL21lc3NhZ2VzJyk7XG52YXIgenN0cmVhbSA9IHJlcXVpcmUoJy4vemxpYi96c3RyZWFtJyk7XG52YXIgZ3poZWFkZXIgPSByZXF1aXJlKCcuL3psaWIvZ3poZWFkZXInKTtcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBjbGFzcyBJbmZsYXRlXG4gKlxuICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZFxuICogc3RyZWFtaW5nIGJlaGF2aW91ciAtIHVzZSBtb3JlIHNpbXBsZSBmdW5jdGlvbnM6IFtbaW5mbGF0ZV1dXG4gKiBhbmQgW1tpbmZsYXRlUmF3XV0uXG4gKiovXG5cbi8qIGludGVybmFsXG4gKiBpbmZsYXRlLmNodW5rcyAtPiBBcnJheVxuICpcbiAqIENodW5rcyBvZiBvdXRwdXQgZGF0YSwgaWYgW1tJbmZsYXRlI29uRGF0YV1dIG5vdCBvdmVycmlkZW4uXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5yZXN1bHQgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqXG4gKiBVbmNvbXByZXNzZWQgcmVzdWx0LCBnZW5lcmF0ZWQgYnkgZGVmYXVsdCBbW0luZmxhdGUjb25EYXRhXV1cbiAqIGFuZCBbW0luZmxhdGUjb25FbmRdXSBoYW5kbGVycy4gRmlsbGVkIGFmdGVyIHlvdSBwdXNoIGxhc3QgY2h1bmtcbiAqIChjYWxsIFtbSW5mbGF0ZSNwdXNoXV0gd2l0aCBgWl9GSU5JU0hgIC8gYHRydWVgIHBhcmFtKSBvciBpZiB5b3VcbiAqIHB1c2ggYSBjaHVuayB3aXRoIGV4cGxpY2l0IGZsdXNoIChjYWxsIFtbSW5mbGF0ZSNwdXNoXV0gd2l0aFxuICogYFpfU1lOQ19GTFVTSGAgcGFyYW0pLlxuICoqL1xuXG4vKipcbiAqIEluZmxhdGUuZXJyIC0+IE51bWJlclxuICpcbiAqIEVycm9yIGNvZGUgYWZ0ZXIgaW5mbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy5cbiAqIFNob3VsZCBiZSBjaGVja2VkIGlmIGJyb2tlbiBkYXRhIHBvc3NpYmxlLlxuICoqL1xuXG4vKipcbiAqIEluZmxhdGUubXNnIC0+IFN0cmluZ1xuICpcbiAqIEVycm9yIG1lc3NhZ2UsIGlmIFtbSW5mbGF0ZS5lcnJdXSAhPSAwXG4gKiovXG5cblxuLyoqXG4gKiBuZXcgSW5mbGF0ZShvcHRpb25zKVxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBDcmVhdGVzIG5ldyBpbmZsYXRvciBpbnN0YW5jZSB3aXRoIHNwZWNpZmllZCBwYXJhbXMuIFRocm93cyBleGNlcHRpb25cbiAqIG9uIGJhZCBwYXJhbXMuIFN1cHBvcnRlZCBvcHRpb25zOlxuICpcbiAqIC0gYHdpbmRvd0JpdHNgXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuXG4gKlxuICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6XG4gKlxuICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdClcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGluZmxhdGVcbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICogQnkgZGVmYXVsdCwgd2hlbiBubyBvcHRpb25zIHNldCwgYXV0b2RldGVjdCBkZWZsYXRlL2d6aXAgZGF0YSBmb3JtYXQgdmlhXG4gKiB3cmFwcGVyIGhlYWRlci5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgY2h1bmsxID0gVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIGNodW5rMiA9IFVpbnQ4QXJyYXkoWzEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XSk7XG4gKlxuICogdmFyIGluZmxhdGUgPSBuZXcgcGFrby5JbmZsYXRlKHsgbGV2ZWw6IDN9KTtcbiAqXG4gKiBpbmZsYXRlLnB1c2goY2h1bmsxLCBmYWxzZSk7XG4gKiBpbmZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVua1xuICpcbiAqIGlmIChpbmZsYXRlLmVycikgeyB0aHJvdyBuZXcgRXJyb3IoaW5mbGF0ZS5lcnIpOyB9XG4gKlxuICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpO1xuICogYGBgXG4gKiovXG52YXIgSW5mbGF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICB0aGlzLm9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe1xuICAgIGNodW5rU2l6ZTogMTYzODQsXG4gICAgd2luZG93Qml0czogMCxcbiAgICB0bzogJydcbiAgfSwgb3B0aW9ucyB8fCB7fSk7XG5cbiAgdmFyIG9wdCA9IHRoaXMub3B0aW9ucztcblxuICAvLyBGb3JjZSB3aW5kb3cgc2l6ZSBmb3IgYHJhd2AgZGF0YSwgaWYgbm90IHNldCBkaXJlY3RseSxcbiAgLy8gYmVjYXVzZSB3ZSBoYXZlIG5vIGhlYWRlciBmb3IgYXV0b2RldGVjdC5cbiAgaWYgKG9wdC5yYXcgJiYgKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkge1xuICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzO1xuICAgIGlmIChvcHQud2luZG93Qml0cyA9PT0gMCkgeyBvcHQud2luZG93Qml0cyA9IC0xNTsgfVxuICB9XG5cbiAgLy8gSWYgYHdpbmRvd0JpdHNgIG5vdCBkZWZpbmVkIChhbmQgbW9kZSBub3QgcmF3KSAtIHNldCBhdXRvZGV0ZWN0IGZsYWcgZm9yIGd6aXAvZGVmbGF0ZVxuICBpZiAoKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSAmJlxuICAgICAgIShvcHRpb25zICYmIG9wdGlvbnMud2luZG93Qml0cykpIHtcbiAgICBvcHQud2luZG93Qml0cyArPSAzMjtcbiAgfVxuXG4gIC8vIEd6aXAgaGVhZGVyIGhhcyBubyBpbmZvIGFib3V0IHdpbmRvd3Mgc2l6ZSwgd2UgY2FuIGRvIGF1dG9kZXRlY3Qgb25seVxuICAvLyBmb3IgZGVmbGF0ZS4gU28sIGlmIHdpbmRvdyBzaXplIG5vdCBzZXQsIGZvcmNlIGl0IHRvIG1heCB3aGVuIGd6aXAgcG9zc2libGVcbiAgaWYgKChvcHQud2luZG93Qml0cyA+IDE1KSAmJiAob3B0LndpbmRvd0JpdHMgPCA0OCkpIHtcbiAgICAvLyBiaXQgMyAoMTYpIC0+IGd6aXBwZWQgZGF0YVxuICAgIC8vIGJpdCA0ICgzMikgLT4gYXV0b2RldGVjdCBnemlwL2RlZmxhdGVcbiAgICBpZiAoKG9wdC53aW5kb3dCaXRzICYgMTUpID09PSAwKSB7XG4gICAgICBvcHQud2luZG93Qml0cyB8PSAxNTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spXG4gIHRoaXMubXNnICAgID0gJyc7ICAgICAvLyBlcnJvciBtZXNzYWdlXG4gIHRoaXMuZW5kZWQgID0gZmFsc2U7ICAvLyB1c2VkIHRvIGF2b2lkIG11bHRpcGxlIG9uRW5kKCkgY2FsbHNcbiAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGFcblxuICB0aGlzLnN0cm0gICA9IG5ldyB6c3RyZWFtKCk7XG4gIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwO1xuXG4gIHZhciBzdGF0dXMgID0gemxpYl9pbmZsYXRlLmluZmxhdGVJbml0MihcbiAgICB0aGlzLnN0cm0sXG4gICAgb3B0LndpbmRvd0JpdHNcbiAgKTtcblxuICBpZiAoc3RhdHVzICE9PSBjLlpfT0spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pO1xuICB9XG5cbiAgdGhpcy5oZWFkZXIgPSBuZXcgZ3poZWFkZXIoKTtcblxuICB6bGliX2luZmxhdGUuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sIHRoaXMuaGVhZGVyKTtcbn07XG5cbi8qKlxuICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBtb2RlXSkgLT4gQm9vbGVhblxuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fEFycmF5QnVmZmVyfFN0cmluZyk6IGlucHV0IGRhdGFcbiAqIC0gbW9kZSAoTnVtYmVyfEJvb2xlYW4pOiAwLi42IGZvciBjb3JyZXNwb25kaW5nIFpfTk9fRkxVU0guLlpfVFJFRSBtb2Rlcy5cbiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFuc2ggWl9GSU5JU0guXG4gKlxuICogU2VuZHMgaW5wdXQgZGF0YSB0byBpbmZsYXRlIHBpcGUsIGdlbmVyYXRpbmcgW1tJbmZsYXRlI29uRGF0YV1dIGNhbGxzIHdpdGhcbiAqIG5ldyBvdXRwdXQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QgaGF2ZVxuICogbW9kZSBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcgYnVmZmVycyBhbmQgY2FsbFxuICogW1tJbmZsYXRlI29uRW5kXV0uIEZvciBpbnRlcmltIGV4cGxpY2l0IGZsdXNoZXMgKHdpdGhvdXQgZW5kaW5nIHRoZSBzdHJlYW0pIHlvdVxuICogY2FuIHVzZSBtb2RlIFpfU1lOQ19GTFVTSCwga2VlcGluZyB0aGUgZGVjb21wcmVzc2lvbiBjb250ZXh0LlxuICpcbiAqIE9uIGZhaWwgY2FsbCBbW0luZmxhdGUjb25FbmRdXSB3aXRoIGVycm9yIGNvZGUgYW5kIHJldHVybiBmYWxzZS5cbiAqXG4gKiBXZSBzdHJvbmdseSByZWNvbW1lbmQgdG8gdXNlIGBVaW50OEFycmF5YCBvbiBpbnB1dCBmb3IgYmVzdCBzcGVlZCAob3V0cHV0XG4gKiBmb3JtYXQgaXMgZGV0ZWN0ZWQgYXV0b21hdGljYWxseSkuIEFsc28sIGRvbid0IHNraXAgbGFzdCBwYXJhbSBhbmQgYWx3YXlzXG4gKiB1c2UgdGhlIHNhbWUgdHlwZSBpbiB5b3VyIGNvZGUgKGJvb2xlYW4gb3IgbnVtYmVyKS4gVGhhdCB3aWxsIGltcHJvdmUgSlMgc3BlZWQuXG4gKlxuICogRm9yIHJlZ3VsYXIgYEFycmF5YC1zIG1ha2Ugc3VyZSBhbGwgZWxlbWVudHMgYXJlIFswLi4yNTVdLlxuICpcbiAqICMjIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBwdXNoKGNodW5rLCBmYWxzZSk7IC8vIHB1c2ggb25lIG9mIGRhdGEgY2h1bmtzXG4gKiAuLi5cbiAqIHB1c2goY2h1bmssIHRydWUpOyAgLy8gcHVzaCBsYXN0IGNodW5rXG4gKiBgYGBcbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihkYXRhLCBtb2RlKSB7XG4gIHZhciBzdHJtID0gdGhpcy5zdHJtO1xuICB2YXIgY2h1bmtTaXplID0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZTtcbiAgdmFyIHN0YXR1cywgX21vZGU7XG4gIHZhciBuZXh0X291dF91dGY4LCB0YWlsLCB1dGY4c3RyO1xuXG4gIC8vIEZsYWcgdG8gcHJvcGVybHkgcHJvY2VzcyBaX0JVRl9FUlJPUiBvbiB0ZXN0aW5nIGluZmxhdGUgY2FsbFxuICAvLyB3aGVuIHdlIGNoZWNrIHRoYXQgYWxsIG91dHB1dCBkYXRhIHdhcyBmbHVzaGVkLlxuICB2YXIgYWxsb3dCdWZFcnJvciA9IGZhbHNlO1xuXG4gIGlmICh0aGlzLmVuZGVkKSB7IHJldHVybiBmYWxzZTsgfVxuICBfbW9kZSA9IChtb2RlID09PSB+fm1vZGUpID8gbW9kZSA6ICgobW9kZSA9PT0gdHJ1ZSkgPyBjLlpfRklOSVNIIDogYy5aX05PX0ZMVVNIKTtcblxuICAvLyBDb252ZXJ0IGRhdGEgaWYgbmVlZGVkXG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBPbmx5IGJpbmFyeSBzdHJpbmdzIGNhbiBiZSBkZWNvbXByZXNzZWQgb24gcHJhY3RpY2VcbiAgICBzdHJtLmlucHV0ID0gc3RyaW5ncy5iaW5zdHJpbmcyYnVmKGRhdGEpO1xuICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHtcbiAgICBzdHJtLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgc3RybS5pbnB1dCA9IGRhdGE7XG4gIH1cblxuICBzdHJtLm5leHRfaW4gPSAwO1xuICBzdHJtLmF2YWlsX2luID0gc3RybS5pbnB1dC5sZW5ndGg7XG5cbiAgZG8ge1xuICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgc3RybS5vdXRwdXQgPSBuZXcgdXRpbHMuQnVmOChjaHVua1NpemUpO1xuICAgICAgc3RybS5uZXh0X291dCA9IDA7XG4gICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTtcbiAgICB9XG5cbiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZShzdHJtLCBjLlpfTk9fRkxVU0gpOyAgICAvKiBubyBiYWQgcmV0dXJuIHZhbHVlICovXG5cbiAgICBpZiAoc3RhdHVzID09PSBjLlpfQlVGX0VSUk9SICYmIGFsbG93QnVmRXJyb3IgPT09IHRydWUpIHtcbiAgICAgIHN0YXR1cyA9IGMuWl9PSztcbiAgICAgIGFsbG93QnVmRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCAmJiBzdGF0dXMgIT09IGMuWl9PSykge1xuICAgICAgdGhpcy5vbkVuZChzdGF0dXMpO1xuICAgICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHN0cm0ubmV4dF9vdXQpIHtcbiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdGF0dXMgPT09IGMuWl9TVFJFQU1fRU5EIHx8IChzdHJtLmF2YWlsX2luID09PSAwICYmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCB8fCBfbW9kZSA9PT0gYy5aX1NZTkNfRkxVU0gpKSkge1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG5cbiAgICAgICAgICBuZXh0X291dF91dGY4ID0gc3RyaW5ncy51dGY4Ym9yZGVyKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KTtcblxuICAgICAgICAgIHRhaWwgPSBzdHJtLm5leHRfb3V0IC0gbmV4dF9vdXRfdXRmODtcbiAgICAgICAgICB1dGY4c3RyID0gc3RyaW5ncy5idWYyc3RyaW5nKHN0cm0ub3V0cHV0LCBuZXh0X291dF91dGY4KTtcblxuICAgICAgICAgIC8vIG1vdmUgdGFpbFxuICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSB0YWlsO1xuICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplIC0gdGFpbDtcbiAgICAgICAgICBpZiAodGFpbCkgeyB1dGlscy5hcnJheVNldChzdHJtLm91dHB1dCwgc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgsIHRhaWwsIDApOyB9XG5cbiAgICAgICAgICB0aGlzLm9uRGF0YSh1dGY4c3RyKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25EYXRhKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBubyBtb3JlIGlucHV0IGRhdGEsIHdlIHNob3VsZCBjaGVjayB0aGF0IGludGVybmFsIGluZmxhdGUgYnVmZmVyc1xuICAgIC8vIGFyZSBmbHVzaGVkLiBUaGUgb25seSB3YXkgdG8gZG8gaXQgd2hlbiBhdmFpbF9vdXQgPSAwIC0gcnVuIG9uZSBtb3JlXG4gICAgLy8gaW5mbGF0ZSBwYXNzLiBCdXQgaWYgb3V0cHV0IGRhdGEgbm90IGV4aXN0cywgaW5mbGF0ZSByZXR1cm4gWl9CVUZfRVJST1IuXG4gICAgLy8gSGVyZSB3ZSBzZXQgZmxhZyB0byBwcm9jZXNzIHRoaXMgZXJyb3IgcHJvcGVybHkuXG4gICAgLy9cbiAgICAvLyBOT1RFLiBEZWZsYXRlIGRvZXMgbm90IHJldHVybiBlcnJvciBpbiB0aGlzIGNhc2UgYW5kIGRvZXMgbm90IG5lZWRzIHN1Y2hcbiAgICAvLyBsb2dpYy5cbiAgICBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiBzdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgYWxsb3dCdWZFcnJvciA9IHRydWU7XG4gICAgfVxuXG4gIH0gd2hpbGUgKChzdHJtLmF2YWlsX2luID4gMCB8fCBzdHJtLmF2YWlsX291dCA9PT0gMCkgJiYgc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCk7XG5cbiAgaWYgKHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQpIHtcbiAgICBfbW9kZSA9IGMuWl9GSU5JU0g7XG4gIH1cblxuICAvLyBGaW5hbGl6ZSBvbiB0aGUgbGFzdCBjaHVuay5cbiAgaWYgKF9tb2RlID09PSBjLlpfRklOSVNIKSB7XG4gICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVFbmQodGhpcy5zdHJtKTtcbiAgICB0aGlzLm9uRW5kKHN0YXR1cyk7XG4gICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgcmV0dXJuIHN0YXR1cyA9PT0gYy5aX09LO1xuICB9XG5cbiAgLy8gY2FsbGJhY2sgaW50ZXJpbSByZXN1bHRzIGlmIFpfU1lOQ19GTFVTSC5cbiAgaWYgKF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkge1xuICAgIHRoaXMub25FbmQoYy5aX09LKTtcbiAgICBzdHJtLmF2YWlsX291dCA9IDA7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZFxuICogLSBjaHVuayAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBvdXB1dCBkYXRhLiBUeXBlIG9mIGFycmF5IGRlcGVuZHNcbiAqICAgb24ganMgZW5naW5lIHN1cHBvcnQuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsIGVhY2ggY2h1bmtcbiAqICAgd2lsbCBiZSBzdHJpbmcuXG4gKlxuICogQnkgZGVmYXVsdCwgc3RvcmVzIGRhdGEgYmxvY2tzIGluIGBjaHVua3NbXWAgcHJvcGVydHkgYW5kIGdsdWVcbiAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuXG4gKiovXG5JbmZsYXRlLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihjaHVuaykge1xuICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRW5kKHN0YXR1cykgLT4gVm9pZFxuICogLSBzdGF0dXMgKE51bWJlcik6IGluZmxhdGUgc3RhdHVzLiAwIChaX09LKSBvbiBzdWNjZXNzLFxuICogICBvdGhlciBpZiBub3QuXG4gKlxuICogQ2FsbGVkIGVpdGhlciBhZnRlciB5b3UgdGVsbCBpbmZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpc1xuICogY29tcGxldGUgKFpfRklOSVNIKSBvciBzaG91bGQgYmUgZmx1c2hlZCAoWl9TWU5DX0ZMVVNIKVxuICogb3IgaWYgYW4gZXJyb3IgaGFwcGVuZWQuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsXG4gKiBmcmVlIG1lbW9yeSBhbmQgZmlsbCBgcmVzdWx0c2AgLyBgZXJyYCBwcm9wZXJ0aWVzLlxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgLy8gT24gc3VjY2VzcyAtIGpvaW5cbiAgaWYgKHN0YXR1cyA9PT0gYy5aX09LKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEdsdWUgJiBjb252ZXJ0IGhlcmUsIHVudGlsIHdlIHRlYWNoIHBha28gdG8gc2VuZFxuICAgICAgLy8gdXRmOCBhbGxpZ25lZCBzdHJpbmdzIHRvIG9uRGF0YVxuICAgICAgdGhpcy5yZXN1bHQgPSB0aGlzLmNodW5rcy5qb2luKCcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHQgPSB1dGlscy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTtcbiAgICB9XG4gIH1cbiAgdGhpcy5jaHVua3MgPSBbXTtcbiAgdGhpcy5lcnIgPSBzdGF0dXM7XG4gIHRoaXMubXNnID0gdGhpcy5zdHJtLm1zZztcbn07XG5cblxuLyoqXG4gKiBpbmZsYXRlKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIERlY29tcHJlc3MgYGRhdGFgIHdpdGggaW5mbGF0ZS91bmd6aXAgYW5kIGBvcHRpb25zYC4gQXV0b2RldGVjdFxuICogZm9ybWF0IHZpYSB3cmFwcGVyIGhlYWRlciBieSBkZWZhdWx0LiBUaGF0J3Mgd2h5IHdlIGRvbid0IHByb3ZpZGVcbiAqIHNlcGFyYXRlIGB1bmd6aXBgIG1ldGhvZC5cbiAqXG4gKiBTdXBwb3J0ZWQgb3B0aW9ucyBhcmU6XG4gKlxuICogLSB3aW5kb3dCaXRzXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogU3VnYXIgKG9wdGlvbnMpOlxuICpcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gc2F5IHRoYXQgd2Ugd29yayB3aXRoIHJhdyBzdHJlYW0sIGlmIHlvdSBkb24ndCB3aXNoIHRvIHNwZWNpZnlcbiAqICAgbmVnYXRpdmUgd2luZG93Qml0cyBpbXBsaWNpdGx5LlxuICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkXG4gKiAgIGZyb20gdXRmOCB0byB1dGYxNiAoamF2YXNjcmlwdCkgc3RyaW5nLiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLFxuICogICBjaHVuayBsZW5ndGggY2FuIGRpZmZlciBmcm9tIGBjaHVua1NpemVgLCBkZXBlbmRpbmcgb24gY29udGVudC5cbiAqXG4gKlxuICogIyMjIyMgRXhhbXBsZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKVxuICogICAsIGlucHV0ID0gcGFrby5kZWZsYXRlKFsxLDIsMyw0LDUsNiw3LDgsOV0pXG4gKiAgICwgb3V0cHV0O1xuICpcbiAqIHRyeSB7XG4gKiAgIG91dHB1dCA9IHBha28uaW5mbGF0ZShpbnB1dCk7XG4gKiB9IGNhdGNoIChlcnIpXG4gKiAgIGNvbnNvbGUubG9nKGVycik7XG4gKiB9XG4gKiBgYGBcbiAqKi9cbmZ1bmN0aW9uIGluZmxhdGUoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIGluZmxhdG9yID0gbmV3IEluZmxhdGUob3B0aW9ucyk7XG5cbiAgaW5mbGF0b3IucHVzaChpbnB1dCwgdHJ1ZSk7XG5cbiAgLy8gVGhhdCB3aWxsIG5ldmVyIGhhcHBlbnMsIGlmIHlvdSBkb24ndCBjaGVhdCB3aXRoIG9wdGlvbnMgOilcbiAgaWYgKGluZmxhdG9yLmVycikgeyB0aHJvdyBpbmZsYXRvci5tc2c7IH1cblxuICByZXR1cm4gaW5mbGF0b3IucmVzdWx0O1xufVxuXG5cbi8qKlxuICogaW5mbGF0ZVJhdyhkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBUaGUgc2FtZSBhcyBbW2luZmxhdGVdXSwgYnV0IGNyZWF0ZXMgcmF3IGRhdGEsIHdpdGhvdXQgd3JhcHBlclxuICogKGhlYWRlciBhbmQgYWRsZXIzMiBjcmMpLlxuICoqL1xuZnVuY3Rpb24gaW5mbGF0ZVJhdyhpbnB1dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5yYXcgPSB0cnVlO1xuICByZXR1cm4gaW5mbGF0ZShpbnB1dCwgb3B0aW9ucyk7XG59XG5cblxuLyoqXG4gKiB1bmd6aXAoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogSnVzdCBzaG9ydGN1dCB0byBbW2luZmxhdGVdXSwgYmVjYXVzZSBpdCBhdXRvZGV0ZWN0cyBmb3JtYXRcbiAqIGJ5IGhlYWRlci5jb250ZW50LiBEb25lIGZvciBjb252ZW5pZW5jZS5cbiAqKi9cblxuXG5leHBvcnRzLkluZmxhdGUgPSBJbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlID0gaW5mbGF0ZTtcbmV4cG9ydHMuaW5mbGF0ZVJhdyA9IGluZmxhdGVSYXc7XG5leHBvcnRzLnVuZ3ppcCAgPSBpbmZsYXRlO1xuXG59LHtcIi4vdXRpbHMvY29tbW9uXCI6MzgsXCIuL3V0aWxzL3N0cmluZ3NcIjozOSxcIi4vemxpYi9jb25zdGFudHNcIjo0MSxcIi4vemxpYi9nemhlYWRlclwiOjQ0LFwiLi96bGliL2luZmxhdGUuanNcIjo0NixcIi4vemxpYi9tZXNzYWdlc1wiOjQ4LFwiLi96bGliL3pzdHJlYW1cIjo1MH1dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgVFlQRURfT0sgPSAgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIFVpbnQxNkFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIEludDMyQXJyYXkgIT09ICd1bmRlZmluZWQnKTtcblxuXG5leHBvcnRzLmFzc2lnbiA9IGZ1bmN0aW9uIChvYmogLypmcm9tMSwgZnJvbTIsIGZyb20zLCAuLi4qLykge1xuICB2YXIgc291cmNlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkge1xuICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgaWYgKCFzb3VyY2UpIHsgY29udGludWU7IH1cblxuICAgIGlmICh0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAnbXVzdCBiZSBub24tb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgcCBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgb2JqW3BdID0gc291cmNlW3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG5cbi8vIHJlZHVjZSBidWZmZXIgc2l6ZSwgYXZvaWRpbmcgbWVtIGNvcHlcbmV4cG9ydHMuc2hyaW5rQnVmID0gZnVuY3Rpb24gKGJ1Ziwgc2l6ZSkge1xuICBpZiAoYnVmLmxlbmd0aCA9PT0gc2l6ZSkgeyByZXR1cm4gYnVmOyB9XG4gIGlmIChidWYuc3ViYXJyYXkpIHsgcmV0dXJuIGJ1Zi5zdWJhcnJheSgwLCBzaXplKTsgfVxuICBidWYubGVuZ3RoID0gc2l6ZTtcbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxudmFyIGZuVHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBpZiAoc3JjLnN1YmFycmF5ICYmIGRlc3Quc3ViYXJyYXkpIHtcbiAgICAgIGRlc3Quc2V0KHNyYy5zdWJhcnJheShzcmNfb2Zmcywgc3JjX29mZnMrbGVuKSwgZGVzdF9vZmZzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRmFsbGJhY2sgdG8gb3JkaW5hcnkgYXJyYXlcbiAgICBmb3IgKHZhciBpPTA7IGk8bGVuOyBpKyspIHtcbiAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTtcbiAgICB9XG4gIH0sXG4gIC8vIEpvaW4gYXJyYXkgb2YgY2h1bmtzIHRvIHNpbmdsZSBhcnJheS5cbiAgZmxhdHRlbkNodW5rczogZnVuY3Rpb24oY2h1bmtzKSB7XG4gICAgdmFyIGksIGwsIGxlbiwgcG9zLCBjaHVuaywgcmVzdWx0O1xuXG4gICAgLy8gY2FsY3VsYXRlIGRhdGEgbGVuZ3RoXG4gICAgbGVuID0gMDtcbiAgICBmb3IgKGk9MCwgbD1jaHVua3MubGVuZ3RoOyBpPGw7IGkrKykge1xuICAgICAgbGVuICs9IGNodW5rc1tpXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gam9pbiBjaHVua3NcbiAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIHBvcyA9IDA7XG4gICAgZm9yIChpPTAsIGw9Y2h1bmtzLmxlbmd0aDsgaTxsOyBpKyspIHtcbiAgICAgIGNodW5rID0gY2h1bmtzW2ldO1xuICAgICAgcmVzdWx0LnNldChjaHVuaywgcG9zKTtcbiAgICAgIHBvcyArPSBjaHVuay5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxudmFyIGZuVW50eXBlZCA9IHtcbiAgYXJyYXlTZXQ6IGZ1bmN0aW9uIChkZXN0LCBzcmMsIHNyY19vZmZzLCBsZW4sIGRlc3Rfb2Zmcykge1xuICAgIGZvciAodmFyIGk9MDsgaTxsZW47IGkrKykge1xuICAgICAgZGVzdFtkZXN0X29mZnMgKyBpXSA9IHNyY1tzcmNfb2ZmcyArIGldO1xuICAgIH1cbiAgfSxcbiAgLy8gSm9pbiBhcnJheSBvZiBjaHVua3MgdG8gc2luZ2xlIGFycmF5LlxuICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbihjaHVua3MpIHtcbiAgICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBjaHVua3MpO1xuICB9XG59O1xuXG5cbi8vIEVuYWJsZS9EaXNhYmxlIHR5cGVkIGFycmF5cyB1c2UsIGZvciB0ZXN0aW5nXG4vL1xuZXhwb3J0cy5zZXRUeXBlZCA9IGZ1bmN0aW9uIChvbikge1xuICBpZiAob24pIHtcbiAgICBleHBvcnRzLkJ1ZjggID0gVWludDhBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjE2ID0gVWludDE2QXJyYXk7XG4gICAgZXhwb3J0cy5CdWYzMiA9IEludDMyQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5UeXBlZCk7XG4gIH0gZWxzZSB7XG4gICAgZXhwb3J0cy5CdWY4ICA9IEFycmF5O1xuICAgIGV4cG9ydHMuQnVmMTYgPSBBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjMyID0gQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5VbnR5cGVkKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZXRUeXBlZChUWVBFRF9PSyk7XG5cbn0se31dLDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIFN0cmluZyBlbmNvZGUvZGVjb2RlIGhlbHBlcnNcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL2NvbW1vbicpO1xuXG5cbi8vIFF1aWNrIGNoZWNrIGlmIHdlIGNhbiB1c2UgZmFzdCBhcnJheSB0byBiaW4gc3RyaW5nIGNvbnZlcnNpb25cbi8vXG4vLyAtIGFwcGx5KEFycmF5KSBjYW4gZmFpbCBvbiBBbmRyb2lkIDIuMlxuLy8gLSBhcHBseShVaW50OEFycmF5KSBjYW4gZmFpbCBvbiBpT1MgNS4xIFNhZmFyeVxuLy9cbnZhciBTVFJfQVBQTFlfT0sgPSB0cnVlO1xudmFyIFNUUl9BUFBMWV9VSUFfT0sgPSB0cnVlO1xuXG50cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIFswXSk7IH0gY2F0Y2goX18pIHsgU1RSX0FQUExZX09LID0gZmFsc2U7IH1cbnRyeSB7IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoMSkpOyB9IGNhdGNoKF9fKSB7IFNUUl9BUFBMWV9VSUFfT0sgPSBmYWxzZTsgfVxuXG5cbi8vIFRhYmxlIHdpdGggdXRmOCBsZW5ndGhzIChjYWxjdWxhdGVkIGJ5IGZpcnN0IGJ5dGUgb2Ygc2VxdWVuY2UpXG4vLyBOb3RlLCB0aGF0IDUgJiA2LWJ5dGUgdmFsdWVzIGFuZCBzb21lIDQtYnl0ZSB2YWx1ZXMgY2FuIG5vdCBiZSByZXByZXNlbnRlZCBpbiBKUyxcbi8vIGJlY2F1c2UgbWF4IHBvc3NpYmxlIGNvZGVwb2ludCBpcyAweDEwZmZmZlxudmFyIF91dGY4bGVuID0gbmV3IHV0aWxzLkJ1ZjgoMjU2KTtcbmZvciAodmFyIHE9MDsgcTwyNTY7IHErKykge1xuICBfdXRmOGxlbltxXSA9IChxID49IDI1MiA/IDYgOiBxID49IDI0OCA/IDUgOiBxID49IDI0MCA/IDQgOiBxID49IDIyNCA/IDMgOiBxID49IDE5MiA/IDIgOiAxKTtcbn1cbl91dGY4bGVuWzI1NF09X3V0ZjhsZW5bMjU0XT0xOyAvLyBJbnZhbGlkIHNlcXVlbmNlIHN0YXJ0XG5cblxuLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKVxuZXhwb3J0cy5zdHJpbmcyYnVmID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgYnVmLCBjLCBjMiwgbV9wb3MsIGksIHN0cl9sZW4gPSBzdHIubGVuZ3RoLCBidWZfbGVuID0gMDtcblxuICAvLyBjb3VudCBiaW5hcnkgc2l6ZVxuICBmb3IgKG1fcG9zID0gMDsgbV9wb3MgPCBzdHJfbGVuOyBtX3BvcysrKSB7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTtcbiAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zKzEgPCBzdHJfbGVuKSkge1xuICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcysxKTtcbiAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7XG4gICAgICAgIG1fcG9zKys7XG4gICAgICB9XG4gICAgfVxuICAgIGJ1Zl9sZW4gKz0gYyA8IDB4ODAgPyAxIDogYyA8IDB4ODAwID8gMiA6IGMgPCAweDEwMDAwID8gMyA6IDQ7XG4gIH1cblxuICAvLyBhbGxvY2F0ZSBidWZmZXJcbiAgYnVmID0gbmV3IHV0aWxzLkJ1ZjgoYnVmX2xlbik7XG5cbiAgLy8gY29udmVydFxuICBmb3IgKGk9MCwgbV9wb3MgPSAwOyBpIDwgYnVmX2xlbjsgbV9wb3MrKykge1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7XG4gICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcysxIDwgc3RyX2xlbikpIHtcbiAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MrMSk7XG4gICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XG4gICAgICAgIGMgPSAweDEwMDAwICsgKChjIC0gMHhkODAwKSA8PCAxMCkgKyAoYzIgLSAweGRjMDApO1xuICAgICAgICBtX3BvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYyA8IDB4ODApIHtcbiAgICAgIC8qIG9uZSBieXRlICovXG4gICAgICBidWZbaSsrXSA9IGM7XG4gICAgfSBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgIC8qIHR3byBieXRlcyAqL1xuICAgICAgYnVmW2krK10gPSAweEMwIHwgKGMgPj4+IDYpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICB9IGVsc2UgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICAvKiB0aHJlZSBieXRlcyAqL1xuICAgICAgYnVmW2krK10gPSAweEUwIHwgKGMgPj4+IDEyKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiBmb3VyIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4ZjAgfCAoYyA+Pj4gMTgpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDEyICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmO1xufTtcblxuLy8gSGVscGVyICh1c2VkIGluIDIgcGxhY2VzKVxuZnVuY3Rpb24gYnVmMmJpbnN0cmluZyhidWYsIGxlbikge1xuICAvLyB1c2UgZmFsbGJhY2sgZm9yIGJpZyBhcnJheXMgdG8gYXZvaWQgc3RhY2sgb3ZlcmZsb3dcbiAgaWYgKGxlbiA8IDY1NTM3KSB7XG4gICAgaWYgKChidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX1VJQV9PSykgfHwgKCFidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX09LKSkge1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdXRpbHMuc2hyaW5rQnVmKGJ1ZiwgbGVuKSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHJlc3VsdCA9ICcnO1xuICBmb3IgKHZhciBpPTA7IGkgPCBsZW47IGkrKykge1xuICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLyBDb252ZXJ0IGJ5dGUgYXJyYXkgdG8gYmluYXJ5IHN0cmluZ1xuZXhwb3J0cy5idWYyYmluc3RyaW5nID0gZnVuY3Rpb24oYnVmKSB7XG4gIHJldHVybiBidWYyYmluc3RyaW5nKGJ1ZiwgYnVmLmxlbmd0aCk7XG59O1xuXG5cbi8vIENvbnZlcnQgYmluYXJ5IHN0cmluZyAodHlwZWQsIHdoZW4gcG9zc2libGUpXG5leHBvcnRzLmJpbnN0cmluZzJidWYgPSBmdW5jdGlvbihzdHIpIHtcbiAgdmFyIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KHN0ci5sZW5ndGgpO1xuICBmb3IgKHZhciBpPTAsIGxlbj1idWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBidWZbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYnVmO1xufTtcblxuXG4vLyBjb252ZXJ0IGFycmF5IHRvIHN0cmluZ1xuZXhwb3J0cy5idWYyc3RyaW5nID0gZnVuY3Rpb24gKGJ1ZiwgbWF4KSB7XG4gIHZhciBpLCBvdXQsIGMsIGNfbGVuO1xuICB2YXIgbGVuID0gbWF4IHx8IGJ1Zi5sZW5ndGg7XG5cbiAgLy8gUmVzZXJ2ZSBtYXggcG9zc2libGUgbGVuZ3RoICgyIHdvcmRzIHBlciBjaGFyKVxuICAvLyBOQjogYnkgdW5rbm93biByZWFzb25zLCBBcnJheSBpcyBzaWduaWZpY2FudGx5IGZhc3RlciBmb3JcbiAgLy8gICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgdGhhbiBVaW50MTZBcnJheS5cbiAgdmFyIHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbioyKTtcblxuICBmb3IgKG91dD0wLCBpPTA7IGk8bGVuOykge1xuICAgIGMgPSBidWZbaSsrXTtcbiAgICAvLyBxdWljayBwcm9jZXNzIGFzY2lpXG4gICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9XG5cbiAgICBjX2xlbiA9IF91dGY4bGVuW2NdO1xuICAgIC8vIHNraXAgNSAmIDYgYnl0ZSBjb2Rlc1xuICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuLTE7IGNvbnRpbnVlOyB9XG5cbiAgICAvLyBhcHBseSBtYXNrIG9uIGZpcnN0IGJ5dGVcbiAgICBjICY9IGNfbGVuID09PSAyID8gMHgxZiA6IGNfbGVuID09PSAzID8gMHgwZiA6IDB4MDc7XG4gICAgLy8gam9pbiB0aGUgcmVzdFxuICAgIHdoaWxlIChjX2xlbiA+IDEgJiYgaSA8IGxlbikge1xuICAgICAgYyA9IChjIDw8IDYpIHwgKGJ1ZltpKytdICYgMHgzZik7XG4gICAgICBjX2xlbi0tO1xuICAgIH1cblxuICAgIC8vIHRlcm1pbmF0ZWQgYnkgZW5kIG9mIHN0cmluZz9cbiAgICBpZiAoY19sZW4gPiAxKSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgY29udGludWU7IH1cblxuICAgIGlmIChjIDwgMHgxMDAwMCkge1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gYztcbiAgICB9IGVsc2Uge1xuICAgICAgYyAtPSAweDEwMDAwO1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkODAwIHwgKChjID4+IDEwKSAmIDB4M2ZmKTtcbiAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZGMwMCB8IChjICYgMHgzZmYpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYyYmluc3RyaW5nKHV0ZjE2YnVmLCBvdXQpO1xufTtcblxuXG4vLyBDYWxjdWxhdGUgbWF4IHBvc3NpYmxlIHBvc2l0aW9uIGluIHV0ZjggYnVmZmVyLFxuLy8gdGhhdCB3aWxsIG5vdCBicmVhayBzZXF1ZW5jZS4gSWYgdGhhdCdzIG5vdCBwb3NzaWJsZVxuLy8gLSAodmVyeSBzbWFsbCBsaW1pdHMpIHJldHVybiBtYXggc2l6ZSBhcyBpcy5cbi8vXG4vLyBidWZbXSAtIHV0ZjggYnl0ZXMgYXJyYXlcbi8vIG1heCAgIC0gbGVuZ3RoIGxpbWl0IChtYW5kYXRvcnkpO1xuZXhwb3J0cy51dGY4Ym9yZGVyID0gZnVuY3Rpb24oYnVmLCBtYXgpIHtcbiAgdmFyIHBvcztcblxuICBtYXggPSBtYXggfHwgYnVmLmxlbmd0aDtcbiAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsgbWF4ID0gYnVmLmxlbmd0aDsgfVxuXG4gIC8vIGdvIGJhY2sgZnJvbSBsYXN0IHBvc2l0aW9uLCB1bnRpbCBzdGFydCBvZiBzZXF1ZW5jZSBmb3VuZFxuICBwb3MgPSBtYXgtMTtcbiAgd2hpbGUgKHBvcyA+PSAwICYmIChidWZbcG9zXSAmIDB4QzApID09PSAweDgwKSB7IHBvcy0tOyB9XG5cbiAgLy8gRnVja3VwIC0gdmVyeSBzbWFsbCBhbmQgYnJva2VuIHNlcXVlbmNlLFxuICAvLyByZXR1cm4gbWF4LCBiZWNhdXNlIHdlIHNob3VsZCByZXR1cm4gc29tZXRoaW5nIGFueXdheS5cbiAgaWYgKHBvcyA8IDApIHsgcmV0dXJuIG1heDsgfVxuXG4gIC8vIElmIHdlIGNhbWUgdG8gc3RhcnQgb2YgYnVmZmVyIC0gdGhhdCBtZWFucyB2dWZmZXIgaXMgdG9vIHNtYWxsLFxuICAvLyByZXR1cm4gbWF4IHRvby5cbiAgaWYgKHBvcyA9PT0gMCkgeyByZXR1cm4gbWF4OyB9XG5cbiAgcmV0dXJuIChwb3MgKyBfdXRmOGxlbltidWZbcG9zXV0gPiBtYXgpID8gcG9zIDogbWF4O1xufTtcblxufSx7XCIuL2NvbW1vblwiOjM4fV0sNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBOb3RlOiBhZGxlcjMyIHRha2VzIDEyJSBmb3IgbGV2ZWwgMCBhbmQgMiUgZm9yIGxldmVsIDYuXG4vLyBJdCBkb2Vzbid0IHdvcnRoIHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25hIGFzIGluIG9yaWdpbmFsLlxuLy8gU21hbGwgc2l6ZSBpcyBwcmVmZXJhYmxlLlxuXG5mdW5jdGlvbiBhZGxlcjMyKGFkbGVyLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsXG4gICAgICBzMiA9ICgoYWRsZXIgPj4+IDE2KSAmIDB4ZmZmZikgfDAsXG4gICAgICBuID0gMDtcblxuICB3aGlsZSAobGVuICE9PSAwKSB7XG4gICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXBcbiAgICAvLyBzMiBpbiAzMS1iaXRzLCBiZWNhdXNlIHdlIGZvcmNlIHNpZ25lZCBpbnRzLlxuICAgIC8vIGluIG90aGVyIGNhc2UgJT0gd2lsbCBmYWlsLlxuICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjtcbiAgICBsZW4gLT0gbjtcblxuICAgIGRvIHtcbiAgICAgIHMxID0gKHMxICsgYnVmW3BvcysrXSkgfDA7XG4gICAgICBzMiA9IChzMiArIHMxKSB8MDtcbiAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgczEgJT0gNjU1MjE7XG4gICAgczIgJT0gNjU1MjE7XG4gIH1cblxuICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyO1xuXG59LHt9XSw0MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAvKiBBbGxvd2VkIGZsdXNoIHZhbHVlczsgc2VlIGRlZmxhdGUoKSBhbmQgaW5mbGF0ZSgpIGJlbG93IGZvciBkZXRhaWxzICovXG4gIFpfTk9fRkxVU0g6ICAgICAgICAgMCxcbiAgWl9QQVJUSUFMX0ZMVVNIOiAgICAxLFxuICBaX1NZTkNfRkxVU0g6ICAgICAgIDIsXG4gIFpfRlVMTF9GTFVTSDogICAgICAgMyxcbiAgWl9GSU5JU0g6ICAgICAgICAgICA0LFxuICBaX0JMT0NLOiAgICAgICAgICAgIDUsXG4gIFpfVFJFRVM6ICAgICAgICAgICAgNixcblxuICAvKiBSZXR1cm4gY29kZXMgZm9yIHRoZSBjb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGZ1bmN0aW9ucy4gTmVnYXRpdmUgdmFsdWVzXG4gICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICAqL1xuICBaX09LOiAgICAgICAgICAgICAgIDAsXG4gIFpfU1RSRUFNX0VORDogICAgICAgMSxcbiAgWl9ORUVEX0RJQ1Q6ICAgICAgICAyLFxuICBaX0VSUk5POiAgICAgICAgICAgLTEsXG4gIFpfU1RSRUFNX0VSUk9SOiAgICAtMixcbiAgWl9EQVRBX0VSUk9SOiAgICAgIC0zLFxuICAvL1pfTUVNX0VSUk9SOiAgICAgLTQsXG4gIFpfQlVGX0VSUk9SOiAgICAgICAtNSxcbiAgLy9aX1ZFUlNJT05fRVJST1I6IC02LFxuXG4gIC8qIGNvbXByZXNzaW9uIGxldmVscyAqL1xuICBaX05PX0NPTVBSRVNTSU9OOiAgICAgICAgIDAsXG4gIFpfQkVTVF9TUEVFRDogICAgICAgICAgICAgMSxcbiAgWl9CRVNUX0NPTVBSRVNTSU9OOiAgICAgICA5LFxuICBaX0RFRkFVTFRfQ09NUFJFU1NJT046ICAgLTEsXG5cblxuICBaX0ZJTFRFUkVEOiAgICAgICAgICAgICAgIDEsXG4gIFpfSFVGRk1BTl9PTkxZOiAgICAgICAgICAgMixcbiAgWl9STEU6ICAgICAgICAgICAgICAgICAgICAzLFxuICBaX0ZJWEVEOiAgICAgICAgICAgICAgICAgIDQsXG4gIFpfREVGQVVMVF9TVFJBVEVHWTogICAgICAgMCxcblxuICAvKiBQb3NzaWJsZSB2YWx1ZXMgb2YgdGhlIGRhdGFfdHlwZSBmaWVsZCAodGhvdWdoIHNlZSBpbmZsYXRlKCkpICovXG4gIFpfQklOQVJZOiAgICAgICAgICAgICAgICAgMCxcbiAgWl9URVhUOiAgICAgICAgICAgICAgICAgICAxLFxuICAvL1pfQVNDSUk6ICAgICAgICAgICAgICAgIDEsIC8vID0gWl9URVhUIChkZXByZWNhdGVkKVxuICBaX1VOS05PV046ICAgICAgICAgICAgICAgIDIsXG5cbiAgLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovXG4gIFpfREVGTEFURUQ6ICAgICAgICAgICAgICAgOFxuICAvL1pfTlVMTDogICAgICAgICAgICAgICAgIG51bGwgLy8gVXNlIC0xIG9yIG51bGwgaW5saW5lLCBkZXBlbmRpbmcgb24gdmFyIHR5cGVcbn07XG5cbn0se31dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLy8gTm90ZTogd2UgY2FuJ3QgZ2V0IHNpZ25pZmljYW50IHNwZWVkIGJvb3N0IGhlcmUuXG4vLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzXG4vLyBhbmQgYXJyYXkgdG9vbHMgZGVwZW5kZW5jaWVzLlxuXG5cbi8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlXG5mdW5jdGlvbiBtYWtlVGFibGUoKSB7XG4gIHZhciBjLCB0YWJsZSA9IFtdO1xuXG4gIGZvciAodmFyIG4gPTA7IG4gPCAyNTY7IG4rKykge1xuICAgIGMgPSBuO1xuICAgIGZvciAodmFyIGsgPTA7IGsgPCA4OyBrKyspIHtcbiAgICAgIGMgPSAoKGMmMSkgPyAoMHhFREI4ODMyMCBeIChjID4+PiAxKSkgOiAoYyA+Pj4gMSkpO1xuICAgIH1cbiAgICB0YWJsZVtuXSA9IGM7XG4gIH1cblxuICByZXR1cm4gdGFibGU7XG59XG5cbi8vIENyZWF0ZSB0YWJsZSBvbiBsb2FkLiBKdXN0IDI1NSBzaWduZWQgbG9uZ3MuIE5vdCBhIHByb2JsZW0uXG52YXIgY3JjVGFibGUgPSBtYWtlVGFibGUoKTtcblxuXG5mdW5jdGlvbiBjcmMzMihjcmMsIGJ1ZiwgbGVuLCBwb3MpIHtcbiAgdmFyIHQgPSBjcmNUYWJsZSxcbiAgICAgIGVuZCA9IHBvcyArIGxlbjtcblxuICBjcmMgPSBjcmMgXiAoLTEpO1xuXG4gIGZvciAodmFyIGkgPSBwb3M7IGkgPCBlbmQ7IGkrKykge1xuICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdO1xuICB9XG5cbiAgcmV0dXJuIChjcmMgXiAoLTEpKTsgLy8gPj4+IDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBjcmMzMjtcblxufSx7fV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgICA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbW1vbicpO1xudmFyIHRyZWVzICAgPSByZXF1aXJlKCcuL3RyZWVzJyk7XG52YXIgYWRsZXIzMiA9IHJlcXVpcmUoJy4vYWRsZXIzMicpO1xudmFyIGNyYzMyICAgPSByZXF1aXJlKCcuL2NyYzMyJyk7XG52YXIgbXNnICAgPSByZXF1aXJlKCcuL21lc3NhZ2VzJyk7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbnZhciBaX05PX0ZMVVNIICAgICAgPSAwO1xudmFyIFpfUEFSVElBTF9GTFVTSCA9IDE7XG4vL3ZhciBaX1NZTkNfRkxVU0ggICAgPSAyO1xudmFyIFpfRlVMTF9GTFVTSCAgICA9IDM7XG52YXIgWl9GSU5JU0ggICAgICAgID0gNDtcbnZhciBaX0JMT0NLICAgICAgICAgPSA1O1xuLy92YXIgWl9UUkVFUyAgICAgICAgID0gNjtcblxuXG4vKiBSZXR1cm4gY29kZXMgZm9yIHRoZSBjb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGZ1bmN0aW9ucy4gTmVnYXRpdmUgdmFsdWVzXG4gKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gKi9cbnZhciBaX09LICAgICAgICAgICAgPSAwO1xudmFyIFpfU1RSRUFNX0VORCAgICA9IDE7XG4vL3ZhciBaX05FRURfRElDVCAgICAgPSAyO1xuLy92YXIgWl9FUlJOTyAgICAgICAgID0gLTE7XG52YXIgWl9TVFJFQU1fRVJST1IgID0gLTI7XG52YXIgWl9EQVRBX0VSUk9SICAgID0gLTM7XG4vL3ZhciBaX01FTV9FUlJPUiAgICAgPSAtNDtcbnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTtcbi8vdmFyIFpfVkVSU0lPTl9FUlJPUiA9IC02O1xuXG5cbi8qIGNvbXByZXNzaW9uIGxldmVscyAqL1xuLy92YXIgWl9OT19DT01QUkVTU0lPTiAgICAgID0gMDtcbi8vdmFyIFpfQkVTVF9TUEVFRCAgICAgICAgICA9IDE7XG4vL3ZhciBaX0JFU1RfQ09NUFJFU1NJT04gICAgPSA5O1xudmFyIFpfREVGQVVMVF9DT01QUkVTU0lPTiA9IC0xO1xuXG5cbnZhciBaX0ZJTFRFUkVEICAgICAgICAgICAgPSAxO1xudmFyIFpfSFVGRk1BTl9PTkxZICAgICAgICA9IDI7XG52YXIgWl9STEUgICAgICAgICAgICAgICAgID0gMztcbnZhciBaX0ZJWEVEICAgICAgICAgICAgICAgPSA0O1xudmFyIFpfREVGQVVMVF9TVFJBVEVHWSAgICA9IDA7XG5cbi8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbi8vdmFyIFpfQklOQVJZICAgICAgICAgICAgICA9IDA7XG4vL3ZhciBaX1RFWFQgICAgICAgICAgICAgICAgPSAxO1xuLy92YXIgWl9BU0NJSSAgICAgICAgICAgICAgID0gMTsgLy8gPSBaX1RFWFRcbnZhciBaX1VOS05PV04gICAgICAgICAgICAgPSAyO1xuXG5cbi8qIFRoZSBkZWZsYXRlIGNvbXByZXNzaW9uIG1ldGhvZCAqL1xudmFyIFpfREVGTEFURUQgID0gODtcblxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG52YXIgTUFYX01FTV9MRVZFTCA9IDk7XG4vKiBNYXhpbXVtIHZhbHVlIGZvciBtZW1MZXZlbCBpbiBkZWZsYXRlSW5pdDIgKi9cbnZhciBNQVhfV0JJVFMgPSAxNTtcbi8qIDMySyBMWjc3IHdpbmRvdyAqL1xudmFyIERFRl9NRU1fTEVWRUwgPSA4O1xuXG5cbnZhciBMRU5HVEhfQ09ERVMgID0gMjk7XG4vKiBudW1iZXIgb2YgbGVuZ3RoIGNvZGVzLCBub3QgY291bnRpbmcgdGhlIHNwZWNpYWwgRU5EX0JMT0NLIGNvZGUgKi9cbnZhciBMSVRFUkFMUyAgICAgID0gMjU2O1xuLyogbnVtYmVyIG9mIGxpdGVyYWwgYnl0ZXMgMC4uMjU1ICovXG52YXIgTF9DT0RFUyAgICAgICA9IExJVEVSQUxTICsgMSArIExFTkdUSF9DT0RFUztcbi8qIG51bWJlciBvZiBMaXRlcmFsIG9yIExlbmd0aCBjb2RlcywgaW5jbHVkaW5nIHRoZSBFTkRfQkxPQ0sgY29kZSAqL1xudmFyIERfQ09ERVMgICAgICAgPSAzMDtcbi8qIG51bWJlciBvZiBkaXN0YW5jZSBjb2RlcyAqL1xudmFyIEJMX0NPREVTICAgICAgPSAxOTtcbi8qIG51bWJlciBvZiBjb2RlcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSBiaXQgbGVuZ3RocyAqL1xudmFyIEhFQVBfU0laRSAgICAgPSAyKkxfQ09ERVMgKyAxO1xuLyogbWF4aW11bSBoZWFwIHNpemUgKi9cbnZhciBNQVhfQklUUyAgPSAxNTtcbi8qIEFsbCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JJVFMgYml0cyAqL1xuXG52YXIgTUlOX01BVENIID0gMztcbnZhciBNQVhfTUFUQ0ggPSAyNTg7XG52YXIgTUlOX0xPT0tBSEVBRCA9IChNQVhfTUFUQ0ggKyBNSU5fTUFUQ0ggKyAxKTtcblxudmFyIFBSRVNFVF9ESUNUID0gMHgyMDtcblxudmFyIElOSVRfU1RBVEUgPSA0MjtcbnZhciBFWFRSQV9TVEFURSA9IDY5O1xudmFyIE5BTUVfU1RBVEUgPSA3MztcbnZhciBDT01NRU5UX1NUQVRFID0gOTE7XG52YXIgSENSQ19TVEFURSA9IDEwMztcbnZhciBCVVNZX1NUQVRFID0gMTEzO1xudmFyIEZJTklTSF9TVEFURSA9IDY2NjtcblxudmFyIEJTX05FRURfTU9SRSAgICAgID0gMTsgLyogYmxvY2sgbm90IGNvbXBsZXRlZCwgbmVlZCBtb3JlIGlucHV0IG9yIG1vcmUgb3V0cHV0ICovXG52YXIgQlNfQkxPQ0tfRE9ORSAgICAgPSAyOyAvKiBibG9jayBmbHVzaCBwZXJmb3JtZWQgKi9cbnZhciBCU19GSU5JU0hfU1RBUlRFRCA9IDM7IC8qIGZpbmlzaCBzdGFydGVkLCBuZWVkIG9ubHkgbW9yZSBvdXRwdXQgYXQgbmV4dCBkZWZsYXRlICovXG52YXIgQlNfRklOSVNIX0RPTkUgICAgPSA0OyAvKiBmaW5pc2ggZG9uZSwgYWNjZXB0IG5vIG1vcmUgaW5wdXQgb3Igb3V0cHV0ICovXG5cbnZhciBPU19DT0RFID0gMHgwMzsgLy8gVW5peCA6KSAuIERvbid0IGRldGVjdCwgdXNlIHRoaXMgZGVmYXVsdC5cblxuZnVuY3Rpb24gZXJyKHN0cm0sIGVycm9yQ29kZSkge1xuICBzdHJtLm1zZyA9IG1zZ1tlcnJvckNvZGVdO1xuICByZXR1cm4gZXJyb3JDb2RlO1xufVxuXG5mdW5jdGlvbiByYW5rKGYpIHtcbiAgcmV0dXJuICgoZikgPDwgMSkgLSAoKGYpID4gNCA/IDkgOiAwKTtcbn1cblxuZnVuY3Rpb24gemVybyhidWYpIHsgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7IHdoaWxlICgtLWxlbiA+PSAwKSB7IGJ1ZltsZW5dID0gMDsgfSB9XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZS4gQWxsIGRlZmxhdGUoKSBvdXRwdXQgZ29lc1xuICogdGhyb3VnaCB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdFxuICogdG8gYXZvaWQgYWxsb2NhdGluZyBhIGxhcmdlIHN0cm0tPm91dHB1dCBidWZmZXIgYW5kIGNvcHlpbmcgaW50byBpdC5cbiAqIChTZWUgYWxzbyByZWFkX2J1ZigpKS5cbiAqL1xuZnVuY3Rpb24gZmx1c2hfcGVuZGluZyhzdHJtKSB7XG4gIHZhciBzID0gc3RybS5zdGF0ZTtcblxuICAvL190cl9mbHVzaF9iaXRzKHMpO1xuICB2YXIgbGVuID0gcy5wZW5kaW5nO1xuICBpZiAobGVuID4gc3RybS5hdmFpbF9vdXQpIHtcbiAgICBsZW4gPSBzdHJtLmF2YWlsX291dDtcbiAgfVxuICBpZiAobGVuID09PSAwKSB7IHJldHVybjsgfVxuXG4gIHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmdfb3V0LCBsZW4sIHN0cm0ubmV4dF9vdXQpO1xuICBzdHJtLm5leHRfb3V0ICs9IGxlbjtcbiAgcy5wZW5kaW5nX291dCArPSBsZW47XG4gIHN0cm0udG90YWxfb3V0ICs9IGxlbjtcbiAgc3RybS5hdmFpbF9vdXQgLT0gbGVuO1xuICBzLnBlbmRpbmcgLT0gbGVuO1xuICBpZiAocy5wZW5kaW5nID09PSAwKSB7XG4gICAgcy5wZW5kaW5nX291dCA9IDA7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBmbHVzaF9ibG9ja19vbmx5IChzLCBsYXN0KSB7XG4gIHRyZWVzLl90cl9mbHVzaF9ibG9jayhzLCAocy5ibG9ja19zdGFydCA+PSAwID8gcy5ibG9ja19zdGFydCA6IC0xKSwgcy5zdHJzdGFydCAtIHMuYmxvY2tfc3RhcnQsIGxhc3QpO1xuICBzLmJsb2NrX3N0YXJ0ID0gcy5zdHJzdGFydDtcbiAgZmx1c2hfcGVuZGluZyhzLnN0cm0pO1xufVxuXG5cbmZ1bmN0aW9uIHB1dF9ieXRlKHMsIGIpIHtcbiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFB1dCBhIHNob3J0IGluIHRoZSBwZW5kaW5nIGJ1ZmZlci4gVGhlIDE2LWJpdCB2YWx1ZSBpcyBwdXQgaW4gTVNCIG9yZGVyLlxuICogSU4gYXNzZXJ0aW9uOiB0aGUgc3RyZWFtIHN0YXRlIGlzIGNvcnJlY3QgYW5kIHRoZXJlIGlzIGVub3VnaCByb29tIGluXG4gKiBwZW5kaW5nX2J1Zi5cbiAqL1xuZnVuY3Rpb24gcHV0U2hvcnRNU0IocywgYikge1xuLy8gIHB1dF9ieXRlKHMsIChCeXRlKShiID4+IDgpKTtcbi8vICBwdXRfYnl0ZShzLCAoQnl0ZSkoYiAmIDB4ZmYpKTtcbiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSAoYiA+Pj4gOCkgJiAweGZmO1xuICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IGIgJiAweGZmO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogUmVhZCBhIG5ldyBidWZmZXIgZnJvbSB0aGUgY3VycmVudCBpbnB1dCBzdHJlYW0sIHVwZGF0ZSB0aGUgYWRsZXIzMlxuICogYW5kIHRvdGFsIG51bWJlciBvZiBieXRlcyByZWFkLiAgQWxsIGRlZmxhdGUoKSBpbnB1dCBnb2VzIHRocm91Z2hcbiAqIHRoaXMgZnVuY3Rpb24gc28gc29tZSBhcHBsaWNhdGlvbnMgbWF5IHdpc2ggdG8gbW9kaWZ5IGl0IHRvIGF2b2lkXG4gKiBhbGxvY2F0aW5nIGEgbGFyZ2Ugc3RybS0+aW5wdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGZyb20gaXQuXG4gKiAoU2VlIGFsc28gZmx1c2hfcGVuZGluZygpKS5cbiAqL1xuZnVuY3Rpb24gcmVhZF9idWYoc3RybSwgYnVmLCBzdGFydCwgc2l6ZSkge1xuICB2YXIgbGVuID0gc3RybS5hdmFpbF9pbjtcblxuICBpZiAobGVuID4gc2l6ZSkgeyBsZW4gPSBzaXplOyB9XG4gIGlmIChsZW4gPT09IDApIHsgcmV0dXJuIDA7IH1cblxuICBzdHJtLmF2YWlsX2luIC09IGxlbjtcblxuICB1dGlscy5hcnJheVNldChidWYsIHN0cm0uaW5wdXQsIHN0cm0ubmV4dF9pbiwgbGVuLCBzdGFydCk7XG4gIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDEpIHtcbiAgICBzdHJtLmFkbGVyID0gYWRsZXIzMihzdHJtLmFkbGVyLCBidWYsIGxlbiwgc3RhcnQpO1xuICB9XG5cbiAgZWxzZSBpZiAoc3RybS5zdGF0ZS53cmFwID09PSAyKSB7XG4gICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuLCBzdGFydCk7XG4gIH1cblxuICBzdHJtLm5leHRfaW4gKz0gbGVuO1xuICBzdHJtLnRvdGFsX2luICs9IGxlbjtcblxuICByZXR1cm4gbGVuO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2V0IG1hdGNoX3N0YXJ0IHRvIHRoZSBsb25nZXN0IG1hdGNoIHN0YXJ0aW5nIGF0IHRoZSBnaXZlbiBzdHJpbmcgYW5kXG4gKiByZXR1cm4gaXRzIGxlbmd0aC4gTWF0Y2hlcyBzaG9ydGVyIG9yIGVxdWFsIHRvIHByZXZfbGVuZ3RoIGFyZSBkaXNjYXJkZWQsXG4gKiBpbiB3aGljaCBjYXNlIHRoZSByZXN1bHQgaXMgZXF1YWwgdG8gcHJldl9sZW5ndGggYW5kIG1hdGNoX3N0YXJ0IGlzXG4gKiBnYXJiYWdlLlxuICogSU4gYXNzZXJ0aW9uczogY3VyX21hdGNoIGlzIHRoZSBoZWFkIG9mIHRoZSBoYXNoIGNoYWluIGZvciB0aGUgY3VycmVudFxuICogICBzdHJpbmcgKHN0cnN0YXJ0KSBhbmQgaXRzIGRpc3RhbmNlIGlzIDw9IE1BWF9ESVNULCBhbmQgcHJldl9sZW5ndGggPj0gMVxuICogT1VUIGFzc2VydGlvbjogdGhlIG1hdGNoIGxlbmd0aCBpcyBub3QgZ3JlYXRlciB0aGFuIHMtPmxvb2thaGVhZC5cbiAqL1xuZnVuY3Rpb24gbG9uZ2VzdF9tYXRjaChzLCBjdXJfbWF0Y2gpIHtcbiAgdmFyIGNoYWluX2xlbmd0aCA9IHMubWF4X2NoYWluX2xlbmd0aDsgICAgICAvKiBtYXggaGFzaCBjaGFpbiBsZW5ndGggKi9cbiAgdmFyIHNjYW4gPSBzLnN0cnN0YXJ0OyAvKiBjdXJyZW50IHN0cmluZyAqL1xuICB2YXIgbWF0Y2g7ICAgICAgICAgICAgICAgICAgICAgICAvKiBtYXRjaGVkIHN0cmluZyAqL1xuICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBvZiBjdXJyZW50IG1hdGNoICovXG4gIHZhciBiZXN0X2xlbiA9IHMucHJldl9sZW5ndGg7ICAgICAgICAgICAgICAvKiBiZXN0IG1hdGNoIGxlbmd0aCBzbyBmYXIgKi9cbiAgdmFyIG5pY2VfbWF0Y2ggPSBzLm5pY2VfbWF0Y2g7ICAgICAgICAgICAgIC8qIHN0b3AgaWYgbWF0Y2ggbG9uZyBlbm91Z2ggKi9cbiAgdmFyIGxpbWl0ID0gKHMuc3Ryc3RhcnQgPiAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkgP1xuICAgICAgcy5zdHJzdGFydCAtIChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpIDogMC8qTklMKi87XG5cbiAgdmFyIF93aW4gPSBzLndpbmRvdzsgLy8gc2hvcnRjdXRcblxuICB2YXIgd21hc2sgPSBzLndfbWFzaztcbiAgdmFyIHByZXYgID0gcy5wcmV2O1xuXG4gIC8qIFN0b3Agd2hlbiBjdXJfbWF0Y2ggYmVjb21lcyA8PSBsaW1pdC4gVG8gc2ltcGxpZnkgdGhlIGNvZGUsXG4gICAqIHdlIHByZXZlbnQgbWF0Y2hlcyB3aXRoIHRoZSBzdHJpbmcgb2Ygd2luZG93IGluZGV4IDAuXG4gICAqL1xuXG4gIHZhciBzdHJlbmQgPSBzLnN0cnN0YXJ0ICsgTUFYX01BVENIO1xuICB2YXIgc2Nhbl9lbmQxICA9IF93aW5bc2NhbiArIGJlc3RfbGVuIC0gMV07XG4gIHZhciBzY2FuX2VuZCAgID0gX3dpbltzY2FuICsgYmVzdF9sZW5dO1xuXG4gIC8qIFRoZSBjb2RlIGlzIG9wdGltaXplZCBmb3IgSEFTSF9CSVRTID49IDggYW5kIE1BWF9NQVRDSC0yIG11bHRpcGxlIG9mIDE2LlxuICAgKiBJdCBpcyBlYXN5IHRvIGdldCByaWQgb2YgdGhpcyBvcHRpbWl6YXRpb24gaWYgbmVjZXNzYXJ5LlxuICAgKi9cbiAgLy8gQXNzZXJ0KHMtPmhhc2hfYml0cyA+PSA4ICYmIE1BWF9NQVRDSCA9PSAyNTgsIFwiQ29kZSB0b28gY2xldmVyXCIpO1xuXG4gIC8qIERvIG5vdCB3YXN0ZSB0b28gbXVjaCB0aW1lIGlmIHdlIGFscmVhZHkgaGF2ZSBhIGdvb2QgbWF0Y2g6ICovXG4gIGlmIChzLnByZXZfbGVuZ3RoID49IHMuZ29vZF9tYXRjaCkge1xuICAgIGNoYWluX2xlbmd0aCA+Pj0gMjtcbiAgfVxuICAvKiBEbyBub3QgbG9vayBmb3IgbWF0Y2hlcyBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgaW5wdXQuIFRoaXMgaXMgbmVjZXNzYXJ5XG4gICAqIHRvIG1ha2UgZGVmbGF0ZSBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgaWYgKG5pY2VfbWF0Y2ggPiBzLmxvb2thaGVhZCkgeyBuaWNlX21hdGNoID0gcy5sb29rYWhlYWQ7IH1cblxuICAvLyBBc3NlcnQoKHVsZylzLT5zdHJzdGFydCA8PSBzLT53aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFELCBcIm5lZWQgbG9va2FoZWFkXCIpO1xuXG4gIGRvIHtcbiAgICAvLyBBc3NlcnQoY3VyX21hdGNoIDwgcy0+c3Ryc3RhcnQsIFwibm8gZnV0dXJlXCIpO1xuICAgIG1hdGNoID0gY3VyX21hdGNoO1xuXG4gICAgLyogU2tpcCB0byBuZXh0IG1hdGNoIGlmIHRoZSBtYXRjaCBsZW5ndGggY2Fubm90IGluY3JlYXNlXG4gICAgICogb3IgaWYgdGhlIG1hdGNoIGxlbmd0aCBpcyBsZXNzIHRoYW4gMi4gIE5vdGUgdGhhdCB0aGUgY2hlY2tzIGJlbG93XG4gICAgICogZm9yIGluc3VmZmljaWVudCBsb29rYWhlYWQgb25seSBvY2N1ciBvY2Nhc2lvbmFsbHkgZm9yIHBlcmZvcm1hbmNlXG4gICAgICogcmVhc29ucy4gIFRoZXJlZm9yZSB1bmluaXRpYWxpemVkIG1lbW9yeSB3aWxsIGJlIGFjY2Vzc2VkLCBhbmRcbiAgICAgKiBjb25kaXRpb25hbCBqdW1wcyB3aWxsIGJlIG1hZGUgdGhhdCBkZXBlbmQgb24gdGhvc2UgdmFsdWVzLlxuICAgICAqIEhvd2V2ZXIgdGhlIGxlbmd0aCBvZiB0aGUgbWF0Y2ggaXMgbGltaXRlZCB0byB0aGUgbG9va2FoZWFkLCBzb1xuICAgICAqIHRoZSBvdXRwdXQgb2YgZGVmbGF0ZSBpcyBub3QgYWZmZWN0ZWQgYnkgdGhlIHVuaW5pdGlhbGl6ZWQgdmFsdWVzLlxuICAgICAqL1xuXG4gICAgaWYgKF93aW5bbWF0Y2ggKyBiZXN0X2xlbl0gICAgICE9PSBzY2FuX2VuZCAgfHxcbiAgICAgICAgX3dpblttYXRjaCArIGJlc3RfbGVuIC0gMV0gIT09IHNjYW5fZW5kMSB8fFxuICAgICAgICBfd2luW21hdGNoXSAgICAgICAgICAgICAgICAhPT0gX3dpbltzY2FuXSB8fFxuICAgICAgICBfd2luWysrbWF0Y2hdICAgICAgICAgICAgICAhPT0gX3dpbltzY2FuICsgMV0pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8qIFRoZSBjaGVjayBhdCBiZXN0X2xlbi0xIGNhbiBiZSByZW1vdmVkIGJlY2F1c2UgaXQgd2lsbCBiZSBtYWRlXG4gICAgICogYWdhaW4gbGF0ZXIuIChUaGlzIGhldXJpc3RpYyBpcyBub3QgYWx3YXlzIGEgd2luLilcbiAgICAgKiBJdCBpcyBub3QgbmVjZXNzYXJ5IHRvIGNvbXBhcmUgc2NhblsyXSBhbmQgbWF0Y2hbMl0gc2luY2UgdGhleVxuICAgICAqIGFyZSBhbHdheXMgZXF1YWwgd2hlbiB0aGUgb3RoZXIgYnl0ZXMgbWF0Y2gsIGdpdmVuIHRoYXRcbiAgICAgKiB0aGUgaGFzaCBrZXlzIGFyZSBlcXVhbCBhbmQgdGhhdCBIQVNIX0JJVFMgPj0gOC5cbiAgICAgKi9cbiAgICBzY2FuICs9IDI7XG4gICAgbWF0Y2grKztcbiAgICAvLyBBc3NlcnQoKnNjYW4gPT0gKm1hdGNoLCBcIm1hdGNoWzJdP1wiKTtcblxuICAgIC8qIFdlIGNoZWNrIGZvciBpbnN1ZmZpY2llbnQgbG9va2FoZWFkIG9ubHkgZXZlcnkgOHRoIGNvbXBhcmlzb247XG4gICAgICogdGhlIDI1NnRoIGNoZWNrIHdpbGwgYmUgbWFkZSBhdCBzdHJzdGFydCsyNTguXG4gICAgICovXG4gICAgZG8ge1xuICAgICAgLypqc2hpbnQgbm9lbXB0eTpmYWxzZSovXG4gICAgfSB3aGlsZSAoX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgICAgICAgIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiZcbiAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmXG4gICAgICAgICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgICAgICAgIHNjYW4gPCBzdHJlbmQpO1xuXG4gICAgLy8gQXNzZXJ0KHNjYW4gPD0gcy0+d2luZG93Kyh1bnNpZ25lZCkocy0+d2luZG93X3NpemUtMSksIFwid2lsZCBzY2FuXCIpO1xuXG4gICAgbGVuID0gTUFYX01BVENIIC0gKHN0cmVuZCAtIHNjYW4pO1xuICAgIHNjYW4gPSBzdHJlbmQgLSBNQVhfTUFUQ0g7XG5cbiAgICBpZiAobGVuID4gYmVzdF9sZW4pIHtcbiAgICAgIHMubWF0Y2hfc3RhcnQgPSBjdXJfbWF0Y2g7XG4gICAgICBiZXN0X2xlbiA9IGxlbjtcbiAgICAgIGlmIChsZW4gPj0gbmljZV9tYXRjaCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHNjYW5fZW5kMSAgPSBfd2luW3NjYW4gKyBiZXN0X2xlbiAtIDFdO1xuICAgICAgc2Nhbl9lbmQgICA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTtcbiAgICB9XG4gIH0gd2hpbGUgKChjdXJfbWF0Y2ggPSBwcmV2W2N1cl9tYXRjaCAmIHdtYXNrXSkgPiBsaW1pdCAmJiAtLWNoYWluX2xlbmd0aCAhPT0gMCk7XG5cbiAgaWYgKGJlc3RfbGVuIDw9IHMubG9va2FoZWFkKSB7XG4gICAgcmV0dXJuIGJlc3RfbGVuO1xuICB9XG4gIHJldHVybiBzLmxvb2thaGVhZDtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZpbGwgdGhlIHdpbmRvdyB3aGVuIHRoZSBsb29rYWhlYWQgYmVjb21lcyBpbnN1ZmZpY2llbnQuXG4gKiBVcGRhdGVzIHN0cnN0YXJ0IGFuZCBsb29rYWhlYWQuXG4gKlxuICogSU4gYXNzZXJ0aW9uOiBsb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEXG4gKiBPVVQgYXNzZXJ0aW9uczogc3Ryc3RhcnQgPD0gd2luZG93X3NpemUtTUlOX0xPT0tBSEVBRFxuICogICAgQXQgbGVhc3Qgb25lIGJ5dGUgaGFzIGJlZW4gcmVhZCwgb3IgYXZhaWxfaW4gPT0gMDsgcmVhZHMgYXJlXG4gKiAgICBwZXJmb3JtZWQgZm9yIGF0IGxlYXN0IHR3byBieXRlcyAocmVxdWlyZWQgZm9yIHRoZSB6aXAgdHJhbnNsYXRlX2VvbFxuICogICAgb3B0aW9uIC0tIG5vdCBzdXBwb3J0ZWQgaGVyZSkuXG4gKi9cbmZ1bmN0aW9uIGZpbGxfd2luZG93KHMpIHtcbiAgdmFyIF93X3NpemUgPSBzLndfc2l6ZTtcbiAgdmFyIHAsIG4sIG0sIG1vcmUsIHN0cjtcblxuICAvL0Fzc2VydChzLT5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFELCBcImFscmVhZHkgZW5vdWdoIGxvb2thaGVhZFwiKTtcblxuICBkbyB7XG4gICAgbW9yZSA9IHMud2luZG93X3NpemUgLSBzLmxvb2thaGVhZCAtIHMuc3Ryc3RhcnQ7XG5cbiAgICAvLyBKUyBpbnRzIGhhdmUgMzIgYml0LCBibG9jayBiZWxvdyBub3QgbmVlZGVkXG4gICAgLyogRGVhbCB3aXRoICFAIyQlIDY0SyBsaW1pdDogKi9cbiAgICAvL2lmIChzaXplb2YoaW50KSA8PSAyKSB7XG4gICAgLy8gICAgaWYgKG1vcmUgPT0gMCAmJiBzLT5zdHJzdGFydCA9PSAwICYmIHMtPmxvb2thaGVhZCA9PSAwKSB7XG4gICAgLy8gICAgICAgIG1vcmUgPSB3c2l6ZTtcbiAgICAvL1xuICAgIC8vICB9IGVsc2UgaWYgKG1vcmUgPT0gKHVuc2lnbmVkKSgtMSkpIHtcbiAgICAvLyAgICAgICAgLyogVmVyeSB1bmxpa2VseSwgYnV0IHBvc3NpYmxlIG9uIDE2IGJpdCBtYWNoaW5lIGlmXG4gICAgLy8gICAgICAgICAqIHN0cnN0YXJ0ID09IDAgJiYgbG9va2FoZWFkID09IDEgKGlucHV0IGRvbmUgYSBieXRlIGF0IHRpbWUpXG4gICAgLy8gICAgICAgICAqL1xuICAgIC8vICAgICAgICBtb3JlLS07XG4gICAgLy8gICAgfVxuICAgIC8vfVxuXG5cbiAgICAvKiBJZiB0aGUgd2luZG93IGlzIGFsbW9zdCBmdWxsIGFuZCB0aGVyZSBpcyBpbnN1ZmZpY2llbnQgbG9va2FoZWFkLFxuICAgICAqIG1vdmUgdGhlIHVwcGVyIGhhbGYgdG8gdGhlIGxvd2VyIG9uZSB0byBtYWtlIHJvb20gaW4gdGhlIHVwcGVyIGhhbGYuXG4gICAgICovXG4gICAgaWYgKHMuc3Ryc3RhcnQgPj0gX3dfc2l6ZSArIChfd19zaXplIC0gTUlOX0xPT0tBSEVBRCkpIHtcblxuICAgICAgdXRpbHMuYXJyYXlTZXQocy53aW5kb3csIHMud2luZG93LCBfd19zaXplLCBfd19zaXplLCAwKTtcbiAgICAgIHMubWF0Y2hfc3RhcnQgLT0gX3dfc2l6ZTtcbiAgICAgIHMuc3Ryc3RhcnQgLT0gX3dfc2l6ZTtcbiAgICAgIC8qIHdlIG5vdyBoYXZlIHN0cnN0YXJ0ID49IE1BWF9ESVNUICovXG4gICAgICBzLmJsb2NrX3N0YXJ0IC09IF93X3NpemU7XG5cbiAgICAgIC8qIFNsaWRlIHRoZSBoYXNoIHRhYmxlIChjb3VsZCBiZSBhdm9pZGVkIHdpdGggMzIgYml0IHZhbHVlc1xuICAgICAgIGF0IHRoZSBleHBlbnNlIG9mIG1lbW9yeSB1c2FnZSkuIFdlIHNsaWRlIGV2ZW4gd2hlbiBsZXZlbCA9PSAwXG4gICAgICAgdG8ga2VlcCB0aGUgaGFzaCB0YWJsZSBjb25zaXN0ZW50IGlmIHdlIHN3aXRjaCBiYWNrIHRvIGxldmVsID4gMFxuICAgICAgIGxhdGVyLiAoVXNpbmcgbGV2ZWwgMCBwZXJtYW5lbnRseSBpcyBub3QgYW4gb3B0aW1hbCB1c2FnZSBvZlxuICAgICAgIHpsaWIsIHNvIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhpcyBwYXRob2xvZ2ljYWwgY2FzZS4pXG4gICAgICAgKi9cblxuICAgICAgbiA9IHMuaGFzaF9zaXplO1xuICAgICAgcCA9IG47XG4gICAgICBkbyB7XG4gICAgICAgIG0gPSBzLmhlYWRbLS1wXTtcbiAgICAgICAgcy5oZWFkW3BdID0gKG0gPj0gX3dfc2l6ZSA/IG0gLSBfd19zaXplIDogMCk7XG4gICAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgICBuID0gX3dfc2l6ZTtcbiAgICAgIHAgPSBuO1xuICAgICAgZG8ge1xuICAgICAgICBtID0gcy5wcmV2Wy0tcF07XG4gICAgICAgIHMucHJldltwXSA9IChtID49IF93X3NpemUgPyBtIC0gX3dfc2l6ZSA6IDApO1xuICAgICAgICAvKiBJZiBuIGlzIG5vdCBvbiBhbnkgaGFzaCBjaGFpbiwgcHJldltuXSBpcyBnYXJiYWdlIGJ1dFxuICAgICAgICAgKiBpdHMgdmFsdWUgd2lsbCBuZXZlciBiZSB1c2VkLlxuICAgICAgICAgKi9cbiAgICAgIH0gd2hpbGUgKC0tbik7XG5cbiAgICAgIG1vcmUgKz0gX3dfc2l6ZTtcbiAgICB9XG4gICAgaWYgKHMuc3RybS5hdmFpbF9pbiA9PT0gMCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLyogSWYgdGhlcmUgd2FzIG5vIHNsaWRpbmc6XG4gICAgICogICAgc3Ryc3RhcnQgPD0gV1NJWkUrTUFYX0RJU1QtMSAmJiBsb29rYWhlYWQgPD0gTUlOX0xPT0tBSEVBRCAtIDEgJiZcbiAgICAgKiAgICBtb3JlID09IHdpbmRvd19zaXplIC0gbG9va2FoZWFkIC0gc3Ryc3RhcnRcbiAgICAgKiA9PiBtb3JlID49IHdpbmRvd19zaXplIC0gKE1JTl9MT09LQUhFQUQtMSArIFdTSVpFICsgTUFYX0RJU1QtMSlcbiAgICAgKiA9PiBtb3JlID49IHdpbmRvd19zaXplIC0gMipXU0laRSArIDJcbiAgICAgKiBJbiB0aGUgQklHX01FTSBvciBNTUFQIGNhc2UgKG5vdCB5ZXQgc3VwcG9ydGVkKSxcbiAgICAgKiAgIHdpbmRvd19zaXplID09IGlucHV0X3NpemUgKyBNSU5fTE9PS0FIRUFEICAmJlxuICAgICAqICAgc3Ryc3RhcnQgKyBzLT5sb29rYWhlYWQgPD0gaW5wdXRfc2l6ZSA9PiBtb3JlID49IE1JTl9MT09LQUhFQUQuXG4gICAgICogT3RoZXJ3aXNlLCB3aW5kb3dfc2l6ZSA9PSAyKldTSVpFIHNvIG1vcmUgPj0gMi5cbiAgICAgKiBJZiB0aGVyZSB3YXMgc2xpZGluZywgbW9yZSA+PSBXU0laRS4gU28gaW4gYWxsIGNhc2VzLCBtb3JlID49IDIuXG4gICAgICovXG4gICAgLy9Bc3NlcnQobW9yZSA+PSAyLCBcIm1vcmUgPCAyXCIpO1xuICAgIG4gPSByZWFkX2J1ZihzLnN0cm0sIHMud2luZG93LCBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQsIG1vcmUpO1xuICAgIHMubG9va2FoZWFkICs9IG47XG5cbiAgICAvKiBJbml0aWFsaXplIHRoZSBoYXNoIHZhbHVlIG5vdyB0aGF0IHdlIGhhdmUgc29tZSBpbnB1dDogKi9cbiAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA+PSBNSU5fTUFUQ0gpIHtcbiAgICAgIHN0ciA9IHMuc3Ryc3RhcnQgLSBzLmluc2VydDtcbiAgICAgIHMuaW5zX2ggPSBzLndpbmRvd1tzdHJdO1xuXG4gICAgICAvKiBVUERBVEVfSEFTSChzLCBzLT5pbnNfaCwgcy0+d2luZG93W3N0ciArIDFdKTsgKi9cbiAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3N0ciArIDFdKSAmIHMuaGFzaF9tYXNrO1xuLy8jaWYgTUlOX01BVENIICE9IDNcbi8vICAgICAgICBDYWxsIHVwZGF0ZV9oYXNoKCkgTUlOX01BVENILTMgbW9yZSB0aW1lc1xuLy8jZW5kaWZcbiAgICAgIHdoaWxlIChzLmluc2VydCkge1xuICAgICAgICAvKiBVUERBVEVfSEFTSChzLCBzLT5pbnNfaCwgcy0+d2luZG93W3N0ciArIE1JTl9NQVRDSC0xXSk7ICovXG4gICAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3N0ciArIE1JTl9NQVRDSC0xXSkgJiBzLmhhc2hfbWFzaztcblxuICAgICAgICBzLnByZXZbc3RyICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzdHI7XG4gICAgICAgIHN0cisrO1xuICAgICAgICBzLmluc2VydC0tO1xuICAgICAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA8IE1JTl9NQVRDSCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qIElmIHRoZSB3aG9sZSBpbnB1dCBoYXMgbGVzcyB0aGFuIE1JTl9NQVRDSCBieXRlcywgaW5zX2ggaXMgZ2FyYmFnZSxcbiAgICAgKiBidXQgdGhpcyBpcyBub3QgaW1wb3J0YW50IHNpbmNlIG9ubHkgbGl0ZXJhbCBieXRlcyB3aWxsIGJlIGVtaXR0ZWQuXG4gICAgICovXG5cbiAgfSB3aGlsZSAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIHMuc3RybS5hdmFpbF9pbiAhPT0gMCk7XG5cbiAgLyogSWYgdGhlIFdJTl9JTklUIGJ5dGVzIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZGF0YSBoYXZlIG5ldmVyIGJlZW5cbiAgICogd3JpdHRlbiwgdGhlbiB6ZXJvIHRob3NlIGJ5dGVzIGluIG9yZGVyIHRvIGF2b2lkIG1lbW9yeSBjaGVjayByZXBvcnRzIG9mXG4gICAqIHRoZSB1c2Ugb2YgdW5pbml0aWFsaXplZCAob3IgdW5pbml0aWFsaXNlZCBhcyBKdWxpYW4gd3JpdGVzKSBieXRlcyBieVxuICAgKiB0aGUgbG9uZ2VzdCBtYXRjaCByb3V0aW5lcy4gIFVwZGF0ZSB0aGUgaGlnaCB3YXRlciBtYXJrIGZvciB0aGUgbmV4dFxuICAgKiB0aW1lIHRocm91Z2ggaGVyZS4gIFdJTl9JTklUIGlzIHNldCB0byBNQVhfTUFUQ0ggc2luY2UgdGhlIGxvbmdlc3QgbWF0Y2hcbiAgICogcm91dGluZXMgYWxsb3cgc2Nhbm5pbmcgdG8gc3Ryc3RhcnQgKyBNQVhfTUFUQ0gsIGlnbm9yaW5nIGxvb2thaGVhZC5cbiAgICovXG4vLyAgaWYgKHMuaGlnaF93YXRlciA8IHMud2luZG93X3NpemUpIHtcbi8vICAgIHZhciBjdXJyID0gcy5zdHJzdGFydCArIHMubG9va2FoZWFkO1xuLy8gICAgdmFyIGluaXQgPSAwO1xuLy9cbi8vICAgIGlmIChzLmhpZ2hfd2F0ZXIgPCBjdXJyKSB7XG4vLyAgICAgIC8qIFByZXZpb3VzIGhpZ2ggd2F0ZXIgbWFyayBiZWxvdyBjdXJyZW50IGRhdGEgLS0gemVybyBXSU5fSU5JVFxuLy8gICAgICAgKiBieXRlcyBvciB1cCB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy5cbi8vICAgICAgICovXG4vLyAgICAgIGluaXQgPSBzLndpbmRvd19zaXplIC0gY3Vycjtcbi8vICAgICAgaWYgKGluaXQgPiBXSU5fSU5JVClcbi8vICAgICAgICBpbml0ID0gV0lOX0lOSVQ7XG4vLyAgICAgIHptZW16ZXJvKHMtPndpbmRvdyArIGN1cnIsICh1bnNpZ25lZClpbml0KTtcbi8vICAgICAgcy0+aGlnaF93YXRlciA9IGN1cnIgKyBpbml0O1xuLy8gICAgfVxuLy8gICAgZWxzZSBpZiAocy0+aGlnaF93YXRlciA8ICh1bGcpY3VyciArIFdJTl9JTklUKSB7XG4vLyAgICAgIC8qIEhpZ2ggd2F0ZXIgbWFyayBhdCBvciBhYm92ZSBjdXJyZW50IGRhdGEsIGJ1dCBiZWxvdyBjdXJyZW50IGRhdGFcbi8vICAgICAgICogcGx1cyBXSU5fSU5JVCAtLSB6ZXJvIG91dCB0byBjdXJyZW50IGRhdGEgcGx1cyBXSU5fSU5JVCwgb3IgdXBcbi8vICAgICAgICogdG8gZW5kIG9mIHdpbmRvdywgd2hpY2hldmVyIGlzIGxlc3MuXG4vLyAgICAgICAqL1xuLy8gICAgICBpbml0ID0gKHVsZyljdXJyICsgV0lOX0lOSVQgLSBzLT5oaWdoX3dhdGVyO1xuLy8gICAgICBpZiAoaW5pdCA+IHMtPndpbmRvd19zaXplIC0gcy0+aGlnaF93YXRlcilcbi8vICAgICAgICBpbml0ID0gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyO1xuLy8gICAgICB6bWVtemVybyhzLT53aW5kb3cgKyBzLT5oaWdoX3dhdGVyLCAodW5zaWduZWQpaW5pdCk7XG4vLyAgICAgIHMtPmhpZ2hfd2F0ZXIgKz0gaW5pdDtcbi8vICAgIH1cbi8vICB9XG4vL1xuLy8gIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplIC0gTUlOX0xPT0tBSEVBRCxcbi8vICAgIFwibm90IGVub3VnaCByb29tIGZvciBzZWFyY2hcIik7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weSB3aXRob3V0IGNvbXByZXNzaW9uIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm5cbiAqIHRoZSBjdXJyZW50IGJsb2NrIHN0YXRlLlxuICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBpbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGRpY3Rpb25hcnkgc2luY2VcbiAqIHVuY29tcHJlc3NpYmxlIGRhdGEgaXMgcHJvYmFibHkgbm90IHVzZWZ1bC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkXG4gKiBvbmx5IGZvciB0aGUgbGV2ZWw9MCBjb21wcmVzc2lvbiBvcHRpb24uXG4gKiBOT1RFOiB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBvcHRpbWl6ZWQgdG8gYXZvaWQgZXh0cmEgY29weWluZyBmcm9tXG4gKiB3aW5kb3cgdG8gcGVuZGluZ19idWYuXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVfc3RvcmVkKHMsIGZsdXNoKSB7XG4gIC8qIFN0b3JlZCBibG9ja3MgYXJlIGxpbWl0ZWQgdG8gMHhmZmZmIGJ5dGVzLCBwZW5kaW5nX2J1ZiBpcyBsaW1pdGVkXG4gICAqIHRvIHBlbmRpbmdfYnVmX3NpemUsIGFuZCBlYWNoIHN0b3JlZCBibG9jayBoYXMgYSA1IGJ5dGUgaGVhZGVyOlxuICAgKi9cbiAgdmFyIG1heF9ibG9ja19zaXplID0gMHhmZmZmO1xuXG4gIGlmIChtYXhfYmxvY2tfc2l6ZSA+IHMucGVuZGluZ19idWZfc2l6ZSAtIDUpIHtcbiAgICBtYXhfYmxvY2tfc2l6ZSA9IHMucGVuZGluZ19idWZfc2l6ZSAtIDU7XG4gIH1cblxuICAvKiBDb3B5IGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSBpbnB1dCB0byBvdXRwdXQ6ICovXG4gIGZvciAoOzspIHtcbiAgICAvKiBGaWxsIHRoZSB3aW5kb3cgYXMgbXVjaCBhcyBwb3NzaWJsZTogKi9cbiAgICBpZiAocy5sb29rYWhlYWQgPD0gMSkge1xuXG4gICAgICAvL0Fzc2VydChzLT5zdHJzdGFydCA8IHMtPndfc2l6ZStNQVhfRElTVChzKSB8fFxuICAgICAgLy8gIHMtPmJsb2NrX3N0YXJ0ID49IChsb25nKXMtPndfc2l6ZSwgXCJzbGlkZSB0b28gbGF0ZVwiKTtcbi8vICAgICAgaWYgKCEocy5zdHJzdGFydCA8IHMud19zaXplICsgKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgfHxcbi8vICAgICAgICBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplKSkge1xuLy8gICAgICAgIHRocm93ICBuZXcgRXJyb3IoXCJzbGlkZSB0b28gbGF0ZVwiKTtcbi8vICAgICAgfVxuXG4gICAgICBmaWxsX3dpbmRvdyhzKTtcbiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuXG4gICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqL1xuICAgIH1cbiAgICAvL0Fzc2VydChzLT5ibG9ja19zdGFydCA+PSAwTCwgXCJibG9jayBnb25lXCIpO1xuLy8gICAgaWYgKHMuYmxvY2tfc3RhcnQgPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJibG9jayBnb25lXCIpO1xuXG4gICAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDtcbiAgICBzLmxvb2thaGVhZCA9IDA7XG5cbiAgICAvKiBFbWl0IGEgc3RvcmVkIGJsb2NrIGlmIHBlbmRpbmdfYnVmIHdpbGwgYmUgZnVsbDogKi9cbiAgICB2YXIgbWF4X3N0YXJ0ID0gcy5ibG9ja19zdGFydCArIG1heF9ibG9ja19zaXplO1xuXG4gICAgaWYgKHMuc3Ryc3RhcnQgPT09IDAgfHwgcy5zdHJzdGFydCA+PSBtYXhfc3RhcnQpIHtcbiAgICAgIC8qIHN0cnN0YXJ0ID09IDAgaXMgcG9zc2libGUgd2hlbiB3cmFwYXJvdW5kIG9uIDE2LWJpdCBtYWNoaW5lICovXG4gICAgICBzLmxvb2thaGVhZCA9IHMuc3Ryc3RhcnQgLSBtYXhfc3RhcnQ7XG4gICAgICBzLnN0cnN0YXJ0ID0gbWF4X3N0YXJ0O1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cblxuXG4gICAgfVxuICAgIC8qIEZsdXNoIGlmIHdlIG1heSBoYXZlIHRvIHNsaWRlLCBvdGhlcndpc2UgYmxvY2tfc3RhcnQgbWF5IGJlY29tZVxuICAgICAqIG5lZ2F0aXZlIGFuZCB0aGUgZGF0YSB3aWxsIGJlIGdvbmU6XG4gICAgICovXG4gICAgaWYgKHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0ID49IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7XG4gICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICAvKioqL1xuICAgIH1cbiAgfVxuXG4gIHMuaW5zZXJ0ID0gMDtcblxuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cblxuICBpZiAocy5zdHJzdGFydCA+IHMuYmxvY2tfc3RhcnQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cblxuICByZXR1cm4gQlNfTkVFRF9NT1JFO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbXByZXNzIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm4gdGhlIGN1cnJlbnRcbiAqIGJsb2NrIHN0YXRlLlxuICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBwZXJmb3JtIGxhenkgZXZhbHVhdGlvbiBvZiBtYXRjaGVzIGFuZCBpbnNlcnRzXG4gKiBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBvbmx5IGZvciB1bm1hdGNoZWQgc3RyaW5ncyBvciBmb3Igc2hvcnRcbiAqIG1hdGNoZXMuIEl0IGlzIHVzZWQgb25seSBmb3IgdGhlIGZhc3QgY29tcHJlc3Npb24gb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9mYXN0KHMsIGZsdXNoKSB7XG4gIHZhciBoYXNoX2hlYWQ7ICAgICAgICAvKiBoZWFkIG9mIHRoZSBoYXNoIGNoYWluICovXG4gIHZhciBiZmx1c2g7ICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi9cblxuICBmb3IgKDs7KSB7XG4gICAgLyogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIGhhdmUgZW5vdWdoIGxvb2thaGVhZCwgZXhjZXB0XG4gICAgICogYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgZmlsZS4gV2UgbmVlZCBNQVhfTUFUQ0ggYnl0ZXNcbiAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGVcbiAgICAgKiBzdHJpbmcgZm9sbG93aW5nIHRoZSBuZXh0IG1hdGNoLlxuICAgICAqL1xuICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHtcbiAgICAgIGZpbGxfd2luZG93KHMpO1xuICAgICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7XG4gICAgICAgIGJyZWFrOyAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqL1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qIEluc2VydCB0aGUgc3RyaW5nIHdpbmRvd1tzdHJzdGFydCAuLiBzdHJzdGFydCsyXSBpbiB0aGVcbiAgICAgKiBkaWN0aW9uYXJ5LCBhbmQgc2V0IGhhc2hfaGVhZCB0byB0aGUgaGVhZCBvZiB0aGUgaGFzaCBjaGFpbjpcbiAgICAgKi9cbiAgICBoYXNoX2hlYWQgPSAwLypOSUwqLztcbiAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7XG4gICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07XG4gICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgLyoqKi9cbiAgICB9XG5cbiAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLlxuICAgICAqIEF0IHRoaXMgcG9pbnQgd2UgaGF2ZSBhbHdheXMgbWF0Y2hfbGVuZ3RoIDwgTUlOX01BVENIXG4gICAgICovXG4gICAgaWYgKGhhc2hfaGVhZCAhPT0gMC8qTklMKi8gJiYgKChzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkKSA8PSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkpIHtcbiAgICAgIC8qIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nXG4gICAgICAgKiBvZiB3aW5kb3cgaW5kZXggMCAoaW4gcGFydGljdWxhciB3ZSBoYXZlIHRvIGF2b2lkIGEgbWF0Y2hcbiAgICAgICAqIG9mIHRoZSBzdHJpbmcgd2l0aCBpdHNlbGYgYXQgdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dCBmaWxlKS5cbiAgICAgICAqL1xuICAgICAgcy5tYXRjaF9sZW5ndGggPSBsb25nZXN0X21hdGNoKHMsIGhhc2hfaGVhZCk7XG4gICAgICAvKiBsb25nZXN0X21hdGNoKCkgc2V0cyBtYXRjaF9zdGFydCAqL1xuICAgIH1cbiAgICBpZiAocy5tYXRjaF9sZW5ndGggPj0gTUlOX01BVENIKSB7XG4gICAgICAvLyBjaGVja19tYXRjaChzLCBzLnN0cnN0YXJ0LCBzLm1hdGNoX3N0YXJ0LCBzLm1hdGNoX2xlbmd0aCk7IC8vIGZvciBkZWJ1ZyBvbmx5XG5cbiAgICAgIC8qKiogX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSBzLm1hdGNoX3N0YXJ0LCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCk7XG5cbiAgICAgIHMubG9va2FoZWFkIC09IHMubWF0Y2hfbGVuZ3RoO1xuXG4gICAgICAvKiBJbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGhhc2ggdGFibGUgb25seSBpZiB0aGUgbWF0Y2ggbGVuZ3RoXG4gICAgICAgKiBpcyBub3QgdG9vIGxhcmdlLiBUaGlzIHNhdmVzIHRpbWUgYnV0IGRlZ3JhZGVzIGNvbXByZXNzaW9uLlxuICAgICAgICovXG4gICAgICBpZiAocy5tYXRjaF9sZW5ndGggPD0gcy5tYXhfbGF6eV9tYXRjaC8qbWF4X2luc2VydF9sZW5ndGgqLyAmJiBzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHtcbiAgICAgICAgcy5tYXRjaF9sZW5ndGgtLTsgLyogc3RyaW5nIGF0IHN0cnN0YXJ0IGFscmVhZHkgaW4gdGFibGUgKi9cbiAgICAgICAgZG8ge1xuICAgICAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcbiAgICAgICAgICBoYXNoX2hlYWQgPSBzLnByZXZbcy5zdHJzdGFydCAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTtcbiAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgICAgIC8qKiovXG4gICAgICAgICAgLyogc3Ryc3RhcnQgbmV2ZXIgZXhjZWVkcyBXU0laRS1NQVhfTUFUQ0gsIHNvIHRoZXJlIGFyZVxuICAgICAgICAgICAqIGFsd2F5cyBNSU5fTUFUQ0ggYnl0ZXMgYWhlYWQuXG4gICAgICAgICAgICovXG4gICAgICAgIH0gd2hpbGUgKC0tcy5tYXRjaF9sZW5ndGggIT09IDApO1xuICAgICAgICBzLnN0cnN0YXJ0Kys7XG4gICAgICB9IGVsc2VcbiAgICAgIHtcbiAgICAgICAgcy5zdHJzdGFydCArPSBzLm1hdGNoX2xlbmd0aDtcbiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSAwO1xuICAgICAgICBzLmluc19oID0gcy53aW5kb3dbcy5zdHJzdGFydF07XG4gICAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQrMV0pOyAqL1xuICAgICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgMV0pICYgcy5oYXNoX21hc2s7XG5cbi8vI2lmIE1JTl9NQVRDSCAhPSAzXG4vLyAgICAgICAgICAgICAgICBDYWxsIFVQREFURV9IQVNIKCkgTUlOX01BVENILTMgbW9yZSB0aW1lc1xuLy8jZW5kaWZcbiAgICAgICAgLyogSWYgbG9va2FoZWFkIDwgTUlOX01BVENILCBpbnNfaCBpcyBnYXJiYWdlLCBidXQgaXQgZG9lcyBub3RcbiAgICAgICAgICogbWF0dGVyIHNpbmNlIGl0IHdpbGwgYmUgcmVjb21wdXRlZCBhdCBuZXh0IGRlZmxhdGUgY2FsbC5cbiAgICAgICAgICovXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIE5vIG1hdGNoLCBvdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi9cbiAgICAgIC8vVHJhY2V2digoc3RkZXJyLFwiJWNcIiwgcy53aW5kb3dbcy5zdHJzdGFydF0pKTtcbiAgICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTtcblxuICAgICAgcy5sb29rYWhlYWQtLTtcbiAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICB9XG4gICAgaWYgKGJmbHVzaCkge1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cbiAgICB9XG4gIH1cbiAgcy5pbnNlcnQgPSAoKHMuc3Ryc3RhcnQgPCAoTUlOX01BVENILTEpKSA/IHMuc3Ryc3RhcnQgOiBNSU5fTUFUQ0gtMSk7XG4gIGlmIChmbHVzaCA9PT0gWl9GSU5JU0gpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDEpOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTtcbiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEO1xuICAgIH1cbiAgICAvKioqL1xuICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTtcbiAgfVxuICBpZiAocy5sYXN0X2xpdCkge1xuICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi9cbiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICB9XG4gICAgLyoqKi9cbiAgfVxuICByZXR1cm4gQlNfQkxPQ0tfRE9ORTtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTYW1lIGFzIGFib3ZlLCBidXQgYWNoaWV2ZXMgYmV0dGVyIGNvbXByZXNzaW9uLiBXZSB1c2UgYSBsYXp5XG4gKiBldmFsdWF0aW9uIGZvciBtYXRjaGVzOiBhIG1hdGNoIGlzIGZpbmFsbHkgYWRvcHRlZCBvbmx5IGlmIHRoZXJlIGlzXG4gKiBubyBiZXR0ZXIgbWF0Y2ggYXQgdGhlIG5leHQgd2luZG93IHBvc2l0aW9uLlxuICovXG5mdW5jdGlvbiBkZWZsYXRlX3Nsb3cocywgZmx1c2gpIHtcbiAgdmFyIGhhc2hfaGVhZDsgICAgICAgICAgLyogaGVhZCBvZiBoYXNoIGNoYWluICovXG4gIHZhciBiZmx1c2g7ICAgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi9cblxuICB2YXIgbWF4X2luc2VydDtcblxuICAvKiBQcm9jZXNzIHRoZSBpbnB1dCBibG9jay4gKi9cbiAgZm9yICg7Oykge1xuICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdFxuICAgICAqIGF0IHRoZSBlbmQgb2YgdGhlIGlucHV0IGZpbGUuIFdlIG5lZWQgTUFYX01BVENIIGJ5dGVzXG4gICAgICogZm9yIHRoZSBuZXh0IG1hdGNoLCBwbHVzIE1JTl9NQVRDSCBieXRlcyB0byBpbnNlcnQgdGhlXG4gICAgICogc3RyaW5nIGZvbGxvd2luZyB0aGUgbmV4dCBtYXRjaC5cbiAgICAgKi9cbiAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEKSB7XG4gICAgICBmaWxsX3dpbmRvdyhzKTtcbiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQgJiYgZmx1c2ggPT09IFpfTk9fRkxVU0gpIHtcbiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICAgIH1cbiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgeyBicmVhazsgfSAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqL1xuICAgIH1cblxuICAgIC8qIEluc2VydCB0aGUgc3RyaW5nIHdpbmRvd1tzdHJzdGFydCAuLiBzdHJzdGFydCsyXSBpbiB0aGVcbiAgICAgKiBkaWN0aW9uYXJ5LCBhbmQgc2V0IGhhc2hfaGVhZCB0byB0aGUgaGVhZCBvZiB0aGUgaGFzaCBjaGFpbjpcbiAgICAgKi9cbiAgICBoYXNoX2hlYWQgPSAwLypOSUwqLztcbiAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7XG4gICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07XG4gICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgLyoqKi9cbiAgICB9XG5cbiAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLlxuICAgICAqL1xuICAgIHMucHJldl9sZW5ndGggPSBzLm1hdGNoX2xlbmd0aDtcbiAgICBzLnByZXZfbWF0Y2ggPSBzLm1hdGNoX3N0YXJ0O1xuICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENILTE7XG5cbiAgICBpZiAoaGFzaF9oZWFkICE9PSAwLypOSUwqLyAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJlxuICAgICAgICBzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkIDw9IChzLndfc2l6ZS1NSU5fTE9PS0FIRUFEKS8qTUFYX0RJU1QocykqLykge1xuICAgICAgLyogVG8gc2ltcGxpZnkgdGhlIGNvZGUsIHdlIHByZXZlbnQgbWF0Y2hlcyB3aXRoIHRoZSBzdHJpbmdcbiAgICAgICAqIG9mIHdpbmRvdyBpbmRleCAwIChpbiBwYXJ0aWN1bGFyIHdlIGhhdmUgdG8gYXZvaWQgYSBtYXRjaFxuICAgICAgICogb2YgdGhlIHN0cmluZyB3aXRoIGl0c2VsZiBhdCB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IGZpbGUpLlxuICAgICAgICovXG4gICAgICBzLm1hdGNoX2xlbmd0aCA9IGxvbmdlc3RfbWF0Y2gocywgaGFzaF9oZWFkKTtcbiAgICAgIC8qIGxvbmdlc3RfbWF0Y2goKSBzZXRzIG1hdGNoX3N0YXJ0ICovXG5cbiAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSA1ICYmXG4gICAgICAgICAocy5zdHJhdGVneSA9PT0gWl9GSUxURVJFRCB8fCAocy5tYXRjaF9sZW5ndGggPT09IE1JTl9NQVRDSCAmJiBzLnN0cnN0YXJ0IC0gcy5tYXRjaF9zdGFydCA+IDQwOTYvKlRPT19GQVIqLykpKSB7XG5cbiAgICAgICAgLyogSWYgcHJldl9tYXRjaCBpcyBhbHNvIE1JTl9NQVRDSCwgbWF0Y2hfc3RhcnQgaXMgZ2FyYmFnZVxuICAgICAgICAgKiBidXQgd2Ugd2lsbCBpZ25vcmUgdGhlIGN1cnJlbnQgbWF0Y2ggYW55d2F5LlxuICAgICAgICAgKi9cbiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNSU5fTUFUQ0gtMTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyogSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50XG4gICAgICogbWF0Y2ggaXMgbm90IGJldHRlciwgb3V0cHV0IHRoZSBwcmV2aW91cyBtYXRjaDpcbiAgICAgKi9cbiAgICBpZiAocy5wcmV2X2xlbmd0aCA+PSBNSU5fTUFUQ0ggJiYgcy5tYXRjaF9sZW5ndGggPD0gcy5wcmV2X2xlbmd0aCkge1xuICAgICAgbWF4X2luc2VydCA9IHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZCAtIE1JTl9NQVRDSDtcbiAgICAgIC8qIERvIG5vdCBpbnNlcnQgc3RyaW5ncyBpbiBoYXNoIHRhYmxlIGJleW9uZCB0aGlzLiAqL1xuXG4gICAgICAvL2NoZWNrX21hdGNoKHMsIHMuc3Ryc3RhcnQtMSwgcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoKTtcblxuICAgICAgLyoqKl90cl90YWxseV9kaXN0KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLFxuICAgICAgICAgICAgICAgICAgICAgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsqKiovXG4gICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgcy5zdHJzdGFydCAtIDEtIHMucHJldl9tYXRjaCwgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCk7XG4gICAgICAvKiBJbnNlcnQgaW4gaGFzaCB0YWJsZSBhbGwgc3RyaW5ncyB1cCB0byB0aGUgZW5kIG9mIHRoZSBtYXRjaC5cbiAgICAgICAqIHN0cnN0YXJ0LTEgYW5kIHN0cnN0YXJ0IGFyZSBhbHJlYWR5IGluc2VydGVkLiBJZiB0aGVyZSBpcyBub3RcbiAgICAgICAqIGVub3VnaCBsb29rYWhlYWQsIHRoZSBsYXN0IHR3byBzdHJpbmdzIGFyZSBub3QgaW5zZXJ0ZWQgaW5cbiAgICAgICAqIHRoZSBoYXNoIHRhYmxlLlxuICAgICAgICovXG4gICAgICBzLmxvb2thaGVhZCAtPSBzLnByZXZfbGVuZ3RoLTE7XG4gICAgICBzLnByZXZfbGVuZ3RoIC09IDI7XG4gICAgICBkbyB7XG4gICAgICAgIGlmICgrK3Muc3Ryc3RhcnQgPD0gbWF4X2luc2VydCkge1xuICAgICAgICAgIC8qKiogSU5TRVJUX1NUUklORyhzLCBzLnN0cnN0YXJ0LCBoYXNoX2hlYWQpOyAqKiovXG4gICAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7XG4gICAgICAgICAgLyoqKi9cbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoLS1zLnByZXZfbGVuZ3RoICE9PSAwKTtcbiAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDtcbiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENILTE7XG4gICAgICBzLnN0cnN0YXJ0Kys7XG5cbiAgICAgIGlmIChiZmx1c2gpIHtcbiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgICB9XG4gICAgICAgIC8qKiovXG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHMubWF0Y2hfYXZhaWxhYmxlKSB7XG4gICAgICAvKiBJZiB0aGVyZSB3YXMgbm8gbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHBvc2l0aW9uLCBvdXRwdXQgYVxuICAgICAgICogc2luZ2xlIGxpdGVyYWwuIElmIHRoZXJlIHdhcyBhIG1hdGNoIGJ1dCB0aGUgY3VycmVudCBtYXRjaFxuICAgICAgICogaXMgbG9uZ2VyLCB0cnVuY2F0ZSB0aGUgcHJldmlvdXMgbWF0Y2ggdG8gYSBzaW5nbGUgbGl0ZXJhbC5cbiAgICAgICAqL1xuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsXCIlY1wiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTtcbiAgICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0LTFdLCBiZmx1c2gpOyAqKiovXG4gICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgMCwgcy53aW5kb3dbcy5zdHJzdGFydC0xXSk7XG5cbiAgICAgIGlmIChiZmx1c2gpIHtcbiAgICAgICAgLyoqKiBGTFVTSF9CTE9DS19PTkxZKHMsIDApICoqKi9cbiAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICAgIC8qKiovXG4gICAgICB9XG4gICAgICBzLnN0cnN0YXJ0Kys7XG4gICAgICBzLmxvb2thaGVhZC0tO1xuICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLyogVGhlcmUgaXMgbm8gcHJldmlvdXMgbWF0Y2ggdG8gY29tcGFyZSB3aXRoLCB3YWl0IGZvclxuICAgICAgICogdGhlIG5leHQgc3RlcCB0byBkZWNpZGUuXG4gICAgICAgKi9cbiAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMTtcbiAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICAgIHMubG9va2FoZWFkLS07XG4gICAgfVxuICB9XG4gIC8vQXNzZXJ0IChmbHVzaCAhPSBaX05PX0ZMVVNILCBcIm5vIGZsdXNoP1wiKTtcbiAgaWYgKHMubWF0Y2hfYXZhaWxhYmxlKSB7XG4gICAgLy9UcmFjZXZ2KChzdGRlcnIsXCIlY1wiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTtcbiAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydC0xXSwgYmZsdXNoKTsgKioqL1xuICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0LTFdKTtcblxuICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDtcbiAgfVxuICBzLmluc2VydCA9IHMuc3Ryc3RhcnQgPCBNSU5fTUFUQ0gtMSA/IHMuc3Ryc3RhcnQgOiBNSU5fTUFUQ0gtMTtcbiAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCkge1xuICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi9cbiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpO1xuICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7XG4gICAgfVxuICAgIC8qKiovXG4gICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FO1xuICB9XG4gIGlmIChzLmxhc3RfbGl0KSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgIH1cbiAgICAvKioqL1xuICB9XG5cbiAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBGb3IgWl9STEUsIHNpbXBseSBsb29rIGZvciBydW5zIG9mIGJ5dGVzLCBnZW5lcmF0ZSBtYXRjaGVzIG9ubHkgb2YgZGlzdGFuY2VcbiAqIG9uZS4gIERvIG5vdCBtYWludGFpbiBhIGhhc2ggdGFibGUuICAoSXQgd2lsbCBiZSByZWdlbmVyYXRlZCBpZiB0aGlzIHJ1biBvZlxuICogZGVmbGF0ZSBzd2l0Y2hlcyBhd2F5IGZyb20gWl9STEUuKVxuICovXG5mdW5jdGlvbiBkZWZsYXRlX3JsZShzLCBmbHVzaCkge1xuICB2YXIgYmZsdXNoOyAgICAgICAgICAgIC8qIHNldCBpZiBjdXJyZW50IGJsb2NrIG11c3QgYmUgZmx1c2hlZCAqL1xuICB2YXIgcHJldjsgICAgICAgICAgICAgIC8qIGJ5dGUgYXQgZGlzdGFuY2Ugb25lIHRvIG1hdGNoICovXG4gIHZhciBzY2FuLCBzdHJlbmQ7ICAgICAgLyogc2NhbiBnb2VzIHVwIHRvIHN0cmVuZCBmb3IgbGVuZ3RoIG9mIHJ1biAqL1xuXG4gIHZhciBfd2luID0gcy53aW5kb3c7XG5cbiAgZm9yICg7Oykge1xuICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdFxuICAgICAqIGF0IHRoZSBlbmQgb2YgdGhlIGlucHV0IGZpbGUuIFdlIG5lZWQgTUFYX01BVENIIGJ5dGVzXG4gICAgICogZm9yIHRoZSBsb25nZXN0IHJ1biwgcGx1cyBvbmUgZm9yIHRoZSB1bnJvbGxlZCBsb29wLlxuICAgICAqL1xuICAgIGlmIChzLmxvb2thaGVhZCA8PSBNQVhfTUFUQ0gpIHtcbiAgICAgIGZpbGxfd2luZG93KHMpO1xuICAgICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7IGJyZWFrOyB9IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovXG4gICAgfVxuXG4gICAgLyogU2VlIGhvdyBtYW55IHRpbWVzIHRoZSBwcmV2aW91cyBieXRlIHJlcGVhdHMgKi9cbiAgICBzLm1hdGNoX2xlbmd0aCA9IDA7XG4gICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCAmJiBzLnN0cnN0YXJ0ID4gMCkge1xuICAgICAgc2NhbiA9IHMuc3Ryc3RhcnQgLSAxO1xuICAgICAgcHJldiA9IF93aW5bc2Nhbl07XG4gICAgICBpZiAocHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0pIHtcbiAgICAgICAgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIC8qanNoaW50IG5vZW1wdHk6ZmFsc2UqL1xuICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmXG4gICAgICAgICAgICAgICAgIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiZcbiAgICAgICAgICAgICAgICAgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJlxuICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmXG4gICAgICAgICAgICAgICAgIHNjYW4gPCBzdHJlbmQpO1xuICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IE1BWF9NQVRDSCAtIChzdHJlbmQgLSBzY2FuKTtcbiAgICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoID4gcy5sb29rYWhlYWQpIHtcbiAgICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IHMubG9va2FoZWFkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL0Fzc2VydChzY2FuIDw9IHMtPndpbmRvdysodUludCkocy0+d2luZG93X3NpemUtMSksIFwid2lsZCBzY2FuXCIpO1xuICAgIH1cblxuICAgIC8qIEVtaXQgbWF0Y2ggaWYgaGF2ZSBydW4gb2YgTUlOX01BVENIIG9yIGxvbmdlciwgZWxzZSBlbWl0IGxpdGVyYWwgKi9cbiAgICBpZiAocy5tYXRjaF9sZW5ndGggPj0gTUlOX01BVENIKSB7XG4gICAgICAvL2NoZWNrX21hdGNoKHMsIHMuc3Ryc3RhcnQsIHMuc3Ryc3RhcnQgLSAxLCBzLm1hdGNoX2xlbmd0aCk7XG5cbiAgICAgIC8qKiogX3RyX3RhbGx5X2Rpc3QocywgMSwgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gsIGJmbHVzaCk7ICoqKi9cbiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCk7XG5cbiAgICAgIHMubG9va2FoZWFkIC09IHMubWF0Y2hfbGVuZ3RoO1xuICAgICAgcy5zdHJzdGFydCArPSBzLm1hdGNoX2xlbmd0aDtcbiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgLyogTm8gbWF0Y2gsIG91dHB1dCBhIGxpdGVyYWwgYnl0ZSAqL1xuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsXCIlY1wiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnRdKSk7XG4gICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydF0sIGJmbHVzaCk7ICoqKi9cbiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7XG5cbiAgICAgIHMubG9va2FoZWFkLS07XG4gICAgICBzLnN0cnN0YXJ0Kys7XG4gICAgfVxuICAgIGlmIChiZmx1c2gpIHtcbiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi9cbiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICAgIH1cbiAgICAgIC8qKiovXG4gICAgfVxuICB9XG4gIHMuaW5zZXJ0ID0gMDtcbiAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCkge1xuICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi9cbiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpO1xuICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7XG4gICAgfVxuICAgIC8qKiovXG4gICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FO1xuICB9XG4gIGlmIChzLmxhc3RfbGl0KSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgIH1cbiAgICAvKioqL1xuICB9XG4gIHJldHVybiBCU19CTE9DS19ET05FO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZvciBaX0hVRkZNQU5fT05MWSwgZG8gbm90IGxvb2sgZm9yIG1hdGNoZXMuICBEbyBub3QgbWFpbnRhaW4gYSBoYXNoIHRhYmxlLlxuICogKEl0IHdpbGwgYmUgcmVnZW5lcmF0ZWQgaWYgdGhpcyBydW4gb2YgZGVmbGF0ZSBzd2l0Y2hlcyBhd2F5IGZyb20gSHVmZm1hbi4pXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVfaHVmZihzLCBmbHVzaCkge1xuICB2YXIgYmZsdXNoOyAgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi9cblxuICBmb3IgKDs7KSB7XG4gICAgLyogTWFrZSBzdXJlIHRoYXQgd2UgaGF2ZSBhIGxpdGVyYWwgdG8gd3JpdGUuICovXG4gICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7XG4gICAgICBmaWxsX3dpbmRvdyhzKTtcbiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkge1xuICAgICAgICBpZiAoZmx1c2ggPT09IFpfTk9fRkxVU0gpIHtcbiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrOyAgICAgIC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovXG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogT3V0cHV0IGEgbGl0ZXJhbCBieXRlICovXG4gICAgcy5tYXRjaF9sZW5ndGggPSAwO1xuICAgIC8vVHJhY2V2digoc3RkZXJyLFwiJWNcIiwgcy0+d2luZG93W3MtPnN0cnN0YXJ0XSkpO1xuICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqL1xuICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7XG4gICAgcy5sb29rYWhlYWQtLTtcbiAgICBzLnN0cnN0YXJ0Kys7XG4gICAgaWYgKGJmbHVzaCkge1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cbiAgICB9XG4gIH1cbiAgcy5pbnNlcnQgPSAwO1xuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cbiAgaWYgKHMubGFzdF9saXQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cbiAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7XG59XG5cbi8qIFZhbHVlcyBmb3IgbWF4X2xhenlfbWF0Y2gsIGdvb2RfbWF0Y2ggYW5kIG1heF9jaGFpbl9sZW5ndGgsIGRlcGVuZGluZyBvblxuICogdGhlIGRlc2lyZWQgcGFjayBsZXZlbCAoMC4uOSkuIFRoZSB2YWx1ZXMgZ2l2ZW4gYmVsb3cgaGF2ZSBiZWVuIHR1bmVkIHRvXG4gKiBleGNsdWRlIHdvcnN0IGNhc2UgcGVyZm9ybWFuY2UgZm9yIHBhdGhvbG9naWNhbCBmaWxlcy4gQmV0dGVyIHZhbHVlcyBtYXkgYmVcbiAqIGZvdW5kIGZvciBzcGVjaWZpYyBmaWxlcy5cbiAqL1xudmFyIENvbmZpZyA9IGZ1bmN0aW9uIChnb29kX2xlbmd0aCwgbWF4X2xhenksIG5pY2VfbGVuZ3RoLCBtYXhfY2hhaW4sIGZ1bmMpIHtcbiAgdGhpcy5nb29kX2xlbmd0aCA9IGdvb2RfbGVuZ3RoO1xuICB0aGlzLm1heF9sYXp5ID0gbWF4X2xhenk7XG4gIHRoaXMubmljZV9sZW5ndGggPSBuaWNlX2xlbmd0aDtcbiAgdGhpcy5tYXhfY2hhaW4gPSBtYXhfY2hhaW47XG4gIHRoaXMuZnVuYyA9IGZ1bmM7XG59O1xuXG52YXIgY29uZmlndXJhdGlvbl90YWJsZTtcblxuY29uZmlndXJhdGlvbl90YWJsZSA9IFtcbiAgLyogICAgICBnb29kIGxhenkgbmljZSBjaGFpbiAqL1xuICBuZXcgQ29uZmlnKDAsIDAsIDAsIDAsIGRlZmxhdGVfc3RvcmVkKSwgICAgICAgICAgLyogMCBzdG9yZSBvbmx5ICovXG4gIG5ldyBDb25maWcoNCwgNCwgOCwgNCwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgICAvKiAxIG1heCBzcGVlZCwgbm8gbGF6eSBtYXRjaGVzICovXG4gIG5ldyBDb25maWcoNCwgNSwgMTYsIDgsIGRlZmxhdGVfZmFzdCksICAgICAgICAgICAvKiAyICovXG4gIG5ldyBDb25maWcoNCwgNiwgMzIsIDMyLCBkZWZsYXRlX2Zhc3QpLCAgICAgICAgICAvKiAzICovXG5cbiAgbmV3IENvbmZpZyg0LCA0LCAxNiwgMTYsIGRlZmxhdGVfc2xvdyksICAgICAgICAgIC8qIDQgbGF6eSBtYXRjaGVzICovXG4gIG5ldyBDb25maWcoOCwgMTYsIDMyLCAzMiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAvKiA1ICovXG4gIG5ldyBDb25maWcoOCwgMTYsIDEyOCwgMTI4LCBkZWZsYXRlX3Nsb3cpLCAgICAgICAvKiA2ICovXG4gIG5ldyBDb25maWcoOCwgMzIsIDEyOCwgMjU2LCBkZWZsYXRlX3Nsb3cpLCAgICAgICAvKiA3ICovXG4gIG5ldyBDb25maWcoMzIsIDEyOCwgMjU4LCAxMDI0LCBkZWZsYXRlX3Nsb3cpLCAgICAvKiA4ICovXG4gIG5ldyBDb25maWcoMzIsIDI1OCwgMjU4LCA0MDk2LCBkZWZsYXRlX3Nsb3cpICAgICAvKiA5IG1heCBjb21wcmVzc2lvbiAqL1xuXTtcblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemUgdGhlIFwibG9uZ2VzdCBtYXRjaFwiIHJvdXRpbmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbVxuICovXG5mdW5jdGlvbiBsbV9pbml0KHMpIHtcbiAgcy53aW5kb3dfc2l6ZSA9IDIgKiBzLndfc2l6ZTtcblxuICAvKioqIENMRUFSX0hBU0gocyk7ICoqKi9cbiAgemVybyhzLmhlYWQpOyAvLyBGaWxsIHdpdGggTklMICg9IDApO1xuXG4gIC8qIFNldCB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnM6XG4gICAqL1xuICBzLm1heF9sYXp5X21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5tYXhfbGF6eTtcbiAgcy5nb29kX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5nb29kX2xlbmd0aDtcbiAgcy5uaWNlX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5uaWNlX2xlbmd0aDtcbiAgcy5tYXhfY2hhaW5fbGVuZ3RoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5tYXhfY2hhaW47XG5cbiAgcy5zdHJzdGFydCA9IDA7XG4gIHMuYmxvY2tfc3RhcnQgPSAwO1xuICBzLmxvb2thaGVhZCA9IDA7XG4gIHMuaW5zZXJ0ID0gMDtcbiAgcy5tYXRjaF9sZW5ndGggPSBzLnByZXZfbGVuZ3RoID0gTUlOX01BVENIIC0gMTtcbiAgcy5tYXRjaF9hdmFpbGFibGUgPSAwO1xuICBzLmluc19oID0gMDtcbn1cblxuXG5mdW5jdGlvbiBEZWZsYXRlU3RhdGUoKSB7XG4gIHRoaXMuc3RybSA9IG51bGw7ICAgICAgICAgICAgLyogcG9pbnRlciBiYWNrIHRvIHRoaXMgemxpYiBzdHJlYW0gKi9cbiAgdGhpcy5zdGF0dXMgPSAwOyAgICAgICAgICAgIC8qIGFzIHRoZSBuYW1lIGltcGxpZXMgKi9cbiAgdGhpcy5wZW5kaW5nX2J1ZiA9IG51bGw7ICAgICAgLyogb3V0cHV0IHN0aWxsIHBlbmRpbmcgKi9cbiAgdGhpcy5wZW5kaW5nX2J1Zl9zaXplID0gMDsgIC8qIHNpemUgb2YgcGVuZGluZ19idWYgKi9cbiAgdGhpcy5wZW5kaW5nX291dCA9IDA7ICAgICAgIC8qIG5leHQgcGVuZGluZyBieXRlIHRvIG91dHB1dCB0byB0aGUgc3RyZWFtICovXG4gIHRoaXMucGVuZGluZyA9IDA7ICAgICAgICAgICAvKiBuYiBvZiBieXRlcyBpbiB0aGUgcGVuZGluZyBidWZmZXIgKi9cbiAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi9cbiAgdGhpcy5nemhlYWQgPSBudWxsOyAgICAgICAgIC8qIGd6aXAgaGVhZGVyIGluZm9ybWF0aW9uIHRvIHdyaXRlICovXG4gIHRoaXMuZ3ppbmRleCA9IDA7ICAgICAgICAgICAvKiB3aGVyZSBpbiBleHRyYSwgbmFtZSwgb3IgY29tbWVudCAqL1xuICB0aGlzLm1ldGhvZCA9IFpfREVGTEFURUQ7IC8qIGNhbiBvbmx5IGJlIERFRkxBVEVEICovXG4gIHRoaXMubGFzdF9mbHVzaCA9IC0xOyAgIC8qIHZhbHVlIG9mIGZsdXNoIHBhcmFtIGZvciBwcmV2aW91cyBkZWZsYXRlIGNhbGwgKi9cblxuICB0aGlzLndfc2l6ZSA9IDA7ICAvKiBMWjc3IHdpbmRvdyBzaXplICgzMksgYnkgZGVmYXVsdCkgKi9cbiAgdGhpcy53X2JpdHMgPSAwOyAgLyogbG9nMih3X3NpemUpICAoOC4uMTYpICovXG4gIHRoaXMud19tYXNrID0gMDsgIC8qIHdfc2l6ZSAtIDEgKi9cblxuICB0aGlzLndpbmRvdyA9IG51bGw7XG4gIC8qIFNsaWRpbmcgd2luZG93LiBJbnB1dCBieXRlcyBhcmUgcmVhZCBpbnRvIHRoZSBzZWNvbmQgaGFsZiBvZiB0aGUgd2luZG93LFxuICAgKiBhbmQgbW92ZSB0byB0aGUgZmlyc3QgaGFsZiBsYXRlciB0byBrZWVwIGEgZGljdGlvbmFyeSBvZiBhdCBsZWFzdCB3U2l6ZVxuICAgKiBieXRlcy4gV2l0aCB0aGlzIG9yZ2FuaXphdGlvbiwgbWF0Y2hlcyBhcmUgbGltaXRlZCB0byBhIGRpc3RhbmNlIG9mXG4gICAqIHdTaXplLU1BWF9NQVRDSCBieXRlcywgYnV0IHRoaXMgZW5zdXJlcyB0aGF0IElPIGlzIGFsd2F5c1xuICAgKiBwZXJmb3JtZWQgd2l0aCBhIGxlbmd0aCBtdWx0aXBsZSBvZiB0aGUgYmxvY2sgc2l6ZS5cbiAgICovXG5cbiAgdGhpcy53aW5kb3dfc2l6ZSA9IDA7XG4gIC8qIEFjdHVhbCBzaXplIG9mIHdpbmRvdzogMip3U2l6ZSwgZXhjZXB0IHdoZW4gdGhlIHVzZXIgaW5wdXQgYnVmZmVyXG4gICAqIGlzIGRpcmVjdGx5IHVzZWQgYXMgc2xpZGluZyB3aW5kb3cuXG4gICAqL1xuXG4gIHRoaXMucHJldiA9IG51bGw7XG4gIC8qIExpbmsgdG8gb2xkZXIgc3RyaW5nIHdpdGggc2FtZSBoYXNoIGluZGV4LiBUbyBsaW1pdCB0aGUgc2l6ZSBvZiB0aGlzXG4gICAqIGFycmF5IHRvIDY0SywgdGhpcyBsaW5rIGlzIG1haW50YWluZWQgb25seSBmb3IgdGhlIGxhc3QgMzJLIHN0cmluZ3MuXG4gICAqIEFuIGluZGV4IGluIHRoaXMgYXJyYXkgaXMgdGh1cyBhIHdpbmRvdyBpbmRleCBtb2R1bG8gMzJLLlxuICAgKi9cblxuICB0aGlzLmhlYWQgPSBudWxsOyAgIC8qIEhlYWRzIG9mIHRoZSBoYXNoIGNoYWlucyBvciBOSUwuICovXG5cbiAgdGhpcy5pbnNfaCA9IDA7ICAgICAgIC8qIGhhc2ggaW5kZXggb2Ygc3RyaW5nIHRvIGJlIGluc2VydGVkICovXG4gIHRoaXMuaGFzaF9zaXplID0gMDsgICAvKiBudW1iZXIgb2YgZWxlbWVudHMgaW4gaGFzaCB0YWJsZSAqL1xuICB0aGlzLmhhc2hfYml0cyA9IDA7ICAgLyogbG9nMihoYXNoX3NpemUpICovXG4gIHRoaXMuaGFzaF9tYXNrID0gMDsgICAvKiBoYXNoX3NpemUtMSAqL1xuXG4gIHRoaXMuaGFzaF9zaGlmdCA9IDA7XG4gIC8qIE51bWJlciBvZiBiaXRzIGJ5IHdoaWNoIGluc19oIG11c3QgYmUgc2hpZnRlZCBhdCBlYWNoIGlucHV0XG4gICAqIHN0ZXAuIEl0IG11c3QgYmUgc3VjaCB0aGF0IGFmdGVyIE1JTl9NQVRDSCBzdGVwcywgdGhlIG9sZGVzdFxuICAgKiBieXRlIG5vIGxvbmdlciB0YWtlcyBwYXJ0IGluIHRoZSBoYXNoIGtleSwgdGhhdCBpczpcbiAgICogICBoYXNoX3NoaWZ0ICogTUlOX01BVENIID49IGhhc2hfYml0c1xuICAgKi9cblxuICB0aGlzLmJsb2NrX3N0YXJ0ID0gMDtcbiAgLyogV2luZG93IHBvc2l0aW9uIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGN1cnJlbnQgb3V0cHV0IGJsb2NrLiBHZXRzXG4gICAqIG5lZ2F0aXZlIHdoZW4gdGhlIHdpbmRvdyBpcyBtb3ZlZCBiYWNrd2FyZHMuXG4gICAqL1xuXG4gIHRoaXMubWF0Y2hfbGVuZ3RoID0gMDsgICAgICAvKiBsZW5ndGggb2YgYmVzdCBtYXRjaCAqL1xuICB0aGlzLnByZXZfbWF0Y2ggPSAwOyAgICAgICAgLyogcHJldmlvdXMgbWF0Y2ggKi9cbiAgdGhpcy5tYXRjaF9hdmFpbGFibGUgPSAwOyAgIC8qIHNldCBpZiBwcmV2aW91cyBtYXRjaCBleGlzdHMgKi9cbiAgdGhpcy5zdHJzdGFydCA9IDA7ICAgICAgICAgIC8qIHN0YXJ0IG9mIHN0cmluZyB0byBpbnNlcnQgKi9cbiAgdGhpcy5tYXRjaF9zdGFydCA9IDA7ICAgICAgIC8qIHN0YXJ0IG9mIG1hdGNoaW5nIHN0cmluZyAqL1xuICB0aGlzLmxvb2thaGVhZCA9IDA7ICAgICAgICAgLyogbnVtYmVyIG9mIHZhbGlkIGJ5dGVzIGFoZWFkIGluIHdpbmRvdyAqL1xuXG4gIHRoaXMucHJldl9sZW5ndGggPSAwO1xuICAvKiBMZW5ndGggb2YgdGhlIGJlc3QgbWF0Y2ggYXQgcHJldmlvdXMgc3RlcC4gTWF0Y2hlcyBub3QgZ3JlYXRlciB0aGFuIHRoaXNcbiAgICogYXJlIGRpc2NhcmRlZC4gVGhpcyBpcyB1c2VkIGluIHRoZSBsYXp5IG1hdGNoIGV2YWx1YXRpb24uXG4gICAqL1xuXG4gIHRoaXMubWF4X2NoYWluX2xlbmd0aCA9IDA7XG4gIC8qIFRvIHNwZWVkIHVwIGRlZmxhdGlvbiwgaGFzaCBjaGFpbnMgYXJlIG5ldmVyIHNlYXJjaGVkIGJleW9uZCB0aGlzXG4gICAqIGxlbmd0aC4gIEEgaGlnaGVyIGxpbWl0IGltcHJvdmVzIGNvbXByZXNzaW9uIHJhdGlvIGJ1dCBkZWdyYWRlcyB0aGVcbiAgICogc3BlZWQuXG4gICAqL1xuXG4gIHRoaXMubWF4X2xhenlfbWF0Y2ggPSAwO1xuICAvKiBBdHRlbXB0IHRvIGZpbmQgYSBiZXR0ZXIgbWF0Y2ggb25seSB3aGVuIHRoZSBjdXJyZW50IG1hdGNoIGlzIHN0cmljdGx5XG4gICAqIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLiBUaGlzIG1lY2hhbmlzbSBpcyB1c2VkIG9ubHkgZm9yIGNvbXByZXNzaW9uXG4gICAqIGxldmVscyA+PSA0LlxuICAgKi9cbiAgLy8gVGhhdCdzIGFsaWFzIHRvIG1heF9sYXp5X21hdGNoLCBkb24ndCB1c2UgZGlyZWN0bHlcbiAgLy90aGlzLm1heF9pbnNlcnRfbGVuZ3RoID0gMDtcbiAgLyogSW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBoYXNoIHRhYmxlIG9ubHkgaWYgdGhlIG1hdGNoIGxlbmd0aCBpcyBub3RcbiAgICogZ3JlYXRlciB0aGFuIHRoaXMgbGVuZ3RoLiBUaGlzIHNhdmVzIHRpbWUgYnV0IGRlZ3JhZGVzIGNvbXByZXNzaW9uLlxuICAgKiBtYXhfaW5zZXJ0X2xlbmd0aCBpcyB1c2VkIG9ubHkgZm9yIGNvbXByZXNzaW9uIGxldmVscyA8PSAzLlxuICAgKi9cblxuICB0aGlzLmxldmVsID0gMDsgICAgIC8qIGNvbXByZXNzaW9uIGxldmVsICgxLi45KSAqL1xuICB0aGlzLnN0cmF0ZWd5ID0gMDsgIC8qIGZhdm9yIG9yIGZvcmNlIEh1ZmZtYW4gY29kaW5nKi9cblxuICB0aGlzLmdvb2RfbWF0Y2ggPSAwO1xuICAvKiBVc2UgYSBmYXN0ZXIgc2VhcmNoIHdoZW4gdGhlIHByZXZpb3VzIG1hdGNoIGlzIGxvbmdlciB0aGFuIHRoaXMgKi9cblxuICB0aGlzLm5pY2VfbWF0Y2ggPSAwOyAvKiBTdG9wIHNlYXJjaGluZyB3aGVuIGN1cnJlbnQgbWF0Y2ggZXhjZWVkcyB0aGlzICovXG5cbiAgICAgICAgICAgICAgLyogdXNlZCBieSB0cmVlcy5jOiAqL1xuXG4gIC8qIERpZG4ndCB1c2UgY3RfZGF0YSB0eXBlZGVmIGJlbG93IHRvIHN1cHByZXNzIGNvbXBpbGVyIHdhcm5pbmcgKi9cblxuICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGR5bl9sdHJlZVtIRUFQX1NJWkVdOyAgIC8qIGxpdGVyYWwgYW5kIGxlbmd0aCB0cmVlICovXG4gIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2R0cmVlWzIqRF9DT0RFUysxXTsgLyogZGlzdGFuY2UgdHJlZSAqL1xuICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGJsX3RyZWVbMipCTF9DT0RFUysxXTsgIC8qIEh1ZmZtYW4gdHJlZSBmb3IgYml0IGxlbmd0aHMgKi9cblxuICAvLyBVc2UgZmxhdCBhcnJheSBvZiBET1VCTEUgc2l6ZSwgd2l0aCBpbnRlcmxlYXZlZCBmYXRhLFxuICAvLyBiZWNhdXNlIEpTIGRvZXMgbm90IHN1cHBvcnQgZWZmZWN0aXZlXG4gIHRoaXMuZHluX2x0cmVlICA9IG5ldyB1dGlscy5CdWYxNihIRUFQX1NJWkUgKiAyKTtcbiAgdGhpcy5keW5fZHRyZWUgID0gbmV3IHV0aWxzLkJ1ZjE2KCgyKkRfQ09ERVMrMSkgKiAyKTtcbiAgdGhpcy5ibF90cmVlICAgID0gbmV3IHV0aWxzLkJ1ZjE2KCgyKkJMX0NPREVTKzEpICogMik7XG4gIHplcm8odGhpcy5keW5fbHRyZWUpO1xuICB6ZXJvKHRoaXMuZHluX2R0cmVlKTtcbiAgemVybyh0aGlzLmJsX3RyZWUpO1xuXG4gIHRoaXMubF9kZXNjICAgPSBudWxsOyAgICAgICAgIC8qIGRlc2MuIGZvciBsaXRlcmFsIHRyZWUgKi9cbiAgdGhpcy5kX2Rlc2MgICA9IG51bGw7ICAgICAgICAgLyogZGVzYy4gZm9yIGRpc3RhbmNlIHRyZWUgKi9cbiAgdGhpcy5ibF9kZXNjICA9IG51bGw7ICAgICAgICAgLyogZGVzYy4gZm9yIGJpdCBsZW5ndGggdHJlZSAqL1xuXG4gIC8vdXNoIGJsX2NvdW50W01BWF9CSVRTKzFdO1xuICB0aGlzLmJsX2NvdW50ID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWF9CSVRTKzEpO1xuICAvKiBudW1iZXIgb2YgY29kZXMgYXQgZWFjaCBiaXQgbGVuZ3RoIGZvciBhbiBvcHRpbWFsIHRyZWUgKi9cblxuICAvL2ludCBoZWFwWzIqTF9DT0RFUysxXTsgICAgICAvKiBoZWFwIHVzZWQgdG8gYnVpbGQgdGhlIEh1ZmZtYW4gdHJlZXMgKi9cbiAgdGhpcy5oZWFwID0gbmV3IHV0aWxzLkJ1ZjE2KDIqTF9DT0RFUysxKTsgIC8qIGhlYXAgdXNlZCB0byBidWlsZCB0aGUgSHVmZm1hbiB0cmVlcyAqL1xuICB6ZXJvKHRoaXMuaGVhcCk7XG5cbiAgdGhpcy5oZWFwX2xlbiA9IDA7ICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSBoZWFwICovXG4gIHRoaXMuaGVhcF9tYXggPSAwOyAgICAgICAgICAgICAgIC8qIGVsZW1lbnQgb2YgbGFyZ2VzdCBmcmVxdWVuY3kgKi9cbiAgLyogVGhlIHNvbnMgb2YgaGVhcFtuXSBhcmUgaGVhcFsyKm5dIGFuZCBoZWFwWzIqbisxXS4gaGVhcFswXSBpcyBub3QgdXNlZC5cbiAgICogVGhlIHNhbWUgaGVhcCBhcnJheSBpcyB1c2VkIHRvIGJ1aWxkIGFsbCB0cmVlcy5cbiAgICovXG5cbiAgdGhpcy5kZXB0aCA9IG5ldyB1dGlscy5CdWYxNigyKkxfQ09ERVMrMSk7IC8vdWNoIGRlcHRoWzIqTF9DT0RFUysxXTtcbiAgemVybyh0aGlzLmRlcHRoKTtcbiAgLyogRGVwdGggb2YgZWFjaCBzdWJ0cmVlIHVzZWQgYXMgdGllIGJyZWFrZXIgZm9yIHRyZWVzIG9mIGVxdWFsIGZyZXF1ZW5jeVxuICAgKi9cblxuICB0aGlzLmxfYnVmID0gMDsgICAgICAgICAgLyogYnVmZmVyIGluZGV4IGZvciBsaXRlcmFscyBvciBsZW5ndGhzICovXG5cbiAgdGhpcy5saXRfYnVmc2l6ZSA9IDA7XG4gIC8qIFNpemUgb2YgbWF0Y2ggYnVmZmVyIGZvciBsaXRlcmFscy9sZW5ndGhzLiAgVGhlcmUgYXJlIDQgcmVhc29ucyBmb3JcbiAgICogbGltaXRpbmcgbGl0X2J1ZnNpemUgdG8gNjRLOlxuICAgKiAgIC0gZnJlcXVlbmNpZXMgY2FuIGJlIGtlcHQgaW4gMTYgYml0IGNvdW50ZXJzXG4gICAqICAgLSBpZiBjb21wcmVzc2lvbiBpcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZpcnN0IGJsb2NrLCBhbGwgaW5wdXRcbiAgICogICAgIGRhdGEgaXMgc3RpbGwgaW4gdGhlIHdpbmRvdyBzbyB3ZSBjYW4gc3RpbGwgZW1pdCBhIHN0b3JlZCBibG9jayBldmVuXG4gICAqICAgICB3aGVuIGlucHV0IGNvbWVzIGZyb20gc3RhbmRhcmQgaW5wdXQuICAoVGhpcyBjYW4gYWxzbyBiZSBkb25lIGZvclxuICAgKiAgICAgYWxsIGJsb2NrcyBpZiBsaXRfYnVmc2l6ZSBpcyBub3QgZ3JlYXRlciB0aGFuIDMySy4pXG4gICAqICAgLSBpZiBjb21wcmVzc2lvbiBpcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgYSBmaWxlIHNtYWxsZXIgdGhhbiA2NEssIHdlIGNhblxuICAgKiAgICAgZXZlbiBlbWl0IGEgc3RvcmVkIGZpbGUgaW5zdGVhZCBvZiBhIHN0b3JlZCBibG9jayAoc2F2aW5nIDUgYnl0ZXMpLlxuICAgKiAgICAgVGhpcyBpcyBhcHBsaWNhYmxlIG9ubHkgZm9yIHppcCAobm90IGd6aXAgb3IgemxpYikuXG4gICAqICAgLSBjcmVhdGluZyBuZXcgSHVmZm1hbiB0cmVlcyBsZXNzIGZyZXF1ZW50bHkgbWF5IG5vdCBwcm92aWRlIGZhc3RcbiAgICogICAgIGFkYXB0YXRpb24gdG8gY2hhbmdlcyBpbiB0aGUgaW5wdXQgZGF0YSBzdGF0aXN0aWNzLiAoVGFrZSBmb3JcbiAgICogICAgIGV4YW1wbGUgYSBiaW5hcnkgZmlsZSB3aXRoIHBvb3JseSBjb21wcmVzc2libGUgY29kZSBmb2xsb3dlZCBieVxuICAgKiAgICAgYSBoaWdobHkgY29tcHJlc3NpYmxlIHN0cmluZyB0YWJsZS4pIFNtYWxsZXIgYnVmZmVyIHNpemVzIGdpdmVcbiAgICogICAgIGZhc3QgYWRhcHRhdGlvbiBidXQgaGF2ZSBvZiBjb3Vyc2UgdGhlIG92ZXJoZWFkIG9mIHRyYW5zbWl0dGluZ1xuICAgKiAgICAgdHJlZXMgbW9yZSBmcmVxdWVudGx5LlxuICAgKiAgIC0gSSBjYW4ndCBjb3VudCBhYm92ZSA0XG4gICAqL1xuXG4gIHRoaXMubGFzdF9saXQgPSAwOyAgICAgIC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi9cblxuICB0aGlzLmRfYnVmID0gMDtcbiAgLyogQnVmZmVyIGluZGV4IGZvciBkaXN0YW5jZXMuIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCBkX2J1ZiBhbmQgbF9idWYgaGF2ZVxuICAgKiB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHMuIFRvIHVzZSBkaWZmZXJlbnQgbGVuZ3RocywgYW4gZXh0cmEgZmxhZ1xuICAgKiBhcnJheSB3b3VsZCBiZSBuZWNlc3NhcnkuXG4gICAqL1xuXG4gIHRoaXMub3B0X2xlbiA9IDA7ICAgICAgIC8qIGJpdCBsZW5ndGggb2YgY3VycmVudCBibG9jayB3aXRoIG9wdGltYWwgdHJlZXMgKi9cbiAgdGhpcy5zdGF0aWNfbGVuID0gMDsgICAgLyogYml0IGxlbmd0aCBvZiBjdXJyZW50IGJsb2NrIHdpdGggc3RhdGljIHRyZWVzICovXG4gIHRoaXMubWF0Y2hlcyA9IDA7ICAgICAgIC8qIG51bWJlciBvZiBzdHJpbmcgbWF0Y2hlcyBpbiBjdXJyZW50IGJsb2NrICovXG4gIHRoaXMuaW5zZXJ0ID0gMDsgICAgICAgIC8qIGJ5dGVzIGF0IGVuZCBvZiB3aW5kb3cgbGVmdCB0byBpbnNlcnQgKi9cblxuXG4gIHRoaXMuYmlfYnVmID0gMDtcbiAgLyogT3V0cHV0IGJ1ZmZlci4gYml0cyBhcmUgaW5zZXJ0ZWQgc3RhcnRpbmcgYXQgdGhlIGJvdHRvbSAobGVhc3RcbiAgICogc2lnbmlmaWNhbnQgYml0cykuXG4gICAqL1xuICB0aGlzLmJpX3ZhbGlkID0gMDtcbiAgLyogTnVtYmVyIG9mIHZhbGlkIGJpdHMgaW4gYmlfYnVmLiAgQWxsIGJpdHMgYWJvdmUgdGhlIGxhc3QgdmFsaWQgYml0XG4gICAqIGFyZSBhbHdheXMgemVyby5cbiAgICovXG5cbiAgLy8gVXNlZCBmb3Igd2luZG93IG1lbW9yeSBpbml0LiBXZSBzYWZlbHkgaWdub3JlIGl0IGZvciBKUy4gVGhhdCBtYWtlc1xuICAvLyBzZW5zZSBvbmx5IGZvciBwb2ludGVycyBhbmQgbWVtb3J5IGNoZWNrIHRvb2xzLlxuICAvL3RoaXMuaGlnaF93YXRlciA9IDA7XG4gIC8qIEhpZ2ggd2F0ZXIgbWFyayBvZmZzZXQgaW4gd2luZG93IGZvciBpbml0aWFsaXplZCBieXRlcyAtLSBieXRlcyBhYm92ZVxuICAgKiB0aGlzIGFyZSBzZXQgdG8gemVybyBpbiBvcmRlciB0byBhdm9pZCBtZW1vcnkgY2hlY2sgd2FybmluZ3Mgd2hlblxuICAgKiBsb25nZXN0IG1hdGNoIHJvdXRpbmVzIGFjY2VzcyBieXRlcyBwYXN0IHRoZSBpbnB1dC4gIFRoaXMgaXMgdGhlblxuICAgKiB1cGRhdGVkIHRvIHRoZSBuZXcgaGlnaCB3YXRlciBtYXJrLlxuICAgKi9cbn1cblxuXG5mdW5jdGlvbiBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pIHtcbiAgdmFyIHM7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSAwO1xuICBzdHJtLmRhdGFfdHlwZSA9IFpfVU5LTk9XTjtcblxuICBzID0gc3RybS5zdGF0ZTtcbiAgcy5wZW5kaW5nID0gMDtcbiAgcy5wZW5kaW5nX291dCA9IDA7XG5cbiAgaWYgKHMud3JhcCA8IDApIHtcbiAgICBzLndyYXAgPSAtcy53cmFwO1xuICAgIC8qIHdhcyBtYWRlIG5lZ2F0aXZlIGJ5IGRlZmxhdGUoLi4uLCBaX0ZJTklTSCk7ICovXG4gIH1cbiAgcy5zdGF0dXMgPSAocy53cmFwID8gSU5JVF9TVEFURSA6IEJVU1lfU1RBVEUpO1xuICBzdHJtLmFkbGVyID0gKHMud3JhcCA9PT0gMikgP1xuICAgIDAgIC8vIGNyYzMyKDAsIFpfTlVMTCwgMClcbiAgOlxuICAgIDE7IC8vIGFkbGVyMzIoMCwgWl9OVUxMLCAwKVxuICBzLmxhc3RfZmx1c2ggPSBaX05PX0ZMVVNIO1xuICB0cmVlcy5fdHJfaW5pdChzKTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cblxuZnVuY3Rpb24gZGVmbGF0ZVJlc2V0KHN0cm0pIHtcbiAgdmFyIHJldCA9IGRlZmxhdGVSZXNldEtlZXAoc3RybSk7XG4gIGlmIChyZXQgPT09IFpfT0spIHtcbiAgICBsbV9pbml0KHN0cm0uc3RhdGUpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cblxuZnVuY3Rpb24gZGVmbGF0ZVNldEhlYWRlcihzdHJtLCBoZWFkKSB7XG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgaWYgKHN0cm0uc3RhdGUud3JhcCAhPT0gMikgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RybS5zdGF0ZS5nemhlYWQgPSBoZWFkO1xuICByZXR1cm4gWl9PSztcbn1cblxuXG5mdW5jdGlvbiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIG1ldGhvZCwgd2luZG93Qml0cywgbWVtTGV2ZWwsIHN0cmF0ZWd5KSB7XG4gIGlmICghc3RybSkgeyAvLyA9PT0gWl9OVUxMXG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIHZhciB3cmFwID0gMTtcblxuICBpZiAobGV2ZWwgPT09IFpfREVGQVVMVF9DT01QUkVTU0lPTikge1xuICAgIGxldmVsID0gNjtcbiAgfVxuXG4gIGlmICh3aW5kb3dCaXRzIDwgMCkgeyAvKiBzdXBwcmVzcyB6bGliIHdyYXBwZXIgKi9cbiAgICB3cmFwID0gMDtcbiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7XG4gIH1cblxuICBlbHNlIGlmICh3aW5kb3dCaXRzID4gMTUpIHtcbiAgICB3cmFwID0gMjsgICAgICAgICAgIC8qIHdyaXRlIGd6aXAgd3JhcHBlciBpbnN0ZWFkICovXG4gICAgd2luZG93Qml0cyAtPSAxNjtcbiAgfVxuXG5cbiAgaWYgKG1lbUxldmVsIDwgMSB8fCBtZW1MZXZlbCA+IE1BWF9NRU1fTEVWRUwgfHwgbWV0aG9kICE9PSBaX0RFRkxBVEVEIHx8XG4gICAgd2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1IHx8IGxldmVsIDwgMCB8fCBsZXZlbCA+IDkgfHxcbiAgICBzdHJhdGVneSA8IDAgfHwgc3RyYXRlZ3kgPiBaX0ZJWEVEKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuXG4gIGlmICh3aW5kb3dCaXRzID09PSA4KSB7XG4gICAgd2luZG93Qml0cyA9IDk7XG4gIH1cbiAgLyogdW50aWwgMjU2LWJ5dGUgd2luZG93IGJ1ZyBmaXhlZCAqL1xuXG4gIHZhciBzID0gbmV3IERlZmxhdGVTdGF0ZSgpO1xuXG4gIHN0cm0uc3RhdGUgPSBzO1xuICBzLnN0cm0gPSBzdHJtO1xuXG4gIHMud3JhcCA9IHdyYXA7XG4gIHMuZ3poZWFkID0gbnVsbDtcbiAgcy53X2JpdHMgPSB3aW5kb3dCaXRzO1xuICBzLndfc2l6ZSA9IDEgPDwgcy53X2JpdHM7XG4gIHMud19tYXNrID0gcy53X3NpemUgLSAxO1xuXG4gIHMuaGFzaF9iaXRzID0gbWVtTGV2ZWwgKyA3O1xuICBzLmhhc2hfc2l6ZSA9IDEgPDwgcy5oYXNoX2JpdHM7XG4gIHMuaGFzaF9tYXNrID0gcy5oYXNoX3NpemUgLSAxO1xuICBzLmhhc2hfc2hpZnQgPSB+figocy5oYXNoX2JpdHMgKyBNSU5fTUFUQ0ggLSAxKSAvIE1JTl9NQVRDSCk7XG5cbiAgcy53aW5kb3cgPSBuZXcgdXRpbHMuQnVmOChzLndfc2l6ZSAqIDIpO1xuICBzLmhlYWQgPSBuZXcgdXRpbHMuQnVmMTYocy5oYXNoX3NpemUpO1xuICBzLnByZXYgPSBuZXcgdXRpbHMuQnVmMTYocy53X3NpemUpO1xuXG4gIC8vIERvbid0IG5lZWQgbWVtIGluaXQgbWFnaWMgZm9yIEpTLlxuICAvL3MuaGlnaF93YXRlciA9IDA7ICAvKiBub3RoaW5nIHdyaXR0ZW4gdG8gcy0+d2luZG93IHlldCAqL1xuXG4gIHMubGl0X2J1ZnNpemUgPSAxIDw8IChtZW1MZXZlbCArIDYpOyAvKiAxNksgZWxlbWVudHMgYnkgZGVmYXVsdCAqL1xuXG4gIHMucGVuZGluZ19idWZfc2l6ZSA9IHMubGl0X2J1ZnNpemUgKiA0O1xuICBzLnBlbmRpbmdfYnVmID0gbmV3IHV0aWxzLkJ1Zjgocy5wZW5kaW5nX2J1Zl9zaXplKTtcblxuICBzLmRfYnVmID0gcy5saXRfYnVmc2l6ZSA+PiAxO1xuICBzLmxfYnVmID0gKDEgKyAyKSAqIHMubGl0X2J1ZnNpemU7XG5cbiAgcy5sZXZlbCA9IGxldmVsO1xuICBzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gIHMubWV0aG9kID0gbWV0aG9kO1xuXG4gIHJldHVybiBkZWZsYXRlUmVzZXQoc3RybSk7XG59XG5cbmZ1bmN0aW9uIGRlZmxhdGVJbml0KHN0cm0sIGxldmVsKSB7XG4gIHJldHVybiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIFpfREVGTEFURUQsIE1BWF9XQklUUywgREVGX01FTV9MRVZFTCwgWl9ERUZBVUxUX1NUUkFURUdZKTtcbn1cblxuXG5mdW5jdGlvbiBkZWZsYXRlKHN0cm0sIGZsdXNoKSB7XG4gIHZhciBvbGRfZmx1c2gsIHM7XG4gIHZhciBiZWcsIHZhbDsgLy8gZm9yIGd6aXAgaGVhZGVyIHdyaXRlIG9ubHlcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHxcbiAgICBmbHVzaCA+IFpfQkxPQ0sgfHwgZmx1c2ggPCAwKSB7XG4gICAgcmV0dXJuIHN0cm0gPyBlcnIoc3RybSwgWl9TVFJFQU1fRVJST1IpIDogWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICBzID0gc3RybS5zdGF0ZTtcblxuICBpZiAoIXN0cm0ub3V0cHV0IHx8XG4gICAgICAoIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkgfHxcbiAgICAgIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIGZsdXNoICE9PSBaX0ZJTklTSCkpIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIChzdHJtLmF2YWlsX291dCA9PT0gMCkgPyBaX0JVRl9FUlJPUiA6IFpfU1RSRUFNX0VSUk9SKTtcbiAgfVxuXG4gIHMuc3RybSA9IHN0cm07IC8qIGp1c3QgaW4gY2FzZSAqL1xuICBvbGRfZmx1c2ggPSBzLmxhc3RfZmx1c2g7XG4gIHMubGFzdF9mbHVzaCA9IGZsdXNoO1xuXG4gIC8qIFdyaXRlIHRoZSBoZWFkZXIgKi9cbiAgaWYgKHMuc3RhdHVzID09PSBJTklUX1NUQVRFKSB7XG5cbiAgICBpZiAocy53cmFwID09PSAyKSB7IC8vIEdaSVAgaGVhZGVyXG4gICAgICBzdHJtLmFkbGVyID0gMDsgIC8vY3JjMzIoMEwsIFpfTlVMTCwgMCk7XG4gICAgICBwdXRfYnl0ZShzLCAzMSk7XG4gICAgICBwdXRfYnl0ZShzLCAxMzkpO1xuICAgICAgcHV0X2J5dGUocywgOCk7XG4gICAgICBpZiAoIXMuZ3poZWFkKSB7IC8vIHMtPmd6aGVhZCA9PSBaX05VTExcbiAgICAgICAgcHV0X2J5dGUocywgMCk7XG4gICAgICAgIHB1dF9ieXRlKHMsIDApO1xuICAgICAgICBwdXRfYnl0ZShzLCAwKTtcbiAgICAgICAgcHV0X2J5dGUocywgMCk7XG4gICAgICAgIHB1dF9ieXRlKHMsIDApO1xuICAgICAgICBwdXRfYnl0ZShzLCBzLmxldmVsID09PSA5ID8gMiA6XG4gICAgICAgICAgICAgICAgICAgIChzLnN0cmF0ZWd5ID49IFpfSFVGRk1BTl9PTkxZIHx8IHMubGV2ZWwgPCAyID9cbiAgICAgICAgICAgICAgICAgICAgIDQgOiAwKSk7XG4gICAgICAgIHB1dF9ieXRlKHMsIE9TX0NPREUpO1xuICAgICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRleHQgPyAxIDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAocy5nemhlYWQuaGNyYyA/IDIgOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICghcy5nemhlYWQuZXh0cmEgPyAwIDogNCkgK1xuICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLm5hbWUgPyAwIDogOCkgK1xuICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLmNvbW1lbnQgPyAwIDogMTYpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGltZSA+PiA4KSAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGltZSA+PiAxNikgJiAweGZmKTtcbiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gMjQpICYgMHhmZik7XG4gICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDpcbiAgICAgICAgICAgICAgICAgICAgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIgP1xuICAgICAgICAgICAgICAgICAgICAgNCA6IDApKTtcbiAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQub3MgJiAweGZmKTtcbiAgICAgICAgaWYgKHMuZ3poZWFkLmV4dHJhICYmIHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkge1xuICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLmV4dHJhLmxlbmd0aCAmIDB4ZmYpO1xuICAgICAgICAgIHB1dF9ieXRlKHMsIChzLmd6aGVhZC5leHRyYS5sZW5ndGggPj4gOCkgJiAweGZmKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocy5nemhlYWQuaGNyYykge1xuICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcsIDApO1xuICAgICAgICB9XG4gICAgICAgIHMuZ3ppbmRleCA9IDA7XG4gICAgICAgIHMuc3RhdHVzID0gRVhUUkFfU1RBVEU7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgLy8gREVGTEFURSBoZWFkZXJcbiAgICB7XG4gICAgICB2YXIgaGVhZGVyID0gKFpfREVGTEFURUQgKyAoKHMud19iaXRzIC0gOCkgPDwgNCkpIDw8IDg7XG4gICAgICB2YXIgbGV2ZWxfZmxhZ3MgPSAtMTtcblxuICAgICAgaWYgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIpIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAwO1xuICAgICAgfSBlbHNlIGlmIChzLmxldmVsIDwgNikge1xuICAgICAgICBsZXZlbF9mbGFncyA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHMubGV2ZWwgPT09IDYpIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAzO1xuICAgICAgfVxuICAgICAgaGVhZGVyIHw9IChsZXZlbF9mbGFncyA8PCA2KTtcbiAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7IGhlYWRlciB8PSBQUkVTRVRfRElDVDsgfVxuICAgICAgaGVhZGVyICs9IDMxIC0gKGhlYWRlciAlIDMxKTtcblxuICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFO1xuICAgICAgcHV0U2hvcnRNU0IocywgaGVhZGVyKTtcblxuICAgICAgLyogU2F2ZSB0aGUgYWRsZXIzMiBvZiB0aGUgcHJlc2V0IGRpY3Rpb25hcnk6ICovXG4gICAgICBpZiAocy5zdHJzdGFydCAhPT0gMCkge1xuICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyID4+PiAxNik7XG4gICAgICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgJiAweGZmZmYpO1xuICAgICAgfVxuICAgICAgc3RybS5hZGxlciA9IDE7IC8vIGFkbGVyMzIoMEwsIFpfTlVMTCwgMCk7XG4gICAgfVxuICB9XG5cbi8vI2lmZGVmIEdaSVBcbiAgaWYgKHMuc3RhdHVzID09PSBFWFRSQV9TVEFURSkge1xuICAgIGlmIChzLmd6aGVhZC5leHRyYS8qICE9IFpfTlVMTCovKSB7XG4gICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovXG5cbiAgICAgIHdoaWxlIChzLmd6aW5kZXggPCAocy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMHhmZmZmKSkge1xuICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHtcbiAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gICAgICAgICAgYmVnID0gcy5wZW5kaW5nO1xuICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLmV4dHJhW3MuZ3ppbmRleF0gJiAweGZmKTtcbiAgICAgICAgcy5nemluZGV4Kys7XG4gICAgICB9XG4gICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHtcbiAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTtcbiAgICAgIH1cbiAgICAgIGlmIChzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkge1xuICAgICAgICBzLmd6aW5kZXggPSAwO1xuICAgICAgICBzLnN0YXR1cyA9IE5BTUVfU1RBVEU7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFO1xuICAgIH1cbiAgfVxuICBpZiAocy5zdGF0dXMgPT09IE5BTUVfU1RBVEUpIHtcbiAgICBpZiAocy5nemhlYWQubmFtZS8qICE9IFpfTlVMTCovKSB7XG4gICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovXG4gICAgICAvL2ludCB2YWw7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgICAgIGJlZyA9IHMucGVuZGluZztcbiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICAgIHZhbCA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSlMgc3BlY2lmaWM6IGxpdHRsZSBtYWdpYyB0byBhZGQgemVybyB0ZXJtaW5hdG9yIHRvIGVuZCBvZiBzdHJpbmdcbiAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLm5hbWUubGVuZ3RoKSB7XG4gICAgICAgICAgdmFsID0gcy5nemhlYWQubmFtZS5jaGFyQ29kZUF0KHMuZ3ppbmRleCsrKSAmIDB4ZmY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwdXRfYnl0ZShzLCB2YWwpO1xuICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTtcblxuICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICB9XG4gICAgICBpZiAodmFsID09PSAwKSB7XG4gICAgICAgIHMuZ3ppbmRleCA9IDA7XG4gICAgICAgIHMuc3RhdHVzID0gQ09NTUVOVF9TVEFURTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzLnN0YXR1cyA9IENPTU1FTlRfU1RBVEU7XG4gICAgfVxuICB9XG4gIGlmIChzLnN0YXR1cyA9PT0gQ09NTUVOVF9TVEFURSkge1xuICAgIGlmIChzLmd6aGVhZC5jb21tZW50LyogIT0gWl9OVUxMKi8pIHtcbiAgICAgIGJlZyA9IHMucGVuZGluZzsgIC8qIHN0YXJ0IG9mIGJ5dGVzIHRvIHVwZGF0ZSBjcmMgKi9cbiAgICAgIC8vaW50IHZhbDtcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHtcbiAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gICAgICAgICAgYmVnID0gcy5wZW5kaW5nO1xuICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkge1xuICAgICAgICAgICAgdmFsID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBKUyBzcGVjaWZpYzogbGl0dGxlIG1hZ2ljIHRvIGFkZCB6ZXJvIHRlcm1pbmF0b3IgdG8gZW5kIG9mIHN0cmluZ1xuICAgICAgICBpZiAocy5nemluZGV4IDwgcy5nemhlYWQuY29tbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMHhmZjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWwgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7XG4gICAgICB9IHdoaWxlICh2YWwgIT09IDApO1xuXG4gICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHtcbiAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWwgPT09IDApIHtcbiAgICAgICAgcy5zdGF0dXMgPSBIQ1JDX1NUQVRFO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTtcbiAgICB9XG4gIH1cbiAgaWYgKHMuc3RhdHVzID09PSBIQ1JDX1NUQVRFKSB7XG4gICAgaWYgKHMuZ3poZWFkLmhjcmMpIHtcbiAgICAgIGlmIChzLnBlbmRpbmcgKyAyID4gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gICAgICB9XG4gICAgICBpZiAocy5wZW5kaW5nICsgMiA8PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCAoc3RybS5hZGxlciA+PiA4KSAmIDB4ZmYpO1xuICAgICAgICBzdHJtLmFkbGVyID0gMDsgLy9jcmMzMigwTCwgWl9OVUxMLCAwKTtcbiAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTtcbiAgICB9XG4gIH1cbi8vI2VuZGlmXG5cbiAgLyogRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZSAqL1xuICBpZiAocy5wZW5kaW5nICE9PSAwKSB7XG4gICAgZmx1c2hfcGVuZGluZyhzdHJtKTtcbiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIC8qIFNpbmNlIGF2YWlsX291dCBpcyAwLCBkZWZsYXRlIHdpbGwgYmUgY2FsbGVkIGFnYWluIHdpdGhcbiAgICAgICAqIG1vcmUgb3V0cHV0IHNwYWNlLCBidXQgcG9zc2libHkgd2l0aCBib3RoIHBlbmRpbmcgYW5kXG4gICAgICAgKiBhdmFpbF9pbiBlcXVhbCB0byB6ZXJvLiBUaGVyZSB3b24ndCBiZSBhbnl0aGluZyB0byBkbyxcbiAgICAgICAqIGJ1dCB0aGlzIGlzIG5vdCBhbiBlcnJvciBzaXR1YXRpb24gc28gbWFrZSBzdXJlIHdlXG4gICAgICAgKiByZXR1cm4gT0sgaW5zdGVhZCBvZiBCVUZfRVJST1IgYXQgbmV4dCBjYWxsIG9mIGRlZmxhdGU6XG4gICAgICAgKi9cbiAgICAgIHMubGFzdF9mbHVzaCA9IC0xO1xuICAgICAgcmV0dXJuIFpfT0s7XG4gICAgfVxuXG4gICAgLyogTWFrZSBzdXJlIHRoZXJlIGlzIHNvbWV0aGluZyB0byBkbyBhbmQgYXZvaWQgZHVwbGljYXRlIGNvbnNlY3V0aXZlXG4gICAgICogZmx1c2hlcy4gRm9yIHJlcGVhdGVkIGFuZCB1c2VsZXNzIGNhbGxzIHdpdGggWl9GSU5JU0gsIHdlIGtlZXBcbiAgICAgKiByZXR1cm5pbmcgWl9TVFJFQU1fRU5EIGluc3RlYWQgb2YgWl9CVUZfRVJST1IuXG4gICAgICovXG4gIH0gZWxzZSBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiByYW5rKGZsdXNoKSA8PSByYW5rKG9sZF9mbHVzaCkgJiZcbiAgICBmbHVzaCAhPT0gWl9GSU5JU0gpIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIFpfQlVGX0VSUk9SKTtcbiAgfVxuXG4gIC8qIFVzZXIgbXVzdCBub3QgcHJvdmlkZSBtb3JlIGlucHV0IGFmdGVyIHRoZSBmaXJzdCBGSU5JU0g6ICovXG4gIGlmIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIFpfQlVGX0VSUk9SKTtcbiAgfVxuXG4gIC8qIFN0YXJ0IGEgbmV3IGJsb2NrIG9yIGNvbnRpbnVlIHRoZSBjdXJyZW50IG9uZS5cbiAgICovXG4gIGlmIChzdHJtLmF2YWlsX2luICE9PSAwIHx8IHMubG9va2FoZWFkICE9PSAwIHx8XG4gICAgKGZsdXNoICE9PSBaX05PX0ZMVVNIICYmIHMuc3RhdHVzICE9PSBGSU5JU0hfU1RBVEUpKSB7XG4gICAgdmFyIGJzdGF0ZSA9IChzLnN0cmF0ZWd5ID09PSBaX0hVRkZNQU5fT05MWSkgPyBkZWZsYXRlX2h1ZmYocywgZmx1c2gpIDpcbiAgICAgIChzLnN0cmF0ZWd5ID09PSBaX1JMRSA/IGRlZmxhdGVfcmxlKHMsIGZsdXNoKSA6XG4gICAgICAgIGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZnVuYyhzLCBmbHVzaCkpO1xuXG4gICAgaWYgKGJzdGF0ZSA9PT0gQlNfRklOSVNIX1NUQVJURUQgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfRE9ORSkge1xuICAgICAgcy5zdGF0dXMgPSBGSU5JU0hfU1RBVEU7XG4gICAgfVxuICAgIGlmIChic3RhdGUgPT09IEJTX05FRURfTU9SRSB8fCBic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEKSB7XG4gICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7XG4gICAgICAgIC8qIGF2b2lkIEJVRl9FUlJPUiBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqL1xuICAgICAgfVxuICAgICAgcmV0dXJuIFpfT0s7XG4gICAgICAvKiBJZiBmbHVzaCAhPSBaX05PX0ZMVVNIICYmIGF2YWlsX291dCA9PSAwLCB0aGUgbmV4dCBjYWxsXG4gICAgICAgKiBvZiBkZWZsYXRlIHNob3VsZCB1c2UgdGhlIHNhbWUgZmx1c2ggcGFyYW1ldGVyIHRvIG1ha2Ugc3VyZVxuICAgICAgICogdGhhdCB0aGUgZmx1c2ggaXMgY29tcGxldGUuIFNvIHdlIGRvbid0IGhhdmUgdG8gb3V0cHV0IGFuXG4gICAgICAgKiBlbXB0eSBibG9jayBoZXJlLCB0aGlzIHdpbGwgYmUgZG9uZSBhdCBuZXh0IGNhbGwuIFRoaXMgYWxzb1xuICAgICAgICogZW5zdXJlcyB0aGF0IGZvciBhIHZlcnkgc21hbGwgb3V0cHV0IGJ1ZmZlciwgd2UgZW1pdCBhdCBtb3N0XG4gICAgICAgKiBvbmUgZW1wdHkgYmxvY2suXG4gICAgICAgKi9cbiAgICB9XG4gICAgaWYgKGJzdGF0ZSA9PT0gQlNfQkxPQ0tfRE9ORSkge1xuICAgICAgaWYgKGZsdXNoID09PSBaX1BBUlRJQUxfRkxVU0gpIHtcbiAgICAgICAgdHJlZXMuX3RyX2FsaWduKHMpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZmx1c2ggIT09IFpfQkxPQ0spIHsgLyogRlVMTF9GTFVTSCBvciBTWU5DX0ZMVVNIICovXG5cbiAgICAgICAgdHJlZXMuX3RyX3N0b3JlZF9ibG9jayhzLCAwLCAwLCBmYWxzZSk7XG4gICAgICAgIC8qIEZvciBhIGZ1bGwgZmx1c2gsIHRoaXMgZW1wdHkgYmxvY2sgd2lsbCBiZSByZWNvZ25pemVkXG4gICAgICAgICAqIGFzIGEgc3BlY2lhbCBtYXJrZXIgYnkgaW5mbGF0ZV9zeW5jKCkuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoZmx1c2ggPT09IFpfRlVMTF9GTFVTSCkge1xuICAgICAgICAgIC8qKiogQ0xFQVJfSEFTSChzKTsgKioqLyAgICAgICAgICAgICAvKiBmb3JnZXQgaGlzdG9yeSAqL1xuICAgICAgICAgIHplcm8ocy5oZWFkKTsgLy8gRmlsbCB3aXRoIE5JTCAoPSAwKTtcblxuICAgICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkge1xuICAgICAgICAgICAgcy5zdHJzdGFydCA9IDA7XG4gICAgICAgICAgICBzLmJsb2NrX3N0YXJ0ID0gMDtcbiAgICAgICAgICAgIHMuaW5zZXJ0ID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7IC8qIGF2b2lkIEJVRl9FUlJPUiBhdCBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqL1xuICAgICAgICByZXR1cm4gWl9PSztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy9Bc3NlcnQoc3RybS0+YXZhaWxfb3V0ID4gMCwgXCJidWcyXCIpO1xuICAvL2lmIChzdHJtLmF2YWlsX291dCA8PSAwKSB7IHRocm93IG5ldyBFcnJvcihcImJ1ZzJcIik7fVxuXG4gIGlmIChmbHVzaCAhPT0gWl9GSU5JU0gpIHsgcmV0dXJuIFpfT0s7IH1cbiAgaWYgKHMud3JhcCA8PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FTkQ7IH1cblxuICAvKiBXcml0ZSB0aGUgdHJhaWxlciAqL1xuICBpZiAocy53cmFwID09PSAyKSB7XG4gICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDgpICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gMTYpICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gMjQpICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgc3RybS50b3RhbF9pbiAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDgpICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgKHN0cm0udG90YWxfaW4gPj4gMTYpICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgKHN0cm0udG90YWxfaW4gPj4gMjQpICYgMHhmZik7XG4gIH1cbiAgZWxzZVxuICB7XG4gICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpO1xuICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgJiAweGZmZmYpO1xuICB9XG5cbiAgZmx1c2hfcGVuZGluZyhzdHJtKTtcbiAgLyogSWYgYXZhaWxfb3V0IGlzIHplcm8sIHRoZSBhcHBsaWNhdGlvbiB3aWxsIGNhbGwgZGVmbGF0ZSBhZ2FpblxuICAgKiB0byBmbHVzaCB0aGUgcmVzdC5cbiAgICovXG4gIGlmIChzLndyYXAgPiAwKSB7IHMud3JhcCA9IC1zLndyYXA7IH1cbiAgLyogd3JpdGUgdGhlIHRyYWlsZXIgb25seSBvbmNlISAqL1xuICByZXR1cm4gcy5wZW5kaW5nICE9PSAwID8gWl9PSyA6IFpfU1RSRUFNX0VORDtcbn1cblxuZnVuY3Rpb24gZGVmbGF0ZUVuZChzdHJtKSB7XG4gIHZhciBzdGF0dXM7XG5cbiAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICBzdGF0dXMgPSBzdHJtLnN0YXRlLnN0YXR1cztcbiAgaWYgKHN0YXR1cyAhPT0gSU5JVF9TVEFURSAmJlxuICAgIHN0YXR1cyAhPT0gRVhUUkFfU1RBVEUgJiZcbiAgICBzdGF0dXMgIT09IE5BTUVfU1RBVEUgJiZcbiAgICBzdGF0dXMgIT09IENPTU1FTlRfU1RBVEUgJiZcbiAgICBzdGF0dXMgIT09IEhDUkNfU1RBVEUgJiZcbiAgICBzdGF0dXMgIT09IEJVU1lfU1RBVEUgJiZcbiAgICBzdGF0dXMgIT09IEZJTklTSF9TVEFURVxuICApIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SKTtcbiAgfVxuXG4gIHN0cm0uc3RhdGUgPSBudWxsO1xuXG4gIHJldHVybiBzdGF0dXMgPT09IEJVU1lfU1RBVEUgPyBlcnIoc3RybSwgWl9EQVRBX0VSUk9SKSA6IFpfT0s7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHkgdGhlIHNvdXJjZSBzdGF0ZSB0byB0aGUgZGVzdGluYXRpb24gc3RhdGVcbiAqL1xuLy9mdW5jdGlvbiBkZWZsYXRlQ29weShkZXN0LCBzb3VyY2UpIHtcbi8vXG4vL31cblxuZXhwb3J0cy5kZWZsYXRlSW5pdCA9IGRlZmxhdGVJbml0O1xuZXhwb3J0cy5kZWZsYXRlSW5pdDIgPSBkZWZsYXRlSW5pdDI7XG5leHBvcnRzLmRlZmxhdGVSZXNldCA9IGRlZmxhdGVSZXNldDtcbmV4cG9ydHMuZGVmbGF0ZVJlc2V0S2VlcCA9IGRlZmxhdGVSZXNldEtlZXA7XG5leHBvcnRzLmRlZmxhdGVTZXRIZWFkZXIgPSBkZWZsYXRlU2V0SGVhZGVyO1xuZXhwb3J0cy5kZWZsYXRlID0gZGVmbGF0ZTtcbmV4cG9ydHMuZGVmbGF0ZUVuZCA9IGRlZmxhdGVFbmQ7XG5leHBvcnRzLmRlZmxhdGVJbmZvID0gJ3Bha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknO1xuXG4vKiBOb3QgaW1wbGVtZW50ZWRcbmV4cG9ydHMuZGVmbGF0ZUJvdW5kID0gZGVmbGF0ZUJvdW5kO1xuZXhwb3J0cy5kZWZsYXRlQ29weSA9IGRlZmxhdGVDb3B5O1xuZXhwb3J0cy5kZWZsYXRlU2V0RGljdGlvbmFyeSA9IGRlZmxhdGVTZXREaWN0aW9uYXJ5O1xuZXhwb3J0cy5kZWZsYXRlUGFyYW1zID0gZGVmbGF0ZVBhcmFtcztcbmV4cG9ydHMuZGVmbGF0ZVBlbmRpbmcgPSBkZWZsYXRlUGVuZGluZztcbmV4cG9ydHMuZGVmbGF0ZVByaW1lID0gZGVmbGF0ZVByaW1lO1xuZXhwb3J0cy5kZWZsYXRlVHVuZSA9IGRlZmxhdGVUdW5lO1xuKi9cblxufSx7XCIuLi91dGlscy9jb21tb25cIjozOCxcIi4vYWRsZXIzMlwiOjQwLFwiLi9jcmMzMlwiOjQyLFwiLi9tZXNzYWdlc1wiOjQ4LFwiLi90cmVlc1wiOjQ5fV0sNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5cbmZ1bmN0aW9uIEdaaGVhZGVyKCkge1xuICAvKiB0cnVlIGlmIGNvbXByZXNzZWQgZGF0YSBiZWxpZXZlZCB0byBiZSB0ZXh0ICovXG4gIHRoaXMudGV4dCAgICAgICA9IDA7XG4gIC8qIG1vZGlmaWNhdGlvbiB0aW1lICovXG4gIHRoaXMudGltZSAgICAgICA9IDA7XG4gIC8qIGV4dHJhIGZsYWdzIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovXG4gIHRoaXMueGZsYWdzICAgICA9IDA7XG4gIC8qIG9wZXJhdGluZyBzeXN0ZW0gKi9cbiAgdGhpcy5vcyAgICAgICAgID0gMDtcbiAgLyogcG9pbnRlciB0byBleHRyYSBmaWVsZCBvciBaX05VTEwgaWYgbm9uZSAqL1xuICB0aGlzLmV4dHJhICAgICAgPSBudWxsO1xuICAvKiBleHRyYSBmaWVsZCBsZW5ndGggKHZhbGlkIGlmIGV4dHJhICE9IFpfTlVMTCkgKi9cbiAgdGhpcy5leHRyYV9sZW4gID0gMDsgLy8gQWN0dWFsbHksIHdlIGRvbid0IG5lZWQgaXQgaW4gSlMsXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBsZWF2ZSBmb3IgZmV3IGNvZGUgbW9kaWZpY2F0aW9uc1xuXG4gIC8vXG4gIC8vIFNldHVwIGxpbWl0cyBpcyBub3QgbmVjZXNzYXJ5IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnlcbiAgLy8gZm9yIGluZmxhdGUgdXNlIGNvbnN0YW50IGxpbWl0IGluIDY1NTM2IGJ5dGVzXG4gIC8vXG5cbiAgLyogc3BhY2UgYXQgZXh0cmEgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5leHRyYV9tYXggID0gMDtcbiAgLyogcG9pbnRlciB0byB6ZXJvLXRlcm1pbmF0ZWQgZmlsZSBuYW1lIG9yIFpfTlVMTCAqL1xuICB0aGlzLm5hbWUgICAgICAgPSAnJztcbiAgLyogc3BhY2UgYXQgbmFtZSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqL1xuICAvLyB0aGlzLm5hbWVfbWF4ICAgPSAwO1xuICAvKiBwb2ludGVyIHRvIHplcm8tdGVybWluYXRlZCBjb21tZW50IG9yIFpfTlVMTCAqL1xuICB0aGlzLmNvbW1lbnQgICAgPSAnJztcbiAgLyogc3BhY2UgYXQgY29tbWVudCAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqL1xuICAvLyB0aGlzLmNvbW1fbWF4ICAgPSAwO1xuICAvKiB0cnVlIGlmIHRoZXJlIHdhcyBvciB3aWxsIGJlIGEgaGVhZGVyIGNyYyAqL1xuICB0aGlzLmhjcmMgICAgICAgPSAwO1xuICAvKiB0cnVlIHdoZW4gZG9uZSByZWFkaW5nIGd6aXAgaGVhZGVyIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovXG4gIHRoaXMuZG9uZSAgICAgICA9IGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdaaGVhZGVyO1xuXG59LHt9XSw0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbi8vIFNlZSBzdGF0ZSBkZWZzIGZyb20gaW5mbGF0ZS5qc1xudmFyIEJBRCA9IDMwOyAgICAgICAvKiBnb3QgYSBkYXRhIGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgVFlQRSA9IDEyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIHR5cGUgYml0cywgaW5jbHVkaW5nIGxhc3QtZmxhZyBiaXQgKi9cblxuLypcbiAgIERlY29kZSBsaXRlcmFsLCBsZW5ndGgsIGFuZCBkaXN0YW5jZSBjb2RlcyBhbmQgd3JpdGUgb3V0IHRoZSByZXN1bHRpbmdcbiAgIGxpdGVyYWwgYW5kIG1hdGNoIGJ5dGVzIHVudGlsIGVpdGhlciBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBpc1xuICAgYXZhaWxhYmxlLCBhbiBlbmQtb2YtYmxvY2sgaXMgZW5jb3VudGVyZWQsIG9yIGEgZGF0YSBlcnJvciBpcyBlbmNvdW50ZXJlZC5cbiAgIFdoZW4gbGFyZ2UgZW5vdWdoIGlucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBhcmUgc3VwcGxpZWQgdG8gaW5mbGF0ZSgpLCBmb3JcbiAgIGV4YW1wbGUsIGEgMTZLIGlucHV0IGJ1ZmZlciBhbmQgYSA2NEsgb3V0cHV0IGJ1ZmZlciwgbW9yZSB0aGFuIDk1JSBvZiB0aGVcbiAgIGluZmxhdGUgZXhlY3V0aW9uIHRpbWUgaXMgc3BlbnQgaW4gdGhpcyByb3V0aW5lLlxuXG4gICBFbnRyeSBhc3N1bXB0aW9uczpcblxuICAgICAgICBzdGF0ZS5tb2RlID09PSBMRU5cbiAgICAgICAgc3RybS5hdmFpbF9pbiA+PSA2XG4gICAgICAgIHN0cm0uYXZhaWxfb3V0ID49IDI1OFxuICAgICAgICBzdGFydCA+PSBzdHJtLmF2YWlsX291dFxuICAgICAgICBzdGF0ZS5iaXRzIDwgOFxuXG4gICBPbiByZXR1cm4sIHN0YXRlLm1vZGUgaXMgb25lIG9mOlxuXG4gICAgICAgIExFTiAtLSByYW4gb3V0IG9mIGVub3VnaCBvdXRwdXQgc3BhY2Ugb3IgZW5vdWdoIGF2YWlsYWJsZSBpbnB1dFxuICAgICAgICBUWVBFIC0tIHJlYWNoZWQgZW5kIG9mIGJsb2NrIGNvZGUsIGluZmxhdGUoKSB0byBpbnRlcnByZXQgbmV4dCBibG9ja1xuICAgICAgICBCQUQgLS0gZXJyb3IgaW4gYmxvY2sgZGF0YVxuXG4gICBOb3RlczpcblxuICAgIC0gVGhlIG1heGltdW0gaW5wdXQgYml0cyB1c2VkIGJ5IGEgbGVuZ3RoL2Rpc3RhbmNlIHBhaXIgaXMgMTUgYml0cyBmb3IgdGhlXG4gICAgICBsZW5ndGggY29kZSwgNSBiaXRzIGZvciB0aGUgbGVuZ3RoIGV4dHJhLCAxNSBiaXRzIGZvciB0aGUgZGlzdGFuY2UgY29kZSxcbiAgICAgIGFuZCAxMyBiaXRzIGZvciB0aGUgZGlzdGFuY2UgZXh0cmEuICBUaGlzIHRvdGFscyA0OCBiaXRzLCBvciBzaXggYnl0ZXMuXG4gICAgICBUaGVyZWZvcmUgaWYgc3RybS5hdmFpbF9pbiA+PSA2LCB0aGVuIHRoZXJlIGlzIGVub3VnaCBpbnB1dCB0byBhdm9pZFxuICAgICAgY2hlY2tpbmcgZm9yIGF2YWlsYWJsZSBpbnB1dCB3aGlsZSBkZWNvZGluZy5cblxuICAgIC0gVGhlIG1heGltdW0gYnl0ZXMgdGhhdCBhIHNpbmdsZSBsZW5ndGgvZGlzdGFuY2UgcGFpciBjYW4gb3V0cHV0IGlzIDI1OFxuICAgICAgYnl0ZXMsIHdoaWNoIGlzIHRoZSBtYXhpbXVtIGxlbmd0aCB0aGF0IGNhbiBiZSBjb2RlZC4gIGluZmxhdGVfZmFzdCgpXG4gICAgICByZXF1aXJlcyBzdHJtLmF2YWlsX291dCA+PSAyNTggZm9yIGVhY2ggbG9vcCB0byBhdm9pZCBjaGVja2luZyBmb3JcbiAgICAgIG91dHB1dCBzcGFjZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmZsYXRlX2Zhc3Qoc3RybSwgc3RhcnQpIHtcbiAgdmFyIHN0YXRlO1xuICB2YXIgX2luOyAgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5pbnB1dCAqL1xuICB2YXIgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogaGF2ZSBlbm91Z2ggaW5wdXQgd2hpbGUgaW4gPCBsYXN0ICovXG4gIHZhciBfb3V0OyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLm91dHB1dCAqL1xuICB2YXIgYmVnOyAgICAgICAgICAgICAgICAgICAgLyogaW5mbGF0ZSgpJ3MgaW5pdGlhbCBzdHJtLm91dHB1dCAqL1xuICB2YXIgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogd2hpbGUgb3V0IDwgZW5kLCBlbm91Z2ggc3BhY2UgYXZhaWxhYmxlICovXG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICB2YXIgZG1heDsgICAgICAgICAgICAgICAgICAgLyogbWF4aW11bSBkaXN0YW5jZSBmcm9tIHpsaWIgaGVhZGVyICovXG4vLyNlbmRpZlxuICB2YXIgd3NpemU7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovXG4gIHZhciB3aGF2ZTsgICAgICAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovXG4gIHZhciB3bmV4dDsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi9cbiAgLy8gVXNlIGBzX3dpbmRvd2AgaW5zdGVhZCBgd2luZG93YCwgYXZvaWQgY29uZmxpY3Qgd2l0aCBpbnN0cnVtZW50YXRpb24gdG9vbHNcbiAgdmFyIHNfd2luZG93OyAgICAgICAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgd3NpemUgIT0gMCAqL1xuICB2YXIgaG9sZDsgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5ob2xkICovXG4gIHZhciBiaXRzOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmJpdHMgKi9cbiAgdmFyIGxjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ubGVuY29kZSAqL1xuICB2YXIgZGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5kaXN0Y29kZSAqL1xuICB2YXIgbG1hc2s7ICAgICAgICAgICAgICAgICAgLyogbWFzayBmb3IgZmlyc3QgbGV2ZWwgb2YgbGVuZ3RoIGNvZGVzICovXG4gIHZhciBkbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBkaXN0YW5jZSBjb2RlcyAqL1xuICB2YXIgaGVyZTsgICAgICAgICAgICAgICAgICAgLyogcmV0cmlldmVkIHRhYmxlIGVudHJ5ICovXG4gIHZhciBvcDsgICAgICAgICAgICAgICAgICAgICAvKiBjb2RlIGJpdHMsIG9wZXJhdGlvbiwgZXh0cmEgYml0cywgb3IgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICB3aW5kb3cgcG9zaXRpb24sIHdpbmRvdyBieXRlcyB0byBjb3B5ICovXG4gIHZhciBsZW47ICAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBsZW5ndGgsIHVudXNlZCBieXRlcyAqL1xuICB2YXIgZGlzdDsgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggZGlzdGFuY2UgKi9cbiAgdmFyIGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggZnJvbSAqL1xuICB2YXIgZnJvbV9zb3VyY2U7XG5cblxuICB2YXIgaW5wdXQsIG91dHB1dDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuXG4gIC8qIGNvcHkgc3RhdGUgdG8gbG9jYWwgdmFyaWFibGVzICovXG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgLy9oZXJlID0gc3RhdGUuaGVyZTtcbiAgX2luID0gc3RybS5uZXh0X2luO1xuICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gIGxhc3QgPSBfaW4gKyAoc3RybS5hdmFpbF9pbiAtIDUpO1xuICBfb3V0ID0gc3RybS5uZXh0X291dDtcbiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gIGJlZyA9IF9vdXQgLSAoc3RhcnQgLSBzdHJtLmF2YWlsX291dCk7XG4gIGVuZCA9IF9vdXQgKyAoc3RybS5hdmFpbF9vdXQgLSAyNTcpO1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgZG1heCA9IHN0YXRlLmRtYXg7XG4vLyNlbmRpZlxuICB3c2l6ZSA9IHN0YXRlLndzaXplO1xuICB3aGF2ZSA9IHN0YXRlLndoYXZlO1xuICB3bmV4dCA9IHN0YXRlLnduZXh0O1xuICBzX3dpbmRvdyA9IHN0YXRlLndpbmRvdztcbiAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICBsY29kZSA9IHN0YXRlLmxlbmNvZGU7XG4gIGRjb2RlID0gc3RhdGUuZGlzdGNvZGU7XG4gIGxtYXNrID0gKDEgPDwgc3RhdGUubGVuYml0cykgLSAxO1xuICBkbWFzayA9ICgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDE7XG5cblxuICAvKiBkZWNvZGUgbGl0ZXJhbHMgYW5kIGxlbmd0aC9kaXN0YW5jZXMgdW50aWwgZW5kLW9mLWJsb2NrIG9yIG5vdCBlbm91Z2hcbiAgICAgaW5wdXQgZGF0YSBvciBvdXRwdXQgc3BhY2UgKi9cblxuICB0b3A6XG4gIGRvIHtcbiAgICBpZiAoYml0cyA8IDE1KSB7XG4gICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgYml0cyArPSA4O1xuICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgIGJpdHMgKz0gODtcbiAgICB9XG5cbiAgICBoZXJlID0gbGNvZGVbaG9sZCAmIGxtYXNrXTtcblxuICAgIGRvbGVuOlxuICAgIGZvciAoOzspIHsgLy8gR290byBlbXVsYXRpb25cbiAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovO1xuICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgYml0cyAtPSBvcDtcbiAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLztcbiAgICAgIGlmIChvcCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbGl0ZXJhbCAqL1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgP1xuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgJyVjJ1xcblwiIDpcbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsIDB4JTAyeFxcblwiLCBoZXJlLnZhbCkpO1xuICAgICAgICBvdXRwdXRbX291dCsrXSA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIGJhc2UgKi9cbiAgICAgICAgbGVuID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgKi9cbiAgICAgICAgaWYgKG9wKSB7XG4gICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGVuICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7XG4gICAgICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgICAgIGJpdHMgLT0gb3A7XG4gICAgICAgIH1cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBsZW5ndGggJXVcXG5cIiwgbGVuKSk7XG4gICAgICAgIGlmIChiaXRzIDwgMTUpIHtcbiAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICBoZXJlID0gZGNvZGVbaG9sZCAmIGRtYXNrXTtcblxuICAgICAgICBkb2Rpc3Q6XG4gICAgICAgIGZvciAoOzspIHsgLy8gZ290byBlbXVsYXRpb25cbiAgICAgICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLztcbiAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87XG5cbiAgICAgICAgICBpZiAob3AgJiAxNikgeyAgICAgICAgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYXNlICovXG4gICAgICAgICAgICBkaXN0ID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgICAgICAgIG9wICY9IDE1OyAgICAgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgKi9cbiAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpc3QgKz0gaG9sZCAmICgoMSA8PCBvcCkgLSAxKTtcbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gICAgICAgICAgICBpZiAoZGlzdCA+IGRtYXgpIHtcbiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgICB9XG4vLyNlbmRpZlxuICAgICAgICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcXG5cIiwgZGlzdCkpO1xuICAgICAgICAgICAgb3AgPSBfb3V0IC0gYmVnOyAgICAgICAgICAgICAgICAvKiBtYXggZGlzdGFuY2UgaW4gb3V0cHV0ICovXG4gICAgICAgICAgICBpZiAoZGlzdCA+IG9wKSB7ICAgICAgICAgICAgICAgIC8qIHNlZSBpZiBjb3B5IGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgIG9wID0gZGlzdCAtIG9wOyAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhY2sgaW4gd2luZG93ICovXG4gICAgICAgICAgICAgIGlmIChvcCA+IHdoYXZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHtcbiAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgICAgICAgfVxuXG4vLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmFpbHRzLFxuLy8gZG9uJ3QgZW5hYmxlIGl0IGZvciBiaW5hcnkgY29tcGF0aWJpbGl0eVxuLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSXG4vLyAgICAgICAgICAgICAgICBpZiAobGVuIDw9IG9wIC0gd2hhdmUpIHtcbi8vICAgICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gMDtcbi8vICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1sZW4pO1xuLy8gICAgICAgICAgICAgICAgICBjb250aW51ZSB0b3A7XG4vLyAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICBsZW4gLT0gb3AgLSB3aGF2ZTtcbi8vICAgICAgICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwO1xuLy8gICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCA+IHdoYXZlKTtcbi8vICAgICAgICAgICAgICAgIGlmIChvcCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7XG4vLyAgICAgICAgICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7XG4vLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDtcbi8vICAgICAgICAgICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZnJvbSA9IDA7IC8vIHdpbmRvdyBpbmRleFxuICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IHNfd2luZG93O1xuICAgICAgICAgICAgICBpZiAod25leHQgPT09IDApIHsgICAgICAgICAgIC8qIHZlcnkgY29tbW9uIGNhc2UgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplIC0gb3A7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmICh3bmV4dCA8IG9wKSB7ICAgICAgLyogd3JhcCBhcm91bmQgd2luZG93ICovXG4gICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSArIHduZXh0IC0gb3A7XG4gICAgICAgICAgICAgICAgb3AgLT0gd25leHQ7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIGVuZCBvZiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICBmcm9tID0gMDtcbiAgICAgICAgICAgICAgICAgIGlmICh3bmV4dCA8IGxlbikgeyAgLyogc29tZSBmcm9tIHN0YXJ0IG9mIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgICBvcCA9IHduZXh0O1xuICAgICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGNvbnRpZ3VvdXMgaW4gd2luZG93ICovXG4gICAgICAgICAgICAgICAgZnJvbSArPSB3bmV4dCAtIG9wO1xuICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgd2hpbGUgKGxlbiA+IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBsZW4gLT0gMztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgICAgICAgICAvKiBjb3B5IGRpcmVjdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICBkbyB7ICAgICAgICAgICAgICAgICAgICAgICAgLyogbWluaW11bSBsZW5ndGggaXMgdGhyZWUgKi9cbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBsZW4gLT0gMztcbiAgICAgICAgICAgICAgfSB3aGlsZSAobGVuID4gMik7XG4gICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgLyogMm5kIGxldmVsIGRpc3RhbmNlIGNvZGUgKi9cbiAgICAgICAgICAgIGhlcmUgPSBkY29kZVsoaGVyZSAmIDB4ZmZmZikvKmhlcmUudmFsKi8gKyAoaG9sZCAmICgoMSA8PCBvcCkgLSAxKSldO1xuICAgICAgICAgICAgY29udGludWUgZG9kaXN0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgY29kZSc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrOyAvLyBuZWVkIHRvIGVtdWxhdGUgZ290byB2aWEgXCJjb250aW51ZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAgICAgLyogMm5kIGxldmVsIGxlbmd0aCBjb2RlICovXG4gICAgICAgIGhlcmUgPSBsY29kZVsoaGVyZSAmIDB4ZmZmZikvKmhlcmUudmFsKi8gKyAoaG9sZCAmICgoMSA8PCBvcCkgLSAxKSldO1xuICAgICAgICBjb250aW51ZSBkb2xlbjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9wICYgMzIpIHsgICAgICAgICAgICAgICAgICAgICAvKiBlbmQtb2YtYmxvY2sgKi9cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBlbmQgb2YgYmxvY2tcXG5cIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrIHRvcDtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSBcImNvbnRpbnVlXCJcbiAgICB9XG4gIH0gd2hpbGUgKF9pbiA8IGxhc3QgJiYgX291dCA8IGVuZCk7XG5cbiAgLyogcmV0dXJuIHVudXNlZCBieXRlcyAob24gZW50cnksIGJpdHMgPCA4LCBzbyBpbiB3b24ndCBnbyB0b28gZmFyIGJhY2spICovXG4gIGxlbiA9IGJpdHMgPj4gMztcbiAgX2luIC09IGxlbjtcbiAgYml0cyAtPSBsZW4gPDwgMztcbiAgaG9sZCAmPSAoMSA8PCBiaXRzKSAtIDE7XG5cbiAgLyogdXBkYXRlIHN0YXRlIGFuZCByZXR1cm4gKi9cbiAgc3RybS5uZXh0X2luID0gX2luO1xuICBzdHJtLm5leHRfb3V0ID0gX291dDtcbiAgc3RybS5hdmFpbF9pbiA9IChfaW4gPCBsYXN0ID8gNSArIChsYXN0IC0gX2luKSA6IDUgLSAoX2luIC0gbGFzdCkpO1xuICBzdHJtLmF2YWlsX291dCA9IChfb3V0IDwgZW5kID8gMjU3ICsgKGVuZCAtIF9vdXQpIDogMjU3IC0gKF9vdXQgLSBlbmQpKTtcbiAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gIHN0YXRlLmJpdHMgPSBiaXRzO1xuICByZXR1cm47XG59O1xuXG59LHt9XSw0NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvY29tbW9uJyk7XG52YXIgYWRsZXIzMiA9IHJlcXVpcmUoJy4vYWRsZXIzMicpO1xudmFyIGNyYzMyICAgPSByZXF1aXJlKCcuL2NyYzMyJyk7XG52YXIgaW5mbGF0ZV9mYXN0ID0gcmVxdWlyZSgnLi9pbmZmYXN0Jyk7XG52YXIgaW5mbGF0ZV90YWJsZSA9IHJlcXVpcmUoJy4vaW5mdHJlZXMnKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbi8vdmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG4vL3ZhciBaX1BBUlRJQUxfRkxVU0ggPSAxO1xuLy92YXIgWl9TWU5DX0ZMVVNIICAgID0gMjtcbi8vdmFyIFpfRlVMTF9GTFVTSCAgICA9IDM7XG52YXIgWl9GSU5JU0ggICAgICAgID0gNDtcbnZhciBaX0JMT0NLICAgICAgICAgPSA1O1xudmFyIFpfVFJFRVMgICAgICAgICA9IDY7XG5cblxuLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlc1xuICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICovXG52YXIgWl9PSyAgICAgICAgICAgID0gMDtcbnZhciBaX1NUUkVBTV9FTkQgICAgPSAxO1xudmFyIFpfTkVFRF9ESUNUICAgICA9IDI7XG4vL3ZhciBaX0VSUk5PICAgICAgICAgPSAtMTtcbnZhciBaX1NUUkVBTV9FUlJPUiAgPSAtMjtcbnZhciBaX0RBVEFfRVJST1IgICAgPSAtMztcbnZhciBaX01FTV9FUlJPUiAgICAgPSAtNDtcbnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTtcbi8vdmFyIFpfVkVSU0lPTl9FUlJPUiA9IC02O1xuXG4vKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbnZhciBaX0RFRkxBVEVEICA9IDg7XG5cblxuLyogU1RBVEVTID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxudmFyICAgIEhFQUQgPSAxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtYWdpYyBoZWFkZXIgKi9cbnZhciAgICBGTEFHUyA9IDI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgbWV0aG9kIGFuZCBmbGFncyAoZ3ppcCkgKi9cbnZhciAgICBUSU1FID0gMzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbW9kaWZpY2F0aW9uIHRpbWUgKGd6aXApICovXG52YXIgICAgT1MgPSA0OyAgICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGZsYWdzIGFuZCBvcGVyYXRpbmcgc3lzdGVtIChnemlwKSAqL1xudmFyICAgIEVYTEVOID0gNTsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBsZW5ndGggKGd6aXApICovXG52YXIgICAgRVhUUkEgPSA2OyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGJ5dGVzIChnemlwKSAqL1xudmFyICAgIE5BTUUgPSA3OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgZmlsZSBuYW1lIChnemlwKSAqL1xudmFyICAgIENPTU1FTlQgPSA4OyAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgY29tbWVudCAoZ3ppcCkgKi9cbnZhciAgICBIQ1JDID0gOTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgaGVhZGVyIGNyYyAoZ3ppcCkgKi9cbnZhciAgICBESUNUSUQgPSAxMDsgICAgLyogaTogd2FpdGluZyBmb3IgZGljdGlvbmFyeSBjaGVjayB2YWx1ZSAqL1xudmFyICAgIERJQ1QgPSAxMTsgICAgICAvKiB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeSgpIGNhbGwgKi9cbnZhciAgICAgICAgVFlQRSA9IDEyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIHR5cGUgYml0cywgaW5jbHVkaW5nIGxhc3QtZmxhZyBiaXQgKi9cbnZhciAgICAgICAgVFlQRURPID0gMTM7ICAgIC8qIGk6IHNhbWUsIGJ1dCBza2lwIGNoZWNrIHRvIGV4aXQgaW5mbGF0ZSBvbiBuZXcgYmxvY2sgKi9cbnZhciAgICAgICAgU1RPUkVEID0gMTQ7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIHN0b3JlZCBzaXplIChsZW5ndGggYW5kIGNvbXBsZW1lbnQpICovXG52YXIgICAgICAgIENPUFlfID0gMTU7ICAgICAvKiBpL286IHNhbWUgYXMgQ09QWSBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICBDT1BZID0gMTY7ICAgICAgLyogaS9vOiB3YWl0aW5nIGZvciBpbnB1dCBvciBvdXRwdXQgdG8gY29weSBzdG9yZWQgYmxvY2sgKi9cbnZhciAgICAgICAgVEFCTEUgPSAxNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGR5bmFtaWMgYmxvY2sgdGFibGUgbGVuZ3RocyAqL1xudmFyICAgICAgICBMRU5MRU5TID0gMTg7ICAgLyogaTogd2FpdGluZyBmb3IgY29kZSBsZW5ndGggY29kZSBsZW5ndGhzICovXG52YXIgICAgICAgIENPREVMRU5TID0gMTk7ICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0IGFuZCBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgICAgIExFTl8gPSAyMDsgICAgICAvKiBpOiBzYW1lIGFzIExFTiBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICAgICAgTEVOID0gMjE7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQvZW9iIGNvZGUgKi9cbnZhciAgICAgICAgICAgIExFTkVYVCA9IDIyOyAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGggZXh0cmEgYml0cyAqL1xudmFyICAgICAgICAgICAgRElTVCA9IDIzOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGNvZGUgKi9cbnZhciAgICAgICAgICAgIERJU1RFWFQgPSAyNDsgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBleHRyYSBiaXRzICovXG52YXIgICAgICAgICAgICBNQVRDSCA9IDI1OyAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIGNvcHkgc3RyaW5nICovXG52YXIgICAgICAgICAgICBMSVQgPSAyNjsgICAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIHdyaXRlIGxpdGVyYWwgKi9cbnZhciAgICBDSEVDSyA9IDI3OyAgICAgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGNoZWNrIHZhbHVlICovXG52YXIgICAgTEVOR1RIID0gMjg7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBsZW5ndGggKGd6aXApICovXG52YXIgICAgRE9ORSA9IDI5OyAgICAgIC8qIGZpbmlzaGVkIGNoZWNrLCBkb25lIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgICAgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBNRU0gPSAzMTsgICAgICAgLyogZ290IGFuIGluZmxhdGUoKSBtZW1vcnkgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBTWU5DID0gMzI7ICAgICAgLyogbG9va2luZyBmb3Igc3luY2hyb25pemF0aW9uIGJ5dGVzIHRvIHJlc3RhcnQgaW5mbGF0ZSgpICovXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuXG52YXIgRU5PVUdIX0xFTlMgPSA4NTI7XG52YXIgRU5PVUdIX0RJU1RTID0gNTkyO1xuLy92YXIgRU5PVUdIID0gIChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgTUFYX1dCSVRTID0gMTU7XG4vKiAzMksgTFo3NyB3aW5kb3cgKi9cbnZhciBERUZfV0JJVFMgPSBNQVhfV0JJVFM7XG5cblxuZnVuY3Rpb24gWlNXQVAzMihxKSB7XG4gIHJldHVybiAgKCgocSA+Pj4gMjQpICYgMHhmZikgK1xuICAgICAgICAgICgocSA+Pj4gOCkgJiAweGZmMDApICtcbiAgICAgICAgICAoKHEgJiAweGZmMDApIDw8IDgpICtcbiAgICAgICAgICAoKHEgJiAweGZmKSA8PCAyNCkpO1xufVxuXG5cbmZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHtcbiAgdGhpcy5tb2RlID0gMDsgICAgICAgICAgICAgLyogY3VycmVudCBpbmZsYXRlIG1vZGUgKi9cbiAgdGhpcy5sYXN0ID0gZmFsc2U7ICAgICAgICAgIC8qIHRydWUgaWYgcHJvY2Vzc2luZyBsYXN0IGJsb2NrICovXG4gIHRoaXMud3JhcCA9IDA7ICAgICAgICAgICAgICAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovXG4gIHRoaXMuaGF2ZWRpY3QgPSBmYWxzZTsgICAgICAvKiB0cnVlIGlmIGRpY3Rpb25hcnkgcHJvdmlkZWQgKi9cbiAgdGhpcy5mbGFncyA9IDA7ICAgICAgICAgICAgIC8qIGd6aXAgaGVhZGVyIG1ldGhvZCBhbmQgZmxhZ3MgKDAgaWYgemxpYikgKi9cbiAgdGhpcy5kbWF4ID0gMDsgICAgICAgICAgICAgIC8qIHpsaWIgaGVhZGVyIG1heCBkaXN0YW5jZSAoSU5GTEFURV9TVFJJQ1QpICovXG4gIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBjaGVjayB2YWx1ZSAqL1xuICB0aGlzLnRvdGFsID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2Ygb3V0cHV0IGNvdW50ICovXG4gIC8vIFRPRE86IG1heSBiZSB7fVxuICB0aGlzLmhlYWQgPSBudWxsOyAgICAgICAgICAgLyogd2hlcmUgdG8gc2F2ZSBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiAqL1xuXG4gIC8qIHNsaWRpbmcgd2luZG93ICovXG4gIHRoaXMud2JpdHMgPSAwOyAgICAgICAgICAgICAvKiBsb2cgYmFzZSAyIG9mIHJlcXVlc3RlZCB3aW5kb3cgc2l6ZSAqL1xuICB0aGlzLndzaXplID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovXG4gIHRoaXMud2hhdmUgPSAwOyAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovXG4gIHRoaXMud25leHQgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi9cbiAgdGhpcy53aW5kb3cgPSBudWxsOyAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgbmVlZGVkICovXG5cbiAgLyogYml0IGFjY3VtdWxhdG9yICovXG4gIHRoaXMuaG9sZCA9IDA7ICAgICAgICAgICAgICAvKiBpbnB1dCBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5iaXRzID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBiaXRzIGluIFwiaW5cIiAqL1xuXG4gIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovXG4gIHRoaXMubGVuZ3RoID0gMDsgICAgICAgICAgICAvKiBsaXRlcmFsIG9yIGxlbmd0aCBvZiBkYXRhIHRvIGNvcHkgKi9cbiAgdGhpcy5vZmZzZXQgPSAwOyAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhY2sgdG8gY29weSBzdHJpbmcgZnJvbSAqL1xuXG4gIC8qIGZvciB0YWJsZSBhbmQgY29kZSBkZWNvZGluZyAqL1xuICB0aGlzLmV4dHJhID0gMDsgICAgICAgICAgICAgLyogZXh0cmEgYml0cyBuZWVkZWQgKi9cblxuICAvKiBmaXhlZCBhbmQgZHluYW1pYyBjb2RlIHRhYmxlcyAqL1xuICB0aGlzLmxlbmNvZGUgPSBudWxsOyAgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKi9cbiAgdGhpcy5kaXN0Y29kZSA9IG51bGw7ICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzICovXG4gIHRoaXMubGVuYml0cyA9IDA7ICAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBsZW5jb2RlICovXG4gIHRoaXMuZGlzdGJpdHMgPSAwOyAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBkaXN0Y29kZSAqL1xuXG4gIC8qIGR5bmFtaWMgdGFibGUgYnVpbGRpbmcgKi9cbiAgdGhpcy5uY29kZSA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovXG4gIHRoaXMubmRpc3QgPSAwOyAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovXG4gIHRoaXMuaGF2ZSA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGhzIGluIGxlbnNbXSAqL1xuICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqL1xuXG4gIHRoaXMubGVucyA9IG5ldyB1dGlscy5CdWYxNigzMjApOyAvKiB0ZW1wb3Jhcnkgc3RvcmFnZSBmb3IgY29kZSBsZW5ndGhzICovXG4gIHRoaXMud29yayA9IG5ldyB1dGlscy5CdWYxNigyODgpOyAvKiB3b3JrIGFyZWEgZm9yIGNvZGUgdGFibGUgYnVpbGRpbmcgKi9cblxuICAvKlxuICAgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIHBvaW50ZXJzIGluIGpzLCB3ZSB1c2UgbGVuY29kZSBhbmQgZGlzdGNvZGUgZGlyZWN0bHlcbiAgIGFzIGJ1ZmZlcnMgc28gd2UgZG9uJ3QgbmVlZCBjb2Rlc1xuICAqL1xuICAvL3RoaXMuY29kZXMgPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIKTsgICAgICAgLyogc3BhY2UgZm9yIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuZHluID0gbnVsbDsgICAgICAgICAgICAgIC8qIGR5bmFtaWMgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzIChKUyBzcGVjaWZpYykgKi9cbiAgdGhpcy5kaXN0ZHluID0gbnVsbDsgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKEpTIHNwZWNpZmljKSAqL1xuICB0aGlzLnNhbmUgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBpZiBmYWxzZSwgYWxsb3cgaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyICovXG4gIHRoaXMuYmFjayA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgYmFjayBvZiBsYXN0IHVucHJvY2Vzc2VkIGxlbmd0aC9saXQgKi9cbiAgdGhpcy53YXMgPSAwOyAgICAgICAgICAgICAgICAgICAgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi9cbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0S2VlcChzdHJtKSB7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RybS50b3RhbF9pbiA9IHN0cm0udG90YWxfb3V0ID0gc3RhdGUudG90YWwgPSAwO1xuICBzdHJtLm1zZyA9ICcnOyAvKlpfTlVMTCovXG4gIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi9cbiAgICBzdHJtLmFkbGVyID0gc3RhdGUud3JhcCAmIDE7XG4gIH1cbiAgc3RhdGUubW9kZSA9IEhFQUQ7XG4gIHN0YXRlLmxhc3QgPSAwO1xuICBzdGF0ZS5oYXZlZGljdCA9IDA7XG4gIHN0YXRlLmRtYXggPSAzMjc2ODtcbiAgc3RhdGUuaGVhZCA9IG51bGwvKlpfTlVMTCovO1xuICBzdGF0ZS5ob2xkID0gMDtcbiAgc3RhdGUuYml0cyA9IDA7XG4gIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9MRU5TKTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9ESVNUUyk7XG5cbiAgc3RhdGUuc2FuZSA9IDE7XG4gIHN0YXRlLmJhY2sgPSAtMTtcbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiByZXNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXQoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIHN0YXRlLndzaXplID0gMDtcbiAgc3RhdGUud2hhdmUgPSAwO1xuICBzdGF0ZS53bmV4dCA9IDA7XG4gIHJldHVybiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pO1xuXG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgd3JhcDtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGdldCB0aGUgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogZXh0cmFjdCB3cmFwIHJlcXVlc3QgZnJvbSB3aW5kb3dCaXRzIHBhcmFtZXRlciAqL1xuICBpZiAod2luZG93Qml0cyA8IDApIHtcbiAgICB3cmFwID0gMDtcbiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7XG4gIH1cbiAgZWxzZSB7XG4gICAgd3JhcCA9ICh3aW5kb3dCaXRzID4+IDQpICsgMTtcbiAgICBpZiAod2luZG93Qml0cyA8IDQ4KSB7XG4gICAgICB3aW5kb3dCaXRzICY9IDE1O1xuICAgIH1cbiAgfVxuXG4gIC8qIHNldCBudW1iZXIgb2Ygd2luZG93IGJpdHMsIGZyZWUgd2luZG93IGlmIGRpZmZlcmVudCAqL1xuICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuICBpZiAoc3RhdGUud2luZG93ICE9PSBudWxsICYmIHN0YXRlLndiaXRzICE9PSB3aW5kb3dCaXRzKSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuXG4gIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmVzZXQgdGhlIHJlc3Qgb2YgaXQgKi9cbiAgc3RhdGUud3JhcCA9IHdyYXA7XG4gIHN0YXRlLndiaXRzID0gd2luZG93Qml0cztcbiAgcmV0dXJuIGluZmxhdGVSZXNldChzdHJtKTtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHtcbiAgdmFyIHJldDtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgLy9zdHJtLm1zZyA9IFpfTlVMTDsgICAgICAgICAgICAgICAgIC8qIGluIGNhc2Ugd2UgcmV0dXJuIGFuIGVycm9yICovXG5cbiAgc3RhdGUgPSBuZXcgSW5mbGF0ZVN0YXRlKCk7XG5cbiAgLy9pZiAoc3RhdGUgPT09IFpfTlVMTCkgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IGFsbG9jYXRlZFxcblwiKSk7XG4gIHN0cm0uc3RhdGUgPSBzdGF0ZTtcbiAgc3RhdGUud2luZG93ID0gbnVsbC8qWl9OVUxMKi87XG4gIHJldCA9IGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cyk7XG4gIGlmIChyZXQgIT09IFpfT0spIHtcbiAgICBzdHJtLnN0YXRlID0gbnVsbC8qWl9OVUxMKi87XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQoc3RybSkge1xuICByZXR1cm4gaW5mbGF0ZUluaXQyKHN0cm0sIERFRl9XQklUUyk7XG59XG5cblxuLypcbiBSZXR1cm4gc3RhdGUgd2l0aCBsZW5ndGggYW5kIGRpc3RhbmNlIGRlY29kaW5nIHRhYmxlcyBhbmQgaW5kZXggc2l6ZXMgc2V0IHRvXG4gZml4ZWQgY29kZSBkZWNvZGluZy4gIE5vcm1hbGx5IHRoaXMgcmV0dXJucyBmaXhlZCB0YWJsZXMgZnJvbSBpbmZmaXhlZC5oLlxuIElmIEJVSUxERklYRUQgaXMgZGVmaW5lZCwgdGhlbiBpbnN0ZWFkIHRoaXMgcm91dGluZSBidWlsZHMgdGhlIHRhYmxlcyB0aGVcbiBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgcmV0dXJucyB0aG9zZSB0YWJsZXMgdGhlIGZpcnN0IHRpbWUgYW5kXG4gdGhlcmVhZnRlci4gIFRoaXMgcmVkdWNlcyB0aGUgc2l6ZSBvZiB0aGUgY29kZSBieSBhYm91dCAySyBieXRlcywgaW5cbiBleGNoYW5nZSBmb3IgYSBsaXR0bGUgZXhlY3V0aW9uIHRpbWUuICBIb3dldmVyLCBCVUlMREZJWEVEIHNob3VsZCBub3QgYmVcbiB1c2VkIGZvciB0aHJlYWRlZCBhcHBsaWNhdGlvbnMsIHNpbmNlIHRoZSByZXdyaXRpbmcgb2YgdGhlIHRhYmxlcyBhbmQgdmlyZ2luXG4gbWF5IG5vdCBiZSB0aHJlYWQtc2FmZS5cbiAqL1xudmFyIHZpcmdpbiA9IHRydWU7XG5cbnZhciBsZW5maXgsIGRpc3RmaXg7IC8vIFdlIGhhdmUgbm8gcG9pbnRlcnMgaW4gSlMsIHNvIGtlZXAgdGFibGVzIHNlcGFyYXRlXG5cbmZ1bmN0aW9uIGZpeGVkdGFibGVzKHN0YXRlKSB7XG4gIC8qIGJ1aWxkIGZpeGVkIGh1ZmZtYW4gdGFibGVzIGlmIGZpcnN0IGNhbGwgKG1heSBub3QgYmUgdGhyZWFkIHNhZmUpICovXG4gIGlmICh2aXJnaW4pIHtcbiAgICB2YXIgc3ltO1xuXG4gICAgbGVuZml4ID0gbmV3IHV0aWxzLkJ1ZjMyKDUxMik7XG4gICAgZGlzdGZpeCA9IG5ldyB1dGlscy5CdWYzMigzMik7XG5cbiAgICAvKiBsaXRlcmFsL2xlbmd0aCB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDE0NCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjU2KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gOTsgfVxuICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI4OCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cblxuICAgIGluZmxhdGVfdGFibGUoTEVOUywgIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAgIDAsIHN0YXRlLndvcmssIHtiaXRzOiA5fSk7XG5cbiAgICAvKiBkaXN0YW5jZSB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDMyKSB7IHN0YXRlLmxlbnNbc3ltKytdID0gNTsgfVxuXG4gICAgaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgMCwgMzIsICAgZGlzdGZpeCwgMCwgc3RhdGUud29yaywge2JpdHM6IDV9KTtcblxuICAgIC8qIGRvIHRoaXMganVzdCBvbmNlICovXG4gICAgdmlyZ2luID0gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5sZW5jb2RlID0gbGVuZml4O1xuICBzdGF0ZS5sZW5iaXRzID0gOTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBkaXN0Zml4O1xuICBzdGF0ZS5kaXN0Yml0cyA9IDU7XG59XG5cblxuLypcbiBVcGRhdGUgdGhlIHdpbmRvdyB3aXRoIHRoZSBsYXN0IHdzaXplIChub3JtYWxseSAzMkspIGJ5dGVzIHdyaXR0ZW4gYmVmb3JlXG4gcmV0dXJuaW5nLiAgSWYgd2luZG93IGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0LiAgVGhpcyBpcyBvbmx5IGNhbGxlZFxuIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXNcbiBpbmZsYXRlIGNhbGwsIGJ1dCB0aGUgZW5kIG9mIHRoZSBkZWZsYXRlIHN0cmVhbSBoYXMgbm90IGJlZW4gcmVhY2hlZCB5ZXQuXG4gSXQgaXMgYWxzbyBjYWxsZWQgdG8gY3JlYXRlIGEgd2luZG93IGZvciBkaWN0aW9uYXJ5IGRhdGEgd2hlbiBhIGRpY3Rpb25hcnlcbiBpcyBsb2FkZWQuXG5cbiBQcm92aWRpbmcgb3V0cHV0IGJ1ZmZlcnMgbGFyZ2VyIHRoYW4gMzJLIHRvIGluZmxhdGUoKSBzaG91bGQgcHJvdmlkZSBhIHNwZWVkXG4gYWR2YW50YWdlLCBzaW5jZSBvbmx5IHRoZSBsYXN0IDMySyBvZiBvdXRwdXQgaXMgY29waWVkIHRvIHRoZSBzbGlkaW5nIHdpbmRvd1xuIHVwb24gcmV0dXJuIGZyb20gaW5mbGF0ZSgpLCBhbmQgc2luY2UgYWxsIGRpc3RhbmNlcyBhZnRlciB0aGUgZmlyc3QgMzJLIG9mXG4gb3V0cHV0IHdpbGwgZmFsbCBpbiB0aGUgb3V0cHV0IGRhdGEsIG1ha2luZyBtYXRjaCBjb3BpZXMgc2ltcGxlciBhbmQgZmFzdGVyLlxuIFRoZSBhZHZhbnRhZ2UgbWF5IGJlIGRlcGVuZGVudCBvbiB0aGUgc2l6ZSBvZiB0aGUgcHJvY2Vzc29yJ3MgZGF0YSBjYWNoZXMuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZXdpbmRvdyhzdHJtLCBzcmMsIGVuZCwgY29weSkge1xuICB2YXIgZGlzdDtcbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBpZiBpdCBoYXNuJ3QgYmVlbiBkb25lIGFscmVhZHksIGFsbG9jYXRlIHNwYWNlIGZvciB0aGUgd2luZG93ICovXG4gIGlmIChzdGF0ZS53aW5kb3cgPT09IG51bGwpIHtcbiAgICBzdGF0ZS53c2l6ZSA9IDEgPDwgc3RhdGUud2JpdHM7XG4gICAgc3RhdGUud25leHQgPSAwO1xuICAgIHN0YXRlLndoYXZlID0gMDtcblxuICAgIHN0YXRlLndpbmRvdyA9IG5ldyB1dGlscy5CdWY4KHN0YXRlLndzaXplKTtcbiAgfVxuXG4gIC8qIGNvcHkgc3RhdGUtPndzaXplIG9yIGxlc3Mgb3V0cHV0IGJ5dGVzIGludG8gdGhlIGNpcmN1bGFyIHdpbmRvdyAqL1xuICBpZiAoY29weSA+PSBzdGF0ZS53c2l6ZSkge1xuICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdyxzcmMsIGVuZCAtIHN0YXRlLndzaXplLCBzdGF0ZS53c2l6ZSwgMCk7XG4gICAgc3RhdGUud25leHQgPSAwO1xuICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7XG4gIH1cbiAgZWxzZSB7XG4gICAgZGlzdCA9IHN0YXRlLndzaXplIC0gc3RhdGUud25leHQ7XG4gICAgaWYgKGRpc3QgPiBjb3B5KSB7XG4gICAgICBkaXN0ID0gY29weTtcbiAgICB9XG4gICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3cgKyBzdGF0ZS0+d25leHQsIGVuZCAtIGNvcHksIGRpc3QpO1xuICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdyxzcmMsIGVuZCAtIGNvcHksIGRpc3QsIHN0YXRlLnduZXh0KTtcbiAgICBjb3B5IC09IGRpc3Q7XG4gICAgaWYgKGNvcHkpIHtcbiAgICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93LCBlbmQgLSBjb3B5LCBjb3B5KTtcbiAgICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdyxzcmMsIGVuZCAtIGNvcHksIGNvcHksIDApO1xuICAgICAgc3RhdGUud25leHQgPSBjb3B5O1xuICAgICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdGF0ZS53bmV4dCArPSBkaXN0O1xuICAgICAgaWYgKHN0YXRlLnduZXh0ID09PSBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53bmV4dCA9IDA7IH1cbiAgICAgIGlmIChzdGF0ZS53aGF2ZSA8IHN0YXRlLndzaXplKSB7IHN0YXRlLndoYXZlICs9IGRpc3Q7IH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGUoc3RybSwgZmx1c2gpIHtcbiAgdmFyIHN0YXRlO1xuICB2YXIgaW5wdXQsIG91dHB1dDsgICAgICAgICAgLy8gaW5wdXQvb3V0cHV0IGJ1ZmZlcnNcbiAgdmFyIG5leHQ7ICAgICAgICAgICAgICAgICAgIC8qIG5leHQgaW5wdXQgSU5ERVggKi9cbiAgdmFyIHB1dDsgICAgICAgICAgICAgICAgICAgIC8qIG5leHQgb3V0cHV0IElOREVYICovXG4gIHZhciBoYXZlLCBsZWZ0OyAgICAgICAgICAgICAvKiBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgaG9sZDsgICAgICAgICAgICAgICAgICAgLyogYml0IGJ1ZmZlciAqL1xuICB2YXIgYml0czsgICAgICAgICAgICAgICAgICAgLyogYml0cyBpbiBiaXQgYnVmZmVyICovXG4gIHZhciBfaW4sIF9vdXQ7ICAgICAgICAgICAgICAvKiBzYXZlIHN0YXJ0aW5nIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovXG4gIHZhciBjb3B5OyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2Ygc3RvcmVkIG9yIG1hdGNoIGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggYnl0ZXMgZnJvbSAqL1xuICB2YXIgZnJvbV9zb3VyY2U7XG4gIHZhciBoZXJlID0gMDsgICAgICAgICAgICAgICAvKiBjdXJyZW50IGRlY29kaW5nIHRhYmxlIGVudHJ5ICovXG4gIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsOyAvLyBwYWtlZCBcImhlcmVcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICAvL3ZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBwYXJlbnQgdGFibGUgZW50cnkgKi9cbiAgdmFyIGxhc3RfYml0cywgbGFzdF9vcCwgbGFzdF92YWw7IC8vIHBha2VkIFwibGFzdFwiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpXG4gIHZhciBsZW47ICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggdG8gY29weSBmb3IgcmVwZWF0cywgYml0cyB0byBkcm9wICovXG4gIHZhciByZXQ7ICAgICAgICAgICAgICAgICAgICAvKiByZXR1cm4gY29kZSAqL1xuICB2YXIgaGJ1ZiA9IG5ldyB1dGlscy5CdWY4KDQpOyAgICAvKiBidWZmZXIgZm9yIGd6aXAgaGVhZGVyIGNyYyBjYWxjdWxhdGlvbiAqL1xuICB2YXIgb3B0cztcblxuICB2YXIgbjsgLy8gdGVtcG9yYXJ5IHZhciBmb3IgTkVFRF9CSVRTXG5cbiAgdmFyIG9yZGVyID0gLyogcGVybXV0YXRpb24gb2YgY29kZSBsZW5ndGhzICovXG4gICAgWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdO1xuXG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8ICFzdHJtLm91dHB1dCB8fFxuICAgICAgKCFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkgeyBzdGF0ZS5tb2RlID0gVFlQRURPOyB9ICAgIC8qIHNraXAgY2hlY2sgKi9cblxuXG4gIC8vLS0tIExPQUQoKSAtLS1cbiAgcHV0ID0gc3RybS5uZXh0X291dDtcbiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICAvLy0tLVxuXG4gIF9pbiA9IGhhdmU7XG4gIF9vdXQgPSBsZWZ0O1xuICByZXQgPSBaX09LO1xuXG4gIGluZl9sZWF2ZTogLy8gZ290byBlbXVsYXRpb25cbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoc3RhdGUubW9kZSkge1xuICAgIGNhc2UgSEVBRDpcbiAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpO1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqL1xuICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgLy89PT0vL1xuXG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gRkxBR1M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZmxhZ3MgPSAwOyAgICAgICAgICAgLyogZXhwZWN0IHpsaWIgaGVhZGVyICovXG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAgIC8qIGNoZWNrIGlmIHpsaWIgaGVhZGVyIGFsbG93ZWQgKi9cbiAgICAgICAgKCgoaG9sZCAmIDB4ZmYpLypCSVRTKDgpKi8gPDwgOCkgKyAoaG9sZCA+PiA4KSkgJSAzMSkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgaGVhZGVyIGNoZWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICBiaXRzIC09IDQ7XG4gICAgICAvLy0tLS8vXG4gICAgICBsZW4gPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA4O1xuICAgICAgaWYgKHN0YXRlLndiaXRzID09PSAwKSB7XG4gICAgICAgIHN0YXRlLndiaXRzID0gbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAobGVuID4gc3RhdGUud2JpdHMpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCB3aW5kb3cgc2l6ZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuO1xuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIHpsaWIgaGVhZGVyIG9rXFxuXCIpKTtcbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgMHgyMDAgPyBESUNUSUQgOiBUWVBFO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBicmVhaztcbiAgICBjYXNlIEZMQUdTOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkO1xuICAgICAgaWYgKChzdGF0ZS5mbGFncyAmIDB4ZmYpICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweGUwMDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLnRleHQgPSAoKGhvbGQgPj4gOCkgJiAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IFRJTUU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUSU1FOlxuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKVxuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhidWZbM10gPSAoaG9sZCA+Pj4gMjQpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7XG4gICAgICAgIC8vPT09XG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBPUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE9TOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC54ZmxhZ3MgPSAoaG9sZCAmIDB4ZmYpO1xuICAgICAgICBzdGF0ZS5oZWFkLm9zID0gKGhvbGQgPj4gOCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBFWExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIEVYTEVOOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkO1xuICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbGVuID0gaG9sZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbC8qWl9OVUxMKi87XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBFWFRSQTpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHtcbiAgICAgICAgICAgICAgLy8gVXNlIHVudHlwZWQgYXJyYXkgZm9yIG1vcmUgY29udmVuaWVuZCBwcm9jZXNzaW5nIGxhdGVyXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRpbHMuYXJyYXlTZXQoXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEsXG4gICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICBuZXh0LFxuICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzXG4gICAgICAgICAgICAgIC8vIC0gbm8gbmVlZCBmb3IgYWRkaXRpb25hbCBzaXplIGNoZWNrXG4gICAgICAgICAgICAgIGNvcHksXG4gICAgICAgICAgICAgIC8qbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuID8gc3RhdGUuaGVhZC5leHRyYV9tYXggOiBjb3B5LCovXG4gICAgICAgICAgICAgIGxlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vem1lbWNweShzdGF0ZS5oZWFkLmV4dHJhICsgbGVuLCBuZXh0LFxuICAgICAgICAgICAgLy8gICAgICAgIGxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCA/XG4gICAgICAgICAgICAvLyAgICAgICAgc3RhdGUuaGVhZC5leHRyYV9tYXggLSBsZW4gOiBjb3B5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTkFNRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE5BTUU6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA4MDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzP1xuICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovXG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmXG4gICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQubmFtZV9tYXgqLykpIHtcbiAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpO1xuXG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5uYW1lID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09NTUVOVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPTU1FTlQ6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDEwMDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107XG4gICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4gJiZcbiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5jb21tX21heCovKSkge1xuICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBIQ1JDO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgSENSQzpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS5jaGVjayAmIDB4ZmZmZikpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpO1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMCAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgRElDVElEOlxuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gWlNXQVAzMihob2xkKTtcbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IERJQ1Q7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBESUNUOlxuICAgICAgaWYgKHN0YXRlLmhhdmVkaWN0ID09PSAwKSB7XG4gICAgICAgIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgICAgICAgc3RybS5uZXh0X291dCA9IHB1dDtcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICAgICAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTtcbiAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAgICAgICAvLy0tLVxuICAgICAgICByZXR1cm4gWl9ORUVEX0RJQ1Q7XG4gICAgICB9XG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIFRZUEU6XG4gICAgICBpZiAoZmx1c2ggPT09IFpfQkxPQ0sgfHwgZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUWVBFRE86XG4gICAgICBpZiAoc3RhdGUubGFzdCkge1xuICAgICAgICAvLy0tLSBCWVRFQklUUygpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBiaXRzICYgNztcbiAgICAgICAgYml0cyAtPSBiaXRzICYgNztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gQ0hFQ0s7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy89PT0gTkVFREJJVFMoMyk7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLmxhc3QgPSAoaG9sZCAmIDB4MDEpLypCSVRTKDEpKi87XG4gICAgICAvLy0tLSBEUk9QQklUUygxKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDE7XG4gICAgICBiaXRzIC09IDE7XG4gICAgICAvLy0tLS8vXG5cbiAgICAgIHN3aXRjaCAoKGhvbGQgJiAweDAzKS8qQklUUygyKSovKSB7XG4gICAgICBjYXNlIDA6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzdG9yZWQgYmxvY2sgKi9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgc3RvcmVkIGJsb2NrJXNcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFNUT1JFRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBmaXhlZCBibG9jayAqL1xuICAgICAgICBmaXhlZHRhYmxlcyhzdGF0ZSk7XG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIGZpeGVkIGNvZGVzIGJsb2NrJXNcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExFTl87ICAgICAgICAgICAgIC8qIGRlY29kZSBjb2RlcyAqL1xuICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHtcbiAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICAgIGJpdHMgLT0gMjtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZHluYW1pYyBibG9jayAqL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBkeW5hbWljIGNvZGVzIGJsb2NrJXNcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRBQkxFO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBibG9jayB0eXBlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgIH1cbiAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gMjtcbiAgICAgIGJpdHMgLT0gMjtcbiAgICAgIC8vLS0tLy9cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgU1RPUkVEOlxuICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLyAvKiBnbyB0byBieXRlIGJvdW5kYXJ5ICovXG4gICAgICBob2xkID4+Pj0gYml0cyAmIDc7XG4gICAgICBiaXRzIC09IGJpdHMgJiA3O1xuICAgICAgLy8tLS0vL1xuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKChob2xkICYgMHhmZmZmKSAhPT0gKChob2xkID4+PiAxNikgXiAweGZmZmYpKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IGhvbGQgJiAweGZmZmY7XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBsZW5ndGggJXVcXG5cIixcbiAgICAgIC8vICAgICAgICBzdGF0ZS5sZW5ndGgpKTtcbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IENPUFlfO1xuICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09QWV86XG4gICAgICBzdGF0ZS5tb2RlID0gQ09QWTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPUFk6XG4gICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7IGNvcHkgPSBoYXZlOyB9XG4gICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuICAgICAgICBpZiAoY29weSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgLy8tLS0gem1lbWNweShwdXQsIG5leHQsIGNvcHkpOyAtLS1cbiAgICAgICAgdXRpbHMuYXJyYXlTZXQob3V0cHV0LCBpbnB1dCwgbmV4dCwgY29weSwgcHV0KTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgbGVmdCAtPSBjb3B5O1xuICAgICAgICBwdXQgKz0gY29weTtcbiAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBzdG9yZWQgZW5kXFxuXCIpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUQUJMRTpcbiAgICAgIC8vPT09IE5FRURCSVRTKDE0KTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMTQpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm5sZW4gPSAoaG9sZCAmIDB4MWYpLypCSVRTKDUpKi8gKyAyNTc7XG4gICAgICAvLy0tLSBEUk9QQklUUyg1KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDU7XG4gICAgICBiaXRzIC09IDU7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5uZGlzdCA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDE7XG4gICAgICAvLy0tLSBEUk9QQklUUyg1KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDU7XG4gICAgICBiaXRzIC09IDU7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5uY29kZSA9IChob2xkICYgMHgwZikvKkJJVFMoNCkqLyArIDQ7XG4gICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICBiaXRzIC09IDQ7XG4gICAgICAvLy0tLS8vXG4vLyNpZm5kZWYgUEtaSVBfQlVHX1dPUktBUk9VTkRcbiAgICAgIGlmIChzdGF0ZS5ubGVuID4gMjg2IHx8IHN0YXRlLm5kaXN0ID4gMzApIHtcbiAgICAgICAgc3RybS5tc2cgPSAndG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHRhYmxlIHNpemVzIG9rXFxuXCIpKTtcbiAgICAgIHN0YXRlLmhhdmUgPSAwO1xuICAgICAgc3RhdGUubW9kZSA9IExFTkxFTlM7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5MRU5TOlxuICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCBzdGF0ZS5uY29kZSkge1xuICAgICAgICAvLz09PSBORUVEQklUUygzKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTtcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoMykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDM7XG4gICAgICAgIGJpdHMgLT0gMztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgfVxuICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCAxOSkge1xuICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gMDtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAvL3N0YXRlLm5leHQgPSBzdGF0ZS5jb2RlcztcbiAgICAgIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLm5leHQ7XG4gICAgICAvLyBTd2l0Y2ggdG8gdXNlIGR5bmFtaWMgdGFibGVcbiAgICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW47XG4gICAgICBzdGF0ZS5sZW5iaXRzID0gNztcblxuICAgICAgb3B0cyA9IHtiaXRzOiBzdGF0ZS5sZW5iaXRzfTtcbiAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoQ09ERVMsIHN0YXRlLmxlbnMsIDAsIDE5LCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7XG5cbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIGNvZGUgbGVuZ3RocyBva1xcblwiKSk7XG4gICAgICBzdGF0ZS5oYXZlID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBDT0RFTEVOUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPREVMRU5TOlxuICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCBzdGF0ZS5ubGVuICsgc3RhdGUubmRpc3QpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUubGVuYml0cykgLSAxKV07LypCSVRTKHN0YXRlLmxlbmJpdHMpKi9cbiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlcmVfdmFsIDwgMTYpIHtcbiAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gaGVyZV92YWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKGhlcmVfdmFsID09PSAxNikge1xuICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgMik7XG4gICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgMjtcbiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgaWYgKHN0YXRlLmhhdmUgPT09IDApIHtcbiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVuID0gc3RhdGUubGVuc1tzdGF0ZS5oYXZlIC0gMV07XG4gICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgMHgwMyk7Ly9CSVRTKDIpO1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChoZXJlX3ZhbCA9PT0gMTcpIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDMpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDM7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgMHgwNyk7Ly9CSVRTKDMpO1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSAzO1xuICAgICAgICAgICAgYml0cyAtPSAzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDcpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDc7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICBjb3B5ID0gMTEgKyAoaG9sZCAmIDB4N2YpOy8vQklUUyg3KTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDcpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gNztcbiAgICAgICAgICAgIGJpdHMgLT0gNztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmhhdmUgKyBjb3B5ID4gc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0JztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgd2hpbGUgKGNvcHktLSkge1xuICAgICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gbGVuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBoYW5kbGUgZXJyb3IgYnJlYWtzIGluIHdoaWxlICovXG4gICAgICBpZiAoc3RhdGUubW9kZSA9PT0gQkFEKSB7IGJyZWFrOyB9XG5cbiAgICAgIC8qIGNoZWNrIGZvciBlbmQtb2YtYmxvY2sgY29kZSAoYmV0dGVyIGhhdmUgb25lKSAqL1xuICAgICAgaWYgKHN0YXRlLmxlbnNbMjU2XSA9PT0gMCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgLS0gbWlzc2luZyBlbmQtb2YtYmxvY2snO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLyogYnVpbGQgY29kZSB0YWJsZXMgLS0gbm90ZTogZG8gbm90IGNoYW5nZSB0aGUgbGVuYml0cyBvciBkaXN0Yml0c1xuICAgICAgICAgdmFsdWVzIGhlcmUgKDkgYW5kIDYpIHdpdGhvdXQgcmVhZGluZyB0aGUgY29tbWVudHMgaW4gaW5mdHJlZXMuaFxuICAgICAgICAgY29uY2VybmluZyB0aGUgRU5PVUdIIGNvbnN0YW50cywgd2hpY2ggZGVwZW5kIG9uIHRob3NlIHZhbHVlcyAqL1xuICAgICAgc3RhdGUubGVuYml0cyA9IDk7XG5cbiAgICAgIG9wdHMgPSB7Yml0czogc3RhdGUubGVuYml0c307XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKExFTlMsIHN0YXRlLmxlbnMsIDAsIHN0YXRlLm5sZW4sIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4O1xuICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kaXN0Yml0cyA9IDY7XG4gICAgICAvL3N0YXRlLmRpc3Rjb2RlLmNvcHkoc3RhdGUuY29kZXMpO1xuICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47XG4gICAgICBvcHRzID0ge2JpdHM6IHN0YXRlLmRpc3RiaXRzfTtcbiAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIHN0YXRlLm5sZW4sIHN0YXRlLm5kaXN0LCBzdGF0ZS5kaXN0Y29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgLy8gc3RhdGUubmV4dF9pbmRleCA9IG9wdHMudGFibGVfaW5kZXg7XG4gICAgICBzdGF0ZS5kaXN0Yml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dDtcblxuICAgICAgaWYgKHJldCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlcyBzZXQnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsICdpbmZsYXRlOiAgICAgICBjb2RlcyBva1xcbicpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU5fO1xuICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOXzpcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU47XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU46XG4gICAgICBpZiAoaGF2ZSA+PSA2ICYmIGxlZnQgPj0gMjU4KSB7XG4gICAgICAgIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgICAgICAgc3RybS5uZXh0X291dCA9IHB1dDtcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICAgICAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTtcbiAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAgICAgICAvLy0tLVxuICAgICAgICBpbmZsYXRlX2Zhc3Qoc3RybSwgX291dCk7XG4gICAgICAgIC8vLS0tIExPQUQoKSAtLS1cbiAgICAgICAgcHV0ID0gc3RybS5uZXh0X291dDtcbiAgICAgICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gICAgICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgICAgICAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgICAgICAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICAgICAgICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgICAgICAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gICAgICAgIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICAgICAgICAvLy0tLVxuXG4gICAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7XG4gICAgICAgICAgc3RhdGUuYmFjayA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuYmFjayA9IDA7XG4gICAgICBmb3IgKDs7KSB7XG4gICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUubGVuYml0cykgLTEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmJiAoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0cztcbiAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7XG4gICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtsYXN0X3ZhbCArXG4gICAgICAgICAgICAgICAgICAoKGhvbGQgJiAoKDEgPDwgKGxhc3RfYml0cyArIGxhc3Rfb3ApKSAtMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgobGFzdF9iaXRzICsgaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGxhc3QuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0cztcbiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBsYXN0X2JpdHM7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5iYWNrICs9IGhlcmVfYml0cztcbiAgICAgIHN0YXRlLmxlbmd0aCA9IGhlcmVfdmFsO1xuICAgICAgaWYgKGhlcmVfb3AgPT09IDApIHtcbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIGhlcmUudmFsID49IDB4MjAgJiYgaGVyZS52YWwgPCAweDdmID9cbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsICclYydcXG5cIiA6XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcXG5cIiwgaGVyZS52YWwpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExJVDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmIDMyKSB7XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZW5kIG9mIGJsb2NrXFxuXCIpKTtcbiAgICAgICAgc3RhdGUuYmFjayA9IC0xO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmIDY0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZXh0cmEgPSBoZXJlX29wICYgMTU7XG4gICAgICBzdGF0ZS5tb2RlID0gTEVORVhUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVORVhUOlxuICAgICAgaWYgKHN0YXRlLmV4dHJhKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTtcbiAgICAgICAgbiA9IHN0YXRlLmV4dHJhO1xuICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGVuZ3RoICs9IGhvbGQgJiAoKDEgPDwgc3RhdGUuZXh0cmEpIC0xKS8qQklUUyhzdGF0ZS5leHRyYSkqLztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTtcbiAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBsZW5ndGggJXVcXG5cIiwgc3RhdGUubGVuZ3RoKSk7XG4gICAgICBzdGF0ZS53YXMgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBzdGF0ZS5tb2RlID0gRElTVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJU1Q6XG4gICAgICBmb3IgKDs7KSB7XG4gICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtMSldOy8qQklUUyhzdGF0ZS5kaXN0Yml0cykqL1xuICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkge1xuICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7XG4gICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0xKSkvKkJJVFMobGFzdC5iaXRzICsgbGFzdC5vcCkqLyA+PiBsYXN0X2JpdHMpXTtcbiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgIH1cbiAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzO1xuICAgICAgICBiaXRzIC09IGxhc3RfYml0cztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0cztcbiAgICAgIH1cbiAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzO1xuICAgICAgaWYgKGhlcmVfb3AgJiA2NCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLm9mZnNldCA9IGhlcmVfdmFsO1xuICAgICAgc3RhdGUuZXh0cmEgPSAoaGVyZV9vcCkgJiAxNTtcbiAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRElTVEVYVDpcbiAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7XG4gICAgICAgIG4gPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLm9mZnNldCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtMSkvKkJJVFMoc3RhdGUuZXh0cmEpKi87XG4gICAgICAgIC8vLS0tIERST1BCSVRTKHN0YXRlLmV4dHJhKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gc3RhdGUuZXh0cmE7XG4gICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBzdGF0ZS5leHRyYTtcbiAgICAgIH1cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gc3RhdGUuZG1heCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuLy8jZW5kaWZcbiAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcXG5cIiwgc3RhdGUub2Zmc2V0KSk7XG4gICAgICBzdGF0ZS5tb2RlID0gTUFUQ0g7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBNQVRDSDpcbiAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgY29weSA9IF9vdXQgLSBsZWZ0O1xuICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IGNvcHkpIHsgICAgICAgICAvKiBjb3B5IGZyb20gd2luZG93ICovXG4gICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5O1xuICAgICAgICBpZiAoY29weSA+IHN0YXRlLndoYXZlKSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHtcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4vLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmFpbHRzLFxuLy8gZG9uJ3QgZW5hYmxlIGl0IGZvciBiaW5hcnkgY29tcGF0aWJpbGl0eVxuLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSXG4vLyAgICAgICAgICBUcmFjZSgoc3RkZXJyLCBcImluZmxhdGUuYyB0b28gZmFyXFxuXCIpKTtcbi8vICAgICAgICAgIGNvcHkgLT0gc3RhdGUud2hhdmU7XG4vLyAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4vLyAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbi8vICAgICAgICAgIGxlZnQgLT0gY29weTtcbi8vICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuLy8gICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICBvdXRwdXRbcHV0KytdID0gMDtcbi8vICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7XG4vLyAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH1cbi8vICAgICAgICAgIGJyZWFrO1xuLy8jZW5kaWZcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IHN0YXRlLnduZXh0KSB7XG4gICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDtcbiAgICAgICAgICBmcm9tID0gc3RhdGUud3NpemUgLSBjb3B5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGZyb20gPSBzdGF0ZS53bmV4dCAtIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsgY29weSA9IHN0YXRlLmxlbmd0aDsgfVxuICAgICAgICBmcm9tX3NvdXJjZSA9IHN0YXRlLndpbmRvdztcbiAgICAgIH1cbiAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNvcHkgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgIGZyb20gPSBwdXQgLSBzdGF0ZS5vZmZzZXQ7XG4gICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbiAgICAgIGxlZnQgLT0gY29weTtcbiAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgZG8ge1xuICAgICAgICBvdXRwdXRbcHV0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgIH0gd2hpbGUgKC0tY29weSk7XG4gICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgTElUOlxuICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICBvdXRwdXRbcHV0KytdID0gc3RhdGUubGVuZ3RoO1xuICAgICAgbGVmdC0tO1xuICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ0hFQ0s6XG4gICAgICBpZiAoc3RhdGUud3JhcCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygzMik7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgLy8gVXNlICd8JyBpbnNkZWFkIG9mICcrJyB0byBtYWtlIHN1cmUgdGhhdCByZXN1bHQgaXMgc2lnbmVkXG4gICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgX291dCAtPSBsZWZ0O1xuICAgICAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0O1xuICAgICAgICBzdGF0ZS50b3RhbCArPSBfb3V0O1xuICAgICAgICBpZiAoX291dCkge1xuICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9XG4gICAgICAgICAgICAgIC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBwdXQgLSBfb3V0LCBfb3V0KTsqL1xuICAgICAgICAgICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgcHV0IC0gX291dCkpO1xuXG4gICAgICAgIH1cbiAgICAgICAgX291dCA9IGxlZnQ7XG4gICAgICAgIC8vIE5COiBjcmMzMiBzdG9yZWQgYXMgc2lnbmVkIDMyLWJpdCBpbnQsIFpTV0FQMzIgcmV0dXJucyBzaWduZWQgdG9vXG4gICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgPyBob2xkIDogWlNXQVAzMihob2xkKSkgIT09IHN0YXRlLmNoZWNrKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBjaGVjayBtYXRjaGVzIHRyYWlsZXJcXG5cIikpO1xuICAgICAgfVxuICAgICAgc3RhdGUubW9kZSA9IExFTkdUSDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkdUSDpcbiAgICAgIGlmIChzdGF0ZS53cmFwICYmIHN0YXRlLmZsYWdzKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLnRvdGFsICYgMHhmZmZmZmZmZikpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgbGVuZ3RoIG1hdGNoZXMgdHJhaWxlclxcblwiKSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gRE9ORTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERPTkU6XG4gICAgICByZXQgPSBaX1NUUkVBTV9FTkQ7XG4gICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgY2FzZSBCQUQ6XG4gICAgICByZXQgPSBaX0RBVEFfRVJST1I7XG4gICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgY2FzZSBNRU06XG4gICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgY2FzZSBTWU5DOlxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgfVxuICB9XG5cbiAgLy8gaW5mX2xlYXZlIDwtIGhlcmUgaXMgcmVhbCBwbGFjZSBmb3IgXCJnb3RvIGluZl9sZWF2ZVwiLCBlbXVsYXRlZCB2aWEgXCJicmVhayBpbmZfbGVhdmVcIlxuXG4gIC8qXG4gICAgIFJldHVybiBmcm9tIGluZmxhdGUoKSwgdXBkYXRpbmcgdGhlIHRvdGFsIGNvdW50cyBhbmQgdGhlIGNoZWNrIHZhbHVlLlxuICAgICBJZiB0aGVyZSB3YXMgbm8gcHJvZ3Jlc3MgZHVyaW5nIHRoZSBpbmZsYXRlKCkgY2FsbCwgcmV0dXJuIGEgYnVmZmVyXG4gICAgIGVycm9yLiAgQ2FsbCB1cGRhdGV3aW5kb3coKSB0byBjcmVhdGUgYW5kL29yIHVwZGF0ZSB0aGUgd2luZG93IHN0YXRlLlxuICAgICBOb3RlOiBhIG1lbW9yeSBlcnJvciBmcm9tIGluZmxhdGUoKSBpcyBub24tcmVjb3ZlcmFibGUuXG4gICAqL1xuXG4gIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgc3RybS5uZXh0X291dCA9IHB1dDtcbiAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICBzdHJtLmF2YWlsX2luID0gaGF2ZTtcbiAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAvLy0tLVxuXG4gIGlmIChzdGF0ZS53c2l6ZSB8fCAoX291dCAhPT0gc3RybS5hdmFpbF9vdXQgJiYgc3RhdGUubW9kZSA8IEJBRCAmJlxuICAgICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlIDwgQ0hFQ0sgfHwgZmx1c2ggIT09IFpfRklOSVNIKSkpIHtcbiAgICBpZiAodXBkYXRld2luZG93KHN0cm0sIHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0LCBfb3V0IC0gc3RybS5hdmFpbF9vdXQpKSB7XG4gICAgICBzdGF0ZS5tb2RlID0gTUVNO1xuICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAgIH1cbiAgfVxuICBfaW4gLT0gc3RybS5hdmFpbF9pbjtcbiAgX291dCAtPSBzdHJtLmF2YWlsX291dDtcbiAgc3RybS50b3RhbF9pbiArPSBfaW47XG4gIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gIHN0YXRlLnRvdGFsICs9IF9vdXQ7XG4gIGlmIChzdGF0ZS53cmFwICYmIF9vdXQpIHtcbiAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAvKlVQREFURShzdGF0ZS5jaGVjaywgc3RybS5uZXh0X291dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCkgOiBhZGxlcjMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSk7XG4gIH1cbiAgc3RybS5kYXRhX3R5cGUgPSBzdGF0ZS5iaXRzICsgKHN0YXRlLmxhc3QgPyA2NCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IFRZUEUgPyAxMjggOiAwKSArXG4gICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlID09PSBMRU5fIHx8IHN0YXRlLm1vZGUgPT09IENPUFlfID8gMjU2IDogMCk7XG4gIGlmICgoKF9pbiA9PT0gMCAmJiBfb3V0ID09PSAwKSB8fCBmbHVzaCA9PT0gWl9GSU5JU0gpICYmIHJldCA9PT0gWl9PSykge1xuICAgIHJldCA9IFpfQlVGX0VSUk9SO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVFbmQoc3RybSkge1xuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSAvKnx8IHN0cm0tPnpmcmVlID09IChmcmVlX2Z1bmMpMCovKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgaWYgKHN0YXRlLndpbmRvdykge1xuICAgIHN0YXRlLndpbmRvdyA9IG51bGw7XG4gIH1cbiAgc3RybS5zdGF0ZSA9IG51bGw7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlR2V0SGVhZGVyKHN0cm0sIGhlYWQpIHtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGNoZWNrIHN0YXRlICovXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoKHN0YXRlLndyYXAgJiAyKSA9PT0gMCkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cblxuICAvKiBzYXZlIGhlYWRlciBzdHJ1Y3R1cmUgKi9cbiAgc3RhdGUuaGVhZCA9IGhlYWQ7XG4gIGhlYWQuZG9uZSA9IGZhbHNlO1xuICByZXR1cm4gWl9PSztcbn1cblxuXG5leHBvcnRzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDtcbmV4cG9ydHMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7XG5leHBvcnRzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwO1xuZXhwb3J0cy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0O1xuZXhwb3J0cy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlRW5kID0gaW5mbGF0ZUVuZDtcbmV4cG9ydHMuaW5mbGF0ZUdldEhlYWRlciA9IGluZmxhdGVHZXRIZWFkZXI7XG5leHBvcnRzLmluZmxhdGVJbmZvID0gJ3Bha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknO1xuXG4vKiBOb3QgaW1wbGVtZW50ZWRcbmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTtcbmV4cG9ydHMuaW5mbGF0ZUdldERpY3Rpb25hcnkgPSBpbmZsYXRlR2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuaW5mbGF0ZU1hcmsgPSBpbmZsYXRlTWFyaztcbmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lO1xuZXhwb3J0cy5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGluZmxhdGVTZXREaWN0aW9uYXJ5O1xuZXhwb3J0cy5pbmZsYXRlU3luYyA9IGluZmxhdGVTeW5jO1xuZXhwb3J0cy5pbmZsYXRlU3luY1BvaW50ID0gaW5mbGF0ZVN5bmNQb2ludDtcbmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7XG4qL1xuXG59LHtcIi4uL3V0aWxzL2NvbW1vblwiOjM4LFwiLi9hZGxlcjMyXCI6NDAsXCIuL2NyYzMyXCI6NDIsXCIuL2luZmZhc3RcIjo0NSxcIi4vaW5mdHJlZXNcIjo0N31dLDQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTtcblxudmFyIE1BWEJJVFMgPSAxNTtcbnZhciBFTk9VR0hfTEVOUyA9IDg1MjtcbnZhciBFTk9VR0hfRElTVFMgPSA1OTI7XG4vL3ZhciBFTk9VR0ggPSAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbnZhciBsYmFzZSA9IFsgLyogTGVuZ3RoIGNvZGVzIDI1Ny4uMjg1IGJhc2UgKi9cbiAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSxcbiAgMzUsIDQzLCA1MSwgNTksIDY3LCA4MywgOTksIDExNSwgMTMxLCAxNjMsIDE5NSwgMjI3LCAyNTgsIDAsIDBcbl07XG5cbnZhciBsZXh0ID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsXG4gIDE5LCAxOSwgMTksIDE5LCAyMCwgMjAsIDIwLCAyMCwgMjEsIDIxLCAyMSwgMjEsIDE2LCA3MiwgNzhcbl07XG5cbnZhciBkYmFzZSA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgYmFzZSAqL1xuICAxLCAyLCAzLCA0LCA1LCA3LCA5LCAxMywgMTcsIDI1LCAzMywgNDksIDY1LCA5NywgMTI5LCAxOTMsXG4gIDI1NywgMzg1LCA1MTMsIDc2OSwgMTAyNSwgMTUzNywgMjA0OSwgMzA3MywgNDA5NywgNjE0NSxcbiAgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMFxuXTtcblxudmFyIGRleHQgPSBbIC8qIERpc3RhbmNlIGNvZGVzIDAuLjI5IGV4dHJhICovXG4gIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE4LCAxOCwgMTksIDE5LCAyMCwgMjAsIDIxLCAyMSwgMjIsIDIyLFxuICAyMywgMjMsIDI0LCAyNCwgMjUsIDI1LCAyNiwgMjYsIDI3LCAyNyxcbiAgMjgsIDI4LCAyOSwgMjksIDY0LCA2NFxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmZsYXRlX3RhYmxlKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpXG57XG4gIHZhciBiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy9oZXJlID0gb3B0cy5oZXJlOyAvKiB0YWJsZSBlbnRyeSBmb3IgZHVwbGljYXRpb24gKi9cblxuICB2YXIgbGVuID0gMDsgICAgICAgICAgICAgICAvKiBhIGNvZGUncyBsZW5ndGggaW4gYml0cyAqL1xuICB2YXIgc3ltID0gMDsgICAgICAgICAgICAgICAvKiBpbmRleCBvZiBjb2RlIHN5bWJvbHMgKi9cbiAgdmFyIG1pbiA9IDAsIG1heCA9IDA7ICAgICAgICAgIC8qIG1pbmltdW0gYW5kIG1heGltdW0gY29kZSBsZW5ndGhzICovXG4gIHZhciByb290ID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciByb290IHRhYmxlICovXG4gIHZhciBjdXJyID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciBjdXJyZW50IHRhYmxlICovXG4gIHZhciBkcm9wID0gMDsgICAgICAgICAgICAgIC8qIGNvZGUgYml0cyB0byBkcm9wIGZvciBzdWItdGFibGUgKi9cbiAgdmFyIGxlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgcHJlZml4IGNvZGVzIGF2YWlsYWJsZSAqL1xuICB2YXIgdXNlZCA9IDA7ICAgICAgICAgICAgICAvKiBjb2RlIGVudHJpZXMgaW4gdGFibGUgdXNlZCAqL1xuICB2YXIgaHVmZiA9IDA7ICAgICAgICAgICAgICAvKiBIdWZmbWFuIGNvZGUgKi9cbiAgdmFyIGluY3I7ICAgICAgICAgICAgICAvKiBmb3IgaW5jcmVtZW50aW5nIGNvZGUsIGluZGV4ICovXG4gIHZhciBmaWxsOyAgICAgICAgICAgICAgLyogaW5kZXggZm9yIHJlcGxpY2F0aW5nIGVudHJpZXMgKi9cbiAgdmFyIGxvdzsgICAgICAgICAgICAgICAvKiBsb3cgYml0cyBmb3IgY3VycmVudCByb290IGVudHJ5ICovXG4gIHZhciBtYXNrOyAgICAgICAgICAgICAgLyogbWFzayBmb3IgbG93IHJvb3QgYml0cyAqL1xuICB2YXIgbmV4dDsgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gdGFibGUgKi9cbiAgdmFyIGJhc2UgPSBudWxsOyAgICAgLyogYmFzZSB2YWx1ZSB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGJhc2VfaW5kZXggPSAwO1xuLy8gIHZhciBzaG9leHRyYTsgICAgLyogZXh0cmEgYml0cyB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHVzZSBiYXNlIGFuZCBleHRyYSBmb3Igc3ltYm9sID4gZW5kICovXG4gIHZhciBjb3VudCA9IG5ldyB1dGlscy5CdWYxNihNQVhCSVRTKzEpOyAvL1tNQVhCSVRTKzFdOyAgICAvKiBudW1iZXIgb2YgY29kZXMgb2YgZWFjaCBsZW5ndGggKi9cbiAgdmFyIG9mZnMgPSBuZXcgdXRpbHMuQnVmMTYoTUFYQklUUysxKTsgLy9bTUFYQklUUysxXTsgICAgIC8qIG9mZnNldHMgaW4gdGFibGUgZm9yIGVhY2ggbGVuZ3RoICovXG4gIHZhciBleHRyYSA9IG51bGw7XG4gIHZhciBleHRyYV9pbmRleCA9IDA7XG5cbiAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7XG5cbiAgLypcbiAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGVcbiAgIGNvZGUgbGVuZ3RocyBhcmUgbGVuc1swLi5jb2Rlcy0xXS4gIEVhY2ggbGVuZ3RoIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgc3ltYm9scyAwLi5jb2Rlcy0xLiAgVGhlIEh1ZmZtYW4gY29kZSBpcyBnZW5lcmF0ZWQgYnkgZmlyc3Qgc29ydGluZyB0aGVcbiAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyXG4gICBmb3IgY29kZXMgd2l0aCBlcXVhbCBsZW5ndGhzLiAgVGhlbiB0aGUgY29kZSBzdGFydHMgd2l0aCBhbGwgemVybyBiaXRzXG4gICBmb3IgdGhlIGZpcnN0IGNvZGUgb2YgdGhlIHNob3J0ZXN0IGxlbmd0aCwgYW5kIHRoZSBjb2RlcyBhcmUgaW50ZWdlclxuICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGhcbiAgIGluY3JlYXNlcy4gIEZvciB0aGUgZGVmbGF0ZSBmb3JtYXQsIHRoZXNlIGJpdHMgYXJlIHN0b3JlZCBiYWNrd2FyZHNcbiAgIGZyb20gdGhlaXIgbW9yZSBuYXR1cmFsIGludGVnZXIgaW5jcmVtZW50IG9yZGVyaW5nLCBhbmQgc28gd2hlbiB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzXG4gICBhcmUgaW5jcmVtZW50ZWQgYmFja3dhcmRzLlxuXG4gICBUaGlzIHJvdXRpbmUgYXNzdW1lcywgYnV0IGRvZXMgbm90IGNoZWNrLCB0aGF0IGFsbCBvZiB0aGUgZW50cmllcyBpblxuICAgbGVuc1tdIGFyZSBpbiB0aGUgcmFuZ2UgMC4uTUFYQklUUy4gIFRoZSBjYWxsZXIgbXVzdCBhc3N1cmUgdGhpcy5cbiAgIDEuLk1BWEJJVFMgaXMgaW50ZXJwcmV0ZWQgYXMgdGhhdCBjb2RlIGxlbmd0aC4gIHplcm8gbWVhbnMgdGhhdCB0aGF0XG4gICBzeW1ib2wgZG9lcyBub3Qgb2NjdXIgaW4gdGhpcyBjb2RlLlxuXG4gICBUaGUgY29kZXMgYXJlIHNvcnRlZCBieSBjb21wdXRpbmcgYSBjb3VudCBvZiBjb2RlcyBmb3IgZWFjaCBsZW5ndGgsXG4gICBjcmVhdGluZyBmcm9tIHRoYXQgYSB0YWJsZSBvZiBzdGFydGluZyBpbmRpY2VzIGZvciBlYWNoIGxlbmd0aCBpbiB0aGVcbiAgIHNvcnRlZCB0YWJsZSwgYW5kIHRoZW4gZW50ZXJpbmcgdGhlIHN5bWJvbHMgaW4gb3JkZXIgaW4gdGhlIHNvcnRlZFxuICAgdGFibGUuICBUaGUgc29ydGVkIHRhYmxlIGlzIHdvcmtbXSwgd2l0aCB0aGF0IHNwYWNlIGJlaW5nIHByb3ZpZGVkIGJ5XG4gICB0aGUgY2FsbGVyLlxuXG4gICBUaGUgbGVuZ3RoIGNvdW50cyBhcmUgdXNlZCBmb3Igb3RoZXIgcHVycG9zZXMgYXMgd2VsbCwgaS5lLiBmaW5kaW5nXG4gICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnlcbiAgIGNvZGVzIGF0IGFsbCwgY2hlY2tpbmcgZm9yIGEgdmFsaWQgc2V0IG9mIGxlbmd0aHMsIGFuZCBsb29raW5nIGFoZWFkXG4gICBhdCBsZW5ndGggY291bnRzIHRvIGRldGVybWluZSBzdWItdGFibGUgc2l6ZXMgd2hlbiBidWlsZGluZyB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcy5cbiAgICovXG5cbiAgLyogYWNjdW11bGF0ZSBsZW5ndGhzIGZvciBjb2RlcyAoYXNzdW1lcyBsZW5zW10gYWxsIGluIDAuLk1BWEJJVFMpICovXG4gIGZvciAobGVuID0gMDsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgY291bnRbbGVuXSA9IDA7XG4gIH1cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBjb3VudFtsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrO1xuICB9XG5cbiAgLyogYm91bmQgY29kZSBsZW5ndGhzLCBmb3JjZSByb290IHRvIGJlIHdpdGhpbiBjb2RlIGxlbmd0aHMgKi9cbiAgcm9vdCA9IGJpdHM7XG4gIGZvciAobWF4ID0gTUFYQklUUzsgbWF4ID49IDE7IG1heC0tKSB7XG4gICAgaWYgKGNvdW50W21heF0gIT09IDApIHsgYnJlYWs7IH1cbiAgfVxuICBpZiAocm9vdCA+IG1heCkge1xuICAgIHJvb3QgPSBtYXg7XG4gIH1cbiAgaWYgKG1heCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgIC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi9cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7ICAvL2hlcmUub3AgPSAodmFyIGNoYXIpNjQ7ICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxOyAgIC8vaGVyZS5iaXRzID0gKHZhciBjaGFyKTE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG5cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7XG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTtcbiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG4gICAgb3B0cy5iaXRzID0gMTtcbiAgICByZXR1cm4gMDsgICAgIC8qIG5vIHN5bWJvbHMsIGJ1dCB3YWl0IGZvciBkZWNvZGluZyB0byByZXBvcnQgZXJyb3IgKi9cbiAgfVxuICBmb3IgKG1pbiA9IDE7IG1pbiA8IG1heDsgbWluKyspIHtcbiAgICBpZiAoY291bnRbbWluXSAhPT0gMCkgeyBicmVhazsgfVxuICB9XG4gIGlmIChyb290IDwgbWluKSB7XG4gICAgcm9vdCA9IG1pbjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBhbiBvdmVyLXN1YnNjcmliZWQgb3IgaW5jb21wbGV0ZSBzZXQgb2YgbGVuZ3RocyAqL1xuICBsZWZ0ID0gMTtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHtcbiAgICBsZWZ0IDw8PSAxO1xuICAgIGxlZnQgLT0gY291bnRbbGVuXTtcbiAgICBpZiAobGVmdCA8IDApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi9cbiAgfVxuICBpZiAobGVmdCA+IDAgJiYgKHR5cGUgPT09IENPREVTIHx8IG1heCAhPT0gMSkpIHtcbiAgICByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgIC8qIGluY29tcGxldGUgc2V0ICovXG4gIH1cblxuICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqL1xuICBvZmZzWzFdID0gMDtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPCBNQVhCSVRTOyBsZW4rKykge1xuICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dO1xuICB9XG5cbiAgLyogc29ydCBzeW1ib2xzIGJ5IGxlbmd0aCwgYnkgc3ltYm9sIG9yZGVyIHdpdGhpbiBlYWNoIGxlbmd0aCAqL1xuICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykge1xuICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7XG4gICAgICB3b3JrW29mZnNbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rK10gPSBzeW07XG4gICAgfVxuICB9XG5cbiAgLypcbiAgIENyZWF0ZSBhbmQgZmlsbCBpbiBkZWNvZGluZyB0YWJsZXMuICBJbiB0aGlzIGxvb3AsIHRoZSB0YWJsZSBiZWluZ1xuICAgZmlsbGVkIGlzIGF0IG5leHQgYW5kIGhhcyBjdXJyIGluZGV4IGJpdHMuICBUaGUgY29kZSBiZWluZyB1c2VkIGlzIGh1ZmZcbiAgIHdpdGggbGVuZ3RoIGxlbi4gIFRoYXQgY29kZSBpcyBjb252ZXJ0ZWQgdG8gYW4gaW5kZXggYnkgZHJvcHBpbmcgZHJvcFxuICAgYml0cyBvZmYgb2YgdGhlIGJvdHRvbS4gIEZvciBjb2RlcyB3aGVyZSBsZW4gaXMgbGVzcyB0aGFuIGRyb3AgKyBjdXJyLFxuICAgdGhvc2UgdG9wIGRyb3AgKyBjdXJyIC0gbGVuIGJpdHMgYXJlIGluY3JlbWVudGVkIHRocm91Z2ggYWxsIHZhbHVlcyB0b1xuICAgZmlsbCB0aGUgdGFibGUgd2l0aCByZXBsaWNhdGVkIGVudHJpZXMuXG5cbiAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHNcbiAgIHJvb3QsIHN1Yi10YWJsZXMgYXJlIGNyZWF0ZWQgcG9pbnRlZCB0byBieSB0aGUgcm9vdCBlbnRyeSB3aXRoIGFuIGluZGV4XG4gICBvZiB0aGUgbG93IHJvb3QgYml0cyBvZiBodWZmLiAgVGhpcyBpcyBzYXZlZCBpbiBsb3cgdG8gY2hlY2sgZm9yIHdoZW4gYVxuICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzXG4gICBiZWluZyBmaWxsZWQsIGFuZCBkcm9wIGlzIHJvb3Qgd2hlbiBzdWItdGFibGVzIGFyZSBiZWluZyBmaWxsZWQuXG5cbiAgIFdoZW4gYSBuZXcgc3ViLXRhYmxlIGlzIG5lZWRlZCwgaXQgaXMgbmVjZXNzYXJ5IHRvIGxvb2sgYWhlYWQgaW4gdGhlXG4gICBjb2RlIGxlbmd0aHMgdG8gZGV0ZXJtaW5lIHdoYXQgc2l6ZSBzdWItdGFibGUgaXMgbmVlZGVkLiAgVGhlIGxlbmd0aFxuICAgY291bnRzIGFyZSB1c2VkIGZvciB0aGlzLCBhbmQgc28gY291bnRbXSBpcyBkZWNyZW1lbnRlZCBhcyBjb2RlcyBhcmVcbiAgIGVudGVyZWQgaW4gdGhlIHRhYmxlcy5cblxuICAgdXNlZCBrZWVwcyB0cmFjayBvZiBob3cgbWFueSB0YWJsZSBlbnRyaWVzIGhhdmUgYmVlbiBhbGxvY2F0ZWQgZnJvbSB0aGVcbiAgIHByb3ZpZGVkICp0YWJsZSBzcGFjZS4gIEl0IGlzIGNoZWNrZWQgZm9yIExFTlMgYW5kIERJU1QgdGFibGVzIGFnYWluc3RcbiAgIHRoZSBjb25zdGFudHMgRU5PVUdIX0xFTlMgYW5kIEVOT1VHSF9ESVNUUyB0byBndWFyZCBhZ2FpbnN0IGNoYW5nZXMgaW5cbiAgIHRoZSBpbml0aWFsIHJvb3QgdGFibGUgc2l6ZSBjb25zdGFudHMuICBTZWUgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICBzeW0gaW5jcmVtZW50cyB0aHJvdWdoIGFsbCBzeW1ib2xzLCBhbmQgdGhlIGxvb3AgdGVybWluYXRlcyB3aGVuXG4gICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzXG4gICByb3V0aW5lIHBlcm1pdHMgaW5jb21wbGV0ZSBjb2Rlcywgc28gYW5vdGhlciBsb29wIGFmdGVyIHRoaXMgb25lIGZpbGxzXG4gICBpbiB0aGUgcmVzdCBvZiB0aGUgZGVjb2RpbmcgdGFibGVzIHdpdGggaW52YWxpZCBjb2RlIG1hcmtlcnMuXG4gICAqL1xuXG4gIC8qIHNldCB1cCBmb3IgY29kZSB0eXBlICovXG4gIC8vIHBvb3IgbWFuIG9wdGltaXphdGlvbiAtIHVzZSBpZi1lbHNlIGluc3RlYWQgb2Ygc3dpdGNoLFxuICAvLyB0byBhdm9pZCBkZW9wdHMgaW4gb2xkIHY4XG4gIGlmICh0eXBlID09PSBDT0RFUykge1xuICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqL1xuICAgIGVuZCA9IDE5O1xuXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTEVOUykge1xuICAgIGJhc2UgPSBsYmFzZTtcbiAgICBiYXNlX2luZGV4IC09IDI1NztcbiAgICBleHRyYSA9IGxleHQ7XG4gICAgZXh0cmFfaW5kZXggLT0gMjU3O1xuICAgIGVuZCA9IDI1NjtcblxuICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgLyogRElTVFMgKi9cbiAgICBiYXNlID0gZGJhc2U7XG4gICAgZXh0cmEgPSBkZXh0O1xuICAgIGVuZCA9IC0xO1xuICB9XG5cbiAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovXG4gIGh1ZmYgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlICovXG4gIHN5bSA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIHN5bWJvbCAqL1xuICBsZW4gPSBtaW47ICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi9cbiAgbmV4dCA9IHRhYmxlX2luZGV4OyAgICAgICAgICAgICAgLyogY3VycmVudCB0YWJsZSB0byBmaWxsIGluICovXG4gIGN1cnIgPSByb290OyAgICAgICAgICAgICAgICAvKiBjdXJyZW50IHRhYmxlIGluZGV4IGJpdHMgKi9cbiAgZHJvcCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgYml0cyB0byBkcm9wIGZyb20gY29kZSBmb3IgaW5kZXggKi9cbiAgbG93ID0gLTE7ICAgICAgICAgICAgICAgICAgIC8qIHRyaWdnZXIgbmV3IHN1Yi10YWJsZSB3aGVuIGxlbiA+IHJvb3QgKi9cbiAgdXNlZCA9IDEgPDwgcm9vdDsgICAgICAgICAgLyogdXNlIHJvb3QgdGFibGUgZW50cmllcyAqL1xuICBtYXNrID0gdXNlZCAtIDE7ICAgICAgICAgICAgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqL1xuXG4gIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqL1xuICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fFxuICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGk9MDtcbiAgLyogcHJvY2VzcyBhbGwgY29kZXMgYW5kIG1ha2UgdGFibGUgZW50cmllcyAqL1xuICBmb3IgKDs7KSB7XG4gICAgaSsrO1xuICAgIC8qIGNyZWF0ZSB0YWJsZSBlbnRyeSAqL1xuICAgIGhlcmVfYml0cyA9IGxlbiAtIGRyb3A7XG4gICAgaWYgKHdvcmtbc3ltXSA8IGVuZCkge1xuICAgICAgaGVyZV9vcCA9IDA7XG4gICAgICBoZXJlX3ZhbCA9IHdvcmtbc3ltXTtcbiAgICB9XG4gICAgZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7XG4gICAgICBoZXJlX29wID0gZXh0cmFbZXh0cmFfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgICAgaGVyZV92YWwgPSBiYXNlW2Jhc2VfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhlcmVfb3AgPSAzMiArIDY0OyAgICAgICAgIC8qIGVuZCBvZiBibG9jayAqL1xuICAgICAgaGVyZV92YWwgPSAwO1xuICAgIH1cblxuICAgIC8qIHJlcGxpY2F0ZSBmb3IgdGhvc2UgaW5kaWNlcyB3aXRoIGxvdyBsZW4gYml0cyBlcXVhbCB0byBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIGRyb3ApO1xuICAgIGZpbGwgPSAxIDw8IGN1cnI7XG4gICAgbWluID0gZmlsbDsgICAgICAgICAgICAgICAgIC8qIHNhdmUgb2Zmc2V0IHRvIG5leHQgdGFibGUgKi9cbiAgICBkbyB7XG4gICAgICBmaWxsIC09IGluY3I7XG4gICAgICB0YWJsZVtuZXh0ICsgKGh1ZmYgPj4gZHJvcCkgKyBmaWxsXSA9IChoZXJlX2JpdHMgPDwgMjQpIHwgKGhlcmVfb3AgPDwgMTYpIHwgaGVyZV92YWwgfDA7XG4gICAgfSB3aGlsZSAoZmlsbCAhPT0gMCk7XG5cbiAgICAvKiBiYWNrd2FyZHMgaW5jcmVtZW50IHRoZSBsZW4tYml0IGNvZGUgaHVmZiAqL1xuICAgIGluY3IgPSAxIDw8IChsZW4gLSAxKTtcbiAgICB3aGlsZSAoaHVmZiAmIGluY3IpIHtcbiAgICAgIGluY3IgPj49IDE7XG4gICAgfVxuICAgIGlmIChpbmNyICE9PSAwKSB7XG4gICAgICBodWZmICY9IGluY3IgLSAxO1xuICAgICAgaHVmZiArPSBpbmNyO1xuICAgIH0gZWxzZSB7XG4gICAgICBodWZmID0gMDtcbiAgICB9XG5cbiAgICAvKiBnbyB0byBuZXh0IHN5bWJvbCwgdXBkYXRlIGNvdW50LCBsZW4gKi9cbiAgICBzeW0rKztcbiAgICBpZiAoLS1jb3VudFtsZW5dID09PSAwKSB7XG4gICAgICBpZiAobGVuID09PSBtYXgpIHsgYnJlYWs7IH1cbiAgICAgIGxlbiA9IGxlbnNbbGVuc19pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuXG4gICAgLyogY3JlYXRlIG5ldyBzdWItdGFibGUgaWYgbmVlZGVkICovXG4gICAgaWYgKGxlbiA+IHJvb3QgJiYgKGh1ZmYgJiBtYXNrKSAhPT0gbG93KSB7XG4gICAgICAvKiBpZiBmaXJzdCB0aW1lLCB0cmFuc2l0aW9uIHRvIHN1Yi10YWJsZXMgKi9cbiAgICAgIGlmIChkcm9wID09PSAwKSB7XG4gICAgICAgIGRyb3AgPSByb290O1xuICAgICAgfVxuXG4gICAgICAvKiBpbmNyZW1lbnQgcGFzdCBsYXN0IHRhYmxlICovXG4gICAgICBuZXh0ICs9IG1pbjsgICAgICAgICAgICAvKiBoZXJlIG1pbiBpcyAxIDw8IGN1cnIgKi9cblxuICAgICAgLyogZGV0ZXJtaW5lIGxlbmd0aCBvZiBuZXh0IHRhYmxlICovXG4gICAgICBjdXJyID0gbGVuIC0gZHJvcDtcbiAgICAgIGxlZnQgPSAxIDw8IGN1cnI7XG4gICAgICB3aGlsZSAoY3VyciArIGRyb3AgPCBtYXgpIHtcbiAgICAgICAgbGVmdCAtPSBjb3VudFtjdXJyICsgZHJvcF07XG4gICAgICAgIGlmIChsZWZ0IDw9IDApIHsgYnJlYWs7IH1cbiAgICAgICAgY3VycisrO1xuICAgICAgICBsZWZ0IDw8PSAxO1xuICAgICAgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5vdWdoIHNwYWNlICovXG4gICAgICB1c2VkICs9IDEgPDwgY3VycjtcbiAgICAgIGlmICgodHlwZSA9PT0gTEVOUyAmJiB1c2VkID4gRU5PVUdIX0xFTlMpIHx8XG4gICAgICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgLyogcG9pbnQgZW50cnkgaW4gcm9vdCB0YWJsZSB0byBzdWItdGFibGUgKi9cbiAgICAgIGxvdyA9IGh1ZmYgJiBtYXNrO1xuICAgICAgLyp0YWJsZS5vcFtsb3ddID0gY3VycjtcbiAgICAgIHRhYmxlLmJpdHNbbG93XSA9IHJvb3Q7XG4gICAgICB0YWJsZS52YWxbbG93XSA9IG5leHQgLSBvcHRzLnRhYmxlX2luZGV4OyovXG4gICAgICB0YWJsZVtsb3ddID0gKHJvb3QgPDwgMjQpIHwgKGN1cnIgPDwgMTYpIHwgKG5leHQgLSB0YWJsZV9pbmRleCkgfDA7XG4gICAgfVxuICB9XG5cbiAgLyogZmlsbCBpbiByZW1haW5pbmcgdGFibGUgZW50cnkgaWYgY29kZSBpcyBpbmNvbXBsZXRlIChndWFyYW50ZWVkIHRvIGhhdmVcbiAgIGF0IG1vc3Qgb25lIHJlbWFpbmluZyBlbnRyeSwgc2luY2UgaWYgdGhlIGNvZGUgaXMgaW5jb21wbGV0ZSwgdGhlXG4gICBtYXhpbXVtIGNvZGUgbGVuZ3RoIHRoYXQgd2FzIGFsbG93ZWQgdG8gZ2V0IHRoaXMgZmFyIGlzIG9uZSBiaXQpICovXG4gIGlmIChodWZmICE9PSAwKSB7XG4gICAgLy90YWJsZS5vcFtuZXh0ICsgaHVmZl0gPSA2NDsgICAgICAgICAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovXG4gICAgLy90YWJsZS5iaXRzW25leHQgKyBodWZmXSA9IGxlbiAtIGRyb3A7XG4gICAgLy90YWJsZS52YWxbbmV4dCArIGh1ZmZdID0gMDtcbiAgICB0YWJsZVtuZXh0ICsgaHVmZl0gPSAoKGxlbiAtIGRyb3ApIDw8IDI0KSB8ICg2NCA8PCAxNikgfDA7XG4gIH1cblxuICAvKiBzZXQgcmV0dXJuIHBhcmFtZXRlcnMgKi9cbiAgLy9vcHRzLnRhYmxlX2luZGV4ICs9IHVzZWQ7XG4gIG9wdHMuYml0cyA9IHJvb3Q7XG4gIHJldHVybiAwO1xufTtcblxufSx7XCIuLi91dGlscy9jb21tb25cIjozOH1dLDQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICcyJzogICAgJ25lZWQgZGljdGlvbmFyeScsICAgICAvKiBaX05FRURfRElDVCAgICAgICAyICAqL1xuICAnMSc6ICAgICdzdHJlYW0gZW5kJywgICAgICAgICAgLyogWl9TVFJFQU1fRU5EICAgICAgMSAgKi9cbiAgJzAnOiAgICAnJywgICAgICAgICAgICAgICAgICAgIC8qIFpfT0sgICAgICAgICAgICAgIDAgICovXG4gICctMSc6ICAgJ2ZpbGUgZXJyb3InLCAgICAgICAgICAvKiBaX0VSUk5PICAgICAgICAgKC0xKSAqL1xuICAnLTInOiAgICdzdHJlYW0gZXJyb3InLCAgICAgICAgLyogWl9TVFJFQU1fRVJST1IgICgtMikgKi9cbiAgJy0zJzogICAnZGF0YSBlcnJvcicsICAgICAgICAgIC8qIFpfREFUQV9FUlJPUiAgICAoLTMpICovXG4gICctNCc6ICAgJ2luc3VmZmljaWVudCBtZW1vcnknLCAvKiBaX01FTV9FUlJPUiAgICAgKC00KSAqL1xuICAnLTUnOiAgICdidWZmZXIgZXJyb3InLCAgICAgICAgLyogWl9CVUZfRVJST1IgICAgICgtNSkgKi9cbiAgJy02JzogICAnaW5jb21wYXRpYmxlIHZlcnNpb24nIC8qIFpfVkVSU0lPTl9FUlJPUiAoLTYpICovXG59O1xuXG59LHt9XSw0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvY29tbW9uJyk7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8vdmFyIFpfRklMVEVSRUQgICAgICAgICAgPSAxO1xuLy92YXIgWl9IVUZGTUFOX09OTFkgICAgICA9IDI7XG4vL3ZhciBaX1JMRSAgICAgICAgICAgICAgID0gMztcbnZhciBaX0ZJWEVEICAgICAgICAgICAgICAgPSA0O1xuLy92YXIgWl9ERUZBVUxUX1NUUkFURUdZICA9IDA7XG5cbi8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbnZhciBaX0JJTkFSWSAgICAgICAgICAgICAgPSAwO1xudmFyIFpfVEVYVCAgICAgICAgICAgICAgICA9IDE7XG4vL3ZhciBaX0FTQ0lJICAgICAgICAgICAgID0gMTsgLy8gPSBaX1RFWFRcbnZhciBaX1VOS05PV04gICAgICAgICAgICAgPSAyO1xuXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbmZ1bmN0aW9uIHplcm8oYnVmKSB7IHZhciBsZW4gPSBidWYubGVuZ3RoOyB3aGlsZSAoLS1sZW4gPj0gMCkgeyBidWZbbGVuXSA9IDA7IH0gfVxuXG4vLyBGcm9tIHp1dGlsLmhcblxudmFyIFNUT1JFRF9CTE9DSyA9IDA7XG52YXIgU1RBVElDX1RSRUVTID0gMTtcbnZhciBEWU5fVFJFRVMgICAgPSAyO1xuLyogVGhlIHRocmVlIGtpbmRzIG9mIGJsb2NrIHR5cGUgKi9cblxudmFyIE1JTl9NQVRDSCAgICA9IDM7XG52YXIgTUFYX01BVENIICAgID0gMjU4O1xuLyogVGhlIG1pbmltdW0gYW5kIG1heGltdW0gbWF0Y2ggbGVuZ3RocyAqL1xuXG4vLyBGcm9tIGRlZmxhdGUuaFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBJbnRlcm5hbCBjb21wcmVzc2lvbiBzdGF0ZS5cbiAqL1xuXG52YXIgTEVOR1RIX0NPREVTICA9IDI5O1xuLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovXG5cbnZhciBMSVRFUkFMUyAgICAgID0gMjU2O1xuLyogbnVtYmVyIG9mIGxpdGVyYWwgYnl0ZXMgMC4uMjU1ICovXG5cbnZhciBMX0NPREVTICAgICAgID0gTElURVJBTFMgKyAxICsgTEVOR1RIX0NPREVTO1xuLyogbnVtYmVyIG9mIExpdGVyYWwgb3IgTGVuZ3RoIGNvZGVzLCBpbmNsdWRpbmcgdGhlIEVORF9CTE9DSyBjb2RlICovXG5cbnZhciBEX0NPREVTICAgICAgID0gMzA7XG4vKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZXMgKi9cblxudmFyIEJMX0NPREVTICAgICAgPSAxOTtcbi8qIG51bWJlciBvZiBjb2RlcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSBiaXQgbGVuZ3RocyAqL1xuXG52YXIgSEVBUF9TSVpFICAgICA9IDIqTF9DT0RFUyArIDE7XG4vKiBtYXhpbXVtIGhlYXAgc2l6ZSAqL1xuXG52YXIgTUFYX0JJVFMgICAgICA9IDE1O1xuLyogQWxsIGNvZGVzIG11c3Qgbm90IGV4Y2VlZCBNQVhfQklUUyBiaXRzICovXG5cbnZhciBCdWZfc2l6ZSAgICAgID0gMTY7XG4vKiBzaXplIG9mIGJpdCBidWZmZXIgaW4gYmlfYnVmICovXG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb25zdGFudHNcbiAqL1xuXG52YXIgTUFYX0JMX0JJVFMgPSA3O1xuLyogQml0IGxlbmd0aCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JMX0JJVFMgYml0cyAqL1xuXG52YXIgRU5EX0JMT0NLICAgPSAyNTY7XG4vKiBlbmQgb2YgYmxvY2sgbGl0ZXJhbCBjb2RlICovXG5cbnZhciBSRVBfM182ICAgICA9IDE2O1xuLyogcmVwZWF0IHByZXZpb3VzIGJpdCBsZW5ndGggMy02IHRpbWVzICgyIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqL1xuXG52YXIgUkVQWl8zXzEwICAgPSAxNztcbi8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDMtMTAgdGltZXMgICgzIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqL1xuXG52YXIgUkVQWl8xMV8xMzggPSAxODtcbi8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDExLTEzOCB0aW1lcyAgKDcgYml0cyBvZiByZXBlYXQgY291bnQpICovXG5cbnZhciBleHRyYV9sYml0cyA9ICAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBsZW5ndGggY29kZSAqL1xuICBbMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXTtcblxudmFyIGV4dHJhX2RiaXRzID0gICAvKiBleHRyYSBiaXRzIGZvciBlYWNoIGRpc3RhbmNlIGNvZGUgKi9cbiAgWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdO1xuXG52YXIgZXh0cmFfYmxiaXRzID0gIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggYml0IGxlbmd0aCBjb2RlICovXG4gIFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XTtcblxudmFyIGJsX29yZGVyID1cbiAgWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdO1xuLyogVGhlIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMgYXJlIHNlbnQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZ1xuICogcHJvYmFiaWxpdHksIHRvIGF2b2lkIHRyYW5zbWl0dGluZyB0aGUgbGVuZ3RocyBmb3IgdW51c2VkIGJpdCBsZW5ndGggY29kZXMuXG4gKi9cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBMb2NhbCBkYXRhLiBUaGVzZSBhcmUgaW5pdGlhbGl6ZWQgb25seSBvbmNlLlxuICovXG5cbi8vIFdlIHByZS1maWxsIGFycmF5cyB3aXRoIDAgdG8gYXZvaWQgdW5pbml0aWFsaXplZCBnYXBzXG5cbnZhciBESVNUX0NPREVfTEVOID0gNTEyOyAvKiBzZWUgZGVmaW5pdGlvbiBvZiBhcnJheSBkaXN0X2NvZGUgYmVsb3cgKi9cblxuLy8gISEhISBVc2UgZmxhdCBhcnJheSBpbnNkZWFkIG9mIHN0cnVjdHVyZSwgRnJlcSA9IGkqMiwgTGVuID0gaSoyKzFcbnZhciBzdGF0aWNfbHRyZWUgID0gbmV3IEFycmF5KChMX0NPREVTKzIpICogMik7XG56ZXJvKHN0YXRpY19sdHJlZSk7XG4vKiBUaGUgc3RhdGljIGxpdGVyYWwgdHJlZS4gU2luY2UgdGhlIGJpdCBsZW5ndGhzIGFyZSBpbXBvc2VkLCB0aGVyZSBpcyBub1xuICogbmVlZCBmb3IgdGhlIExfQ09ERVMgZXh0cmEgY29kZXMgdXNlZCBkdXJpbmcgaGVhcCBjb25zdHJ1Y3Rpb24uIEhvd2V2ZXJcbiAqIFRoZSBjb2RlcyAyODYgYW5kIDI4NyBhcmUgbmVlZGVkIHRvIGJ1aWxkIGEgY2Fub25pY2FsIHRyZWUgKHNlZSBfdHJfaW5pdFxuICogYmVsb3cpLlxuICovXG5cbnZhciBzdGF0aWNfZHRyZWUgID0gbmV3IEFycmF5KERfQ09ERVMgKiAyKTtcbnplcm8oc3RhdGljX2R0cmVlKTtcbi8qIFRoZSBzdGF0aWMgZGlzdGFuY2UgdHJlZS4gKEFjdHVhbGx5IGEgdHJpdmlhbCB0cmVlIHNpbmNlIGFsbCBjb2RlcyB1c2VcbiAqIDUgYml0cy4pXG4gKi9cblxudmFyIF9kaXN0X2NvZGUgICAgPSBuZXcgQXJyYXkoRElTVF9DT0RFX0xFTik7XG56ZXJvKF9kaXN0X2NvZGUpO1xuLyogRGlzdGFuY2UgY29kZXMuIFRoZSBmaXJzdCAyNTYgdmFsdWVzIGNvcnJlc3BvbmQgdG8gdGhlIGRpc3RhbmNlc1xuICogMyAuLiAyNTgsIHRoZSBsYXN0IDI1NiB2YWx1ZXMgY29ycmVzcG9uZCB0byB0aGUgdG9wIDggYml0cyBvZlxuICogdGhlIDE1IGJpdCBkaXN0YW5jZXMuXG4gKi9cblxudmFyIF9sZW5ndGhfY29kZSAgPSBuZXcgQXJyYXkoTUFYX01BVENILU1JTl9NQVRDSCsxKTtcbnplcm8oX2xlbmd0aF9jb2RlKTtcbi8qIGxlbmd0aCBjb2RlIGZvciBlYWNoIG5vcm1hbGl6ZWQgbWF0Y2ggbGVuZ3RoICgwID09IE1JTl9NQVRDSCkgKi9cblxudmFyIGJhc2VfbGVuZ3RoICAgPSBuZXcgQXJyYXkoTEVOR1RIX0NPREVTKTtcbnplcm8oYmFzZV9sZW5ndGgpO1xuLyogRmlyc3Qgbm9ybWFsaXplZCBsZW5ndGggZm9yIGVhY2ggY29kZSAoMCA9IE1JTl9NQVRDSCkgKi9cblxudmFyIGJhc2VfZGlzdCAgICAgPSBuZXcgQXJyYXkoRF9DT0RFUyk7XG56ZXJvKGJhc2VfZGlzdCk7XG4vKiBGaXJzdCBub3JtYWxpemVkIGRpc3RhbmNlIGZvciBlYWNoIGNvZGUgKDAgPSBkaXN0YW5jZSBvZiAxKSAqL1xuXG5cbnZhciBTdGF0aWNUcmVlRGVzYyA9IGZ1bmN0aW9uIChzdGF0aWNfdHJlZSwgZXh0cmFfYml0cywgZXh0cmFfYmFzZSwgZWxlbXMsIG1heF9sZW5ndGgpIHtcblxuICB0aGlzLnN0YXRpY190cmVlICA9IHN0YXRpY190cmVlOyAgLyogc3RhdGljIHRyZWUgb3IgTlVMTCAqL1xuICB0aGlzLmV4dHJhX2JpdHMgICA9IGV4dHJhX2JpdHM7ICAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBjb2RlIG9yIE5VTEwgKi9cbiAgdGhpcy5leHRyYV9iYXNlICAgPSBleHRyYV9iYXNlOyAgIC8qIGJhc2UgaW5kZXggZm9yIGV4dHJhX2JpdHMgKi9cbiAgdGhpcy5lbGVtcyAgICAgICAgPSBlbGVtczsgICAgICAgIC8qIG1heCBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIHRyZWUgKi9cbiAgdGhpcy5tYXhfbGVuZ3RoICAgPSBtYXhfbGVuZ3RoOyAgIC8qIG1heCBiaXQgbGVuZ3RoIGZvciB0aGUgY29kZXMgKi9cblxuICAvLyBzaG93IGlmIGBzdGF0aWNfdHJlZWAgaGFzIGRhdGEgb3IgZHVtbXkgLSBuZWVkZWQgZm9yIG1vbm9tb3JwaGljIG9iamVjdHNcbiAgdGhpcy5oYXNfc3RyZWUgICAgPSBzdGF0aWNfdHJlZSAmJiBzdGF0aWNfdHJlZS5sZW5ndGg7XG59O1xuXG5cbnZhciBzdGF0aWNfbF9kZXNjO1xudmFyIHN0YXRpY19kX2Rlc2M7XG52YXIgc3RhdGljX2JsX2Rlc2M7XG5cblxudmFyIFRyZWVEZXNjID0gZnVuY3Rpb24oZHluX3RyZWUsIHN0YXRfZGVzYykge1xuICB0aGlzLmR5bl90cmVlID0gZHluX3RyZWU7ICAgICAvKiB0aGUgZHluYW1pYyB0cmVlICovXG4gIHRoaXMubWF4X2NvZGUgPSAwOyAgICAgICAgICAgIC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqL1xuICB0aGlzLnN0YXRfZGVzYyA9IHN0YXRfZGVzYzsgICAvKiB0aGUgY29ycmVzcG9uZGluZyBzdGF0aWMgdHJlZSAqL1xufTtcblxuXG5cbmZ1bmN0aW9uIGRfY29kZShkaXN0KSB7XG4gIHJldHVybiBkaXN0IDwgMjU2ID8gX2Rpc3RfY29kZVtkaXN0XSA6IF9kaXN0X2NvZGVbMjU2ICsgKGRpc3QgPj4+IDcpXTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIE91dHB1dCBhIHNob3J0IExTQiBmaXJzdCBvbiB0aGUgc3RyZWFtLlxuICogSU4gYXNzZXJ0aW9uOiB0aGVyZSBpcyBlbm91Z2ggcm9vbSBpbiBwZW5kaW5nQnVmLlxuICovXG5mdW5jdGlvbiBwdXRfc2hvcnQgKHMsIHcpIHtcbi8vICAgIHB1dF9ieXRlKHMsICh1Y2gpKCh3KSAmIDB4ZmYpKTtcbi8vICAgIHB1dF9ieXRlKHMsICh1Y2gpKCh1c2gpKHcpID4+IDgpKTtcbiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSAodykgJiAweGZmO1xuICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3ID4+PiA4KSAmIDB4ZmY7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIGEgdmFsdWUgb24gYSBnaXZlbiBudW1iZXIgb2YgYml0cy5cbiAqIElOIGFzc2VydGlvbjogbGVuZ3RoIDw9IDE2IGFuZCB2YWx1ZSBmaXRzIGluIGxlbmd0aCBiaXRzLlxuICovXG5mdW5jdGlvbiBzZW5kX2JpdHMocywgdmFsdWUsIGxlbmd0aCkge1xuICBpZiAocy5iaV92YWxpZCA+IChCdWZfc2l6ZSAtIGxlbmd0aCkpIHtcbiAgICBzLmJpX2J1ZiB8PSAodmFsdWUgPDwgcy5iaV92YWxpZCkgJiAweGZmZmY7XG4gICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTtcbiAgICBzLmJpX2J1ZiA9IHZhbHVlID4+IChCdWZfc2l6ZSAtIHMuYmlfdmFsaWQpO1xuICAgIHMuYmlfdmFsaWQgKz0gbGVuZ3RoIC0gQnVmX3NpemU7XG4gIH0gZWxzZSB7XG4gICAgcy5iaV9idWYgfD0gKHZhbHVlIDw8IHMuYmlfdmFsaWQpICYgMHhmZmZmO1xuICAgIHMuYmlfdmFsaWQgKz0gbGVuZ3RoO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc2VuZF9jb2RlKHMsIGMsIHRyZWUpIHtcbiAgc2VuZF9iaXRzKHMsIHRyZWVbYyoyXS8qLkNvZGUqLywgdHJlZVtjKjIgKyAxXS8qLkxlbiovKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFJldmVyc2UgdGhlIGZpcnN0IGxlbiBiaXRzIG9mIGEgY29kZSwgdXNpbmcgc3RyYWlnaHRmb3J3YXJkIGNvZGUgKGEgZmFzdGVyXG4gKiBtZXRob2Qgd291bGQgdXNlIGEgdGFibGUpXG4gKiBJTiBhc3NlcnRpb246IDEgPD0gbGVuIDw9IDE1XG4gKi9cbmZ1bmN0aW9uIGJpX3JldmVyc2UoY29kZSwgbGVuKSB7XG4gIHZhciByZXMgPSAwO1xuICBkbyB7XG4gICAgcmVzIHw9IGNvZGUgJiAxO1xuICAgIGNvZGUgPj4+PSAxO1xuICAgIHJlcyA8PD0gMTtcbiAgfSB3aGlsZSAoLS1sZW4gPiAwKTtcbiAgcmV0dXJuIHJlcyA+Pj4gMTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZsdXNoIHRoZSBiaXQgYnVmZmVyLCBrZWVwaW5nIGF0IG1vc3QgNyBiaXRzIGluIGl0LlxuICovXG5mdW5jdGlvbiBiaV9mbHVzaChzKSB7XG4gIGlmIChzLmJpX3ZhbGlkID09PSAxNikge1xuICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7XG4gICAgcy5iaV9idWYgPSAwO1xuICAgIHMuYmlfdmFsaWQgPSAwO1xuXG4gIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+PSA4KSB7XG4gICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBzLmJpX2J1ZiAmIDB4ZmY7XG4gICAgcy5iaV9idWYgPj49IDg7XG4gICAgcy5iaV92YWxpZCAtPSA4O1xuICB9XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb21wdXRlIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGhzIGZvciBhIHRyZWUgYW5kIHVwZGF0ZSB0aGUgdG90YWwgYml0IGxlbmd0aFxuICogZm9yIHRoZSBjdXJyZW50IGJsb2NrLlxuICogSU4gYXNzZXJ0aW9uOiB0aGUgZmllbGRzIGZyZXEgYW5kIGRhZCBhcmUgc2V0LCBoZWFwW2hlYXBfbWF4XSBhbmRcbiAqICAgIGFib3ZlIGFyZSB0aGUgdHJlZSBub2RlcyBzb3J0ZWQgYnkgaW5jcmVhc2luZyBmcmVxdWVuY3kuXG4gKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkIGxlbiBpcyBzZXQgdG8gdGhlIG9wdGltYWwgYml0IGxlbmd0aCwgdGhlXG4gKiAgICAgYXJyYXkgYmxfY291bnQgY29udGFpbnMgdGhlIGZyZXF1ZW5jaWVzIGZvciBlYWNoIGJpdCBsZW5ndGguXG4gKiAgICAgVGhlIGxlbmd0aCBvcHRfbGVuIGlzIHVwZGF0ZWQ7IHN0YXRpY19sZW4gaXMgYWxzbyB1cGRhdGVkIGlmIHN0cmVlIGlzXG4gKiAgICAgbm90IG51bGwuXG4gKi9cbmZ1bmN0aW9uIGdlbl9iaXRsZW4ocywgZGVzYylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICB0cmVlX2Rlc2MgKmRlc2M7ICAgIC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi9cbntcbiAgdmFyIHRyZWUgICAgICAgICAgICA9IGRlc2MuZHluX3RyZWU7XG4gIHZhciBtYXhfY29kZSAgICAgICAgPSBkZXNjLm1heF9jb2RlO1xuICB2YXIgc3RyZWUgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7XG4gIHZhciBoYXNfc3RyZWUgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7XG4gIHZhciBleHRyYSAgICAgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iaXRzO1xuICB2YXIgYmFzZSAgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2MuZXh0cmFfYmFzZTtcbiAgdmFyIG1heF9sZW5ndGggICAgICA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7XG4gIHZhciBoOyAgICAgICAgICAgICAgLyogaGVhcCBpbmRleCAqL1xuICB2YXIgbiwgbTsgICAgICAgICAgIC8qIGl0ZXJhdGUgb3ZlciB0aGUgdHJlZSBlbGVtZW50cyAqL1xuICB2YXIgYml0czsgICAgICAgICAgIC8qIGJpdCBsZW5ndGggKi9cbiAgdmFyIHhiaXRzOyAgICAgICAgICAvKiBleHRyYSBiaXRzICovXG4gIHZhciBmOyAgICAgICAgICAgICAgLyogZnJlcXVlbmN5ICovXG4gIHZhciBvdmVyZmxvdyA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIHdpdGggYml0IGxlbmd0aCB0b28gbGFyZ2UgKi9cblxuICBmb3IgKGJpdHMgPSAwOyBiaXRzIDw9IE1BWF9CSVRTOyBiaXRzKyspIHtcbiAgICBzLmJsX2NvdW50W2JpdHNdID0gMDtcbiAgfVxuXG4gIC8qIEluIGEgZmlyc3QgcGFzcywgY29tcHV0ZSB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RocyAod2hpY2ggbWF5XG4gICAqIG92ZXJmbG93IGluIHRoZSBjYXNlIG9mIHRoZSBiaXQgbGVuZ3RoIHRyZWUpLlxuICAgKi9cbiAgdHJlZVtzLmhlYXBbcy5oZWFwX21heF0qMiArIDFdLyouTGVuKi8gPSAwOyAvKiByb290IG9mIHRoZSBoZWFwICovXG5cbiAgZm9yIChoID0gcy5oZWFwX21heCsxOyBoIDwgSEVBUF9TSVpFOyBoKyspIHtcbiAgICBuID0gcy5oZWFwW2hdO1xuICAgIGJpdHMgPSB0cmVlW3RyZWVbbioyICsxXS8qLkRhZCovICogMiArIDFdLyouTGVuKi8gKyAxO1xuICAgIGlmIChiaXRzID4gbWF4X2xlbmd0aCkge1xuICAgICAgYml0cyA9IG1heF9sZW5ndGg7XG4gICAgICBvdmVyZmxvdysrO1xuICAgIH1cbiAgICB0cmVlW24qMiArIDFdLyouTGVuKi8gPSBiaXRzO1xuICAgIC8qIFdlIG92ZXJ3cml0ZSB0cmVlW25dLkRhZCB3aGljaCBpcyBubyBsb25nZXIgbmVlZGVkICovXG5cbiAgICBpZiAobiA+IG1heF9jb2RlKSB7IGNvbnRpbnVlOyB9IC8qIG5vdCBhIGxlYWYgbm9kZSAqL1xuXG4gICAgcy5ibF9jb3VudFtiaXRzXSsrO1xuICAgIHhiaXRzID0gMDtcbiAgICBpZiAobiA+PSBiYXNlKSB7XG4gICAgICB4Yml0cyA9IGV4dHJhW24tYmFzZV07XG4gICAgfVxuICAgIGYgPSB0cmVlW24gKiAyXS8qLkZyZXEqLztcbiAgICBzLm9wdF9sZW4gKz0gZiAqIChiaXRzICsgeGJpdHMpO1xuICAgIGlmIChoYXNfc3RyZWUpIHtcbiAgICAgIHMuc3RhdGljX2xlbiArPSBmICogKHN0cmVlW24qMiArIDFdLyouTGVuKi8gKyB4Yml0cyk7XG4gICAgfVxuICB9XG4gIGlmIChvdmVyZmxvdyA9PT0gMCkgeyByZXR1cm47IH1cblxuICAvLyBUcmFjZSgoc3RkZXJyLFwiXFxuYml0IGxlbmd0aCBvdmVyZmxvd1xcblwiKSk7XG4gIC8qIFRoaXMgaGFwcGVucyBmb3IgZXhhbXBsZSBvbiBvYmoyIGFuZCBwaWMgb2YgdGhlIENhbGdhcnkgY29ycHVzICovXG5cbiAgLyogRmluZCB0aGUgZmlyc3QgYml0IGxlbmd0aCB3aGljaCBjb3VsZCBpbmNyZWFzZTogKi9cbiAgZG8ge1xuICAgIGJpdHMgPSBtYXhfbGVuZ3RoLTE7XG4gICAgd2hpbGUgKHMuYmxfY291bnRbYml0c10gPT09IDApIHsgYml0cy0tOyB9XG4gICAgcy5ibF9jb3VudFtiaXRzXS0tOyAgICAgIC8qIG1vdmUgb25lIGxlYWYgZG93biB0aGUgdHJlZSAqL1xuICAgIHMuYmxfY291bnRbYml0cysxXSArPSAyOyAvKiBtb3ZlIG9uZSBvdmVyZmxvdyBpdGVtIGFzIGl0cyBicm90aGVyICovXG4gICAgcy5ibF9jb3VudFttYXhfbGVuZ3RoXS0tO1xuICAgIC8qIFRoZSBicm90aGVyIG9mIHRoZSBvdmVyZmxvdyBpdGVtIGFsc28gbW92ZXMgb25lIHN0ZXAgdXAsXG4gICAgICogYnV0IHRoaXMgZG9lcyBub3QgYWZmZWN0IGJsX2NvdW50W21heF9sZW5ndGhdXG4gICAgICovXG4gICAgb3ZlcmZsb3cgLT0gMjtcbiAgfSB3aGlsZSAob3ZlcmZsb3cgPiAwKTtcblxuICAvKiBOb3cgcmVjb21wdXRlIGFsbCBiaXQgbGVuZ3Rocywgc2Nhbm5pbmcgaW4gaW5jcmVhc2luZyBmcmVxdWVuY3kuXG4gICAqIGggaXMgc3RpbGwgZXF1YWwgdG8gSEVBUF9TSVpFLiAoSXQgaXMgc2ltcGxlciB0byByZWNvbnN0cnVjdCBhbGxcbiAgICogbGVuZ3RocyBpbnN0ZWFkIG9mIGZpeGluZyBvbmx5IHRoZSB3cm9uZyBvbmVzLiBUaGlzIGlkZWEgaXMgdGFrZW5cbiAgICogZnJvbSAnYXInIHdyaXR0ZW4gYnkgSGFydWhpa28gT2t1bXVyYS4pXG4gICAqL1xuICBmb3IgKGJpdHMgPSBtYXhfbGVuZ3RoOyBiaXRzICE9PSAwOyBiaXRzLS0pIHtcbiAgICBuID0gcy5ibF9jb3VudFtiaXRzXTtcbiAgICB3aGlsZSAobiAhPT0gMCkge1xuICAgICAgbSA9IHMuaGVhcFstLWhdO1xuICAgICAgaWYgKG0gPiBtYXhfY29kZSkgeyBjb250aW51ZTsgfVxuICAgICAgaWYgKHRyZWVbbSoyICsgMV0vKi5MZW4qLyAhPT0gYml0cykge1xuICAgICAgICAvLyBUcmFjZSgoc3RkZXJyLFwiY29kZSAlZCBiaXRzICVkLT4lZFxcblwiLCBtLCB0cmVlW21dLkxlbiwgYml0cykpO1xuICAgICAgICBzLm9wdF9sZW4gKz0gKGJpdHMgLSB0cmVlW20qMiArIDFdLyouTGVuKi8pKnRyZWVbbSoyXS8qLkZyZXEqLztcbiAgICAgICAgdHJlZVttKjIgKyAxXS8qLkxlbiovID0gYml0cztcbiAgICAgIH1cbiAgICAgIG4tLTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEdlbmVyYXRlIHRoZSBjb2RlcyBmb3IgYSBnaXZlbiB0cmVlIGFuZCBiaXQgY291bnRzICh3aGljaCBuZWVkIG5vdCBiZVxuICogb3B0aW1hbCkuXG4gKiBJTiBhc3NlcnRpb246IHRoZSBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgYml0IGxlbmd0aCBzdGF0aXN0aWNzIGZvclxuICogdGhlIGdpdmVuIHRyZWUgYW5kIHRoZSBmaWVsZCBsZW4gaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cy5cbiAqIE9VVCBhc3NlcnRpb246IHRoZSBmaWVsZCBjb2RlIGlzIHNldCBmb3IgYWxsIHRyZWUgZWxlbWVudHMgb2Ygbm9uXG4gKiAgICAgemVybyBjb2RlIGxlbmd0aC5cbiAqL1xuZnVuY3Rpb24gZ2VuX2NvZGVzKHRyZWUsIG1heF9jb2RlLCBibF9jb3VudClcbi8vICAgIGN0X2RhdGEgKnRyZWU7ICAgICAgICAgICAgIC8qIHRoZSB0cmVlIHRvIGRlY29yYXRlICovXG4vLyAgICBpbnQgbWF4X2NvZGU7ICAgICAgICAgICAgICAvKiBsYXJnZXN0IGNvZGUgd2l0aCBub24gemVybyBmcmVxdWVuY3kgKi9cbi8vICAgIHVzaGYgKmJsX2NvdW50OyAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlcyBhdCBlYWNoIGJpdCBsZW5ndGggKi9cbntcbiAgdmFyIG5leHRfY29kZSA9IG5ldyBBcnJheShNQVhfQklUUysxKTsgLyogbmV4dCBjb2RlIHZhbHVlIGZvciBlYWNoIGJpdCBsZW5ndGggKi9cbiAgdmFyIGNvZGUgPSAwOyAgICAgICAgICAgICAgLyogcnVubmluZyBjb2RlIHZhbHVlICovXG4gIHZhciBiaXRzOyAgICAgICAgICAgICAgICAgIC8qIGJpdCBpbmRleCAqL1xuICB2YXIgbjsgICAgICAgICAgICAgICAgICAgICAvKiBjb2RlIGluZGV4ICovXG5cbiAgLyogVGhlIGRpc3RyaWJ1dGlvbiBjb3VudHMgYXJlIGZpcnN0IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNvZGUgdmFsdWVzXG4gICAqIHdpdGhvdXQgYml0IHJldmVyc2FsLlxuICAgKi9cbiAgZm9yIChiaXRzID0gMTsgYml0cyA8PSBNQVhfQklUUzsgYml0cysrKSB7XG4gICAgbmV4dF9jb2RlW2JpdHNdID0gY29kZSA9IChjb2RlICsgYmxfY291bnRbYml0cy0xXSkgPDwgMTtcbiAgfVxuICAvKiBDaGVjayB0aGF0IHRoZSBiaXQgY291bnRzIGluIGJsX2NvdW50IGFyZSBjb25zaXN0ZW50LiBUaGUgbGFzdCBjb2RlXG4gICAqIG11c3QgYmUgYWxsIG9uZXMuXG4gICAqL1xuICAvL0Fzc2VydCAoY29kZSArIGJsX2NvdW50W01BWF9CSVRTXS0xID09ICgxPDxNQVhfQklUUyktMSxcbiAgLy8gICAgICAgIFwiaW5jb25zaXN0ZW50IGJpdCBjb3VudHNcIik7XG4gIC8vVHJhY2V2KChzdGRlcnIsXCJcXG5nZW5fY29kZXM6IG1heF9jb2RlICVkIFwiLCBtYXhfY29kZSkpO1xuXG4gIGZvciAobiA9IDA7ICBuIDw9IG1heF9jb2RlOyBuKyspIHtcbiAgICB2YXIgbGVuID0gdHJlZVtuKjIgKyAxXS8qLkxlbiovO1xuICAgIGlmIChsZW4gPT09IDApIHsgY29udGludWU7IH1cbiAgICAvKiBOb3cgcmV2ZXJzZSB0aGUgYml0cyAqL1xuICAgIHRyZWVbbioyXS8qLkNvZGUqLyA9IGJpX3JldmVyc2UobmV4dF9jb2RlW2xlbl0rKywgbGVuKTtcblxuICAgIC8vVHJhY2Vjdih0cmVlICE9IHN0YXRpY19sdHJlZSwgKHN0ZGVycixcIlxcbm4gJTNkICVjIGwgJTJkIGMgJTR4ICgleCkgXCIsXG4gICAgLy8gICAgIG4sIChpc2dyYXBoKG4pID8gbiA6ICcgJyksIGxlbiwgdHJlZVtuXS5Db2RlLCBuZXh0X2NvZGVbbGVuXS0xKSk7XG4gIH1cbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemUgdGhlIHZhcmlvdXMgJ2NvbnN0YW50JyB0YWJsZXMuXG4gKi9cbmZ1bmN0aW9uIHRyX3N0YXRpY19pbml0KCkge1xuICB2YXIgbjsgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgdHJlZSBlbGVtZW50cyAqL1xuICB2YXIgYml0czsgICAgIC8qIGJpdCBjb3VudGVyICovXG4gIHZhciBsZW5ndGg7ICAgLyogbGVuZ3RoIHZhbHVlICovXG4gIHZhciBjb2RlOyAgICAgLyogY29kZSB2YWx1ZSAqL1xuICB2YXIgZGlzdDsgICAgIC8qIGRpc3RhbmNlIGluZGV4ICovXG4gIHZhciBibF9jb3VudCA9IG5ldyBBcnJheShNQVhfQklUUysxKTtcbiAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCBmb3IgYW4gb3B0aW1hbCB0cmVlICovXG5cbiAgLy8gZG8gY2hlY2sgaW4gX3RyX2luaXQoKVxuICAvL2lmIChzdGF0aWNfaW5pdF9kb25lKSByZXR1cm47XG5cbiAgLyogRm9yIHNvbWUgZW1iZWRkZWQgdGFyZ2V0cywgZ2xvYmFsIHZhcmlhYmxlcyBhcmUgbm90IGluaXRpYWxpemVkOiAqL1xuLyojaWZkZWYgTk9fSU5JVF9HTE9CQUxfUE9JTlRFUlNcbiAgc3RhdGljX2xfZGVzYy5zdGF0aWNfdHJlZSA9IHN0YXRpY19sdHJlZTtcbiAgc3RhdGljX2xfZGVzYy5leHRyYV9iaXRzID0gZXh0cmFfbGJpdHM7XG4gIHN0YXRpY19kX2Rlc2Muc3RhdGljX3RyZWUgPSBzdGF0aWNfZHRyZWU7XG4gIHN0YXRpY19kX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2RiaXRzO1xuICBzdGF0aWNfYmxfZGVzYy5leHRyYV9iaXRzID0gZXh0cmFfYmxiaXRzO1xuI2VuZGlmKi9cblxuICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGxlbmd0aCAoMC4uMjU1KSAtPiBsZW5ndGggY29kZSAoMC4uMjgpICovXG4gIGxlbmd0aCA9IDA7XG4gIGZvciAoY29kZSA9IDA7IGNvZGUgPCBMRU5HVEhfQ09ERVMtMTsgY29kZSsrKSB7XG4gICAgYmFzZV9sZW5ndGhbY29kZV0gPSBsZW5ndGg7XG4gICAgZm9yIChuID0gMDsgbiA8ICgxPDxleHRyYV9sYml0c1tjb2RlXSk7IG4rKykge1xuICAgICAgX2xlbmd0aF9jb2RlW2xlbmd0aCsrXSA9IGNvZGU7XG4gICAgfVxuICB9XG4gIC8vQXNzZXJ0IChsZW5ndGggPT0gMjU2LCBcInRyX3N0YXRpY19pbml0OiBsZW5ndGggIT0gMjU2XCIpO1xuICAvKiBOb3RlIHRoYXQgdGhlIGxlbmd0aCAyNTUgKG1hdGNoIGxlbmd0aCAyNTgpIGNhbiBiZSByZXByZXNlbnRlZFxuICAgKiBpbiB0d28gZGlmZmVyZW50IHdheXM6IGNvZGUgMjg0ICsgNSBiaXRzIG9yIGNvZGUgMjg1LCBzbyB3ZVxuICAgKiBvdmVyd3JpdGUgbGVuZ3RoX2NvZGVbMjU1XSB0byB1c2UgdGhlIGJlc3QgZW5jb2Rpbmc6XG4gICAqL1xuICBfbGVuZ3RoX2NvZGVbbGVuZ3RoLTFdID0gY29kZTtcblxuICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGRpc3QgKDAuLjMySykgLT4gZGlzdCBjb2RlICgwLi4yOSkgKi9cbiAgZGlzdCA9IDA7XG4gIGZvciAoY29kZSA9IDAgOyBjb2RlIDwgMTY7IGNvZGUrKykge1xuICAgIGJhc2VfZGlzdFtjb2RlXSA9IGRpc3Q7XG4gICAgZm9yIChuID0gMDsgbiA8ICgxPDxleHRyYV9kYml0c1tjb2RlXSk7IG4rKykge1xuICAgICAgX2Rpc3RfY29kZVtkaXN0KytdID0gY29kZTtcbiAgICB9XG4gIH1cbiAgLy9Bc3NlcnQgKGRpc3QgPT0gMjU2LCBcInRyX3N0YXRpY19pbml0OiBkaXN0ICE9IDI1NlwiKTtcbiAgZGlzdCA+Pj0gNzsgLyogZnJvbSBub3cgb24sIGFsbCBkaXN0YW5jZXMgYXJlIGRpdmlkZWQgYnkgMTI4ICovXG4gIGZvciAoOyBjb2RlIDwgRF9DT0RFUzsgY29kZSsrKSB7XG4gICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdCA8PCA3O1xuICAgIGZvciAobiA9IDA7IG4gPCAoMTw8KGV4dHJhX2RiaXRzW2NvZGVdLTcpKTsgbisrKSB7XG4gICAgICBfZGlzdF9jb2RlWzI1NiArIGRpc3QrK10gPSBjb2RlO1xuICAgIH1cbiAgfVxuICAvL0Fzc2VydCAoZGlzdCA9PSAyNTYsIFwidHJfc3RhdGljX2luaXQ6IDI1NitkaXN0ICE9IDUxMlwiKTtcblxuICAvKiBDb25zdHJ1Y3QgdGhlIGNvZGVzIG9mIHRoZSBzdGF0aWMgbGl0ZXJhbCB0cmVlICovXG4gIGZvciAoYml0cyA9IDA7IGJpdHMgPD0gTUFYX0JJVFM7IGJpdHMrKykge1xuICAgIGJsX2NvdW50W2JpdHNdID0gMDtcbiAgfVxuXG4gIG4gPSAwO1xuICB3aGlsZSAobiA8PSAxNDMpIHtcbiAgICBzdGF0aWNfbHRyZWVbbioyICsgMV0vKi5MZW4qLyA9IDg7XG4gICAgbisrO1xuICAgIGJsX2NvdW50WzhdKys7XG4gIH1cbiAgd2hpbGUgKG4gPD0gMjU1KSB7XG4gICAgc3RhdGljX2x0cmVlW24qMiArIDFdLyouTGVuKi8gPSA5O1xuICAgIG4rKztcbiAgICBibF9jb3VudFs5XSsrO1xuICB9XG4gIHdoaWxlIChuIDw9IDI3OSkge1xuICAgIHN0YXRpY19sdHJlZVtuKjIgKyAxXS8qLkxlbiovID0gNztcbiAgICBuKys7XG4gICAgYmxfY291bnRbN10rKztcbiAgfVxuICB3aGlsZSAobiA8PSAyODcpIHtcbiAgICBzdGF0aWNfbHRyZWVbbioyICsgMV0vKi5MZW4qLyA9IDg7XG4gICAgbisrO1xuICAgIGJsX2NvdW50WzhdKys7XG4gIH1cbiAgLyogQ29kZXMgMjg2IGFuZCAyODcgZG8gbm90IGV4aXN0LCBidXQgd2UgbXVzdCBpbmNsdWRlIHRoZW0gaW4gdGhlXG4gICAqIHRyZWUgY29uc3RydWN0aW9uIHRvIGdldCBhIGNhbm9uaWNhbCBIdWZmbWFuIHRyZWUgKGxvbmdlc3QgY29kZVxuICAgKiBhbGwgb25lcylcbiAgICovXG4gIGdlbl9jb2RlcyhzdGF0aWNfbHRyZWUsIExfQ09ERVMrMSwgYmxfY291bnQpO1xuXG4gIC8qIFRoZSBzdGF0aWMgZGlzdGFuY2UgdHJlZSBpcyB0cml2aWFsOiAqL1xuICBmb3IgKG4gPSAwOyBuIDwgRF9DT0RFUzsgbisrKSB7XG4gICAgc3RhdGljX2R0cmVlW24qMiArIDFdLyouTGVuKi8gPSA1O1xuICAgIHN0YXRpY19kdHJlZVtuKjJdLyouQ29kZSovID0gYmlfcmV2ZXJzZShuLCA1KTtcbiAgfVxuXG4gIC8vIE5vdyBkYXRhIHJlYWR5IGFuZCB3ZSBjYW4gaW5pdCBzdGF0aWMgdHJlZXNcbiAgc3RhdGljX2xfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfbHRyZWUsIGV4dHJhX2xiaXRzLCBMSVRFUkFMUysxLCBMX0NPREVTLCBNQVhfQklUUyk7XG4gIHN0YXRpY19kX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2Moc3RhdGljX2R0cmVlLCBleHRyYV9kYml0cywgMCwgICAgICAgICAgRF9DT0RFUywgTUFYX0JJVFMpO1xuICBzdGF0aWNfYmxfZGVzYyA9bmV3IFN0YXRpY1RyZWVEZXNjKG5ldyBBcnJheSgwKSwgZXh0cmFfYmxiaXRzLCAwLCAgICAgICAgIEJMX0NPREVTLCBNQVhfQkxfQklUUyk7XG5cbiAgLy9zdGF0aWNfaW5pdF9kb25lID0gdHJ1ZTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemUgYSBuZXcgYmxvY2suXG4gKi9cbmZ1bmN0aW9uIGluaXRfYmxvY2socykge1xuICB2YXIgbjsgLyogaXRlcmF0ZXMgb3ZlciB0cmVlIGVsZW1lbnRzICovXG5cbiAgLyogSW5pdGlhbGl6ZSB0aGUgdHJlZXMuICovXG4gIGZvciAobiA9IDA7IG4gPCBMX0NPREVTOyAgbisrKSB7IHMuZHluX2x0cmVlW24qMl0vKi5GcmVxKi8gPSAwOyB9XG4gIGZvciAobiA9IDA7IG4gPCBEX0NPREVTOyAgbisrKSB7IHMuZHluX2R0cmVlW24qMl0vKi5GcmVxKi8gPSAwOyB9XG4gIGZvciAobiA9IDA7IG4gPCBCTF9DT0RFUzsgbisrKSB7IHMuYmxfdHJlZVtuKjJdLyouRnJlcSovID0gMDsgfVxuXG4gIHMuZHluX2x0cmVlW0VORF9CTE9DSyoyXS8qLkZyZXEqLyA9IDE7XG4gIHMub3B0X2xlbiA9IHMuc3RhdGljX2xlbiA9IDA7XG4gIHMubGFzdF9saXQgPSBzLm1hdGNoZXMgPSAwO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRmx1c2ggdGhlIGJpdCBidWZmZXIgYW5kIGFsaWduIHRoZSBvdXRwdXQgb24gYSBieXRlIGJvdW5kYXJ5XG4gKi9cbmZ1bmN0aW9uIGJpX3dpbmR1cChzKVxue1xuICBpZiAocy5iaV92YWxpZCA+IDgpIHtcbiAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpO1xuICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPiAwKSB7XG4gICAgLy9wdXRfYnl0ZShzLCAoQnl0ZSlzLT5iaV9idWYpO1xuICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWY7XG4gIH1cbiAgcy5iaV9idWYgPSAwO1xuICBzLmJpX3ZhbGlkID0gMDtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5IGEgc3RvcmVkIGJsb2NrLCBzdG9yaW5nIGZpcnN0IHRoZSBsZW5ndGggYW5kIGl0c1xuICogb25lJ3MgY29tcGxlbWVudCBpZiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGNvcHlfYmxvY2socywgYnVmLCBsZW4sIGhlYWRlcilcbi8vRGVmbGF0ZVN0YXRlICpzO1xuLy9jaGFyZiAgICAqYnVmOyAgICAvKiB0aGUgaW5wdXQgZGF0YSAqL1xuLy91bnNpZ25lZCBsZW47ICAgICAvKiBpdHMgbGVuZ3RoICovXG4vL2ludCAgICAgIGhlYWRlcjsgIC8qIHRydWUgaWYgYmxvY2sgaGVhZGVyIG11c3QgYmUgd3JpdHRlbiAqL1xue1xuICBiaV93aW5kdXAocyk7ICAgICAgICAvKiBhbGlnbiBvbiBieXRlIGJvdW5kYXJ5ICovXG5cbiAgaWYgKGhlYWRlcikge1xuICAgIHB1dF9zaG9ydChzLCBsZW4pO1xuICAgIHB1dF9zaG9ydChzLCB+bGVuKTtcbiAgfVxuLy8gIHdoaWxlIChsZW4tLSkge1xuLy8gICAgcHV0X2J5dGUocywgKmJ1ZisrKTtcbi8vICB9XG4gIHV0aWxzLmFycmF5U2V0KHMucGVuZGluZ19idWYsIHMud2luZG93LCBidWYsIGxlbiwgcy5wZW5kaW5nKTtcbiAgcy5wZW5kaW5nICs9IGxlbjtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb21wYXJlcyB0byBzdWJ0cmVlcywgdXNpbmcgdGhlIHRyZWUgZGVwdGggYXMgdGllIGJyZWFrZXIgd2hlblxuICogdGhlIHN1YnRyZWVzIGhhdmUgZXF1YWwgZnJlcXVlbmN5LiBUaGlzIG1pbmltaXplcyB0aGUgd29yc3QgY2FzZSBsZW5ndGguXG4gKi9cbmZ1bmN0aW9uIHNtYWxsZXIodHJlZSwgbiwgbSwgZGVwdGgpIHtcbiAgdmFyIF9uMiA9IG4qMjtcbiAgdmFyIF9tMiA9IG0qMjtcbiAgcmV0dXJuICh0cmVlW19uMl0vKi5GcmVxKi8gPCB0cmVlW19tMl0vKi5GcmVxKi8gfHxcbiAgICAgICAgICh0cmVlW19uMl0vKi5GcmVxKi8gPT09IHRyZWVbX20yXS8qLkZyZXEqLyAmJiBkZXB0aFtuXSA8PSBkZXB0aFttXSkpO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFJlc3RvcmUgdGhlIGhlYXAgcHJvcGVydHkgYnkgbW92aW5nIGRvd24gdGhlIHRyZWUgc3RhcnRpbmcgYXQgbm9kZSBrLFxuICogZXhjaGFuZ2luZyBhIG5vZGUgd2l0aCB0aGUgc21hbGxlc3Qgb2YgaXRzIHR3byBzb25zIGlmIG5lY2Vzc2FyeSwgc3RvcHBpbmdcbiAqIHdoZW4gdGhlIGhlYXAgcHJvcGVydHkgaXMgcmUtZXN0YWJsaXNoZWQgKGVhY2ggZmF0aGVyIHNtYWxsZXIgdGhhbiBpdHNcbiAqIHR3byBzb25zKS5cbiAqL1xuZnVuY3Rpb24gcHFkb3duaGVhcChzLCB0cmVlLCBrKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIGN0X2RhdGEgKnRyZWU7ICAvKiB0aGUgdHJlZSB0byByZXN0b3JlICovXG4vLyAgICBpbnQgazsgICAgICAgICAgICAgICAvKiBub2RlIHRvIG1vdmUgZG93biAqL1xue1xuICB2YXIgdiA9IHMuaGVhcFtrXTtcbiAgdmFyIGogPSBrIDw8IDE7ICAvKiBsZWZ0IHNvbiBvZiBrICovXG4gIHdoaWxlIChqIDw9IHMuaGVhcF9sZW4pIHtcbiAgICAvKiBTZXQgaiB0byB0aGUgc21hbGxlc3Qgb2YgdGhlIHR3byBzb25zOiAqL1xuICAgIGlmIChqIDwgcy5oZWFwX2xlbiAmJlxuICAgICAgc21hbGxlcih0cmVlLCBzLmhlYXBbaisxXSwgcy5oZWFwW2pdLCBzLmRlcHRoKSkge1xuICAgICAgaisrO1xuICAgIH1cbiAgICAvKiBFeGl0IGlmIHYgaXMgc21hbGxlciB0aGFuIGJvdGggc29ucyAqL1xuICAgIGlmIChzbWFsbGVyKHRyZWUsIHYsIHMuaGVhcFtqXSwgcy5kZXB0aCkpIHsgYnJlYWs7IH1cblxuICAgIC8qIEV4Y2hhbmdlIHYgd2l0aCB0aGUgc21hbGxlc3Qgc29uICovXG4gICAgcy5oZWFwW2tdID0gcy5oZWFwW2pdO1xuICAgIGsgPSBqO1xuXG4gICAgLyogQW5kIGNvbnRpbnVlIGRvd24gdGhlIHRyZWUsIHNldHRpbmcgaiB0byB0aGUgbGVmdCBzb24gb2YgayAqL1xuICAgIGogPDw9IDE7XG4gIH1cbiAgcy5oZWFwW2tdID0gdjtcbn1cblxuXG4vLyBpbmxpbmVkIG1hbnVhbGx5XG4vLyB2YXIgU01BTExFU1QgPSAxO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNlbmQgdGhlIGJsb2NrIGRhdGEgY29tcHJlc3NlZCB1c2luZyB0aGUgZ2l2ZW4gSHVmZm1hbiB0cmVlc1xuICovXG5mdW5jdGlvbiBjb21wcmVzc19ibG9jayhzLCBsdHJlZSwgZHRyZWUpXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgY29uc3QgY3RfZGF0YSAqbHRyZWU7IC8qIGxpdGVyYWwgdHJlZSAqL1xuLy8gICAgY29uc3QgY3RfZGF0YSAqZHRyZWU7IC8qIGRpc3RhbmNlIHRyZWUgKi9cbntcbiAgdmFyIGRpc3Q7ICAgICAgICAgICAvKiBkaXN0YW5jZSBvZiBtYXRjaGVkIHN0cmluZyAqL1xuICB2YXIgbGM7ICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCBvciB1bm1hdGNoZWQgY2hhciAoaWYgZGlzdCA9PSAwKSAqL1xuICB2YXIgbHggPSAwOyAgICAgICAgIC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi9cbiAgdmFyIGNvZGU7ICAgICAgICAgICAvKiB0aGUgY29kZSB0byBzZW5kICovXG4gIHZhciBleHRyYTsgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgdG8gc2VuZCAqL1xuXG4gIGlmIChzLmxhc3RfbGl0ICE9PSAwKSB7XG4gICAgZG8ge1xuICAgICAgZGlzdCA9IChzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBseCoyXSA8PCA4KSB8IChzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBseCoyICsgMV0pO1xuICAgICAgbGMgPSBzLnBlbmRpbmdfYnVmW3MubF9idWYgKyBseF07XG4gICAgICBseCsrO1xuXG4gICAgICBpZiAoZGlzdCA9PT0gMCkge1xuICAgICAgICBzZW5kX2NvZGUocywgbGMsIGx0cmVlKTsgLyogc2VuZCBhIGxpdGVyYWwgYnl0ZSAqL1xuICAgICAgICAvL1RyYWNlY3YoaXNncmFwaChsYyksIChzdGRlcnIsXCIgJyVjJyBcIiwgbGMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIEhlcmUsIGxjIGlzIHRoZSBtYXRjaCBsZW5ndGggLSBNSU5fTUFUQ0ggKi9cbiAgICAgICAgY29kZSA9IF9sZW5ndGhfY29kZVtsY107XG4gICAgICAgIHNlbmRfY29kZShzLCBjb2RlK0xJVEVSQUxTKzEsIGx0cmVlKTsgLyogc2VuZCB0aGUgbGVuZ3RoIGNvZGUgKi9cbiAgICAgICAgZXh0cmEgPSBleHRyYV9sYml0c1tjb2RlXTtcbiAgICAgICAgaWYgKGV4dHJhICE9PSAwKSB7XG4gICAgICAgICAgbGMgLT0gYmFzZV9sZW5ndGhbY29kZV07XG4gICAgICAgICAgc2VuZF9iaXRzKHMsIGxjLCBleHRyYSk7ICAgICAgIC8qIHNlbmQgdGhlIGV4dHJhIGxlbmd0aCBiaXRzICovXG4gICAgICAgIH1cbiAgICAgICAgZGlzdC0tOyAvKiBkaXN0IGlzIG5vdyB0aGUgbWF0Y2ggZGlzdGFuY2UgLSAxICovXG4gICAgICAgIGNvZGUgPSBkX2NvZGUoZGlzdCk7XG4gICAgICAgIC8vQXNzZXJ0IChjb2RlIDwgRF9DT0RFUywgXCJiYWQgZF9jb2RlXCIpO1xuXG4gICAgICAgIHNlbmRfY29kZShzLCBjb2RlLCBkdHJlZSk7ICAgICAgIC8qIHNlbmQgdGhlIGRpc3RhbmNlIGNvZGUgKi9cbiAgICAgICAgZXh0cmEgPSBleHRyYV9kYml0c1tjb2RlXTtcbiAgICAgICAgaWYgKGV4dHJhICE9PSAwKSB7XG4gICAgICAgICAgZGlzdCAtPSBiYXNlX2Rpc3RbY29kZV07XG4gICAgICAgICAgc2VuZF9iaXRzKHMsIGRpc3QsIGV4dHJhKTsgICAvKiBzZW5kIHRoZSBleHRyYSBkaXN0YW5jZSBiaXRzICovXG4gICAgICAgIH1cbiAgICAgIH0gLyogbGl0ZXJhbCBvciBtYXRjaCBwYWlyID8gKi9cblxuICAgICAgLyogQ2hlY2sgdGhhdCB0aGUgb3ZlcmxheSBiZXR3ZWVuIHBlbmRpbmdfYnVmIGFuZCBkX2J1ZitsX2J1ZiBpcyBvazogKi9cbiAgICAgIC8vQXNzZXJ0KCh1SW50KShzLT5wZW5kaW5nKSA8IHMtPmxpdF9idWZzaXplICsgMipseCxcbiAgICAgIC8vICAgICAgIFwicGVuZGluZ0J1ZiBvdmVyZmxvd1wiKTtcblxuICAgIH0gd2hpbGUgKGx4IDwgcy5sYXN0X2xpdCk7XG4gIH1cblxuICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBsdHJlZSk7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb25zdHJ1Y3Qgb25lIEh1ZmZtYW4gdHJlZSBhbmQgYXNzaWducyB0aGUgY29kZSBiaXQgc3RyaW5ncyBhbmQgbGVuZ3Rocy5cbiAqIFVwZGF0ZSB0aGUgdG90YWwgYml0IGxlbmd0aCBmb3IgdGhlIGN1cnJlbnQgYmxvY2suXG4gKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZCBmcmVxIGlzIHNldCBmb3IgYWxsIHRyZWUgZWxlbWVudHMuXG4gKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkcyBsZW4gYW5kIGNvZGUgYXJlIHNldCB0byB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RoXG4gKiAgICAgYW5kIGNvcnJlc3BvbmRpbmcgY29kZS4gVGhlIGxlbmd0aCBvcHRfbGVuIGlzIHVwZGF0ZWQ7IHN0YXRpY19sZW4gaXNcbiAqICAgICBhbHNvIHVwZGF0ZWQgaWYgc3RyZWUgaXMgbm90IG51bGwuIFRoZSBmaWVsZCBtYXhfY29kZSBpcyBzZXQuXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkX3RyZWUocywgZGVzYylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICB0cmVlX2Rlc2MgKmRlc2M7IC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi9cbntcbiAgdmFyIHRyZWUgICAgID0gZGVzYy5keW5fdHJlZTtcbiAgdmFyIHN0cmVlICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7XG4gIHZhciBoYXNfc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7XG4gIHZhciBlbGVtcyAgICA9IGRlc2Muc3RhdF9kZXNjLmVsZW1zO1xuICB2YXIgbiwgbTsgICAgICAgICAgLyogaXRlcmF0ZSBvdmVyIGhlYXAgZWxlbWVudHMgKi9cbiAgdmFyIG1heF9jb2RlID0gLTE7IC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqL1xuICB2YXIgbm9kZTsgICAgICAgICAgLyogbmV3IG5vZGUgYmVpbmcgY3JlYXRlZCAqL1xuXG4gIC8qIENvbnN0cnVjdCB0aGUgaW5pdGlhbCBoZWFwLCB3aXRoIGxlYXN0IGZyZXF1ZW50IGVsZW1lbnQgaW5cbiAgICogaGVhcFtTTUFMTEVTVF0uIFRoZSBzb25zIG9mIGhlYXBbbl0gYXJlIGhlYXBbMipuXSBhbmQgaGVhcFsyKm4rMV0uXG4gICAqIGhlYXBbMF0gaXMgbm90IHVzZWQuXG4gICAqL1xuICBzLmhlYXBfbGVuID0gMDtcbiAgcy5oZWFwX21heCA9IEhFQVBfU0laRTtcblxuICBmb3IgKG4gPSAwOyBuIDwgZWxlbXM7IG4rKykge1xuICAgIGlmICh0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkge1xuICAgICAgcy5oZWFwWysrcy5oZWFwX2xlbl0gPSBtYXhfY29kZSA9IG47XG4gICAgICBzLmRlcHRoW25dID0gMDtcblxuICAgIH0gZWxzZSB7XG4gICAgICB0cmVlW24qMiArIDFdLyouTGVuKi8gPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8qIFRoZSBwa3ppcCBmb3JtYXQgcmVxdWlyZXMgdGhhdCBhdCBsZWFzdCBvbmUgZGlzdGFuY2UgY29kZSBleGlzdHMsXG4gICAqIGFuZCB0aGF0IGF0IGxlYXN0IG9uZSBiaXQgc2hvdWxkIGJlIHNlbnQgZXZlbiBpZiB0aGVyZSBpcyBvbmx5IG9uZVxuICAgKiBwb3NzaWJsZSBjb2RlLiBTbyB0byBhdm9pZCBzcGVjaWFsIGNoZWNrcyBsYXRlciBvbiB3ZSBmb3JjZSBhdCBsZWFzdFxuICAgKiB0d28gY29kZXMgb2Ygbm9uIHplcm8gZnJlcXVlbmN5LlxuICAgKi9cbiAgd2hpbGUgKHMuaGVhcF9sZW4gPCAyKSB7XG4gICAgbm9kZSA9IHMuaGVhcFsrK3MuaGVhcF9sZW5dID0gKG1heF9jb2RlIDwgMiA/ICsrbWF4X2NvZGUgOiAwKTtcbiAgICB0cmVlW25vZGUgKiAyXS8qLkZyZXEqLyA9IDE7XG4gICAgcy5kZXB0aFtub2RlXSA9IDA7XG4gICAgcy5vcHRfbGVuLS07XG5cbiAgICBpZiAoaGFzX3N0cmVlKSB7XG4gICAgICBzLnN0YXRpY19sZW4gLT0gc3RyZWVbbm9kZSoyICsgMV0vKi5MZW4qLztcbiAgICB9XG4gICAgLyogbm9kZSBpcyAwIG9yIDEgc28gaXQgZG9lcyBub3QgaGF2ZSBleHRyYSBiaXRzICovXG4gIH1cbiAgZGVzYy5tYXhfY29kZSA9IG1heF9jb2RlO1xuXG4gIC8qIFRoZSBlbGVtZW50cyBoZWFwW2hlYXBfbGVuLzIrMSAuLiBoZWFwX2xlbl0gYXJlIGxlYXZlcyBvZiB0aGUgdHJlZSxcbiAgICogZXN0YWJsaXNoIHN1Yi1oZWFwcyBvZiBpbmNyZWFzaW5nIGxlbmd0aHM6XG4gICAqL1xuICBmb3IgKG4gPSAocy5oZWFwX2xlbiA+PiAxLyppbnQgLzIqLyk7IG4gPj0gMTsgbi0tKSB7IHBxZG93bmhlYXAocywgdHJlZSwgbik7IH1cblxuICAvKiBDb25zdHJ1Y3QgdGhlIEh1ZmZtYW4gdHJlZSBieSByZXBlYXRlZGx5IGNvbWJpbmluZyB0aGUgbGVhc3QgdHdvXG4gICAqIGZyZXF1ZW50IG5vZGVzLlxuICAgKi9cbiAgbm9kZSA9IGVsZW1zOyAgICAgICAgICAgICAgLyogbmV4dCBpbnRlcm5hbCBub2RlIG9mIHRoZSB0cmVlICovXG4gIGRvIHtcbiAgICAvL3BxcmVtb3ZlKHMsIHRyZWUsIG4pOyAgLyogbiA9IG5vZGUgb2YgbGVhc3QgZnJlcXVlbmN5ICovXG4gICAgLyoqKiBwcXJlbW92ZSAqKiovXG4gICAgbiA9IHMuaGVhcFsxLypTTUFMTEVTVCovXTtcbiAgICBzLmhlYXBbMS8qU01BTExFU1QqL10gPSBzLmhlYXBbcy5oZWFwX2xlbi0tXTtcbiAgICBwcWRvd25oZWFwKHMsIHRyZWUsIDEvKlNNQUxMRVNUKi8pO1xuICAgIC8qKiovXG5cbiAgICBtID0gcy5oZWFwWzEvKlNNQUxMRVNUKi9dOyAvKiBtID0gbm9kZSBvZiBuZXh0IGxlYXN0IGZyZXF1ZW5jeSAqL1xuXG4gICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBuOyAvKiBrZWVwIHRoZSBub2RlcyBzb3J0ZWQgYnkgZnJlcXVlbmN5ICovXG4gICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBtO1xuXG4gICAgLyogQ3JlYXRlIGEgbmV3IG5vZGUgZmF0aGVyIG9mIG4gYW5kIG0gKi9cbiAgICB0cmVlW25vZGUgKiAyXS8qLkZyZXEqLyA9IHRyZWVbbiAqIDJdLyouRnJlcSovICsgdHJlZVttICogMl0vKi5GcmVxKi87XG4gICAgcy5kZXB0aFtub2RlXSA9IChzLmRlcHRoW25dID49IHMuZGVwdGhbbV0gPyBzLmRlcHRoW25dIDogcy5kZXB0aFttXSkgKyAxO1xuICAgIHRyZWVbbioyICsgMV0vKi5EYWQqLyA9IHRyZWVbbSoyICsgMV0vKi5EYWQqLyA9IG5vZGU7XG5cbiAgICAvKiBhbmQgaW5zZXJ0IHRoZSBuZXcgbm9kZSBpbiB0aGUgaGVhcCAqL1xuICAgIHMuaGVhcFsxLypTTUFMTEVTVCovXSA9IG5vZGUrKztcbiAgICBwcWRvd25oZWFwKHMsIHRyZWUsIDEvKlNNQUxMRVNUKi8pO1xuXG4gIH0gd2hpbGUgKHMuaGVhcF9sZW4gPj0gMik7XG5cbiAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBzLmhlYXBbMS8qU01BTExFU1QqL107XG5cbiAgLyogQXQgdGhpcyBwb2ludCwgdGhlIGZpZWxkcyBmcmVxIGFuZCBkYWQgYXJlIHNldC4gV2UgY2FuIG5vd1xuICAgKiBnZW5lcmF0ZSB0aGUgYml0IGxlbmd0aHMuXG4gICAqL1xuICBnZW5fYml0bGVuKHMsIGRlc2MpO1xuXG4gIC8qIFRoZSBmaWVsZCBsZW4gaXMgbm93IHNldCwgd2UgY2FuIGdlbmVyYXRlIHRoZSBiaXQgY29kZXMgKi9cbiAgZ2VuX2NvZGVzKHRyZWUsIG1heF9jb2RlLCBzLmJsX2NvdW50KTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNjYW4gYSBsaXRlcmFsIG9yIGRpc3RhbmNlIHRyZWUgdG8gZGV0ZXJtaW5lIHRoZSBmcmVxdWVuY2llcyBvZiB0aGUgY29kZXNcbiAqIGluIHRoZSBiaXQgbGVuZ3RoIHRyZWUuXG4gKi9cbmZ1bmN0aW9uIHNjYW5fdHJlZShzLCB0cmVlLCBtYXhfY29kZSlcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICBjdF9kYXRhICp0cmVlOyAgIC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi9cbi8vICAgIGludCBtYXhfY29kZTsgICAgLyogYW5kIGl0cyBsYXJnZXN0IGNvZGUgb2Ygbm9uIHplcm8gZnJlcXVlbmN5ICovXG57XG4gIHZhciBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi9cbiAgdmFyIHByZXZsZW4gPSAtMTsgICAgICAgICAgLyogbGFzdCBlbWl0dGVkIGxlbmd0aCAqL1xuICB2YXIgY3VybGVuOyAgICAgICAgICAgICAgICAvKiBsZW5ndGggb2YgY3VycmVudCBjb2RlICovXG5cbiAgdmFyIG5leHRsZW4gPSB0cmVlWzAqMiArIDFdLyouTGVuKi87IC8qIGxlbmd0aCBvZiBuZXh0IGNvZGUgKi9cblxuICB2YXIgY291bnQgPSAwOyAgICAgICAgICAgICAvKiByZXBlYXQgY291bnQgb2YgdGhlIGN1cnJlbnQgY29kZSAqL1xuICB2YXIgbWF4X2NvdW50ID0gNzsgICAgICAgICAvKiBtYXggcmVwZWF0IGNvdW50ICovXG4gIHZhciBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi9cblxuICBpZiAobmV4dGxlbiA9PT0gMCkge1xuICAgIG1heF9jb3VudCA9IDEzODtcbiAgICBtaW5fY291bnQgPSAzO1xuICB9XG4gIHRyZWVbKG1heF9jb2RlKzEpKjIgKyAxXS8qLkxlbiovID0gMHhmZmZmOyAvKiBndWFyZCAqL1xuXG4gIGZvciAobiA9IDA7IG4gPD0gbWF4X2NvZGU7IG4rKykge1xuICAgIGN1cmxlbiA9IG5leHRsZW47XG4gICAgbmV4dGxlbiA9IHRyZWVbKG4rMSkqMiArIDFdLyouTGVuKi87XG5cbiAgICBpZiAoKytjb3VudCA8IG1heF9jb3VudCAmJiBjdXJsZW4gPT09IG5leHRsZW4pIHtcbiAgICAgIGNvbnRpbnVlO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkge1xuICAgICAgcy5ibF90cmVlW2N1cmxlbiAqIDJdLyouRnJlcSovICs9IGNvdW50O1xuXG4gICAgfSBlbHNlIGlmIChjdXJsZW4gIT09IDApIHtcblxuICAgICAgaWYgKGN1cmxlbiAhPT0gcHJldmxlbikgeyBzLmJsX3RyZWVbY3VybGVuICogMl0vKi5GcmVxKi8rKzsgfVxuICAgICAgcy5ibF90cmVlW1JFUF8zXzYqMl0vKi5GcmVxKi8rKztcblxuICAgIH0gZWxzZSBpZiAoY291bnQgPD0gMTApIHtcbiAgICAgIHMuYmxfdHJlZVtSRVBaXzNfMTAqMl0vKi5GcmVxKi8rKztcblxuICAgIH0gZWxzZSB7XG4gICAgICBzLmJsX3RyZWVbUkVQWl8xMV8xMzgqMl0vKi5GcmVxKi8rKztcbiAgICB9XG5cbiAgICBjb3VudCA9IDA7XG4gICAgcHJldmxlbiA9IGN1cmxlbjtcblxuICAgIGlmIChuZXh0bGVuID09PSAwKSB7XG4gICAgICBtYXhfY291bnQgPSAxMzg7XG4gICAgICBtaW5fY291bnQgPSAzO1xuXG4gICAgfSBlbHNlIGlmIChjdXJsZW4gPT09IG5leHRsZW4pIHtcbiAgICAgIG1heF9jb3VudCA9IDY7XG4gICAgICBtaW5fY291bnQgPSAzO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIG1heF9jb3VudCA9IDc7XG4gICAgICBtaW5fY291bnQgPSA0O1xuICAgIH1cbiAgfVxufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2VuZCBhIGxpdGVyYWwgb3IgZGlzdGFuY2UgdHJlZSBpbiBjb21wcmVzc2VkIGZvcm0sIHVzaW5nIHRoZSBjb2RlcyBpblxuICogYmxfdHJlZS5cbiAqL1xuZnVuY3Rpb24gc2VuZF90cmVlKHMsIHRyZWUsIG1heF9jb2RlKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIGN0X2RhdGEgKnRyZWU7IC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi9cbi8vICAgIGludCBtYXhfY29kZTsgICAgICAgLyogYW5kIGl0cyBsYXJnZXN0IGNvZGUgb2Ygbm9uIHplcm8gZnJlcXVlbmN5ICovXG57XG4gIHZhciBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi9cbiAgdmFyIHByZXZsZW4gPSAtMTsgICAgICAgICAgLyogbGFzdCBlbWl0dGVkIGxlbmd0aCAqL1xuICB2YXIgY3VybGVuOyAgICAgICAgICAgICAgICAvKiBsZW5ndGggb2YgY3VycmVudCBjb2RlICovXG5cbiAgdmFyIG5leHRsZW4gPSB0cmVlWzAqMiArIDFdLyouTGVuKi87IC8qIGxlbmd0aCBvZiBuZXh0IGNvZGUgKi9cblxuICB2YXIgY291bnQgPSAwOyAgICAgICAgICAgICAvKiByZXBlYXQgY291bnQgb2YgdGhlIGN1cnJlbnQgY29kZSAqL1xuICB2YXIgbWF4X2NvdW50ID0gNzsgICAgICAgICAvKiBtYXggcmVwZWF0IGNvdW50ICovXG4gIHZhciBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi9cblxuICAvKiB0cmVlW21heF9jb2RlKzFdLkxlbiA9IC0xOyAqLyAgLyogZ3VhcmQgYWxyZWFkeSBzZXQgKi9cbiAgaWYgKG5leHRsZW4gPT09IDApIHtcbiAgICBtYXhfY291bnQgPSAxMzg7XG4gICAgbWluX2NvdW50ID0gMztcbiAgfVxuXG4gIGZvciAobiA9IDA7IG4gPD0gbWF4X2NvZGU7IG4rKykge1xuICAgIGN1cmxlbiA9IG5leHRsZW47XG4gICAgbmV4dGxlbiA9IHRyZWVbKG4rMSkqMiArIDFdLyouTGVuKi87XG5cbiAgICBpZiAoKytjb3VudCA8IG1heF9jb3VudCAmJiBjdXJsZW4gPT09IG5leHRsZW4pIHtcbiAgICAgIGNvbnRpbnVlO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkge1xuICAgICAgZG8geyBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOyB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTtcblxuICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7XG4gICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7XG4gICAgICAgIHNlbmRfY29kZShzLCBjdXJsZW4sIHMuYmxfdHJlZSk7XG4gICAgICAgIGNvdW50LS07XG4gICAgICB9XG4gICAgICAvL0Fzc2VydChjb3VudCA+PSAzICYmIGNvdW50IDw9IDYsIFwiIDNfNj9cIik7XG4gICAgICBzZW5kX2NvZGUocywgUkVQXzNfNiwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudC0zLCAyKTtcblxuICAgIH0gZWxzZSBpZiAoY291bnQgPD0gMTApIHtcbiAgICAgIHNlbmRfY29kZShzLCBSRVBaXzNfMTAsIHMuYmxfdHJlZSk7XG4gICAgICBzZW5kX2JpdHMocywgY291bnQtMywgMyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfMTFfMTM4LCBzLmJsX3RyZWUpO1xuICAgICAgc2VuZF9iaXRzKHMsIGNvdW50LTExLCA3KTtcbiAgICB9XG5cbiAgICBjb3VudCA9IDA7XG4gICAgcHJldmxlbiA9IGN1cmxlbjtcbiAgICBpZiAobmV4dGxlbiA9PT0gMCkge1xuICAgICAgbWF4X2NvdW50ID0gMTM4O1xuICAgICAgbWluX2NvdW50ID0gMztcblxuICAgIH0gZWxzZSBpZiAoY3VybGVuID09PSBuZXh0bGVuKSB7XG4gICAgICBtYXhfY291bnQgPSA2O1xuICAgICAgbWluX2NvdW50ID0gMztcblxuICAgIH0gZWxzZSB7XG4gICAgICBtYXhfY291bnQgPSA3O1xuICAgICAgbWluX2NvdW50ID0gNDtcbiAgICB9XG4gIH1cbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGZvciB0aGUgYml0IGxlbmd0aHMgYW5kIHJldHVybiB0aGUgaW5kZXggaW5cbiAqIGJsX29yZGVyIG9mIHRoZSBsYXN0IGJpdCBsZW5ndGggY29kZSB0byBzZW5kLlxuICovXG5mdW5jdGlvbiBidWlsZF9ibF90cmVlKHMpIHtcbiAgdmFyIG1heF9ibGluZGV4OyAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqL1xuXG4gIC8qIERldGVybWluZSB0aGUgYml0IGxlbmd0aCBmcmVxdWVuY2llcyBmb3IgbGl0ZXJhbCBhbmQgZGlzdGFuY2UgdHJlZXMgKi9cbiAgc2Nhbl90cmVlKHMsIHMuZHluX2x0cmVlLCBzLmxfZGVzYy5tYXhfY29kZSk7XG4gIHNjYW5fdHJlZShzLCBzLmR5bl9kdHJlZSwgcy5kX2Rlc2MubWF4X2NvZGUpO1xuXG4gIC8qIEJ1aWxkIHRoZSBiaXQgbGVuZ3RoIHRyZWU6ICovXG4gIGJ1aWxkX3RyZWUocywgcy5ibF9kZXNjKTtcbiAgLyogb3B0X2xlbiBub3cgaW5jbHVkZXMgdGhlIGxlbmd0aCBvZiB0aGUgdHJlZSByZXByZXNlbnRhdGlvbnMsIGV4Y2VwdFxuICAgKiB0aGUgbGVuZ3RocyBvZiB0aGUgYml0IGxlbmd0aHMgY29kZXMgYW5kIHRoZSA1KzUrNCBiaXRzIGZvciB0aGUgY291bnRzLlxuICAgKi9cblxuICAvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBiaXQgbGVuZ3RoIGNvZGVzIHRvIHNlbmQuIFRoZSBwa3ppcCBmb3JtYXRcbiAgICogcmVxdWlyZXMgdGhhdCBhdCBsZWFzdCA0IGJpdCBsZW5ndGggY29kZXMgYmUgc2VudC4gKGFwcG5vdGUudHh0IHNheXNcbiAgICogMyBidXQgdGhlIGFjdHVhbCB2YWx1ZSB1c2VkIGlzIDQuKVxuICAgKi9cbiAgZm9yIChtYXhfYmxpbmRleCA9IEJMX0NPREVTLTE7IG1heF9ibGluZGV4ID49IDM7IG1heF9ibGluZGV4LS0pIHtcbiAgICBpZiAocy5ibF90cmVlW2JsX29yZGVyW21heF9ibGluZGV4XSoyICsgMV0vKi5MZW4qLyAhPT0gMCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIC8qIFVwZGF0ZSBvcHRfbGVuIHRvIGluY2x1ZGUgdGhlIGJpdCBsZW5ndGggdHJlZSBhbmQgY291bnRzICovXG4gIHMub3B0X2xlbiArPSAzKihtYXhfYmxpbmRleCsxKSArIDUrNSs0O1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmR5biB0cmVlczogZHluICVsZCwgc3RhdCAlbGRcIixcbiAgLy8gICAgICAgIHMtPm9wdF9sZW4sIHMtPnN0YXRpY19sZW4pKTtcblxuICByZXR1cm4gbWF4X2JsaW5kZXg7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIHRoZSBoZWFkZXIgZm9yIGEgYmxvY2sgdXNpbmcgZHluYW1pYyBIdWZmbWFuIHRyZWVzOiB0aGUgY291bnRzLCB0aGVcbiAqIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMsIHRoZSBsaXRlcmFsIHRyZWUgYW5kIHRoZSBkaXN0YW5jZSB0cmVlLlxuICogSU4gYXNzZXJ0aW9uOiBsY29kZXMgPj0gMjU3LCBkY29kZXMgPj0gMSwgYmxjb2RlcyA+PSA0LlxuICovXG5mdW5jdGlvbiBzZW5kX2FsbF90cmVlcyhzLCBsY29kZXMsIGRjb2RlcywgYmxjb2Rlcylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICBpbnQgbGNvZGVzLCBkY29kZXMsIGJsY29kZXM7IC8qIG51bWJlciBvZiBjb2RlcyBmb3IgZWFjaCB0cmVlICovXG57XG4gIHZhciByYW5rOyAgICAgICAgICAgICAgICAgICAgLyogaW5kZXggaW4gYmxfb3JkZXIgKi9cblxuICAvL0Fzc2VydCAobGNvZGVzID49IDI1NyAmJiBkY29kZXMgPj0gMSAmJiBibGNvZGVzID49IDQsIFwibm90IGVub3VnaCBjb2Rlc1wiKTtcbiAgLy9Bc3NlcnQgKGxjb2RlcyA8PSBMX0NPREVTICYmIGRjb2RlcyA8PSBEX0NPREVTICYmIGJsY29kZXMgPD0gQkxfQ09ERVMsXG4gIC8vICAgICAgICBcInRvbyBtYW55IGNvZGVzXCIpO1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmJsIGNvdW50czogXCIpKTtcbiAgc2VuZF9iaXRzKHMsIGxjb2Rlcy0yNTcsIDUpOyAvKiBub3QgKzI1NSBhcyBzdGF0ZWQgaW4gYXBwbm90ZS50eHQgKi9cbiAgc2VuZF9iaXRzKHMsIGRjb2Rlcy0xLCAgIDUpO1xuICBzZW5kX2JpdHMocywgYmxjb2Rlcy00LCAgNCk7IC8qIG5vdCAtMyBhcyBzdGF0ZWQgaW4gYXBwbm90ZS50eHQgKi9cbiAgZm9yIChyYW5rID0gMDsgcmFuayA8IGJsY29kZXM7IHJhbmsrKykge1xuICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiXFxuYmwgY29kZSAlMmQgXCIsIGJsX29yZGVyW3JhbmtdKSk7XG4gICAgc2VuZF9iaXRzKHMsIHMuYmxfdHJlZVtibF9vcmRlcltyYW5rXSoyICsgMV0vKi5MZW4qLywgMyk7XG4gIH1cbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJcXG5ibCB0cmVlOiBzZW50ICVsZFwiLCBzLT5iaXRzX3NlbnQpKTtcblxuICBzZW5kX3RyZWUocywgcy5keW5fbHRyZWUsIGxjb2Rlcy0xKTsgLyogbGl0ZXJhbCB0cmVlICovXG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiXFxubGl0IHRyZWU6IHNlbnQgJWxkXCIsIHMtPmJpdHNfc2VudCkpO1xuXG4gIHNlbmRfdHJlZShzLCBzLmR5bl9kdHJlZSwgZGNvZGVzLTEpOyAvKiBkaXN0YW5jZSB0cmVlICovXG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiXFxuZGlzdCB0cmVlOiBzZW50ICVsZFwiLCBzLT5iaXRzX3NlbnQpKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENoZWNrIGlmIHRoZSBkYXRhIHR5cGUgaXMgVEVYVCBvciBCSU5BUlksIHVzaW5nIHRoZSBmb2xsb3dpbmcgYWxnb3JpdGhtOlxuICogLSBURVhUIGlmIHRoZSB0d28gY29uZGl0aW9ucyBiZWxvdyBhcmUgc2F0aXNmaWVkOlxuICogICAgYSkgVGhlcmUgYXJlIG5vIG5vbi1wb3J0YWJsZSBjb250cm9sIGNoYXJhY3RlcnMgYmVsb25naW5nIHRvIHRoZVxuICogICAgICAgXCJibGFjayBsaXN0XCIgKDAuLjYsIDE0Li4yNSwgMjguLjMxKS5cbiAqICAgIGIpIFRoZXJlIGlzIGF0IGxlYXN0IG9uZSBwcmludGFibGUgY2hhcmFjdGVyIGJlbG9uZ2luZyB0byB0aGVcbiAqICAgICAgIFwid2hpdGUgbGlzdFwiICg5IHtUQUJ9LCAxMCB7TEZ9LCAxMyB7Q1J9LCAzMi4uMjU1KS5cbiAqIC0gQklOQVJZIG90aGVyd2lzZS5cbiAqIC0gVGhlIGZvbGxvd2luZyBwYXJ0aWFsbHktcG9ydGFibGUgY29udHJvbCBjaGFyYWN0ZXJzIGZvcm0gYVxuICogICBcImdyYXkgbGlzdFwiIHRoYXQgaXMgaWdub3JlZCBpbiB0aGlzIGRldGVjdGlvbiBhbGdvcml0aG06XG4gKiAgICg3IHtCRUx9LCA4IHtCU30sIDExIHtWVH0sIDEyIHtGRn0sIDI2IHtTVUJ9LCAyNyB7RVNDfSkuXG4gKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgRnJlcSBvZiBkeW5fbHRyZWUgYXJlIHNldC5cbiAqL1xuZnVuY3Rpb24gZGV0ZWN0X2RhdGFfdHlwZShzKSB7XG4gIC8qIGJsYWNrX21hc2sgaXMgdGhlIGJpdCBtYXNrIG9mIGJsYWNrLWxpc3RlZCBieXRlc1xuICAgKiBzZXQgYml0cyAwLi42LCAxNC4uMjUsIGFuZCAyOC4uMzFcbiAgICogMHhmM2ZmYzA3ZiA9IGJpbmFyeSAxMTExMDAxMTExMTExMTExMTEwMDAwMDAwMTExMTExMVxuICAgKi9cbiAgdmFyIGJsYWNrX21hc2sgPSAweGYzZmZjMDdmO1xuICB2YXIgbjtcblxuICAvKiBDaGVjayBmb3Igbm9uLXRleHR1YWwgKFwiYmxhY2stbGlzdGVkXCIpIGJ5dGVzLiAqL1xuICBmb3IgKG4gPSAwOyBuIDw9IDMxOyBuKyssIGJsYWNrX21hc2sgPj4+PSAxKSB7XG4gICAgaWYgKChibGFja19tYXNrICYgMSkgJiYgKHMuZHluX2x0cmVlW24qMl0vKi5GcmVxKi8gIT09IDApKSB7XG4gICAgICByZXR1cm4gWl9CSU5BUlk7XG4gICAgfVxuICB9XG5cbiAgLyogQ2hlY2sgZm9yIHRleHR1YWwgKFwid2hpdGUtbGlzdGVkXCIpIGJ5dGVzLiAqL1xuICBpZiAocy5keW5fbHRyZWVbOSAqIDJdLyouRnJlcSovICE9PSAwIHx8IHMuZHluX2x0cmVlWzEwICogMl0vKi5GcmVxKi8gIT09IDAgfHxcbiAgICAgIHMuZHluX2x0cmVlWzEzICogMl0vKi5GcmVxKi8gIT09IDApIHtcbiAgICByZXR1cm4gWl9URVhUO1xuICB9XG4gIGZvciAobiA9IDMyOyBuIDwgTElURVJBTFM7IG4rKykge1xuICAgIGlmIChzLmR5bl9sdHJlZVtuICogMl0vKi5GcmVxKi8gIT09IDApIHtcbiAgICAgIHJldHVybiBaX1RFWFQ7XG4gICAgfVxuICB9XG5cbiAgLyogVGhlcmUgYXJlIG5vIFwiYmxhY2stbGlzdGVkXCIgb3IgXCJ3aGl0ZS1saXN0ZWRcIiBieXRlczpcbiAgICogdGhpcyBzdHJlYW0gZWl0aGVyIGlzIGVtcHR5IG9yIGhhcyB0b2xlcmF0ZWQgKFwiZ3JheS1saXN0ZWRcIikgYnl0ZXMgb25seS5cbiAgICovXG4gIHJldHVybiBaX0JJTkFSWTtcbn1cblxuXG52YXIgc3RhdGljX2luaXRfZG9uZSA9IGZhbHNlO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemUgdGhlIHRyZWUgZGF0YSBzdHJ1Y3R1cmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbS5cbiAqL1xuZnVuY3Rpb24gX3RyX2luaXQocylcbntcblxuICBpZiAoIXN0YXRpY19pbml0X2RvbmUpIHtcbiAgICB0cl9zdGF0aWNfaW5pdCgpO1xuICAgIHN0YXRpY19pbml0X2RvbmUgPSB0cnVlO1xuICB9XG5cbiAgcy5sX2Rlc2MgID0gbmV3IFRyZWVEZXNjKHMuZHluX2x0cmVlLCBzdGF0aWNfbF9kZXNjKTtcbiAgcy5kX2Rlc2MgID0gbmV3IFRyZWVEZXNjKHMuZHluX2R0cmVlLCBzdGF0aWNfZF9kZXNjKTtcbiAgcy5ibF9kZXNjID0gbmV3IFRyZWVEZXNjKHMuYmxfdHJlZSwgc3RhdGljX2JsX2Rlc2MpO1xuXG4gIHMuYmlfYnVmID0gMDtcbiAgcy5iaV92YWxpZCA9IDA7XG5cbiAgLyogSW5pdGlhbGl6ZSB0aGUgZmlyc3QgYmxvY2sgb2YgdGhlIGZpcnN0IGZpbGU6ICovXG4gIGluaXRfYmxvY2socyk7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIGEgc3RvcmVkIGJsb2NrXG4gKi9cbmZ1bmN0aW9uIF90cl9zdG9yZWRfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KVxuLy9EZWZsYXRlU3RhdGUgKnM7XG4vL2NoYXJmICpidWY7ICAgICAgIC8qIGlucHV0IGJsb2NrICovXG4vL3VsZyBzdG9yZWRfbGVuOyAgIC8qIGxlbmd0aCBvZiBpbnB1dCBibG9jayAqL1xuLy9pbnQgbGFzdDsgICAgICAgICAvKiBvbmUgaWYgdGhpcyBpcyB0aGUgbGFzdCBibG9jayBmb3IgYSBmaWxlICovXG57XG4gIHNlbmRfYml0cyhzLCAoU1RPUkVEX0JMT0NLPDwxKSsobGFzdCA/IDEgOiAwKSwgMyk7ICAgIC8qIHNlbmQgYmxvY2sgdHlwZSAqL1xuICBjb3B5X2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgdHJ1ZSk7IC8qIHdpdGggaGVhZGVyICovXG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIG9uZSBlbXB0eSBzdGF0aWMgYmxvY2sgdG8gZ2l2ZSBlbm91Z2ggbG9va2FoZWFkIGZvciBpbmZsYXRlLlxuICogVGhpcyB0YWtlcyAxMCBiaXRzLCBvZiB3aGljaCA3IG1heSByZW1haW4gaW4gdGhlIGJpdCBidWZmZXIuXG4gKi9cbmZ1bmN0aW9uIF90cl9hbGlnbihzKSB7XG4gIHNlbmRfYml0cyhzLCBTVEFUSUNfVFJFRVM8PDEsIDMpO1xuICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBzdGF0aWNfbHRyZWUpO1xuICBiaV9mbHVzaChzKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIERldGVybWluZSB0aGUgYmVzdCBlbmNvZGluZyBmb3IgdGhlIGN1cnJlbnQgYmxvY2s6IGR5bmFtaWMgdHJlZXMsIHN0YXRpY1xuICogdHJlZXMgb3Igc3RvcmUsIGFuZCBvdXRwdXQgdGhlIGVuY29kZWQgYmxvY2sgdG8gdGhlIHppcCBmaWxlLlxuICovXG5mdW5jdGlvbiBfdHJfZmx1c2hfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KVxuLy9EZWZsYXRlU3RhdGUgKnM7XG4vL2NoYXJmICpidWY7ICAgICAgIC8qIGlucHV0IGJsb2NrLCBvciBOVUxMIGlmIHRvbyBvbGQgKi9cbi8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovXG4vL2ludCBsYXN0OyAgICAgICAgIC8qIG9uZSBpZiB0aGlzIGlzIHRoZSBsYXN0IGJsb2NrIGZvciBhIGZpbGUgKi9cbntcbiAgdmFyIG9wdF9sZW5iLCBzdGF0aWNfbGVuYjsgIC8qIG9wdF9sZW4gYW5kIHN0YXRpY19sZW4gaW4gYnl0ZXMgKi9cbiAgdmFyIG1heF9ibGluZGV4ID0gMDsgICAgICAgIC8qIGluZGV4IG9mIGxhc3QgYml0IGxlbmd0aCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXEgKi9cblxuICAvKiBCdWlsZCB0aGUgSHVmZm1hbiB0cmVlcyB1bmxlc3MgYSBzdG9yZWQgYmxvY2sgaXMgZm9yY2VkICovXG4gIGlmIChzLmxldmVsID4gMCkge1xuXG4gICAgLyogQ2hlY2sgaWYgdGhlIGZpbGUgaXMgYmluYXJ5IG9yIHRleHQgKi9cbiAgICBpZiAocy5zdHJtLmRhdGFfdHlwZSA9PT0gWl9VTktOT1dOKSB7XG4gICAgICBzLnN0cm0uZGF0YV90eXBlID0gZGV0ZWN0X2RhdGFfdHlwZShzKTtcbiAgICB9XG5cbiAgICAvKiBDb25zdHJ1Y3QgdGhlIGxpdGVyYWwgYW5kIGRpc3RhbmNlIHRyZWVzICovXG4gICAgYnVpbGRfdHJlZShzLCBzLmxfZGVzYyk7XG4gICAgLy8gVHJhY2V2KChzdGRlcnIsIFwiXFxubGl0IGRhdGE6IGR5biAlbGQsIHN0YXQgJWxkXCIsIHMtPm9wdF9sZW4sXG4gICAgLy8gICAgICAgIHMtPnN0YXRpY19sZW4pKTtcblxuICAgIGJ1aWxkX3RyZWUocywgcy5kX2Rlc2MpO1xuICAgIC8vIFRyYWNldigoc3RkZXJyLCBcIlxcbmRpc3QgZGF0YTogZHluICVsZCwgc3RhdCAlbGRcIiwgcy0+b3B0X2xlbixcbiAgICAvLyAgICAgICAgcy0+c3RhdGljX2xlbikpO1xuICAgIC8qIEF0IHRoaXMgcG9pbnQsIG9wdF9sZW4gYW5kIHN0YXRpY19sZW4gYXJlIHRoZSB0b3RhbCBiaXQgbGVuZ3RocyBvZlxuICAgICAqIHRoZSBjb21wcmVzc2VkIGJsb2NrIGRhdGEsIGV4Y2x1ZGluZyB0aGUgdHJlZSByZXByZXNlbnRhdGlvbnMuXG4gICAgICovXG5cbiAgICAvKiBCdWlsZCB0aGUgYml0IGxlbmd0aCB0cmVlIGZvciB0aGUgYWJvdmUgdHdvIHRyZWVzLCBhbmQgZ2V0IHRoZSBpbmRleFxuICAgICAqIGluIGJsX29yZGVyIG9mIHRoZSBsYXN0IGJpdCBsZW5ndGggY29kZSB0byBzZW5kLlxuICAgICAqL1xuICAgIG1heF9ibGluZGV4ID0gYnVpbGRfYmxfdHJlZShzKTtcblxuICAgIC8qIERldGVybWluZSB0aGUgYmVzdCBlbmNvZGluZy4gQ29tcHV0ZSB0aGUgYmxvY2sgbGVuZ3RocyBpbiBieXRlcy4gKi9cbiAgICBvcHRfbGVuYiA9IChzLm9wdF9sZW4rMys3KSA+Pj4gMztcbiAgICBzdGF0aWNfbGVuYiA9IChzLnN0YXRpY19sZW4rMys3KSA+Pj4gMztcblxuICAgIC8vIFRyYWNldigoc3RkZXJyLCBcIlxcbm9wdCAlbHUoJWx1KSBzdGF0ICVsdSglbHUpIHN0b3JlZCAlbHUgbGl0ICV1IFwiLFxuICAgIC8vICAgICAgICBvcHRfbGVuYiwgcy0+b3B0X2xlbiwgc3RhdGljX2xlbmIsIHMtPnN0YXRpY19sZW4sIHN0b3JlZF9sZW4sXG4gICAgLy8gICAgICAgIHMtPmxhc3RfbGl0KSk7XG5cbiAgICBpZiAoc3RhdGljX2xlbmIgPD0gb3B0X2xlbmIpIHsgb3B0X2xlbmIgPSBzdGF0aWNfbGVuYjsgfVxuXG4gIH0gZWxzZSB7XG4gICAgLy8gQXNzZXJ0KGJ1ZiAhPSAoY2hhciopMCwgXCJsb3N0IGJ1ZlwiKTtcbiAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iID0gc3RvcmVkX2xlbiArIDU7IC8qIGZvcmNlIGEgc3RvcmVkIGJsb2NrICovXG4gIH1cblxuICBpZiAoKHN0b3JlZF9sZW4rNCA8PSBvcHRfbGVuYikgJiYgKGJ1ZiAhPT0gLTEpKSB7XG4gICAgLyogNDogdHdvIHdvcmRzIGZvciB0aGUgbGVuZ3RocyAqL1xuXG4gICAgLyogVGhlIHRlc3QgYnVmICE9IE5VTEwgaXMgb25seSBuZWNlc3NhcnkgaWYgTElUX0JVRlNJWkUgPiBXU0laRS5cbiAgICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgaGF2ZSBwcm9jZXNzZWQgbW9yZSB0aGFuIFdTSVpFIGlucHV0IGJ5dGVzIHNpbmNlXG4gICAgICogdGhlIGxhc3QgYmxvY2sgZmx1c2gsIGJlY2F1c2UgY29tcHJlc3Npb24gd291bGQgaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bC4gSWYgTElUX0JVRlNJWkUgPD0gV1NJWkUsIGl0IGlzIG5ldmVyIHRvbyBsYXRlIHRvXG4gICAgICogdHJhbnNmb3JtIGEgYmxvY2sgaW50byBhIHN0b3JlZCBibG9jay5cbiAgICAgKi9cbiAgICBfdHJfc3RvcmVkX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdCk7XG5cbiAgfSBlbHNlIGlmIChzLnN0cmF0ZWd5ID09PSBaX0ZJWEVEIHx8IHN0YXRpY19sZW5iID09PSBvcHRfbGVuYikge1xuXG4gICAgc2VuZF9iaXRzKHMsIChTVEFUSUNfVFJFRVM8PDEpICsgKGxhc3QgPyAxIDogMCksIDMpO1xuICAgIGNvbXByZXNzX2Jsb2NrKHMsIHN0YXRpY19sdHJlZSwgc3RhdGljX2R0cmVlKTtcblxuICB9IGVsc2Uge1xuICAgIHNlbmRfYml0cyhzLCAoRFlOX1RSRUVTPDwxKSArIChsYXN0ID8gMSA6IDApLCAzKTtcbiAgICBzZW5kX2FsbF90cmVlcyhzLCBzLmxfZGVzYy5tYXhfY29kZSsxLCBzLmRfZGVzYy5tYXhfY29kZSsxLCBtYXhfYmxpbmRleCsxKTtcbiAgICBjb21wcmVzc19ibG9jayhzLCBzLmR5bl9sdHJlZSwgcy5keW5fZHRyZWUpO1xuICB9XG4gIC8vIEFzc2VydCAocy0+Y29tcHJlc3NlZF9sZW4gPT0gcy0+Yml0c19zZW50LCBcImJhZCBjb21wcmVzc2VkIHNpemVcIik7XG4gIC8qIFRoZSBhYm92ZSBjaGVjayBpcyBtYWRlIG1vZCAyXjMyLCBmb3IgZmlsZXMgbGFyZ2VyIHRoYW4gNTEyIE1CXG4gICAqIGFuZCB1TG9uZyBpbXBsZW1lbnRlZCBvbiAzMiBiaXRzLlxuICAgKi9cbiAgaW5pdF9ibG9jayhzKTtcblxuICBpZiAobGFzdCkge1xuICAgIGJpX3dpbmR1cChzKTtcbiAgfVxuICAvLyBUcmFjZXYoKHN0ZGVycixcIlxcbmNvbXBybGVuICVsdSglbHUpIFwiLCBzLT5jb21wcmVzc2VkX2xlbj4+MyxcbiAgLy8gICAgICAgcy0+Y29tcHJlc3NlZF9sZW4tNypsYXN0KSk7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2F2ZSB0aGUgbWF0Y2ggaW5mbyBhbmQgdGFsbHkgdGhlIGZyZXF1ZW5jeSBjb3VudHMuIFJldHVybiB0cnVlIGlmXG4gKiB0aGUgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQuXG4gKi9cbmZ1bmN0aW9uIF90cl90YWxseShzLCBkaXN0LCBsYylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICB1bnNpZ25lZCBkaXN0OyAgLyogZGlzdGFuY2Ugb2YgbWF0Y2hlZCBzdHJpbmcgKi9cbi8vICAgIHVuc2lnbmVkIGxjOyAgICAvKiBtYXRjaCBsZW5ndGgtTUlOX01BVENIIG9yIHVubWF0Y2hlZCBjaGFyIChpZiBkaXN0PT0wKSAqL1xue1xuICAvL3ZhciBvdXRfbGVuZ3RoLCBpbl9sZW5ndGgsIGRjb2RlO1xuXG4gIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyXSAgICAgPSAoZGlzdCA+Pj4gOCkgJiAweGZmO1xuICBzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBzLmxhc3RfbGl0ICogMiArIDFdID0gZGlzdCAmIDB4ZmY7XG5cbiAgcy5wZW5kaW5nX2J1ZltzLmxfYnVmICsgcy5sYXN0X2xpdF0gPSBsYyAmIDB4ZmY7XG4gIHMubGFzdF9saXQrKztcblxuICBpZiAoZGlzdCA9PT0gMCkge1xuICAgIC8qIGxjIGlzIHRoZSB1bm1hdGNoZWQgY2hhciAqL1xuICAgIHMuZHluX2x0cmVlW2xjKjJdLyouRnJlcSovKys7XG4gIH0gZWxzZSB7XG4gICAgcy5tYXRjaGVzKys7XG4gICAgLyogSGVyZSwgbGMgaXMgdGhlIG1hdGNoIGxlbmd0aCAtIE1JTl9NQVRDSCAqL1xuICAgIGRpc3QtLTsgICAgICAgICAgICAgLyogZGlzdCA9IG1hdGNoIGRpc3RhbmNlIC0gMSAqL1xuICAgIC8vQXNzZXJ0KCh1c2gpZGlzdCA8ICh1c2gpTUFYX0RJU1QocykgJiZcbiAgICAvLyAgICAgICAodXNoKWxjIDw9ICh1c2gpKE1BWF9NQVRDSC1NSU5fTUFUQ0gpICYmXG4gICAgLy8gICAgICAgKHVzaClkX2NvZGUoZGlzdCkgPCAodXNoKURfQ09ERVMsICBcIl90cl90YWxseTogYmFkIG1hdGNoXCIpO1xuXG4gICAgcy5keW5fbHRyZWVbKF9sZW5ndGhfY29kZVtsY10rTElURVJBTFMrMSkgKiAyXS8qLkZyZXEqLysrO1xuICAgIHMuZHluX2R0cmVlW2RfY29kZShkaXN0KSAqIDJdLyouRnJlcSovKys7XG4gIH1cblxuLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhaWx0cyxcbi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHlcblxuLy8jaWZkZWYgVFJVTkNBVEVfQkxPQ0tcbi8vICAvKiBUcnkgdG8gZ3Vlc3MgaWYgaXQgaXMgcHJvZml0YWJsZSB0byBzdG9wIHRoZSBjdXJyZW50IGJsb2NrIGhlcmUgKi9cbi8vICBpZiAoKHMubGFzdF9saXQgJiAweDFmZmYpID09PSAwICYmIHMubGV2ZWwgPiAyKSB7XG4vLyAgICAvKiBDb21wdXRlIGFuIHVwcGVyIGJvdW5kIGZvciB0aGUgY29tcHJlc3NlZCBsZW5ndGggKi9cbi8vICAgIG91dF9sZW5ndGggPSBzLmxhc3RfbGl0Kjg7XG4vLyAgICBpbl9sZW5ndGggPSBzLnN0cnN0YXJ0IC0gcy5ibG9ja19zdGFydDtcbi8vXG4vLyAgICBmb3IgKGRjb2RlID0gMDsgZGNvZGUgPCBEX0NPREVTOyBkY29kZSsrKSB7XG4vLyAgICAgIG91dF9sZW5ndGggKz0gcy5keW5fZHRyZWVbZGNvZGUqMl0vKi5GcmVxKi8gKiAoNSArIGV4dHJhX2RiaXRzW2Rjb2RlXSk7XG4vLyAgICB9XG4vLyAgICBvdXRfbGVuZ3RoID4+Pj0gMztcbi8vICAgIC8vVHJhY2V2KChzdGRlcnIsXCJcXG5sYXN0X2xpdCAldSwgaW4gJWxkLCBvdXQgfiVsZCglbGQlJSkgXCIsXG4vLyAgICAvLyAgICAgICBzLT5sYXN0X2xpdCwgaW5fbGVuZ3RoLCBvdXRfbGVuZ3RoLFxuLy8gICAgLy8gICAgICAgMTAwTCAtIG91dF9sZW5ndGgqMTAwTC9pbl9sZW5ndGgpKTtcbi8vICAgIGlmIChzLm1hdGNoZXMgPCAocy5sYXN0X2xpdD4+MSkvKmludCAvMiovICYmIG91dF9sZW5ndGggPCAoaW5fbGVuZ3RoPj4xKS8qaW50IC8yKi8pIHtcbi8vICAgICAgcmV0dXJuIHRydWU7XG4vLyAgICB9XG4vLyAgfVxuLy8jZW5kaWZcblxuICByZXR1cm4gKHMubGFzdF9saXQgPT09IHMubGl0X2J1ZnNpemUtMSk7XG4gIC8qIFdlIGF2b2lkIGVxdWFsaXR5IHdpdGggbGl0X2J1ZnNpemUgYmVjYXVzZSBvZiB3cmFwYXJvdW5kIGF0IDY0S1xuICAgKiBvbiAxNiBiaXQgbWFjaGluZXMgYW5kIGJlY2F1c2Ugc3RvcmVkIGJsb2NrcyBhcmUgcmVzdHJpY3RlZCB0b1xuICAgKiA2NEstMSBieXRlcy5cbiAgICovXG59XG5cbmV4cG9ydHMuX3RyX2luaXQgID0gX3RyX2luaXQ7XG5leHBvcnRzLl90cl9zdG9yZWRfYmxvY2sgPSBfdHJfc3RvcmVkX2Jsb2NrO1xuZXhwb3J0cy5fdHJfZmx1c2hfYmxvY2sgID0gX3RyX2ZsdXNoX2Jsb2NrO1xuZXhwb3J0cy5fdHJfdGFsbHkgPSBfdHJfdGFsbHk7XG5leHBvcnRzLl90cl9hbGlnbiA9IF90cl9hbGlnbjtcblxufSx7XCIuLi91dGlscy9jb21tb25cIjozOH1dLDUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBaU3RyZWFtKCkge1xuICAvKiBuZXh0IGlucHV0IGJ5dGUgKi9cbiAgdGhpcy5pbnB1dCA9IG51bGw7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnNcbiAgdGhpcy5uZXh0X2luID0gMDtcbiAgLyogbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSBhdCBpbnB1dCAqL1xuICB0aGlzLmF2YWlsX2luID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGlucHV0IGJ5dGVzIHJlYWQgc28gZmFyICovXG4gIHRoaXMudG90YWxfaW4gPSAwO1xuICAvKiBuZXh0IG91dHB1dCBieXRlIHNob3VsZCBiZSBwdXQgdGhlcmUgKi9cbiAgdGhpcy5vdXRwdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9vdXQgPSAwO1xuICAvKiByZW1haW5pbmcgZnJlZSBzcGFjZSBhdCBvdXRwdXQgKi9cbiAgdGhpcy5hdmFpbF9vdXQgPSAwO1xuICAvKiB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgb3V0cHV0IHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX291dCA9IDA7XG4gIC8qIGxhc3QgZXJyb3IgbWVzc2FnZSwgTlVMTCBpZiBubyBlcnJvciAqL1xuICB0aGlzLm1zZyA9ICcnLypaX05VTEwqLztcbiAgLyogbm90IHZpc2libGUgYnkgYXBwbGljYXRpb25zICovXG4gIHRoaXMuc3RhdGUgPSBudWxsO1xuICAvKiBiZXN0IGd1ZXNzIGFib3V0IHRoZSBkYXRhIHR5cGU6IGJpbmFyeSBvciB0ZXh0ICovXG4gIHRoaXMuZGF0YV90eXBlID0gMi8qWl9VTktOT1dOKi87XG4gIC8qIGFkbGVyMzIgdmFsdWUgb2YgdGhlIHVuY29tcHJlc3NlZCBkYXRhICovXG4gIHRoaXMuYWRsZXIgPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFpTdHJlYW07XG5cbn0se31dLDUxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG59LHt9XSw1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykge1xuICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG4gICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG59XG59LHt9XSw1MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3MsZ2xvYmFsKXtcbi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcbmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuICBpZiAoIWlzU3RyaW5nKGYpKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBpID0gMTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWonOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcbiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuICAgICAgc3RyICs9ICcgJyArIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuXG4vLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5leHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcbiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cbiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIGN0eCA9IHtcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuICB9O1xuICAvLyBsZWdhY3kuLi5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG4gICAgLy8gbGVnYWN5Li4uXG4gICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuICB9IGVsc2UgaWYgKG9wdHMpIHtcbiAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG4gICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICByZXR1cm4gc3RyO1xufVxuXG5cbmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG4gIHZhciBoYXNoID0ge307XG5cbiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGhhc2hbdmFsXSA9IHRydWU7XG4gIH0pO1xuXG4gIHJldHVybiBoYXNoO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcbiAgICAgIHZhbHVlICYmXG4gICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcbiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZnVuY3Rpb24gaXNBcnJheShhcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuZnVuY3Rpb24gcGFkKG4pIHtcbiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG59XG5cblxudmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblxuLy8gMjYgRmViIDE2OjE5OjM0XG5mdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcbiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcbn1cblxuXG4vLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcbn07XG5cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG4gKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG4gKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG4gKiAgICAgcHJvdG90eXBlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5leHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG4gIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luO1xufTtcblxuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJyksdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcbn0se1wiLi9zdXBwb3J0L2lzQnVmZmVyXCI6NTIsXCJfcHJvY2Vzc1wiOjUxLFwiaW5oZXJpdHNcIjoxMX1dLDU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciB6aXAgPSByZXF1aXJlKCcuL3ppcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGdqLCBvcHRpb25zKSB7XG4gICAgdmFyIGNvbnRlbnQgPSB6aXAoZ2osIG9wdGlvbnMpO1xuICAgIGxvY2F0aW9uLmhyZWYgPSAnZGF0YTphcHBsaWNhdGlvbi96aXA7YmFzZTY0LCcgKyBjb250ZW50O1xufTtcblxufSx7XCIuL3ppcFwiOjYzfV0sNTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMuZW5sYXJnZSA9IGZ1bmN0aW9uIGVubGFyZ2VFeHRlbnQoZXh0ZW50LCBwdCkge1xuICAgIGlmIChwdFswXSA8IGV4dGVudC54bWluKSBleHRlbnQueG1pbiA9IHB0WzBdO1xuICAgIGlmIChwdFswXSA+IGV4dGVudC54bWF4KSBleHRlbnQueG1heCA9IHB0WzBdO1xuICAgIGlmIChwdFsxXSA8IGV4dGVudC55bWluKSBleHRlbnQueW1pbiA9IHB0WzFdO1xuICAgIGlmIChwdFsxXSA+IGV4dGVudC55bWF4KSBleHRlbnQueW1heCA9IHB0WzFdO1xuICAgIHJldHVybiBleHRlbnQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5lbmxhcmdlRXh0ZW50ID0gZnVuY3Rpb24gZW5sYXJnZUV4dGVudChleHRlbnQsIGV4dCkge1xuICAgIGlmIChleHQueG1heCA+IGV4dGVudC54bWF4KSBleHRlbnQueG1heCA9IGV4dC54bWF4O1xuICAgIGlmIChleHQueG1pbiA8IGV4dGVudC54bWluKSBleHRlbnQueG1pbiA9IGV4dC54bWluO1xuICAgIGlmIChleHQueW1heCA+IGV4dGVudC55bWF4KSBleHRlbnQueW1heCA9IGV4dC55bWF4O1xuICAgIGlmIChleHQueW1pbiA8IGV4dGVudC55bWluKSBleHRlbnQueW1pbiA9IGV4dC55bWluO1xuICAgIHJldHVybiBleHRlbnQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5ibGFuayA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHhtaW46IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgIHltaW46IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgIHhtYXg6IC1OdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgICB5bWF4OiAtTnVtYmVyLk1BWF9WQUxVRVxuICAgIH07XG59O1xuXG59LHt9XSw1NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykuanN0eXBlcztcblxubW9kdWxlLmV4cG9ydHMuZ2VvanNvbiA9IGdlb2pzb247XG5tb2R1bGUuZXhwb3J0cy5vYmogPSBvYmo7XG5cbmZ1bmN0aW9uIGdlb2pzb24oZmVhdHVyZXMpIHtcbiAgICB2YXIgZmllbGRzID0ge307XG4gICAgZmVhdHVyZXMuZm9yRWFjaChjb2xsZWN0KTtcbiAgICBmdW5jdGlvbiBjb2xsZWN0KGYpIHsgaW5oZXJpdChmaWVsZHMsIGYucHJvcGVydGllcyk7IH1cbiAgICByZXR1cm4gb2JqKGZpZWxkcyk7XG59XG5cbmZ1bmN0aW9uIGluaGVyaXQoYSwgYikge1xuICAgIGZvciAodmFyIGkgaW4gYikgeyBhW2ldID0gYltpXTsgfVxuICAgIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBvYmooXykge1xuICAgIHZhciBmaWVsZHMgPSB7fSwgbyA9IFtdO1xuICAgIGZvciAodmFyIHAgaW4gXykgZmllbGRzW3BdID0gdHlwZW9mIF9bcF07XG4gICAgZm9yICh2YXIgbiBpbiBmaWVsZHMpIHtcbiAgICAgICAgby5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IG4sXG4gICAgICAgICAgICB0eXBlOiB0eXBlc1tmaWVsZHNbbl1dXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxufSx7XCIuL3R5cGVzXCI6NjF9XSw1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cy5wb2ludCA9IGp1c3RUeXBlKCdQb2ludCcsICdQT0lOVCcpO1xubW9kdWxlLmV4cG9ydHMubGluZSA9IGp1c3RUeXBlKCdMaW5lU3RyaW5nJywgJ1BPTFlMSU5FJyk7XG5tb2R1bGUuZXhwb3J0cy5wb2x5Z29uID0ganVzdFR5cGUoJ1BvbHlnb24nLCAnUE9MWUdPTicpO1xuXG5mdW5jdGlvbiBqdXN0VHlwZSh0eXBlLCBUWVBFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGdqKSB7XG4gICAgICAgIHZhciBvZnR5cGUgPSBnai5mZWF0dXJlcy5maWx0ZXIoaXNUeXBlKHR5cGUpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb21ldHJpZXM6IG9mdHlwZS5tYXAoanVzdENvb3JkcyksXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBvZnR5cGUubWFwKGp1c3RQcm9wcyksXG4gICAgICAgICAgICB0eXBlOiBUWVBFXG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZnVuY3Rpb24ganVzdENvb3Jkcyh0KSB7XG4gICAgaWYgKHQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzBdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdC5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXVswXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24ganVzdFByb3BzKHQpIHtcbiAgICByZXR1cm4gdC5wcm9wZXJ0aWVzO1xufVxuXG5mdW5jdGlvbiBpc1R5cGUodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihmKSB7IHJldHVybiBmLmdlb21ldHJ5LnR5cGUgPT09IHQ7IH07XG59XG5cbn0se31dLDU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBleHQgPSByZXF1aXJlKCcuL2V4dGVudCcpO1xuXG5tb2R1bGUuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlUG9pbnRzKGNvb3JkaW5hdGVzLCBleHRlbnQsIHNocFZpZXcsIHNoeFZpZXcpIHtcblxuICAgIHZhciBjb250ZW50TGVuZ3RoID0gMjgsIC8vIDggaGVhZGVyLCAyMCBjb250ZW50XG4gICAgICAgIGZpbGVMZW5ndGggPSAxMDAsXG4gICAgICAgIHNocEkgPSAwLFxuICAgICAgICBzaHhJID0gMDtcblxuICAgIGNvb3JkaW5hdGVzLmZvckVhY2goZnVuY3Rpb24gd3JpdGVQb2ludChjb29yZHMsIGkpIHtcbiAgICAgICAgLy8gSEVBREVSXG4gICAgICAgIC8vIDQgcmVjb3JkIG51bWJlclxuICAgICAgICAvLyA0IGNvbnRlbnQgbGVuZ3RoIGluIDE2LWJpdCB3b3JkcyAoMjAvMilcbiAgICAgICAgc2hwVmlldy5zZXRJbnQzMihzaHBJLCBpKTtcbiAgICAgICAgc2hwVmlldy5zZXRJbnQzMihzaHBJICsgNCwgMTApO1xuXG4gICAgICAgIC8vIHJlY29yZFxuICAgICAgICAvLyAoOCArIDgpICsgNCA9IDIwIGNvbnRlbnQgbGVuZ3RoXG4gICAgICAgIHNocFZpZXcuc2V0SW50MzIoc2hwSSArIDgsIDEsIHRydWUpOyAvLyBQT0lOVD0xXG4gICAgICAgIHNocFZpZXcuc2V0RmxvYXQ2NChzaHBJICsgMTIsIGNvb3Jkc1swXSwgdHJ1ZSk7IC8vIFhcbiAgICAgICAgc2hwVmlldy5zZXRGbG9hdDY0KHNocEkgKyAyMCwgY29vcmRzWzFdLCB0cnVlKTsgLy8gWVxuXG4gICAgICAgIC8vIGluZGV4XG4gICAgICAgIHNoeFZpZXcuc2V0SW50MzIoc2h4SSwgZmlsZUxlbmd0aCAvIDIpOyAvLyBsZW5ndGggaW4gMTYtYml0IHdvcmRzXG4gICAgICAgIHNoeFZpZXcuc2V0SW50MzIoc2h4SSArIDQsIDEwKTtcblxuICAgICAgICBzaHhJICs9IDg7XG4gICAgICAgIHNocEkgKz0gY29udGVudExlbmd0aDtcbiAgICAgICAgZmlsZUxlbmd0aCArPSBjb250ZW50TGVuZ3RoO1xuICAgIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMuZXh0ZW50ID0gZnVuY3Rpb24oY29vcmRpbmF0ZXMpIHtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXMucmVkdWNlKGZ1bmN0aW9uKGV4dGVudCwgY29vcmRzKSB7XG4gICAgICAgIHJldHVybiBleHQuZW5sYXJnZShleHRlbnQsIGNvb3Jkcyk7XG4gICAgfSwgZXh0LmJsYW5rKCkpO1xufTtcblxubW9kdWxlLmV4cG9ydHMucGFydHMgPSBmdW5jdGlvbiBwYXJ0cyhnZW9tZXRyaWVzLCBUWVBFKSB7XG4gICAgcmV0dXJuIGdlb21ldHJpZXMubGVuZ3RoO1xufTtcblxubW9kdWxlLmV4cG9ydHMuc2h4TGVuZ3RoID0gZnVuY3Rpb24oY29vcmRpbmF0ZXMpIHtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXMubGVuZ3RoICogODtcbn07XG5cbm1vZHVsZS5leHBvcnRzLnNocExlbmd0aCA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzKSB7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzLmxlbmd0aCAqIDI4O1xufTtcblxufSx7XCIuL2V4dGVudFwiOjU1fV0sNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGV4dCA9IHJlcXVpcmUoJy4vZXh0ZW50JyksXG4gICAgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJyk7XG5cbm1vZHVsZS5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gd3JpdGVQb2ludHMoZ2VvbWV0cmllcywgZXh0ZW50LCBzaHBWaWV3LCBzaHhWaWV3LCBUWVBFKSB7XG5cbiAgICB2YXIgc2hwSSA9IDAsXG4gICAgICAgIHNoeEkgPSAwLFxuICAgICAgICBzaHhPZmZzZXQgPSAxMDA7XG5cbiAgICBnZW9tZXRyaWVzLmZvckVhY2god3JpdGVQb2x5TGluZSk7XG5cbiAgICBmdW5jdGlvbiB3cml0ZVBvbHlMaW5lKGNvb3JkaW5hdGVzLCBpKSB7XG5cbiAgICAgICAgdmFyIGZsYXR0ZW5lZCA9IGp1c3RDb29yZHMoY29vcmRpbmF0ZXMpLFxuICAgICAgICAgICAgbm9QYXJ0cyA9IHBhcnRzKFtjb29yZGluYXRlc10sIFRZUEUpLFxuICAgICAgICAgICAgY29udGVudExlbmd0aCA9IChmbGF0dGVuZWQubGVuZ3RoICogMTYpICsgNDggKyAobm9QYXJ0cyAtIDEpICogNDtcblxuICAgICAgICB2YXIgZmVhdHVyZUV4dGVudCA9IGZsYXR0ZW5lZC5yZWR1Y2UoZnVuY3Rpb24oZXh0ZW50LCBjKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0LmVubGFyZ2UoZXh0ZW50LCBjKTtcbiAgICAgICAgfSwgZXh0LmJsYW5rKCkpO1xuXG4gICAgICAgIC8vIElOREVYXG4gICAgICAgIHNoeFZpZXcuc2V0SW50MzIoc2h4SSwgc2h4T2Zmc2V0IC8gMik7IC8vIG9mZnNldFxuICAgICAgICBzaHhWaWV3LnNldEludDMyKHNoeEkgKyA0LCBjb250ZW50TGVuZ3RoIC8gMik7IC8vIG9mZnNldCBsZW5ndGhcblxuICAgICAgICBzaHhJICs9IDg7XG4gICAgICAgIHNoeE9mZnNldCArPSBjb250ZW50TGVuZ3RoICsgODtcblxuICAgICAgICBzaHBWaWV3LnNldEludDMyKHNocEksIGkgKyAxKTsgLy8gcmVjb3JkIG51bWJlclxuICAgICAgICBzaHBWaWV3LnNldEludDMyKHNocEkgKyA0LCBjb250ZW50TGVuZ3RoIC8gMik7IC8vIGxlbmd0aFxuICAgICAgICBzaHBWaWV3LnNldEludDMyKHNocEkgKyA4LCBUWVBFLCB0cnVlKTsgLy8gUE9MWUxJTkU9M1xuICAgICAgICBzaHBWaWV3LnNldEZsb2F0NjQoc2hwSSArIDEyLCBmZWF0dXJlRXh0ZW50LnhtaW4sIHRydWUpOyAvLyBFWFRFTlRcbiAgICAgICAgc2hwVmlldy5zZXRGbG9hdDY0KHNocEkgKyAyMCwgZmVhdHVyZUV4dGVudC55bWluLCB0cnVlKTtcbiAgICAgICAgc2hwVmlldy5zZXRGbG9hdDY0KHNocEkgKyAyOCwgZmVhdHVyZUV4dGVudC54bWF4LCB0cnVlKTtcbiAgICAgICAgc2hwVmlldy5zZXRGbG9hdDY0KHNocEkgKyAzNiwgZmVhdHVyZUV4dGVudC55bWF4LCB0cnVlKTtcbiAgICAgICAgc2hwVmlldy5zZXRJbnQzMihzaHBJICsgNDQsIG5vUGFydHMsIHRydWUpO1xuICAgICAgICBzaHBWaWV3LnNldEludDMyKHNocEkgKyA0OCwgZmxhdHRlbmVkLmxlbmd0aCwgdHJ1ZSk7IC8vIFBPSU5UU1xuICAgICAgICBzaHBWaWV3LnNldEludDMyKHNocEkgKyA1MiwgMCwgdHJ1ZSk7IC8vIFRoZSBmaXJzdCBwYXJ0IC0gaW5kZXggemVyb1xuXG4gICAgICAgIHZhciBvbmx5UGFydHMgPSBjb29yZGluYXRlcy5yZWR1Y2UoZnVuY3Rpb24gKGFyciwgY29vcmRzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb29yZHNbMF1bMF0pKSB7XG4gICAgICAgICAgICAgICAgYXJyID0gYXJyLmNvbmNhdChjb29yZHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChjb29yZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgfSwgW10pO1xuICAgICAgICBmb3IgKHZhciBwID0gMTsgcCA8IG5vUGFydHM7IHArKykge1xuICAgICAgICAgICAgc2hwVmlldy5zZXRJbnQzMiggLy8gc2V0IHBhcnQgaW5kZXhcbiAgICAgICAgICAgICAgICBzaHBJICsgNTIgKyAocCAqIDQpLFxuICAgICAgICAgICAgICAgIG9ubHlQYXJ0cy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIsIGlkeCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4IDwgcCA/IGEgKyBiLmxlbmd0aCA6IGE7XG4gICAgICAgICAgICAgICAgfSwgMCksXG4gICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZsYXR0ZW5lZC5mb3JFYWNoKGZ1bmN0aW9uIHdyaXRlTGluZShjb29yZHMsIGkpIHtcbiAgICAgICAgICAgIHNocFZpZXcuc2V0RmxvYXQ2NChzaHBJICsgNTYgKyAoaSAqIDE2KSArIChub1BhcnRzIC0gMSkgKiA0LCBjb29yZHNbMF0sIHRydWUpOyAvLyBYXG4gICAgICAgICAgICBzaHBWaWV3LnNldEZsb2F0NjQoc2hwSSArIDU2ICsgKGkgKiAxNikgKyAobm9QYXJ0cyAtIDEpICogNCArIDgsIGNvb3Jkc1sxXSwgdHJ1ZSk7IC8vIFlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2hwSSArPSBjb250ZW50TGVuZ3RoICsgODtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5zaHBMZW5ndGggPSBmdW5jdGlvbihnZW9tZXRyaWVzKSB7XG4gICAgcmV0dXJuIChnZW9tZXRyaWVzLmxlbmd0aCAqIDU2KSArXG4gICAgICAgIC8vIHBvaW50c1xuICAgICAgICAoanVzdENvb3JkcyhnZW9tZXRyaWVzKS5sZW5ndGggKiAxNik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5zaHhMZW5ndGggPSBmdW5jdGlvbihnZW9tZXRyaWVzKSB7XG4gICAgcmV0dXJuIGdlb21ldHJpZXMubGVuZ3RoICogODtcbn07XG5cbm1vZHVsZS5leHBvcnRzLmV4dGVudCA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzKSB7XG4gICAgcmV0dXJuIGp1c3RDb29yZHMoY29vcmRpbmF0ZXMpLnJlZHVjZShmdW5jdGlvbihleHRlbnQsIGMpIHtcbiAgICAgICAgcmV0dXJuIGV4dC5lbmxhcmdlKGV4dGVudCwgYyk7XG4gICAgfSwgZXh0LmJsYW5rKCkpO1xufTtcblxuZnVuY3Rpb24gcGFydHMoZ2VvbWV0cmllcywgVFlQRSkge1xuICAgIHZhciBubyA9IDE7XG4gICAgaWYgKFRZUEUgPT09IHR5cGVzLmdlb21ldHJpZXMuUE9MWUdPTiB8fCBUWVBFID09PSB0eXBlcy5nZW9tZXRyaWVzLlBPTFlMSU5FKSAge1xuICAgICAgICBubyA9IGdlb21ldHJpZXMucmVkdWNlKGZ1bmN0aW9uIChubywgY29vcmRzKSB7XG4gICAgICAgICAgICBubyArPSBjb29yZHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29vcmRzWzBdWzBdWzBdKSkgeyAvLyBtdWx0aVxuICAgICAgICAgICAgICAgIG5vICs9IGNvb3Jkcy5yZWR1Y2UoZnVuY3Rpb24gKG5vLCByaW5ncykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm8gKyByaW5ncy5sZW5ndGggLSAxOyAvLyBtaW51cyBvdXRlclxuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vO1xufVxuXG5tb2R1bGUuZXhwb3J0cy5wYXJ0cyA9IHBhcnRzO1xuXG5mdW5jdGlvbiB0b3RhbFBvaW50cyhnZW9tZXRyaWVzKSB7XG4gICAgdmFyIHN1bSA9IDA7XG4gICAgZ2VvbWV0cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGcpIHsgc3VtICs9IGcubGVuZ3RoOyB9KTtcbiAgICByZXR1cm4gc3VtO1xufVxuXG5mdW5jdGlvbiBqdXN0Q29vcmRzKGNvb3JkcywgbCkge1xuICAgIGlmIChsID09PSB1bmRlZmluZWQpIGwgPSBbXTtcbiAgICBpZiAodHlwZW9mIGNvb3Jkc1swXVswXSA9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gY29vcmRzLnJlZHVjZShmdW5jdGlvbihtZW1vLCBjKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVtby5jb25jYXQoanVzdENvb3JkcyhjKSk7XG4gICAgICAgIH0sIGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb29yZHM7XG4gICAgfVxufVxuXG5cbn0se1wiLi9leHRlbnRcIjo1NSxcIi4vdHlwZXNcIjo2MX1dLDYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gJ0dFT0dDU1tcIkdDU19XR1NfMTk4NFwiLERBVFVNW1wiRF9XR1NfMTk4NFwiLFNQSEVST0lEW1wiV0dTXzE5ODRcIiw2Mzc4MTM3LDI5OC4yNTcyMjM1NjNdXSxQUklNRU1bXCJHcmVlbndpY2hcIiwwXSxVTklUW1wiRGVncmVlXCIsMC4wMTc0NTMyOTI1MTk5NDMyOTVdXSc7XG5cbn0se31dLDYxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzLmdlb21ldHJpZXMgPSB7XG4gICAgTlVMTDogMCxcbiAgICBQT0lOVDogMSxcbiAgICBQT0xZTElORTogMyxcbiAgICBQT0xZR09OOiA1LFxuICAgIE1VTFRJUE9JTlQ6IDgsXG4gICAgUE9JTlRaOiAxMSxcbiAgICBQT0xZTElORVo6IDEzLFxuICAgIFBPTFlHT05aOiAxNSxcbiAgICBNVUxUSVBPSU5UWjogMTgsXG4gICAgUE9JTlRNOiAyMSxcbiAgICBQT0xZTElORU06IDIzLFxuICAgIFBPTFlHT05NOiAyNSxcbiAgICBNVUxUSVBPSU5UTTogMjgsXG4gICAgTVVMVElQQVRDSDogMzEsXG59O1xuXG59LHt9XSw2MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJyksXG4gICAgZGJmID0gcmVxdWlyZSgnZGJmJyksXG4gICAgcHJqID0gcmVxdWlyZSgnLi9wcmonKSxcbiAgICBleHQgPSByZXF1aXJlKCcuL2V4dGVudCcpLFxuICAgIGdldEZpZWxkcyA9IHJlcXVpcmUoJy4vZmllbGRzJyksXG4gICAgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JyksXG4gICAgcG9pbnRXcml0ZXIgPSByZXF1aXJlKCcuL3BvaW50cycpLFxuICAgIHBvbHlXcml0ZXIgPSByZXF1aXJlKCcuL3BvbHknKTtcblxudmFyIHdyaXRlcnMgPSB7XG4gICAgMTogcG9pbnRXcml0ZXIsXG4gICAgNTogcG9seVdyaXRlcixcbiAgICAzOiBwb2x5V3JpdGVyXG59O1xuXG52YXIgcmVjb3JkSGVhZGVyTGVuZ3RoID0gODtcblxubW9kdWxlLmV4cG9ydHMgPSB3cml0ZTtcblxuLy8gTG93LWxldmVsIHdyaXRpbmcgaW50ZXJmYWNlXG5mdW5jdGlvbiB3cml0ZShyb3dzLCBnZW9tZXRyeV90eXBlLCBnZW9tZXRyaWVzLCBjYWxsYmFjaykge1xuXG4gICAgdmFyIFRZUEUgPSB0eXBlcy5nZW9tZXRyaWVzW2dlb21ldHJ5X3R5cGVdLFxuICAgICAgICB3cml0ZXIgPSB3cml0ZXJzW1RZUEVdLFxuICAgICAgICBwYXJ0cyA9IHdyaXRlci5wYXJ0cyhnZW9tZXRyaWVzLCBUWVBFKSxcbiAgICAgICAgc2hwTGVuZ3RoID0gMTAwICsgKHBhcnRzIC0gZ2VvbWV0cmllcy5sZW5ndGgpICogNCArIHdyaXRlci5zaHBMZW5ndGgoZ2VvbWV0cmllcyksXG4gICAgICAgIHNoeExlbmd0aCA9IDEwMCArIHdyaXRlci5zaHhMZW5ndGgoZ2VvbWV0cmllcyksXG4gICAgICAgIHNocEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzaHBMZW5ndGgpLFxuICAgICAgICBzaHBWaWV3ID0gbmV3IERhdGFWaWV3KHNocEJ1ZmZlciksXG4gICAgICAgIHNoeEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzaHhMZW5ndGgpLFxuICAgICAgICBzaHhWaWV3ID0gbmV3IERhdGFWaWV3KHNoeEJ1ZmZlciksXG4gICAgICAgIGV4dGVudCA9IHdyaXRlci5leHRlbnQoZ2VvbWV0cmllcyk7XG5cbiAgICB3cml0ZUhlYWRlcihzaHBWaWV3LCBUWVBFKTtcbiAgICB3cml0ZUhlYWRlcihzaHhWaWV3LCBUWVBFKTtcbiAgICB3cml0ZUV4dGVudChleHRlbnQsIHNocFZpZXcpO1xuICAgIHdyaXRlRXh0ZW50KGV4dGVudCwgc2h4Vmlldyk7XG5cbiAgICB3cml0ZXIud3JpdGUoZ2VvbWV0cmllcywgZXh0ZW50LFxuICAgICAgICBuZXcgRGF0YVZpZXcoc2hwQnVmZmVyLCAxMDApLFxuICAgICAgICBuZXcgRGF0YVZpZXcoc2h4QnVmZmVyLCAxMDApLFxuICAgICAgICBUWVBFKTtcblxuICAgIHNocFZpZXcuc2V0SW50MzIoMjQsIHNocExlbmd0aCAvIDIpO1xuICAgIHNoeFZpZXcuc2V0SW50MzIoMjQsICg1MCArIGdlb21ldHJpZXMubGVuZ3RoICogNCkpO1xuXG4gICAgdmFyIGRiZkJ1ZiA9IGRiZi5zdHJ1Y3R1cmUocm93cyk7XG5cbiAgICBjYWxsYmFjayhudWxsLCB7XG4gICAgICAgIHNocDogc2hwVmlldyxcbiAgICAgICAgc2h4OiBzaHhWaWV3LFxuICAgICAgICBkYmY6IGRiZkJ1ZixcbiAgICAgICAgcHJqOiBwcmpcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gd3JpdGVIZWFkZXIodmlldywgVFlQRSkge1xuICAgIHZpZXcuc2V0SW50MzIoMCwgOTk5NCk7XG4gICAgdmlldy5zZXRJbnQzMigyOCwgMTAwMCwgdHJ1ZSk7XG4gICAgdmlldy5zZXRJbnQzMigzMiwgVFlQRSwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRXh0ZW50KGV4dGVudCwgdmlldykge1xuICAgIHZpZXcuc2V0RmxvYXQ2NCgzNiwgZXh0ZW50LnhtaW4sIHRydWUpO1xuICAgIHZpZXcuc2V0RmxvYXQ2NCg0NCwgZXh0ZW50LnltaW4sIHRydWUpO1xuICAgIHZpZXcuc2V0RmxvYXQ2NCg1MiwgZXh0ZW50LnhtYXgsIHRydWUpO1xuICAgIHZpZXcuc2V0RmxvYXQ2NCg2MCwgZXh0ZW50LnltYXgsIHRydWUpO1xufVxuXG59LHtcIi4vZXh0ZW50XCI6NTUsXCIuL2ZpZWxkc1wiOjU2LFwiLi9wb2ludHNcIjo1OCxcIi4vcG9seVwiOjU5LFwiLi9wcmpcIjo2MCxcIi4vdHlwZXNcIjo2MSxcImFzc2VydFwiOjEsXCJkYmZcIjo1fV0sNjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciB3cml0ZSA9IHJlcXVpcmUoJy4vd3JpdGUnKSxcbiAgICBnZW9qc29uID0gcmVxdWlyZSgnLi9nZW9qc29uJyksXG4gICAgcHJqID0gcmVxdWlyZSgnLi9wcmonKSxcbiAgICBKU1ppcCA9IHJlcXVpcmUoJ2pzemlwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZ2osIG9wdGlvbnMpIHtcblxuICAgIHZhciB6aXAgPSBuZXcgSlNaaXAoKSxcbiAgICAgICAgbGF5ZXJzID0gemlwLmZvbGRlcihvcHRpb25zICYmIG9wdGlvbnMuZm9sZGVyID8gb3B0aW9ucy5mb2xkZXIgOiAnbGF5ZXJzJyk7XG5cbiAgICBbZ2VvanNvbi5wb2ludChnaiksIGdlb2pzb24ubGluZShnaiksIGdlb2pzb24ucG9seWdvbihnaildXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgaWYgKGwuZ2VvbWV0cmllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdyaXRlKFxuICAgICAgICAgICAgICAgIC8vIGZpZWxkIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgbC5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIC8vIGdlb21ldHJ5IHR5cGVcbiAgICAgICAgICAgICAgICBsLnR5cGUsXG4gICAgICAgICAgICAgICAgLy8gZ2VvbWV0cmllc1xuICAgICAgICAgICAgICAgIGwuZ2VvbWV0cmllcyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIsIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy50eXBlc1tsLnR5cGUudG9Mb3dlckNhc2UoKV0gPyBvcHRpb25zLnR5cGVzW2wudHlwZS50b0xvd2VyQ2FzZSgpXSA6IGwudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzLmZpbGUoZmlsZU5hbWUgKyAnLnNocCcsIGZpbGVzLnNocC5idWZmZXIsIHsgYmluYXJ5OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBsYXllcnMuZmlsZShmaWxlTmFtZSArICcuc2h4JywgZmlsZXMuc2h4LmJ1ZmZlciwgeyBiaW5hcnk6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxheWVycy5maWxlKGZpbGVOYW1lICsgJy5kYmYnLCBmaWxlcy5kYmYuYnVmZmVyLCB7IGJpbmFyeTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzLmZpbGUoZmlsZU5hbWUgKyAnLnByaicsIHByaik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBnZW5lcmF0ZU9wdGlvbnMgPSB7IGNvbXByZXNzaW9uOidTVE9SRScgfTtcblxuICAgIGlmICghcHJvY2Vzcy5icm93c2VyKSB7XG4gICAgICBnZW5lcmF0ZU9wdGlvbnMudHlwZSA9ICdub2RlYnVmZmVyJztcbiAgICB9XG5cbiAgICByZXR1cm4gemlwLmdlbmVyYXRlKGdlbmVyYXRlT3B0aW9ucyk7XG59O1xuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcbn0se1wiLi9nZW9qc29uXCI6NTcsXCIuL3ByalwiOjYwLFwiLi93cml0ZVwiOjYyLFwiX3Byb2Nlc3NcIjo1MSxcImpzemlwXCI6MjB9XSw2NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cy5kb3dubG9hZCA9IHJlcXVpcmUoJy4vc3JjL2Rvd25sb2FkJylcbm1vZHVsZS5leHBvcnRzLndyaXRlID0gcmVxdWlyZSgnLi9zcmMvd3JpdGUnKVxubW9kdWxlLmV4cG9ydHMuemlwID0gcmVxdWlyZSgnLi9zcmMvemlwJylcblxufSx7XCIuL3NyYy9kb3dubG9hZFwiOjU0LFwiLi9zcmMvd3JpdGVcIjo2MixcIi4vc3JjL3ppcFwiOjYzfV19LHt9LFs2NF0pKDY0KVxufSk7IiwiKGZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PVwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/XCJ1bmRlZmluZWRcIj09dHlwZW9mIGdsb2JhbD9cInVuZGVmaW5lZFwiPT10eXBlb2Ygc2VsZj90aGlzOnNlbGY6Z2xvYmFsOndpbmRvdyx0LnNocD1lKCl9fSkoZnVuY3Rpb24oKXt2YXIgYT1NYXRoLmxvZyxuPU1hdGguYWJzLHI9TWF0aC5mbG9vcixvPU1hdGgucG93LGQ9U3RyaW5nLmZyb21DaGFyQ29kZSxsPU1hdGgubWluLHA7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcyhkLGUsbil7ZnVuY3Rpb24gdChvLGkpe2lmKCFlW29dKXtpZighZFtvXSl7dmFyIGw9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighaSYmbClyZXR1cm4gbChvLCEwKTtpZihyKXJldHVybiByKG8sITApO3ZhciBjPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgYy5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGN9dmFyIGE9ZVtvXT17ZXhwb3J0czp7fX07ZFtvXVswXS5jYWxsKGEuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgYT1kW29dWzFdW2VdO3JldHVybiB0KGF8fGUpfSxhLGEuZXhwb3J0cyxzLGQsZSxuKX1yZXR1cm4gZVtvXS5leHBvcnRzfWZvcih2YXIgcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGE9MDthPG4ubGVuZ3RoO2ErKyl0KG5bYV0pO3JldHVybiB0fXJldHVybiBzfSgpKHsxOltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1lKFwibGllXCIpLG49ZShcImJ1ZmZlclwiKS5CdWZmZXI7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgYShmdW5jdGlvbih0LGEpe3ZhciByPWUuc2xpY2UoLTMpLHM9bmV3IFhNTEh0dHBSZXF1ZXN0O3Mub3BlbihcIkdFVFwiLGUsITApLFwicHJqXCIhPT1yJiZcImNwZ1wiIT09ciYmKHMucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIikscy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIDM5OTxzLnN0YXR1cz9cInByalwiPT09cnx8XCJjcGdcIj09PXI/dCghMSk6YShuZXcgRXJyb3Iocy5zdGF0dXMpKTpcInByalwiIT09ciYmXCJjcGdcIiE9PXI/dChuLmZyb20ocy5yZXNwb25zZSkpOnQocy5yZXNwb25zZSl9LCExKSxzLnNlbmQoKX0pfX0se2J1ZmZlcjo3LGxpZTozNX1dLDI6W2Z1bmN0aW9uKGUsdCl7KGZ1bmN0aW9uKGEpeyd1c2Ugc3RyaWN0Jzt2YXIgbj1lKFwiLi9iaW5hcnlhamF4LWJyb3dzZXJcIikscj1lKFwiYnVmZmVyXCIpLkJ1ZmZlcjt0LmV4cG9ydHM9YXN5bmMgZnVuY3Rpb24oZSl7aWYoIWEuZmV0Y2gpcmV0dXJuIG4oZSk7dmFyIHQ9ZS5zbGljZSgtMykudG9Mb3dlckNhc2UoKSxzPVwicHJqXCI9PT10fHxcImNwZ1wiPT09dDt0cnl7dmFyIGk9YXdhaXQgZmV0Y2goZSk7aWYoMzk5PGkuc3RhdHVzKXRocm93IG5ldyBFcnJvcihpLnN0YXR1c1RleHQpO2lmKHMpcmV0dXJuIGkudGV4dCgpO3ZhciBpPWF3YWl0IGkuYXJyYXlCdWZmZXIoKTtyZXR1cm4gci5mcm9tKGkpfWNhdGNoKHQpe2lmKHMpcmV0dXJuITE7dGhyb3cgdH19fSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBnbG9iYWw/XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGY/XCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdz97fTp3aW5kb3c6c2VsZjpnbG9iYWwpfSx7XCIuL2JpbmFyeWFqYXgtYnJvd3NlclwiOjEsYnVmZmVyOjd9XSwzOltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBuKGUpe2Zvcih2YXIgdD0wLGE9MSxuPWUubGVuZ3RoLHIsczthPG47KXI9c3x8ZVswXSxzPWVbYV0sdCs9KHNbMF0tclswXSkqKHNbMV0rclsxXSksYSsrO3JldHVybiAwPHR9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBuKHQpfHwhZS5sZW5ndGg/ZS5wdXNoKFt0XSk6ZVtlLmxlbmd0aC0xXS5wdXNoKHQpLGV9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZT9mdW5jdGlvbih0LGEpe3JldHVybiBlLmludmVyc2UoW3QucmVhZERvdWJsZUxFKGEpLHQucmVhZERvdWJsZUxFKGErOCldKX06ZnVuY3Rpb24oZSx0KXtyZXR1cm5bZS5yZWFkRG91YmxlTEUodCksZS5yZWFkRG91YmxlTEUodCs4KV19fWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGk/dm9pZCh0aGlzLmJ1ZmZlcj1lLHRoaXMuc2hwRnVuY3ModCksdGhpcy5yb3dzPXRoaXMuZ2V0Um93cygpKTpuZXcgaShlLHQpfWkucHJvdG90eXBlLnBhcnNlUG9pbnQ9ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJQb2ludFwiLGNvb3JkaW5hdGVzOnRoaXMucGFyc2VDb29yZChlLDApfX0saS5wcm90b3R5cGUucGFyc2VaUG9pbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJzZVBvaW50KGUpO3JldHVybiB0LmNvb3JkaW5hdGVzLnB1c2goZS5yZWFkRG91YmxlTEUoMTYpKSx0fSxpLnByb3RvdHlwZS5wYXJzZVBvaW50QXJyYXk9ZnVuY3Rpb24oZSx0LGEpe2Zvcih2YXIgbj1bXSxyPTA7cjxhOyluLnB1c2godGhpcy5wYXJzZUNvb3JkKGUsdCkpLHQrPTE2LHIrKztyZXR1cm4gbn0saS5wcm90b3R5cGUucGFyc2VaUG9pbnRBcnJheT1mdW5jdGlvbihlLHQsYSxuKXtmb3IodmFyIHI9MDtyPGE7KW5bcl0ucHVzaChlLnJlYWREb3VibGVMRSh0KSkscisrLHQrPTg7cmV0dXJuIG59LGkucHJvdG90eXBlLnBhcnNlQXJyYXlHcm91cD1mdW5jdGlvbihlLHQsYSxuLHIpe2Zvcih2YXIgcz1bXSxpPTAsbz0wLGQsbDtpPG47KShpKyssYSs9NCxkPW8sbz1pPT09bj9yOmUucmVhZEludDMyTEUoYSksbD1vLWQsISFsKSYmKHMucHVzaCh0aGlzLnBhcnNlUG9pbnRBcnJheShlLHQsbCkpLHQrPWw8PDQpO3JldHVybiBzfSxpLnByb3RvdHlwZS5wYXJzZVpBcnJheUdyb3VwPWZ1bmN0aW9uKGUsdCxhLG4pe2Zvcih2YXIgcj0wO3I8YTspbltyXT10aGlzLnBhcnNlWlBvaW50QXJyYXkoZSx0LG5bcl0ubGVuZ3RoLG5bcl0pLHQrPW5bcl0ubGVuZ3RoPDwzLHIrKztyZXR1cm4gbn0saS5wcm90b3R5cGUucGFyc2VNdWx0aVBvaW50PWZ1bmN0aW9uKGUpe3ZhciB0PXt9LGE9dGhpcy5wYXJzZUNvb3JkKGUsMCksbj10aGlzLnBhcnNlQ29vcmQoZSwxNik7dC5iYm94PVthWzBdLGFbMV0sblswXSxuWzFdXTt2YXIgcj1lLnJlYWRJbnQzMkxFKDMyLCEwKSxzPTM2O3JldHVybiAxPT09cj8odC50eXBlPVwiUG9pbnRcIix0LmNvb3JkaW5hdGVzPXRoaXMucGFyc2VDb29yZChlLHMpKToodC50eXBlPVwiTXVsdGlQb2ludFwiLHQuY29vcmRpbmF0ZXM9dGhpcy5wYXJzZVBvaW50QXJyYXkoZSxzLHIpKSx0fSxpLnByb3RvdHlwZS5wYXJzZVpNdWx0aVBvaW50PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyc2VNdWx0aVBvaW50KGUpLGE7aWYoXCJQb2ludFwiPT09dC50eXBlKXJldHVybiB0LmNvb3JkaW5hdGVzLnB1c2goZS5yZWFkRG91YmxlTEUoNzIpKSx0O2E9dC5jb29yZGluYXRlcy5sZW5ndGg7dmFyIG49NTIrKGE8PDQpO3JldHVybiB0LmNvb3JkaW5hdGVzPXRoaXMucGFyc2VaUG9pbnRBcnJheShlLG4sYSx0LmNvb3JkaW5hdGVzKSx0fSxpLnByb3RvdHlwZS5wYXJzZVBvbHlsaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LGE9dGhpcy5wYXJzZUNvb3JkKGUsMCksbj10aGlzLnBhcnNlQ29vcmQoZSwxNik7dC5iYm94PVthWzBdLGFbMV0sblswXSxuWzFdXTt2YXIgcj1lLnJlYWRJbnQzMkxFKDMyKSxzPWUucmVhZEludDMyTEUoMzYpLGksbztyZXR1cm4gMT09PXI/KHQudHlwZT1cIkxpbmVTdHJpbmdcIixpPTQ0LHQuY29vcmRpbmF0ZXM9dGhpcy5wYXJzZVBvaW50QXJyYXkoZSxpLHMpKToodC50eXBlPVwiTXVsdGlMaW5lU3RyaW5nXCIsaT00MCsocjw8Miksbz00MCx0LmNvb3JkaW5hdGVzPXRoaXMucGFyc2VBcnJheUdyb3VwKGUsaSxvLHIscykpLHR9LGkucHJvdG90eXBlLnBhcnNlWlBvbHlsaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyc2VQb2x5bGluZShlKSxhPXQuY29vcmRpbmF0ZXMubGVuZ3RoLG47aWYoXCJMaW5lU3RyaW5nXCI9PT10LnR5cGUpcmV0dXJuIG49NjArKGE8PDQpLHQuY29vcmRpbmF0ZXM9dGhpcy5wYXJzZVpQb2ludEFycmF5KGUsbixhLHQuY29vcmRpbmF0ZXMpLHQ7dmFyIHI9dC5jb29yZGluYXRlcy5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0Lmxlbmd0aH0sMCk7cmV0dXJuIG49NTYrKHI8PDQpKyhhPDwyKSx0LmNvb3JkaW5hdGVzPXRoaXMucGFyc2VaQXJyYXlHcm91cChlLG4sYSx0LmNvb3JkaW5hdGVzKSx0fSxpLnByb3RvdHlwZS5wb2x5RnVuY3M9ZnVuY3Rpb24oZSl7cmV0dXJuXCJMaW5lU3RyaW5nXCI9PT1lLnR5cGU/KGUudHlwZT1cIlBvbHlnb25cIixlLmNvb3JkaW5hdGVzPVtlLmNvb3JkaW5hdGVzXSxlKTooZS5jb29yZGluYXRlcz1lLmNvb3JkaW5hdGVzLnJlZHVjZShyLFtdKSwxPT09ZS5jb29yZGluYXRlcy5sZW5ndGg/KGUudHlwZT1cIlBvbHlnb25cIixlLmNvb3JkaW5hdGVzPWUuY29vcmRpbmF0ZXNbMF0sZSk6KGUudHlwZT1cIk11bHRpUG9seWdvblwiLGUpKX0saS5wcm90b3R5cGUucGFyc2VQb2x5Z29uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBvbHlGdW5jcyh0aGlzLnBhcnNlUG9seWxpbmUoZSkpfSxpLnByb3RvdHlwZS5wYXJzZVpQb2x5Z29uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBvbHlGdW5jcyh0aGlzLnBhcnNlWlBvbHlsaW5lKGUpKX07dmFyIG89ezE6XCJwYXJzZVBvaW50XCIsMzpcInBhcnNlUG9seWxpbmVcIiw1OlwicGFyc2VQb2x5Z29uXCIsODpcInBhcnNlTXVsdGlQb2ludFwiLDExOlwicGFyc2VaUG9pbnRcIiwxMzpcInBhcnNlWlBvbHlsaW5lXCIsMTU6XCJwYXJzZVpQb2x5Z29uXCIsMTg6XCJwYXJzZVpNdWx0aVBvaW50XCJ9O2kucHJvdG90eXBlLnNocEZ1bmNzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0U2hwQ29kZSgpO2lmKDIwPHQmJih0LT0yMCksISh0IGluIG8pKXRocm93IG5ldyBFcnJvcihcIkkgZG9uJ3Qga25vdyB0aGF0IHNocCB0eXBlXCIpO3RoaXMucGFyc2VGdW5jPXRoaXNbb1t0XV0sdGhpcy5wYXJzZUNvb3JkPXMoZSl9LGkucHJvdG90eXBlLmdldFNocENvZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJzZUhlYWRlcigpLnNocENvZGV9LGkucHJvdG90eXBlLnBhcnNlSGVhZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5idWZmZXIuc2xpY2UoMCwxMDApO3JldHVybntsZW5ndGg6ZS5yZWFkSW50MzJCRSgyNCksdmVyc2lvbjplLnJlYWRJbnQzMkxFKDI4KSxzaHBDb2RlOmUucmVhZEludDMyTEUoMzIpLGJib3g6W2UucmVhZERvdWJsZUxFKDM2KSxlLnJlYWREb3VibGVMRSg0NCksZS5yZWFkRG91YmxlTEUoNTIpLGUucmVhZERvdWJsZUxFKDUyKV19fSxpLnByb3RvdHlwZS5nZXRSb3dzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTEwMCx0PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsYT1bXSxuO2U8dDspbj10aGlzLmdldFJvdyhlKSxlKz04LGUrPW4ubGVuLG4udHlwZSYmYS5wdXNoKHRoaXMucGFyc2VGdW5jKG4uZGF0YSkpO3JldHVybiBhfSxpLnByb3RvdHlwZS5nZXRSb3c9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5idWZmZXIuc2xpY2UoZSxlKzEyKSxhPXQucmVhZEludDMyQkUoNCk8PDEsbj10aGlzLmJ1ZmZlci5zbGljZShlKzEyLGUrYSs4KTtyZXR1cm57aWQ6dC5yZWFkSW50MzJCRSgwKSxsZW46YSxkYXRhOm4sdHlwZTp0LnJlYWRJbnQzMkxFKDgpfX0sdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBpKGUsdCkucm93c319LHt9XSw0OltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1lKFwianN6aXBcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBhKGUpLG49dC5maWxlKC8uKy8pLHI9e307cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbihlKXtyW2UubmFtZV09XCJzaHBcIj09PWUubmFtZS5zbGljZSgtMykudG9Mb3dlckNhc2UoKXx8XCJkYmZcIj09PWUubmFtZS5zbGljZSgtMykudG9Mb3dlckNhc2UoKT9lLmFzTm9kZUJ1ZmZlcigpOmUuYXNUZXh0KCl9KSxyfX0se2pzemlwOjIwfV0sNTpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBuKGUpe3ZhciB0PWUubGVuZ3RoO2lmKDA8dCU0KXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDRcIik7dmFyIGE9ZS5pbmRleE9mKFwiPVwiKTstMT09PWEmJihhPXQpO3ZhciBuPWE9PT10PzA6NC1hJTQ7cmV0dXJuW2Esbl19ZnVuY3Rpb24gcihlLHQsYSl7cmV0dXJuIDMqKHQrYSkvNC1hfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9bihlKSxhPXRbMF0scz10WzFdLG89bmV3IHUocihlLGEscykpLGQ9MCxsPTA8cz9hLTQ6YSxwLG07Zm9yKG09MDttPGw7bSs9NClwPWNbZS5jaGFyQ29kZUF0KG0pXTw8MTh8Y1tlLmNoYXJDb2RlQXQobSsxKV08PDEyfGNbZS5jaGFyQ29kZUF0KG0rMildPDw2fGNbZS5jaGFyQ29kZUF0KG0rMyldLG9bZCsrXT0yNTUmcD4+MTYsb1tkKytdPTI1NSZwPj44LG9bZCsrXT0yNTUmcDtyZXR1cm4gMj09PXMmJihwPWNbZS5jaGFyQ29kZUF0KG0pXTw8MnxjW2UuY2hhckNvZGVBdChtKzEpXT4+NCxvW2QrK109MjU1JnApLDE9PT1zJiYocD1jW2UuY2hhckNvZGVBdChtKV08PDEwfGNbZS5jaGFyQ29kZUF0KG0rMSldPDw0fGNbZS5jaGFyQ29kZUF0KG0rMildPj4yLG9bZCsrXT0yNTUmcD4+OCxvW2QrK109MjU1JnApLG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4gcFs2MyZlPj4xOF0rcFs2MyZlPj4xMl0rcFs2MyZlPj42XStwWzYzJmVdfWZ1bmN0aW9uIGQoZSx0LGEpe2Zvcih2YXIgbj1bXSxyPXQscztyPGE7cis9MylzPSgxNjcxMTY4MCZlW3JdPDwxNikrKDY1MjgwJmVbcisxXTw8OCkrKDI1NSZlW3IrMl0pLG4ucHVzaChvKHMpKTtyZXR1cm4gbi5qb2luKFwiXCIpfWZ1bmN0aW9uIGwoZSl7Zm9yKHZhciB0PWUubGVuZ3RoLGE9dCUzLG49W10scj0xNjM4MyxzPTAsbz10LWEsbDtzPG87cys9ciluLnB1c2goZChlLHMscytyPm8/bzpzK3IpKTtyZXR1cm4gMT09PWE/KGw9ZVt0LTFdLG4ucHVzaChwW2w+PjJdK3BbNjMmbDw8NF0rXCI9PVwiKSk6Mj09PWEmJihsPShlW3QtMl08PDgpK2VbdC0xXSxuLnB1c2gocFtsPj4xMF0rcFs2MyZsPj40XStwWzYzJmw8PDJdK1wiPVwiKSksbi5qb2luKFwiXCIpfWEuYnl0ZUxlbmd0aD1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLGE9dFswXSxyPXRbMV07cmV0dXJuIDMqKGErcikvNC1yfSxhLnRvQnl0ZUFycmF5PXMsYS5mcm9tQnl0ZUFycmF5PWw7Zm9yKHZhciBwPVtdLGM9W10sdT1cInVuZGVmaW5lZFwiPT10eXBlb2YgVWludDhBcnJheT9BcnJheTpVaW50OEFycmF5LG09XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIsXz0wLGY9bS5sZW5ndGg7XzxmOysrXylwW19dPW1bX10sY1ttLmNoYXJDb2RlQXQoXyldPV87Y1s0NV09NjIsY1s5NV09NjN9LHt9XSw2OltmdW5jdGlvbigpe30se31dLDc6W2Z1bmN0aW9uKGUsdCxhKXsoZnVuY3Rpb24odCxuKXsvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqLyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBzKCl7cmV0dXJuIG4uVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjN9ZnVuY3Rpb24gcChlLHQpe2lmKHMoKTx0KXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGhcIik7cmV0dXJuIG4uVFlQRURfQVJSQVlfU1VQUE9SVD8oZT1uZXcgVWludDhBcnJheSh0KSxlLl9fcHJvdG9fXz1uLnByb3RvdHlwZSk6KG51bGw9PT1lJiYoZT1uZXcgbih0KSksZS5sZW5ndGg9dCksZX1mdW5jdGlvbiBuKGUsdCxhKXtpZighbi5UWVBFRF9BUlJBWV9TVVBQT1JUJiYhKHRoaXMgaW5zdGFuY2VvZiBuKSlyZXR1cm4gbmV3IG4oZSx0LGEpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoXCJJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZ1wiKTtyZXR1cm4gXyh0aGlzLGUpfXJldHVybiBjKHRoaXMsZSx0LGEpfWZ1bmN0aW9uIGMoZSx0LGEsbil7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJ2YWx1ZVxcXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXJcIik7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ZyhlLHQsYSxuKTpcInN0cmluZ1wiPT10eXBlb2YgdD9mKGUsdCxhKTp5KGUsdCl9ZnVuY3Rpb24gdShlKXtpZihcIm51bWJlclwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcInNpemVcXFwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXJcIik7ZWxzZSBpZigwPmUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJcXFwic2l6ZVxcXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmVcIil9ZnVuY3Rpb24gbShlLHQsYSxuKXtyZXR1cm4gdSh0KSwwPj10P3AoZSx0KTp2b2lkIDA9PT1hP3AoZSx0KTpcInN0cmluZ1wiPT10eXBlb2Ygbj9wKGUsdCkuZmlsbChhLG4pOnAoZSx0KS5maWxsKGEpfWZ1bmN0aW9uIF8oZSx0KXtpZih1KHQpLGU9cChlLDA+dD8wOjB8Yih0KSksIW4uVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIGE9MDthPHQ7KythKWVbYV09MDtyZXR1cm4gZX1mdW5jdGlvbiBmKGUsdCxhKXtpZigoXCJzdHJpbmdcIiE9dHlwZW9mIGF8fFwiXCI9PT1hKSYmKGE9XCJ1dGY4XCIpLCFuLmlzRW5jb2RpbmcoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJlbmNvZGluZ1xcXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZ1wiKTt2YXIgcj0wfHcodCxhKTtlPXAoZSxyKTt2YXIgcz1lLndyaXRlKHQsYSk7cmV0dXJuIHMhPT1yJiYoZT1lLnNsaWNlKDAscykpLGV9ZnVuY3Rpb24gaChlLHQpe3ZhciBhPTA+dC5sZW5ndGg/MDowfGIodC5sZW5ndGgpO2U9cChlLGEpO2Zvcih2YXIgbj0wO248YTtuKz0xKWVbbl09MjU1JnRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gZyhlLHQsYSxyKXtpZih0LmJ5dGVMZW5ndGgsMD5hfHx0LmJ5dGVMZW5ndGg8YSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIidvZmZzZXQnIGlzIG91dCBvZiBib3VuZHNcIik7aWYodC5ieXRlTGVuZ3RoPGErKHJ8fDApKXRocm93IG5ldyBSYW5nZUVycm9yKFwiJ2xlbmd0aCcgaXMgb3V0IG9mIGJvdW5kc1wiKTtyZXR1cm4gdD12b2lkIDA9PT1hJiZ2b2lkIDA9PT1yP25ldyBVaW50OEFycmF5KHQpOnZvaWQgMD09PXI/bmV3IFVpbnQ4QXJyYXkodCxhKTpuZXcgVWludDhBcnJheSh0LGEsciksbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyhlPXQsZS5fX3Byb3RvX189bi5wcm90b3R5cGUpOmU9aChlLHQpLGV9ZnVuY3Rpb24geShlLHQpe2lmKG4uaXNCdWZmZXIodCkpe3ZhciBhPTB8Yih0Lmxlbmd0aCk7cmV0dXJuKGU9cChlLGEpLDA9PT1lLmxlbmd0aCk/ZToodC5jb3B5KGUsMCwwLGEpLGUpfWlmKHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8XCJsZW5ndGhcImluIHQpcmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHQubGVuZ3RofHxlZSh0Lmxlbmd0aCk/cChlLDApOmgoZSx0KTtpZihcIkJ1ZmZlclwiPT09dC50eXBlJiZuZSh0LmRhdGEpKXJldHVybiBoKGUsdC5kYXRhKX10aHJvdyBuZXcgVHlwZUVycm9yKFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LlwiKX1mdW5jdGlvbiBiKGUpe2lmKGU+PXMoKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHhcIitzKCkudG9TdHJpbmcoMTYpK1wiIGJ5dGVzXCIpO3JldHVybiAwfGV9ZnVuY3Rpb24geChlKXtyZXR1cm4rZSE9ZSYmKGU9MCksbi5hbGxvYygrZSl9ZnVuY3Rpb24gdyhlLHQpe2lmKG4uaXNCdWZmZXIoZSkpcmV0dXJuIGUubGVuZ3RoO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmXCJmdW5jdGlvblwiPT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3JiYoQXJyYXlCdWZmZXIuaXNWaWV3KGUpfHxlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKXJldHVybiBlLmJ5dGVMZW5ndGg7XCJzdHJpbmdcIiE9dHlwZW9mIGUmJihlPVwiXCIrZSk7dmFyIGE9ZS5sZW5ndGg7aWYoMD09PWEpcmV0dXJuIDA7Zm9yKHZhciByPSExOzspc3dpdGNoKHQpe2Nhc2VcImFzY2lpXCI6Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIGE7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZSB2b2lkIDA6cmV0dXJuIFcoZSkubGVuZ3RoO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiAyKmE7Y2FzZVwiaGV4XCI6cmV0dXJuIGE+Pj4xO2Nhc2VcImJhc2U2NFwiOnJldHVybiBWKGUpLmxlbmd0aDtkZWZhdWx0OmlmKHIpcmV0dXJuIFcoZSkubGVuZ3RoO3Q9KFwiXCIrdCkudG9Mb3dlckNhc2UoKSxyPSEwO319ZnVuY3Rpb24gRShlLHQsYSl7dmFyIG49ITE7aWYoKHZvaWQgMD09PXR8fDA+dCkmJih0PTApLHQ+dGhpcy5sZW5ndGgpcmV0dXJuXCJcIjtpZigodm9pZCAwPT09YXx8YT50aGlzLmxlbmd0aCkmJihhPXRoaXMubGVuZ3RoKSwwPj1hKXJldHVyblwiXCI7aWYoYT4+Pj0wLHQ+Pj49MCxhPD10KXJldHVyblwiXCI7Zm9yKGV8fChlPVwidXRmOFwiKTs7KXN3aXRjaChlKXtjYXNlXCJoZXhcIjpyZXR1cm4gRCh0aGlzLHQsYSk7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIFQodGhpcyx0LGEpO2Nhc2VcImFzY2lpXCI6cmV0dXJuIFAodGhpcyx0LGEpO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBOKHRoaXMsdCxhKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gTCh0aGlzLHQsYSk7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIGoodGhpcyx0LGEpO2RlZmF1bHQ6aWYobil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrZSk7ZT0oZStcIlwiKS50b0xvd2VyQ2FzZSgpLG49ITA7fX1mdW5jdGlvbiBDKGUsdCxhKXt2YXIgbj1lW3RdO2VbdF09ZVthXSxlW2FdPW59ZnVuY3Rpb24gQShlLHQsYSxyLHMpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4tMTtpZihcInN0cmluZ1wiPT10eXBlb2YgYT8ocj1hLGE9MCk6MjE0NzQ4MzY0NzxhP2E9MjE0NzQ4MzY0NzotMjE0NzQ4MzY0OD5hJiYoYT0tMjE0NzQ4MzY0OCksYT0rYSxpc05hTihhKSYmKGE9cz8wOmUubGVuZ3RoLTEpLDA+YSYmKGE9ZS5sZW5ndGgrYSksYT49ZS5sZW5ndGgpe2lmKHMpcmV0dXJuLTE7YT1lLmxlbmd0aC0xfWVsc2UgaWYoMD5hKWlmKHMpYT0wO2Vsc2UgcmV0dXJuLTE7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PW4uZnJvbSh0LHIpKSxuLmlzQnVmZmVyKHQpKXJldHVybiAwPT09dC5sZW5ndGg/LTE6UyhlLHQsYSxyLHMpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0Jj0yNTUsbi5UWVBFRF9BUlJBWV9TVVBQT1JUJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP3M/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsdCxhKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGUsdCxhKTpTKGUsW3RdLGEscixzKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyXCIpfWZ1bmN0aW9uIFMoZSx0LGEsbixyKXtmdW5jdGlvbiBzKGUsdCl7cmV0dXJuIDE9PT1vP2VbdF06ZS5yZWFkVUludDE2QkUodCpvKX12YXIgbz0xLGQ9ZS5sZW5ndGgsbD10Lmxlbmd0aDtpZih2b2lkIDAhPT1uJiYobj0obitcIlwiKS50b0xvd2VyQ2FzZSgpLFwidWNzMlwiPT09bnx8XCJ1Y3MtMlwiPT09bnx8XCJ1dGYxNmxlXCI9PT1ufHxcInV0Zi0xNmxlXCI9PT1uKSl7aWYoMj5lLmxlbmd0aHx8Mj50Lmxlbmd0aClyZXR1cm4tMTtvPTIsZC89MixsLz0yLGEvPTJ9dmFyIHA7aWYocil7dmFyIGM9LTE7Zm9yKHA9YTtwPGQ7cCsrKWlmKHMoZSxwKSE9PXModCwtMT09PWM/MDpwLWMpKS0xIT09YyYmKHAtPXAtYyksYz0tMTtlbHNlIGlmKC0xPT09YyYmKGM9cCkscC1jKzE9PT1sKXJldHVybiBjKm99ZWxzZSBmb3IoYStsPmQmJihhPWQtbCkscD1hOzA8PXA7cC0tKXtmb3IodmFyIHU9ITAsbT0wO208bDttKyspaWYocyhlLHArbSkhPT1zKHQsbSkpe3U9ITE7YnJlYWt9aWYodSlyZXR1cm4gcH1yZXR1cm4tMX1mdW5jdGlvbiBrKGUsdCxhLG4pe2E9K2F8fDA7dmFyIHI9ZS5sZW5ndGgtYTtuPyhuPStuLG4+ciYmKG49cikpOm49cjt2YXIgcz10Lmxlbmd0aDtpZigwIT1zJTIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgaGV4IHN0cmluZ1wiKTtuPnMvMiYmKG49cy8yKTtmb3IodmFyIG89MCxkO288bjsrK28pe2lmKGQ9cGFyc2VJbnQodC5zdWJzdHIoMipvLDIpLDE2KSxpc05hTihkKSlyZXR1cm4gbztlW2Erb109ZH1yZXR1cm4gb31mdW5jdGlvbiB2KGUsdCxhLG4pe3JldHVybiAkKFcodCxlLmxlbmd0aC1hKSxlLGEsbil9ZnVuY3Rpb24gSShlLHQsYSxuKXtyZXR1cm4gJChRKHQpLGUsYSxuKX1mdW5jdGlvbiBSKGUsdCxhLG4pe3JldHVybiBJKGUsdCxhLG4pfWZ1bmN0aW9uIE8oZSx0LGEsbil7cmV0dXJuICQoVih0KSxlLGEsbil9ZnVuY3Rpb24geihlLHQsYSxuKXtyZXR1cm4gJChKKHQsZS5sZW5ndGgtYSksZSxhLG4pfWZ1bmN0aW9uIEwoZSx0LGEpe3JldHVybiAwPT09dCYmYT09PWUubGVuZ3RoP3RlLmZyb21CeXRlQXJyYXkoZSk6dGUuZnJvbUJ5dGVBcnJheShlLnNsaWNlKHQsYSkpfWZ1bmN0aW9uIFQoZSx0LGEpe2E9bChlLmxlbmd0aCxhKTtmb3IodmFyIG49W10scj10O3I8YTspe3ZhciBzPWVbcl0sbz1udWxsLGQ9MjM5PHM/NDoyMjM8cz8zOjE5MTxzPzI6MTtpZihyK2Q8PWEpe3ZhciBwLGMsdSxtOzE9PT1kPzEyOD5zJiYobz1zKToyPT09ZD8ocD1lW3IrMV0sMTI4PT0oMTkyJnApJiYobT0oMzEmcyk8PDZ8NjMmcCwxMjc8bSYmKG89bSkpKTozPT09ZD8ocD1lW3IrMV0sYz1lW3IrMl0sMTI4PT0oMTkyJnApJiYxMjg9PSgxOTImYykmJihtPSgxNSZzKTw8MTJ8KDYzJnApPDw2fDYzJmMsMjA0NzxtJiYoNTUyOTY+bXx8NTczNDM8bSkmJihvPW0pKSk6ND09PWQ/KHA9ZVtyKzFdLGM9ZVtyKzJdLHU9ZVtyKzNdLDEyOD09KDE5MiZwKSYmMTI4PT0oMTkyJmMpJiYxMjg9PSgxOTImdSkmJihtPSgxNSZzKTw8MTh8KDYzJnApPDwxMnwoNjMmYyk8PDZ8NjMmdSw2NTUzNTxtJiYxMTE0MTEyPm0mJihvPW0pKSk6dm9pZCAwfW51bGw9PT1vPyhvPTY1NTMzLGQ9MSk6NjU1MzU8byYmKG8tPTY1NTM2LG4ucHVzaCg1NTI5NnwxMDIzJm8+Pj4xMCksbz01NjMyMHwxMDIzJm8pLG4ucHVzaChvKSxyKz1kfXJldHVybiBCKG4pfWZ1bmN0aW9uIEIoZSl7dmFyIHQ9ZS5sZW5ndGg7aWYodDw9NDA5NilyZXR1cm4gZC5hcHBseShTdHJpbmcsZSk7Zm9yKHZhciBhPVwiXCIsbj0wO248dDspYSs9ZC5hcHBseShTdHJpbmcsZS5zbGljZShuLG4rPTQwOTYpKTtyZXR1cm4gYX1mdW5jdGlvbiBQKGUsdCxhKXt2YXIgbj1cIlwiO2E9bChlLmxlbmd0aCxhKTtmb3IodmFyIHI9dDtyPGE7KytyKW4rPWQoMTI3JmVbcl0pO3JldHVybiBufWZ1bmN0aW9uIE4oZSx0LGEpe3ZhciBuPVwiXCI7YT1sKGUubGVuZ3RoLGEpO2Zvcih2YXIgcj10O3I8YTsrK3Ipbis9ZChlW3JdKTtyZXR1cm4gbn1mdW5jdGlvbiBEKGUsdCxhKXt2YXIgbj1lLmxlbmd0aDsoIXR8fDA+dCkmJih0PTApLCghYXx8MD5hfHxhPm4pJiYoYT1uKTtmb3IodmFyIHI9XCJcIixzPXQ7czxhOysrcylyKz1YKGVbc10pO3JldHVybiByfWZ1bmN0aW9uIGooZSx0LGEpe2Zvcih2YXIgbj1lLnNsaWNlKHQsYSkscj1cIlwiLHM9MDtzPG4ubGVuZ3RoO3MrPTIpcis9ZChuW3NdKzI1NipuW3MrMV0pO3JldHVybiByfWZ1bmN0aW9uIFUoZSx0LGEpe2lmKDAhPWUlMXx8MD5lKXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKGUrdD5hKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1mdW5jdGlvbiBGKGUsdCxhLHIscyxpKXtpZighbi5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcImJ1ZmZlclxcXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZVwiKTtpZih0PnN8fHQ8aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlxcXCJ2YWx1ZVxcXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kc1wiKTtpZihhK3I+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24gTShlLHQsYSxuKXswPnQmJih0PTY1NTM1K3QrMSk7Zm9yKHZhciByPTAscz1sKGUubGVuZ3RoLWEsMik7cjxzOysrcillW2Ercl09KHQmMjU1PDw4KihuP3I6MS1yKSk+Pj44KihuP3I6MS1yKX1mdW5jdGlvbiBHKGUsdCxhLG4pezA+dCYmKHQ9NDI5NDk2NzI5NSt0KzEpO2Zvcih2YXIgcj0wLHM9bChlLmxlbmd0aC1hLDQpO3I8czsrK3IpZVthK3JdPTI1NSZ0Pj4+OCoobj9yOjMtcil9ZnVuY3Rpb24gWihlLHQsYSxuKXtpZihhK24+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYoMD5hKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIFkoZSx0LGEsbixyKXtyZXR1cm4gcnx8WihlLHQsYSw0LDM0MDI4MjM0NjYzODUyODg2ZTIyLC0zNDAyODIzNDY2Mzg1Mjg4NmUyMiksYWUud3JpdGUoZSx0LGEsbiwyMyw0KSxhKzR9ZnVuY3Rpb24gcShlLHQsYSxuLHIpe3JldHVybiByfHxaKGUsdCxhLDgsMTc5NzY5MzEzNDg2MjMxNTdlMjkyLC0xNzk3NjkzMTM0ODYyMzE1N2UyOTIpLGFlLndyaXRlKGUsdCxhLG4sNTIsOCksYSs4fWZ1bmN0aW9uIEgoZSl7aWYoZT1LKGUpLnJlcGxhY2UocmUsXCJcIiksMj5lLmxlbmd0aClyZXR1cm5cIlwiO2Zvcig7MCE9ZS5sZW5ndGglNDspZSs9XCI9XCI7cmV0dXJuIGV9ZnVuY3Rpb24gSyhlKXtyZXR1cm4gZS50cmltP2UudHJpbSgpOmUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1mdW5jdGlvbiBYKGUpe3JldHVybiAxNj5lP1wiMFwiK2UudG9TdHJpbmcoMTYpOmUudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIFcoZSx0KXt0PXR8fDEvMDtmb3IodmFyIGE9ZS5sZW5ndGgsbj1udWxsLHI9W10scz0wLG87czxhOysrcyl7aWYobz1lLmNoYXJDb2RlQXQocyksNTUyOTU8byYmNTczNDQ+byl7aWYoIW4pe2lmKDU2MzE5PG8pey0xPCh0LT0zKSYmci5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lbHNlIGlmKHMrMT09PWEpey0xPCh0LT0zKSYmci5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1uPW87Y29udGludWV9aWYoNTYzMjA+byl7LTE8KHQtPTMpJiZyLnB1c2goMjM5LDE5MSwxODkpLG49bztjb250aW51ZX1vPShuLTU1Mjk2PDwxMHxvLTU2MzIwKSs2NTUzNn1lbHNlIG4mJi0xPCh0LT0zKSYmci5wdXNoKDIzOSwxOTEsMTg5KTtpZihuPW51bGwsMTI4Pm8pe2lmKDA+KHQtPTEpKWJyZWFrO3IucHVzaChvKX1lbHNlIGlmKDIwNDg+byl7aWYoMD4odC09MikpYnJlYWs7ci5wdXNoKDE5MnxvPj42LDEyOHw2MyZvKX1lbHNlIGlmKDY1NTM2Pm8pe2lmKDA+KHQtPTMpKWJyZWFrO3IucHVzaCgyMjR8bz4+MTIsMTI4fDYzJm8+PjYsMTI4fDYzJm8pfWVsc2UgaWYoMTExNDExMj5vKXtpZigwPih0LT00KSlicmVhaztyLnB1c2goMjQwfG8+PjE4LDEyOHw2MyZvPj4xMiwxMjh8NjMmbz4+NiwxMjh8NjMmbyl9ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnRcIil9cmV0dXJuIHJ9ZnVuY3Rpb24gUShlKXtmb3IodmFyIHQ9W10sYT0wO2E8ZS5sZW5ndGg7KythKXQucHVzaCgyNTUmZS5jaGFyQ29kZUF0KGEpKTtyZXR1cm4gdH1mdW5jdGlvbiBKKGUsdCl7Zm9yKHZhciBhPVtdLG49MCxyLHMsbztuPGUubGVuZ3RoJiYhKDA+KHQtPTIpKTsrK24pcj1lLmNoYXJDb2RlQXQobikscz1yPj44LG89ciUyNTYsYS5wdXNoKG8pLGEucHVzaChzKTtyZXR1cm4gYX1mdW5jdGlvbiBWKGUpe3JldHVybiB0ZS50b0J5dGVBcnJheShIKGUpKX1mdW5jdGlvbiAkKGUsdCxhLG4pe2Zvcih2YXIgcj0wO3I8biYmIShyK2E+PXQubGVuZ3RofHxyPj1lLmxlbmd0aCk7KytyKXRbcithXT1lW3JdO3JldHVybiByfWZ1bmN0aW9uIGVlKGUpe3JldHVybiBlIT09ZX12YXIgdGU9ZShcImJhc2U2NC1qc1wiKSxhZT1lKFwiaWVlZTc1NFwiKSxuZT1lKFwiaXNhcnJheVwiKTthLkJ1ZmZlcj1uLGEuU2xvd0J1ZmZlcj14LGEuSU5TUEVDVF9NQVhfQllURVM9NTAsbi5UWVBFRF9BUlJBWV9TVVBQT1JUPXQuVFlQRURfQVJSQVlfU1VQUE9SVD09PXZvaWQgMD9mdW5jdGlvbigpe3RyeXt2YXIgZT1uZXcgVWludDhBcnJheSgxKTtyZXR1cm4gZS5fX3Byb3RvX189e19fcHJvdG9fXzpVaW50OEFycmF5LnByb3RvdHlwZSxmb286ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9fSw0Mj09PWUuZm9vKCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuc3ViYXJyYXkmJjA9PT1lLnN1YmFycmF5KDEsMSkuYnl0ZUxlbmd0aH1jYXRjaCh0KXtyZXR1cm4hMX19KCk6dC5UWVBFRF9BUlJBWV9TVVBQT1JULGEua01heExlbmd0aD1zKCksbi5wb29sU2l6ZT04MTkyLG4uX2F1Z21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19fPW4ucHJvdG90eXBlLGV9LG4uZnJvbT1mdW5jdGlvbihlLHQsYSl7cmV0dXJuIGMobnVsbCxlLHQsYSl9LG4uVFlQRURfQVJSQVlfU1VQUE9SVCYmKG4ucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSxuLl9fcHJvdG9fXz1VaW50OEFycmF5LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5zcGVjaWVzJiZuW1N5bWJvbC5zcGVjaWVzXT09PW4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFN5bWJvbC5zcGVjaWVzLHt2YWx1ZTpudWxsLGNvbmZpZ3VyYWJsZTohMH0pKSxuLmFsbG9jPWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gbShudWxsLGUsdCxhKX0sbi5hbGxvY1Vuc2FmZT1mdW5jdGlvbihlKXtyZXR1cm4gXyhudWxsLGUpfSxuLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihlKXtyZXR1cm4gXyhudWxsLGUpfSxuLmlzQnVmZmVyPWZ1bmN0aW9uKGUpe3JldHVybiEhKG51bGwhPWUmJmUuX2lzQnVmZmVyKX0sbi5jb21wYXJlPWZ1bmN0aW9uKGUsdCl7aWYoIW4uaXNCdWZmZXIoZSl8fCFuLmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzXCIpO2lmKGU9PT10KXJldHVybiAwO2Zvcih2YXIgYT1lLmxlbmd0aCxyPXQubGVuZ3RoLHM9MCxvPWwoYSxyKTtzPG87KytzKWlmKGVbc10hPT10W3NdKXthPWVbc10scj10W3NdO2JyZWFrfXJldHVybiBhPHI/LTE6cjxhPzE6MH0sbi5pc0VuY29kaW5nPWZ1bmN0aW9uKGUpe3N3aXRjaCgoZStcIlwiKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITE7fX0sbi5jb25jYXQ9ZnVuY3Rpb24oZSx0KXtpZighbmUoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJsaXN0XFxcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnNcIik7aWYoMD09PWUubGVuZ3RoKXJldHVybiBuLmFsbG9jKDApO3ZhciBhO2lmKHQ9PT12b2lkIDApZm9yKHQ9MCxhPTA7YTxlLmxlbmd0aDsrK2EpdCs9ZVthXS5sZW5ndGg7dmFyIHI9bi5hbGxvY1Vuc2FmZSh0KSxzPTA7Zm9yKGE9MDthPGUubGVuZ3RoOysrYSl7dmFyIG89ZVthXTtpZighbi5pc0J1ZmZlcihvKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcImxpc3RcXFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVyc1wiKTtvLmNvcHkocixzKSxzKz1vLmxlbmd0aH1yZXR1cm4gcn0sbi5ieXRlTGVuZ3RoPXcsbi5wcm90b3R5cGUuX2lzQnVmZmVyPSEwLG4ucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKDAhPWUlMil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzXCIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz0yKUModGhpcyx0LHQrMSk7cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKDAhPWUlNCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzXCIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz00KUModGhpcyx0LHQrMyksQyh0aGlzLHQrMSx0KzIpO3JldHVybiB0aGlzfSxuLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtpZigwIT1lJTgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0c1wiKTtmb3IodmFyIHQ9MDt0PGU7dCs9OClDKHRoaXMsdCx0KzcpLEModGhpcyx0KzEsdCs2KSxDKHRoaXMsdCsyLHQrNSksQyh0aGlzLHQrMyx0KzQpO3JldHVybiB0aGlzfSxuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPTB8dGhpcy5sZW5ndGg7cmV0dXJuIDA9PWU/XCJcIjowPT09YXJndW1lbnRzLmxlbmd0aD9UKHRoaXMsMCxlKTpFLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbi5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGUpe2lmKCFuLmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyXCIpO3JldHVybiB0aGlzPT09ZXx8MD09PW4uY29tcGFyZSh0aGlzLGUpfSxuLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7dmFyIGU9XCJcIix0PWEuSU5TUEVDVF9NQVhfQllURVM7cmV0dXJuIDA8dGhpcy5sZW5ndGgmJihlPXRoaXMudG9TdHJpbmcoXCJoZXhcIiwwLHQpLm1hdGNoKC8uezJ9L2cpLmpvaW4oXCIgXCIpLHRoaXMubGVuZ3RoPnQmJihlKz1cIiAuLi4gXCIpKSxcIjxCdWZmZXIgXCIrZStcIj5cIn0sbi5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihlLHQsYSxyLHMpe2lmKCFuLmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyXCIpO2lmKHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWEmJihhPWU/ZS5sZW5ndGg6MCksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09cyYmKHM9dGhpcy5sZW5ndGgpLDA+dHx8YT5lLmxlbmd0aHx8MD5yfHxzPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwib3V0IG9mIHJhbmdlIGluZGV4XCIpO2lmKHI+PXMmJnQ+PWEpcmV0dXJuIDA7aWYocj49cylyZXR1cm4tMTtpZih0Pj1hKXJldHVybiAxO2lmKHQ+Pj49MCxhPj4+PTAscj4+Pj0wLHM+Pj49MCx0aGlzPT09ZSlyZXR1cm4gMDtmb3IodmFyIG89cy1yLGQ9YS10LHA9bChvLGQpLGM9dGhpcy5zbGljZShyLHMpLHU9ZS5zbGljZSh0LGEpLG09MDttPHA7KyttKWlmKGNbbV0hPT11W21dKXtvPWNbbV0sZD11W21dO2JyZWFrfXJldHVybiBvPGQ/LTE6ZDxvPzE6MH0sbi5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24oZSx0LGEpe3JldHVybi0xIT09dGhpcy5pbmRleE9mKGUsdCxhKX0sbi5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlLHQsYSl7cmV0dXJuIEEodGhpcyxlLHQsYSwhMCl9LG4ucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gQSh0aGlzLGUsdCxhLCExKX0sbi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0LGEsbil7aWYodm9pZCAwPT09dCluPVwidXRmOFwiLGE9dGhpcy5sZW5ndGgsdD0wO2Vsc2UgaWYodm9pZCAwPT09YSYmXCJzdHJpbmdcIj09dHlwZW9mIHQpbj10LGE9dGhpcy5sZW5ndGgsdD0wO2Vsc2UgaWYoaXNGaW5pdGUodCkpdHw9MCxpc0Zpbml0ZShhKT8oYXw9MCx2b2lkIDA9PT1uJiYobj1cInV0ZjhcIikpOihuPWEsYT12b2lkIDApO2Vsc2UgdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWRcIik7dmFyIHI9dGhpcy5sZW5ndGgtdDtpZigodm9pZCAwPT09YXx8YT5yKSYmKGE9ciksMDxlLmxlbmd0aCYmKDA+YXx8MD50KXx8dD50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzXCIpO258fChuPVwidXRmOFwiKTtmb3IodmFyIHM9ITE7Oylzd2l0Y2gobil7Y2FzZVwiaGV4XCI6cmV0dXJuIGsodGhpcyxlLHQsYSk7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIHYodGhpcyxlLHQsYSk7Y2FzZVwiYXNjaWlcIjpyZXR1cm4gSSh0aGlzLGUsdCxhKTtjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpyZXR1cm4gUih0aGlzLGUsdCxhKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gTyh0aGlzLGUsdCxhKTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4geih0aGlzLGUsdCxhKTtkZWZhdWx0OmlmKHMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK24pO249KFwiXCIrbikudG9Mb3dlckNhc2UoKSxzPSEwO319LG4ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiQnVmZmVyXCIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTtuLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihlLHQpe3ZhciBhPXRoaXMubGVuZ3RoO2U9fn5lLHQ9dD09PXZvaWQgMD9hOn5+dCwwPmU/KGUrPWEsMD5lJiYoZT0wKSk6ZT5hJiYoZT1hKSwwPnQ/KHQrPWEsMD50JiYodD0wKSk6dD5hJiYodD1hKSx0PGUmJih0PWUpO3ZhciByO2lmKG4uVFlQRURfQVJSQVlfU1VQUE9SVClyPXRoaXMuc3ViYXJyYXkoZSx0KSxyLl9fcHJvdG9fXz1uLnByb3RvdHlwZTtlbHNle3ZhciBzPXQtZTtyPW5ldyBuKHMsdm9pZCAwKTtmb3IodmFyIG89MDtvPHM7KytvKXJbb109dGhpc1tvK2VdfXJldHVybiByfSxuLnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKGUsdCxhKXtlfD0wLHR8PTAsYXx8VShlLHQsdGhpcy5sZW5ndGgpO2Zvcih2YXIgbj10aGlzW2VdLHI9MSxzPTA7KytzPHQmJihyKj0yNTYpOyluKz10aGlzW2Urc10qcjtyZXR1cm4gbn0sbi5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbihlLHQsYSl7ZXw9MCx0fD0wLGF8fFUoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIG49dGhpc1tlKy0tdF0scj0xOzA8dCYmKHIqPTI1Nik7KW4rPXRoaXNbZSstLXRdKnI7cmV0dXJuIG59LG4ucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxVKGUsMSx0aGlzLmxlbmd0aCksdGhpc1tlXX0sbi5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFUoZSwyLHRoaXMubGVuZ3RoKSx0aGlzW2VdfHRoaXNbZSsxXTw8OH0sbi5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFUoZSwyLHRoaXMubGVuZ3RoKSx0aGlzW2VdPDw4fHRoaXNbZSsxXX0sbi5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFUoZSw0LHRoaXMubGVuZ3RoKSwodGhpc1tlXXx0aGlzW2UrMV08PDh8dGhpc1tlKzJdPDwxNikrMTY3NzcyMTYqdGhpc1tlKzNdfSxuLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8VShlLDQsdGhpcy5sZW5ndGgpLDE2Nzc3MjE2KnRoaXNbZV0rKHRoaXNbZSsxXTw8MTZ8dGhpc1tlKzJdPDw4fHRoaXNbZSszXSl9LG4ucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbihlLHQsYSl7ZXw9MCx0fD0wLGF8fFUoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIG49dGhpc1tlXSxyPTEscz0wOysrczx0JiYocio9MjU2KTspbis9dGhpc1tlK3NdKnI7cmV0dXJuIHIqPTEyOCxuPj1yJiYobi09bygyLDgqdCkpLG59LG4ucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbihlLHQsYSl7ZXw9MCx0fD0wLGF8fFUoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIG49dCxyPTEscz10aGlzW2UrLS1uXTswPG4mJihyKj0yNTYpOylzKz10aGlzW2UrLS1uXSpyO3JldHVybiByKj0xMjgscz49ciYmKHMtPW8oMiw4KnQpKSxzfSxuLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxVKGUsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbZV0/LTEqKDI1NS10aGlzW2VdKzEpOnRoaXNbZV19LG4ucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7dHx8VShlLDIsdGhpcy5sZW5ndGgpO3ZhciBhPXRoaXNbZV18dGhpc1tlKzFdPDw4O3JldHVybiAzMjc2OCZhPzQyOTQ5MDE3NjB8YTphfSxuLnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbihlLHQpe3R8fFUoZSwyLHRoaXMubGVuZ3RoKTt2YXIgYT10aGlzW2UrMV18dGhpc1tlXTw8ODtyZXR1cm4gMzI3NjgmYT80Mjk0OTAxNzYwfGE6YX0sbi5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8VShlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV18dGhpc1tlKzFdPDw4fHRoaXNbZSsyXTw8MTZ8dGhpc1tlKzNdPDwyNH0sbi5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8VShlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV08PDI0fHRoaXNbZSsxXTw8MTZ8dGhpc1tlKzJdPDw4fHRoaXNbZSszXX0sbi5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8VShlLDQsdGhpcy5sZW5ndGgpLGFlLnJlYWQodGhpcyxlLCEwLDIzLDQpfSxuLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxVKGUsNCx0aGlzLmxlbmd0aCksYWUucmVhZCh0aGlzLGUsITEsMjMsNCl9LG4ucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxVKGUsOCx0aGlzLmxlbmd0aCksYWUucmVhZCh0aGlzLGUsITAsNTIsOCl9LG4ucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxVKGUsOCx0aGlzLmxlbmd0aCksYWUucmVhZCh0aGlzLGUsITEsNTIsOCl9LG4ucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGUsdCxhLG4pe2lmKGU9K2UsdHw9MCxhfD0wLCFuKXt2YXIgcj1vKDIsOCphKS0xO0YodGhpcyxlLHQsYSxyLDApfXZhciBzPTEsZD0wO2Zvcih0aGlzW3RdPTI1NSZlOysrZDxhJiYocyo9MjU2KTspdGhpc1t0K2RdPTI1NSZlL3M7cmV0dXJuIHQrYX0sbi5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24oZSx0LGEsbil7aWYoZT0rZSx0fD0wLGF8PTAsIW4pe3ZhciByPW8oMiw4KmEpLTE7Rih0aGlzLGUsdCxhLHIsMCl9dmFyIHM9YS0xLGQ9MTtmb3IodGhpc1t0K3NdPTI1NSZlOzA8PS0tcyYmKGQqPTI1Nik7KXRoaXNbdCtzXT0yNTUmZS9kO3JldHVybiB0K2F9LG4ucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBlPStlLHR8PTAsYXx8Rih0aGlzLGUsdCwxLDI1NSwwKSxuLlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPXIoZSkpLHRoaXNbdF09MjU1JmUsdCsxfSxuLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gZT0rZSx0fD0wLGF8fEYodGhpcyxlLHQsMiw2NTUzNSwwKSxuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44KTpNKHRoaXMsZSx0LCEwKSx0KzJ9LG4ucHJvdG90eXBlLndyaXRlVUludDE2QkU9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBlPStlLHR8PTAsYXx8Rih0aGlzLGUsdCwyLDY1NTM1LDApLG4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+OCx0aGlzW3QrMV09MjU1JmUpOk0odGhpcyxlLHQsITEpLHQrMn0sbi5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbihlLHQsYSl7cmV0dXJuIGU9K2UsdHw9MCxhfHxGKHRoaXMsZSx0LDQsNDI5NDk2NzI5NSwwKSxuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdCszXT1lPj4+MjQsdGhpc1t0KzJdPWU+Pj4xNix0aGlzW3QrMV09ZT4+PjgsdGhpc1t0XT0yNTUmZSk6Ryh0aGlzLGUsdCwhMCksdCs0fSxuLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gZT0rZSx0fD0wLGF8fEYodGhpcyxlLHQsNCw0Mjk0OTY3Mjk1LDApLG4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+MjQsdGhpc1t0KzFdPWU+Pj4xNix0aGlzW3QrMl09ZT4+PjgsdGhpc1t0KzNdPTI1NSZlKTpHKHRoaXMsZSx0LCExKSx0KzR9LG4ucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24oZSx0LGEsbil7aWYoZT0rZSx0fD0wLCFuKXt2YXIgcj1vKDIsOCphLTEpO0YodGhpcyxlLHQsYSxyLTEsLXIpfXZhciBzPTAsZD0xLGw9MDtmb3IodGhpc1t0XT0yNTUmZTsrK3M8YSYmKGQqPTI1Nik7KTA+ZSYmMD09PWwmJjAhPT10aGlzW3Qrcy0xXSYmKGw9MSksdGhpc1t0K3NdPTI1NSYoZS9kPj4wKS1sO3JldHVybiB0K2F9LG4ucHJvdG90eXBlLndyaXRlSW50QkU9ZnVuY3Rpb24oZSx0LGEsbil7aWYoZT0rZSx0fD0wLCFuKXt2YXIgcj1vKDIsOCphLTEpO0YodGhpcyxlLHQsYSxyLTEsLXIpfXZhciBzPWEtMSxkPTEsbD0wO2Zvcih0aGlzW3Qrc109MjU1JmU7MDw9LS1zJiYoZCo9MjU2KTspMD5lJiYwPT09bCYmMCE9PXRoaXNbdCtzKzFdJiYobD0xKSx0aGlzW3Qrc109MjU1JihlL2Q+PjApLWw7cmV0dXJuIHQrYX0sbi5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gZT0rZSx0fD0wLGF8fEYodGhpcyxlLHQsMSwxMjcsLTEyOCksbi5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoZT1yKGUpKSwwPmUmJihlPTI1NStlKzEpLHRoaXNbdF09MjU1JmUsdCsxfSxuLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBlPStlLHR8PTAsYXx8Rih0aGlzLGUsdCwyLDMyNzY3LC0zMjc2OCksbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPTI1NSZlLHRoaXNbdCsxXT1lPj4+OCk6TSh0aGlzLGUsdCwhMCksdCsyfSxuLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBlPStlLHR8PTAsYXx8Rih0aGlzLGUsdCwyLDMyNzY3LC0zMjc2OCksbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPWU+Pj44LHRoaXNbdCsxXT0yNTUmZSk6TSh0aGlzLGUsdCwhMSksdCsyfSxuLnByb3RvdHlwZS53cml0ZUludDMyTEU9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBlPStlLHR8PTAsYXx8Rih0aGlzLGUsdCw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLG4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT0yNTUmZSx0aGlzW3QrMV09ZT4+PjgsdGhpc1t0KzJdPWU+Pj4xNix0aGlzW3QrM109ZT4+PjI0KTpHKHRoaXMsZSx0LCEwKSx0KzR9LG4ucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihlLHQsYSl7cmV0dXJuIGU9K2UsdHw9MCxhfHxGKHRoaXMsZSx0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksMD5lJiYoZT00Mjk0OTY3Mjk1K2UrMSksbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPWU+Pj4yNCx0aGlzW3QrMV09ZT4+PjE2LHRoaXNbdCsyXT1lPj4+OCx0aGlzW3QrM109MjU1JmUpOkcodGhpcyxlLHQsITEpLHQrNH0sbi5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gWSh0aGlzLGUsdCwhMCxhKX0sbi5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gWSh0aGlzLGUsdCwhMSxhKX0sbi5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihlLHQsYSl7cmV0dXJuIHEodGhpcyxlLHQsITAsYSl9LG4ucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBxKHRoaXMsZSx0LCExLGEpfSxuLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUsdCxhLHIpe2lmKGF8fChhPTApLHJ8fDA9PT1yfHwocj10aGlzLmxlbmd0aCksdD49ZS5sZW5ndGgmJih0PWUubGVuZ3RoKSx0fHwodD0wKSwwPHImJnI8YSYmKHI9YSkscj09PWEpcmV0dXJuIDA7aWYoMD09PWUubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoMD50KXRocm93IG5ldyBSYW5nZUVycm9yKFwidGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZigwPmF8fGE+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZigwPnIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kc1wiKTtyPnRoaXMubGVuZ3RoJiYocj10aGlzLmxlbmd0aCksZS5sZW5ndGgtdDxyLWEmJihyPWUubGVuZ3RoLXQrYSk7dmFyIHM9ci1hLG87aWYodGhpcz09PWUmJmE8dCYmdDxyKWZvcihvPXMtMTswPD1vOy0tbyllW28rdF09dGhpc1tvK2FdO2Vsc2UgaWYoMWUzPnN8fCFuLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKG89MDtvPHM7KytvKWVbbyt0XT10aGlzW28rYV07ZWxzZSBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChlLHRoaXMuc3ViYXJyYXkoYSxhK3MpLHQpO3JldHVybiBzfSxuLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKGUsdCxhLHIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdD8ocj10LHQ9MCxhPXRoaXMubGVuZ3RoKTpcInN0cmluZ1wiPT10eXBlb2YgYSYmKHI9YSxhPXRoaXMubGVuZ3RoKSwxPT09ZS5sZW5ndGgpe3ZhciBzPWUuY2hhckNvZGVBdCgwKTsyNTY+cyYmKGU9cyl9aWYodm9pZCAwIT09ciYmXCJzdHJpbmdcIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHImJiFuLmlzRW5jb2RpbmcocikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3IpfWVsc2VcIm51bWJlclwiPT10eXBlb2YgZSYmKGUmPTI1NSk7aWYoMD50fHx0aGlzLmxlbmd0aDx0fHx0aGlzLmxlbmd0aDxhKXRocm93IG5ldyBSYW5nZUVycm9yKFwiT3V0IG9mIHJhbmdlIGluZGV4XCIpO2lmKGE8PXQpcmV0dXJuIHRoaXM7dD4+Pj0wLGE9YT09PXZvaWQgMD90aGlzLmxlbmd0aDphPj4+MCxlfHwoZT0wKTt2YXIgbztpZihcIm51bWJlclwiPT10eXBlb2YgZSlmb3Iobz10O288YTsrK28pdGhpc1tvXT1lO2Vsc2V7dmFyIGQ9bi5pc0J1ZmZlcihlKT9lOlcobmV3IG4oZSxyKS50b1N0cmluZygpKSxsPWQubGVuZ3RoO2ZvcihvPTA7bzxhLXQ7KytvKXRoaXNbbyt0XT1kW28lbF19cmV0dXJuIHRoaXN9O3ZhciByZT0vW14rXFwvMC05QS1aYS16LV9dL2d9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIj09dHlwZW9mIGdsb2JhbD9cInVuZGVmaW5lZFwiPT10eXBlb2Ygc2VsZj9cInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P3t9OndpbmRvdzpzZWxmOmdsb2JhbCxlKFwiYnVmZmVyXCIpLkJ1ZmZlcil9LHtcImJhc2U2NC1qc1wiOjUsYnVmZmVyOjcsaWVlZTc1NDo4LGlzYXJyYXk6MTB9XSw4OltmdW5jdGlvbihlLHQscyl7cy5yZWFkPWZ1bmN0aW9uKHQsYSxuLHIsbCl7dmFyIHA9OCpsLXItMSxjPSgxPDxwKS0xLHU9Yz4+MSxfPS03LGY9bj9sLTE6MCxoPW4/LTE6MSxkPXRbYStmXSxnLHk7Zm9yKGYrPWgsZz1kJigxPDwtXyktMSxkPj49LV8sXys9cDswPF87Zz0yNTYqZyt0W2ErZl0sZis9aCxfLT04KTtmb3IoeT1nJigxPDwtXyktMSxnPj49LV8sXys9cjswPF87eT0yNTYqeSt0W2ErZl0sZis9aCxfLT04KTtpZigwPT09ZylnPTEtdTtlbHNle2lmKGc9PT1jKXJldHVybiB5P05hTjooZD8tMToxKSooMS8wKTt5Kz1vKDIsciksZy09dX1yZXR1cm4oZD8tMToxKSp5Km8oMixnLXIpfSxzLndyaXRlPWZ1bmN0aW9uKHQsbCxwLHUsXyxmKXt2YXIgaD1NYXRoLkxOMixnPTgqZi1fLTEseT0oMTw8ZyktMSxiPXk+PjEseD0yMz09PV8/bygyLC0yNCktbygyLC03Nyk6MCx3PXU/MDpmLTEsRT11PzE6LTEsZD0wPmx8fDA9PT1sJiYwPjEvbD8xOjAscyxDLEE7Zm9yKGw9bihsKSxpc05hTihsKXx8bD09PTEvMD8oQz1pc05hTihsKT8xOjAscz15KToocz1yKGEobCkvaCksMT5sKihBPW8oMiwtcykpJiYocy0tLEEqPTIpLGwrPTE8PXMrYj94L0E6eCpvKDIsMS1iKSwyPD1sKkEmJihzKyssQS89MikscytiPj15PyhDPTAscz15KToxPD1zK2I/KEM9KGwqQS0xKSpvKDIsXykscys9Yik6KEM9bCpvKDIsYi0xKSpvKDIsXykscz0wKSk7ODw9Xzt0W3Ard109MjU1JkMsdys9RSxDLz0yNTYsXy09OCk7Zm9yKHM9czw8X3xDLGcrPV87MDxnO3RbcCt3XT0yNTUmcyx3Kz1FLHMvPTI1NixnLT04KTt0W3Ardy1FXXw9MTI4KmR9fSx7fV0sOTpbZnVuY3Rpb24oZSx0KXsoZnVuY3Rpb24oZSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGEoKXtjPSEwO2Zvcih2YXIgZT1wLmxlbmd0aCx0LGE7ZTspe2ZvcihhPXAscD1bXSx0PS0xOysrdDxlOylhW3RdKCk7ZT1wLmxlbmd0aH1jPSExfWZ1bmN0aW9uIG4oZSl7MSE9PXAucHVzaChlKXx8Y3x8cygpfXZhciByPWUuTXV0YXRpb25PYnNlcnZlcnx8ZS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHM7aWYocil7dmFyIGk9MCxvPW5ldyByKGEpLGQ9ZS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtvLm9ic2VydmUoZCx7Y2hhcmFjdGVyRGF0YTohMH0pLHM9ZnVuY3Rpb24oKXtkLmRhdGE9aT0rK2klMn19ZWxzZSBpZighZS5zZXRJbW1lZGlhdGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLk1lc3NhZ2VDaGFubmVsKXt2YXIgbD1uZXcgZS5NZXNzYWdlQ2hhbm5lbDtsLnBvcnQxLm9ubWVzc2FnZT1hLHM9ZnVuY3Rpb24oKXtsLnBvcnQyLnBvc3RNZXNzYWdlKDApfX1lbHNlIHM9XCJkb2N1bWVudFwiaW4gZSYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGUuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKT9mdW5jdGlvbigpe3ZhciB0PWUuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTt0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2EoKSx0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9LGUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQpfTpmdW5jdGlvbigpe3NldFRpbWVvdXQoYSwwKX07dmFyIHA9W10sYzt0LmV4cG9ydHM9bn0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiPT10eXBlb2YgZ2xvYmFsP1widW5kZWZpbmVkXCI9PXR5cGVvZiBzZWxmP1widW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/e306d2luZG93OnNlbGY6Z2xvYmFsKX0se31dLDEwOltmdW5jdGlvbihlLHQpe3ZhciBhPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PWEuY2FsbChlKX19LHt9XSwxMTpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gYShlKXtpZihlKXt0aGlzLmRhdGE9ZSx0aGlzLmxlbmd0aD10aGlzLmRhdGEubGVuZ3RoLHRoaXMuaW5kZXg9MCx0aGlzLnplcm89MDtmb3IodmFyIHQ9MDt0PHRoaXMuZGF0YS5sZW5ndGg7dCsrKWVbdF0mPTI1NX19dmFyIG49ZShcIi4vZGF0YVJlYWRlclwiKTthLnByb3RvdHlwZT1uZXcgbixhLnByb3RvdHlwZS5ieXRlQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YVt0aGlzLnplcm8rZV19LGEucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmNoYXJDb2RlQXQoMCksYT1lLmNoYXJDb2RlQXQoMSksbj1lLmNoYXJDb2RlQXQoMikscj1lLmNoYXJDb2RlQXQoMykscz10aGlzLmxlbmd0aC00OzA8PXM7LS1zKWlmKHRoaXMuZGF0YVtzXT09PXQmJnRoaXMuZGF0YVtzKzFdPT09YSYmdGhpcy5kYXRhW3MrMl09PT1uJiZ0aGlzLmRhdGFbcyszXT09PXIpcmV0dXJuIHMtdGhpcy56ZXJvO3JldHVybi0xfSxhLnByb3RvdHlwZS5yZWFkRGF0YT1mdW5jdGlvbihlKXtpZih0aGlzLmNoZWNrT2Zmc2V0KGUpLDA9PT1lKXJldHVybltdO3ZhciB0PXRoaXMuZGF0YS5zbGljZSh0aGlzLnplcm8rdGhpcy5pbmRleCx0aGlzLnplcm8rdGhpcy5pbmRleCtlKTtyZXR1cm4gdGhpcy5pbmRleCs9ZSx0fSx0LmV4cG9ydHM9YX0se1wiLi9kYXRhUmVhZGVyXCI6MTZ9XSwxMjpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JzthLmVuY29kZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9XCJcIixhPTAsbixyLHMsbyxkLGwscDthPGUubGVuZ3RoOyluPWUuY2hhckNvZGVBdChhKyspLHI9ZS5jaGFyQ29kZUF0KGErKykscz1lLmNoYXJDb2RlQXQoYSsrKSxvPW4+PjIsZD0oMyZuKTw8NHxyPj40LGw9KDE1JnIpPDwyfHM+PjYscD02MyZzLGlzTmFOKHIpP2w9cD02NDppc05hTihzKSYmKHA9NjQpLHQ9dCtcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuY2hhckF0KG8pK1wiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIi5jaGFyQXQoZCkrXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiLmNoYXJBdChsKStcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuY2hhckF0KHApO3JldHVybiB0fSxhLmRlY29kZT1mdW5jdGlvbihlKXt2YXIgdD1cIlwiLGE9MCxuLHIscyxvLGwscCxjO2ZvcihlPWUucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9cXD1dL2csXCJcIik7YTxlLmxlbmd0aDspbz1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuaW5kZXhPZihlLmNoYXJBdChhKyspKSxsPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIi5pbmRleE9mKGUuY2hhckF0KGErKykpLHA9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiLmluZGV4T2YoZS5jaGFyQXQoYSsrKSksYz1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuaW5kZXhPZihlLmNoYXJBdChhKyspKSxuPW88PDJ8bD4+NCxyPSgxNSZsKTw8NHxwPj4yLHM9KDMmcCk8PDZ8Yyx0Kz1kKG4pLDY0IT1wJiYodCs9ZChyKSksNjQhPWMmJih0Kz1kKHMpKTtyZXR1cm4gdH19LHt9XSwxMzpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gYSgpe3RoaXMuY29tcHJlc3NlZFNpemU9MCx0aGlzLnVuY29tcHJlc3NlZFNpemU9MCx0aGlzLmNyYzMyPTAsdGhpcy5jb21wcmVzc2lvbk1ldGhvZD1udWxsLHRoaXMuY29tcHJlc3NlZENvbnRlbnQ9bnVsbH1hLnByb3RvdHlwZT17Z2V0Q29udGVudDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxnZXRDb21wcmVzc2VkQ29udGVudDpmdW5jdGlvbigpe3JldHVybiBudWxsfX0sdC5leHBvcnRzPWF9LHt9XSwxNDpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JzthLlNUT1JFPXttYWdpYzpcIlxcMFxcMFwiLGNvbXByZXNzOmZ1bmN0aW9uKGUpe3JldHVybiBlfSx1bmNvbXByZXNzOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxjb21wcmVzc0lucHV0VHlwZTpudWxsLHVuY29tcHJlc3NJbnB1dFR5cGU6bnVsbH0sYS5ERUZMQVRFPWUoXCIuL2ZsYXRlXCIpfSx7XCIuL2ZsYXRlXCI6MTl9XSwxNTpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7dmFyIGE9ZShcIi4vdXRpbHNcIiksbj1bMCwxOTk2OTU5ODk0LDM5OTM5MTk3ODgsMjU2NzUyNDc5NCwxMjQ2MzQxMzcsMTg4NjA1NzYxNSwzOTE1NjIxNjg1LDI2NTczOTIwMzUsMjQ5MjY4Mjc0LDIwNDQ1MDgzMjQsMzc3MjExNTIzMCwyNTQ3MTc3ODY0LDE2Mjk0MTk5NSwyMTI1NTYxMDIxLDM4ODc2MDcwNDcsMjQyODQ0NDA0OSw0OTg1MzY1NDgsMTc4OTkyNzY2Niw0MDg5MDE2NjQ4LDIyMjcwNjEyMTQsNDUwNTQ4ODYxLDE4NDMyNTg2MDMsNDEwNzU4MDc1MywyMjExNjc3NjM5LDMyNTg4Mzk5MCwxNjg0Nzc3MTUyLDQyNTExMjIwNDIsMjMyMTkyNjYzNiwzMzU2MzM0ODcsMTY2MTM2NTQ2NSw0MTk1MzAyNzU1LDIzNjYxMTUzMTcsOTk3MDczMDk2LDEyODE5NTM4ODYsMzU3OTg1NTMzMiwyNzI0Njg4MjQyLDEwMDY4ODgxNDUsMTI1ODYwNzY4NywzNTI0MTAxNjI5LDI3Njg5NDI0NDMsOTAxMDk3NzIyLDExMTkwMDA2ODQsMzY4NjUxNzIwNiwyODk4MDY1NzI4LDg1MzA0NDQ1MSwxMTcyMjY2MTAxLDM3MDUwMTU3NTksMjg4MjYxNjY2NSw2NTE3Njc5ODAsMTM3MzUwMzU0NiwzMzY5NTU0MzA0LDMyMTgxMDQ1OTgsNTY1NTA3MjUzLDE0NTQ2MjE3MzEsMzQ4NTExMTcwNSwzMDk5NDM2MzAzLDY3MTI2Njk3NCwxNTk0MTk4MDI0LDMzMjI3MzA5MzAsMjk3MDM0NzgxMiw3OTU4MzU1MjcsMTQ4MzIzMDIyNSwzMjQ0MzY3Mjc1LDMwNjAxNDk1NjUsMTk5NDE0NjE5MiwzMTE1ODUzNCwyNTYzOTA3NzcyLDQwMjM3MTc5MzAsMTkwNzQ1OTQ2NSwxMTI2MzcyMTUsMjY4MDE1MzI1MywzOTA0NDI3MDU5LDIwMTM3NzYyOTAsMjUxNzIyMDM2LDI1MTcyMTUzNzQsMzc3NTgzMDA0MCwyMTM3NjU2NzYzLDE0MTM3NjgxMywyNDM5Mjc3NzE5LDM4NjUyNzEyOTcsMTgwMjE5NTQ0NCw0NzY4NjQ4NjYsMjIzODAwMTM2OCw0MDY2NTA4ODc4LDE4MTIzNzA5MjUsNDUzMDkyNzMxLDIxODE2MjUwMjUsNDExMTQ1MTIyMywxNzA2MDg4OTAyLDMxNDA0MjcwNCwyMzQ0NTMyMjAyLDQyNDAwMTc1MzIsMTY1ODY1ODI3MSwzNjY2MTk5NzcsMjM2MjY3MDMyMyw0MjI0OTk0NDA1LDEzMDM1MzU5NjAsOTg0OTYxNDg2LDI3NDcwMDcwOTIsMzU2OTAzNzUzOCwxMjU2MTcwODE3LDEwMzc2MDQzMTEsMjc2NTIxMDczMywzNTU0MDc5OTk1LDExMzEwMTQ1MDYsODc5Njc5OTk2LDI5MDkyNDM0NjIsMzY2Mzc3MTg1NiwxMTQxMTI0NDY3LDg1NTg0MjI3NywyODUyODAxNjMxLDM3MDg2NDg2NDksMTM0MjUzMzk0OCw2NTQ0NTkzMDYsMzE4ODM5NjA0OCwzMzczMDE1MTc0LDE0NjY0Nzk5MDksNTQ0MTc5NjM1LDMxMTA1MjM5MTMsMzQ2MjUyMjAxNSwxNTkxNjcxMDU0LDcwMjEzODc3NiwyOTY2NDYwNDUwLDMzNTI3OTk0MTIsMTUwNDkxODgwNyw3ODM1NTE4NzMsMzA4MjY0MDQ0MywzMjMzNDQyOTg5LDM5ODgyOTIzODQsMjU5NjI1NDY0Niw2MjMxNzA2OCwxOTU3ODEwODQyLDM5Mzk4NDU5NDUsMjY0NzgxNjExMSw4MTQ3MDk5NywxOTQzODAzNTIzLDM4MTQ5MTg5MzAsMjQ4OTU5NjgwNCwyMjUyNzQ0MzAsMjA1Mzc5MDM3NiwzODI2MTc1NzU1LDI0NjY5MDYwMTMsMTY3ODE2NzQzLDIwOTc2NTEzNzcsNDAyNzU1MjU4MCwyMjY1NDkwMzg2LDUwMzQ0NDA3MiwxNzYyMDUwODE0LDQxNTA0MTcyNDUsMjE1NDEyOTM1NSw0MjY1MjIyMjUsMTg1MjUwNzg3OSw0Mjc1MzEzNTI2LDIzMTIzMTc5MjAsMjgyNzUzNjI2LDE3NDI1NTU4NTIsNDE4OTcwODE0MywyMzk0ODc3OTQ1LDM5NzkxNzc2MywxNjIyMTgzNjM3LDM2MDQzOTA4ODgsMjcxNDg2NjU1OCw5NTM3Mjk3MzIsMTM0MDA3NjYyNiwzNTE4NzE5OTg1LDI3OTczNjA5OTksMTA2ODgyODM4MSwxMjE5NjM4ODU5LDM2MjQ3NDE4NTAsMjkzNjY3NTE0OCw5MDYxODU0NjIsMTA5MDgxMjUxMiwzNzQ3NjcyMDAzLDI4MjUzNzk2NjksODI5MzI5MTM1LDExODEzMzUxNjEsMzQxMjE3NzgwNCwzMTYwODM0ODQyLDYyODA4NTQwOCwxMzgyNjA1MzY2LDM0MjMzNjkxMDksMzEzODA3ODQ2Nyw1NzA1NjIyMzMsMTQyNjQwMDgxNSwzMzE3MzE2NTQyLDI5OTg3MzM2MDgsNzMzMjM5OTU0LDE1NTUyNjE5NTYsMzI2ODkzNTU5MSwzMDUwMzYwNjI1LDc1MjQ1OTQwMywxNTQxMzIwMjIxLDI2MDcwNzE5MjAsMzk2NTk3MzAzMCwxOTY5OTIyOTcyLDQwNzM1NDk4LDI2MTc4MzcyMjUsMzk0MzU3NzE1MSwxOTEzMDg3ODc3LDgzOTA4MzcxLDI1MTIzNDE2MzQsMzgwMzc0MDY5MiwyMDc1MjA4NjIyLDIxMzI2MTExMiwyNDYzMjcyNjAzLDM4NTU5OTAyODUsMjA5NDg1NDA3MSwxOTg5NTg4ODEsMjI2MjAyOTAxMiw0MDU3MjYwNjEwLDE3NTkzNTk5OTIsNTM0NDE0MTkwLDIxNzY3MTg1NDEsNDEzOTMyOTExNSwxODczODM2MDAxLDQxNDY2NDU2NywyMjgyMjQ4OTM0LDQyNzkyMDAzNjgsMTcxMTY4NDU1NCwyODUyODExMTYsMjQwNTgwMTcyNyw0MTY3MjE2NzQ1LDE2MzQ0Njc3OTUsMzc2MjI5NzAxLDI2ODUwNjc4OTYsMzYwODAwNzQwNiwxMzA4OTE4NjEyLDk1NjU0MzkzOCwyODA4NTU1MTA1LDM0OTU5NTgyNjMsMTIzMTYzNjMwMSwxMDQ3NDI3MDM1LDI5MzI5NTk4MTgsMzY1NDcwMzgzNiwxMDg4MzU5MjcwLDkzNjkxOGUzLDI4NDc3MTQ4OTksMzczNjgzNzgyOSwxMjAyOTAwODYzLDgxNzIzMzg5NywzMTgzMzQyMTA4LDM0MDEyMzcxMzAsMTQwNDI3NzU1Miw2MTU4MTgxNTAsMzEzNDIwNzQ5MywzNDUzNDIxMjAzLDE0MjM4NTc0NDksNjAxNDUwNDMxLDMwMDk4Mzc2MTQsMzI5NDcxMDQ1NiwxNTY3MTAzNzQ2LDcxMTkyODcyNCwzMDIwNjY4NDcxLDMyNzIzODAwNjUsMTUxMDMzNDIzNSw3NTUxNjcxMTddO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlfHwhZS5sZW5ndGgpcmV0dXJuIDA7dmFyIHI9XCJzdHJpbmdcIiE9PWEuZ2V0VHlwZU9mKGUpO1widW5kZWZpbmVkXCI9PXR5cGVvZiB0JiYodD0wKTt2YXIgcz0wLG89MCxkPTA7dF49LTE7Zm9yKHZhciBsPTAscD1lLmxlbmd0aDtsPHA7bCsrKWQ9cj9lW2xdOmUuY2hhckNvZGVBdChsKSxvPTI1NSYodF5kKSxzPW5bb10sdD10Pj4+OF5zO3JldHVybi0xXnR9fSx7XCIuL3V0aWxzXCI6MzJ9XSwxNjpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gYSgpe3RoaXMuZGF0YT1udWxsLHRoaXMubGVuZ3RoPTAsdGhpcy5pbmRleD0wLHRoaXMuemVybz0wfXZhciBuPWUoXCIuL3V0aWxzXCIpO2EucHJvdG90eXBlPXtjaGVja09mZnNldDpmdW5jdGlvbihlKXt0aGlzLmNoZWNrSW5kZXgodGhpcy5pbmRleCtlKX0sY2hlY2tJbmRleDpmdW5jdGlvbihlKXtpZih0aGlzLmxlbmd0aDx0aGlzLnplcm8rZXx8MD5lKXRocm93IG5ldyBFcnJvcihcIkVuZCBvZiBkYXRhIHJlYWNoZWQgKGRhdGEgbGVuZ3RoID0gXCIrdGhpcy5sZW5ndGgrXCIsIGFza2VkIGluZGV4ID0gXCIrZStcIikuIENvcnJ1cHRlZCB6aXAgP1wiKX0sc2V0SW5kZXg6ZnVuY3Rpb24oZSl7dGhpcy5jaGVja0luZGV4KGUpLHRoaXMuaW5kZXg9ZX0sc2tpcDpmdW5jdGlvbihlKXt0aGlzLnNldEluZGV4KHRoaXMuaW5kZXgrZSl9LGJ5dGVBdDpmdW5jdGlvbigpe30scmVhZEludDpmdW5jdGlvbihlKXt2YXIgdD0wLGE7Zm9yKHRoaXMuY2hlY2tPZmZzZXQoZSksYT10aGlzLmluZGV4K2UtMTthPj10aGlzLmluZGV4O2EtLSl0PSh0PDw4KSt0aGlzLmJ5dGVBdChhKTtyZXR1cm4gdGhpcy5pbmRleCs9ZSx0fSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBuLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsdGhpcy5yZWFkRGF0YShlKSl9LHJlYWREYXRhOmZ1bmN0aW9uKCl7fSxsYXN0SW5kZXhPZlNpZ25hdHVyZTpmdW5jdGlvbigpe30scmVhZERhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlYWRJbnQoNCk7cmV0dXJuIG5ldyBEYXRlKCgxMjcmZT4+MjUpKzE5ODAsKDE1JmU+PjIxKS0xLDMxJmU+PjE2LDMxJmU+PjExLDYzJmU+PjUsKDMxJmUpPDwxKX19LHQuZXhwb3J0cz1hfSx7XCIuL3V0aWxzXCI6MzJ9XSwxNzpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JzthLmJhc2U2ND0hMSxhLmJpbmFyeT0hMSxhLmRpcj0hMSxhLmNyZWF0ZUZvbGRlcnM9ITEsYS5kYXRlPW51bGwsYS5jb21wcmVzc2lvbj1udWxsLGEuY29tcHJlc3Npb25PcHRpb25zPW51bGwsYS5jb21tZW50PW51bGwsYS51bml4UGVybWlzc2lvbnM9bnVsbCxhLmRvc1Blcm1pc3Npb25zPW51bGx9LHt9XSwxODpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0Jzt2YXIgbj1lKFwiLi91dGlsc1wiKTthLnN0cmluZzJiaW5hcnk9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3RyaW5nMmJpbmFyeShlKX0sYS5zdHJpbmcyVWludDhBcnJheT1mdW5jdGlvbihlKXtyZXR1cm4gbi50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIixlKX0sYS51aW50OEFycmF5MlN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gbi50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLGUpfSxhLnN0cmluZzJCbG9iPWZ1bmN0aW9uKGUpe3ZhciB0PW4udHJhbnNmb3JtVG8oXCJhcnJheWJ1ZmZlclwiLGUpO3JldHVybiBuLmFycmF5QnVmZmVyMkJsb2IodCl9LGEuYXJyYXlCdWZmZXIyQmxvYj1mdW5jdGlvbihlKXtyZXR1cm4gbi5hcnJheUJ1ZmZlcjJCbG9iKGUpfSxhLnRyYW5zZm9ybVRvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4udHJhbnNmb3JtVG8oZSx0KX0sYS5nZXRUeXBlT2Y9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uZ2V0VHlwZU9mKGUpfSxhLmNoZWNrU3VwcG9ydD1mdW5jdGlvbihlKXtyZXR1cm4gbi5jaGVja1N1cHBvcnQoZSl9LGEuTUFYX1ZBTFVFXzE2QklUUz1uLk1BWF9WQUxVRV8xNkJJVFMsYS5NQVhfVkFMVUVfMzJCSVRTPW4uTUFYX1ZBTFVFXzMyQklUUyxhLnByZXR0eT1mdW5jdGlvbihlKXtyZXR1cm4gbi5wcmV0dHkoZSl9LGEuZmluZENvbXByZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiBuLmZpbmRDb21wcmVzc2lvbihlKX0sYS5pc1JlZ0V4cD1mdW5jdGlvbihlKXtyZXR1cm4gbi5pc1JlZ0V4cChlKX19LHtcIi4vdXRpbHNcIjozMn1dLDE5OltmdW5jdGlvbihlLHQsYSl7J3VzZSBzdHJpY3QnO3ZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDE2QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MzJBcnJheSxyPWUoXCJwYWtvXCIpO2EudW5jb21wcmVzc0lucHV0VHlwZT1uP1widWludDhhcnJheVwiOlwiYXJyYXlcIixhLmNvbXByZXNzSW5wdXRUeXBlPW4/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiLGEubWFnaWM9XCJcXGJcXDBcIixhLmNvbXByZXNzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuZGVmbGF0ZVJhdyhlLHtsZXZlbDp0LmxldmVsfHwtMX0pfSxhLnVuY29tcHJlc3M9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuaW5mbGF0ZVJhdyhlKX19LHtwYWtvOjM3fV0sMjA6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGEoZSx0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGE/dm9pZCh0aGlzLmZpbGVzPXt9LHRoaXMuY29tbWVudD1udWxsLHRoaXMucm9vdD1cIlwiLGUmJnRoaXMubG9hZChlLHQpLHRoaXMuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgYTtmb3IodmFyIHQgaW4gdGhpcylcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW3RdJiYoZVt0XT10aGlzW3RdKTtyZXR1cm4gZX0pOm5ldyBhKGUsdCl9dmFyIG49ZShcIi4vYmFzZTY0XCIpO2EucHJvdG90eXBlPWUoXCIuL29iamVjdFwiKSxhLnByb3RvdHlwZS5sb2FkPWUoXCIuL2xvYWRcIiksYS5zdXBwb3J0PWUoXCIuL3N1cHBvcnRcIiksYS5kZWZhdWx0cz1lKFwiLi9kZWZhdWx0c1wiKSxhLnV0aWxzPWUoXCIuL2RlcHJlY2F0ZWRQdWJsaWNVdGlsc1wiKSxhLmJhc2U2ND17ZW5jb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuLmVuY29kZShlKX0sZGVjb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuLmRlY29kZShlKX19LGEuY29tcHJlc3Npb25zPWUoXCIuL2NvbXByZXNzaW9uc1wiKSx0LmV4cG9ydHM9YX0se1wiLi9iYXNlNjRcIjoxMixcIi4vY29tcHJlc3Npb25zXCI6MTQsXCIuL2RlZmF1bHRzXCI6MTcsXCIuL2RlcHJlY2F0ZWRQdWJsaWNVdGlsc1wiOjE4LFwiLi9sb2FkXCI6MjEsXCIuL29iamVjdFwiOjI0LFwiLi9zdXBwb3J0XCI6Mjh9XSwyMTpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7dmFyIGE9ZShcIi4vYmFzZTY0XCIpLG49ZShcIi4vdXRmOFwiKSxyPWUoXCIuL3V0aWxzXCIpLHM9ZShcIi4vemlwRW50cmllc1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgbyxkLGwscDtmb3IodD1yLmV4dGVuZCh0fHx7fSx7YmFzZTY0OiExLGNoZWNrQ1JDMzI6ITEsb3B0aW1pemVkQmluYXJ5U3RyaW5nOiExLGNyZWF0ZUZvbGRlcnM6ITEsZGVjb2RlRmlsZU5hbWU6bi51dGY4ZGVjb2RlfSksdC5iYXNlNjQmJihlPWEuZGVjb2RlKGUpKSxkPW5ldyBzKGUsdCksbz1kLmZpbGVzLGw9MDtsPG8ubGVuZ3RoO2wrKylwPW9bbF0sdGhpcy5maWxlKHAuZmlsZU5hbWVTdHIscC5kZWNvbXByZXNzZWQse2JpbmFyeTohMCxvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6ITAsZGF0ZTpwLmRhdGUsZGlyOnAuZGlyLGNvbW1lbnQ6cC5maWxlQ29tbWVudFN0ci5sZW5ndGg/cC5maWxlQ29tbWVudFN0cjpudWxsLHVuaXhQZXJtaXNzaW9uczpwLnVuaXhQZXJtaXNzaW9ucyxkb3NQZXJtaXNzaW9uczpwLmRvc1Blcm1pc3Npb25zLGNyZWF0ZUZvbGRlcnM6dC5jcmVhdGVGb2xkZXJzfSk7cmV0dXJuIGQuemlwQ29tbWVudC5sZW5ndGgmJih0aGlzLmNvbW1lbnQ9ZC56aXBDb21tZW50KSx0aGlzfX0se1wiLi9iYXNlNjRcIjoxMixcIi4vdXRmOFwiOjMxLFwiLi91dGlsc1wiOjMyLFwiLi96aXBFbnRyaWVzXCI6MzN9XSwyMjpbZnVuY3Rpb24oZSx0KXsoZnVuY3Rpb24oZSl7J3VzZSBzdHJpY3QnO3QuZXhwb3J0cz1mdW5jdGlvbih0LGEpe3JldHVybiBuZXcgZSh0LGEpfSx0LmV4cG9ydHMudGVzdD1mdW5jdGlvbih0KXtyZXR1cm4gZS5pc0J1ZmZlcih0KX19KS5jYWxsKHRoaXMsZShcImJ1ZmZlclwiKS5CdWZmZXIpfSx7YnVmZmVyOjd9XSwyMzpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gYShlKXt0aGlzLmRhdGE9ZSx0aGlzLmxlbmd0aD10aGlzLmRhdGEubGVuZ3RoLHRoaXMuaW5kZXg9MCx0aGlzLnplcm89MH12YXIgbj1lKFwiLi91aW50OEFycmF5UmVhZGVyXCIpO2EucHJvdG90eXBlPW5ldyBuLGEucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tPZmZzZXQoZSk7dmFyIHQ9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2UpO3JldHVybiB0aGlzLmluZGV4Kz1lLHR9LHQuZXhwb3J0cz1hfSx7XCIuL3VpbnQ4QXJyYXlSZWFkZXJcIjoyOX1dLDI0OltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1lKFwiLi9zdXBwb3J0XCIpLG49ZShcIi4vdXRpbHNcIikscj1lKFwiLi9jcmMzMlwiKSxzPWUoXCIuL3NpZ25hdHVyZVwiKSxpPWUoXCIuL2RlZmF1bHRzXCIpLG89ZShcIi4vYmFzZTY0XCIpLGw9ZShcIi4vY29tcHJlc3Npb25zXCIpLHA9ZShcIi4vY29tcHJlc3NlZE9iamVjdFwiKSxjPWUoXCIuL25vZGVCdWZmZXJcIiksdT1lKFwiLi91dGY4XCIpLG09ZShcIi4vc3RyaW5nV3JpdGVyXCIpLF89ZShcIi4vdWludDhBcnJheVdyaXRlclwiKSxmPWZ1bmN0aW9uKGUpe2lmKGUuX2RhdGEgaW5zdGFuY2VvZiBwJiYoZS5fZGF0YT1lLl9kYXRhLmdldENvbnRlbnQoKSxlLm9wdGlvbnMuYmluYXJ5PSEwLGUub3B0aW9ucy5iYXNlNjQ9ITEsXCJ1aW50OGFycmF5XCI9PT1uLmdldFR5cGVPZihlLl9kYXRhKSkpe3ZhciB0PWUuX2RhdGE7ZS5fZGF0YT1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCksMCE9PXQubGVuZ3RoJiZlLl9kYXRhLnNldCh0LDApfXJldHVybiBlLl9kYXRhfSxoPWZ1bmN0aW9uKGUpe3ZhciB0PWYoZSkscj1uLmdldFR5cGVPZih0KTtyZXR1cm5cInN0cmluZ1wiPT09cj8hZS5vcHRpb25zLmJpbmFyeSYmYS5ub2RlYnVmZmVyP2ModCxcInV0Zi04XCIpOmUuYXNCaW5hcnkoKTp0fSxnPWZ1bmN0aW9uKGUpe3ZhciB0PWYodGhpcyk7cmV0dXJuIG51bGw9PT10fHxcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cIlwiOih0aGlzLm9wdGlvbnMuYmFzZTY0JiYodD1vLmRlY29kZSh0KSksdD1lJiZ0aGlzLm9wdGlvbnMuYmluYXJ5P1IudXRmOGRlY29kZSh0KTpuLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsdCksZXx8dGhpcy5vcHRpb25zLmJpbmFyeXx8KHQ9bi50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLFIudXRmOGVuY29kZSh0KSkpLHQpfSx5PWZ1bmN0aW9uKGUsdCxhKXt0aGlzLm5hbWU9ZSx0aGlzLmRpcj1hLmRpcix0aGlzLmRhdGU9YS5kYXRlLHRoaXMuY29tbWVudD1hLmNvbW1lbnQsdGhpcy51bml4UGVybWlzc2lvbnM9YS51bml4UGVybWlzc2lvbnMsdGhpcy5kb3NQZXJtaXNzaW9ucz1hLmRvc1Blcm1pc3Npb25zLHRoaXMuX2RhdGE9dCx0aGlzLm9wdGlvbnM9YSx0aGlzLl9pbml0aWFsTWV0YWRhdGE9e2RpcjphLmRpcixkYXRlOmEuZGF0ZX19O3kucHJvdG90eXBlPXthc1RleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZy5jYWxsKHRoaXMsITApfSxhc0JpbmFyeTpmdW5jdGlvbigpe3JldHVybiBnLmNhbGwodGhpcywhMSl9LGFzTm9kZUJ1ZmZlcjpmdW5jdGlvbigpe3ZhciBlPWgodGhpcyk7cmV0dXJuIG4udHJhbnNmb3JtVG8oXCJub2RlYnVmZmVyXCIsZSl9LGFzVWludDhBcnJheTpmdW5jdGlvbigpe3ZhciBlPWgodGhpcyk7cmV0dXJuIG4udHJhbnNmb3JtVG8oXCJ1aW50OGFycmF5XCIsZSl9LGFzQXJyYXlCdWZmZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc1VpbnQ4QXJyYXkoKS5idWZmZXJ9fTt2YXIgYj1mdW5jdGlvbihlLHQpe3ZhciBhPVwiXCIsbjtmb3Iobj0wO248dDtuKyspYSs9ZCgyNTUmZSksZT4+Pj04O3JldHVybiBhfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fHt9LCEwPT09ZS5iYXNlNjQmJihudWxsPT09ZS5iaW5hcnl8fHZvaWQgMD09PWUuYmluYXJ5KSYmKGUuYmluYXJ5PSEwKSxlPW4uZXh0ZW5kKGUsaSksZS5kYXRlPWUuZGF0ZXx8bmV3IERhdGUsbnVsbCE9PWUuY29tcHJlc3Npb24mJihlLmNvbXByZXNzaW9uPWUuY29tcHJlc3Npb24udG9VcHBlckNhc2UoKSksZX0sdz1mdW5jdGlvbihlLHQsYSl7dmFyIHI9bi5nZXRUeXBlT2YodCkscztpZihhPXgoYSksXCJzdHJpbmdcIj09dHlwZW9mIGEudW5peFBlcm1pc3Npb25zJiYoYS51bml4UGVybWlzc2lvbnM9cGFyc2VJbnQoYS51bml4UGVybWlzc2lvbnMsOCkpLGEudW5peFBlcm1pc3Npb25zJiYxNjM4NCZhLnVuaXhQZXJtaXNzaW9ucyYmKGEuZGlyPSEwKSxhLmRvc1Blcm1pc3Npb25zJiYxNiZhLmRvc1Blcm1pc3Npb25zJiYoYS5kaXI9ITApLGEuZGlyJiYoZT1DKGUpKSxhLmNyZWF0ZUZvbGRlcnMmJihzPUUoZSkpJiZBLmNhbGwodGhpcyxzLCEwKSxhLmRpcnx8bnVsbD09PXR8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0KWEuYmFzZTY0PSExLGEuYmluYXJ5PSExLHQ9bnVsbCxyPW51bGw7ZWxzZSBpZihcInN0cmluZ1wiPT09cilhLmJpbmFyeSYmIWEuYmFzZTY0JiYhMCE9PWEub3B0aW1pemVkQmluYXJ5U3RyaW5nJiYodD1uLnN0cmluZzJiaW5hcnkodCkpO2Vsc2V7aWYoYS5iYXNlNjQ9ITEsYS5iaW5hcnk9ITAsIXImJiEodCBpbnN0YW5jZW9mIHApKXRocm93IG5ldyBFcnJvcihcIlRoZSBkYXRhIG9mICdcIitlK1wiJyBpcyBpbiBhbiB1bnN1cHBvcnRlZCBmb3JtYXQgIVwiKTtcImFycmF5YnVmZmVyXCI9PXImJih0PW4udHJhbnNmb3JtVG8oXCJ1aW50OGFycmF5XCIsdCkpfXZhciBpPW5ldyB5KGUsdCxhKTtyZXR1cm4gdGhpcy5maWxlc1tlXT1pLGl9LEU9ZnVuY3Rpb24oZSl7XCIvXCI9PWUuc2xpY2UoLTEpJiYoZT1lLnN1YnN0cmluZygwLGUubGVuZ3RoLTEpKTt2YXIgdD1lLmxhc3RJbmRleE9mKFwiL1wiKTtyZXR1cm4gMDx0P2Uuc3Vic3RyaW5nKDAsdCk6XCJcIn0sQz1mdW5jdGlvbihlKXtyZXR1cm5cIi9cIiE9ZS5zbGljZSgtMSkmJihlKz1cIi9cIiksZX0sQT1mdW5jdGlvbihlLHQpe3JldHVybiB0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZ0LGU9QyhlKSx0aGlzLmZpbGVzW2VdfHx3LmNhbGwodGhpcyxlLG51bGwse2RpcjohMCxjcmVhdGVGb2xkZXJzOnR9KSx0aGlzLmZpbGVzW2VdfSxTPWZ1bmN0aW9uKGUsdCxhKXt2YXIgcz1uZXcgcCxpO3JldHVybiBlLl9kYXRhIGluc3RhbmNlb2YgcD8ocy51bmNvbXByZXNzZWRTaXplPWUuX2RhdGEudW5jb21wcmVzc2VkU2l6ZSxzLmNyYzMyPWUuX2RhdGEuY3JjMzIsMD09PXMudW5jb21wcmVzc2VkU2l6ZXx8ZS5kaXI/KHQ9bC5TVE9SRSxzLmNvbXByZXNzZWRDb250ZW50PVwiXCIscy5jcmMzMj0wKTplLl9kYXRhLmNvbXByZXNzaW9uTWV0aG9kPT09dC5tYWdpYz9zLmNvbXByZXNzZWRDb250ZW50PWUuX2RhdGEuZ2V0Q29tcHJlc3NlZENvbnRlbnQoKTooaT1lLl9kYXRhLmdldENvbnRlbnQoKSxzLmNvbXByZXNzZWRDb250ZW50PXQuY29tcHJlc3Mobi50cmFuc2Zvcm1Ubyh0LmNvbXByZXNzSW5wdXRUeXBlLGkpLGEpKSk6KGk9aChlKSwoIWl8fDA9PT1pLmxlbmd0aHx8ZS5kaXIpJiYodD1sLlNUT1JFLGk9XCJcIikscy51bmNvbXByZXNzZWRTaXplPWkubGVuZ3RoLHMuY3JjMzI9cihpKSxzLmNvbXByZXNzZWRDb250ZW50PXQuY29tcHJlc3Mobi50cmFuc2Zvcm1Ubyh0LmNvbXByZXNzSW5wdXRUeXBlLGkpLGEpKSxzLmNvbXByZXNzZWRTaXplPXMuY29tcHJlc3NlZENvbnRlbnQubGVuZ3RoLHMuY29tcHJlc3Npb25NZXRob2Q9dC5tYWdpYyxzfSxrPWZ1bmN0aW9uKGUsdCl7dmFyIGE9ZTtyZXR1cm4gZXx8KGE9dD8xNjg5MzozMzIwNCksKDY1NTM1JmEpPDwxNn0sdj1mdW5jdGlvbihlKXtyZXR1cm4gNjMmKGV8fDApfSxJPWZ1bmN0aW9uKGUsdCxhLGksZCxsKXt2YXIgcD1hLmNvbXByZXNzZWRDb250ZW50LGM9bCE9PXUudXRmOGVuY29kZSxtPW4udHJhbnNmb3JtVG8oXCJzdHJpbmdcIixsKHQubmFtZSkpLF89bi50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLHUudXRmOGVuY29kZSh0Lm5hbWUpKSxmPXQuY29tbWVudHx8XCJcIixoPW4udHJhbnNmb3JtVG8oXCJzdHJpbmdcIixsKGYpKSxnPW4udHJhbnNmb3JtVG8oXCJzdHJpbmdcIix1LnV0ZjhlbmNvZGUoZikpLHk9Xy5sZW5ndGghPT10Lm5hbWUubGVuZ3RoLHg9Zy5sZW5ndGghPT1mLmxlbmd0aCx3PXQub3B0aW9ucyxvPVwiXCIsRT1cIlwiLEM9XCJcIixBLFMsSSxSO0k9dC5faW5pdGlhbE1ldGFkYXRhLmRpcj09PXQuZGlyP3cuZGlyOnQuZGlyLFI9dC5faW5pdGlhbE1ldGFkYXRhLmRhdGU9PT10LmRhdGU/dy5kYXRlOnQuZGF0ZTt2YXIgTz0wLHo9MDtJJiYoT3w9MTYpLFwiVU5JWFwiPT09ZD8oej03OTgsT3w9ayh0LnVuaXhQZXJtaXNzaW9ucyxJKSk6KHo9MjAsT3w9dih0LmRvc1Blcm1pc3Npb25zLEkpKSxBPVIuZ2V0SG91cnMoKSxBPDw9NixBfD1SLmdldE1pbnV0ZXMoKSxBPDw9NSxBfD1SLmdldFNlY29uZHMoKS8yLFM9Ui5nZXRGdWxsWWVhcigpLTE5ODAsUzw8PTQsU3w9Ui5nZXRNb250aCgpKzEsUzw8PTUsU3w9Ui5nZXREYXRlKCkseSYmKEU9YigxLDEpK2IocihtKSw0KStfLG8rPVwidXBcIitiKEUubGVuZ3RoLDIpK0UpLHgmJihDPWIoMSwxKStiKHRoaXMuY3JjMzIoaCksNCkrZyxvKz1cInVjXCIrYihDLmxlbmd0aCwyKStDKTt2YXIgTD1cIlwiO0wrPVwiXFxuXFwwXCIsTCs9IWMmJih5fHx4KT9cIlxcMFxcYlwiOlwiXFwwXFwwXCIsTCs9YS5jb21wcmVzc2lvbk1ldGhvZCxMKz1iKEEsMiksTCs9YihTLDIpLEwrPWIoYS5jcmMzMiw0KSxMKz1iKGEuY29tcHJlc3NlZFNpemUsNCksTCs9YihhLnVuY29tcHJlc3NlZFNpemUsNCksTCs9YihtLmxlbmd0aCwyKSxMKz1iKG8ubGVuZ3RoLDIpO3ZhciBUPXMuTE9DQUxfRklMRV9IRUFERVIrTCttK28sQj1zLkNFTlRSQUxfRklMRV9IRUFERVIrYih6LDIpK0wrYihoLmxlbmd0aCwyKStcIlxcMFxcMFxcMFxcMFwiK2IoTyw0KStiKGksNCkrbStvK2g7cmV0dXJue2ZpbGVSZWNvcmQ6VCxkaXJSZWNvcmQ6Qixjb21wcmVzc2VkT2JqZWN0OmF9fSxSPXtsb2FkOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiTG9hZCBtZXRob2QgaXMgbm90IGRlZmluZWQuIElzIHRoZSBmaWxlIGpzemlwLWxvYWQuanMgaW5jbHVkZWQgP1wiKX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLGEscixzLGk7Zm9yKGEgaW4gdGhpcy5maWxlcyl0aGlzLmZpbGVzLmhhc093blByb3BlcnR5KGEpJiYocz10aGlzLmZpbGVzW2FdLGk9bmV3IHkocy5uYW1lLHMuX2RhdGEsbi5leHRlbmQocy5vcHRpb25zKSkscj1hLnNsaWNlKHRoaXMucm9vdC5sZW5ndGgsYS5sZW5ndGgpLGEuc2xpY2UoMCx0aGlzLnJvb3QubGVuZ3RoKT09PXRoaXMucm9vdCYmZShyLGkpJiZ0LnB1c2goaSkpO3JldHVybiB0fSxmaWxlOmZ1bmN0aW9uKGUsdCxhKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYobi5pc1JlZ0V4cChlKSl7dmFyIHI9ZTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4hdC5kaXImJnIudGVzdChlKX0pfXJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbih0LGEpe3JldHVybiFhLmRpciYmdD09PWV9KVswXXx8bnVsbH1yZXR1cm4gZT10aGlzLnJvb3QrZSx3LmNhbGwodGhpcyxlLHQsYSksdGhpc30sZm9sZGVyOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzO2lmKG4uaXNSZWdFeHAoZSkpcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKHQsYSl7cmV0dXJuIGEuZGlyJiZlLnRlc3QodCl9KTt2YXIgdD10aGlzLnJvb3QrZSxhPUEuY2FsbCh0aGlzLHQpLHI9dGhpcy5jbG9uZSgpO3JldHVybiByLnJvb3Q9YS5uYW1lLHJ9LHJlbW92ZTpmdW5jdGlvbihlKXtlPXRoaXMucm9vdCtlO3ZhciB0PXRoaXMuZmlsZXNbZV07aWYodHx8KFwiL1wiIT1lLnNsaWNlKC0xKSYmKGUrPVwiL1wiKSx0PXRoaXMuZmlsZXNbZV0pLHQmJiF0LmRpcilkZWxldGUgdGhpcy5maWxlc1tlXTtlbHNlIGZvcih2YXIgYT10aGlzLmZpbHRlcihmdW5jdGlvbih0LGEpe3JldHVybiBhLm5hbWUuc2xpY2UoMCxlLmxlbmd0aCk9PT1lfSksbj0wO248YS5sZW5ndGg7bisrKWRlbGV0ZSB0aGlzLmZpbGVzW2Fbbl0ubmFtZV07cmV0dXJuIHRoaXN9LGdlbmVyYXRlOmZ1bmN0aW9uKGUpe2U9bi5leHRlbmQoZXx8e30se2Jhc2U2NDohMCxjb21wcmVzc2lvbjpcIlNUT1JFXCIsY29tcHJlc3Npb25PcHRpb25zOm51bGwsdHlwZTpcImJhc2U2NFwiLHBsYXRmb3JtOlwiRE9TXCIsY29tbWVudDpudWxsLG1pbWVUeXBlOlwiYXBwbGljYXRpb24vemlwXCIsZW5jb2RlRmlsZU5hbWU6dS51dGY4ZW5jb2RlfSksbi5jaGVja1N1cHBvcnQoZS50eXBlKSwoXCJkYXJ3aW5cIj09PWUucGxhdGZvcm18fFwiZnJlZWJzZFwiPT09ZS5wbGF0Zm9ybXx8XCJsaW51eFwiPT09ZS5wbGF0Zm9ybXx8XCJzdW5vc1wiPT09ZS5wbGF0Zm9ybSkmJihlLnBsYXRmb3JtPVwiVU5JWFwiKSxcIndpbjMyXCI9PT1lLnBsYXRmb3JtJiYoZS5wbGF0Zm9ybT1cIkRPU1wiKTt2YXIgdD1bXSxhPTAscj0wLGQ9bi50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLGUuZW5jb2RlRmlsZU5hbWUoZS5jb21tZW50fHx0aGlzLmNvbW1lbnR8fFwiXCIpKSxwLGM7Zm9yKHZhciBmIGluIHRoaXMuZmlsZXMpaWYodGhpcy5maWxlcy5oYXNPd25Qcm9wZXJ0eShmKSl7dmFyIGg9dGhpcy5maWxlc1tmXSxnPWgub3B0aW9ucy5jb21wcmVzc2lvbnx8ZS5jb21wcmVzc2lvbi50b1VwcGVyQ2FzZSgpLHk9bFtnXTtpZigheSl0aHJvdyBuZXcgRXJyb3IoZytcIiBpcyBub3QgYSB2YWxpZCBjb21wcmVzc2lvbiBtZXRob2QgIVwiKTt2YXIgeD1oLm9wdGlvbnMuY29tcHJlc3Npb25PcHRpb25zfHxlLmNvbXByZXNzaW9uT3B0aW9uc3x8e30sdz1TLmNhbGwodGhpcyxoLHkseCksRT1JLmNhbGwodGhpcyxmLGgsdyxhLGUucGxhdGZvcm0sZS5lbmNvZGVGaWxlTmFtZSk7YSs9RS5maWxlUmVjb3JkLmxlbmd0aCt3LmNvbXByZXNzZWRTaXplLHIrPUUuZGlyUmVjb3JkLmxlbmd0aCx0LnB1c2goRSl9dmFyIEM9XCJcIjtDPXMuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EK1wiXFwwXFwwXFwwXFwwXCIrYih0Lmxlbmd0aCwyKStiKHQubGVuZ3RoLDIpK2Iociw0KStiKGEsNCkrYihkLmxlbmd0aCwyKStkO3ZhciBBPWUudHlwZS50b0xvd2VyQ2FzZSgpO2ZvcihwPVwidWludDhhcnJheVwiPT09QXx8XCJhcnJheWJ1ZmZlclwiPT09QXx8XCJibG9iXCI9PT1BfHxcIm5vZGVidWZmZXJcIj09PUE/bmV3IF8oYStyK0MubGVuZ3RoKTpuZXcgbShhK3IrQy5sZW5ndGgpLGM9MDtjPHQubGVuZ3RoO2MrKylwLmFwcGVuZCh0W2NdLmZpbGVSZWNvcmQpLHAuYXBwZW5kKHRbY10uY29tcHJlc3NlZE9iamVjdC5jb21wcmVzc2VkQ29udGVudCk7Zm9yKGM9MDtjPHQubGVuZ3RoO2MrKylwLmFwcGVuZCh0W2NdLmRpclJlY29yZCk7cC5hcHBlbmQoQyk7dmFyIGs9cC5maW5hbGl6ZSgpO3N3aXRjaChlLnR5cGUudG9Mb3dlckNhc2UoKSl7Y2FzZVwidWludDhhcnJheVwiOmNhc2VcImFycmF5YnVmZmVyXCI6Y2FzZVwibm9kZWJ1ZmZlclwiOnJldHVybiBuLnRyYW5zZm9ybVRvKGUudHlwZS50b0xvd2VyQ2FzZSgpLGspO2Nhc2VcImJsb2JcIjpyZXR1cm4gbi5hcnJheUJ1ZmZlcjJCbG9iKG4udHJhbnNmb3JtVG8oXCJhcnJheWJ1ZmZlclwiLGspLGUubWltZVR5cGUpO2Nhc2VcImJhc2U2NFwiOnJldHVybiBlLmJhc2U2ND9vLmVuY29kZShrKTprO2RlZmF1bHQ6cmV0dXJuIGs7fX0sY3JjMzI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcihlLHQpfSx1dGY4ZW5jb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsdS51dGY4ZW5jb2RlKGUpKX0sdXRmOGRlY29kZTpmdW5jdGlvbihlKXtyZXR1cm4gdS51dGY4ZGVjb2RlKGUpfX07dC5leHBvcnRzPVJ9LHtcIi4vYmFzZTY0XCI6MTIsXCIuL2NvbXByZXNzZWRPYmplY3RcIjoxMyxcIi4vY29tcHJlc3Npb25zXCI6MTQsXCIuL2NyYzMyXCI6MTUsXCIuL2RlZmF1bHRzXCI6MTcsXCIuL25vZGVCdWZmZXJcIjoyMixcIi4vc2lnbmF0dXJlXCI6MjUsXCIuL3N0cmluZ1dyaXRlclwiOjI3LFwiLi9zdXBwb3J0XCI6MjgsXCIuL3VpbnQ4QXJyYXlXcml0ZXJcIjozMCxcIi4vdXRmOFwiOjMxLFwiLi91dGlsc1wiOjMyfV0sMjU6W2Z1bmN0aW9uKGUsdCxhKXsndXNlIHN0cmljdCc7YS5MT0NBTF9GSUxFX0hFQURFUj1cIlBLXFx4MDNcXHgwNFwiLGEuQ0VOVFJBTF9GSUxFX0hFQURFUj1cIlBLXFx4MDFcXHgwMlwiLGEuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EPVwiUEtcXHgwNVxceDA2XCIsYS5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SPVwiUEtcXHgwNlxceDA3XCIsYS5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQ9XCJQS1xceDA2XFx4MDZcIixhLkRBVEFfREVTQ1JJUFRPUj1cIlBLXFx4MDdcXGJcIn0se31dLDI2OltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBhKGUsdCl7dGhpcy5kYXRhPWUsdHx8KHRoaXMuZGF0YT1yLnN0cmluZzJiaW5hcnkodGhpcy5kYXRhKSksdGhpcy5sZW5ndGg9dGhpcy5kYXRhLmxlbmd0aCx0aGlzLmluZGV4PTAsdGhpcy56ZXJvPTB9dmFyIG49ZShcIi4vZGF0YVJlYWRlclwiKSxyPWUoXCIuL3V0aWxzXCIpO2EucHJvdG90eXBlPW5ldyBuLGEucHJvdG90eXBlLmJ5dGVBdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy56ZXJvK2UpfSxhLnByb3RvdHlwZS5sYXN0SW5kZXhPZlNpZ25hdHVyZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmxhc3RJbmRleE9mKGUpLXRoaXMuemVyb30sYS5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24oZSl7dGhpcy5jaGVja09mZnNldChlKTt2YXIgdD10aGlzLmRhdGEuc2xpY2UodGhpcy56ZXJvK3RoaXMuaW5kZXgsdGhpcy56ZXJvK3RoaXMuaW5kZXgrZSk7cmV0dXJuIHRoaXMuaW5kZXgrPWUsdH0sdC5leHBvcnRzPWF9LHtcIi4vZGF0YVJlYWRlclwiOjE2LFwiLi91dGlsc1wiOjMyfV0sMjc6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO3ZhciBhPWUoXCIuL3V0aWxzXCIpLG49ZnVuY3Rpb24oKXt0aGlzLmRhdGE9W119O24ucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oZSl7ZT1hLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsZSksdGhpcy5kYXRhLnB1c2goZSl9LGZpbmFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5qb2luKFwiXCIpfX0sdC5leHBvcnRzPW59LHtcIi4vdXRpbHNcIjozMn1dLDI4OltmdW5jdGlvbihlLHQsYSl7KGZ1bmN0aW9uKGUpeyd1c2Ugc3RyaWN0JztpZihhLmJhc2U2ND0hMCxhLmFycmF5PSEwLGEuc3RyaW5nPSEwLGEuYXJyYXlidWZmZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSxhLm5vZGVidWZmZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUsYS51aW50OGFycmF5PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5LFwidW5kZWZpbmVkXCI9PXR5cGVvZiBBcnJheUJ1ZmZlcilhLmJsb2I9ITE7ZWxzZXt2YXIgdD1uZXcgQXJyYXlCdWZmZXIoMCk7dHJ5e2EuYmxvYj0wPT09bmV3IEJsb2IoW3RdLHt0eXBlOlwiYXBwbGljYXRpb24vemlwXCJ9KS5zaXplfWNhdGNoKHMpe3RyeXt2YXIgbj13aW5kb3cuQmxvYkJ1aWxkZXJ8fHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyfHx3aW5kb3cuTVNCbG9iQnVpbGRlcixyPW5ldyBuO3IuYXBwZW5kKHQpLGEuYmxvYj0wPT09ci5nZXRCbG9iKFwiYXBwbGljYXRpb24vemlwXCIpLnNpemV9Y2F0Y2godCl7YS5ibG9iPSExfX19fSkuY2FsbCh0aGlzLGUoXCJidWZmZXJcIikuQnVmZmVyKX0se2J1ZmZlcjo3fV0sMjk6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGEoZSl7ZSYmKHRoaXMuZGF0YT1lLHRoaXMubGVuZ3RoPXRoaXMuZGF0YS5sZW5ndGgsdGhpcy5pbmRleD0wLHRoaXMuemVybz0wKX12YXIgbj1lKFwiLi9hcnJheVJlYWRlclwiKTthLnByb3RvdHlwZT1uZXcgbixhLnByb3RvdHlwZS5yZWFkRGF0YT1mdW5jdGlvbihlKXtpZih0aGlzLmNoZWNrT2Zmc2V0KGUpLDA9PT1lKXJldHVybiBuZXcgVWludDhBcnJheSgwKTt2YXIgdD10aGlzLmRhdGEuc3ViYXJyYXkodGhpcy56ZXJvK3RoaXMuaW5kZXgsdGhpcy56ZXJvK3RoaXMuaW5kZXgrZSk7cmV0dXJuIHRoaXMuaW5kZXgrPWUsdH0sdC5leHBvcnRzPWF9LHtcIi4vYXJyYXlSZWFkZXJcIjoxMX1dLDMwOltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1lKFwiLi91dGlsc1wiKSxuPWZ1bmN0aW9uKGUpe3RoaXMuZGF0YT1uZXcgVWludDhBcnJheShlKSx0aGlzLmluZGV4PTB9O24ucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oZSl7MCE9PWUubGVuZ3RoJiYoZT1hLnRyYW5zZm9ybVRvKFwidWludDhhcnJheVwiLGUpLHRoaXMuZGF0YS5zZXQoZSx0aGlzLmluZGV4KSx0aGlzLmluZGV4Kz1lLmxlbmd0aCl9LGZpbmFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX19LHQuZXhwb3J0cz1ufSx7XCIuL3V0aWxzXCI6MzJ9XSwzMTpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0Jztmb3IodmFyIG49ZShcIi4vdXRpbHNcIikscj1lKFwiLi9zdXBwb3J0XCIpLHM9ZShcIi4vbm9kZUJ1ZmZlclwiKSxvPUFycmF5KDI1NiksZD0wOzI1Nj5kO2QrKylvW2RdPTI1Mjw9ZD82OjI0ODw9ZD81OjI0MDw9ZD80OjIyNDw9ZD8zOjE5Mjw9ZD8yOjE7b1syNTRdPW9bMjU0XT0xO3ZhciBwPWZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoLGE9MCxuLHMsbyxkLGw7Zm9yKGQ9MDtkPHQ7ZCsrKXM9ZS5jaGFyQ29kZUF0KGQpLDU1Mjk2PT0oNjQ1MTImcykmJmQrMTx0JiYobz1lLmNoYXJDb2RlQXQoZCsxKSw1NjMyMD09KDY0NTEyJm8pJiYocz02NTUzNisocy01NTI5Njw8MTApKyhvLTU2MzIwKSxkKyspKSxhKz0xMjg+cz8xOjIwNDg+cz8yOjY1NTM2PnM/Mzo0O2ZvcihuPXIudWludDhhcnJheT9uZXcgVWludDhBcnJheShhKTpBcnJheShhKSxsPTAsZD0wO2w8YTtkKyspcz1lLmNoYXJDb2RlQXQoZCksNTUyOTY9PSg2NDUxMiZzKSYmZCsxPHQmJihvPWUuY2hhckNvZGVBdChkKzEpLDU2MzIwPT0oNjQ1MTImbykmJihzPTY1NTM2KyhzLTU1Mjk2PDwxMCkrKG8tNTYzMjApLGQrKykpLDEyOD5zP25bbCsrXT1zOjIwNDg+cz8obltsKytdPTE5MnxzPj4+NixuW2wrK109MTI4fDYzJnMpOjY1NTM2PnM/KG5bbCsrXT0yMjR8cz4+PjEyLG5bbCsrXT0xMjh8NjMmcz4+PjYsbltsKytdPTEyOHw2MyZzKToobltsKytdPTI0MHxzPj4+MTgsbltsKytdPTEyOHw2MyZzPj4+MTIsbltsKytdPTEyOHw2MyZzPj4+NixuW2wrK109MTI4fDYzJnMpO3JldHVybiBufSxjPWZ1bmN0aW9uKGUsdCl7dmFyIGE7Zm9yKHQ9dHx8ZS5sZW5ndGgsdD5lLmxlbmd0aCYmKHQ9ZS5sZW5ndGgpLGE9dC0xOzA8PWEmJjEyOD09KDE5MiZlW2FdKTspYS0tO3JldHVybiAwPmE/dDowPT09YT90OmErb1tlW2FdXT50P2E6dH0sdT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxhPUFycmF5KDIqdCkscixzLGQsbDtmb3Iocz0wLHI9MDtyPHQ7KXtpZihkPWVbcisrXSwxMjg+ZCl7YVtzKytdPWQ7Y29udGludWV9aWYobD1vW2RdLDQ8bCl7YVtzKytdPTY1NTMzLHIrPWwtMTtjb250aW51ZX1mb3IoZCY9Mj09PWw/MzE6Mz09PWw/MTU6NzsxPGwmJnI8dDspZD1kPDw2fDYzJmVbcisrXSxsLS07aWYoMTxsKXthW3MrK109NjU1MzM7Y29udGludWV9NjU1MzY+ZD9hW3MrK109ZDooZC09NjU1MzYsYVtzKytdPTU1Mjk2fDEwMjMmZD4+MTAsYVtzKytdPTU2MzIwfDEwMjMmZCl9cmV0dXJuIGEubGVuZ3RoIT09cyYmKGEuc3ViYXJyYXk/YT1hLnN1YmFycmF5KDAscyk6YS5sZW5ndGg9cyksbi5hcHBseUZyb21DaGFyQ29kZShhKX07YS51dGY4ZW5jb2RlPWZ1bmN0aW9uKGUpe3JldHVybiByLm5vZGVidWZmZXI/cyhlLFwidXRmLThcIik6cChlKX0sYS51dGY4ZGVjb2RlPWZ1bmN0aW9uKGUpe2lmKHIubm9kZWJ1ZmZlcilyZXR1cm4gbi50cmFuc2Zvcm1UbyhcIm5vZGVidWZmZXJcIixlKS50b1N0cmluZyhcInV0Zi04XCIpO2U9bi50cmFuc2Zvcm1UbyhyLnVpbnQ4YXJyYXk/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiLGUpO2Zvcih2YXIgdD1bXSxhPTAscz1lLmxlbmd0aDthPHM7KXt2YXIgaT1jKGUsbChhKzY1NTM2LHMpKTtyLnVpbnQ4YXJyYXk/dC5wdXNoKHUoZS5zdWJhcnJheShhLGkpKSk6dC5wdXNoKHUoZS5zbGljZShhLGkpKSksYT1pfXJldHVybiB0LmpvaW4oXCJcIil9fSx7XCIuL25vZGVCdWZmZXJcIjoyMixcIi4vc3VwcG9ydFwiOjI4LFwiLi91dGlsc1wiOjMyfV0sMzI6W2Z1bmN0aW9uKGUsdCxhKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZX1mdW5jdGlvbiBzKGUsdCl7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDsrK2EpdFthXT0yNTUmZS5jaGFyQ29kZUF0KGEpO3JldHVybiB0fWZ1bmN0aW9uIGkoZSl7dmFyIHQ9NjU1MzYsbj1bXSxzPWUubGVuZ3RoLG89YS5nZXRUeXBlT2YoZSkscD0wLGM9ITA7dHJ5e1widWludDhhcnJheVwiPT09bz9kLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMCkpOlwibm9kZWJ1ZmZlclwiPT09bz9kLmFwcGx5KG51bGwsdSgwKSk6dm9pZCAwfWNhdGNoKHQpe2M9ITF9aWYoIWMpe2Zvcih2YXIgbT1cIlwiLF89MDtfPGUubGVuZ3RoO18rKyltKz1kKGVbX10pO3JldHVybiBtfWZvcig7cDxzJiYxPHQ7KXRyeXtcImFycmF5XCI9PT1vfHxcIm5vZGVidWZmZXJcIj09PW8/bi5wdXNoKGQuYXBwbHkobnVsbCxlLnNsaWNlKHAsbChwK3QscykpKSk6bi5wdXNoKGQuYXBwbHkobnVsbCxlLnN1YmFycmF5KHAsbChwK3QscykpKSkscCs9dH1jYXRjaChhKXt0PXIodC8yKX1yZXR1cm4gbi5qb2luKFwiXCIpfWZ1bmN0aW9uIG8oZSx0KXtmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKyl0W2FdPWVbYV07cmV0dXJuIHR9dmFyIHA9ZShcIi4vc3VwcG9ydFwiKSxjPWUoXCIuL2NvbXByZXNzaW9uc1wiKSx1PWUoXCIuL25vZGVCdWZmZXJcIik7YS5zdHJpbmcyYmluYXJ5PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLGE9MDthPGUubGVuZ3RoO2ErKyl0Kz1kKDI1NSZlLmNoYXJDb2RlQXQoYSkpO3JldHVybiB0fSxhLmFycmF5QnVmZmVyMkJsb2I9ZnVuY3Rpb24oZSx0KXthLmNoZWNrU3VwcG9ydChcImJsb2JcIiksdD10fHxcImFwcGxpY2F0aW9uL3ppcFwiO3RyeXtyZXR1cm4gbmV3IEJsb2IoW2VdLHt0eXBlOnR9KX1jYXRjaChhKXt0cnl7dmFyIG49d2luZG93LkJsb2JCdWlsZGVyfHx3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXIscj1uZXcgbjtyZXR1cm4gci5hcHBlbmQoZSksci5nZXRCbG9iKHQpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcIkJ1ZyA6IGNhbid0IGNvbnN0cnVjdCB0aGUgQmxvYi5cIil9fX0sYS5hcHBseUZyb21DaGFyQ29kZT1pO3ZhciBtPXt9O20uc3RyaW5nPXtzdHJpbmc6bixhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gcyhlLEFycmF5KGUubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBtLnN0cmluZy51aW50OGFycmF5KGUpLmJ1ZmZlcn0sdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gcyhlLG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSx1KGUubGVuZ3RoKSl9fSxtLmFycmF5PXtzdHJpbmc6aSxhcnJheTpuLGFycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVWludDhBcnJheShlKS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGUpfSxub2RlYnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiB1KGUpfX0sbS5hcnJheWJ1ZmZlcj17c3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBpKG5ldyBVaW50OEFycmF5KGUpKX0sYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIG8obmV3IFVpbnQ4QXJyYXkoZSksQXJyYXkoZS5ieXRlTGVuZ3RoKSl9LGFycmF5YnVmZmVyOm4sdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHUobmV3IFVpbnQ4QXJyYXkoZSkpfX0sbS51aW50OGFycmF5PXtzdHJpbmc6aSxhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gbyhlLEFycmF5KGUubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBlLmJ1ZmZlcn0sdWludDhhcnJheTpuLG5vZGVidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSl9fSxtLm5vZGVidWZmZXI9e3N0cmluZzppLGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiBvKGUsQXJyYXkoZS5sZW5ndGgpKX0sYXJyYXlidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG0ubm9kZWJ1ZmZlci51aW50OGFycmF5KGUpLmJ1ZmZlcn0sdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gbyhlLG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKSl9LG5vZGVidWZmZXI6bn0sYS50cmFuc2Zvcm1Ubz1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PVwiXCIpLCFlKXJldHVybiB0O2EuY2hlY2tTdXBwb3J0KGUpO3ZhciBuPWEuZ2V0VHlwZU9mKHQpLHI9bVtuXVtlXSh0KTtyZXR1cm4gcn0sYS5nZXRUeXBlT2Y9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJzdHJpbmdcIjpcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk/XCJhcnJheVwiOnAubm9kZWJ1ZmZlciYmdS50ZXN0KGUpP1wibm9kZWJ1ZmZlclwiOnAudWludDhhcnJheSYmZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk/XCJ1aW50OGFycmF5XCI6cC5hcnJheWJ1ZmZlciYmZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP1wiYXJyYXlidWZmZXJcIjp2b2lkIDB9LGEuY2hlY2tTdXBwb3J0PWZ1bmN0aW9uKGUpe3ZhciB0PXBbZS50b0xvd2VyQ2FzZSgpXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoZStcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclwiKX0sYS5NQVhfVkFMVUVfMTZCSVRTPTY1NTM1LGEuTUFYX1ZBTFVFXzMyQklUUz0tMSxhLnByZXR0eT1mdW5jdGlvbihlKXt2YXIgdD1cIlwiLGEsbjtmb3Iobj0wO248KGV8fFwiXCIpLmxlbmd0aDtuKyspYT1lLmNoYXJDb2RlQXQobiksdCs9XCJcXFxceFwiKygxNj5hP1wiMFwiOlwiXCIpK2EudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIHR9LGEuZmluZENvbXByZXNzaW9uPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBjKWlmKGMuaGFzT3duUHJvcGVydHkodCkmJmNbdF0ubWFnaWM9PT1lKXJldHVybiBjW3RdO3JldHVybiBudWxsfSxhLmlzUmVnRXhwPWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LGEuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGU9e30sdCxhO2Zvcih0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKylmb3IoYSBpbiBhcmd1bWVudHNbdF0pYXJndW1lbnRzW3RdLmhhc093blByb3BlcnR5KGEpJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgZVthXSYmKGVbYV09YXJndW1lbnRzW3RdW2FdKTtyZXR1cm4gZX19LHtcIi4vY29tcHJlc3Npb25zXCI6MTQsXCIuL25vZGVCdWZmZXJcIjoyMixcIi4vc3VwcG9ydFwiOjI4fV0sMzM6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGEoZSx0KXt0aGlzLmZpbGVzPVtdLHRoaXMubG9hZE9wdGlvbnM9dCxlJiZ0aGlzLmxvYWQoZSl9dmFyIHI9ZShcIi4vc3RyaW5nUmVhZGVyXCIpLHM9ZShcIi4vbm9kZUJ1ZmZlclJlYWRlclwiKSxpPWUoXCIuL3VpbnQ4QXJyYXlSZWFkZXJcIiksbz1lKFwiLi9hcnJheVJlYWRlclwiKSxkPWUoXCIuL3V0aWxzXCIpLGw9ZShcIi4vc2lnbmF0dXJlXCIpLHA9ZShcIi4vemlwRW50cnlcIiksYz1lKFwiLi9zdXBwb3J0XCIpLHU9ZShcIi4vb2JqZWN0XCIpO2EucHJvdG90eXBlPXtjaGVja1NpZ25hdHVyZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpO2lmKHQhPT1lKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgb3IgYnVnIDogdW5leHBlY3RlZCBzaWduYXR1cmUgKFwiK2QucHJldHR5KHQpK1wiLCBleHBlY3RlZCBcIitkLnByZXR0eShlKStcIilcIil9LGlzU2lnbmF0dXJlOmZ1bmN0aW9uKGUsdCl7dmFyIGE9dGhpcy5yZWFkZXIuaW5kZXg7dGhpcy5yZWFkZXIuc2V0SW5kZXgoZSk7dmFyIG49dGhpcy5yZWFkZXIucmVhZFN0cmluZyg0KTtyZXR1cm4gdGhpcy5yZWFkZXIuc2V0SW5kZXgoYSksbj09PXR9LHJlYWRCbG9ja0VuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3RoaXMuZGlza051bWJlcj10aGlzLnJlYWRlci5yZWFkSW50KDIpLHRoaXMuZGlza1dpdGhDZW50cmFsRGlyU3RhcnQ9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzaz10aGlzLnJlYWRlci5yZWFkSW50KDIpLHRoaXMuY2VudHJhbERpclJlY29yZHM9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJTaXplPXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyT2Zmc2V0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy56aXBDb21tZW50TGVuZ3RoPXRoaXMucmVhZGVyLnJlYWRJbnQoMik7dmFyIGU9dGhpcy5yZWFkZXIucmVhZERhdGEodGhpcy56aXBDb21tZW50TGVuZ3RoKSx0PWMudWludDhhcnJheT9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCIsYT1kLnRyYW5zZm9ybVRvKHQsZSk7dGhpcy56aXBDb21tZW50PXRoaXMubG9hZE9wdGlvbnMuZGVjb2RlRmlsZU5hbWUoYSl9LHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsOmZ1bmN0aW9uKCl7dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemU9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLnZlcnNpb25NYWRlQnk9dGhpcy5yZWFkZXIucmVhZFN0cmluZygyKSx0aGlzLnZlcnNpb25OZWVkZWQ9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YT17fTtmb3IodmFyIGU9dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUtNDQsdCxhLG47MDxlOyl0PXRoaXMucmVhZGVyLnJlYWRJbnQoMiksYT10aGlzLnJlYWRlci5yZWFkSW50KDQpLG49dGhpcy5yZWFkZXIucmVhZFN0cmluZyhhKSx0aGlzLnppcDY0RXh0ZW5zaWJsZURhdGFbdF09e2lkOnQsbGVuZ3RoOmEsdmFsdWU6bn19LHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcjpmdW5jdGlvbigpe2lmKHRoaXMuZGlza1dpdGhaaXA2NENlbnRyYWxEaXJTdGFydD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcj10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuZGlza3NDb3VudD10aGlzLnJlYWRlci5yZWFkSW50KDQpLDE8dGhpcy5kaXNrc0NvdW50KXRocm93IG5ldyBFcnJvcihcIk11bHRpLXZvbHVtZXMgemlwIGFyZSBub3Qgc3VwcG9ydGVkXCIpfSxyZWFkTG9jYWxGaWxlczpmdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKGU9MDtlPHRoaXMuZmlsZXMubGVuZ3RoO2UrKyl0PXRoaXMuZmlsZXNbZV0sdGhpcy5yZWFkZXIuc2V0SW5kZXgodC5sb2NhbEhlYWRlck9mZnNldCksdGhpcy5jaGVja1NpZ25hdHVyZShsLkxPQ0FMX0ZJTEVfSEVBREVSKSx0LnJlYWRMb2NhbFBhcnQodGhpcy5yZWFkZXIpLHQuaGFuZGxlVVRGOCgpLHQucHJvY2Vzc0F0dHJpYnV0ZXMoKX0scmVhZENlbnRyYWxEaXI6ZnVuY3Rpb24oKXt2YXIgZTtmb3IodGhpcy5yZWFkZXIuc2V0SW5kZXgodGhpcy5jZW50cmFsRGlyT2Zmc2V0KTt0aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpPT09bC5DRU5UUkFMX0ZJTEVfSEVBREVSOyllPW5ldyBwKHt6aXA2NDp0aGlzLnppcDY0fSx0aGlzLmxvYWRPcHRpb25zKSxlLnJlYWRDZW50cmFsUGFydCh0aGlzLnJlYWRlciksdGhpcy5maWxlcy5wdXNoKGUpO2lmKHRoaXMuY2VudHJhbERpclJlY29yZHMhPT10aGlzLmZpbGVzLmxlbmd0aClpZigwIT09dGhpcy5jZW50cmFsRGlyUmVjb3JkcyYmMD09PXRoaXMuZmlsZXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgb3IgYnVnOiBleHBlY3RlZCBcIit0aGlzLmNlbnRyYWxEaXJSZWNvcmRzK1wiIHJlY29yZHMgaW4gY2VudHJhbCBkaXIsIGdvdCBcIit0aGlzLmZpbGVzLmxlbmd0aCk7ZWxzZTt9LHJlYWRFbmRPZkNlbnRyYWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZShsLkNFTlRSQUxfRElSRUNUT1JZX0VORCk7aWYoMD5lKXt2YXIgdD0hdGhpcy5pc1NpZ25hdHVyZSgwLGwuTE9DQUxfRklMRV9IRUFERVIpO2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZmluZCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgOiBpcyB0aGlzIGEgemlwIGZpbGUgPyBJZiBpdCBpcywgc2VlIGh0dHA6Ly9zdHVrLmdpdGh1Yi5pby9qc3ppcC9kb2N1bWVudGF0aW9uL2hvd3RvL3JlYWRfemlwLmh0bWxcIik7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY2FuJ3QgZmluZCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnlcIil9dGhpcy5yZWFkZXIuc2V0SW5kZXgoZSk7dmFyIGE9ZTtpZih0aGlzLmNoZWNrU2lnbmF0dXJlKGwuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlYWRCbG9ja0VuZE9mQ2VudHJhbCgpLHRoaXMuZGlza051bWJlcj09PWQuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydD09PWQuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9PT1kLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclJlY29yZHM9PT1kLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclNpemU9PT1kLk1BWF9WQUxVRV8zMkJJVFN8fHRoaXMuY2VudHJhbERpck9mZnNldD09PWQuTUFYX1ZBTFVFXzMyQklUUyl7aWYodGhpcy56aXA2ND0hMCxlPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGwuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfTE9DQVRPUiksMD5lKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBjYW4ndCBmaW5kIHRoZSBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvclwiKTtpZih0aGlzLnJlYWRlci5zZXRJbmRleChlKSx0aGlzLmNoZWNrU2lnbmF0dXJlKGwuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfTE9DQVRPUiksdGhpcy5yZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbExvY2F0b3IoKSwhdGhpcy5pc1NpZ25hdHVyZSh0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXIsbC5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpJiYodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGwuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSwwPnRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcikpdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCA6IGNhbid0IGZpbmQgdGhlIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeVwiKTt0aGlzLnJlYWRlci5zZXRJbmRleCh0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXIpLHRoaXMuY2hlY2tTaWduYXR1cmUobC5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWwoKX12YXIgcj10aGlzLmNlbnRyYWxEaXJPZmZzZXQrdGhpcy5jZW50cmFsRGlyU2l6ZTt0aGlzLnppcDY0JiYocis9MjAscis9MTIrdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUpO3ZhciBzPWEtcjtpZigwPHMpdGhpcy5pc1NpZ25hdHVyZShhLGwuQ0VOVFJBTF9GSUxFX0hFQURFUil8fCh0aGlzLnJlYWRlci56ZXJvPXMpO2Vsc2UgaWYoMD5zKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXA6IG1pc3NpbmcgXCIrbihzKStcIiBieXRlcy5cIil9LHByZXBhcmVSZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9ZC5nZXRUeXBlT2YoZSk7aWYoZC5jaGVja1N1cHBvcnQodCksXCJzdHJpbmdcIj09PXQmJiFjLnVpbnQ4YXJyYXkpdGhpcy5yZWFkZXI9bmV3IHIoZSx0aGlzLmxvYWRPcHRpb25zLm9wdGltaXplZEJpbmFyeVN0cmluZyk7ZWxzZSBpZihcIm5vZGVidWZmZXJcIj09PXQpdGhpcy5yZWFkZXI9bmV3IHMoZSk7ZWxzZSBpZihjLnVpbnQ4YXJyYXkpdGhpcy5yZWFkZXI9bmV3IGkoZC50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIixlKSk7ZWxzZSBpZihjLmFycmF5KXRoaXMucmVhZGVyPW5ldyBvKGQudHJhbnNmb3JtVG8oXCJhcnJheVwiLGUpKTtlbHNlIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3I6IHVuc3VwcG9ydGVkIHR5cGUgJ1wiK3QrXCInXCIpfSxsb2FkOmZ1bmN0aW9uKGUpe3RoaXMucHJlcGFyZVJlYWRlcihlKSx0aGlzLnJlYWRFbmRPZkNlbnRyYWwoKSx0aGlzLnJlYWRDZW50cmFsRGlyKCksdGhpcy5yZWFkTG9jYWxGaWxlcygpfX0sdC5leHBvcnRzPWF9LHtcIi4vYXJyYXlSZWFkZXJcIjoxMSxcIi4vbm9kZUJ1ZmZlclJlYWRlclwiOjIzLFwiLi9vYmplY3RcIjoyNCxcIi4vc2lnbmF0dXJlXCI6MjUsXCIuL3N0cmluZ1JlYWRlclwiOjI2LFwiLi9zdXBwb3J0XCI6MjgsXCIuL3VpbnQ4QXJyYXlSZWFkZXJcIjoyOSxcIi4vdXRpbHNcIjozMixcIi4vemlwRW50cnlcIjozNH1dLDM0OltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBhKGUsdCl7dGhpcy5vcHRpb25zPWUsdGhpcy5sb2FkT3B0aW9ucz10fXZhciBuPWUoXCIuL3N0cmluZ1JlYWRlclwiKSxyPWUoXCIuL3V0aWxzXCIpLHM9ZShcIi4vY29tcHJlc3NlZE9iamVjdFwiKSxpPWUoXCIuL29iamVjdFwiKSxvPWUoXCIuL3N1cHBvcnRcIik7YS5wcm90b3R5cGU9e2lzRW5jcnlwdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PSgxJnRoaXMuYml0RmxhZyl9LHVzZVVURjg6ZnVuY3Rpb24oKXtyZXR1cm4gMjA0OD09KDIwNDgmdGhpcy5iaXRGbGFnKX0scHJlcGFyZUNvbXByZXNzZWRDb250ZW50OmZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj1lLmluZGV4O2Uuc2V0SW5kZXgodCk7dmFyIHI9ZS5yZWFkRGF0YShhKTtyZXR1cm4gZS5zZXRJbmRleChuKSxyfX0scHJlcGFyZUNvbnRlbnQ6ZnVuY3Rpb24oZSx0LGEsbixzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1yLnRyYW5zZm9ybVRvKG4udW5jb21wcmVzc0lucHV0VHlwZSx0aGlzLmdldENvbXByZXNzZWRDb250ZW50KCkpLHQ9bi51bmNvbXByZXNzKGUpO2lmKHQubGVuZ3RoIT09cyl0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiB1bmNvbXByZXNzZWQgZGF0YSBzaXplIG1pc21hdGNoXCIpO3JldHVybiB0fX0scmVhZExvY2FsUGFydDpmdW5jdGlvbihlKXt2YXIgdCxhO2lmKGUuc2tpcCgyMiksdGhpcy5maWxlTmFtZUxlbmd0aD1lLnJlYWRJbnQoMiksYT1lLnJlYWRJbnQoMiksdGhpcy5maWxlTmFtZT1lLnJlYWREYXRhKHRoaXMuZmlsZU5hbWVMZW5ndGgpLGUuc2tpcChhKSwtMT09dGhpcy5jb21wcmVzc2VkU2l6ZXx8LTE9PXRoaXMudW5jb21wcmVzc2VkU2l6ZSl0aHJvdyBuZXcgRXJyb3IoXCJCdWcgb3IgY29ycnVwdGVkIHppcCA6IGRpZG4ndCBnZXQgZW5vdWdoIGluZm9ybWF0aW9ucyBmcm9tIHRoZSBjZW50cmFsIGRpcmVjdG9yeSAoY29tcHJlc3NlZFNpemUgPT0gLTEgfHwgdW5jb21wcmVzc2VkU2l6ZSA9PSAtMSlcIik7aWYodD1yLmZpbmRDb21wcmVzc2lvbih0aGlzLmNvbXByZXNzaW9uTWV0aG9kKSxudWxsPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY29tcHJlc3Npb24gXCIrci5wcmV0dHkodGhpcy5jb21wcmVzc2lvbk1ldGhvZCkrXCIgdW5rbm93biAoaW5uZXIgZmlsZSA6IFwiK3IudHJhbnNmb3JtVG8oXCJzdHJpbmdcIix0aGlzLmZpbGVOYW1lKStcIilcIik7aWYodGhpcy5kZWNvbXByZXNzZWQ9bmV3IHMsdGhpcy5kZWNvbXByZXNzZWQuY29tcHJlc3NlZFNpemU9dGhpcy5jb21wcmVzc2VkU2l6ZSx0aGlzLmRlY29tcHJlc3NlZC51bmNvbXByZXNzZWRTaXplPXRoaXMudW5jb21wcmVzc2VkU2l6ZSx0aGlzLmRlY29tcHJlc3NlZC5jcmMzMj10aGlzLmNyYzMyLHRoaXMuZGVjb21wcmVzc2VkLmNvbXByZXNzaW9uTWV0aG9kPXRoaXMuY29tcHJlc3Npb25NZXRob2QsdGhpcy5kZWNvbXByZXNzZWQuZ2V0Q29tcHJlc3NlZENvbnRlbnQ9dGhpcy5wcmVwYXJlQ29tcHJlc3NlZENvbnRlbnQoZSxlLmluZGV4LHRoaXMuY29tcHJlc3NlZFNpemUsdCksdGhpcy5kZWNvbXByZXNzZWQuZ2V0Q29udGVudD10aGlzLnByZXBhcmVDb250ZW50KGUsZS5pbmRleCx0aGlzLmNvbXByZXNzZWRTaXplLHQsdGhpcy51bmNvbXByZXNzZWRTaXplKSx0aGlzLmxvYWRPcHRpb25zLmNoZWNrQ1JDMzImJih0aGlzLmRlY29tcHJlc3NlZD1yLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsdGhpcy5kZWNvbXByZXNzZWQuZ2V0Q29udGVudCgpKSxpLmNyYzMyKHRoaXMuZGVjb21wcmVzc2VkKSE9PXRoaXMuY3JjMzIpKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBDUkMzMiBtaXNtYXRjaFwiKX0scmVhZENlbnRyYWxQYXJ0OmZ1bmN0aW9uKGUpe2lmKHRoaXMudmVyc2lvbk1hZGVCeT1lLnJlYWRJbnQoMiksdGhpcy52ZXJzaW9uTmVlZGVkPWUucmVhZEludCgyKSx0aGlzLmJpdEZsYWc9ZS5yZWFkSW50KDIpLHRoaXMuY29tcHJlc3Npb25NZXRob2Q9ZS5yZWFkU3RyaW5nKDIpLHRoaXMuZGF0ZT1lLnJlYWREYXRlKCksdGhpcy5jcmMzMj1lLnJlYWRJbnQoNCksdGhpcy5jb21wcmVzc2VkU2l6ZT1lLnJlYWRJbnQoNCksdGhpcy51bmNvbXByZXNzZWRTaXplPWUucmVhZEludCg0KSx0aGlzLmZpbGVOYW1lTGVuZ3RoPWUucmVhZEludCgyKSx0aGlzLmV4dHJhRmllbGRzTGVuZ3RoPWUucmVhZEludCgyKSx0aGlzLmZpbGVDb21tZW50TGVuZ3RoPWUucmVhZEludCgyKSx0aGlzLmRpc2tOdW1iZXJTdGFydD1lLnJlYWRJbnQoMiksdGhpcy5pbnRlcm5hbEZpbGVBdHRyaWJ1dGVzPWUucmVhZEludCgyKSx0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXM9ZS5yZWFkSW50KDQpLHRoaXMubG9jYWxIZWFkZXJPZmZzZXQ9ZS5yZWFkSW50KDQpLHRoaXMuaXNFbmNyeXB0ZWQoKSl0aHJvdyBuZXcgRXJyb3IoXCJFbmNyeXB0ZWQgemlwIGFyZSBub3Qgc3VwcG9ydGVkXCIpO3RoaXMuZmlsZU5hbWU9ZS5yZWFkRGF0YSh0aGlzLmZpbGVOYW1lTGVuZ3RoKSx0aGlzLnJlYWRFeHRyYUZpZWxkcyhlKSx0aGlzLnBhcnNlWklQNjRFeHRyYUZpZWxkKGUpLHRoaXMuZmlsZUNvbW1lbnQ9ZS5yZWFkRGF0YSh0aGlzLmZpbGVDb21tZW50TGVuZ3RoKX0scHJvY2Vzc0F0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLnVuaXhQZXJtaXNzaW9ucz1udWxsLHRoaXMuZG9zUGVybWlzc2lvbnM9bnVsbDt2YXIgZT10aGlzLnZlcnNpb25NYWRlQnk+Pjg7dGhpcy5kaXI9ISEoMTYmdGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzKSxlPT09MCYmKHRoaXMuZG9zUGVybWlzc2lvbnM9NjMmdGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzKSxlPT09MyYmKHRoaXMudW5peFBlcm1pc3Npb25zPTY1NTM1JnRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcz4+MTYpLHRoaXMuZGlyfHxcIi9cIiE9PXRoaXMuZmlsZU5hbWVTdHIuc2xpY2UoLTEpfHwodGhpcy5kaXI9ITApfSxwYXJzZVpJUDY0RXh0cmFGaWVsZDpmdW5jdGlvbigpe2lmKHRoaXMuZXh0cmFGaWVsZHNbMV0pe3ZhciBlPW5ldyBuKHRoaXMuZXh0cmFGaWVsZHNbMV0udmFsdWUpO3RoaXMudW5jb21wcmVzc2VkU2l6ZT09PXIuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMudW5jb21wcmVzc2VkU2l6ZT1lLnJlYWRJbnQoOCkpLHRoaXMuY29tcHJlc3NlZFNpemU9PT1yLk1BWF9WQUxVRV8zMkJJVFMmJih0aGlzLmNvbXByZXNzZWRTaXplPWUucmVhZEludCg4KSksdGhpcy5sb2NhbEhlYWRlck9mZnNldD09PXIuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMubG9jYWxIZWFkZXJPZmZzZXQ9ZS5yZWFkSW50KDgpKSx0aGlzLmRpc2tOdW1iZXJTdGFydD09PXIuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMuZGlza051bWJlclN0YXJ0PWUucmVhZEludCg0KSl9fSxyZWFkRXh0cmFGaWVsZHM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleCxhLG4scjtmb3IodGhpcy5leHRyYUZpZWxkcz10aGlzLmV4dHJhRmllbGRzfHx7fTtlLmluZGV4PHQrdGhpcy5leHRyYUZpZWxkc0xlbmd0aDspYT1lLnJlYWRJbnQoMiksbj1lLnJlYWRJbnQoMikscj1lLnJlYWRTdHJpbmcobiksdGhpcy5leHRyYUZpZWxkc1thXT17aWQ6YSxsZW5ndGg6bix2YWx1ZTpyfX0saGFuZGxlVVRGODpmdW5jdGlvbigpe3ZhciBlPW8udWludDhhcnJheT9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCI7aWYodGhpcy51c2VVVEY4KCkpdGhpcy5maWxlTmFtZVN0cj1pLnV0ZjhkZWNvZGUodGhpcy5maWxlTmFtZSksdGhpcy5maWxlQ29tbWVudFN0cj1pLnV0ZjhkZWNvZGUodGhpcy5maWxlQ29tbWVudCk7ZWxzZXt2YXIgdD10aGlzLmZpbmRFeHRyYUZpZWxkVW5pY29kZVBhdGgoKTtpZihudWxsIT09dCl0aGlzLmZpbGVOYW1lU3RyPXQ7ZWxzZXt2YXIgYT1yLnRyYW5zZm9ybVRvKGUsdGhpcy5maWxlTmFtZSk7dGhpcy5maWxlTmFtZVN0cj10aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKGEpfXZhciBuPXRoaXMuZmluZEV4dHJhRmllbGRVbmljb2RlQ29tbWVudCgpO2lmKG51bGwhPT1uKXRoaXMuZmlsZUNvbW1lbnRTdHI9bjtlbHNle3ZhciBzPXIudHJhbnNmb3JtVG8oZSx0aGlzLmZpbGVDb21tZW50KTt0aGlzLmZpbGVDb21tZW50U3RyPXRoaXMubG9hZE9wdGlvbnMuZGVjb2RlRmlsZU5hbWUocyl9fX0sZmluZEV4dHJhRmllbGRVbmljb2RlUGF0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZXh0cmFGaWVsZHNbMjg3ODldO2lmKGUpe3ZhciB0PW5ldyBuKGUudmFsdWUpO3JldHVybiAxPT09dC5yZWFkSW50KDEpP2kuY3JjMzIodGhpcy5maWxlTmFtZSk9PT10LnJlYWRJbnQoNCk/aS51dGY4ZGVjb2RlKHQucmVhZFN0cmluZyhlLmxlbmd0aC01KSk6bnVsbDpudWxsfXJldHVybiBudWxsfSxmaW5kRXh0cmFGaWVsZFVuaWNvZGVDb21tZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5leHRyYUZpZWxkc1syNTQ2MV07aWYoZSl7dmFyIHQ9bmV3IG4oZS52YWx1ZSk7cmV0dXJuIDE9PT10LnJlYWRJbnQoMSk/aS5jcmMzMih0aGlzLmZpbGVDb21tZW50KT09PXQucmVhZEludCg0KT9pLnV0ZjhkZWNvZGUodC5yZWFkU3RyaW5nKGUubGVuZ3RoLTUpKTpudWxsOm51bGx9cmV0dXJuIG51bGx9fSx0LmV4cG9ydHM9YX0se1wiLi9jb21wcmVzc2VkT2JqZWN0XCI6MTMsXCIuL29iamVjdFwiOjI0LFwiLi9zdHJpbmdSZWFkZXJcIjoyNixcIi4vc3VwcG9ydFwiOjI4LFwiLi91dGlsc1wiOjMyfV0sMzU6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gbihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dGhpcy5zdGF0ZT1fLHRoaXMucXVldWU9W10sdGhpcy5vdXRjb21lPXZvaWQgMCxlIT09YSYmZCh0aGlzLGUpfWZ1bmN0aW9uIHIoZSx0LGEpe3RoaXMucHJvbWlzZT1lLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJih0aGlzLm9uRnVsZmlsbGVkPXQsdGhpcy5jYWxsRnVsZmlsbGVkPXRoaXMub3RoZXJDYWxsRnVsZmlsbGVkKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYodGhpcy5vblJlamVjdGVkPWEsdGhpcy5jYWxsUmVqZWN0ZWQ9dGhpcy5vdGhlckNhbGxSZWplY3RlZCl9ZnVuY3Rpb24gcyh0LGEsbil7cChmdW5jdGlvbigpe3ZhciBlO3RyeXtlPWEobil9Y2F0Y2goYSl7cmV0dXJuIGMucmVqZWN0KHQsYSl9ZT09PXQ/Yy5yZWplY3QodCxuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlc29sdmUgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKSk6Yy5yZXNvbHZlKHQsZSl9KX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUmJmUudGhlbjtpZihlJiYoXCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXJldHVybiBmdW5jdGlvbigpe3QuYXBwbHkoZSxhcmd1bWVudHMpfX1mdW5jdGlvbiBkKGUsdCl7ZnVuY3Rpb24gYSh0KXtyfHwocj0hMCxjLnJlamVjdChlLHQpKX1mdW5jdGlvbiBuKHQpe3J8fChyPSEwLGMucmVzb2x2ZShlLHQpKX12YXIgcj0hMSxzPWwoZnVuY3Rpb24oKXt0KG4sYSl9KTtcImVycm9yXCI9PT1zLnN0YXR1cyYmYShzLnZhbHVlKX1mdW5jdGlvbiBsKGUsdCl7dmFyIGE9e307dHJ5e2EudmFsdWU9ZSh0KSxhLnN0YXR1cz1cInN1Y2Nlc3NcIn1jYXRjaCh0KXthLnN0YXR1cz1cImVycm9yXCIsYS52YWx1ZT10fXJldHVybiBhfXZhciBwPWUoXCJpbW1lZGlhdGVcIiksYz17fSx1PVtcIlJFSkVDVEVEXCJdLG09W1wiRlVMRklMTEVEXCJdLF89W1wiUEVORElOR1wiXTt0LmV4cG9ydHM9bixuLnByb3RvdHlwZVtcImZpbmFsbHlcIl09ZnVuY3Rpb24oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm4gdGhpczt2YXIgdD10aGlzLmNvbnN0cnVjdG9yO3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIHQucmVzb2x2ZShlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYX0pfSxmdW5jdGlvbihhKXtyZXR1cm4gdC5yZXNvbHZlKGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IGF9KX0pfSxuLnByb3RvdHlwZVtcImNhdGNoXCJdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4obnVsbCxlKX0sbi5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJnRoaXMuc3RhdGU9PT1tfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZ0aGlzLnN0YXRlPT09dSlyZXR1cm4gdGhpczt2YXIgbj1uZXcgdGhpcy5jb25zdHJ1Y3RvcihhKTtpZih0aGlzLnN0YXRlIT09Xyl7dmFyIGk9dGhpcy5zdGF0ZT09PW0/ZTp0O3MobixpLHRoaXMub3V0Y29tZSl9ZWxzZSB0aGlzLnF1ZXVlLnB1c2gobmV3IHIobixlLHQpKTtyZXR1cm4gbn0sci5wcm90b3R5cGUuY2FsbEZ1bGZpbGxlZD1mdW5jdGlvbihlKXtjLnJlc29sdmUodGhpcy5wcm9taXNlLGUpfSxyLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oZSl7cyh0aGlzLnByb21pc2UsdGhpcy5vbkZ1bGZpbGxlZCxlKX0sci5wcm90b3R5cGUuY2FsbFJlamVjdGVkPWZ1bmN0aW9uKGUpe2MucmVqZWN0KHRoaXMucHJvbWlzZSxlKX0sci5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQ9ZnVuY3Rpb24oZSl7cyh0aGlzLnByb21pc2UsdGhpcy5vblJlamVjdGVkLGUpfSxjLnJlc29sdmU9ZnVuY3Rpb24oZSx0KXt2YXIgYT1sKG8sdCk7aWYoXCJlcnJvclwiPT09YS5zdGF0dXMpcmV0dXJuIGMucmVqZWN0KGUsYS52YWx1ZSk7dmFyIG49YS52YWx1ZTtpZihuKWQoZSxuKTtlbHNle2Uuc3RhdGU9bSxlLm91dGNvbWU9dDtmb3IodmFyIHI9LTEscz1lLnF1ZXVlLmxlbmd0aDsrK3I8czspZS5xdWV1ZVtyXS5jYWxsRnVsZmlsbGVkKHQpfXJldHVybiBlfSxjLnJlamVjdD1mdW5jdGlvbihlLHQpe2Uuc3RhdGU9dSxlLm91dGNvbWU9dDtmb3IodmFyIGE9LTEsbj1lLnF1ZXVlLmxlbmd0aDsrK2E8bjspZS5xdWV1ZVthXS5jYWxsUmVqZWN0ZWQodCk7cmV0dXJuIGV9LG4ucmVzb2x2ZT1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHRoaXM/ZTpjLnJlc29sdmUobmV3IHRoaXMoYSksZSl9LG4ucmVqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB0aGlzKGEpO3JldHVybiBjLnJlamVjdCh0LGUpfSxuLmFsbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7ZnVuY3Rpb24gYShlKXtvW3RdPWUsKytkIT09cnx8c3x8KHM9ITAsYy5yZXNvbHZlKHAsbykpfW4ucmVzb2x2ZShlKS50aGVuKGEsZnVuY3Rpb24oZSl7c3x8KHM9ITAsYy5yZWplY3QocCxlKSl9KX12YXIgbj10aGlzO2lmKFwiW29iamVjdCBBcnJheV1cIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcihcIm11c3QgYmUgYW4gYXJyYXlcIikpO3ZhciByPWUubGVuZ3RoLHM9ITE7aWYoIXIpcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7Zm9yKHZhciBvPUFycmF5KHIpLGQ9MCxsPS0xLHA9bmV3IHRoaXMoYSk7KytsPHI7KXQoZVtsXSxsKTtyZXR1cm4gcH0sbi5yYWNlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7bi5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYy5yZXNvbHZlKGQsZSkpfSxmdW5jdGlvbihlKXtzfHwocz0hMCxjLnJlamVjdChkLGUpKX0pfXZhciBuPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIHI9ZS5sZW5ndGgscz0hMTtpZighcilyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIG89LTEsZD1uZXcgdGhpcyhhKTsrK288cjspdChlW29dKTtyZXR1cm4gZH19LHtpbW1lZGlhdGU6OX1dLDM2OltmdW5jdGlvbihlLHQpeyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9ZnVuY3Rpb24gYSgpe3JldHVybiAxfWZ1bmN0aW9uIG4oZSl7bXx8XCJzdHJpbmdcIj09dHlwZW9mIGV8fFwibnVtYmVyXCI9PXR5cGVvZiBlfHwobT0hMCxjb25zb2xlLmVycm9yKG5ldyBUeXBlRXJyb3IoXCJMUlU6IGtleSBtdXN0IGJlIGEgc3RyaW5nIG9yIG51bWJlci4gQWxtb3N0IGNlcnRhaW5seSBhIGJ1ZyEgXCIrdHlwZW9mIGUpLnN0YWNrKSl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHI/dm9pZChcIm51bWJlclwiPT10eXBlb2YgZSYmKGU9e21heDplfSksIWUmJihlPXt9KSx0aGlzLl9tYXg9ZS5tYXgsKCF0aGlzLl9tYXh8fFwibnVtYmVyXCIhPXR5cGVvZiB0aGlzLl9tYXh8fDA+PXRoaXMuX21heCkmJih0aGlzLl9tYXg9MS8wKSx0aGlzLl9sZW5ndGhDYWxjdWxhdG9yPWUubGVuZ3RofHxhLFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuX2xlbmd0aENhbGN1bGF0b3ImJih0aGlzLl9sZW5ndGhDYWxjdWxhdG9yPWEpLHRoaXMuX2FsbG93U3RhbGU9ZS5zdGFsZXx8ITEsdGhpcy5fbWF4QWdlPWUubWF4QWdlfHxudWxsLHRoaXMuX2Rpc3Bvc2U9ZS5kaXNwb3NlLHRoaXMucmVzZXQoKSk6bmV3IHIoZSl9ZnVuY3Rpb24gcyhlLHQsYSl7bih0KTt2YXIgcj1lLl9jYWNoZVt0XTtyZXR1cm4gciYmKG8oZSxyKT8oYyhlLHIpLCFlLl9hbGxvd1N0YWxlJiYocj12b2lkIDApKTphJiZkKGUsciksciYmKHI9ci52YWx1ZSkpLHJ9ZnVuY3Rpb24gbyhlLHQpe2lmKCF0fHwhdC5tYXhBZ2UmJiFlLl9tYXhBZ2UpcmV0dXJuITE7dmFyIGE9ITEsbj1EYXRlLm5vdygpLXQubm93O3JldHVybiBhPXQubWF4QWdlP24+dC5tYXhBZ2U6ZS5fbWF4QWdlJiZuPmUuX21heEFnZSxhfWZ1bmN0aW9uIGQoZSx0KXtwKGUsdCksdC5sdT1lLl9tcnUrKyxlLl9scnVMaXN0W3QubHVdPXR9ZnVuY3Rpb24gbChlKXtmb3IoO2UuX2xydTxlLl9tcnUmJmUuX2xlbmd0aD5lLl9tYXg7KWMoZSxlLl9scnVMaXN0W2UuX2xydV0pfWZ1bmN0aW9uIHAoZSx0KXtmb3IoZGVsZXRlIGUuX2xydUxpc3RbdC5sdV07ZS5fbHJ1PGUuX21ydSYmIWUuX2xydUxpc3RbZS5fbHJ1XTspZS5fbHJ1Kyt9ZnVuY3Rpb24gYyhlLHQpe3QmJihlLl9kaXNwb3NlJiZlLl9kaXNwb3NlKHQua2V5LHQudmFsdWUpLGUuX2xlbmd0aC09dC5sZW5ndGgsZS5faXRlbUNvdW50LS0sZGVsZXRlIGUuX2NhY2hlW3Qua2V5XSxwKGUsdCkpfWZ1bmN0aW9uIHUoZSx0LGEsbixyLHMpe3RoaXMua2V5PWUsdGhpcy52YWx1ZT10LHRoaXMubHU9YSx0aGlzLmxlbmd0aD1uLHRoaXMubm93PXIscyYmKHRoaXMubWF4QWdlPXMpfVwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0LmV4cG9ydHM/dC5leHBvcnRzPXI6dGhpcy5MUlVDYWNoZT1yO3ZhciBtPSExO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIm1heFwiLHtzZXQ6ZnVuY3Rpb24oZSl7ZSYmXCJudW1iZXJcIj09dHlwZW9mIGUmJiEoMD49ZSl8fChlPTEvMCksdGhpcy5fbWF4PWUsdGhpcy5fbGVuZ3RoPnRoaXMuX21heCYmbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heH0sZW51bWVyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImxlbmd0aENhbGN1bGF0b3JcIix7c2V0OmZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpZm9yKHZhciB0IGluIHRoaXMuX2xlbmd0aENhbGN1bGF0b3I9YSx0aGlzLl9sZW5ndGg9dGhpcy5faXRlbUNvdW50LHRoaXMuX2NhY2hlKXRoaXMuX2NhY2hlW3RdLmxlbmd0aD0xO2Vsc2UgZm9yKHZhciB0IGluIHRoaXMuX2xlbmd0aENhbGN1bGF0b3I9ZSx0aGlzLl9sZW5ndGg9MCx0aGlzLl9jYWNoZSl0aGlzLl9jYWNoZVt0XS5sZW5ndGg9dGhpcy5fbGVuZ3RoQ2FsY3VsYXRvcih0aGlzLl9jYWNoZVt0XS52YWx1ZSksdGhpcy5fbGVuZ3RoKz10aGlzLl9jYWNoZVt0XS5sZW5ndGg7dGhpcy5fbGVuZ3RoPnRoaXMuX21heCYmbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aENhbGN1bGF0b3J9LGVudW1lcmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aH0sZW51bWVyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIml0ZW1Db3VudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbUNvdW50fSxlbnVtZXJhYmxlOiEwfSksci5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlLHQpe3Q9dHx8dGhpcztmb3IodmFyIGE9MCxuPXRoaXMuX2l0ZW1Db3VudCxyPXRoaXMuX21ydS0xOzA8PXImJmE8bjtyLS0paWYodGhpcy5fbHJ1TGlzdFtyXSl7YSsrO3ZhciBzPXRoaXMuX2xydUxpc3Rbcl07byh0aGlzLHMpJiYoYyh0aGlzLHMpLCF0aGlzLl9hbGxvd1N0YWxlJiYocz12b2lkIDApKSxzJiZlLmNhbGwodCxzLnZhbHVlLHMua2V5LHRoaXMpfX0sci5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe2Zvcih2YXIgZT1BcnJheSh0aGlzLl9pdGVtQ291bnQpLHQ9MCxhPXRoaXMuX21ydS0xOzA8PWEmJnQ8dGhpcy5faXRlbUNvdW50O2EtLSlpZih0aGlzLl9scnVMaXN0W2FdKXt2YXIgbj10aGlzLl9scnVMaXN0W2FdO2VbdCsrXT1uLmtleX1yZXR1cm4gZX0sci5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPUFycmF5KHRoaXMuX2l0ZW1Db3VudCksdD0wLGE9dGhpcy5fbXJ1LTE7MDw9YSYmdDx0aGlzLl9pdGVtQ291bnQ7YS0tKWlmKHRoaXMuX2xydUxpc3RbYV0pe3ZhciBuPXRoaXMuX2xydUxpc3RbYV07ZVt0KytdPW4udmFsdWV9cmV0dXJuIGV9LHIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5fZGlzcG9zZSYmdGhpcy5fY2FjaGUpZm9yKHZhciBlIGluIHRoaXMuX2NhY2hlKXRoaXMuX2Rpc3Bvc2UoZSx0aGlzLl9jYWNoZVtlXS52YWx1ZSk7dGhpcy5fY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9scnVMaXN0PU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fbXJ1PTAsdGhpcy5fbHJ1PTAsdGhpcy5fbGVuZ3RoPTAsdGhpcy5faXRlbUNvdW50PTB9LHIucHJvdG90eXBlLmR1bXA9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wLGE9dGhpcy5fbXJ1LTE7MDw9YSYmdDx0aGlzLl9pdGVtQ291bnQ7YS0tKWlmKHRoaXMuX2xydUxpc3RbYV0pe3ZhciBuPXRoaXMuX2xydUxpc3RbYV07byh0aGlzLG4pfHwoKyt0LGUucHVzaCh7azpuLmtleSx2Om4udmFsdWUsZTpuLm5vdysobi5tYXhBZ2V8fDApfSkpfXJldHVybiBlfSxyLnByb3RvdHlwZS5kdW1wTHJ1PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xydUxpc3R9LHIucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGEscil7cj1yfHx0aGlzLl9tYXhBZ2Usbih0KTt2YXIgcz1yP0RhdGUubm93KCk6MCxpPXRoaXMuX2xlbmd0aENhbGN1bGF0b3IoYSk7aWYoZSh0aGlzLl9jYWNoZSx0KSlyZXR1cm4gaT50aGlzLl9tYXg/KGModGhpcyx0aGlzLl9jYWNoZVt0XSksITEpOih0aGlzLl9kaXNwb3NlJiZ0aGlzLl9kaXNwb3NlKHQsdGhpcy5fY2FjaGVbdF0udmFsdWUpLHRoaXMuX2NhY2hlW3RdLm5vdz1zLHRoaXMuX2NhY2hlW3RdLm1heEFnZT1yLHRoaXMuX2NhY2hlW3RdLnZhbHVlPWEsdGhpcy5fbGVuZ3RoKz1pLXRoaXMuX2NhY2hlW3RdLmxlbmd0aCx0aGlzLl9jYWNoZVt0XS5sZW5ndGg9aSx0aGlzLmdldCh0KSx0aGlzLl9sZW5ndGg+dGhpcy5fbWF4JiZsKHRoaXMpLCEwKTt2YXIgbz1uZXcgdSh0LGEsdGhpcy5fbXJ1KyssaSxzLHIpO3JldHVybiBvLmxlbmd0aD50aGlzLl9tYXg/KHRoaXMuX2Rpc3Bvc2UmJnRoaXMuX2Rpc3Bvc2UodCxhKSwhMSk6KHRoaXMuX2xlbmd0aCs9by5sZW5ndGgsdGhpcy5fbHJ1TGlzdFtvLmx1XT10aGlzLl9jYWNoZVt0XT1vLHRoaXMuX2l0ZW1Db3VudCsrLHRoaXMuX2xlbmd0aD50aGlzLl9tYXgmJmwodGhpcyksITApfSxyLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7aWYobih0KSwhZSh0aGlzLl9jYWNoZSx0KSlyZXR1cm4hMTt2YXIgYT10aGlzLl9jYWNoZVt0XTtyZXR1cm4hbyh0aGlzLGEpfSxyLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSkscyh0aGlzLGUsITApfSxyLnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpLHModGhpcyxlLCExKX0sci5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbHJ1TGlzdFt0aGlzLl9scnVdO3JldHVybiBjKHRoaXMsZSksZXx8bnVsbH0sci5wcm90b3R5cGUuZGVsPWZ1bmN0aW9uKGUpe24oZSksYyh0aGlzLHRoaXMuX2NhY2hlW2VdKX0sci5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihlKXt0aGlzLnJlc2V0KCk7Zm9yKHZhciB0PURhdGUubm93KCksYT1lLmxlbmd0aC0xLHI7MDw9YTthLS0pe3I9ZVthXSxuKHIuayk7dmFyIHM9ci5lfHwwO2lmKDA9PT1zKXRoaXMuc2V0KHIuayxyLnYpO2Vsc2V7dmFyIGk9cy10OzA8aSYmdGhpcy5zZXQoci5rLHIudixpKX19fX0pKCl9LHt9XSwzNzpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7dmFyIGE9ZShcIi4vbGliL3V0aWxzL2NvbW1vblwiKS5hc3NpZ24sbj1lKFwiLi9saWIvZGVmbGF0ZVwiKSxyPWUoXCIuL2xpYi9pbmZsYXRlXCIpLHM9ZShcIi4vbGliL3psaWIvY29uc3RhbnRzXCIpLGk9e307YShpLG4scixzKSx0LmV4cG9ydHM9aX0se1wiLi9saWIvZGVmbGF0ZVwiOjM4LFwiLi9saWIvaW5mbGF0ZVwiOjM5LFwiLi9saWIvdXRpbHMvY29tbW9uXCI6NDAsXCIuL2xpYi96bGliL2NvbnN0YW50c1wiOjQzfV0sMzg6W2Z1bmN0aW9uKGUsdCxhKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gbihlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBuKSlyZXR1cm4gbmV3IG4oZSk7dGhpcy5vcHRpb25zPWkuYXNzaWduKHtsZXZlbDotMSxtZXRob2Q6OCxjaHVua1NpemU6MTYzODQsd2luZG93Qml0czoxNSxtZW1MZXZlbDo4LHN0cmF0ZWd5OjAsdG86XCJcIn0sZXx8e30pO3ZhciB0PXRoaXMub3B0aW9uczt0LnJhdyYmMDx0LndpbmRvd0JpdHM/dC53aW5kb3dCaXRzPS10LndpbmRvd0JpdHM6dC5nemlwJiYwPHQud2luZG93Qml0cyYmMTY+dC53aW5kb3dCaXRzJiYodC53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz1cIlwiLHRoaXMuZW5kZWQ9ITEsdGhpcy5jaHVua3M9W10sdGhpcy5zdHJtPW5ldyBsLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDt2YXIgYT1zLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sdC5sZXZlbCx0Lm1ldGhvZCx0LndpbmRvd0JpdHMsdC5tZW1MZXZlbCx0LnN0cmF0ZWd5KTtpZigwIT09YSl0aHJvdyBuZXcgRXJyb3IoZFthXSk7aWYodC5oZWFkZXImJnMuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sdC5oZWFkZXIpLHQuZGljdGlvbmFyeSl7dmFyIHI7aWYocj1cInN0cmluZ1wiPT10eXBlb2YgdC5kaWN0aW9uYXJ5P28uc3RyaW5nMmJ1Zih0LmRpY3Rpb25hcnkpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PXAuY2FsbCh0LmRpY3Rpb25hcnkpP25ldyBVaW50OEFycmF5KHQuZGljdGlvbmFyeSk6dC5kaWN0aW9uYXJ5LGE9cy5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sciksMCE9PWEpdGhyb3cgbmV3IEVycm9yKGRbYV0pO3RoaXMuX2RpY3Rfc2V0PSEwfX1mdW5jdGlvbiByKGUsdCl7dmFyIGE9bmV3IG4odCk7aWYoYS5wdXNoKGUsITApLGEuZXJyKXRocm93IGEubXNnfHxkW2EuZXJyXTtyZXR1cm4gYS5yZXN1bHR9dmFyIHM9ZShcIi4vemxpYi9kZWZsYXRlXCIpLGk9ZShcIi4vdXRpbHMvY29tbW9uXCIpLG89ZShcIi4vdXRpbHMvc3RyaW5nc1wiKSxkPWUoXCIuL3psaWIvbWVzc2FnZXNcIiksbD1lKFwiLi96bGliL3pzdHJlYW1cIikscD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGM9NCx1PTAsbT0xLF89MjtuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUsdCl7dmFyIGE9dGhpcy5zdHJtLG49dGhpcy5vcHRpb25zLmNodW5rU2l6ZSxyLGQ7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtkPXQ9PT1+fnQ/dDohMD09PXQ/YzowLGEuaW5wdXQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/by5zdHJpbmcyYnVmKGUpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PXAuY2FsbChlKT9uZXcgVWludDhBcnJheShlKTplLGEubmV4dF9pbj0wLGEuYXZhaWxfaW49YS5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PWEuYXZhaWxfb3V0JiYoYS5vdXRwdXQ9bmV3IGkuQnVmOChuKSxhLm5leHRfb3V0PTAsYS5hdmFpbF9vdXQ9bikscj1zLmRlZmxhdGUoYSxkKSxyIT09bSYmciE9PXUpcmV0dXJuIHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCwhMTsoMD09PWEuYXZhaWxfb3V0fHwwPT09YS5hdmFpbF9pbiYmKGQ9PT1jfHxkPT09XykpJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLm9uRGF0YShvLmJ1ZjJiaW5zdHJpbmcoaS5zaHJpbmtCdWYoYS5vdXRwdXQsYS5uZXh0X291dCkpKTp0aGlzLm9uRGF0YShpLnNocmlua0J1ZihhLm91dHB1dCxhLm5leHRfb3V0KSkpfXdoaWxlKCgwPGEuYXZhaWxfaW58fDA9PT1hLmF2YWlsX291dCkmJnIhPT1tKTtyZXR1cm4gZD09PWM/KHI9cy5kZWZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChyKSx0aGlzLmVuZGVkPSEwLHI9PT11KTpkIT09X3x8KHRoaXMub25FbmQodSksYS5hdmFpbF9vdXQ9MCwhMCl9LG4ucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihlKXt0aGlzLmNodW5rcy5wdXNoKGUpfSxuLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbihlKXtlPT09dSYmKFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5yZXN1bHQ9dGhpcy5jaHVua3Muam9pbihcIlwiKTp0aGlzLnJlc3VsdD1pLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj1lLHRoaXMubXNnPXRoaXMuc3RybS5tc2d9LGEuRGVmbGF0ZT1uLGEuZGVmbGF0ZT1yLGEuZGVmbGF0ZVJhdz1mdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHt9LHQucmF3PSEwLHIoZSx0KX0sYS5nemlwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8e30sdC5nemlwPSEwLHIoZSx0KX19LHtcIi4vdXRpbHMvY29tbW9uXCI6NDAsXCIuL3V0aWxzL3N0cmluZ3NcIjo0MSxcIi4vemxpYi9kZWZsYXRlXCI6NDUsXCIuL3psaWIvbWVzc2FnZXNcIjo1MCxcIi4vemxpYi96c3RyZWFtXCI6NTJ9XSwzOTpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBuKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXJldHVybiBuZXcgbihlKTt0aGlzLm9wdGlvbnM9aS5hc3NpZ24oe2NodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjAsdG86XCJcIn0sZXx8e30pO3ZhciB0PXRoaXMub3B0aW9uczt0LnJhdyYmMDw9dC53aW5kb3dCaXRzJiYxNj50LndpbmRvd0JpdHMmJih0LndpbmRvd0JpdHM9LXQud2luZG93Qml0cywwPT09dC53aW5kb3dCaXRzJiYodC53aW5kb3dCaXRzPS0xNSkpLDA8PXQud2luZG93Qml0cyYmMTY+dC53aW5kb3dCaXRzJiYhKGUmJmUud2luZG93Qml0cykmJih0LndpbmRvd0JpdHMrPTMyKSwxNTx0LndpbmRvd0JpdHMmJjQ4PnQud2luZG93Qml0cyYmMD09KDE1JnQud2luZG93Qml0cykmJih0LndpbmRvd0JpdHN8PTE1KSx0aGlzLmVycj0wLHRoaXMubXNnPVwiXCIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IHAsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciBhPXMuaW5mbGF0ZUluaXQyKHRoaXMuc3RybSx0LndpbmRvd0JpdHMpO2lmKGEhPT1kLlpfT0spdGhyb3cgbmV3IEVycm9yKGxbYV0pO2lmKHRoaXMuaGVhZGVyPW5ldyBjLHMuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sdGhpcy5oZWFkZXIpLHQuZGljdGlvbmFyeSYmKFwic3RyaW5nXCI9PXR5cGVvZiB0LmRpY3Rpb25hcnk/dC5kaWN0aW9uYXJ5PW8uc3RyaW5nMmJ1Zih0LmRpY3Rpb25hcnkpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PXUuY2FsbCh0LmRpY3Rpb25hcnkpJiYodC5kaWN0aW9uYXJ5PW5ldyBVaW50OEFycmF5KHQuZGljdGlvbmFyeSkpLHQucmF3JiYoYT1zLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0LmRpY3Rpb25hcnkpLGEhPT1kLlpfT0spKSl0aHJvdyBuZXcgRXJyb3IobFthXSl9ZnVuY3Rpb24gcihlLHQpe3ZhciBhPW5ldyBuKHQpO2lmKGEucHVzaChlLCEwKSxhLmVycil0aHJvdyBhLm1zZ3x8bFthLmVycl07cmV0dXJuIGEucmVzdWx0fXZhciBzPWUoXCIuL3psaWIvaW5mbGF0ZVwiKSxpPWUoXCIuL3V0aWxzL2NvbW1vblwiKSxvPWUoXCIuL3V0aWxzL3N0cmluZ3NcIiksZD1lKFwiLi96bGliL2NvbnN0YW50c1wiKSxsPWUoXCIuL3psaWIvbWVzc2FnZXNcIikscD1lKFwiLi96bGliL3pzdHJlYW1cIiksYz1lKFwiLi96bGliL2d6aGVhZGVyXCIpLHU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUsdCl7dmFyIGE9dGhpcy5zdHJtLG49dGhpcy5vcHRpb25zLmNodW5rU2l6ZSxyPXRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5LGw9ITEscCxjLG0sXyxmO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7Yz10PT09fn50P3Q6ITA9PT10P2QuWl9GSU5JU0g6ZC5aX05PX0ZMVVNILGEuaW5wdXQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/by5iaW5zdHJpbmcyYnVmKGUpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PXUuY2FsbChlKT9uZXcgVWludDhBcnJheShlKTplLGEubmV4dF9pbj0wLGEuYXZhaWxfaW49YS5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PWEuYXZhaWxfb3V0JiYoYS5vdXRwdXQ9bmV3IGkuQnVmOChuKSxhLm5leHRfb3V0PTAsYS5hdmFpbF9vdXQ9bikscD1zLmluZmxhdGUoYSxkLlpfTk9fRkxVU0gpLHA9PT1kLlpfTkVFRF9ESUNUJiZyJiYocD1zLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxyKSkscD09PWQuWl9CVUZfRVJST1ImJiEwPT09bCYmKHA9ZC5aX09LLGw9ITEpLHAhPT1kLlpfU1RSRUFNX0VORCYmcCE9PWQuWl9PSylyZXR1cm4gdGhpcy5vbkVuZChwKSx0aGlzLmVuZGVkPSEwLCExO2EubmV4dF9vdXQmJigwPT09YS5hdmFpbF9vdXR8fHA9PT1kLlpfU1RSRUFNX0VORHx8MD09PWEuYXZhaWxfaW4mJihjPT09ZC5aX0ZJTklTSHx8Yz09PWQuWl9TWU5DX0ZMVVNIKSkmJihcInN0cmluZ1wiPT09dGhpcy5vcHRpb25zLnRvPyhtPW8udXRmOGJvcmRlcihhLm91dHB1dCxhLm5leHRfb3V0KSxfPWEubmV4dF9vdXQtbSxmPW8uYnVmMnN0cmluZyhhLm91dHB1dCxtKSxhLm5leHRfb3V0PV8sYS5hdmFpbF9vdXQ9bi1fLF8mJmkuYXJyYXlTZXQoYS5vdXRwdXQsYS5vdXRwdXQsbSxfLDApLHRoaXMub25EYXRhKGYpKTp0aGlzLm9uRGF0YShpLnNocmlua0J1ZihhLm91dHB1dCxhLm5leHRfb3V0KSkpLDA9PT1hLmF2YWlsX2luJiYwPT09YS5hdmFpbF9vdXQmJihsPSEwKX13aGlsZSgoMDxhLmF2YWlsX2lufHwwPT09YS5hdmFpbF9vdXQpJiZwIT09ZC5aX1NUUkVBTV9FTkQpO3JldHVybiBwPT09ZC5aX1NUUkVBTV9FTkQmJihjPWQuWl9GSU5JU0gpLGM9PT1kLlpfRklOSVNIPyhwPXMuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQocCksdGhpcy5lbmRlZD0hMCxwPT09ZC5aX09LKTpjIT09ZC5aX1NZTkNfRkxVU0h8fCh0aGlzLm9uRW5kKGQuWl9PSyksYS5hdmFpbF9vdXQ9MCwhMCl9LG4ucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihlKXt0aGlzLmNodW5rcy5wdXNoKGUpfSxuLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbihlKXtlPT09ZC5aX09LJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpOnRoaXMucmVzdWx0PWkuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWUsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sYS5JbmZsYXRlPW4sYS5pbmZsYXRlPXIsYS5pbmZsYXRlUmF3PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8e30sdC5yYXc9ITAscihlLHQpfSxhLnVuZ3ppcD1yfSx7XCIuL3V0aWxzL2NvbW1vblwiOjQwLFwiLi91dGlscy9zdHJpbmdzXCI6NDEsXCIuL3psaWIvY29uc3RhbnRzXCI6NDMsXCIuL3psaWIvZ3poZWFkZXJcIjo0NixcIi4vemxpYi9pbmZsYXRlXCI6NDgsXCIuL3psaWIvbWVzc2FnZXNcIjo1MCxcIi4vemxpYi96c3RyZWFtXCI6NTJ9XSw0MDpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBuKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfXZhciByPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDE2QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBJbnQzMkFycmF5O2EuYXNzaWduPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dC5sZW5ndGg7KXt2YXIgYT10LnNoaWZ0KCk7aWYoYSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihhK1wibXVzdCBiZSBub24tb2JqZWN0XCIpO2Zvcih2YXIgciBpbiBhKW4oYSxyKSYmKGVbcl09YVtyXSl9fXJldHVybiBlfSxhLnNocmlua0J1Zj1mdW5jdGlvbihlLHQpe3JldHVybiBlLmxlbmd0aD09PXQ/ZTplLnN1YmFycmF5P2Uuc3ViYXJyYXkoMCx0KTooZS5sZW5ndGg9dCxlKX07dmFyIHM9e2FycmF5U2V0OmZ1bmN0aW9uKGUsdCxhLG4scil7aWYodC5zdWJhcnJheSYmZS5zdWJhcnJheSlyZXR1cm4gdm9pZCBlLnNldCh0LnN1YmFycmF5KGEsYStuKSxyKTtmb3IodmFyIHM9MDtzPG47cysrKWVbcitzXT10W2Erc119LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oZSl7dmFyIHQsYSxuLHIscyxvO2ZvcihuPTAsdD0wLGE9ZS5sZW5ndGg7dDxhO3QrKyluKz1lW3RdLmxlbmd0aDtmb3Iobz1uZXcgVWludDhBcnJheShuKSxyPTAsKHQ9MCxhPWUubGVuZ3RoKTt0PGE7dCsrKXM9ZVt0XSxvLnNldChzLHIpLHIrPXMubGVuZ3RoO3JldHVybiBvfX0saT17YXJyYXlTZXQ6ZnVuY3Rpb24oZSx0LGEsbixyKXtmb3IodmFyIHM9MDtzPG47cysrKWVbcitzXT10W2Erc119LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oZSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGUpfX07YS5zZXRUeXBlZD1mdW5jdGlvbihlKXtlPyhhLkJ1Zjg9VWludDhBcnJheSxhLkJ1ZjE2PVVpbnQxNkFycmF5LGEuQnVmMzI9SW50MzJBcnJheSxhLmFzc2lnbihhLHMpKTooYS5CdWY4PUFycmF5LGEuQnVmMTY9QXJyYXksYS5CdWYzMj1BcnJheSxhLmFzc2lnbihhLGkpKX0sYS5zZXRUeXBlZChyKX0se31dLDQxOltmdW5jdGlvbihlLHQsYSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIG4oZSx0KXtpZig2NTUzND50JiYoZS5zdWJhcnJheSYmb3x8IWUuc3ViYXJyYXkmJnMpKXJldHVybiBkLmFwcGx5KG51bGwsci5zaHJpbmtCdWYoZSx0KSk7Zm9yKHZhciBhPVwiXCIsbj0wO248dDtuKyspYSs9ZChlW25dKTtyZXR1cm4gYX12YXIgcj1lKFwiLi9jb21tb25cIikscz0hMCxvPSEwO3RyeXtkLmFwcGx5KG51bGwsWzBdKX1jYXRjaChlKXtzPSExfXRyeXtkLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKGUpe289ITF9Zm9yKHZhciBsPW5ldyByLkJ1ZjgoMjU2KSxwPTA7MjU2PnA7cCsrKWxbcF09MjUyPD1wPzY6MjQ4PD1wPzU6MjQwPD1wPzQ6MjI0PD1wPzM6MTkyPD1wPzI6MTtsWzI1NF09bFsyNTRdPTEsYS5zdHJpbmcyYnVmPWZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoLGE9MCxuLHMsbyxkLGw7Zm9yKGQ9MDtkPHQ7ZCsrKXM9ZS5jaGFyQ29kZUF0KGQpLDU1Mjk2PT0oNjQ1MTImcykmJmQrMTx0JiYobz1lLmNoYXJDb2RlQXQoZCsxKSw1NjMyMD09KDY0NTEyJm8pJiYocz02NTUzNisocy01NTI5Njw8MTApKyhvLTU2MzIwKSxkKyspKSxhKz0xMjg+cz8xOjIwNDg+cz8yOjY1NTM2PnM/Mzo0O2ZvcihuPW5ldyByLkJ1ZjgoYSksbD0wLGQ9MDtsPGE7ZCsrKXM9ZS5jaGFyQ29kZUF0KGQpLDU1Mjk2PT0oNjQ1MTImcykmJmQrMTx0JiYobz1lLmNoYXJDb2RlQXQoZCsxKSw1NjMyMD09KDY0NTEyJm8pJiYocz02NTUzNisocy01NTI5Njw8MTApKyhvLTU2MzIwKSxkKyspKSwxMjg+cz9uW2wrK109czoyMDQ4PnM/KG5bbCsrXT0xOTJ8cz4+PjYsbltsKytdPTEyOHw2MyZzKTo2NTUzNj5zPyhuW2wrK109MjI0fHM+Pj4xMixuW2wrK109MTI4fDYzJnM+Pj42LG5bbCsrXT0xMjh8NjMmcyk6KG5bbCsrXT0yNDB8cz4+PjE4LG5bbCsrXT0xMjh8NjMmcz4+PjEyLG5bbCsrXT0xMjh8NjMmcz4+PjYsbltsKytdPTEyOHw2MyZzKTtyZXR1cm4gbn0sYS5idWYyYmluc3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUsZS5sZW5ndGgpfSxhLmJpbnN0cmluZzJidWY9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyByLkJ1ZjgoZS5sZW5ndGgpLGE9MCxuPXQubGVuZ3RoO2E8bjthKyspdFthXT1lLmNoYXJDb2RlQXQoYSk7cmV0dXJuIHR9LGEuYnVmMnN0cmluZz1mdW5jdGlvbihlLHQpe3ZhciBhPXR8fGUubGVuZ3RoLHI9QXJyYXkoMiphKSxzLG8sZCxwO2ZvcihvPTAscz0wO3M8YTspe2lmKGQ9ZVtzKytdLDEyOD5kKXtyW28rK109ZDtjb250aW51ZX1pZihwPWxbZF0sNDxwKXtyW28rK109NjU1MzMscys9cC0xO2NvbnRpbnVlfWZvcihkJj0yPT09cD8zMTozPT09cD8xNTo3OzE8cCYmczxhOylkPWQ8PDZ8NjMmZVtzKytdLHAtLTtpZigxPHApe3JbbysrXT02NTUzMztjb250aW51ZX02NTUzNj5kP3JbbysrXT1kOihkLT02NTUzNixyW28rK109NTUyOTZ8MTAyMyZkPj4xMCxyW28rK109NTYzMjB8MTAyMyZkKX1yZXR1cm4gbihyLG8pfSxhLnV0Zjhib3JkZXI9ZnVuY3Rpb24oZSx0KXt2YXIgYTtmb3IodD10fHxlLmxlbmd0aCx0PmUubGVuZ3RoJiYodD1lLmxlbmd0aCksYT10LTE7MDw9YSYmMTI4PT0oMTkyJmVbYV0pOylhLS07cmV0dXJuIDA+YT90OjA9PT1hP3Q6YStsW2VbYV1dPnQ/YTp0fX0se1wiLi9jb21tb25cIjo0MH1dLDQyOltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LGEscil7Zm9yKHZhciBzPTB8NjU1MzUmZSxpPTB8NjU1MzUmZT4+PjE2LG89MDswIT09YTspe289MmUzPGE/MmUzOmEsYS09bztkbyBzPTB8cyt0W3IrK10saT0wfGkrczt3aGlsZSgtLW8pO3MlPTY1NTIxLGklPTY1NTIxfXJldHVybiAwfChzfGk8PDE2KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0KXsndXNlIHN0cmljdCc7dC5leHBvcnRzPXtaX05PX0ZMVVNIOjAsWl9QQVJUSUFMX0ZMVVNIOjEsWl9TWU5DX0ZMVVNIOjIsWl9GVUxMX0ZMVVNIOjMsWl9GSU5JU0g6NCxaX0JMT0NLOjUsWl9UUkVFUzo2LFpfT0s6MCxaX1NUUkVBTV9FTkQ6MSxaX05FRURfRElDVDoyLFpfRVJSTk86LTEsWl9TVFJFQU1fRVJST1I6LTIsWl9EQVRBX0VSUk9SOi0zLFpfQlVGX0VSUk9SOi01LFpfTk9fQ09NUFJFU1NJT046MCxaX0JFU1RfU1BFRUQ6MSxaX0JFU1RfQ09NUFJFU1NJT046OSxaX0RFRkFVTFRfQ09NUFJFU1NJT046LTEsWl9GSUxURVJFRDoxLFpfSFVGRk1BTl9PTkxZOjIsWl9STEU6MyxaX0ZJWEVEOjQsWl9ERUZBVUxUX1NUUkFURUdZOjAsWl9CSU5BUlk6MCxaX1RFWFQ6MSxaX1VOS05PV046MixaX0RFRkxBVEVEOjh9fSx7fV0sNDQ6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO3ZhciBhPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MCxhOzI1Nj50O3QrKyl7YT10O2Zvcih2YXIgcj0wOzg+cjtyKyspYT0xJmE/Mzk4ODI5MjM4NF5hPj4+MTphPj4+MTtlW3RdPWF9cmV0dXJuIGV9KCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuLHIpe2VePS0xO2Zvcih2YXIgcz1yO3M8cituO3MrKyllPWU+Pj44XmFbMjU1JihlXnRbc10pXTtyZXR1cm4tMV5lfX0se31dLDQ1OltmdW5jdGlvbihlLHQsYSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm4gZS5tc2c9Ult0XSx0fWZ1bmN0aW9uIHIoZSl7cmV0dXJuKGU8PDEpLSg0PGU/OTowKX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD1lLmxlbmd0aDswPD0tLXQ7KWVbdF09MH1mdW5jdGlvbiBvKGUpe3ZhciB0PWUuc3RhdGUsYT10LnBlbmRpbmc7YT5lLmF2YWlsX291dCYmKGE9ZS5hdmFpbF9vdXQpOzA9PT1hfHwoUy5hcnJheVNldChlLm91dHB1dCx0LnBlbmRpbmdfYnVmLHQucGVuZGluZ19vdXQsYSxlLm5leHRfb3V0KSxlLm5leHRfb3V0Kz1hLHQucGVuZGluZ19vdXQrPWEsZS50b3RhbF9vdXQrPWEsZS5hdmFpbF9vdXQtPWEsdC5wZW5kaW5nLT1hLDA9PT10LnBlbmRpbmcmJih0LnBlbmRpbmdfb3V0PTApKX1mdW5jdGlvbiBkKGUsdCl7ay5fdHJfZmx1c2hfYmxvY2soZSwwPD1lLmJsb2NrX3N0YXJ0P2UuYmxvY2tfc3RhcnQ6LTEsZS5zdHJzdGFydC1lLmJsb2NrX3N0YXJ0LHQpLGUuYmxvY2tfc3RhcnQ9ZS5zdHJzdGFydCxvKGUuc3RybSl9ZnVuY3Rpb24gbChlLHQpe2UucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPXR9ZnVuY3Rpb24gcChlLHQpe2UucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPTI1NSZ0Pj4+OCxlLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXT0yNTUmdH1mdW5jdGlvbiBjKGUsdCxhLG4pe3ZhciByPWUuYXZhaWxfaW47cmV0dXJuKHI+biYmKHI9biksMD09PXIpPzA6KGUuYXZhaWxfaW4tPXIsUy5hcnJheVNldCh0LGUuaW5wdXQsZS5uZXh0X2luLHIsYSksMT09PWUuc3RhdGUud3JhcD9lLmFkbGVyPXYoZS5hZGxlcix0LHIsYSk6Mj09PWUuc3RhdGUud3JhcCYmKGUuYWRsZXI9SShlLmFkbGVyLHQscixhKSksZS5uZXh0X2luKz1yLGUudG90YWxfaW4rPXIscil9ZnVuY3Rpb24gdShlLHQpe3ZhciBhPWUubWF4X2NoYWluX2xlbmd0aCxuPWUuc3Ryc3RhcnQscj1lLnByZXZfbGVuZ3RoLHM9ZS5uaWNlX21hdGNoLGk9ZS5zdHJzdGFydD5lLndfc2l6ZS0yNjI/ZS5zdHJzdGFydC0oZS53X3NpemUtMjYyKTowLG89ZS53aW5kb3csZD1lLndfbWFzayxsPWUucHJldixwPWUuc3Ryc3RhcnQrMjU4LGM9b1tuK3ItMV0sdT1vW24rcl0sbSxfO2UucHJldl9sZW5ndGg+PWUuZ29vZF9tYXRjaCYmKGE+Pj0yKSxzPmUubG9va2FoZWFkJiYocz1lLmxvb2thaGVhZCk7ZG97aWYobT10LG9bbStyXSE9PXV8fG9bbStyLTFdIT09Y3x8b1ttXSE9PW9bbl18fG9bKyttXSE9PW9bbisxXSljb250aW51ZTtuKz0yLG0rKztkbzt3aGlsZShvWysrbl09PT1vWysrbV0mJm9bKytuXT09PW9bKyttXSYmb1srK25dPT09b1srK21dJiZvWysrbl09PT1vWysrbV0mJm9bKytuXT09PW9bKyttXSYmb1srK25dPT09b1srK21dJiZvWysrbl09PT1vWysrbV0mJm9bKytuXT09PW9bKyttXSYmbjxwKTtpZihfPTI1OC0ocC1uKSxuPXAtMjU4LF8+cil7aWYoZS5tYXRjaF9zdGFydD10LHI9XyxfPj1zKWJyZWFrO2M9b1tuK3ItMV0sdT1vW24rcl19fXdoaWxlKCh0PWxbdCZkXSk+aSYmMCE9LS1hKTtyZXR1cm4gcjw9ZS5sb29rYWhlYWQ/cjplLmxvb2thaGVhZH1mdW5jdGlvbiBtKGUpe3ZhciB0PWUud19zaXplLGEscixzLGksbztkb3tpZihpPWUud2luZG93X3NpemUtZS5sb29rYWhlYWQtZS5zdHJzdGFydCxlLnN0cnN0YXJ0Pj10Kyh0LTI2Mikpe1MuYXJyYXlTZXQoZS53aW5kb3csZS53aW5kb3csdCx0LDApLGUubWF0Y2hfc3RhcnQtPXQsZS5zdHJzdGFydC09dCxlLmJsb2NrX3N0YXJ0LT10LHI9ZS5oYXNoX3NpemUsYT1yO2RvIHM9ZS5oZWFkWy0tYV0sZS5oZWFkW2FdPXM+PXQ/cy10OjA7d2hpbGUoLS1yKTtyPXQsYT1yO2RvIHM9ZS5wcmV2Wy0tYV0sZS5wcmV2W2FdPXM+PXQ/cy10OjA7d2hpbGUoLS1yKTtpKz10fWlmKDA9PT1lLnN0cm0uYXZhaWxfaW4pYnJlYWs7aWYocj1jKGUuc3RybSxlLndpbmRvdyxlLnN0cnN0YXJ0K2UubG9va2FoZWFkLGkpLGUubG9va2FoZWFkKz1yLDM8PWUubG9va2FoZWFkK2UuaW5zZXJ0KWZvcihvPWUuc3Ryc3RhcnQtZS5pbnNlcnQsZS5pbnNfaD1lLndpbmRvd1tvXSxlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbbysxXSkmZS5oYXNoX21hc2s7ZS5pbnNlcnQmJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbbyszLTFdKSZlLmhhc2hfbWFzayxlLnByZXZbbyZlLndfbWFza109ZS5oZWFkW2UuaW5zX2hdLGUuaGVhZFtlLmluc19oXT1vLG8rKyxlLmluc2VydC0tLCEoMz5lLmxvb2thaGVhZCtlLmluc2VydCkpOyk7fXdoaWxlKDI2Mj5lLmxvb2thaGVhZCYmMCE9PWUuc3RybS5hdmFpbF9pbil9ZnVuY3Rpb24gXyhlLHQpe2Zvcih2YXIgYSxuOzspe2lmKDI2Mj5lLmxvb2thaGVhZCl7aWYobShlKSwyNjI+ZS5sb29rYWhlYWQmJjA9PT10KXJldHVybiAxO2lmKDA9PT1lLmxvb2thaGVhZClicmVha31pZihhPTAsMzw9ZS5sb29rYWhlYWQmJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCszLTFdKSZlLmhhc2hfbWFzayxhPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF0sZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnQpLDAhPT1hJiZlLnN0cnN0YXJ0LWE8PWUud19zaXplLTI2MiYmKGUubWF0Y2hfbGVuZ3RoPXUoZSxhKSksISgzPD1lLm1hdGNoX2xlbmd0aCkpbj1rLl90cl90YWxseShlLDAsZS53aW5kb3dbZS5zdHJzdGFydF0pLGUubG9va2FoZWFkLS0sZS5zdHJzdGFydCsrO2Vsc2UgaWYobj1rLl90cl90YWxseShlLGUuc3Ryc3RhcnQtZS5tYXRjaF9zdGFydCxlLm1hdGNoX2xlbmd0aC0zKSxlLmxvb2thaGVhZC09ZS5tYXRjaF9sZW5ndGgsZS5tYXRjaF9sZW5ndGg8PWUubWF4X2xhenlfbWF0Y2gmJjM8PWUubG9va2FoZWFkKXtlLm1hdGNoX2xlbmd0aC0tO2RvIGUuc3Ryc3RhcnQrKyxlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCszLTFdKSZlLmhhc2hfbWFzayxhPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF0sZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnQ7d2hpbGUoMCE9LS1lLm1hdGNoX2xlbmd0aCk7ZS5zdHJzdGFydCsrfWVsc2UgZS5zdHJzdGFydCs9ZS5tYXRjaF9sZW5ndGgsZS5tYXRjaF9sZW5ndGg9MCxlLmluc19oPWUud2luZG93W2Uuc3Ryc3RhcnRdLGUuaW5zX2g9KGUuaW5zX2g8PGUuaGFzaF9zaGlmdF5lLndpbmRvd1tlLnN0cnN0YXJ0KzFdKSZlLmhhc2hfbWFzaztpZihuJiYoZChlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDF9cmV0dXJuIGUuaW5zZXJ0PTI+ZS5zdHJzdGFydD9lLnN0cnN0YXJ0OjIsND09PXQ/KGQoZSwhMCksMD09PWUuc3RybS5hdmFpbF9vdXQ/Mzo0KTplLmxhc3RfbGl0JiYoZChlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCk/MToyfWZ1bmN0aW9uIGYoZSx0KXtmb3IodmFyIGEsbixyOzspe2lmKDI2Mj5lLmxvb2thaGVhZCl7aWYobShlKSwyNjI+ZS5sb29rYWhlYWQmJjA9PT10KXJldHVybiAxO2lmKDA9PT1lLmxvb2thaGVhZClicmVha31pZihhPTAsMzw9ZS5sb29rYWhlYWQmJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCszLTFdKSZlLmhhc2hfbWFzayxhPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF0sZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnQpLGUucHJldl9sZW5ndGg9ZS5tYXRjaF9sZW5ndGgsZS5wcmV2X21hdGNoPWUubWF0Y2hfc3RhcnQsZS5tYXRjaF9sZW5ndGg9MiwwIT09YSYmZS5wcmV2X2xlbmd0aDxlLm1heF9sYXp5X21hdGNoJiZlLnN0cnN0YXJ0LWE8PWUud19zaXplLTI2MiYmKGUubWF0Y2hfbGVuZ3RoPXUoZSxhKSw1Pj1lLm1hdGNoX2xlbmd0aCYmKDE9PT1lLnN0cmF0ZWd5fHwzPT09ZS5tYXRjaF9sZW5ndGgmJjQwOTY8ZS5zdHJzdGFydC1lLm1hdGNoX3N0YXJ0KSYmKGUubWF0Y2hfbGVuZ3RoPTIpKSwzPD1lLnByZXZfbGVuZ3RoJiZlLm1hdGNoX2xlbmd0aDw9ZS5wcmV2X2xlbmd0aCl7cj1lLnN0cnN0YXJ0K2UubG9va2FoZWFkLTMsbj1rLl90cl90YWxseShlLGUuc3Ryc3RhcnQtMS1lLnByZXZfbWF0Y2gsZS5wcmV2X2xlbmd0aC0zKSxlLmxvb2thaGVhZC09ZS5wcmV2X2xlbmd0aC0xLGUucHJldl9sZW5ndGgtPTI7ZG8rK2Uuc3Ryc3RhcnQ8PXImJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCszLTFdKSZlLmhhc2hfbWFzayxhPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF0sZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnQpO3doaWxlKDAhPS0tZS5wcmV2X2xlbmd0aCk7aWYoZS5tYXRjaF9hdmFpbGFibGU9MCxlLm1hdGNoX2xlbmd0aD0yLGUuc3Ryc3RhcnQrKyxuJiYoZChlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDF9ZWxzZSBpZighZS5tYXRjaF9hdmFpbGFibGUpZS5tYXRjaF9hdmFpbGFibGU9MSxlLnN0cnN0YXJ0KyssZS5sb29rYWhlYWQtLTtlbHNlIGlmKG49ay5fdHJfdGFsbHkoZSwwLGUud2luZG93W2Uuc3Ryc3RhcnQtMV0pLG4mJmQoZSwhMSksZS5zdHJzdGFydCsrLGUubG9va2FoZWFkLS0sMD09PWUuc3RybS5hdmFpbF9vdXQpcmV0dXJuIDF9cmV0dXJuIGUubWF0Y2hfYXZhaWxhYmxlJiYobj1rLl90cl90YWxseShlLDAsZS53aW5kb3dbZS5zdHJzdGFydC0xXSksZS5tYXRjaF9hdmFpbGFibGU9MCksZS5pbnNlcnQ9Mj5lLnN0cnN0YXJ0P2Uuc3Ryc3RhcnQ6Miw0PT09dD8oZChlLCEwKSwwPT09ZS5zdHJtLmF2YWlsX291dD8zOjQpOmUubGFzdF9saXQmJihkKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KT8xOjJ9ZnVuY3Rpb24gaChlLHQpe2Zvcih2YXIgYT1lLndpbmRvdyxuLHIscyxpOzspe2lmKDI1OD49ZS5sb29rYWhlYWQpe2lmKG0oZSksMjU4Pj1lLmxvb2thaGVhZCYmMD09PXQpcmV0dXJuIDE7aWYoMD09PWUubG9va2FoZWFkKWJyZWFrfWlmKGUubWF0Y2hfbGVuZ3RoPTAsMzw9ZS5sb29rYWhlYWQmJjA8ZS5zdHJzdGFydCYmKHM9ZS5zdHJzdGFydC0xLHI9YVtzXSxyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdKSl7aT1lLnN0cnN0YXJ0KzI1ODtkbzt3aGlsZShyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZyPT09YVsrK3NdJiZzPGkpO2UubWF0Y2hfbGVuZ3RoPTI1OC0oaS1zKSxlLm1hdGNoX2xlbmd0aD5lLmxvb2thaGVhZCYmKGUubWF0Y2hfbGVuZ3RoPWUubG9va2FoZWFkKX1pZigzPD1lLm1hdGNoX2xlbmd0aD8obj1rLl90cl90YWxseShlLDEsZS5tYXRjaF9sZW5ndGgtMyksZS5sb29rYWhlYWQtPWUubWF0Y2hfbGVuZ3RoLGUuc3Ryc3RhcnQrPWUubWF0Y2hfbGVuZ3RoLGUubWF0Y2hfbGVuZ3RoPTApOihuPWsuX3RyX3RhbGx5KGUsMCxlLndpbmRvd1tlLnN0cnN0YXJ0XSksZS5sb29rYWhlYWQtLSxlLnN0cnN0YXJ0KyspLG4mJihkKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gMX1yZXR1cm4gZS5pbnNlcnQ9MCw0PT09dD8oZChlLCEwKSwwPT09ZS5zdHJtLmF2YWlsX291dD8zOjQpOmUubGFzdF9saXQmJihkKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KT8xOjJ9ZnVuY3Rpb24gZyhlLHQpe2Zvcih2YXIgYTs7KXtpZigwPT09ZS5sb29rYWhlYWQmJihtKGUpLDA9PT1lLmxvb2thaGVhZCkpe2lmKDA9PT10KXJldHVybiAxO2JyZWFrfWlmKGUubWF0Y2hfbGVuZ3RoPTAsYT1rLl90cl90YWxseShlLDAsZS53aW5kb3dbZS5zdHJzdGFydF0pLGUubG9va2FoZWFkLS0sZS5zdHJzdGFydCsrLGEmJihkKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gMX1yZXR1cm4gZS5pbnNlcnQ9MCw0PT09dD8oZChlLCEwKSwwPT09ZS5zdHJtLmF2YWlsX291dD8zOjQpOmUubGFzdF9saXQmJihkKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KT8xOjJ9ZnVuY3Rpb24geShlLHQsYSxuLHIpe3RoaXMuZ29vZF9sZW5ndGg9ZSx0aGlzLm1heF9sYXp5PXQsdGhpcy5uaWNlX2xlbmd0aD1hLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPXJ9ZnVuY3Rpb24gYihlKXtlLndpbmRvd19zaXplPTIqZS53X3NpemUsaShlLmhlYWQpLGUubWF4X2xhenlfbWF0Y2g9T1tlLmxldmVsXS5tYXhfbGF6eSxlLmdvb2RfbWF0Y2g9T1tlLmxldmVsXS5nb29kX2xlbmd0aCxlLm5pY2VfbWF0Y2g9T1tlLmxldmVsXS5uaWNlX2xlbmd0aCxlLm1heF9jaGFpbl9sZW5ndGg9T1tlLmxldmVsXS5tYXhfY2hhaW4sZS5zdHJzdGFydD0wLGUuYmxvY2tfc3RhcnQ9MCxlLmxvb2thaGVhZD0wLGUuaW5zZXJ0PTAsZS5tYXRjaF9sZW5ndGg9ZS5wcmV2X2xlbmd0aD0yLGUubWF0Y2hfYXZhaWxhYmxlPTAsZS5pbnNfaD0wfWZ1bmN0aW9uIHgoKXt0aGlzLnN0cm09bnVsbCx0aGlzLnN0YXR1cz0wLHRoaXMucGVuZGluZ19idWY9bnVsbCx0aGlzLnBlbmRpbmdfYnVmX3NpemU9MCx0aGlzLnBlbmRpbmdfb3V0PTAsdGhpcy5wZW5kaW5nPTAsdGhpcy53cmFwPTAsdGhpcy5nemhlYWQ9bnVsbCx0aGlzLmd6aW5kZXg9MCx0aGlzLm1ldGhvZD04LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBTLkJ1ZjE2KDExNDYpLHRoaXMuZHluX2R0cmVlPW5ldyBTLkJ1ZjE2KDEyMiksdGhpcy5ibF90cmVlPW5ldyBTLkJ1ZjE2KDc4KSxpKHRoaXMuZHluX2x0cmVlKSxpKHRoaXMuZHluX2R0cmVlKSxpKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IFMuQnVmMTYoMTYpLHRoaXMuaGVhcD1uZXcgUy5CdWYxNig1NzMpLGkodGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IFMuQnVmMTYoNTczKSxpKHRoaXMuZGVwdGgpLHRoaXMubF9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5sYXN0X2xpdD0wLHRoaXMuZF9idWY9MCx0aGlzLm9wdF9sZW49MCx0aGlzLnN0YXRpY19sZW49MCx0aGlzLm1hdGNoZXM9MCx0aGlzLmluc2VydD0wLHRoaXMuYmlfYnVmPTAsdGhpcy5iaV92YWxpZD0wfWZ1bmN0aW9uIHcoZSl7dmFyIHQ7cmV0dXJuIGUmJmUuc3RhdGU/KGUudG90YWxfaW49ZS50b3RhbF9vdXQ9MCxlLmRhdGFfdHlwZT0yLHQ9ZS5zdGF0ZSx0LnBlbmRpbmc9MCx0LnBlbmRpbmdfb3V0PTAsMD50LndyYXAmJih0LndyYXA9LXQud3JhcCksdC5zdGF0dXM9dC53cmFwPzQyOjExMyxlLmFkbGVyPTI9PT10LndyYXA/MDoxLHQubGFzdF9mbHVzaD0wLGsuX3RyX2luaXQodCksMCk6bihlLC0yKX1mdW5jdGlvbiBFKGUpe3ZhciB0PXcoZSk7cmV0dXJuIDA9PT10JiZiKGUuc3RhdGUpLHR9ZnVuY3Rpb24gQyhlLHQsYSxyLGksbyl7aWYoIWUpcmV0dXJuLTI7dmFyIGQ9MTtpZigtMT09PXQmJih0PTYpLDA+cj8oZD0wLHI9LXIpOjE1PHImJihkPTIsci09MTYpLDE+aXx8OTxpfHw4IT09YXx8OD5yfHwxNTxyfHwwPnR8fDk8dHx8MD5vfHw0PG8pcmV0dXJuIG4oZSwtMik7OD09PXImJihyPTkpO3ZhciBsPW5ldyB4O3JldHVybiBlLnN0YXRlPWwsbC5zdHJtPWUsbC53cmFwPWQsbC5nemhlYWQ9bnVsbCxsLndfYml0cz1yLGwud19zaXplPTE8PGwud19iaXRzLGwud19tYXNrPWwud19zaXplLTEsbC5oYXNoX2JpdHM9aSs3LGwuaGFzaF9zaXplPTE8PGwuaGFzaF9iaXRzLGwuaGFzaF9tYXNrPWwuaGFzaF9zaXplLTEsbC5oYXNoX3NoaWZ0PX5+KChsLmhhc2hfYml0cyszLTEpLzMpLGwud2luZG93PW5ldyBTLkJ1ZjgoMipsLndfc2l6ZSksbC5oZWFkPW5ldyBTLkJ1ZjE2KGwuaGFzaF9zaXplKSxsLnByZXY9bmV3IFMuQnVmMTYobC53X3NpemUpLGwubGl0X2J1ZnNpemU9MTw8aSs2LGwucGVuZGluZ19idWZfc2l6ZT00KmwubGl0X2J1ZnNpemUsbC5wZW5kaW5nX2J1Zj1uZXcgUy5CdWY4KGwucGVuZGluZ19idWZfc2l6ZSksbC5kX2J1Zj0xKmwubGl0X2J1ZnNpemUsbC5sX2J1Zj0zKmwubGl0X2J1ZnNpemUsbC5sZXZlbD10LGwuc3RyYXRlZ3k9byxsLm1ldGhvZD1hLEUoZSl9ZnVuY3Rpb24gQShlLHQpe3ZhciBhLGQsYyx1O2lmKCFlfHwhZS5zdGF0ZXx8NTx0fHwwPnQpcmV0dXJuIGU/bihlLC0yKTotMjtpZihkPWUuc3RhdGUsIWUub3V0cHV0fHwhZS5pbnB1dCYmMCE9PWUuYXZhaWxfaW58fDY2Nj09PWQuc3RhdHVzJiY0IT09dClyZXR1cm4gbihlLDA9PT1lLmF2YWlsX291dD8tNTotMik7aWYoZC5zdHJtPWUsYT1kLmxhc3RfZmx1c2gsZC5sYXN0X2ZsdXNoPXQsNDI9PT1kLnN0YXR1cylpZigyPT09ZC53cmFwKWUuYWRsZXI9MCxsKGQsMzEpLGwoZCwxMzkpLGwoZCw4KSxkLmd6aGVhZD8obChkLChkLmd6aGVhZC50ZXh0PzE6MCkrKGQuZ3poZWFkLmhjcmM/MjowKSsoZC5nemhlYWQuZXh0cmE/NDowKSsoZC5nemhlYWQubmFtZT84OjApKyhkLmd6aGVhZC5jb21tZW50PzE2OjApKSxsKGQsMjU1JmQuZ3poZWFkLnRpbWUpLGwoZCwyNTUmZC5nemhlYWQudGltZT4+OCksbChkLDI1NSZkLmd6aGVhZC50aW1lPj4xNiksbChkLDI1NSZkLmd6aGVhZC50aW1lPj4yNCksbChkLDk9PT1kLmxldmVsPzI6Mjw9ZC5zdHJhdGVneXx8Mj5kLmxldmVsPzQ6MCksbChkLDI1NSZkLmd6aGVhZC5vcyksZC5nemhlYWQuZXh0cmEmJmQuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGwoZCwyNTUmZC5nemhlYWQuZXh0cmEubGVuZ3RoKSxsKGQsMjU1JmQuZ3poZWFkLmV4dHJhLmxlbmd0aD4+OCkpLGQuZ3poZWFkLmhjcmMmJihlLmFkbGVyPUkoZS5hZGxlcixkLnBlbmRpbmdfYnVmLGQucGVuZGluZywwKSksZC5nemluZGV4PTAsZC5zdGF0dXM9NjkpOihsKGQsMCksbChkLDApLGwoZCwwKSxsKGQsMCksbChkLDApLGwoZCw5PT09ZC5sZXZlbD8yOjI8PWQuc3RyYXRlZ3l8fDI+ZC5sZXZlbD80OjApLGwoZCwzKSxkLnN0YXR1cz0xMTMpO2Vsc2V7dmFyIG09OCsoZC53X2JpdHMtODw8NCk8PDgsXz0tMTtfPTI8PWQuc3RyYXRlZ3l8fDI+ZC5sZXZlbD8wOjY+ZC5sZXZlbD8xOjY9PT1kLmxldmVsPzI6MyxtfD1fPDw2LDAhPT1kLnN0cnN0YXJ0JiYobXw9MzIpLG0rPTMxLW0lMzEsZC5zdGF0dXM9MTEzLHAoZCxtKSwwIT09ZC5zdHJzdGFydCYmKHAoZCxlLmFkbGVyPj4+MTYpLHAoZCw2NTUzNSZlLmFkbGVyKSksZS5hZGxlcj0xfWlmKDY5PT09ZC5zdGF0dXMpaWYoZC5nemhlYWQuZXh0cmEpe2ZvcihjPWQucGVuZGluZztkLmd6aW5kZXg8KDY1NTM1JmQuZ3poZWFkLmV4dHJhLmxlbmd0aCkmJiEoZC5wZW5kaW5nPT09ZC5wZW5kaW5nX2J1Zl9zaXplJiYoZC5nemhlYWQuaGNyYyYmZC5wZW5kaW5nPmMmJihlLmFkbGVyPUkoZS5hZGxlcixkLnBlbmRpbmdfYnVmLGQucGVuZGluZy1jLGMpKSxvKGUpLGM9ZC5wZW5kaW5nLGQucGVuZGluZz09PWQucGVuZGluZ19idWZfc2l6ZSkpOylsKGQsMjU1JmQuZ3poZWFkLmV4dHJhW2QuZ3ppbmRleF0pLGQuZ3ppbmRleCsrO2QuZ3poZWFkLmhjcmMmJmQucGVuZGluZz5jJiYoZS5hZGxlcj1JKGUuYWRsZXIsZC5wZW5kaW5nX2J1ZixkLnBlbmRpbmctYyxjKSksZC5nemluZGV4PT09ZC5nemhlYWQuZXh0cmEubGVuZ3RoJiYoZC5nemluZGV4PTAsZC5zdGF0dXM9NzMpfWVsc2UgZC5zdGF0dXM9NzM7aWYoNzM9PT1kLnN0YXR1cylpZihkLmd6aGVhZC5uYW1lKXtjPWQucGVuZGluZztkb3tpZihkLnBlbmRpbmc9PT1kLnBlbmRpbmdfYnVmX3NpemUmJihkLmd6aGVhZC5oY3JjJiZkLnBlbmRpbmc+YyYmKGUuYWRsZXI9SShlLmFkbGVyLGQucGVuZGluZ19idWYsZC5wZW5kaW5nLWMsYykpLG8oZSksYz1kLnBlbmRpbmcsZC5wZW5kaW5nPT09ZC5wZW5kaW5nX2J1Zl9zaXplKSl7dT0xO2JyZWFrfXU9ZC5nemluZGV4PGQuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZkLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoZC5nemluZGV4KyspOjAsbChkLHUpfXdoaWxlKDAhPT11KTtkLmd6aGVhZC5oY3JjJiZkLnBlbmRpbmc+YyYmKGUuYWRsZXI9SShlLmFkbGVyLGQucGVuZGluZ19idWYsZC5wZW5kaW5nLWMsYykpLDA9PT11JiYoZC5nemluZGV4PTAsZC5zdGF0dXM9OTEpfWVsc2UgZC5zdGF0dXM9OTE7aWYoOTE9PT1kLnN0YXR1cylpZihkLmd6aGVhZC5jb21tZW50KXtjPWQucGVuZGluZztkb3tpZihkLnBlbmRpbmc9PT1kLnBlbmRpbmdfYnVmX3NpemUmJihkLmd6aGVhZC5oY3JjJiZkLnBlbmRpbmc+YyYmKGUuYWRsZXI9SShlLmFkbGVyLGQucGVuZGluZ19idWYsZC5wZW5kaW5nLWMsYykpLG8oZSksYz1kLnBlbmRpbmcsZC5wZW5kaW5nPT09ZC5wZW5kaW5nX2J1Zl9zaXplKSl7dT0xO2JyZWFrfXU9ZC5nemluZGV4PGQuZ3poZWFkLmNvbW1lbnQubGVuZ3RoPzI1NSZkLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQoZC5nemluZGV4KyspOjAsbChkLHUpfXdoaWxlKDAhPT11KTtkLmd6aGVhZC5oY3JjJiZkLnBlbmRpbmc+YyYmKGUuYWRsZXI9SShlLmFkbGVyLGQucGVuZGluZ19idWYsZC5wZW5kaW5nLWMsYykpLDA9PT11JiYoZC5zdGF0dXM9MTAzKX1lbHNlIGQuc3RhdHVzPTEwMztpZigxMDM9PT1kLnN0YXR1cyYmKGQuZ3poZWFkLmhjcmM/KGQucGVuZGluZysyPmQucGVuZGluZ19idWZfc2l6ZSYmbyhlKSxkLnBlbmRpbmcrMjw9ZC5wZW5kaW5nX2J1Zl9zaXplJiYobChkLDI1NSZlLmFkbGVyKSxsKGQsMjU1JmUuYWRsZXI+PjgpLGUuYWRsZXI9MCxkLnN0YXR1cz0xMTMpKTpkLnN0YXR1cz0xMTMpLDAhPT1kLnBlbmRpbmcpe2lmKG8oZSksMD09PWUuYXZhaWxfb3V0KXJldHVybiBkLmxhc3RfZmx1c2g9LTEsMDt9ZWxzZSBpZigwPT09ZS5hdmFpbF9pbiYmcih0KTw9cihhKSYmNCE9PXQpcmV0dXJuIG4oZSwtNSk7aWYoNjY2PT09ZC5zdGF0dXMmJjAhPT1lLmF2YWlsX2luKXJldHVybiBuKGUsLTUpO2lmKDAhPT1lLmF2YWlsX2lufHwwIT09ZC5sb29rYWhlYWR8fDAhPT10JiY2NjYhPT1kLnN0YXR1cyl7dmFyIGY9Mj09PWQuc3RyYXRlZ3k/ZyhkLHQpOjM9PT1kLnN0cmF0ZWd5P2goZCx0KTpPW2QubGV2ZWxdLmZ1bmMoZCx0KTtpZigoMz09PWZ8fDQ9PT1mKSYmKGQuc3RhdHVzPTY2NiksMT09PWZ8fDM9PT1mKXJldHVybiAwPT09ZS5hdmFpbF9vdXQmJihkLmxhc3RfZmx1c2g9LTEpLDA7aWYoMj09PWYmJigxPT09dD9rLl90cl9hbGlnbihkKTo1IT09dCYmKGsuX3RyX3N0b3JlZF9ibG9jayhkLDAsMCwhMSksMz09PXQmJihpKGQuaGVhZCksMD09PWQubG9va2FoZWFkJiYoZC5zdHJzdGFydD0wLGQuYmxvY2tfc3RhcnQ9MCxkLmluc2VydD0wKSkpLG8oZSksMD09PWUuYXZhaWxfb3V0KSlyZXR1cm4gZC5sYXN0X2ZsdXNoPS0xLDB9cmV0dXJuIDQ9PT10PzA+PWQud3JhcD8xOigyPT09ZC53cmFwPyhsKGQsMjU1JmUuYWRsZXIpLGwoZCwyNTUmZS5hZGxlcj4+OCksbChkLDI1NSZlLmFkbGVyPj4xNiksbChkLDI1NSZlLmFkbGVyPj4yNCksbChkLDI1NSZlLnRvdGFsX2luKSxsKGQsMjU1JmUudG90YWxfaW4+PjgpLGwoZCwyNTUmZS50b3RhbF9pbj4+MTYpLGwoZCwyNTUmZS50b3RhbF9pbj4+MjQpKToocChkLGUuYWRsZXI+Pj4xNikscChkLDY1NTM1JmUuYWRsZXIpKSxvKGUpLDA8ZC53cmFwJiYoZC53cmFwPS1kLndyYXApLDA9PT1kLnBlbmRpbmc/MTowKTowfXZhciBTPWUoXCIuLi91dGlscy9jb21tb25cIiksaz1lKFwiLi90cmVlc1wiKSx2PWUoXCIuL2FkbGVyMzJcIiksST1lKFwiLi9jcmMzMlwiKSxSPWUoXCIuL21lc3NhZ2VzXCIpLE87Tz1bbmV3IHkoMCwwLDAsMCxmdW5jdGlvbihlLHQpe3ZhciBhPTY1NTM1O2ZvcihhPmUucGVuZGluZ19idWZfc2l6ZS01JiYoYT1lLnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYoMT49ZS5sb29rYWhlYWQpe2lmKG0oZSksMD09PWUubG9va2FoZWFkJiYwPT09dClyZXR1cm4gMTtpZigwPT09ZS5sb29rYWhlYWQpYnJlYWt9ZS5zdHJzdGFydCs9ZS5sb29rYWhlYWQsZS5sb29rYWhlYWQ9MDt2YXIgbj1lLmJsb2NrX3N0YXJ0K2E7aWYoKDA9PT1lLnN0cnN0YXJ0fHxlLnN0cnN0YXJ0Pj1uKSYmKGUubG9va2FoZWFkPWUuc3Ryc3RhcnQtbixlLnN0cnN0YXJ0PW4sZChlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIDE7aWYoZS5zdHJzdGFydC1lLmJsb2NrX3N0YXJ0Pj1lLndfc2l6ZS0yNjImJihkKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gMX1yZXR1cm4gZS5pbnNlcnQ9MCw0PT09dD8oZChlLCEwKSwwPT09ZS5zdHJtLmF2YWlsX291dD8zOjQpOmUuc3Ryc3RhcnQ+ZS5ibG9ja19zdGFydCYmKGQoZSwhMSksMD09PWUuc3RybS5hdmFpbF9vdXQpPzE6MX0pLG5ldyB5KDQsNCw4LDQsXyksbmV3IHkoNCw1LDE2LDgsXyksbmV3IHkoNCw2LDMyLDMyLF8pLG5ldyB5KDQsNCwxNiwxNixmKSxuZXcgeSg4LDE2LDMyLDMyLGYpLG5ldyB5KDgsMTYsMTI4LDEyOCxmKSxuZXcgeSg4LDMyLDEyOCwyNTYsZiksbmV3IHkoMzIsMTI4LDI1OCwxMDI0LGYpLG5ldyB5KDMyLDI1OCwyNTgsNDA5NixmKV0sYS5kZWZsYXRlSW5pdD1mdW5jdGlvbihlLHQpe3JldHVybiBDKGUsdCw4LDE1LDgsMCl9LGEuZGVmbGF0ZUluaXQyPUMsYS5kZWZsYXRlUmVzZXQ9RSxhLmRlZmxhdGVSZXNldEtlZXA9dyxhLmRlZmxhdGVTZXRIZWFkZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmZS5zdGF0ZT8yPT09ZS5zdGF0ZS53cmFwPyhlLnN0YXRlLmd6aGVhZD10LDApOi0yOi0yfSxhLmRlZmxhdGU9QSxhLmRlZmxhdGVFbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUmJmUuc3RhdGU/KHQ9ZS5zdGF0ZS5zdGF0dXMsNDIhPT10JiY2OSE9PXQmJjczIT09dCYmOTEhPT10JiYxMDMhPT10JiYxMTMhPT10JiY2NjYhPT10KT9uKGUsLTIpOihlLnN0YXRlPW51bGwsMTEzPT09dD9uKGUsLTMpOjApOi0yfSxhLmRlZmxhdGVTZXREaWN0aW9uYXJ5PWZ1bmN0aW9uKGUsdCl7dmFyIGE9dC5sZW5ndGgscixvLGQsbCxwLGMsdSxfO2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4tMjtpZihyPWUuc3RhdGUsbD1yLndyYXAsMj09PWx8fDE9PT1sJiY0MiE9PXIuc3RhdHVzfHxyLmxvb2thaGVhZClyZXR1cm4tMjtmb3IoMT09PWwmJihlLmFkbGVyPXYoZS5hZGxlcix0LGEsMCkpLHIud3JhcD0wLGE+PXIud19zaXplJiYoMD09PWwmJihpKHIuaGVhZCksci5zdHJzdGFydD0wLHIuYmxvY2tfc3RhcnQ9MCxyLmluc2VydD0wKSxfPW5ldyBTLkJ1Zjgoci53X3NpemUpLFMuYXJyYXlTZXQoXyx0LGEtci53X3NpemUsci53X3NpemUsMCksdD1fLGE9ci53X3NpemUpLHA9ZS5hdmFpbF9pbixjPWUubmV4dF9pbix1PWUuaW5wdXQsZS5hdmFpbF9pbj1hLGUubmV4dF9pbj0wLGUuaW5wdXQ9dCxtKHIpOzM8PXIubG9va2FoZWFkOyl7bz1yLnN0cnN0YXJ0LGQ9ci5sb29rYWhlYWQtMjtkbyByLmluc19oPShyLmluc19oPDxyLmhhc2hfc2hpZnReci53aW5kb3dbbyszLTFdKSZyLmhhc2hfbWFzayxyLnByZXZbbyZyLndfbWFza109ci5oZWFkW3IuaW5zX2hdLHIuaGVhZFtyLmluc19oXT1vLG8rKzt3aGlsZSgtLWQpO3Iuc3Ryc3RhcnQ9byxyLmxvb2thaGVhZD0yLG0ocil9cmV0dXJuIHIuc3Ryc3RhcnQrPXIubG9va2FoZWFkLHIuYmxvY2tfc3RhcnQ9ci5zdHJzdGFydCxyLmluc2VydD1yLmxvb2thaGVhZCxyLmxvb2thaGVhZD0wLHIubWF0Y2hfbGVuZ3RoPXIucHJldl9sZW5ndGg9MixyLm1hdGNoX2F2YWlsYWJsZT0wLGUubmV4dF9pbj1jLGUuaW5wdXQ9dSxlLmF2YWlsX2luPXAsci53cmFwPWwsMH0sYS5kZWZsYXRlSW5mbz1cInBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6NDAsXCIuL2FkbGVyMzJcIjo0MixcIi4vY3JjMzJcIjo0NCxcIi4vbWVzc2FnZXNcIjo1MCxcIi4vdHJlZXNcIjo1MX1dLDQ2OltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt0aGlzLnRleHQ9MCx0aGlzLnRpbWU9MCx0aGlzLnhmbGFncz0wLHRoaXMub3M9MCx0aGlzLmV4dHJhPW51bGwsdGhpcy5leHRyYV9sZW49MCx0aGlzLm5hbWU9XCJcIix0aGlzLmNvbW1lbnQ9XCJcIix0aGlzLmhjcmM9MCx0aGlzLmRvbmU9ITF9fSx7fV0sNDc6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciBhLG4scixzLGksbyxkLGwscCxjLHUsbSxfLGYsaCxnLHksYix4LHcsRSxDLEEsUyxrO2E9ZS5zdGF0ZSxuPWUubmV4dF9pbixTPWUuaW5wdXQscj1uKyhlLmF2YWlsX2luLTUpLHM9ZS5uZXh0X291dCxrPWUub3V0cHV0LGk9cy0odC1lLmF2YWlsX291dCksbz1zKyhlLmF2YWlsX291dC0yNTcpLGQ9YS5kbWF4LGw9YS53c2l6ZSxwPWEud2hhdmUsYz1hLnduZXh0LHU9YS53aW5kb3csbT1hLmhvbGQsXz1hLmJpdHMsZj1hLmxlbmNvZGUsaD1hLmRpc3Rjb2RlLGc9KDE8PGEubGVuYml0cyktMSx5PSgxPDxhLmRpc3RiaXRzKS0xO3RvcDpkb3sxNT5fJiYobSs9U1tuKytdPDxfLF8rPTgsbSs9U1tuKytdPDxfLF8rPTgpLGI9ZlttJmddO2RvbGVuOmZvcig7Oyl7aWYoeD1iPj4+MjQsbT4+Pj14LF8tPXgseD0yNTUmYj4+PjE2LDA9PT14KWtbcysrXT02NTUzNSZiO2Vsc2UgaWYoMTYmeCl7dz02NTUzNSZiLHgmPTE1LHgmJihfPHgmJihtKz1TW24rK108PF8sXys9OCksdys9bSYoMTw8eCktMSxtPj4+PXgsXy09eCksMTU+XyYmKG0rPVNbbisrXTw8XyxfKz04LG0rPVNbbisrXTw8XyxfKz04KSxiPWhbbSZ5XTtkb2Rpc3Q6Zm9yKDs7KXtpZih4PWI+Pj4yNCxtPj4+PXgsXy09eCx4PTI1NSZiPj4+MTYsMTYmeCl7aWYoRT02NTUzNSZiLHgmPTE1LF88eCYmKG0rPVNbbisrXTw8XyxfKz04LF88eCYmKG0rPVNbbisrXTw8XyxfKz04KSksRSs9bSYoMTw8eCktMSxFPmQpe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixhLm1vZGU9MzA7YnJlYWsgdG9wfWlmKG0+Pj49eCxfLT14LHg9cy1pLEU+eCl7aWYoeD1FLXgseD5wJiZhLnNhbmUpe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixhLm1vZGU9MzA7YnJlYWsgdG9wfWlmKEM9MCxBPXUsMD09PWMpe2lmKEMrPWwteCx4PHcpe3ctPXg7ZG8ga1tzKytdPXVbQysrXTt3aGlsZSgtLXgpO0M9cy1FLEE9a319ZWxzZSBpZihjPHgpe2lmKEMrPWwrYy14LHgtPWMseDx3KXt3LT14O2RvIGtbcysrXT11W0MrK107d2hpbGUoLS14KTtpZihDPTAsYzx3KXt4PWMsdy09eDtkbyBrW3MrK109dVtDKytdO3doaWxlKC0teCk7Qz1zLUUsQT1rfX19ZWxzZSBpZihDKz1jLXgseDx3KXt3LT14O2RvIGtbcysrXT11W0MrK107d2hpbGUoLS14KTtDPXMtRSxBPWt9Zm9yKDsyPHc7KWtbcysrXT1BW0MrK10sa1tzKytdPUFbQysrXSxrW3MrK109QVtDKytdLHctPTM7dyYmKGtbcysrXT1BW0MrK10sMTx3JiYoa1tzKytdPUFbQysrXSkpfWVsc2V7Qz1zLUU7ZG8ga1tzKytdPWtbQysrXSxrW3MrK109a1tDKytdLGtbcysrXT1rW0MrK10sdy09Mzt3aGlsZSgyPHcpO3cmJihrW3MrK109a1tDKytdLDE8dyYmKGtbcysrXT1rW0MrK10pKX19ZWxzZSBpZigwPT0oNjQmeCkpe2I9aFsoNjU1MzUmYikrKG0mKDE8PHgpLTEpXTtjb250aW51ZSBkb2Rpc3R9ZWxzZXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgY29kZVwiLGEubW9kZT0zMDticmVhayB0b3B9YnJlYWt9fWVsc2UgaWYoMD09KDY0JngpKXtiPWZbKDY1NTM1JmIpKyhtJigxPDx4KS0xKV07Y29udGludWUgZG9sZW59ZWxzZSBpZigzMiZ4KXthLm1vZGU9MTI7YnJlYWsgdG9wfWVsc2V7ZS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGVcIixhLm1vZGU9MzA7YnJlYWsgdG9wfWJyZWFrfX13aGlsZShuPHImJnM8byk7cmV0dXJuIHc9Xz4+MyxuLT13LF8tPXc8PDMsbSY9KDE8PF8pLTEsZS5uZXh0X2luPW4sZS5uZXh0X291dD1zLGUuYXZhaWxfaW49bjxyPzUrKHItbik6NS0obi1yKSxlLmF2YWlsX291dD1zPG8/MjU3KyhvLXMpOjI1Ny0ocy1vKSxhLmhvbGQ9bSx2b2lkKGEuYml0cz1fKX19LHt9XSw0ODpbZnVuY3Rpb24oZSx0LGEpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiByKGUpe3JldHVybigyNTUmZT4+PjI0KSsoNjUyODAmZT4+PjgpKygoNjUyODAmZSk8PDgpKygoMjU1JmUpPDwyNCl9ZnVuY3Rpb24gcygpe3RoaXMubW9kZT0wLHRoaXMubGFzdD0hMSx0aGlzLndyYXA9MCx0aGlzLmhhdmVkaWN0PSExLHRoaXMuZmxhZ3M9MCx0aGlzLmRtYXg9MCx0aGlzLmNoZWNrPTAsdGhpcy50b3RhbD0wLHRoaXMuaGVhZD1udWxsLHRoaXMud2JpdHM9MCx0aGlzLndzaXplPTAsdGhpcy53aGF2ZT0wLHRoaXMud25leHQ9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMuaG9sZD0wLHRoaXMuYml0cz0wLHRoaXMubGVuZ3RoPTAsdGhpcy5vZmZzZXQ9MCx0aGlzLmV4dHJhPTAsdGhpcy5sZW5jb2RlPW51bGwsdGhpcy5kaXN0Y29kZT1udWxsLHRoaXMubGVuYml0cz0wLHRoaXMuZGlzdGJpdHM9MCx0aGlzLm5jb2RlPTAsdGhpcy5ubGVuPTAsdGhpcy5uZGlzdD0wLHRoaXMuaGF2ZT0wLHRoaXMubmV4dD1udWxsLHRoaXMubGVucz1uZXcgbS5CdWYxNigzMjApLHRoaXMud29yaz1uZXcgbS5CdWYxNigyODgpLHRoaXMubGVuZHluPW51bGwsdGhpcy5kaXN0ZHluPW51bGwsdGhpcy5zYW5lPTAsdGhpcy5iYWNrPTAsdGhpcy53YXM9MH1mdW5jdGlvbiBpKGUpe3ZhciB0O3JldHVybiBlJiZlLnN0YXRlPyh0PWUuc3RhdGUsZS50b3RhbF9pbj1lLnRvdGFsX291dD10LnRvdGFsPTAsZS5tc2c9XCJcIix0LndyYXAmJihlLmFkbGVyPTEmdC53cmFwKSx0Lm1vZGU9MSx0Lmxhc3Q9MCx0LmhhdmVkaWN0PTAsdC5kbWF4PTMyNzY4LHQuaGVhZD1udWxsLHQuaG9sZD0wLHQuYml0cz0wLHQubGVuY29kZT10LmxlbmR5bj1uZXcgbS5CdWYzMig4NTIpLHQuZGlzdGNvZGU9dC5kaXN0ZHluPW5ldyBtLkJ1ZjMyKDU5MiksdC5zYW5lPTEsdC5iYWNrPS0xLDApOi0yfWZ1bmN0aW9uIG8oZSl7dmFyIHQ7cmV0dXJuIGUmJmUuc3RhdGU/KHQ9ZS5zdGF0ZSx0LndzaXplPTAsdC53aGF2ZT0wLHQud25leHQ9MCxpKGUpKTotMn1mdW5jdGlvbiBsKGUsdCl7dmFyIGEsbjtyZXR1cm4gZSYmZS5zdGF0ZT8obj1lLnN0YXRlLDA+dD8oYT0wLHQ9LXQpOihhPSh0Pj40KSsxLDQ4PnQmJih0Jj0xNSkpLHQmJig4PnR8fDE1PHQpKT8tMjoobnVsbCE9PW4ud2luZG93JiZuLndiaXRzIT09dCYmKG4ud2luZG93PW51bGwpLG4ud3JhcD1hLG4ud2JpdHM9dCxvKGUpKTotMn1mdW5jdGlvbiBwKGUsdCl7dmFyIGEsbjtyZXR1cm4gZT8obj1uZXcgcyxlLnN0YXRlPW4sbi53aW5kb3c9bnVsbCxhPWwoZSx0KSwwIT09YSYmKGUuc3RhdGU9bnVsbCksYSk6LTJ9ZnVuY3Rpb24gYyhlKXtpZih5KXt2YXIgdDtmb3IoYj1uZXcgbS5CdWYzMig1MTIpLHg9bmV3IG0uQnVmMzIoMzIpLHQ9MDsxNDQ+dDspZS5sZW5zW3QrK109ODtmb3IoOzI1Nj50OyllLmxlbnNbdCsrXT05O2Zvcig7MjgwPnQ7KWUubGVuc1t0KytdPTc7Zm9yKDsyODg+dDspZS5sZW5zW3QrK109ODtmb3IoZygxLGUubGVucywwLDI4OCxiLDAsZS53b3JrLHtiaXRzOjl9KSx0PTA7MzI+dDspZS5sZW5zW3QrK109NTtnKDIsZS5sZW5zLDAsMzIseCwwLGUud29yayx7Yml0czo1fSkseT0hMX1lLmxlbmNvZGU9YixlLmxlbmJpdHM9OSxlLmRpc3Rjb2RlPXgsZS5kaXN0Yml0cz01fWZ1bmN0aW9uIHUoZSx0LGEsbil7dmFyIHI9ZS5zdGF0ZSxzO3JldHVybiBudWxsPT09ci53aW5kb3cmJihyLndzaXplPTE8PHIud2JpdHMsci53bmV4dD0wLHIud2hhdmU9MCxyLndpbmRvdz1uZXcgbS5CdWY4KHIud3NpemUpKSxuPj1yLndzaXplPyhtLmFycmF5U2V0KHIud2luZG93LHQsYS1yLndzaXplLHIud3NpemUsMCksci53bmV4dD0wLHIud2hhdmU9ci53c2l6ZSk6KHM9ci53c2l6ZS1yLnduZXh0LHM+biYmKHM9biksbS5hcnJheVNldChyLndpbmRvdyx0LGEtbixzLHIud25leHQpLG4tPXMsbj8obS5hcnJheVNldChyLndpbmRvdyx0LGEtbixuLDApLHIud25leHQ9bixyLndoYXZlPXIud3NpemUpOihyLnduZXh0Kz1zLHIud25leHQ9PT1yLndzaXplJiYoci53bmV4dD0wKSxyLndoYXZlPHIud3NpemUmJihyLndoYXZlKz1zKSkpLDB9dmFyIG09ZShcIi4uL3V0aWxzL2NvbW1vblwiKSxfPWUoXCIuL2FkbGVyMzJcIiksZj1lKFwiLi9jcmMzMlwiKSxoPWUoXCIuL2luZmZhc3RcIiksZz1lKFwiLi9pbmZ0cmVlc1wiKSx5PSEwLGIseDthLmluZmxhdGVSZXNldD1vLGEuaW5mbGF0ZVJlc2V0Mj1sLGEuaW5mbGF0ZVJlc2V0S2VlcD1pLGEuaW5mbGF0ZUluaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHAoZSwxNSl9LGEuaW5mbGF0ZUluaXQyPXAsYS5pbmZsYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIGE9MCxzPW5ldyBtLkJ1ZjgoNCksaT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0sbyxsLHAseSxiLHgsdyxFLEMsQSxTLGssdixJLFIsTyx6LEwsVCxCLFAsTixELGo7aWYoIWV8fCFlLnN0YXRlfHwhZS5vdXRwdXR8fCFlLmlucHV0JiYwIT09ZS5hdmFpbF9pbilyZXR1cm4tMjtvPWUuc3RhdGUsMTI9PT1vLm1vZGUmJihvLm1vZGU9MTMpLGI9ZS5uZXh0X291dCxwPWUub3V0cHV0LHc9ZS5hdmFpbF9vdXQseT1lLm5leHRfaW4sbD1lLmlucHV0LHg9ZS5hdmFpbF9pbixFPW8uaG9sZCxDPW8uYml0cyxBPXgsUz13LE49MDtpbmZfbGVhdmU6Zm9yKDs7KXN3aXRjaChvLm1vZGUpe2Nhc2UgMTppZigwPT09by53cmFwKXtvLm1vZGU9MTM7YnJlYWt9Zm9yKDsxNj5DOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1pZigyJm8ud3JhcCYmMzU2MTU9PT1FKXtvLmNoZWNrPTAsc1swXT0yNTUmRSxzWzFdPTI1NSZFPj4+OCxvLmNoZWNrPWYoby5jaGVjayxzLDIsMCksRT0wLEM9MCxvLm1vZGU9MjticmVha31pZihvLmZsYWdzPTAsby5oZWFkJiYoby5oZWFkLmRvbmU9ITEpLCEoMSZvLndyYXApfHwoKCgyNTUmRSk8PDgpKyhFPj44KSklMzEpe2UubXNnPVwiaW5jb3JyZWN0IGhlYWRlciBjaGVja1wiLG8ubW9kZT0zMDticmVha31pZig4IT09KDE1JkUpKXtlLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIsby5tb2RlPTMwO2JyZWFrfWlmKEU+Pj49NCxDLT00LFA9KDE1JkUpKzgsMD09PW8ud2JpdHMpby53Yml0cz1QO2Vsc2UgaWYoUD5vLndiaXRzKXtlLm1zZz1cImludmFsaWQgd2luZG93IHNpemVcIixvLm1vZGU9MzA7YnJlYWt9by5kbWF4PTE8PFAsZS5hZGxlcj1vLmNoZWNrPTEsby5tb2RlPTUxMiZFPzEwOjEyLEU9MCxDPTA7YnJlYWs7Y2FzZSAyOmZvcig7MTY+Qzspe2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTt4LS0sRSs9bFt5KytdPDxDLEMrPTh9aWYoby5mbGFncz1FLDghPT0oMjU1Jm8uZmxhZ3MpKXtlLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIsby5tb2RlPTMwO2JyZWFrfWlmKDU3MzQ0Jm8uZmxhZ3Mpe2UubXNnPVwidW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0XCIsby5tb2RlPTMwO2JyZWFrfW8uaGVhZCYmKG8uaGVhZC50ZXh0PTEmRT4+OCksNTEyJm8uZmxhZ3MmJihzWzBdPTI1NSZFLHNbMV09MjU1JkU+Pj44LG8uY2hlY2s9ZihvLmNoZWNrLHMsMiwwKSksRT0wLEM9MCxvLm1vZGU9MztjYXNlIDM6Zm9yKDszMj5DOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1vLmhlYWQmJihvLmhlYWQudGltZT1FKSw1MTImby5mbGFncyYmKHNbMF09MjU1JkUsc1sxXT0yNTUmRT4+Pjgsc1syXT0yNTUmRT4+PjE2LHNbM109MjU1JkU+Pj4yNCxvLmNoZWNrPWYoby5jaGVjayxzLDQsMCkpLEU9MCxDPTAsby5tb2RlPTQ7Y2FzZSA0OmZvcig7MTY+Qzspe2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTt4LS0sRSs9bFt5KytdPDxDLEMrPTh9by5oZWFkJiYoby5oZWFkLnhmbGFncz0yNTUmRSxvLmhlYWQub3M9RT4+OCksNTEyJm8uZmxhZ3MmJihzWzBdPTI1NSZFLHNbMV09MjU1JkU+Pj44LG8uY2hlY2s9ZihvLmNoZWNrLHMsMiwwKSksRT0wLEM9MCxvLm1vZGU9NTtjYXNlIDU6aWYoMTAyNCZvLmZsYWdzKXtmb3IoOzE2PkM7KXtpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEUrPWxbeSsrXTw8QyxDKz04fW8ubGVuZ3RoPUUsby5oZWFkJiYoby5oZWFkLmV4dHJhX2xlbj1FKSw1MTImby5mbGFncyYmKHNbMF09MjU1JkUsc1sxXT0yNTUmRT4+Pjgsby5jaGVjaz1mKG8uY2hlY2sscywyLDApKSxFPTAsQz0wfWVsc2Ugby5oZWFkJiYoby5oZWFkLmV4dHJhPW51bGwpO28ubW9kZT02O2Nhc2UgNjppZigxMDI0Jm8uZmxhZ3MmJihrPW8ubGVuZ3RoLGs+eCYmKGs9eCksayYmKG8uaGVhZCYmKFA9by5oZWFkLmV4dHJhX2xlbi1vLmxlbmd0aCwhby5oZWFkLmV4dHJhJiYoby5oZWFkLmV4dHJhPUFycmF5KG8uaGVhZC5leHRyYV9sZW4pKSxtLmFycmF5U2V0KG8uaGVhZC5leHRyYSxsLHksayxQKSksNTEyJm8uZmxhZ3MmJihvLmNoZWNrPWYoby5jaGVjayxsLGsseSkpLHgtPWsseSs9ayxvLmxlbmd0aC09ayksby5sZW5ndGgpKWJyZWFrIGluZl9sZWF2ZTtvLmxlbmd0aD0wLG8ubW9kZT03O2Nhc2UgNzppZigyMDQ4Jm8uZmxhZ3Mpe2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTtrPTA7ZG8gUD1sW3kraysrXSxvLmhlYWQmJlAmJjY1NTM2Pm8ubGVuZ3RoJiYoby5oZWFkLm5hbWUrPWQoUCkpO3doaWxlKFAmJms8eCk7aWYoNTEyJm8uZmxhZ3MmJihvLmNoZWNrPWYoby5jaGVjayxsLGsseSkpLHgtPWsseSs9ayxQKWJyZWFrIGluZl9sZWF2ZX1lbHNlIG8uaGVhZCYmKG8uaGVhZC5uYW1lPW51bGwpO28ubGVuZ3RoPTAsby5tb2RlPTg7Y2FzZSA4OmlmKDQwOTYmby5mbGFncyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO2s9MDtkbyBQPWxbeStrKytdLG8uaGVhZCYmUCYmNjU1MzY+by5sZW5ndGgmJihvLmhlYWQuY29tbWVudCs9ZChQKSk7d2hpbGUoUCYmazx4KTtpZig1MTImby5mbGFncyYmKG8uY2hlY2s9ZihvLmNoZWNrLGwsayx5KSkseC09ayx5Kz1rLFApYnJlYWsgaW5mX2xlYXZlfWVsc2Ugby5oZWFkJiYoby5oZWFkLmNvbW1lbnQ9bnVsbCk7by5tb2RlPTk7Y2FzZSA5OmlmKDUxMiZvLmZsYWdzKXtmb3IoOzE2PkM7KXtpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEUrPWxbeSsrXTw8QyxDKz04fWlmKEUhPT0oNjU1MzUmby5jaGVjaykpe2UubXNnPVwiaGVhZGVyIGNyYyBtaXNtYXRjaFwiLG8ubW9kZT0zMDticmVha31FPTAsQz0wfW8uaGVhZCYmKG8uaGVhZC5oY3JjPTEmby5mbGFncz4+OSxvLmhlYWQuZG9uZT0hMCksZS5hZGxlcj1vLmNoZWNrPTAsby5tb2RlPTEyO2JyZWFrO2Nhc2UgMTA6Zm9yKDszMj5DOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1lLmFkbGVyPW8uY2hlY2s9cihFKSxFPTAsQz0wLG8ubW9kZT0xMTtjYXNlIDExOmlmKDA9PT1vLmhhdmVkaWN0KXJldHVybiBlLm5leHRfb3V0PWIsZS5hdmFpbF9vdXQ9dyxlLm5leHRfaW49eSxlLmF2YWlsX2luPXgsby5ob2xkPUUsby5iaXRzPUMsMjtlLmFkbGVyPW8uY2hlY2s9MSxvLm1vZGU9MTI7Y2FzZSAxMjppZig1PT09dHx8Nj09PXQpYnJlYWsgaW5mX2xlYXZlO2Nhc2UgMTM6aWYoby5sYXN0KXtFPj4+PTcmQyxDLT03JkMsby5tb2RlPTI3O2JyZWFrfWZvcig7Mz5DOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1zd2l0Y2goby5sYXN0PTEmRSxFPj4+PTEsQy09MSwzJkUpe2Nhc2UgMDpvLm1vZGU9MTQ7YnJlYWs7Y2FzZSAxOmlmKGMobyksby5tb2RlPTIwLDY9PT10KXtFPj4+PTIsQy09MjticmVhayBpbmZfbGVhdmV9YnJlYWs7Y2FzZSAyOm8ubW9kZT0xNzticmVhaztjYXNlIDM6ZS5tc2c9XCJpbnZhbGlkIGJsb2NrIHR5cGVcIixvLm1vZGU9MzA7fUU+Pj49MixDLT0yO2JyZWFrO2Nhc2UgMTQ6Zm9yKEU+Pj49NyZDLEMtPTcmQzszMj5DOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1pZigoNjU1MzUmRSkhPSg2NTUzNV5FPj4+MTYpKXtlLm1zZz1cImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHNcIixvLm1vZGU9MzA7YnJlYWt9aWYoby5sZW5ndGg9NjU1MzUmRSxFPTAsQz0wLG8ubW9kZT0xNSw2PT09dClicmVhayBpbmZfbGVhdmU7Y2FzZSAxNTpvLm1vZGU9MTY7Y2FzZSAxNjppZihrPW8ubGVuZ3RoLGspe2lmKGs+eCYmKGs9eCksaz53JiYoaz13KSwwPT09aylicmVhayBpbmZfbGVhdmU7bS5hcnJheVNldChwLGwseSxrLGIpLHgtPWsseSs9ayx3LT1rLGIrPWssby5sZW5ndGgtPWs7YnJlYWt9by5tb2RlPTEyO2JyZWFrO2Nhc2UgMTc6Zm9yKDsxND5DOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1pZihvLm5sZW49KDMxJkUpKzI1NyxFPj4+PTUsQy09NSxvLm5kaXN0PSgzMSZFKSsxLEU+Pj49NSxDLT01LG8ubmNvZGU9KDE1JkUpKzQsRT4+Pj00LEMtPTQsMjg2PG8ubmxlbnx8MzA8by5uZGlzdCl7ZS5tc2c9XCJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9sc1wiLG8ubW9kZT0zMDticmVha31vLmhhdmU9MCxvLm1vZGU9MTg7Y2FzZSAxODpmb3IoO28uaGF2ZTxvLm5jb2RlOyl7Zm9yKDszPkM7KXtpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEUrPWxbeSsrXTw8QyxDKz04fW8ubGVuc1tpW28uaGF2ZSsrXV09NyZFLEU+Pj49MyxDLT0zfWZvcig7MTk+by5oYXZlOylvLmxlbnNbaVtvLmhhdmUrK11dPTA7aWYoby5sZW5jb2RlPW8ubGVuZHluLG8ubGVuYml0cz03LEQ9e2JpdHM6by5sZW5iaXRzfSxOPWcoMCxvLmxlbnMsMCwxOSxvLmxlbmNvZGUsMCxvLndvcmssRCksby5sZW5iaXRzPUQuYml0cyxOKXtlLm1zZz1cImludmFsaWQgY29kZSBsZW5ndGhzIHNldFwiLG8ubW9kZT0zMDticmVha31vLmhhdmU9MCxvLm1vZGU9MTk7Y2FzZSAxOTpmb3IoO28uaGF2ZTxvLm5sZW4rby5uZGlzdDspe2Zvcig7Oyl7aWYoYT1vLmxlbmNvZGVbRSYoMTw8by5sZW5iaXRzKS0xXSxSPWE+Pj4yNCxPPTI1NSZhPj4+MTYsej02NTUzNSZhLFI8PUMpYnJlYWs7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1pZigxNj56KUU+Pj49UixDLT1SLG8ubGVuc1tvLmhhdmUrK109ejtlbHNle2lmKDE2PT09eil7Zm9yKGo9UisyO0M8ajspe2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTt4LS0sRSs9bFt5KytdPDxDLEMrPTh9aWYoRT4+Pj1SLEMtPVIsMD09PW8uaGF2ZSl7ZS5tc2c9XCJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0XCIsby5tb2RlPTMwO2JyZWFrfVA9by5sZW5zW28uaGF2ZS0xXSxrPTMrKDMmRSksRT4+Pj0yLEMtPTJ9ZWxzZSBpZigxNz09PXope2ZvcihqPVIrMztDPGo7KXtpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEUrPWxbeSsrXTw8QyxDKz04fUU+Pj49UixDLT1SLFA9MCxrPTMrKDcmRSksRT4+Pj0zLEMtPTN9ZWxzZXtmb3Ioaj1SKzc7QzxqOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1FPj4+PVIsQy09UixQPTAsaz0xMSsoMTI3JkUpLEU+Pj49NyxDLT03fWlmKG8uaGF2ZStrPm8ubmxlbitvLm5kaXN0KXtlLm1zZz1cImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIixvLm1vZGU9MzA7YnJlYWt9Zm9yKDtrLS07KW8ubGVuc1tvLmhhdmUrK109UH19aWYoMzA9PT1vLm1vZGUpYnJlYWs7aWYoMD09PW8ubGVuc1syNTZdKXtlLm1zZz1cImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9ja1wiLG8ubW9kZT0zMDticmVha31pZihvLmxlbmJpdHM9OSxEPXtiaXRzOm8ubGVuYml0c30sTj1nKDEsby5sZW5zLDAsby5ubGVuLG8ubGVuY29kZSwwLG8ud29yayxEKSxvLmxlbmJpdHM9RC5iaXRzLE4pe2UubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0XCIsby5tb2RlPTMwO2JyZWFrfWlmKG8uZGlzdGJpdHM9NixvLmRpc3Rjb2RlPW8uZGlzdGR5bixEPXtiaXRzOm8uZGlzdGJpdHN9LE49ZygyLG8ubGVucyxvLm5sZW4sby5uZGlzdCxvLmRpc3Rjb2RlLDAsby53b3JrLEQpLG8uZGlzdGJpdHM9RC5iaXRzLE4pe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZXMgc2V0XCIsby5tb2RlPTMwO2JyZWFrfWlmKG8ubW9kZT0yMCw2PT09dClicmVhayBpbmZfbGVhdmU7Y2FzZSAyMDpvLm1vZGU9MjE7Y2FzZSAyMTppZig2PD14JiYyNTg8PXcpe2UubmV4dF9vdXQ9YixlLmF2YWlsX291dD13LGUubmV4dF9pbj15LGUuYXZhaWxfaW49eCxvLmhvbGQ9RSxvLmJpdHM9QyxoKGUsUyksYj1lLm5leHRfb3V0LHA9ZS5vdXRwdXQsdz1lLmF2YWlsX291dCx5PWUubmV4dF9pbixsPWUuaW5wdXQseD1lLmF2YWlsX2luLEU9by5ob2xkLEM9by5iaXRzLDEyPT09by5tb2RlJiYoby5iYWNrPS0xKTticmVha31mb3Ioby5iYWNrPTA7Oyl7aWYoYT1vLmxlbmNvZGVbRSYoMTw8by5sZW5iaXRzKS0xXSxSPWE+Pj4yNCxPPTI1NSZhPj4+MTYsej02NTUzNSZhLFI8PUMpYnJlYWs7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1pZihPJiYwPT0oMjQwJk8pKXtmb3IoTD1SLFQ9TyxCPXo7Oyl7aWYoYT1vLmxlbmNvZGVbQisoKEUmKDE8PEwrVCktMSk+PkwpXSxSPWE+Pj4yNCxPPTI1NSZhPj4+MTYsej02NTUzNSZhLEwrUjw9QylicmVhaztpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEUrPWxbeSsrXTw8QyxDKz04fUU+Pj49TCxDLT1MLG8uYmFjays9TH1pZihFPj4+PVIsQy09UixvLmJhY2srPVIsby5sZW5ndGg9eiwwPT09Tyl7by5tb2RlPTI2O2JyZWFrfWlmKDMyJk8pe28uYmFjaz0tMSxvLm1vZGU9MTI7YnJlYWt9aWYoNjQmTyl7ZS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGVcIixvLm1vZGU9MzA7YnJlYWt9by5leHRyYT0xNSZPLG8ubW9kZT0yMjtjYXNlIDIyOmlmKG8uZXh0cmEpe2ZvcihqPW8uZXh0cmE7QzxqOyl7aWYoMD09PXgpYnJlYWsgaW5mX2xlYXZlO3gtLSxFKz1sW3krK108PEMsQys9OH1vLmxlbmd0aCs9RSYoMTw8by5leHRyYSktMSxFPj4+PW8uZXh0cmEsQy09by5leHRyYSxvLmJhY2srPW8uZXh0cmF9by53YXM9by5sZW5ndGgsby5tb2RlPTIzO2Nhc2UgMjM6Zm9yKDs7KXtpZihhPW8uZGlzdGNvZGVbRSYoMTw8by5kaXN0Yml0cyktMV0sUj1hPj4+MjQsTz0yNTUmYT4+PjE2LHo9NjU1MzUmYSxSPD1DKWJyZWFrO2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTt4LS0sRSs9bFt5KytdPDxDLEMrPTh9aWYoMD09KDI0MCZPKSl7Zm9yKEw9UixUPU8sQj16Ozspe2lmKGE9by5kaXN0Y29kZVtCKygoRSYoMTw8TCtUKS0xKT4+TCldLFI9YT4+PjI0LE89MjU1JmE+Pj4xNix6PTY1NTM1JmEsTCtSPD1DKWJyZWFrO2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTt4LS0sRSs9bFt5KytdPDxDLEMrPTh9RT4+Pj1MLEMtPUwsby5iYWNrKz1MfWlmKEU+Pj49UixDLT1SLG8uYmFjays9Uiw2NCZPKXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgY29kZVwiLG8ubW9kZT0zMDticmVha31vLm9mZnNldD16LG8uZXh0cmE9MTUmTyxvLm1vZGU9MjQ7Y2FzZSAyNDppZihvLmV4dHJhKXtmb3Ioaj1vLmV4dHJhO0M8ajspe2lmKDA9PT14KWJyZWFrIGluZl9sZWF2ZTt4LS0sRSs9bFt5KytdPDxDLEMrPTh9by5vZmZzZXQrPUUmKDE8PG8uZXh0cmEpLTEsRT4+Pj1vLmV4dHJhLEMtPW8uZXh0cmEsby5iYWNrKz1vLmV4dHJhfWlmKG8ub2Zmc2V0Pm8uZG1heCl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLG8ubW9kZT0zMDticmVha31vLm1vZGU9MjU7Y2FzZSAyNTppZigwPT09dylicmVhayBpbmZfbGVhdmU7aWYoaz1TLXcsby5vZmZzZXQ+ayl7aWYoaz1vLm9mZnNldC1rLGs+by53aGF2ZSYmby5zYW5lKXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsby5tb2RlPTMwO2JyZWFrfWs+by53bmV4dD8oay09by53bmV4dCx2PW8ud3NpemUtayk6dj1vLnduZXh0LWssaz5vLmxlbmd0aCYmKGs9by5sZW5ndGgpLEk9by53aW5kb3d9ZWxzZSBJPXAsdj1iLW8ub2Zmc2V0LGs9by5sZW5ndGg7az53JiYoaz13KSx3LT1rLG8ubGVuZ3RoLT1rO2RvIHBbYisrXT1JW3YrK107d2hpbGUoLS1rKTswPT09by5sZW5ndGgmJihvLm1vZGU9MjEpO2JyZWFrO2Nhc2UgMjY6aWYoMD09PXcpYnJlYWsgaW5mX2xlYXZlO3BbYisrXT1vLmxlbmd0aCx3LS0sby5tb2RlPTIxO2JyZWFrO2Nhc2UgMjc6aWYoby53cmFwKXtmb3IoOzMyPkM7KXtpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEV8PWxbeSsrXTw8QyxDKz04fWlmKFMtPXcsZS50b3RhbF9vdXQrPVMsby50b3RhbCs9UyxTJiYoZS5hZGxlcj1vLmNoZWNrPW8uZmxhZ3M/ZihvLmNoZWNrLHAsUyxiLVMpOl8oby5jaGVjayxwLFMsYi1TKSksUz13LChvLmZsYWdzP0U6cihFKSkhPT1vLmNoZWNrKXtlLm1zZz1cImluY29ycmVjdCBkYXRhIGNoZWNrXCIsby5tb2RlPTMwO2JyZWFrfUU9MCxDPTB9by5tb2RlPTI4O2Nhc2UgMjg6aWYoby53cmFwJiZvLmZsYWdzKXtmb3IoOzMyPkM7KXtpZigwPT09eClicmVhayBpbmZfbGVhdmU7eC0tLEUrPWxbeSsrXTw8QyxDKz04fWlmKEUhPT0oNDI5NDk2NzI5NSZvLnRvdGFsKSl7ZS5tc2c9XCJpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrXCIsby5tb2RlPTMwO2JyZWFrfUU9MCxDPTB9by5tb2RlPTI5O2Nhc2UgMjk6Tj0xO2JyZWFrIGluZl9sZWF2ZTtjYXNlIDMwOk49LTM7YnJlYWsgaW5mX2xlYXZlO2Nhc2UgMzE6cmV0dXJuLTQ7Y2FzZSAzMjpkZWZhdWx0OnJldHVybi0yO31yZXR1cm4oZS5uZXh0X291dD1iLGUuYXZhaWxfb3V0PXcsZS5uZXh0X2luPXksZS5hdmFpbF9pbj14LG8uaG9sZD1FLG8uYml0cz1DLChvLndzaXplfHxTIT09ZS5hdmFpbF9vdXQmJjMwPm8ubW9kZSYmKDI3Pm8ubW9kZXx8NCE9PXQpKSYmdShlLGUub3V0cHV0LGUubmV4dF9vdXQsUy1lLmF2YWlsX291dCkpPyhvLm1vZGU9MzEsLTQpOihBLT1lLmF2YWlsX2luLFMtPWUuYXZhaWxfb3V0LGUudG90YWxfaW4rPUEsZS50b3RhbF9vdXQrPVMsby50b3RhbCs9UyxvLndyYXAmJlMmJihlLmFkbGVyPW8uY2hlY2s9by5mbGFncz9mKG8uY2hlY2sscCxTLGUubmV4dF9vdXQtUyk6XyhvLmNoZWNrLHAsUyxlLm5leHRfb3V0LVMpKSxlLmRhdGFfdHlwZT1vLmJpdHMrKG8ubGFzdD82NDowKSsoMTI9PT1vLm1vZGU/MTI4OjApKygyMD09PW8ubW9kZXx8MTU9PT1vLm1vZGU/MjU2OjApLCgwPT09QSYmMD09PVN8fDQ9PT10KSYmMD09PU4mJihOPS01KSxOKX0sYS5pbmZsYXRlRW5kPWZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4tMjt2YXIgdD1lLnN0YXRlO3JldHVybiB0LndpbmRvdyYmKHQud2luZG93PW51bGwpLGUuc3RhdGU9bnVsbCwwfSxhLmluZmxhdGVHZXRIZWFkZXI9ZnVuY3Rpb24oZSx0KXt2YXIgYTtyZXR1cm4gZSYmZS5zdGF0ZT8oYT1lLnN0YXRlLDA9PSgyJmEud3JhcCkpPy0yOihhLmhlYWQ9dCx0LmRvbmU9ITEsMCk6LTJ9LGEuaW5mbGF0ZVNldERpY3Rpb25hcnk9ZnVuY3Rpb24oZSx0KXt2YXIgYT10Lmxlbmd0aCxuLHIscztyZXR1cm4gZSYmZS5zdGF0ZT8obj1lLnN0YXRlLDAhPT1uLndyYXAmJjExIT09bi5tb2RlKT8tMjoxMT09PW4ubW9kZSYmKHI9MSxyPV8ocix0LGEsMCksciE9PW4uY2hlY2spPy0zOihzPXUoZSx0LGEsYSkscyk/KG4ubW9kZT0zMSwtNCk6KG4uaGF2ZWRpY3Q9MSwwKTotMn0sYS5pbmZsYXRlSW5mbz1cInBha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6NDAsXCIuL2FkbGVyMzJcIjo0MixcIi4vY3JjMzJcIjo0NCxcIi4vaW5mZmFzdFwiOjQ3LFwiLi9pbmZ0cmVlc1wiOjQ5fV0sNDk6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO3ZhciBhPWUoXCIuLi91dGlscy9jb21tb25cIiksbj0xNSxyPTg1MixzPTU5MixpPTAsbz0xLGQ9MixsPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDAsMF0scD1bMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTcsMTcsMTcsMTcsMTgsMTgsMTgsMTgsMTksMTksMTksMTksMjAsMjAsMjAsMjAsMjEsMjEsMjEsMjEsMTYsNzIsNzhdLGM9WzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3NywwLDBdLHU9WzE2LDE2LDE2LDE2LDE3LDE3LDE4LDE4LDE5LDE5LDIwLDIwLDIxLDIxLDIyLDIyLDIzLDIzLDI0LDI0LDI1LDI1LDI2LDI2LDI3LDI3LDI4LDI4LDI5LDI5LDY0LDY0XTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG0sXyxmLGgsZyx5KXt2YXIgYj15LmJpdHMseD0wLHc9MCxFPTAsQz0wLEE9MCxTPTAsaz0wLHY9MCxJPTAsUj0wLE89bnVsbCx6PTAsTD1uZXcgYS5CdWYxNihuKzEpLFQ9bmV3IGEuQnVmMTYobisxKSxCPW51bGwsUD0wLE4sRCxqLFUsRixNLEcsWixZO2Zvcih4PTA7eDw9bjt4KyspTFt4XT0wO2Zvcih3PTA7dzxfO3crKylMW3RbbSt3XV0rKztmb3IoQT1iLEM9bjsxPD1DJiYwPT09TFtDXTtDLS0pO2lmKEE+QyYmKEE9QyksMD09PUMpcmV0dXJuIGZbaCsrXT0yMDk3MTUyMCxmW2grK109MjA5NzE1MjAseS5iaXRzPTEsMDtmb3IoRT0xO0U8QyYmMD09PUxbRV07RSsrKTtmb3IoQTxFJiYoQT1FKSx2PTEseD0xO3g8PW47eCsrKWlmKHY8PD0xLHYtPUxbeF0sMD52KXJldHVybi0xO2lmKDA8diYmKGU9PT1pfHwxIT09QykpcmV0dXJuLTE7Zm9yKFRbMV09MCx4PTE7eDxuO3grKylUW3grMV09VFt4XStMW3hdO2Zvcih3PTA7dzxfO3crKykwIT09dFttK3ddJiYoZ1tUW3RbbSt3XV0rK109dyk7aWYoZT09PWk/KE89Qj1nLE09MTkpOmU9PT1vPyhPPWwsei09MjU3LEI9cCxQLT0yNTcsTT0yNTYpOihPPWMsQj11LE09LTEpLFI9MCx3PTAseD1FLEY9aCxTPUEsaz0wLGo9LTEsST0xPDxBLFU9SS0xLGU9PT1vJiZJPnJ8fGU9PT1kJiZJPnMpcmV0dXJuIDE7Zm9yKDs7KXtHPXgtayxnW3ddPE0/KFo9MCxZPWdbd10pOmdbd10+TT8oWj1CW1ArZ1t3XV0sWT1PW3orZ1t3XV0pOihaPTk2LFk9MCksTj0xPDx4LWssRD0xPDxTLEU9RDtkbyBELT1OLGZbRisoUj4+aykrRF09MHwoRzw8MjR8Wjw8MTZ8WSk7d2hpbGUoMCE9PUQpO2ZvcihOPTE8PHgtMTtSJk47KU4+Pj0xO2lmKDA9PT1OP1I9MDooUiY9Ti0xLFIrPU4pLHcrKywwPT0tLUxbeF0pe2lmKHg9PT1DKWJyZWFrO3g9dFttK2dbd11dfWlmKHg+QSYmKFImVSkhPT1qKXtmb3IoMD09PWsmJihrPUEpLEYrPUUsUz14LWssdj0xPDxTO1MrazxDJiYodi09TFtTK2tdLCEoMD49dikpOylTKyssdjw8PTE7aWYoSSs9MTw8UyxlPT09byYmST5yfHxlPT09ZCYmST5zKXJldHVybiAxO2o9UiZVLGZbal09MHwoQTw8MjR8Uzw8MTZ8Ri1oKX19cmV0dXJuIDAhPT1SJiYoZltGK1JdPTB8KDQxOTQzMDR8eC1rPDwyNCkpLHkuYml0cz1BLDB9fSx7XCIuLi91dGlscy9jb21tb25cIjo0MH1dLDUwOltmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt0LmV4cG9ydHM9ezI6XCJuZWVkIGRpY3Rpb25hcnlcIiwxOlwic3RyZWFtIGVuZFwiLDA6XCJcIixcIi0xXCI6XCJmaWxlIGVycm9yXCIsXCItMlwiOlwic3RyZWFtIGVycm9yXCIsXCItM1wiOlwiZGF0YSBlcnJvclwiLFwiLTRcIjpcImluc3VmZmljaWVudCBtZW1vcnlcIixcIi01XCI6XCJidWZmZXIgZXJyb3JcIixcIi02XCI6XCJpbmNvbXBhdGlibGUgdmVyc2lvblwifX0se31dLDUxOltmdW5jdGlvbihlLHQsYSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIG4oZSl7Zm9yKHZhciB0PWUubGVuZ3RoOzA8PS0tdDspZVt0XT0wfWZ1bmN0aW9uIHIoZSx0LGEsbixyKXt0aGlzLnN0YXRpY190cmVlPWUsdGhpcy5leHRyYV9iaXRzPXQsdGhpcy5leHRyYV9iYXNlPWEsdGhpcy5lbGVtcz1uLHRoaXMubWF4X2xlbmd0aD1yLHRoaXMuaGFzX3N0cmVlPWUmJmUubGVuZ3RofWZ1bmN0aW9uIGkoZSx0KXt0aGlzLmR5bl90cmVlPWUsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPXR9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gMjU2PmU/TVtlXTpNWzI1NisoZT4+PjcpXX1mdW5jdGlvbiBkKGUsdCl7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109MjU1JnQsZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109MjU1JnQ+Pj44fWZ1bmN0aW9uIGwoZSx0LGEpe2UuYmlfdmFsaWQ+MTYtYT8oZS5iaV9idWZ8PTY1NTM1JnQ8PGUuYmlfdmFsaWQsZChlLGUuYmlfYnVmKSxlLmJpX2J1Zj10Pj4xNi1lLmJpX3ZhbGlkLGUuYmlfdmFsaWQrPWEtMTYpOihlLmJpX2J1Znw9NjU1MzUmdDw8ZS5iaV92YWxpZCxlLmJpX3ZhbGlkKz1hKX1mdW5jdGlvbiBwKGUsdCxhKXtsKGUsYVsyKnRdLGFbMip0KzFdKX1mdW5jdGlvbiBjKGUsdCl7dmFyIGE9MDtkbyBhfD0xJmUsZT4+Pj0xLGE8PD0xO3doaWxlKDA8LS10KTtyZXR1cm4gYT4+PjF9ZnVuY3Rpb24gdShlKXsxNj09PWUuYmlfdmFsaWQ/KGQoZSxlLmJpX2J1ZiksZS5iaV9idWY9MCxlLmJpX3ZhbGlkPTApOjg8PWUuYmlfdmFsaWQmJihlLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXT0yNTUmZS5iaV9idWYsZS5iaV9idWY+Pj04LGUuYmlfdmFsaWQtPTgpfWZ1bmN0aW9uIF8oZSx0KXt2YXIgYT10LmR5bl90cmVlLHI9dC5tYXhfY29kZSxzPXQuc3RhdF9kZXNjLnN0YXRpY190cmVlLGk9dC5zdGF0X2Rlc2MuaGFzX3N0cmVlLG89dC5zdGF0X2Rlc2MuZXh0cmFfYml0cyxkPXQuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsbD10LnN0YXRfZGVzYy5tYXhfbGVuZ3RoLHA9MCxjLHUsXyxnLHksYjtmb3IoZz0wO2c8PTE1O2crKyllLmJsX2NvdW50W2ddPTA7Zm9yKGFbMiplLmhlYXBbZS5oZWFwX21heF0rMV09MCxjPWUuaGVhcF9tYXgrMTs1NzM+YztjKyspKHU9ZS5oZWFwW2NdLGc9YVsyKmFbMip1KzFdKzFdKzEsZz5sJiYoZz1sLHArKyksYVsyKnUrMV09ZywhKHU+cikpJiYoZS5ibF9jb3VudFtnXSsrLHk9MCx1Pj1kJiYoeT1vW3UtZF0pLGI9YVsyKnVdLGUub3B0X2xlbis9YiooZyt5KSxpJiYoZS5zdGF0aWNfbGVuKz1iKihzWzIqdSsxXSt5KSkpO2lmKDAhPT1wKXtkb3tmb3IoZz1sLTE7MD09PWUuYmxfY291bnRbZ107KWctLTtlLmJsX2NvdW50W2ddLS0sZS5ibF9jb3VudFtnKzFdKz0yLGUuYmxfY291bnRbbF0tLSxwLT0yfXdoaWxlKDA8cCk7Zm9yKGc9bDswIT09ZztnLS0pZm9yKHU9ZS5ibF9jb3VudFtnXTswIT09dTspKF89ZS5oZWFwWy0tY10sIShfPnIpKSYmKGFbMipfKzFdIT09ZyYmKGUub3B0X2xlbis9KGctYVsyKl8rMV0pKmFbMipfXSxhWzIqXysxXT1nKSx1LS0pfX1mdW5jdGlvbiBmKGUsdCxhKXt2YXIgcj1BcnJheSgxNikscz0wLGksbztmb3IoaT0xO2k8PTE1O2krKylyW2ldPXM9cythW2ktMV08PDE7Zm9yKG89MDtvPD10O28rKyl7dmFyIGQ9ZVsyKm8rMV07MCE9PWQmJihlWzIqb109YyhyW2RdKyssZCkpfX1mdW5jdGlvbiBoKCl7dmFyIGU9QXJyYXkoMTYpLHQsYSxzLGksbztmb3Iocz0wLGk9MDtpPDI4O2krKylmb3IoWltpXT1zLHQ9MDt0PDE8PFBbaV07dCsrKUdbcysrXT1pO2ZvcihHW3MtMV09aSxvPTAsaT0wOzE2Pmk7aSsrKWZvcihZW2ldPW8sdD0wO3Q8MTw8TltpXTt0KyspTVtvKytdPWk7Zm9yKG8+Pj03O2k8MzA7aSsrKWZvcihZW2ldPW88PDcsdD0wO3Q8MTw8TltpXS03O3QrKylNWzI1NitvKytdPWk7Zm9yKGE9MDthPD0xNTthKyspZVthXT0wO2Zvcih0PTA7MTQzPj10OylVWzIqdCsxXT04LHQrKyxlWzhdKys7Zm9yKDsyNTU+PXQ7KVVbMip0KzFdPTksdCsrLGVbOV0rKztmb3IoOzI3OT49dDspVVsyKnQrMV09Nyx0KyssZVs3XSsrO2Zvcig7Mjg3Pj10OylVWzIqdCsxXT04LHQrKyxlWzhdKys7Zm9yKGYoVSwyODcsZSksdD0wO3Q8MzA7dCsrKUZbMip0KzFdPTUsRlsyKnRdPWModCw1KTtIPW5ldyByKFUsUCwyNTcsMjg2LDE1KSxLPW5ldyByKEYsTiwwLDMwLDE1KSxYPW5ldyByKFtdLEQsMCwxOSw3KX1mdW5jdGlvbiBnKGUpe3ZhciB0O2Zvcih0PTA7dDwyODY7dCsrKWUuZHluX2x0cmVlWzIqdF09MDtmb3IodD0wO3Q8MzA7dCsrKWUuZHluX2R0cmVlWzIqdF09MDtmb3IodD0wO3Q8MTk7dCsrKWUuYmxfdHJlZVsyKnRdPTA7ZS5keW5fbHRyZWVbNTEyXT0xLGUub3B0X2xlbj1lLnN0YXRpY19sZW49MCxlLmxhc3RfbGl0PWUubWF0Y2hlcz0wfWZ1bmN0aW9uIHkoZSl7ODxlLmJpX3ZhbGlkP2QoZSxlLmJpX2J1Zik6MDxlLmJpX3ZhbGlkJiYoZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109ZS5iaV9idWYpLGUuYmlfYnVmPTAsZS5iaV92YWxpZD0wfWZ1bmN0aW9uIGIoZSx0LGEsbil7eShlKSxuJiYoZChlLGEpLGQoZSx+YSkpLHouYXJyYXlTZXQoZS5wZW5kaW5nX2J1ZixlLndpbmRvdyx0LGEsZS5wZW5kaW5nKSxlLnBlbmRpbmcrPWF9ZnVuY3Rpb24geChlLHQsYSxuKXt2YXIgcj0yKnQscz0yKmE7cmV0dXJuIGVbcl08ZVtzXXx8ZVtyXT09PWVbc10mJm5bdF08PW5bYV19ZnVuY3Rpb24gdyhlLHQsYSl7Zm9yKHZhciBuPWUuaGVhcFthXSxyPWE8PDE7cjw9ZS5oZWFwX2xlbiYmKHI8ZS5oZWFwX2xlbiYmeCh0LGUuaGVhcFtyKzFdLGUuaGVhcFtyXSxlLmRlcHRoKSYmcisrLCF4KHQsbixlLmhlYXBbcl0sZS5kZXB0aCkpOyllLmhlYXBbYV09ZS5oZWFwW3JdLGE9cixyPDw9MTtlLmhlYXBbYV09bn1mdW5jdGlvbiBFKGUsdCxhKXt2YXIgbj0wLHIscyxpLGQ7aWYoMCE9PWUubGFzdF9saXQpZG8gcj1lLnBlbmRpbmdfYnVmW2UuZF9idWYrMipuXTw8OHxlLnBlbmRpbmdfYnVmW2UuZF9idWYrMipuKzFdLHM9ZS5wZW5kaW5nX2J1ZltlLmxfYnVmK25dLG4rKywwPT09cj9wKGUscyx0KTooaT1HW3NdLHAoZSxpKzI1NisxLHQpLGQ9UFtpXSwwIT09ZCYmKHMtPVpbaV0sbChlLHMsZCkpLHItLSxpPW8ocikscChlLGksYSksZD1OW2ldLDAhPT1kJiYoci09WVtpXSxsKGUscixkKSkpO3doaWxlKG48ZS5sYXN0X2xpdCk7cChlLDI1Nix0KX1mdW5jdGlvbiBDKGUsdCl7dmFyIGE9dC5keW5fdHJlZSxyPXQuc3RhdF9kZXNjLnN0YXRpY190cmVlLHM9dC5zdGF0X2Rlc2MuaGFzX3N0cmVlLGk9dC5zdGF0X2Rlc2MuZWxlbXMsbz0tMSxkLGwscDtmb3IoZS5oZWFwX2xlbj0wLGUuaGVhcF9tYXg9NTczLGQ9MDtkPGk7ZCsrKTA9PT1hWzIqZF0/YVsyKmQrMV09MDooZS5oZWFwWysrZS5oZWFwX2xlbl09bz1kLGUuZGVwdGhbZF09MCk7Zm9yKDsyPmUuaGVhcF9sZW47KXA9ZS5oZWFwWysrZS5oZWFwX2xlbl09Mj5vPysrbzowLGFbMipwXT0xLGUuZGVwdGhbcF09MCxlLm9wdF9sZW4tLSxzJiYoZS5zdGF0aWNfbGVuLT1yWzIqcCsxXSk7Zm9yKHQubWF4X2NvZGU9byxkPWUuaGVhcF9sZW4+PjE7MTw9ZDtkLS0pdyhlLGEsZCk7cD1pO2RvIGQ9ZS5oZWFwWzFdLGUuaGVhcFsxXT1lLmhlYXBbZS5oZWFwX2xlbi0tXSx3KGUsYSwxKSxsPWUuaGVhcFsxXSxlLmhlYXBbLS1lLmhlYXBfbWF4XT1kLGUuaGVhcFstLWUuaGVhcF9tYXhdPWwsYVsyKnBdPWFbMipkXSthWzIqbF0sZS5kZXB0aFtwXT0oZS5kZXB0aFtkXT49ZS5kZXB0aFtsXT9lLmRlcHRoW2RdOmUuZGVwdGhbbF0pKzEsYVsyKmQrMV09YVsyKmwrMV09cCxlLmhlYXBbMV09cCsrLHcoZSxhLDEpO3doaWxlKDI8PWUuaGVhcF9sZW4pO2UuaGVhcFstLWUuaGVhcF9tYXhdPWUuaGVhcFsxXSxfKGUsdCksZihhLG8sZS5ibF9jb3VudCl9ZnVuY3Rpb24gQShlLHQsYSl7dmFyIHI9LTEscz10WzFdLGk9MCxvPTcsZD00LGwscDtmb3IoMD09PXMmJihvPTEzOCxkPTMpLHRbMiooYSsxKSsxXT02NTUzNSxsPTA7bDw9YTtsKyspe2lmKHA9cyxzPXRbMioobCsxKSsxXSwrK2k8byYmcD09PXMpY29udGludWU7ZWxzZSBpPGQ/ZS5ibF90cmVlWzIqcF0rPWk6MD09PXA/MTA+PWk/ZS5ibF90cmVlWzM0XSsrOmUuYmxfdHJlZVszNl0rKzoocCE9PXImJmUuYmxfdHJlZVsyKnBdKyssZS5ibF90cmVlWzMyXSsrKTtpPTAscj1wLDA9PT1zPyhvPTEzOCxkPTMpOnA9PT1zPyhvPTYsZD0zKToobz03LGQ9NCl9fWZ1bmN0aW9uIFMoZSx0LGEpe3ZhciByPS0xLHM9dFsxXSxpPTAsbz03LGQ9NCxjLHU7Zm9yKDA9PT1zJiYobz0xMzgsZD0zKSxjPTA7Yzw9YTtjKyspe2lmKHU9cyxzPXRbMiooYysxKSsxXSwrK2k8byYmdT09PXMpY29udGludWU7ZWxzZSBpZihpPGQpZG8gcChlLHUsZS5ibF90cmVlKTt3aGlsZSgwIT0tLWkpO2Vsc2UgMD09PXU/MTA+PWk/KHAoZSwxNyxlLmJsX3RyZWUpLGwoZSxpLTMsMykpOihwKGUsMTgsZS5ibF90cmVlKSxsKGUsaS0xMSw3KSk6KHUhPT1yJiYocChlLHUsZS5ibF90cmVlKSxpLS0pLHAoZSwxNixlLmJsX3RyZWUpLGwoZSxpLTMsMikpO2k9MCxyPXUsMD09PXM/KG89MTM4LGQ9Myk6dT09PXM/KG89NixkPTMpOihvPTcsZD00KX19ZnVuY3Rpb24gayhlKXt2YXIgdDtmb3IoQShlLGUuZHluX2x0cmVlLGUubF9kZXNjLm1heF9jb2RlKSxBKGUsZS5keW5fZHRyZWUsZS5kX2Rlc2MubWF4X2NvZGUpLEMoZSxlLmJsX2Rlc2MpLHQ9MTg7Mzw9dCYmMD09PWUuYmxfdHJlZVsyKmpbdF0rMV07dC0tKTtyZXR1cm4gZS5vcHRfbGVuKz0zKih0KzEpKzUrNSs0LHR9ZnVuY3Rpb24gdihlLHQsYSxuKXt2YXIgcjtmb3IobChlLHQtMjU3LDUpLGwoZSxhLTEsNSksbChlLG4tNCw0KSxyPTA7cjxuO3IrKylsKGUsZS5ibF90cmVlWzIqaltyXSsxXSwzKTtTKGUsZS5keW5fbHRyZWUsdC0xKSxTKGUsZS5keW5fZHRyZWUsYS0xKX1mdW5jdGlvbiBJKGUpe3ZhciB0PTQwOTM2MjQ0NDcsYTtmb3IoYT0wOzMxPj1hO2ErKyx0Pj4+PTEpaWYoMSZ0JiYwIT09ZS5keW5fbHRyZWVbMiphXSlyZXR1cm4gMDtpZigwIT09ZS5keW5fbHRyZWVbMThdfHwwIT09ZS5keW5fbHRyZWVbMjBdfHwwIT09ZS5keW5fbHRyZWVbMjZdKXJldHVybiAxO2ZvcihhPTMyO2E8MjU2O2ErKylpZigwIT09ZS5keW5fbHRyZWVbMiphXSlyZXR1cm4gMTtyZXR1cm4gMH1mdW5jdGlvbiBSKGUpe3F8fChoKCkscT0hMCksZS5sX2Rlc2M9bmV3IGkoZS5keW5fbHRyZWUsSCksZS5kX2Rlc2M9bmV3IGkoZS5keW5fZHRyZWUsSyksZS5ibF9kZXNjPW5ldyBpKGUuYmxfdHJlZSxYKSxlLmJpX2J1Zj0wLGUuYmlfdmFsaWQ9MCxnKGUpfWZ1bmN0aW9uIE8oZSx0LGEsbil7bChlLDArKG4/MTowKSwzKSxiKGUsdCxhLCEwKX12YXIgej1lKFwiLi4vdXRpbHMvY29tbW9uXCIpLEw9MjksVD0yNTYrMStMLEI9MzAsUD1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSxOPVswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSxEPVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XSxqPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxVPUFycmF5KDIqKFQrMikpO24oVSk7dmFyIEY9QXJyYXkoMipCKTtuKEYpO3ZhciBNPUFycmF5KDUxMik7bihNKTt2YXIgRz1BcnJheSgyNTgtMysxKTtuKEcpO3ZhciBaPUFycmF5KEwpO24oWik7dmFyIFk9QXJyYXkoQik7bihZKTt2YXIgcT0hMSxILEssWDthLl90cl9pbml0PVIsYS5fdHJfc3RvcmVkX2Jsb2NrPU8sYS5fdHJfZmx1c2hfYmxvY2s9ZnVuY3Rpb24oZSx0LGEsbil7dmFyIHI9MCxzLGk7MDxlLmxldmVsPyhlLnN0cm0uZGF0YV90eXBlPT09MiYmKGUuc3RybS5kYXRhX3R5cGU9SShlKSksQyhlLGUubF9kZXNjKSxDKGUsZS5kX2Rlc2MpLHI9ayhlKSxzPWUub3B0X2xlbiszKzc+Pj4zLGk9ZS5zdGF0aWNfbGVuKzMrNz4+PjMsaTw9cyYmKHM9aSkpOnM9aT1hKzUsYSs0PD1zJiYtMSE9PXQ/TyhlLHQsYSxuKTplLnN0cmF0ZWd5PT09NHx8aT09PXM/KGwoZSwyKyhuPzE6MCksMyksRShlLFUsRikpOihsKGUsNCsobj8xOjApLDMpLHYoZSxlLmxfZGVzYy5tYXhfY29kZSsxLGUuZF9kZXNjLm1heF9jb2RlKzEscisxKSxFKGUsZS5keW5fbHRyZWUsZS5keW5fZHRyZWUpKSxnKGUpLG4mJnkoZSl9LGEuX3RyX3RhbGx5PWZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gZS5wZW5kaW5nX2J1ZltlLmRfYnVmKzIqZS5sYXN0X2xpdF09MjU1JnQ+Pj44LGUucGVuZGluZ19idWZbZS5kX2J1ZisyKmUubGFzdF9saXQrMV09MjU1JnQsZS5wZW5kaW5nX2J1ZltlLmxfYnVmK2UubGFzdF9saXRdPTI1NSZhLGUubGFzdF9saXQrKywwPT09dD9lLmR5bl9sdHJlZVsyKmFdKys6KGUubWF0Y2hlcysrLHQtLSxlLmR5bl9sdHJlZVsyKihHW2FdKzI1NisxKV0rKyxlLmR5bl9kdHJlZVsyKm8odCldKyspLGUubGFzdF9saXQ9PT1lLmxpdF9idWZzaXplLTF9LGEuX3RyX2FsaWduPWZ1bmN0aW9uKGUpe2woZSwyLDMpLHAoZSwyNTYsVSksdShlKX19LHtcIi4uL3V0aWxzL2NvbW1vblwiOjQwfV0sNTI6W2Z1bmN0aW9uKGUsdCl7J3VzZSBzdHJpY3QnO3QuZXhwb3J0cz1mdW5jdGlvbigpe3RoaXMuaW5wdXQ9bnVsbCx0aGlzLm5leHRfaW49MCx0aGlzLmF2YWlsX2luPTAsdGhpcy50b3RhbF9pbj0wLHRoaXMub3V0cHV0PW51bGwsdGhpcy5uZXh0X291dD0wLHRoaXMuYXZhaWxfb3V0PTAsdGhpcy50b3RhbF9vdXQ9MCx0aGlzLm1zZz1cIlwiLHRoaXMuc3RhdGU9bnVsbCx0aGlzLmRhdGFfdHlwZT0yLHRoaXMuYWRsZXI9MH19LHt9XSw1MzpbZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBhKGUpe3ZhciB0PW5ldyByLGE9dC53cml0ZShlKSt0LmVuZCgpO3JldHVybiBhLnJlcGxhY2UoL1xcMC9nLFwiXCIpLnRyaW0oKX1mdW5jdGlvbiBuKHQscil7aWYoIXQpcmV0dXJuIGE7dHJ5e25ldyBUZXh0RGVjb2Rlcih0LnRyaW0oKSl9Y2F0Y2gobyl7dmFyIGk9cy5leGVjKHQpO3JldHVybiBpJiYhcj9uKFwid2luZG93cy1cIitpWzFdLCEwKTphfXJldHVybiBmdW5jdGlvbihlKXt2YXIgYT1uZXcgVGV4dERlY29kZXIodCksbj1hLmRlY29kZShlLHtzdHJlYW06ITB9KSthLmRlY29kZSgpO3JldHVybiBuLnJlcGxhY2UoL1xcMC9nLFwiXCIpLnRyaW0oKX19ZShcInRleHQtZW5jb2RpbmctcG9seWZpbGxcIik7dmFyIHI9ZShcInN0cmluZ19kZWNvZGVyXCIpLlN0cmluZ0RlY29kZXI7dC5leHBvcnRzPW47dmFyIHM9L14oPzpBU05JXFxzKT8oXFxkKykkL219LHtzdHJpbmdfZGVjb2Rlcjo1NixcInRleHQtZW5jb2RpbmctcG9seWZpbGxcIjo1N31dLDU0OltmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSl7dmFyIHQ9e2xhc3RVcGRhdGVkOm5ldyBEYXRlKGUucmVhZFVJbnQ4KDEpKzE5MDAsZS5yZWFkVUludDgoMiksZS5yZWFkVUludDgoMykpLHJlY29yZHM6ZS5yZWFkVUludDMyTEUoNCksaGVhZGVyTGVuOmUucmVhZFVJbnQxNkxFKDgpLHJlY0xlbjplLnJlYWRVSW50MTZMRSgxMCl9O3JldHVybiB0fWZ1bmN0aW9uIG4oZSx0LGEpe2Zvcih2YXIgbj1bXSxyPTMyO3I8dCYmKG4ucHVzaCh7bmFtZTphKGUuc2xpY2UocixyKzExKSksZGF0YVR5cGU6ZChlLnJlYWRVSW50OChyKzExKSksbGVuOmUucmVhZFVJbnQ4KHIrMTYpLGRlY2ltYWw6ZS5yZWFkVUludDgocisxNyl9KSwxMyE9PWUucmVhZFVJbnQ4KHIrMzIpKTspcis9MzI7cmV0dXJuIG59ZnVuY3Rpb24gcihlLHQsYSxuLHIpe3ZhciBzPWUuc2xpY2UodCx0K2EpLGk9cihzKTtyZXR1cm5cIk5cIj09PW58fFwiRlwiPT09bnx8XCJPXCI9PT1uP3BhcnNlRmxvYXQoaSwxMCk6XCJEXCI9PT1uP25ldyBEYXRlKGkuc2xpY2UoMCw0KSxwYXJzZUludChpLnNsaWNlKDQsNiksMTApLTEsaS5zbGljZSg2LDgpKTpcIkxcIj09PW4/XCJ5XCI9PT1pLnRvTG93ZXJDYXNlKCl8fFwidFwiPT09aS50b0xvd2VyQ2FzZSgpOml9ZnVuY3Rpb24gcyhlLHQsYSxuKXtmb3IodmFyIHM9e30sbz0wLGQ9YS5sZW5ndGgsbCxwO288ZDspcD1hW29dLGw9cihlLHQscC5sZW4scC5kYXRhVHlwZSxuKSx0Kz1wLmxlbixcInVuZGVmaW5lZFwiIT10eXBlb2YgbCYmKHNbcC5uYW1lXT1sKSxvKys7cmV0dXJuIHN9dmFyIGk9ZShcIi4vZGVjb2RlclwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9aSh0KSxvPWEoZSksZD1uKGUsby5oZWFkZXJMZW4tMSxyKSxsPShkLmxlbmd0aCsxPDw1KSsyLHA9by5yZWNMZW4sYz1vLnJlY29yZHMsdT1bXTtjOyl1LnB1c2gocyhlLGwsZCxyKSksbCs9cCxjLS07cmV0dXJuIHV9fSx7XCIuL2RlY29kZXJcIjo1M31dLDU1OltmdW5jdGlvbihlLHQscyl7KGZ1bmN0aW9uKGUsYSl7XCJvYmplY3RcIj09dHlwZW9mIHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0P3QuZXhwb3J0cz1hKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgcCYmcC5hbWQ/cChhKTplLnByb2o0PWEoKX0pKHRoaXMsZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7dmFyIGxlPU1hdGguYXNpbixwZT1NYXRoLmFjb3MsdWU9TWF0aC5hdGFuMixtZT1NYXRoLlBJLF9lPU1hdGguYXRhbixmZT1NYXRoLmV4cCxoZT1NYXRoLnRhbixnZT1NYXRoLnNpbix5ZT1NYXRoLmNvcyxiZT1NYXRoLnNxcnQ7ZnVuY3Rpb24gZShlLHQpe2lmKGVbdF0pcmV0dXJuIGVbdF07Zm9yKHZhciBhPU9iamVjdC5rZXlzKGUpLG49dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoUGUsXCJcIikscj0tMSxzLG87KytyPGEubGVuZ3RoOylpZihzPWFbcl0sbz1zLnRvTG93ZXJDYXNlKCkucmVwbGFjZShQZSxcIlwiKSxvPT09bilyZXR1cm4gZVtzXX1mdW5jdGlvbiB0KGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIm5vdCBhIHN0cmluZ1wiKTt0aGlzLnRleHQ9ZS50cmltKCksdGhpcy5sZXZlbD0wLHRoaXMucGxhY2U9MCx0aGlzLnJvb3Q9bnVsbCx0aGlzLnN0YWNrPVtdLHRoaXMuY3VycmVudE9iamVjdD1udWxsLHRoaXMuc3RhdGU9MX1mdW5jdGlvbiBzKGUpe3ZhciBhPW5ldyB0KGUpO3JldHVybiBhLm91dHB1dCgpfWZ1bmN0aW9uIHAoZSx0LGEpe0FycmF5LmlzQXJyYXkodCkmJihhLnVuc2hpZnQodCksdD1udWxsKTt2YXIgbj10P3t9OmUscj1hLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBjKHQsZSksZX0sbik7dCYmKGVbdF09cil9ZnVuY3Rpb24gYyhlLHQpe2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVybiB2b2lkKHRbZV09ITApO3ZhciBhPWUuc2hpZnQoKTtpZihcIlBBUkFNRVRFUlwiPT09YSYmKGE9ZS5zaGlmdCgpKSwxPT09ZS5sZW5ndGgpcmV0dXJuIEFycmF5LmlzQXJyYXkoZVswXSk/KHRbYV09e30sdm9pZCBjKGVbMF0sdFthXSkpOnZvaWQodFthXT1lWzBdKTtpZighZS5sZW5ndGgpcmV0dXJuIHZvaWQodFthXT0hMCk7aWYoXCJUT1dHUzg0XCI9PT1hKXJldHVybiB2b2lkKHRbYV09ZSk7aWYoXCJBWElTXCI9PT1hKXJldHVybiBhIGluIHR8fCh0W2FdPVtdKSx2b2lkIHRbYV0ucHVzaChlKTtBcnJheS5pc0FycmF5KGEpfHwodFthXT17fSk7dmFyIG47c3dpdGNoKGEpe2Nhc2VcIlVOSVRcIjpjYXNlXCJQUklNRU1cIjpjYXNlXCJWRVJUX0RBVFVNXCI6cmV0dXJuIHRbYV09e25hbWU6ZVswXS50b0xvd2VyQ2FzZSgpLGNvbnZlcnQ6ZVsxXX0sdm9pZCgzPT09ZS5sZW5ndGgmJmMoZVsyXSx0W2FdKSk7Y2FzZVwiU1BIRVJPSURcIjpjYXNlXCJFTExJUFNPSURcIjpyZXR1cm4gdFthXT17bmFtZTplWzBdLGE6ZVsxXSxyZjplWzJdfSx2b2lkKDQ9PT1lLmxlbmd0aCYmYyhlWzNdLHRbYV0pKTtjYXNlXCJQUk9KRUNURURDUlNcIjpjYXNlXCJQUk9KQ1JTXCI6Y2FzZVwiR0VPR0NTXCI6Y2FzZVwiR0VPQ0NTXCI6Y2FzZVwiUFJPSkNTXCI6Y2FzZVwiTE9DQUxfQ1NcIjpjYXNlXCJHRU9EQ1JTXCI6Y2FzZVwiR0VPREVUSUNDUlNcIjpjYXNlXCJHRU9ERVRJQ0RBVFVNXCI6Y2FzZVwiRURBVFVNXCI6Y2FzZVwiRU5HSU5FRVJJTkdEQVRVTVwiOmNhc2VcIlZFUlRfQ1NcIjpjYXNlXCJWRVJUQ1JTXCI6Y2FzZVwiVkVSVElDQUxDUlNcIjpjYXNlXCJDT01QRF9DU1wiOmNhc2VcIkNPTVBPVU5EQ1JTXCI6Y2FzZVwiRU5HSU5FRVJJTkdDUlNcIjpjYXNlXCJFTkdDUlNcIjpjYXNlXCJGSVRURURfQ1NcIjpjYXNlXCJMT0NBTF9EQVRVTVwiOmNhc2VcIkRBVFVNXCI6cmV0dXJuIGVbMF09W1wibmFtZVwiLGVbMF1dLHZvaWQgcCh0LGEsZSk7ZGVmYXVsdDpmb3Iobj0tMTsrK248ZS5sZW5ndGg7KWlmKCFBcnJheS5pc0FycmF5KGVbbl0pKXJldHVybiBjKGUsdFthXSk7cmV0dXJuIHAodCxhLGUpO319ZnVuY3Rpb24gdShlLHQpe3ZhciBhPXRbMF0sbj10WzFdOyEoYSBpbiBlKSYmbiBpbiBlJiYoZVthXT1lW25dLDM9PT10Lmxlbmd0aCYmKGVbYV09dFsyXShlW2FdKSkpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIGUqcWV9ZnVuY3Rpb24gXyhlKXtmdW5jdGlvbiB0KHQpe3ZhciBhPWUudG9fbWV0ZXJ8fDE7cmV0dXJuIHQqYX1pZihcIkdFT0dDU1wiPT09ZS50eXBlP2UucHJvak5hbWU9XCJsb25nbGF0XCI6XCJMT0NBTF9DU1wiPT09ZS50eXBlPyhlLnByb2pOYW1lPVwiaWRlbnRpdHlcIixlLmxvY2FsPSEwKTpcIm9iamVjdFwiPT10eXBlb2YgZS5QUk9KRUNUSU9OP2UucHJvak5hbWU9T2JqZWN0LmtleXMoZS5QUk9KRUNUSU9OKVswXTplLnByb2pOYW1lPWUuUFJPSkVDVElPTixlLkFYSVMpe2Zvcih2YXIgYT1cIlwiLG49MCxyPWUuQVhJUy5sZW5ndGg7bjxyOysrbil7dmFyIHM9ZS5BWElTW25dLG89c1swXS50b0xvd2VyQ2FzZSgpOy0xPT09by5pbmRleE9mKFwibm9ydGhcIik/LTE9PT1vLmluZGV4T2YoXCJzb3V0aFwiKT8tMT09PW8uaW5kZXhPZihcImVhc3RcIik/LTEhPT1vLmluZGV4T2YoXCJ3ZXN0XCIpJiYoYSs9XCJ3XCIpOmErPVwiZVwiOmErPVwic1wiOmErPVwiblwifTI9PT1hLmxlbmd0aCYmKGErPVwidVwiKSwzPT09YS5sZW5ndGgmJihlLmF4aXM9YSl9ZS5VTklUJiYoZS51bml0cz1lLlVOSVQubmFtZS50b0xvd2VyQ2FzZSgpLFwibWV0cmVcIj09PWUudW5pdHMmJihlLnVuaXRzPVwibWV0ZXJcIiksZS5VTklULmNvbnZlcnQmJihcIkdFT0dDU1wiPT09ZS50eXBlP2UuREFUVU0mJmUuREFUVU0uU1BIRVJPSUQmJihlLnRvX21ldGVyPWUuVU5JVC5jb252ZXJ0KmUuREFUVU0uU1BIRVJPSUQuYSk6ZS50b19tZXRlcj1lLlVOSVQuY29udmVydCkpO3ZhciBkPWUuR0VPR0NTO1wiR0VPR0NTXCI9PT1lLnR5cGUmJihkPWUpLGQmJihlLmRhdHVtQ29kZT1kLkRBVFVNP2QuREFUVU0ubmFtZS50b0xvd2VyQ2FzZSgpOmQubmFtZS50b0xvd2VyQ2FzZSgpLFwiZF9cIj09PWUuZGF0dW1Db2RlLnNsaWNlKDAsMikmJihlLmRhdHVtQ29kZT1lLmRhdHVtQ29kZS5zbGljZSgyKSksKFwibmV3X3plYWxhbmRfZ2VvZGV0aWNfZGF0dW1fMTk0OVwiPT09ZS5kYXR1bUNvZGV8fFwibmV3X3plYWxhbmRfMTk0OVwiPT09ZS5kYXR1bUNvZGUpJiYoZS5kYXR1bUNvZGU9XCJuemdkNDlcIiksKFwid2dzXzE5ODRcIj09PWUuZGF0dW1Db2RlfHxcIndvcmxkX2dlb2RldGljX3N5c3RlbV8xOTg0XCI9PT1lLmRhdHVtQ29kZSkmJihcIk1lcmNhdG9yX0F1eGlsaWFyeV9TcGhlcmVcIj09PWUuUFJPSkVDVElPTiYmKGUuc3BoZXJlPSEwKSxlLmRhdHVtQ29kZT1cIndnczg0XCIpLFwiX2ZlcnJvXCI9PT1lLmRhdHVtQ29kZS5zbGljZSgtNikmJihlLmRhdHVtQ29kZT1lLmRhdHVtQ29kZS5zbGljZSgwLC02KSksXCJfamFrYXJ0YVwiPT09ZS5kYXR1bUNvZGUuc2xpY2UoLTgpJiYoZS5kYXR1bUNvZGU9ZS5kYXR1bUNvZGUuc2xpY2UoMCwtOCkpLH5lLmRhdHVtQ29kZS5pbmRleE9mKFwiYmVsZ2VcIikmJihlLmRhdHVtQ29kZT1cInJuYjcyXCIpLGQuREFUVU0mJmQuREFUVU0uU1BIRVJPSUQmJihlLmVsbHBzPWQuREFUVU0uU1BIRVJPSUQubmFtZS5yZXBsYWNlKFwiXzE5XCIsXCJcIikucmVwbGFjZSgvW0NjXWxhcmtlXFxfMTgvLFwiY2xya1wiKSxcImludGVybmF0aW9uYWxcIj09PWUuZWxscHMudG9Mb3dlckNhc2UoKS5zbGljZSgwLDEzKSYmKGUuZWxscHM9XCJpbnRsXCIpLGUuYT1kLkRBVFVNLlNQSEVST0lELmEsZS5yZj1wYXJzZUZsb2F0KGQuREFUVU0uU1BIRVJPSUQucmYsMTApKSxkLkRBVFVNJiZkLkRBVFVNLlRPV0dTODQmJihlLmRhdHVtX3BhcmFtcz1kLkRBVFVNLlRPV0dTODQpLH5lLmRhdHVtQ29kZS5pbmRleE9mKFwib3NnYl8xOTM2XCIpJiYoZS5kYXR1bUNvZGU9XCJvc2diMzZcIiksfmUuZGF0dW1Db2RlLmluZGV4T2YoXCJvc25pXzE5NTJcIikmJihlLmRhdHVtQ29kZT1cIm9zbmk1MlwiKSwofmUuZGF0dW1Db2RlLmluZGV4T2YoXCJ0bTY1XCIpfHx+ZS5kYXR1bUNvZGUuaW5kZXhPZihcImdlb2RldGljX2RhdHVtX29mXzE5NjVcIikpJiYoZS5kYXR1bUNvZGU9XCJpcmU2NVwiKSxcImNoMTkwMytcIj09PWUuZGF0dW1Db2RlJiYoZS5kYXR1bUNvZGU9XCJjaDE5MDNcIiksfmUuZGF0dW1Db2RlLmluZGV4T2YoXCJpc3JhZWxcIikmJihlLmRhdHVtQ29kZT1cImlzcjkzXCIpKSxlLmImJiFpc0Zpbml0ZShlLmIpJiYoZS5iPWUuYSk7W1tcInN0YW5kYXJkX3BhcmFsbGVsXzFcIixcIlN0YW5kYXJkX1BhcmFsbGVsXzFcIl0sW1wic3RhbmRhcmRfcGFyYWxsZWxfMlwiLFwiU3RhbmRhcmRfUGFyYWxsZWxfMlwiXSxbXCJmYWxzZV9lYXN0aW5nXCIsXCJGYWxzZV9FYXN0aW5nXCJdLFtcImZhbHNlX25vcnRoaW5nXCIsXCJGYWxzZV9Ob3J0aGluZ1wiXSxbXCJjZW50cmFsX21lcmlkaWFuXCIsXCJDZW50cmFsX01lcmlkaWFuXCJdLFtcImxhdGl0dWRlX29mX29yaWdpblwiLFwiTGF0aXR1ZGVfT2ZfT3JpZ2luXCJdLFtcImxhdGl0dWRlX29mX29yaWdpblwiLFwiQ2VudHJhbF9QYXJhbGxlbFwiXSxbXCJzY2FsZV9mYWN0b3JcIixcIlNjYWxlX0ZhY3RvclwiXSxbXCJrMFwiLFwic2NhbGVfZmFjdG9yXCJdLFtcImxhdGl0dWRlX29mX2NlbnRlclwiLFwiTGF0aXR1ZGVfT2ZfQ2VudGVyXCJdLFtcImxhdGl0dWRlX29mX2NlbnRlclwiLFwiTGF0aXR1ZGVfb2ZfY2VudGVyXCJdLFtcImxhdDBcIixcImxhdGl0dWRlX29mX2NlbnRlclwiLG1dLFtcImxvbmdpdHVkZV9vZl9jZW50ZXJcIixcIkxvbmdpdHVkZV9PZl9DZW50ZXJcIl0sW1wibG9uZ2l0dWRlX29mX2NlbnRlclwiLFwiTG9uZ2l0dWRlX29mX2NlbnRlclwiXSxbXCJsb25nY1wiLFwibG9uZ2l0dWRlX29mX2NlbnRlclwiLG1dLFtcIngwXCIsXCJmYWxzZV9lYXN0aW5nXCIsdF0sW1wieTBcIixcImZhbHNlX25vcnRoaW5nXCIsdF0sW1wibG9uZzBcIixcImNlbnRyYWxfbWVyaWRpYW5cIixtXSxbXCJsYXQwXCIsXCJsYXRpdHVkZV9vZl9vcmlnaW5cIixtXSxbXCJsYXQwXCIsXCJzdGFuZGFyZF9wYXJhbGxlbF8xXCIsbV0sW1wibGF0MVwiLFwic3RhbmRhcmRfcGFyYWxsZWxfMVwiLG1dLFtcImxhdDJcIixcInN0YW5kYXJkX3BhcmFsbGVsXzJcIixtXSxbXCJhemltdXRoXCIsXCJBemltdXRoXCJdLFtcImFscGhhXCIsXCJhemltdXRoXCIsbV0sW1wic3JzQ29kZVwiLFwibmFtZVwiXV0uZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdShlLHQpfSksIWUubG9uZzAmJmUubG9uZ2MmJihcIkFsYmVyc19Db25pY19FcXVhbF9BcmVhXCI9PT1lLnByb2pOYW1lfHxcIkxhbWJlcnRfQXppbXV0aGFsX0VxdWFsX0FyZWFcIj09PWUucHJvak5hbWUpJiYoZS5sb25nMD1lLmxvbmdjKSwhZS5sYXRfdHMmJmUubGF0MSYmKFwiU3RlcmVvZ3JhcGhpY19Tb3V0aF9Qb2xlXCI9PT1lLnByb2pOYW1lfHxcIlBvbGFyIFN0ZXJlb2dyYXBoaWMgKHZhcmlhbnQgQilcIj09PWUucHJvak5hbWUpJiYoZS5sYXQwPW0oMDxlLmxhdDE/OTA6LTkwKSxlLmxhdF90cz1lLmxhdDEpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9dGhpcztpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9YXJndW1lbnRzWzFdO2ZbZV09XCJzdHJpbmdcIj09dHlwZW9mIGE/XCIrXCI9PT1hLmNoYXJBdCgwKT9OZShhcmd1bWVudHNbMV0pOkhlKGFyZ3VtZW50c1sxXSk6YX1lbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlLm1hcChmdW5jdGlvbihlKXtBcnJheS5pc0FycmF5KGUpP2YuYXBwbHkodCxlKTpmKGUpfSk7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpXCJFUFNHXCJpbiBlP2ZbXCJFUFNHOlwiK2UuRVBTR109ZTpcIkVTUklcImluIGU/ZltcIkVTUkk6XCIrZS5FU1JJXT1lOlwiSUFVMjAwMFwiaW4gZT9mW1wiSUFVMjAwMDpcIitlLklBVTIwMDBdPWU6Y29uc29sZS5sb2coZSk7ZWxzZSBpZihlIGluIGYpcmV0dXJuIGZbZV19fWZ1bmN0aW9uIGgoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9ZnVuY3Rpb24gZyhlKXtyZXR1cm4gZSBpbiBmfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIEtlLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuLTE8ZS5pbmRleE9mKHQpfSl9ZnVuY3Rpb24gYih0KXt2YXIgYT1lKHQsXCJhdXRob3JpdHlcIik7aWYoYSl7dmFyIG49ZShhLFwiZXBzZ1wiKTtyZXR1cm4gbiYmLTE8WGUuaW5kZXhPZihuKX19ZnVuY3Rpb24geCh0KXt2YXIgYT1lKHQsXCJleHRlbnNpb25cIik7cmV0dXJuIGE/ZShhLFwicHJvajRcIik6dm9pZCAwfWZ1bmN0aW9uIHcoZSl7cmV0dXJuXCIrXCI9PT1lWzBdfWZ1bmN0aW9uIEUoZSl7aWYoaChlKSl7aWYoZyhlKSlyZXR1cm4gZltlXTtpZih5KGUpKXt2YXIgdD1IZShlKTtpZihiKHQpKXJldHVybiBmW1wiRVBTRzozODU3XCJdO3ZhciBhPXgodCk7cmV0dXJuIGE/TmUoYSk6dH1pZih3KGUpKXJldHVybiBOZShlKX1lbHNlIHJldHVybiBlfWZ1bmN0aW9uIEMoKXt2YXIgZT10aGlzLmIvdGhpcy5hO3RoaXMuZXM9MS1lKmUsXCJ4MFwiaW4gdGhpc3x8KHRoaXMueDA9MCksXCJ5MFwiaW4gdGhpc3x8KHRoaXMueTA9MCksdGhpcy5lPWJlKHRoaXMuZXMpLHRoaXMubGF0X3RzP3RoaXMuc3BoZXJlP3RoaXMuazA9eWUodGhpcy5sYXRfdHMpOnRoaXMuazA9UWUodGhpcy5lLGdlKHRoaXMubGF0X3RzKSx5ZSh0aGlzLmxhdF90cykpOiF0aGlzLmswJiYodGhpcy5rP3RoaXMuazA9dGhpcy5rOnRoaXMuazA9MSl9ZnVuY3Rpb24gQShlKXtyZXR1cm4gZX1mdW5jdGlvbiBTKGUsdCl7dmFyIGE9bnQubGVuZ3RoO3JldHVybiBlLm5hbWVzPyhudFthXT1lLGUubmFtZXMuZm9yRWFjaChmdW5jdGlvbihlKXthdFtlLnRvTG93ZXJDYXNlKCldPWF9KSx0aGlzKTooY29uc29sZS5sb2codCksITApfWZ1bmN0aW9uIGsodCxuLHIscyl7dmFyIGk9dCp0LG89bipuLGQ9KGktbykvaSxsPTA7cz8odCo9MS1kKihBZStkKihTZStkKmtlKSksaT10KnQsZD0wKTpsPWJlKGQpO3ZhciBwPShpLW8pL287cmV0dXJue2VzOmQsZTpsLGVwMjpwfX1mdW5jdGlvbiB2KHQscixzLGksbyl7aWYoIXQpe3ZhciBkPWUocnQsaSk7ZHx8KGQ9c3QpLHQ9ZC5hLHI9ZC5iLHM9ZC5yZn1yZXR1cm4gcyYmIXImJihyPSgxLTEvcykqdCksKDA9PT1zfHxuKHQtcik8dmUpJiYobz0hMCxyPXQpLHthOnQsYjpyLHJmOnMsc3BoZXJlOm99fWZ1bmN0aW9uIEkoZSx0LG4sYSxyLHMpe3ZhciBpPXt9O3JldHVybiBpLmRhdHVtX3R5cGU9dm9pZCAwPT09ZXx8XCJub25lXCI9PT1lPzU6NCx0JiYoaS5kYXR1bV9wYXJhbXM9dC5tYXAocGFyc2VGbG9hdCksKDAhPT1pLmRhdHVtX3BhcmFtc1swXXx8MCE9PWkuZGF0dW1fcGFyYW1zWzFdfHwwIT09aS5kYXR1bV9wYXJhbXNbMl0pJiYoaS5kYXR1bV90eXBlPTEpLDM8aS5kYXR1bV9wYXJhbXMubGVuZ3RoJiYoMCE9PWkuZGF0dW1fcGFyYW1zWzNdfHwwIT09aS5kYXR1bV9wYXJhbXNbNF18fDAhPT1pLmRhdHVtX3BhcmFtc1s1XXx8MCE9PWkuZGF0dW1fcGFyYW1zWzZdKSYmKGkuZGF0dW1fdHlwZT0yLGkuZGF0dW1fcGFyYW1zWzNdKj13ZSxpLmRhdHVtX3BhcmFtc1s0XSo9d2UsaS5kYXR1bV9wYXJhbXNbNV0qPXdlLGkuZGF0dW1fcGFyYW1zWzZdPWkuZGF0dW1fcGFyYW1zWzZdLzFlNisxKSksaS5hPW4saS5iPWEsaS5lcz1yLGkuZXAyPXMsaX1mdW5jdGlvbiBSKHQsYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgUikpcmV0dXJuIG5ldyBSKHQpO2E9YXx8ZnVuY3Rpb24oZSl7aWYoZSl0aHJvdyBlfTt2YXIgbj1FKHQpO2lmKFwib2JqZWN0XCIhPXR5cGVvZiBuKXJldHVybiB2b2lkIGEodCk7dmFyIHI9Ui5wcm9qZWN0aW9ucy5nZXQobi5wcm9qTmFtZSk7aWYoIXIpcmV0dXJuIHZvaWQgYSh0KTtpZihuLmRhdHVtQ29kZSYmXCJub25lXCIhPT1uLmRhdHVtQ29kZSl7dmFyIHM9ZShpdCxuLmRhdHVtQ29kZSk7cyYmKG4uZGF0dW1fcGFyYW1zPXMudG93Z3M4ND9zLnRvd2dzODQuc3BsaXQoXCIsXCIpOm51bGwsbi5lbGxwcz1zLmVsbGlwc2Usbi5kYXR1bU5hbWU9cy5kYXR1bU5hbWU/cy5kYXR1bU5hbWU6bi5kYXR1bUNvZGUpfW4uazA9bi5rMHx8MSxuLmF4aXM9bi5heGlzfHxcImVudVwiLG4uZWxscHM9bi5lbGxwc3x8XCJ3Z3M4NFwiO3ZhciBpPXYobi5hLG4uYixuLnJmLG4uZWxscHMsbi5zcGhlcmUpLG89ayhpLmEsaS5iLGkucmYsbi5SX0EpLGQ9bi5kYXR1bXx8SShuLmRhdHVtQ29kZSxuLmRhdHVtX3BhcmFtcyxpLmEsaS5iLG8uZXMsby5lcDIpO1dlKHRoaXMsbiksV2UodGhpcyxyKSx0aGlzLmE9aS5hLHRoaXMuYj1pLmIsdGhpcy5yZj1pLnJmLHRoaXMuc3BoZXJlPWkuc3BoZXJlLHRoaXMuZXM9by5lcyx0aGlzLmU9by5lLHRoaXMuZXAyPW8uZXAyLHRoaXMuZGF0dW09ZCx0aGlzLmluaXQoKSxhKG51bGwsdGhpcyl9ZnVuY3Rpb24gTyhlLHQpe3JldHVybiBlLmRhdHVtX3R5cGU9PT10LmRhdHVtX3R5cGUmJiEoZS5hIT09dC5hfHw1ZS0xMTxuKGUuZXMtdC5lcykpJiYoMT09PWUuZGF0dW1fdHlwZT9lLmRhdHVtX3BhcmFtc1swXT09PXQuZGF0dW1fcGFyYW1zWzBdJiZlLmRhdHVtX3BhcmFtc1sxXT09PXQuZGF0dW1fcGFyYW1zWzFdJiZlLmRhdHVtX3BhcmFtc1syXT09PXQuZGF0dW1fcGFyYW1zWzJdOjIhPT1lLmRhdHVtX3R5cGV8fGUuZGF0dW1fcGFyYW1zWzBdPT09dC5kYXR1bV9wYXJhbXNbMF0mJmUuZGF0dW1fcGFyYW1zWzFdPT09dC5kYXR1bV9wYXJhbXNbMV0mJmUuZGF0dW1fcGFyYW1zWzJdPT09dC5kYXR1bV9wYXJhbXNbMl0mJmUuZGF0dW1fcGFyYW1zWzNdPT09dC5kYXR1bV9wYXJhbXNbM10mJmUuZGF0dW1fcGFyYW1zWzRdPT09dC5kYXR1bV9wYXJhbXNbNF0mJmUuZGF0dW1fcGFyYW1zWzVdPT09dC5kYXR1bV9wYXJhbXNbNV0mJmUuZGF0dW1fcGFyYW1zWzZdPT09dC5kYXR1bV9wYXJhbXNbNl0pfWZ1bmN0aW9uIHooZSx0LG4pe3ZhciBhPWUueCxyPWUueSxzPWUuej9lLno6MCxpLG8sZCxsO2lmKHI8LUNlJiZyPi0xLjAwMSpDZSlyPS1DZTtlbHNlIGlmKHI+Q2UmJnI8MS4wMDEqQ2Upcj1DZTtlbHNle2lmKHI8LUNlKXJldHVybnt4Oi1JbmZpbml0eSx5Oi1JbmZpbml0eSx6OmUuen07aWYocj5DZSlyZXR1cm57eDoxLzAseToxLzAsejplLnp9fXJldHVybiBhPm1lJiYoYS09MiptZSksbz1nZShyKSxsPXllKHIpLGQ9bypvLGk9bi9iZSgxLXQqZCkse3g6KGkrcykqbCp5ZShhKSx5OihpK3MpKmwqZ2UoYSksejooaSooMS10KStzKSpvfX1mdW5jdGlvbiBMKGUsdCxyLGEpe3ZhciBzPTFlLTEyLGk9ZS54LG89ZS55LGQ9ZS56P2UuejowLGwscCxjLHUsbSxfLGYsaCxnLHksYix4LHcsRSxDLEE7aWYobD1iZShpKmkrbypvKSxwPWJlKGkqaStvKm8rZCpkKSwhKGwvcjxzKSlFPXVlKG8saSk7ZWxzZSBpZihFPTAscC9yPHMpcmV0dXJuIEM9Q2UsQT0tYSx7eDplLngseTplLnksejplLnp9O2M9ZC9wLHU9bC9wLG09MS9iZSgxLXQqKDItdCkqdSp1KSxoPXUqKDEtdCkqbSxnPWMqbSx3PTA7ZG8gdysrLGY9ci9iZSgxLXQqZypnKSxBPWwqaCtkKmctZiooMS10KmcqZyksXz10KmYvKGYrQSksbT0xL2JlKDEtXyooMi1fKSp1KnUpLHk9dSooMS1fKSptLGI9YyptLHg9YipoLXkqZyxoPXksZz1iO3doaWxlKHgqeD5zKnMmJnc8MzApO3JldHVybiBDPV9lKGIvbih5KSkse3g6RSx5OkMsejpBfX1mdW5jdGlvbiBUKGUsdCxhKXtpZigxPT09dClyZXR1cm57eDplLngrYVswXSx5OmUueSthWzFdLHo6ZS56K2FbMl19O2lmKDI9PT10KXt2YXIgbj1hWzBdLHI9YVsxXSxzPWFbMl0saT1hWzNdLG89YVs0XSxkPWFbNV0sbD1hWzZdO3JldHVybnt4OmwqKGUueC1kKmUueStvKmUueikrbix5OmwqKGQqZS54K2UueS1pKmUueikrcix6OmwqKC1vKmUueCtpKmUueStlLnopK3N9fX1mdW5jdGlvbiBCKGUsdCxhKXtpZigxPT09dClyZXR1cm57eDplLngtYVswXSx5OmUueS1hWzFdLHo6ZS56LWFbMl19O2lmKDI9PT10KXt2YXIgbj1hWzBdLHI9YVsxXSxzPWFbMl0saT1hWzNdLG89YVs0XSxkPWFbNV0sbD1hWzZdLHA9KGUueC1uKS9sLGM9KGUueS1yKS9sLHU9KGUuei1zKS9sO3JldHVybnt4OnArZCpjLW8qdSx5Oi1kKnArYytpKnUsejpvKnAtaSpjK3V9fX1mdW5jdGlvbiBQKGUpe3JldHVybiAxPT09ZXx8Mj09PWV9ZnVuY3Rpb24gTihlKXt2YXIgdD1OdW1iZXIuaXNGaW5pdGU7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdCl7aWYodChlKSlyZXR1cm47dGhyb3cgbmV3IFR5cGVFcnJvcihcImNvb3JkaW5hdGVzIG11c3QgYmUgZmluaXRlIG51bWJlcnNcIil9aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUhPT1lfHwhaXNGaW5pdGUoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvb3JkaW5hdGVzIG11c3QgYmUgZmluaXRlIG51bWJlcnNcIil9ZnVuY3Rpb24gRChlLHQpe3JldHVybigxPT09ZS5kYXR1bS5kYXR1bV90eXBlfHwyPT09ZS5kYXR1bS5kYXR1bV90eXBlKSYmXCJXR1M4NFwiIT09dC5kYXR1bUNvZGV8fCgxPT09dC5kYXR1bS5kYXR1bV90eXBlfHwyPT09dC5kYXR1bS5kYXR1bV90eXBlKSYmXCJXR1M4NFwiIT09ZS5kYXR1bUNvZGV9ZnVuY3Rpb24gaihlLHQsYSl7dmFyIG47cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihhPWx0KGEpKSxwdChhKSxlLmRhdHVtJiZ0LmRhdHVtJiZEKGUsdCkmJihuPW5ldyBSKFwiV0dTODRcIiksYT1qKGUsbixhKSxlPW4pLFwiZW51XCIhPT1lLmF4aXMmJihhPWR0KGUsITEsYSkpLFwibG9uZ2xhdFwiPT09ZS5wcm9qTmFtZT9hPXt4OmEueCpJZSx5OmEueSpJZSx6OmEuenx8MH06KGUudG9fbWV0ZXImJihhPXt4OmEueCplLnRvX21ldGVyLHk6YS55KmUudG9fbWV0ZXIsejphLnp8fDB9KSxhPWUuaW52ZXJzZShhKSksZS5mcm9tX2dyZWVud2ljaCYmKGEueCs9ZS5mcm9tX2dyZWVud2ljaCksYT1vdChlLmRhdHVtLHQuZGF0dW0sYSksdC5mcm9tX2dyZWVud2ljaCYmKGE9e3g6YS54LXQuZnJvbV9ncmVlbndpY2gseTphLnksejphLnp8fDB9KSxcImxvbmdsYXRcIj09PXQucHJvak5hbWU/YT17eDphLngqUmUseTphLnkqUmUsejphLnp8fDB9OihhPXQuZm9yd2FyZChhKSx0LnRvX21ldGVyJiYoYT17eDphLngvdC50b19tZXRlcix5OmEueS90LnRvX21ldGVyLHo6YS56fHwwfSkpLFwiZW51XCI9PT10LmF4aXM/YTpkdCh0LCEwLGEpfWZ1bmN0aW9uIFUoZSx0LGEpe3ZhciBuLHIscztyZXR1cm4gQXJyYXkuaXNBcnJheShhKT8obj1qKGUsdCxhKXx8e3g6TmFOLHk6TmFOfSwyPGEubGVuZ3RoP1widW5kZWZpbmVkXCIhPXR5cGVvZiBlLm5hbWUmJlwiZ2VvY2VudFwiPT09ZS5uYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5uYW1lJiZcImdlb2NlbnRcIj09PXQubmFtZT9cIm51bWJlclwiPT10eXBlb2Ygbi56P1tuLngsbi55LG4uel0uY29uY2F0KGEuc3BsaWNlKDMpKTpbbi54LG4ueSxhWzJdXS5jb25jYXQoYS5zcGxpY2UoMykpOltuLngsbi55XS5jb25jYXQoYS5zcGxpY2UoMikpOltuLngsbi55XSk6KHI9aihlLHQsYSkscz1PYmplY3Qua2V5cyhhKSwyPT09cy5sZW5ndGgpP3I6KHMuZm9yRWFjaChmdW5jdGlvbihuKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5uYW1lJiZcImdlb2NlbnRcIj09PWUubmFtZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQubmFtZSYmXCJnZW9jZW50XCI9PT10Lm5hbWUpe2lmKFwieFwiPT09bnx8XCJ5XCI9PT1ufHxcInpcIj09PW4pcmV0dXJuO31lbHNlIGlmKFwieFwiPT09bnx8XCJ5XCI9PT1uKXJldHVybjtyW25dPWFbbl19KSxyKX1mdW5jdGlvbiBGKGUpe3JldHVybiBlIGluc3RhbmNlb2YgUj9lOmUub1Byb2o/ZS5vUHJvajpSKGUpfWZ1bmN0aW9uIE0oZSx0LGEpe2U9RihlKTt2YXIgbj0hMSxyO3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB0Pyh0PWUsZT1jdCxuPSEwKTooXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQueHx8QXJyYXkuaXNBcnJheSh0KSkmJihhPXQsdD1lLGU9Y3Qsbj0hMCksdD1GKHQpLGE/VShlLHQsYSk6KHI9e2ZvcndhcmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFUoZSx0LGEpfSxpbnZlcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBVKHQsZSxhKX19LG4mJihyLm9Qcm9qPXQpLHIpfWZ1bmN0aW9uIEcoZSx0KXtyZXR1cm4gdD10fHw1LFcoSCh7bGF0OmVbMV0sbG9uOmVbMF19KSx0KX1mdW5jdGlvbiBaKGUpe3ZhciB0PUsoJChlLnRvVXBwZXJDYXNlKCkpKTtyZXR1cm4gdC5sYXQmJnQubG9uP1t0Lmxvbix0LmxhdF06Wyh0LmxlZnQrdC5yaWdodCkvMiwodC50b3ArdC5ib3R0b20pLzJdfWZ1bmN0aW9uIFkoZSl7cmV0dXJuIGUqKG1lLzE4MCl9ZnVuY3Rpb24gcShlKXtyZXR1cm4gMTgwKihlL21lKX1mdW5jdGlvbiBIKGUpe3ZhciB0PU1hdGgucm91bmQsbj1lLmxhdCxzPWUubG9uLGk9NjM3ODEzNyxhPS4wMDY2OTQzOCxvPS45OTk2LGQ9WShuKSxsPVkocykscCxjLHUsbSxfLGYsaCxnLHk7eT1yKChzKzE4MCkvNikrMSwxODA9PT1zJiYoeT02MCksNTY8PW4mJjY0Pm4mJjM8PXMmJjEyPnMmJih5PTMyKSw3Mjw9biYmODQ+biYmKDA8PXMmJjk+cz95PTMxOjk8PXMmJjIxPnM/eT0zMzoyMTw9cyYmMzM+cz95PTM1OjMzPD1zJiY0Mj5zJiYoeT0zNykpLHA9NiooeS0xKS0xODArMyxnPVkocCksYz1hLygxLWEpLHU9aS9iZSgxLWEqZ2UoZCkqZ2UoZCkpLG09aGUoZCkqaGUoZCksXz1jKnllKGQpKnllKGQpLGY9eWUoZCkqKGwtZyksaD1pKigoMS1hLzQtMyphKmEvNjQtNSphKmEqYS8yNTYpKmQtKDMqYS84KzMqYSphLzMyKzQ1KmEqYSphLzEwMjQpKmdlKDIqZCkrKDE1KmEqYS8yNTYrNDUqYSphKmEvMTAyNCkqZ2UoNCpkKS0zNSphKmEqYS8zMDcyKmdlKDYqZCkpO3ZhciBiPW8qdSooNjUrNjUqKDY1Kig2NSooMS1tK18pKSkvNis2NSooNjUqKDY1Kig2NSooNjUqKDUtMTgqbSttKm0rNzIqXy01OCpjKSkpKSkvMTIwKSs1ZTUseD1vKihoK3UqaGUoZCkqKDQyMjUvMis2NSooNjUqKDY1Kig2NSooNS1tKzkqXys0Kl8qXykpKSkvMjQrNjUqKDY1Kig2NSooNjUqKDY1Kig2NSooNjEtNTgqbSttKm0rNjAwKl8tMzMwKmMpKSkpKSkvNzIwKSk7cmV0dXJuIDA+biYmKHgrPTFlNykse25vcnRoaW5nOnQoeCksZWFzdGluZzp0KGIpLHpvbmVOdW1iZXI6eSx6b25lTGV0dGVyOlgobil9fWZ1bmN0aW9uIEsoZSl7dmFyIHQ9ZS5ub3J0aGluZyxuPWUuZWFzdGluZyxyPWUuem9uZUxldHRlcixzPWUuem9uZU51bWJlcjtpZigwPnN8fDYwPHMpcmV0dXJuIG51bGw7dmFyIGk9Ljk5OTYsZD02Mzc4MTM3LGE9LjAwNjY5NDM4LGw9KDEtYmUoMS1hKSkvKDErYmUoMS1hKSkscD10LGMsdSxtLF8sZixoLGcsYix4LHc7XCJOXCI+ciYmKHAtPTFlNyksYj02KihzLTEpLTE4MCszLGM9YS8oMS1hKSxnPXAvaSx4PWcvKGQqKDEtYS80LTMqYSphLzY0LTUqYSphKmEvMjU2KSksdz14KygzKmwvMi0yNypsKmwqbC8zMikqZ2UoMip4KSsoMjEqbCpsLzE2LTU1KmwqbCpsKmwvMzIpKmdlKDQqeCkrMTUxKmwqbCpsLzk2KmdlKDYqeCksdT1kL2JlKDEtYSpnZSh3KSpnZSh3KSksbT1oZSh3KSpoZSh3KSxfPWMqeWUodykqeWUodyksZj1kKigxLWEpL28oMS1hKmdlKHcpKmdlKHcpLDEuNSksaD0obi01ZTUpLyh1KmkpO3ZhciBFPXctdSpoZSh3KS9mKihoKmgvMi0oNSszKm0rMTAqXy00Kl8qXy05KmMpKmgqaCpoKmgvMjQrKDYxKzkwKm0rMjk4Kl8rNDUqbSptLTI1MipjLTMqXypfKSpoKmgqaCpoKmgqaC83MjApO0U9cShFKTt2YXIgQz0oaC0oMSsyKm0rXykqaCpoKmgvNisoNS0yKl8rMjgqbS0zKl8qXys4KmMrMjQqbSptKSpoKmgqaCpoKmgvMTIwKS95ZSh3KTtDPWIrcShDKTt2YXIgQTtpZihlLmFjY3VyYWN5KXt2YXIgUz1LKHtub3J0aGluZzplLm5vcnRoaW5nK2UuYWNjdXJhY3ksZWFzdGluZzplLmVhc3RpbmcrZS5hY2N1cmFjeSx6b25lTGV0dGVyOmUuem9uZUxldHRlcix6b25lTnVtYmVyOmUuem9uZU51bWJlcn0pO0E9e3RvcDpTLmxhdCxyaWdodDpTLmxvbixib3R0b206RSxsZWZ0OkN9fWVsc2UgQT17bGF0OkUsbG9uOkN9O3JldHVybiBBfWZ1bmN0aW9uIFgoZSl7dmFyIHQ9XCJaXCI7cmV0dXJuIDg0Pj1lJiY3Mjw9ZT90PVwiWFwiOjcyPmUmJjY0PD1lP3Q9XCJXXCI6NjQ+ZSYmNTY8PWU/dD1cIlZcIjo1Nj5lJiY0ODw9ZT90PVwiVVwiOjQ4PmUmJjQwPD1lP3Q9XCJUXCI6NDA+ZSYmMzI8PWU/dD1cIlNcIjozMj5lJiYyNDw9ZT90PVwiUlwiOjI0PmUmJjE2PD1lP3Q9XCJRXCI6MTY+ZSYmODw9ZT90PVwiUFwiOjg+ZSYmMDw9ZT90PVwiTlwiOjA+ZSYmLTg8PWU/dD1cIk1cIjotOD5lJiYtMTY8PWU/dD1cIkxcIjotMTY+ZSYmLTI0PD1lP3Q9XCJLXCI6LTI0PmUmJi0zMjw9ZT90PVwiSlwiOi0zMj5lJiYtNDA8PWU/dD1cIkhcIjotNDA+ZSYmLTQ4PD1lP3Q9XCJHXCI6LTQ4PmUmJi01Njw9ZT90PVwiRlwiOi01Nj5lJiYtNjQ8PWU/dD1cIkVcIjotNjQ+ZSYmLTcyPD1lP3Q9XCJEXCI6LTcyPmUmJi04MDw9ZSYmKHQ9XCJDXCIpLHR9ZnVuY3Rpb24gVyhlLHQpe3ZhciBhPVwiMDAwMDBcIitlLmVhc3Rpbmcsbj1cIjAwMDAwXCIrZS5ub3J0aGluZztyZXR1cm4gZS56b25lTnVtYmVyK2Uuem9uZUxldHRlcitRKGUuZWFzdGluZyxlLm5vcnRoaW5nLGUuem9uZU51bWJlcikrYS5zdWJzdHIoYS5sZW5ndGgtNSx0KStuLnN1YnN0cihuLmxlbmd0aC01LHQpfWZ1bmN0aW9uIFEoZSx0LGEpe3ZhciBuPUooYSkscz1yKGUvMWU1KSxpPXIodC8xZTUpJTIwO3JldHVybiBWKHMsaSxuKX1mdW5jdGlvbiBKKGUpe3ZhciB0PWUlNjtyZXR1cm4gMD09PXQmJih0PTYpLHR9ZnVuY3Rpb24gVihlLHQsYSl7dmFyIG49YS0xLHI9XCJBSlNBSlNcIi5jaGFyQ29kZUF0KG4pLHM9XCJBRkFGQUZcIi5jaGFyQ29kZUF0KG4pLGk9citlLTEsbz1zK3QsbD0hMTs5MDxpJiYoaT1pLTkwKzY1LTEsbD0hMCksKDczPT09aXx8NzM+ciYmNzM8aXx8KDczPGl8fDczPnIpJiZsKSYmaSsrLCg3OT09PWl8fDc5PnImJjc5PGl8fCg3OTxpfHw3OT5yKSYmbCkmJihpKyssNzM9PT1pJiZpKyspLDkwPGkmJihpPWktOTArNjUtMSksODY8bz8obz1vLTg2KzY1LTEsbD0hMCk6bD0hMSwoNzM9PT1vfHw3Mz5zJiY3MzxvfHwoNzM8b3x8NzM+cykmJmwpJiZvKyssKDc5PT09b3x8Nzk+cyYmNzk8b3x8KDc5PG98fDc5PnMpJiZsKSYmKG8rKyw3Mz09PW8mJm8rKyksODY8byYmKG89by04Nis2NS0xKTt2YXIgcD1kKGkpK2Qobyk7cmV0dXJuIHB9ZnVuY3Rpb24gJChlKXtpZihlJiYwPT09ZS5sZW5ndGgpdGhyb3dcIk1HUlNQb2ludCBjb3ZlcnRpbmcgZnJvbSBub3RoaW5nXCI7Zm9yKHZhciB0PWUubGVuZ3RoLGE9bnVsbCxuPVwiXCIscj0wLHM7IS9bQS1aXS8udGVzdChzPWUuY2hhckF0KHIpKTspe2lmKDI8PXIpdGhyb3dcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIitlO24rPXMscisrfXZhciBkPXBhcnNlSW50KG4sMTApO2lmKDA9PT1yfHxyKzM+dCl0aHJvd1wiTUdSU1BvaW50IGJhZCBjb252ZXJzaW9uIGZyb206IFwiK2U7dmFyIGw9ZS5jaGFyQXQocisrKTtpZihcIkFcIj49bHx8XCJCXCI9PT1sfHxcIllcIj09PWx8fFwiWlwiPD1sfHxcIklcIj09PWx8fFwiT1wiPT09bCl0aHJvd1wiTUdSU1BvaW50IHpvbmUgbGV0dGVyIFwiK2wrXCIgbm90IGhhbmRsZWQ6IFwiK2U7YT1lLnN1YnN0cmluZyhyLHIrPTIpO2Zvcih2YXIgcD1KKGQpLGM9ZWUoYS5jaGFyQXQoMCkscCksdT10ZShhLmNoYXJBdCgxKSxwKTt1PGFlKGwpOyl1Kz0yZTY7dmFyIG09dC1yO2lmKDAhPW0lMil0aHJvd1wiTUdSU1BvaW50IGhhcyB0byBoYXZlIGFuIGV2ZW4gbnVtYmVyIFxcbm9mIGRpZ2l0cyBhZnRlciB0aGUgem9uZSBsZXR0ZXIgYW5kIHR3byAxMDBrbSBsZXR0ZXJzIC0gZnJvbnQgXFxuaGFsZiBmb3IgZWFzdGluZyBtZXRlcnMsIHNlY29uZCBoYWxmIGZvciBcXG5ub3J0aGluZyBtZXRlcnNcIitlO3ZhciBfPW0vMixmPTAsaD0wLGcseSxiLHgsdztyZXR1cm4gMDxfJiYoZz0xZTUvbygxMCxfKSx5PWUuc3Vic3RyaW5nKHIscitfKSxmPXBhcnNlRmxvYXQoeSkqZyxiPWUuc3Vic3RyaW5nKHIrXyksaD1wYXJzZUZsb2F0KGIpKmcpLHg9ZitjLHc9aCt1LHtlYXN0aW5nOngsbm9ydGhpbmc6dyx6b25lTGV0dGVyOmwsem9uZU51bWJlcjpkLGFjY3VyYWN5Omd9fWZ1bmN0aW9uIGVlKHQsZSl7Zm9yKHZhciBhPVwiQUpTQUpTXCIuY2hhckNvZGVBdChlLTEpLG49MWU1LHI9ITE7YSE9PXQuY2hhckNvZGVBdCgwKTspe2lmKGErKyw3Mz09PWEmJmErKyw3OT09PWEmJmErKyw5MDxhKXtpZihyKXRocm93XCJCYWQgY2hhcmFjdGVyOiBcIit0O2E9NjUscj0hMH1uKz0xZTV9cmV0dXJuIG59ZnVuY3Rpb24gdGUoZSx0KXtpZihcIlZcIjxlKXRocm93XCJNR1JTUG9pbnQgZ2l2ZW4gaW52YWxpZCBOb3J0aGluZyBcIitlO2Zvcih2YXIgYT1cIkFGQUZBRlwiLmNoYXJDb2RlQXQodC0xKSxuPTAscj0hMTthIT09ZS5jaGFyQ29kZUF0KDApOyl7aWYoYSsrLDczPT09YSYmYSsrLDc5PT09YSYmYSsrLDg2PGEpe2lmKHIpdGhyb3dcIkJhZCBjaGFyYWN0ZXI6IFwiK2U7YT02NSxyPSEwfW4rPTFlNX1yZXR1cm4gbn1mdW5jdGlvbiBhZShlKXt2YXIgdDtpZih0PVwiQ1wiPT09ZT8xMWU1OlwiRFwiPT09ZT8yZTY6XCJFXCI9PT1lPzI4ZTU6XCJGXCI9PT1lPzM3ZTU6XCJHXCI9PT1lPzQ2ZTU6XCJIXCI9PT1lPzU1ZTU6XCJKXCI9PT1lPzY0ZTU6XCJLXCI9PT1lPzczZTU6XCJMXCI9PT1lPzgyZTU6XCJNXCI9PT1lPzkxZTU6XCJOXCI9PT1lPzA6XCJQXCI9PT1lPzhlNTpcIlFcIj09PWU/MTdlNTpcIlJcIj09PWU/MjZlNTpcIlNcIj09PWU/MzVlNTpcIlRcIj09PWU/NDRlNTpcIlVcIj09PWU/NTNlNTpcIlZcIj09PWU/NjJlNTpcIldcIj09PWU/N2U2OlwiWFwiPT09ZT83OWU1Oi0xLDA8PXQpcmV0dXJuIHQ7dGhyb3dcIkludmFsaWQgem9uZSBsZXR0ZXI6IFwiK2V9ZnVuY3Rpb24gbmUoZSx0LGEpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG5lKSlyZXR1cm4gbmV3IG5lKGUsdCxhKTtpZihBcnJheS5pc0FycmF5KGUpKXRoaXMueD1lWzBdLHRoaXMueT1lWzFdLHRoaXMuej1lWzJdfHwwO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGUpdGhpcy54PWUueCx0aGlzLnk9ZS55LHRoaXMuej1lLnp8fDA7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQpe3ZhciBuPWUuc3BsaXQoXCIsXCIpO3RoaXMueD1wYXJzZUZsb2F0KG5bMF0sMTApLHRoaXMueT1wYXJzZUZsb2F0KG5bMV0sMTApLHRoaXMuej1wYXJzZUZsb2F0KG5bMl0sMTApfHwwfWVsc2UgdGhpcy54PWUsdGhpcy55PXQsdGhpcy56PWF8fDA7Y29uc29sZS53YXJuKFwicHJvajQuUG9pbnQgd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb24gMywgdXNlIHByb2o0LnRvUG9pbnRcIil9ZnVuY3Rpb24gcmUoZSl7dmFyIGE9W10sbjtyZXR1cm4gYVswXT1lKnF0LG49ZSplLGFbMF0rPW4qSHQsYVsxXT1uKlh0LG4qPWUsYVswXSs9bipLdCxhWzFdKz1uKld0LGFbMl09bipRdCxhfWZ1bmN0aW9uIHNlKGUsYSl7dmFyIG49ZStlO3JldHVybiBlK2FbMF0qZ2UobikrYVsxXSpnZShuK24pK2FbMl0qZ2UobituK24pfWZ1bmN0aW9uIGllKGUsdCxhLHIpe3ZhciBzO3JldHVybiBlPHZlPyhyLnZhbHVlPV9hLkFSRUFfMCxzPTApOihzPXVlKHQsYSksbihzKTw9T2U/ci52YWx1ZT1fYS5BUkVBXzA6cz5PZSYmczw9Q2UrT2U/KHIudmFsdWU9X2EuQVJFQV8xLHMtPUNlKTpzPkNlK09lfHxzPD0tKENlK09lKT8oci52YWx1ZT1fYS5BUkVBXzIscz0wPD1zP3MtTGU6cytMZSk6KHIudmFsdWU9X2EuQVJFQV8zLHMrPUNlKSksc31mdW5jdGlvbiBvZShlLHQpe3ZhciBhPWUrdDtyZXR1cm4gYTwtTGU/YSs9emU6YT4rTGUmJihhLT16ZSksYX1mdW5jdGlvbiBkZShlLHQsYSxyKXtmb3IodmFyIHM9dCxpO3ImJihpPWUocykscy09aSwhKG4oaSk8YSkpOy0tcik7cmV0dXJuIHN9dmFyIHhlPTUsd2U9NDg0ODEzNjgxMTA5NTM2ZS0yMCxDZT1tZS8yLEFlPS4xNjY2NjY2NjY2NjY2NjY2NixTZT0uMDQ3MjIyMjIyMjIyMjIyMjIsa2U9LjAyMjE1NjA4NDY1NjA4NDY1NSx2ZT0xZS0xMCxJZT0uMDE3NDUzMjkyNTE5OTQzMjk1LFJlPTU3LjI5NTc3OTUxMzA4MjMyLE9lPW1lLzQsemU9MiptZSxMZT0zLjE0MTU5MjY1MzU5LFRlPXt9O1RlLmdyZWVud2ljaD0wLFRlLmxpc2Jvbj0tOS4xMzE5MDYxMTExMTEsVGUucGFyaXM9Mi4zMzcyMjkxNjY2NjcsVGUuYm9nb3RhPS03NC4wODA5MTY2NjY2NjcsVGUubWFkcmlkPS0zLjY4NzkzODg4ODg4OSxUZS5yb21lPTEyLjQ1MjMzMzMzMzMzMyxUZS5iZXJuPTcuNDM5NTgzMzMzMzMzLFRlLmpha2FydGE9MTA2LjgwNzcxOTQ0NDQ0NCxUZS5mZXJybz0tMTcuNjY2NjY2NjY2NjY3LFRlLmJydXNzZWxzPTQuMzY3OTc1LFRlLnN0b2NraG9sbT0xOC4wNTgyNzc3Nzc3NzgsVGUuYXRoZW5zPTIzLjcxNjMzNzUsVGUub3Nsbz0xMC43MjI5MTY2NjY2Njc7dmFyIEJlPXtmdDp7dG9fbWV0ZXI6LjMwNDh9LFwidXMtZnRcIjp7dG9fbWV0ZXI6MTIwMC8zOTM3fX0sUGU9L1tcXHNfXFwtXFwvXFwoXFwpXS9nLE5lPWZ1bmN0aW9uKHQpe3ZhciBhPXt9LG49dC5zcGxpdChcIitcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pLnJlZHVjZShmdW5jdGlvbihlLHQpe3ZhciBhPXQuc3BsaXQoXCI9XCIpO3JldHVybiBhLnB1c2goITApLGVbYVswXS50b0xvd2VyQ2FzZSgpXT1hWzFdLGV9LHt9KSxyPXtwcm9qOlwicHJvak5hbWVcIixkYXR1bTpcImRhdHVtQ29kZVwiLHJmOmZ1bmN0aW9uKGUpe2EucmY9cGFyc2VGbG9hdChlKX0sbGF0XzA6ZnVuY3Rpb24oZSl7YS5sYXQwPWUqSWV9LGxhdF8xOmZ1bmN0aW9uKGUpe2EubGF0MT1lKkllfSxsYXRfMjpmdW5jdGlvbihlKXthLmxhdDI9ZSpJZX0sbGF0X3RzOmZ1bmN0aW9uKGUpe2EubGF0X3RzPWUqSWV9LGxvbl8wOmZ1bmN0aW9uKGUpe2EubG9uZzA9ZSpJZX0sbG9uXzE6ZnVuY3Rpb24oZSl7YS5sb25nMT1lKkllfSxsb25fMjpmdW5jdGlvbihlKXthLmxvbmcyPWUqSWV9LGFscGhhOmZ1bmN0aW9uKGUpe2EuYWxwaGE9cGFyc2VGbG9hdChlKSpJZX0sbG9uYzpmdW5jdGlvbihlKXthLmxvbmdjPWUqSWV9LHhfMDpmdW5jdGlvbihlKXthLngwPXBhcnNlRmxvYXQoZSl9LHlfMDpmdW5jdGlvbihlKXthLnkwPXBhcnNlRmxvYXQoZSl9LGtfMDpmdW5jdGlvbihlKXthLmswPXBhcnNlRmxvYXQoZSl9LGs6ZnVuY3Rpb24oZSl7YS5rMD1wYXJzZUZsb2F0KGUpfSxhOmZ1bmN0aW9uKGUpe2EuYT1wYXJzZUZsb2F0KGUpfSxiOmZ1bmN0aW9uKGUpe2EuYj1wYXJzZUZsb2F0KGUpfSxyX2E6ZnVuY3Rpb24oKXthLlJfQT0hMH0sem9uZTpmdW5jdGlvbihlKXthLnpvbmU9cGFyc2VJbnQoZSwxMCl9LHNvdXRoOmZ1bmN0aW9uKCl7YS51dG1Tb3V0aD0hMH0sdG93Z3M4NDpmdW5jdGlvbihlKXthLmRhdHVtX3BhcmFtcz1lLnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZSl9KX0sdG9fbWV0ZXI6ZnVuY3Rpb24oZSl7YS50b19tZXRlcj1wYXJzZUZsb2F0KGUpfSx1bml0czpmdW5jdGlvbih0KXthLnVuaXRzPXQ7dmFyIG49ZShCZSx0KTtuJiYoYS50b19tZXRlcj1uLnRvX21ldGVyKX0sZnJvbV9ncmVlbndpY2g6ZnVuY3Rpb24oZSl7YS5mcm9tX2dyZWVud2ljaD1lKkllfSxwbTpmdW5jdGlvbih0KXt2YXIgbj1lKFRlLHQpO2EuZnJvbV9ncmVlbndpY2g9KG4/bjpwYXJzZUZsb2F0KHQpKSpJZX0sbmFkZ3JpZHM6ZnVuY3Rpb24oZSl7XCJAbnVsbFwiPT09ZT9hLmRhdHVtQ29kZT1cIm5vbmVcIjphLm5hZGdyaWRzPWV9LGF4aXM6ZnVuY3Rpb24oZSl7Mz09PWUubGVuZ3RoJiYtMSE9PVwiZXduc3VkXCIuaW5kZXhPZihlLnN1YnN0cigwLDEpKSYmLTEhPT1cImV3bnN1ZFwiLmluZGV4T2YoZS5zdWJzdHIoMSwxKSkmJi0xIT09XCJld25zdWRcIi5pbmRleE9mKGUuc3Vic3RyKDIsMSkpJiYoYS5heGlzPWUpfX0scyxpLG87Zm9yKHMgaW4gbilpPW5bc10scyBpbiByPyhvPXJbc10sXCJmdW5jdGlvblwiPT10eXBlb2Ygbz9vKGkpOmFbb109aSk6YVtzXT1pO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhLmRhdHVtQ29kZSYmXCJXR1M4NFwiIT09YS5kYXR1bUNvZGUmJihhLmRhdHVtQ29kZT1hLmRhdHVtQ29kZS50b0xvd2VyQ2FzZSgpKSxhfSxEZT0xLGplPTIsVWU9MyxGZT00LE1lPTUsR2U9LTEsWmU9L1ssXFxdXS8sWWU9L1tcXGRcXC5FXFwtXFwrXS87dC5wcm90b3R5cGUucmVhZENoYXJpY3Rlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMudGV4dFt0aGlzLnBsYWNlKytdO2lmKHRoaXMuc3RhdGUhPT1GZSlmb3IoOy9cXHMvLnRlc3QoZSk7KXtpZih0aGlzLnBsYWNlPj10aGlzLnRleHQubGVuZ3RoKXJldHVybjtlPXRoaXMudGV4dFt0aGlzLnBsYWNlKytdfXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIERlOnJldHVybiB0aGlzLm5ldXRyYWwoZSk7Y2FzZSBqZTpyZXR1cm4gdGhpcy5rZXl3b3JkKGUpO2Nhc2UgRmU6cmV0dXJuIHRoaXMucXVvdGVkKGUpO2Nhc2UgTWU6cmV0dXJuIHRoaXMuYWZ0ZXJxdW90ZShlKTtjYXNlIFVlOnJldHVybiB0aGlzLm51bWJlcihlKTtjYXNlIEdlOn19LHQucHJvdG90eXBlLmFmdGVycXVvdGU9ZnVuY3Rpb24oZSl7aWYoXCJcXFwiXCI9PT1lKXJldHVybiB0aGlzLndvcmQrPVwiXFxcIlwiLHZvaWQodGhpcy5zdGF0ZT1GZSk7aWYoWmUudGVzdChlKSlyZXR1cm4gdGhpcy53b3JkPXRoaXMud29yZC50cmltKCksdm9pZCB0aGlzLmFmdGVySXRlbShlKTt0aHJvdyBuZXcgRXJyb3IoXCJoYXZuJ3QgaGFuZGxlZCBcXFwiXCIrZStcIlxcXCIgaW4gYWZ0ZXJxdW90ZSB5ZXQsIGluZGV4IFwiK3RoaXMucGxhY2UpfSx0LnByb3RvdHlwZS5hZnRlckl0ZW09ZnVuY3Rpb24oZSl7cmV0dXJuXCIsXCI9PT1lPyhudWxsIT09dGhpcy53b3JkJiZ0aGlzLmN1cnJlbnRPYmplY3QucHVzaCh0aGlzLndvcmQpLHRoaXMud29yZD1udWxsLHZvaWQodGhpcy5zdGF0ZT1EZSkpOlwiXVwiPT09ZT8odGhpcy5sZXZlbC0tLG51bGwhPT10aGlzLndvcmQmJih0aGlzLmN1cnJlbnRPYmplY3QucHVzaCh0aGlzLndvcmQpLHRoaXMud29yZD1udWxsKSx0aGlzLnN0YXRlPURlLHRoaXMuY3VycmVudE9iamVjdD10aGlzLnN0YWNrLnBvcCgpLHZvaWQodGhpcy5jdXJyZW50T2JqZWN0fHwodGhpcy5zdGF0ZT1HZSkpKTp2b2lkIDB9LHQucHJvdG90eXBlLm51bWJlcj1mdW5jdGlvbihlKXtpZihZZS50ZXN0KGUpKXJldHVybiB2b2lkKHRoaXMud29yZCs9ZSk7aWYoWmUudGVzdChlKSlyZXR1cm4gdGhpcy53b3JkPXBhcnNlRmxvYXQodGhpcy53b3JkKSx2b2lkIHRoaXMuYWZ0ZXJJdGVtKGUpO3Rocm93IG5ldyBFcnJvcihcImhhdm4ndCBoYW5kbGVkIFxcXCJcIitlK1wiXFxcIiBpbiBudW1iZXIgeWV0LCBpbmRleCBcIit0aGlzLnBsYWNlKX0sdC5wcm90b3R5cGUucXVvdGVkPWZ1bmN0aW9uKGUpe3JldHVyblwiXFxcIlwiPT09ZT92b2lkKHRoaXMuc3RhdGU9TWUpOnZvaWQodGhpcy53b3JkKz1lKX0sdC5wcm90b3R5cGUua2V5d29yZD1mdW5jdGlvbihlKXtpZigvW0EtWmEtejg0XS8udGVzdChlKSlyZXR1cm4gdm9pZCh0aGlzLndvcmQrPWUpO2lmKFwiW1wiPT09ZSl7dmFyIHQ9W107cmV0dXJuIHQucHVzaCh0aGlzLndvcmQpLHRoaXMubGV2ZWwrKyxudWxsPT09dGhpcy5yb290P3RoaXMucm9vdD10OnRoaXMuY3VycmVudE9iamVjdC5wdXNoKHQpLHRoaXMuc3RhY2sucHVzaCh0aGlzLmN1cnJlbnRPYmplY3QpLHRoaXMuY3VycmVudE9iamVjdD10LHZvaWQodGhpcy5zdGF0ZT1EZSl9aWYoWmUudGVzdChlKSlyZXR1cm4gdm9pZCB0aGlzLmFmdGVySXRlbShlKTt0aHJvdyBuZXcgRXJyb3IoXCJoYXZuJ3QgaGFuZGxlZCBcXFwiXCIrZStcIlxcXCIgaW4ga2V5d29yZCB5ZXQsIGluZGV4IFwiK3RoaXMucGxhY2UpfSx0LnByb3RvdHlwZS5uZXV0cmFsPWZ1bmN0aW9uKGUpe2lmKC9bQS1aYS16XS8udGVzdChlKSlyZXR1cm4gdGhpcy53b3JkPWUsdm9pZCh0aGlzLnN0YXRlPWplKTtpZihcIlxcXCJcIj09PWUpcmV0dXJuIHRoaXMud29yZD1cIlwiLHZvaWQodGhpcy5zdGF0ZT1GZSk7aWYoWWUudGVzdChlKSlyZXR1cm4gdGhpcy53b3JkPWUsdm9pZCh0aGlzLnN0YXRlPVVlKTtpZihaZS50ZXN0KGUpKXJldHVybiB2b2lkIHRoaXMuYWZ0ZXJJdGVtKGUpO3Rocm93IG5ldyBFcnJvcihcImhhdm4ndCBoYW5kbGVkIFxcXCJcIitlK1wiXFxcIiBpbiBuZXV0cmFsIHlldCwgaW5kZXggXCIrdGhpcy5wbGFjZSl9LHQucHJvdG90eXBlLm91dHB1dD1mdW5jdGlvbigpe2Zvcig7dGhpcy5wbGFjZTx0aGlzLnRleHQubGVuZ3RoOyl0aGlzLnJlYWRDaGFyaWN0ZXIoKTtpZih0aGlzLnN0YXRlPT09R2UpcmV0dXJuIHRoaXMucm9vdDt0aHJvdyBuZXcgRXJyb3IoXCJ1bmFibGUgdG8gcGFyc2Ugc3RyaW5nIFxcXCJcIit0aGlzLnRleHQrXCJcXFwiLiBTdGF0ZSBpcyBcIit0aGlzLnN0YXRlKX07dmFyIHFlPS4wMTc0NTMyOTI1MTk5NDMyOTUsSGU9ZnVuY3Rpb24oZSl7dmFyIHQ9cyhlKSxhPXQuc2hpZnQoKSxuPXQuc2hpZnQoKTt0LnVuc2hpZnQoW1wibmFtZVwiLG5dKSx0LnVuc2hpZnQoW1widHlwZVwiLGFdKTt2YXIgcj17fTtyZXR1cm4gYyh0LHIpLF8ocikscn07KGZ1bmN0aW9uKGUpe2UoXCJFUFNHOjQzMjZcIixcIit0aXRsZT1XR1MgODQgKGxvbmcvbGF0KSArcHJvaj1sb25nbGF0ICtlbGxwcz1XR1M4NCArZGF0dW09V0dTODQgK3VuaXRzPWRlZ3JlZXNcIiksZShcIkVQU0c6NDI2OVwiLFwiK3RpdGxlPU5BRDgzIChsb25nL2xhdCkgK3Byb2o9bG9uZ2xhdCArYT02Mzc4MTM3LjAgK2I9NjM1Njc1Mi4zMTQxNDAzNiArZWxscHM9R1JTODAgK2RhdHVtPU5BRDgzICt1bml0cz1kZWdyZWVzXCIpLGUoXCJFUFNHOjM4NTdcIixcIit0aXRsZT1XR1MgODQgLyBQc2V1ZG8tTWVyY2F0b3IgK3Byb2o9bWVyYyArYT02Mzc4MTM3ICtiPTYzNzgxMzcgK2xhdF90cz0wLjAgK2xvbl8wPTAuMCAreF8wPTAuMCAreV8wPTAgK2s9MS4wICt1bml0cz1tICtuYWRncmlkcz1AbnVsbCArbm9fZGVmc1wiKSxlLldHUzg0PWVbXCJFUFNHOjQzMjZcIl0sZVtcIkVQU0c6Mzc4NVwiXT1lW1wiRVBTRzozODU3XCJdLGUuR09PR0xFPWVbXCJFUFNHOjM4NTdcIl0sZVtcIkVQU0c6OTAwOTEzXCJdPWVbXCJFUFNHOjM4NTdcIl0sZVtcIkVQU0c6MTAyMTEzXCJdPWVbXCJFUFNHOjM4NTdcIl19KShmKTt2YXIgS2U9W1wiUFJPSkVDVEVEQ1JTXCIsXCJQUk9KQ1JTXCIsXCJHRU9HQ1NcIixcIkdFT0NDU1wiLFwiUFJPSkNTXCIsXCJMT0NBTF9DU1wiLFwiR0VPRENSU1wiLFwiR0VPREVUSUNDUlNcIixcIkdFT0RFVElDREFUVU1cIixcIkVOR0NSU1wiLFwiRU5HSU5FRVJJTkdDUlNcIl0sWGU9W1wiMzg1N1wiLFwiOTAwOTEzXCIsXCIzNzg1XCIsXCIxMDIxMTNcIl0sV2U9ZnVuY3Rpb24oZSx0KXtlPWV8fHt9O3ZhciBhLG47aWYoIXQpcmV0dXJuIGU7Zm9yKG4gaW4gdClhPXRbbl0sdm9pZCAwIT09YSYmKGVbbl09YSk7cmV0dXJuIGV9LFFlPWZ1bmN0aW9uKGUsdCxhKXt2YXIgbj1lKnQ7cmV0dXJuIGEvYmUoMS1uKm4pfSxKZT1mdW5jdGlvbihlKXtyZXR1cm4gMD5lPy0xOjF9LFZlPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpPD1MZT9lOmUtSmUoZSkqemV9LCRlPWZ1bmN0aW9uKGUsdCxhKXt2YXIgbj1lKmE7cmV0dXJuIG49bygoMS1uKS8oMStuKSwuNSplKSxoZSguNSooQ2UtdCkpL259LGV0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBhPUNlLTIqX2UodCkscj0wLHMsZDsxNT49cjtyKyspaWYocz1lKmdlKGEpLGQ9Q2UtMipfZSh0Km8oKDEtcykvKDErcyksLjUqZSkpLWEsYSs9ZCwxZS0xMD49bihkKSlyZXR1cm4gYTtyZXR1cm4tOTk5OX0sdHQ9W3tpbml0OkMsZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngscj1lLnk7aWYoOTA8cipSZSYmLTkwPnIqUmUmJjE4MDx0KlJlJiYtMTgwPnQqUmUpcmV0dXJuIG51bGw7dmFyIHMsaTtpZihuKG4ociktQ2UpPD12ZSlyZXR1cm4gbnVsbDtpZih0aGlzLnNwaGVyZSlzPXRoaXMueDArdGhpcy5hKnRoaXMuazAqVmUodC10aGlzLmxvbmcwKSxpPXRoaXMueTArdGhpcy5hKnRoaXMuazAqYShoZShPZSsuNSpyKSk7ZWxzZXt2YXIgbz1nZShyKSxkPSRlKHRoaXMuZSxyLG8pO3M9dGhpcy54MCt0aGlzLmEqdGhpcy5rMCpWZSh0LXRoaXMubG9uZzApLGk9dGhpcy55MC10aGlzLmEqdGhpcy5rMCphKGQpfXJldHVybiBlLng9cyxlLnk9aSxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe3ZhciB0PWUueC10aGlzLngwLGE9ZS55LXRoaXMueTAsbixyO2lmKHRoaXMuc3BoZXJlKXI9Q2UtMipfZShmZSgtYS8odGhpcy5hKnRoaXMuazApKSk7ZWxzZXt2YXIgcz1mZSgtYS8odGhpcy5hKnRoaXMuazApKTtpZihyPWV0KHRoaXMuZSxzKSwtOTk5OT09PXIpcmV0dXJuIG51bGx9cmV0dXJuIG49VmUodGhpcy5sb25nMCt0Lyh0aGlzLmEqdGhpcy5rMCkpLGUueD1uLGUueT1yLGV9LG5hbWVzOltcIk1lcmNhdG9yXCIsXCJQb3B1bGFyIFZpc3VhbGlzYXRpb24gUHNldWRvIE1lcmNhdG9yXCIsXCJNZXJjYXRvcl8xU1BcIixcIk1lcmNhdG9yX0F1eGlsaWFyeV9TcGhlcmVcIixcIm1lcmNcIl19LHtpbml0OmZ1bmN0aW9uKCl7fSxmb3J3YXJkOkEsaW52ZXJzZTpBLG5hbWVzOltcImxvbmdsYXRcIixcImlkZW50aXR5XCJdfV0sYXQ9e30sbnQ9W10scnQ9e307cnQuTUVSSVQ9e2E6NjM3ODEzNyxyZjoyOTguMjU3LGVsbGlwc2VOYW1lOlwiTUVSSVQgMTk4M1wifSxydC5TR1M4NT17YTo2Mzc4MTM2LHJmOjI5OC4yNTcsZWxsaXBzZU5hbWU6XCJTb3ZpZXQgR2VvZGV0aWMgU3lzdGVtIDg1XCJ9LHJ0LkdSUzgwPXthOjYzNzgxMzcscmY6Mjk4LjI1NzIyMjEwMSxlbGxpcHNlTmFtZTpcIkdSUyAxOTgwKElVR0csIDE5ODApXCJ9LHJ0LklBVTc2PXthOjYzNzgxNDAscmY6Mjk4LjI1NyxlbGxpcHNlTmFtZTpcIklBVSAxOTc2XCJ9LHJ0LmFpcnk9e2E6NjM3NzU2My4zOTYsYjo2MzU2MjU2LjkxLGVsbGlwc2VOYW1lOlwiQWlyeSAxODMwXCJ9LHJ0LkFQTDQ9e2E6NjM3ODEzNyxyZjoyOTguMjUsZWxsaXBzZU5hbWU6XCJBcHBsLiBQaHlzaWNzLiAxOTY1XCJ9LHJ0Lk5XTDlEPXthOjYzNzgxNDUscmY6Mjk4LjI1LGVsbGlwc2VOYW1lOlwiTmF2YWwgV2VhcG9ucyBMYWIuLCAxOTY1XCJ9LHJ0Lm1vZF9haXJ5PXthOjYzNzczNDAuMTg5LGI6NjM1NjAzNC40NDYsZWxsaXBzZU5hbWU6XCJNb2RpZmllZCBBaXJ5XCJ9LHJ0LmFuZHJhZT17YTo2Mzc3MTA0LjQzLHJmOjMwMCxlbGxpcHNlTmFtZTpcIkFuZHJhZSAxODc2IChEZW4uLCBJY2xuZC4pXCJ9LHJ0LmF1c3RfU0E9e2E6NjM3ODE2MCxyZjoyOTguMjUsZWxsaXBzZU5hbWU6XCJBdXN0cmFsaWFuIE5hdGwgJiBTLiBBbWVyLiAxOTY5XCJ9LHJ0LkdSUzY3PXthOjYzNzgxNjAscmY6Mjk4LjI0NzE2NzQyNyxlbGxpcHNlTmFtZTpcIkdSUyA2NyhJVUdHIDE5NjcpXCJ9LHJ0LmJlc3NlbD17YTo2Mzc3Mzk3LjE1NSxyZjoyOTkuMTUyODEyOCxlbGxpcHNlTmFtZTpcIkJlc3NlbCAxODQxXCJ9LHJ0LmJlc3NfbmFtPXthOjYzNzc0ODMuODY1LHJmOjI5OS4xNTI4MTI4LGVsbGlwc2VOYW1lOlwiQmVzc2VsIDE4NDEgKE5hbWliaWEpXCJ9LHJ0LmNscms2Nj17YTo2Mzc4MjA2LjQsYjo2MzU2NTgzLjgsZWxsaXBzZU5hbWU6XCJDbGFya2UgMTg2NlwifSxydC5jbHJrODA9e2E6NjM3ODI0OS4xNDUscmY6MjkzLjQ2NjMsZWxsaXBzZU5hbWU6XCJDbGFya2UgMTg4MCBtb2QuXCJ9LHJ0LmNscms1OD17YTo2Mzc4MjkzLjY0NTIwODc1OSxyZjoyOTQuMjYwNjc2MzY5MjY1NCxlbGxpcHNlTmFtZTpcIkNsYXJrZSAxODU4XCJ9LHJ0LkNQTT17YTo2Mzc1NzM4LjcscmY6MzM0LjI5LGVsbGlwc2VOYW1lOlwiQ29tbS4gZGVzIFBvaWRzIGV0IE1lc3VyZXMgMTc5OVwifSxydC5kZWxtYnI9e2E6NjM3NjQyOCxyZjozMTEuNSxlbGxpcHNlTmFtZTpcIkRlbGFtYnJlIDE4MTAgKEJlbGdpdW0pXCJ9LHJ0LmVuZ2VsaXM9e2E6NjM3ODEzNi4wNSxyZjoyOTguMjU2NixlbGxpcHNlTmFtZTpcIkVuZ2VsaXMgMTk4NVwifSxydC5ldnJzdDMwPXthOjYzNzcyNzYuMzQ1LHJmOjMwMC44MDE3LGVsbGlwc2VOYW1lOlwiRXZlcmVzdCAxODMwXCJ9LHJ0LmV2cnN0NDg9e2E6NjM3NzMwNC4wNjMscmY6MzAwLjgwMTcsZWxsaXBzZU5hbWU6XCJFdmVyZXN0IDE5NDhcIn0scnQuZXZyc3Q1Nj17YTo2Mzc3MzAxLjI0MyxyZjozMDAuODAxNyxlbGxpcHNlTmFtZTpcIkV2ZXJlc3QgMTk1NlwifSxydC5ldnJzdDY5PXthOjYzNzcyOTUuNjY0LHJmOjMwMC44MDE3LGVsbGlwc2VOYW1lOlwiRXZlcmVzdCAxOTY5XCJ9LHJ0LmV2cnN0U1M9e2E6NjM3NzI5OC41NTYscmY6MzAwLjgwMTcsZWxsaXBzZU5hbWU6XCJFdmVyZXN0IChTYWJhaCAmIFNhcmF3YWspXCJ9LHJ0LmZzY2hyNjA9e2E6NjM3ODE2NixyZjoyOTguMyxlbGxpcHNlTmFtZTpcIkZpc2NoZXIgKE1lcmN1cnkgRGF0dW0pIDE5NjBcIn0scnQuZnNjaHI2MG09e2E6NjM3ODE1NSxyZjoyOTguMyxlbGxpcHNlTmFtZTpcIkZpc2NoZXIgMTk2MFwifSxydC5mc2NocjY4PXthOjYzNzgxNTAscmY6Mjk4LjMsZWxsaXBzZU5hbWU6XCJGaXNjaGVyIDE5NjhcIn0scnQuaGVsbWVydD17YTo2Mzc4MjAwLHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiSGVsbWVydCAxOTA2XCJ9LHJ0LmhvdWdoPXthOjYzNzgyNzAscmY6Mjk3LGVsbGlwc2VOYW1lOlwiSG91Z2hcIn0scnQuaW50bD17YTo2Mzc4Mzg4LHJmOjI5NyxlbGxpcHNlTmFtZTpcIkludGVybmF0aW9uYWwgMTkwOSAoSGF5Zm9yZClcIn0scnQua2F1bGE9e2E6NjM3ODE2MyxyZjoyOTguMjQsZWxsaXBzZU5hbWU6XCJLYXVsYSAxOTYxXCJ9LHJ0LmxlcmNoPXthOjYzNzgxMzkscmY6Mjk4LjI1NyxlbGxpcHNlTmFtZTpcIkxlcmNoIDE5NzlcIn0scnQubXBydHM9e2E6NjM5NzMwMCxyZjoxOTEsZWxsaXBzZU5hbWU6XCJNYXVwZXJ0aXVzIDE3MzhcIn0scnQubmV3X2ludGw9e2E6NjM3ODE1Ny41LGI6NjM1Njc3Mi4yLGVsbGlwc2VOYW1lOlwiTmV3IEludGVybmF0aW9uYWwgMTk2N1wifSxydC5wbGVzc2lzPXthOjYzNzY1MjMscmY6NjM1NTg2MyxlbGxpcHNlTmFtZTpcIlBsZXNzaXMgMTgxNyAoRnJhbmNlKVwifSxydC5rcmFzcz17YTo2Mzc4MjQ1LHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiS3Jhc3NvdnNreSwgMTk0MlwifSxydC5TRWFzaWE9e2E6NjM3ODE1NSxiOjYzNTY3NzMuMzIwNSxlbGxpcHNlTmFtZTpcIlNvdXRoZWFzdCBBc2lhXCJ9LHJ0LndhbGJlY2s9e2E6NjM3Njg5NixiOjYzNTU4MzQuODQ2NyxlbGxpcHNlTmFtZTpcIldhbGJlY2tcIn0scnQuV0dTNjA9e2E6NjM3ODE2NSxyZjoyOTguMyxlbGxpcHNlTmFtZTpcIldHUyA2MFwifSxydC5XR1M2Nj17YTo2Mzc4MTQ1LHJmOjI5OC4yNSxlbGxpcHNlTmFtZTpcIldHUyA2NlwifSxydC5XR1M3PXthOjYzNzgxMzUscmY6Mjk4LjI2LGVsbGlwc2VOYW1lOlwiV0dTIDcyXCJ9O3ZhciBzdD1ydC5XR1M4ND17YTo2Mzc4MTM3LHJmOjI5OC4yNTcyMjM1NjMsZWxsaXBzZU5hbWU6XCJXR1MgODRcIn07cnQuc3BoZXJlPXthOjYzNzA5OTcsYjo2MzcwOTk3LGVsbGlwc2VOYW1lOlwiTm9ybWFsIFNwaGVyZSAocj02MzcwOTk3KVwifTt2YXIgaXQ9e307aXQud2dzODQ9e3Rvd2dzODQ6XCIwLDAsMFwiLGVsbGlwc2U6XCJXR1M4NFwiLGRhdHVtTmFtZTpcIldHUzg0XCJ9LGl0LmNoMTkwMz17dG93Z3M4NDpcIjY3NC4zNzQsMTUuMDU2LDQwNS4zNDZcIixlbGxpcHNlOlwiYmVzc2VsXCIsZGF0dW1OYW1lOlwic3dpc3NcIn0saXQuZ2dyczg3PXt0b3dnczg0OlwiLTE5OS44Nyw3NC43OSwyNDYuNjJcIixlbGxpcHNlOlwiR1JTODBcIixkYXR1bU5hbWU6XCJHcmVla19HZW9kZXRpY19SZWZlcmVuY2VfU3lzdGVtXzE5ODdcIn0saXQubmFkODM9e3Rvd2dzODQ6XCIwLDAsMFwiLGVsbGlwc2U6XCJHUlM4MFwiLGRhdHVtTmFtZTpcIk5vcnRoX0FtZXJpY2FuX0RhdHVtXzE5ODNcIn0saXQubmFkMjc9e25hZGdyaWRzOlwiQGNvbnVzLEBhbGFza2EsQG50djJfMC5nc2IsQG50djFfY2FuLmRhdFwiLGVsbGlwc2U6XCJjbHJrNjZcIixkYXR1bU5hbWU6XCJOb3J0aF9BbWVyaWNhbl9EYXR1bV8xOTI3XCJ9LGl0LnBvdHNkYW09e3Rvd2dzODQ6XCI2MDYuMCwyMy4wLDQxMy4wXCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcIlBvdHNkYW0gUmF1ZW5iZXJnIDE5NTAgREhETlwifSxpdC5jYXJ0aGFnZT17dG93Z3M4NDpcIi0yNjMuMCw2LjAsNDMxLjBcIixlbGxpcHNlOlwiY2xhcms4MFwiLGRhdHVtTmFtZTpcIkNhcnRoYWdlIDE5MzQgVHVuaXNpYVwifSxpdC5oZXJtYW5uc2tvZ2VsPXt0b3dnczg0OlwiNjUzLjAsLTIxMi4wLDQ0OS4wXCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcIkhlcm1hbm5za29nZWxcIn0saXQub3NuaTUyPXt0b3dnczg0OlwiNDgyLjUzMCwtMTMwLjU5Niw1NjQuNTU3LC0xLjA0MiwtMC4yMTQsLTAuNjMxLDguMTVcIixlbGxpcHNlOlwiYWlyeVwiLGRhdHVtTmFtZTpcIklyaXNoIE5hdGlvbmFsXCJ9LGl0LmlyZTY1PXt0b3dnczg0OlwiNDgyLjUzMCwtMTMwLjU5Niw1NjQuNTU3LC0xLjA0MiwtMC4yMTQsLTAuNjMxLDguMTVcIixlbGxpcHNlOlwibW9kX2FpcnlcIixkYXR1bU5hbWU6XCJJcmVsYW5kIDE5NjVcIn0saXQucmFzc2FkaXJhbj17dG93Z3M4NDpcIi0xMzMuNjMsLTE1Ny41LC0xNTguNjJcIixlbGxpcHNlOlwiaW50bFwiLGRhdHVtTmFtZTpcIlJhc3NhZGlyYW5cIn0saXQubnpnZDQ5PXt0b3dnczg0OlwiNTkuNDcsLTUuMDQsMTg3LjQ0LDAuNDcsLTAuMSwxLjAyNCwtNC41OTkzXCIsZWxsaXBzZTpcImludGxcIixkYXR1bU5hbWU6XCJOZXcgWmVhbGFuZCBHZW9kZXRpYyBEYXR1bSAxOTQ5XCJ9LGl0Lm9zZ2IzNj17dG93Z3M4NDpcIjQ0Ni40NDgsLTEyNS4xNTcsNTQyLjA2MCwwLjE1MDIsMC4yNDcwLDAuODQyMSwtMjAuNDg5NFwiLGVsbGlwc2U6XCJhaXJ5XCIsZGF0dW1OYW1lOlwiQWlyeSAxODMwXCJ9LGl0LnNfanRzaz17dG93Z3M4NDpcIjU4OSw3Niw0ODBcIixlbGxpcHNlOlwiYmVzc2VsXCIsZGF0dW1OYW1lOlwiUy1KVFNLIChGZXJybylcIn0saXQuYmVkdWFyYW09e3Rvd2dzODQ6XCItMTA2LC04NywxODhcIixlbGxpcHNlOlwiY2xyazgwXCIsZGF0dW1OYW1lOlwiQmVkdWFyYW1cIn0saXQuZ3VudW5nX3NlZ2FyYT17dG93Z3M4NDpcIi00MDMsNjg0LDQxXCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcIkd1bnVuZyBTZWdhcmEgSmFrYXJ0YVwifSxpdC5ybmI3Mj17dG93Z3M4NDpcIjEwNi44NjksLTUyLjI5NzgsMTAzLjcyNCwtMC4zMzY1NywwLjQ1Njk1NSwtMS44NDIxOCwxXCIsZWxsaXBzZTpcImludGxcIixkYXR1bU5hbWU6XCJSZXNlYXUgTmF0aW9uYWwgQmVsZ2UgMTk3MlwifSxSLnByb2plY3Rpb25zPXtzdGFydDpmdW5jdGlvbigpe3R0LmZvckVhY2goUyl9LGFkZDpTLGdldDpmdW5jdGlvbihlKXtpZighZSlyZXR1cm4hMTt2YXIgdD1lLnRvTG93ZXJDYXNlKCk7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGF0W3RdJiZudFthdFt0XV0pcmV0dXJuIG50W2F0W3RdXX19LFIucHJvamVjdGlvbnMuc3RhcnQoKSxcInVzZSBzdHJpY3RcIjt2YXIgb3Q9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBPKGUsdCk/YTplLmRhdHVtX3R5cGU9PT14ZXx8dC5kYXR1bV90eXBlPT09eGU/YTplLmVzIT09dC5lc3x8ZS5hIT09dC5hfHxQKGUuZGF0dW1fdHlwZSl8fFAodC5kYXR1bV90eXBlKT8oYT16KGEsZS5lcyxlLmEpLFAoZS5kYXR1bV90eXBlKSYmKGE9VChhLGUuZGF0dW1fdHlwZSxlLmRhdHVtX3BhcmFtcykpLFAodC5kYXR1bV90eXBlKSYmKGE9QihhLHQuZGF0dW1fdHlwZSx0LmRhdHVtX3BhcmFtcykpLEwoYSx0LmVzLHQuYSx0LmIpKTphfSxkdD1mdW5jdGlvbihlLGEsbil7dmFyIHI9bi54LHM9bi55LG89bi56fHwwLGQ9e30sbCxwLGM7Zm9yKGM9MDszPmM7YysrKWlmKCEoYSYmMj09PWMmJnZvaWQgMD09PW4ueikpc3dpdGNoKDA9PT1jPyhsPXIscD0tMT09PVwiZXdcIi5pbmRleE9mKGUuYXhpc1tjXSk/XCJ5XCI6XCJ4XCIpOjE9PT1jPyhsPXMscD0tMT09PVwibnNcIi5pbmRleE9mKGUuYXhpc1tjXSk/XCJ4XCI6XCJ5XCIpOihsPW8scD1cInpcIiksZS5heGlzW2NdKXtjYXNlXCJlXCI6Y2FzZVwid1wiOmNhc2VcIm5cIjpjYXNlXCJzXCI6ZFtwXT1sO2JyZWFrO2Nhc2VcInVcIjp2b2lkIDAhPT1uW3BdJiYoZC56PWwpO2JyZWFrO2Nhc2VcImRcIjp2b2lkIDAhPT1uW3BdJiYoZC56PS1sKTticmVhaztkZWZhdWx0OnJldHVybiBudWxsO31yZXR1cm4gZH0sbHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9e3g6ZVswXSx5OmVbMV19O3JldHVybiAyPGUubGVuZ3RoJiYodC56PWVbMl0pLDM8ZS5sZW5ndGgmJih0Lm09ZVszXSksdH0scHQ9ZnVuY3Rpb24oZSl7TihlLngpLE4oZS55KX0sY3Q9UihcIldHUzg0XCIpO25lLmZyb21NR1JTPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbmUoWihlKSl9LG5lLnByb3RvdHlwZS50b01HUlM9ZnVuY3Rpb24oZSl7cmV0dXJuIEcoW3RoaXMueCx0aGlzLnldLGUpfTt2YXIgdXQ9LjA0Njg3NSxtdD0uMDE5NTMxMjUsX3Q9LjAxMDY4MTE1MjM0Mzc1LGZ0PWZ1bmN0aW9uKGUpe3ZhciBhPVtdO2FbMF09MS1lKiguMjUrZSoodXQrZSoobXQrZSpfdCkpKSxhWzFdPWUqKC43NS1lKih1dCtlKihtdCtlKl90KSkpO3ZhciBuPWUqZTtyZXR1cm4gYVsyXT1uKiguNDY4NzUtZSooLjAxMzAyMDgzMzMzMzMzMzMzNCtlKi4wMDcxMjA3NjgyMjkxNjY2NjcpKSxuKj1lLGFbM109biooLjM2NDU4MzMzMzMzMzMzMzMtZSouMDA1Njk2NjE0NTgzMzMzMzMzKSxhWzRdPW4qZSouMzA3NjE3MTg3NSxhfSxodD1mdW5jdGlvbihlLHQsYSxuKXtyZXR1cm4gYSo9dCx0Kj10LG5bMF0qZS1hKihuWzFdK3QqKG5bMl0rdCooblszXSt0Km5bNF0pKSl9LGd0PWZ1bmN0aW9uKGUsYSxyKXtmb3IodmFyIG89ZSxkPTIwO2Q7LS1kKXt2YXIgbD1nZShvKSxzPTEtYSpsKmw7aWYocz0oaHQobyxsLHllKG8pLHIpLWUpKihzKmJlKHMpKSooMS8oMS1hKSksby09cyxuKHMpPHZlKXJldHVybiBvfXJldHVybiBvfSx5dD17aW5pdDpmdW5jdGlvbigpe3RoaXMueDA9dm9pZCAwPT09dGhpcy54MD8wOnRoaXMueDAsdGhpcy55MD12b2lkIDA9PT10aGlzLnkwPzA6dGhpcy55MCx0aGlzLmxvbmcwPXZvaWQgMD09PXRoaXMubG9uZzA/MDp0aGlzLmxvbmcwLHRoaXMubGF0MD12b2lkIDA9PT10aGlzLmxhdDA/MDp0aGlzLmxhdDAsdGhpcy5lcyYmKHRoaXMuZW49ZnQodGhpcy5lcyksdGhpcy5tbDA9aHQodGhpcy5sYXQwLGdlKHRoaXMubGF0MCkseWUodGhpcy5sYXQwKSx0aGlzLmVuKSl9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHI9ZS54LHM9ZS55LGk9VmUoci10aGlzLmxvbmcwKSxkPWdlKHMpLGw9eWUocykscCx1LG07aWYoIXRoaXMuZXMpe3ZhciBfPWwqZ2UoaSk7aWYobihuKF8pLTEpPHZlKXJldHVybiA5MztpZih1PS41KnRoaXMuYSp0aGlzLmswKmEoKDErXykvKDEtXykpK3RoaXMueDAsbT1sKnllKGkpL2JlKDEtbyhfLDIpKSxfPW4obSksMTw9Xyl7aWYoXy0xPnZlKXJldHVybiA5MzttPTB9ZWxzZSBtPXBlKG0pOzA+cyYmKG09LW0pLG09dGhpcy5hKnRoaXMuazAqKG0tdGhpcy5sYXQwKSt0aGlzLnkwfWVsc2V7dmFyIGY9bCppLGg9byhmLDIpLGc9dGhpcy5lcDIqbyhsLDIpLGM9byhnLDIpLHc9bihsKT52ZT9oZShzKTowLEU9byh3LDIpLHQ9byhFLDIpO3A9MS10aGlzLmVzKm8oZCwyKSxmLz1iZShwKTt2YXIgQz1odChzLGQsbCx0aGlzLmVuKTt1PXRoaXMuYSoodGhpcy5rMCpmKigxK2gvNiooMS1FK2craC8yMCooNS0xOCpFK3QrMTQqZy01OCpFKmcraC80MiooNjErMTc5KnQtdCpFLTQ3OSpFKSkpKSkrdGhpcy54MCxtPXRoaXMuYSoodGhpcy5rMCooQy10aGlzLm1sMCtkKmkqZi8yKigxK2gvMTIqKDUtRSs5KmcrNCpjK2gvMzAqKDYxK3QtNTgqRSsyNzAqZy0zMzAqRSpnK2gvNTYqKDEzODUrNTQzKnQtdCpFLTMxMTEqRSkpKSkpKSt0aGlzLnkwfXJldHVybiBlLng9dSxlLnk9bSxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe3ZhciBhPShlLngtdGhpcy54MCkqKDEvdGhpcy5hKSxyPShlLnktdGhpcy55MCkqKDEvdGhpcy5hKSxzLGksbCxwO2lmKCF0aGlzLmVzKXt2YXIgdT1mZShhL3RoaXMuazApLG09LjUqKHUtMS91KSxfPXRoaXMubGF0MCtyL3RoaXMuazAsZj15ZShfKTtzPWJlKCgxLW8oZiwyKSkvKDErbyhtLDIpKSksbD1sZShzKSwwPnImJihsPS1sKSxwPTA9PT1tJiYwPT09Zj8wOlZlKHVlKG0sZikrdGhpcy5sb25nMCl9ZWxzZSBpZihzPXRoaXMubWwwK3IvdGhpcy5rMCxpPWd0KHMsdGhpcy5lcyx0aGlzLmVuKSxuKGkpPENlKXt2YXIgaD1nZShpKSxnPXllKGkpLHk9bihnKT52ZT9oZShpKTowLGI9dGhpcy5lcDIqbyhnLDIpLGM9byhiLDIpLHg9byh5LDIpLHQ9byh4LDIpO3M9MS10aGlzLmVzKm8oaCwyKTt2YXIgdz1hKmJlKHMpL3RoaXMuazAsZD1vKHcsMik7cyo9eSxsPWktLjUqKHMqZC8oMS10aGlzLmVzKSkqKDEtZC8xMiooNSszKngtOSpiKngrYi00KmMtZC8zMCooNjErOTAqeC0yNTIqYip4KzQ1KnQrNDYqYi1kLzU2KigxMzg1KzM2MzMqeCs0MDk1KnQrMTU3NCp0KngpKSkpLHA9VmUodGhpcy5sb25nMCt3KigxLWQvNiooMSsyKngrYi1kLzIwKig1KzI4KngrMjQqdCs4KmIqeCs2KmItZC80MiooNjErNjYyKngrMTMyMCp0KzcyMCp0KngpKSkpL2cpfWVsc2UgbD1DZSpKZShyKSxwPTA7cmV0dXJuIGUueD1wLGUueT1sLGV9LG5hbWVzOltcIlRyYW5zdmVyc2VfTWVyY2F0b3JcIixcIlRyYW5zdmVyc2UgTWVyY2F0b3JcIixcInRtZXJjXCJdfSxidD1mdW5jdGlvbihlKXt2YXIgdD1mZShlKTtyZXR1cm4gdD0odC0xL3QpLzIsdH0seHQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1NYXRoLm1heDtlPW4oZSksdD1uKHQpO3ZhciBzPXIoZSx0KSxhPWwoZSx0KS8ocz9zOjEpO3JldHVybiBzKmJlKDErbyhhLDIpKX0sd3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9MStlLG49dC0xO3JldHVybiAwPT09bj9lOmUqYSh0KS9ufSxFdD1mdW5jdGlvbihlKXt2YXIgdD1uKGUpO3JldHVybiB0PXd0KHQqKDErdC8oeHQoMSx0KSsxKSkpLDA+ZT8tdDp0fSxDdD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgYT0yKnllKDIqdCksbj1lLmxlbmd0aC0xLHI9ZVtuXSxzPTAsbzswPD0tLW47KW89LXMrYSpyK2Vbbl0scz1yLHI9bztyZXR1cm4gdCtvKmdlKDIqdCl9LEF0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBhPTIqeWUodCksbj1lLmxlbmd0aC0xLHI9ZVtuXSxzPTAsbzswPD0tLW47KW89LXMrYSpyK2Vbbl0scz1yLHI9bztyZXR1cm4gZ2UodCkqb30sU3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZmUoZSk7cmV0dXJuIHQ9KHQrMS90KS8yLHR9LGt0PWZ1bmN0aW9uKGUsdCxhKXtmb3IodmFyIG49Z2UodCkscz15ZSh0KSxvPWJ0KGEpLGQ9U3QoYSksbD0yKnMqZCxwPS0yKm4qbyxjPWUubGVuZ3RoLTEsdT1lW2NdLG09MCxfPTAsZj0wLGgsZzswPD0tLWM7KWg9XyxnPW0sXz11LG09Zix1PS1oK2wqXy1wKm0rZVtjXSxmPS1nK3AqXytsKm07cmV0dXJuIGw9bipkLHA9cypvLFtsKnUtcCpmLGwqZitwKnVdfSx2dD17aW5pdDpmdW5jdGlvbigpe2lmKHZvaWQgMD09PXRoaXMuZXN8fDA+PXRoaXMuZXMpdGhyb3cgbmV3IEVycm9yKFwiaW5jb3JyZWN0IGVsbGlwdGljYWwgdXNhZ2VcIik7dGhpcy54MD12b2lkIDA9PT10aGlzLngwPzA6dGhpcy54MCx0aGlzLnkwPXZvaWQgMD09PXRoaXMueTA/MDp0aGlzLnkwLHRoaXMubG9uZzA9dm9pZCAwPT09dGhpcy5sb25nMD8wOnRoaXMubG9uZzAsdGhpcy5sYXQwPXZvaWQgMD09PXRoaXMubGF0MD8wOnRoaXMubGF0MCx0aGlzLmNnYj1bXSx0aGlzLmNiZz1bXSx0aGlzLnV0Zz1bXSx0aGlzLmd0dT1bXTt2YXIgZT10aGlzLmVzLygxK2JlKDEtdGhpcy5lcykpLHQ9ZS8oMi1lKSxhPXQ7dGhpcy5jZ2JbMF09dCooMit0KigtMi8zK3QqKC0yK3QqKDExNi80NSt0KigyNi80NSt0KigtMjg1NC82NzUpKSkpKSksdGhpcy5jYmdbMF09dCooLTIrdCooMi8zK3QqKDQvMyt0KigtODIvNDUrdCooMzIvNDUrdCooNDY0Mi80NzI1KSkpKSkpLGEqPXQsdGhpcy5jZ2JbMV09YSooNy8zK3QqKC04LzUrdCooLTIyNy80NSt0KigyNzA0LzMxNSt0KigyMzIzLzk0NSkpKSkpLHRoaXMuY2JnWzFdPWEqKDUvMyt0KigtMTYvMTUrdCooLTEzLzkrdCooOTA0LzMxNSt0KigtMTUyMi85NDUpKSkpKSxhKj10LHRoaXMuY2diWzJdPWEqKDU2LzE1K3QqKC0xMzYvMzUrdCooLTEyNjIvMTA1K3QqKDczODE0LzI4MzUpKSkpLHRoaXMuY2JnWzJdPWEqKC0yNi8xNSt0KigzNC8yMSt0Kig4LzUrdCooLTEyNjg2LzI4MzUpKSkpLGEqPXQsdGhpcy5jZ2JbM109YSooNDI3OS82MzArdCooLTMzMi8zNSt0KigtMzk5NTcyLzE0MTc1KSkpLHRoaXMuY2JnWzNdPWEqKDEyMzcvNjMwK3QqKC0xMi81K3QqKC0yNDgzMi8xNDE3NSkpKSxhKj10LHRoaXMuY2diWzRdPWEqKDQxNzQvMzE1K3QqKC0xNDQ4MzgvNjIzNykpLHRoaXMuY2JnWzRdPWEqKC03MzQvMzE1K3QqKDEwOTU5OC8zMTE4NSkpLGEqPXQsdGhpcy5jZ2JbNV09YSooNjAxNjc2LzIyMjc1KSx0aGlzLmNiZ1s1XT1hKig0NDQzMzcvMTU1OTI1KSxhPW8odCwyKSx0aGlzLlFuPXRoaXMuazAvKDErdCkqKDErYSooMS80K2EqKDEvNjQrYS8yNTYpKSksdGhpcy51dGdbMF09dCooLS41K3QqKDIvMyt0KigtMzcvOTYrdCooMS8zNjArdCooODEvNTEyK3QqKC05NjE5OS82MDQ4MDApKSkpKSksdGhpcy5ndHVbMF09dCooLjUrdCooLTIvMyt0Kig1LzE2K3QqKDQxLzE4MCt0KigtMTI3LzI4OCt0Kig3ODkxLzM3ODAwKSkpKSkpLHRoaXMudXRnWzFdPWEqKC0xLzQ4K3QqKC0xLzE1K3QqKDQzNy8xNDQwK3QqKC00Ni8xMDUrdCooMTExODcxMS8zODcwNzIwKSkpKSksdGhpcy5ndHVbMV09YSooMTMvNDgrdCooLTMvNSt0Kig1NTcvMTQ0MCt0KigyODEvNjMwK3QqKC0xOTgzNDMzLzE5MzUzNjApKSkpKSxhKj10LHRoaXMudXRnWzJdPWEqKC0xNy80ODArdCooMzcvODQwK3QqKDIwOS80NDgwK3QqKC01NTY5LzkwNzIwKSkpKSx0aGlzLmd0dVsyXT1hKig2MS8yNDArdCooLTEwMy8xNDArdCooMTUwNjEvMjY4ODArdCooMTY3NjAzLzE4MTQ0MCkpKSksYSo9dCx0aGlzLnV0Z1szXT1hKigtNDM5Ny8xNjEyODArdCooMTEvNTA0K3QqKDgzMDI1MS83MjU3NjAwKSkpLHRoaXMuZ3R1WzNdPWEqKDQ5NTYxLzE2MTI4MCt0KigtMTc5LzE2OCt0Kig2NjAxNjYxLzcyNTc2MDApKSksYSo9dCx0aGlzLnV0Z1s0XT1hKigtNDU4My8xNjEyODArdCooMTA4ODQ3LzM5OTE2ODApKSx0aGlzLmd0dVs0XT1hKigzNDcyOS84MDY0MCt0KigtMzQxODg4OS8xOTk1ODQwKSksYSo9dCx0aGlzLnV0Z1s1XT1hKigtMjA2NDg2OTMvNjM4NjY4ODAwKSx0aGlzLmd0dVs1XT1hKigyMTIzNzg5NDEvMzE5MzM0NDAwKTt2YXIgbj1DdCh0aGlzLmNiZyx0aGlzLmxhdDApO3RoaXMuWmI9LXRoaXMuUW4qKG4rQXQodGhpcy5ndHUsMipuKSl9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9VmUoZS54LXRoaXMubG9uZzApLGE9ZS55O2E9Q3QodGhpcy5jYmcsYSk7dmFyIHI9Z2UoYSkscz15ZShhKSxpPWdlKHQpLG89eWUodCk7YT11ZShyLG8qcyksdD11ZShpKnMseHQocixzKm8pKSx0PUV0KGhlKHQpKTt2YXIgZD1rdCh0aGlzLmd0dSwyKmEsMip0KTthKz1kWzBdLHQrPWRbMV07dmFyIGwscDtyZXR1cm4gMi42MjMzOTUxNjI3Nzg+PW4odCk/KGw9dGhpcy5hKih0aGlzLlFuKnQpK3RoaXMueDAscD10aGlzLmEqKHRoaXMuUW4qYSt0aGlzLlpiKSt0aGlzLnkwKToobD0xLzAscD0xLzApLGUueD1sLGUueT1wLGV9LGludmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9KGUueC10aGlzLngwKSooMS90aGlzLmEpLGE9KGUueS10aGlzLnkwKSooMS90aGlzLmEpO2E9KGEtdGhpcy5aYikvdGhpcy5Rbix0Lz10aGlzLlFuO3ZhciByLHM7aWYoMi42MjMzOTUxNjI3Nzg+PW4odCkpe3ZhciBpPWt0KHRoaXMudXRnLDIqYSwyKnQpO2ErPWlbMF0sdCs9aVsxXSx0PV9lKGJ0KHQpKTt2YXIgbz1nZShhKSxkPXllKGEpLGw9Z2UodCkscD15ZSh0KTthPXVlKG8qcCx4dChsLHAqZCkpLHQ9dWUobCxwKmQpLHI9VmUodCt0aGlzLmxvbmcwKSxzPUN0KHRoaXMuY2diLGEpfWVsc2Ugcj0xLzAscz0xLzA7cmV0dXJuIGUueD1yLGUueT1zLGV9LG5hbWVzOltcIkV4dGVuZGVkX1RyYW5zdmVyc2VfTWVyY2F0b3JcIixcIkV4dGVuZGVkIFRyYW5zdmVyc2UgTWVyY2F0b3JcIixcImV0bWVyY1wiXX0sSXQ9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lKXtpZihlPXIoMzAqKFZlKHQpK21lKS9tZSkrMSwwPmUpcmV0dXJuIDA7aWYoNjA8ZSlyZXR1cm4gNjB9cmV0dXJuIGV9LFJ0PXtpbml0OmZ1bmN0aW9uKCl7dmFyIGU9SXQodGhpcy56b25lLHRoaXMubG9uZzApO2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB1dG0gem9uZVwiKTt0aGlzLmxhdDA9MCx0aGlzLmxvbmcwPSg2Km4oZSktMTgzKSpJZSx0aGlzLngwPTVlNSx0aGlzLnkwPXRoaXMudXRtU291dGg/MWU3OjAsdGhpcy5rMD0uOTk5Nix2dC5pbml0LmFwcGx5KHRoaXMpLHRoaXMuZm9yd2FyZD12dC5mb3J3YXJkLHRoaXMuaW52ZXJzZT12dC5pbnZlcnNlfSxuYW1lczpbXCJVbml2ZXJzYWwgVHJhbnN2ZXJzZSBNZXJjYXRvciBTeXN0ZW1cIixcInV0bVwiXSxkZXBlbmRzT246XCJldG1lcmNcIn0sT3Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbygoMS1lKS8oMStlKSx0KX0senQ9e2luaXQ6ZnVuY3Rpb24oKXt2YXIgZT1nZSh0aGlzLmxhdDApLHQ9eWUodGhpcy5sYXQwKTt0Kj10LHRoaXMucmM9YmUoMS10aGlzLmVzKS8oMS10aGlzLmVzKmUqZSksdGhpcy5DPWJlKDErdGhpcy5lcyp0KnQvKDEtdGhpcy5lcykpLHRoaXMucGhpYzA9bGUoZS90aGlzLkMpLHRoaXMucmF0ZXhwPS41KnRoaXMuQyp0aGlzLmUsdGhpcy5LPWhlKC41KnRoaXMucGhpYzArT2UpLyhvKGhlKC41KnRoaXMubGF0MCtPZSksdGhpcy5DKSpPdCh0aGlzLmUqZSx0aGlzLnJhdGV4cCkpfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueTtyZXR1cm4gZS55PTIqX2UodGhpcy5LKm8oaGUoLjUqYStPZSksdGhpcy5DKSpPdCh0aGlzLmUqZ2UoYSksdGhpcy5yYXRleHApKS1DZSxlLng9dGhpcy5DKnQsZX0saW52ZXJzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS54L3RoaXMuQyxhPWUueSxyPW8oaGUoLjUqYStPZSkvdGhpcy5LLDEvdGhpcy5DKSxzPTIwOzA8cyYmKGE9MipfZShyKk90KHRoaXMuZSpnZShlLnkpLC0uNSp0aGlzLmUpKS1DZSwhKG4oYS1lLnkpPDFlLTE0KSk7LS1zKWUueT1hO3JldHVybiBzPyhlLng9dCxlLnk9YSxlKTpudWxsfSxuYW1lczpbXCJnYXVzc1wiXX0sTHQ9e2luaXQ6ZnVuY3Rpb24oKXt6dC5pbml0LmFwcGx5KHRoaXMpLHRoaXMucmMmJih0aGlzLnNpbmMwPWdlKHRoaXMucGhpYzApLHRoaXMuY29zYzA9eWUodGhpcy5waGljMCksdGhpcy5SMj0yKnRoaXMucmMsIXRoaXMudGl0bGUmJih0aGlzLnRpdGxlPVwiT2JsaXF1ZSBTdGVyZW9ncmFwaGljIEFsdGVybmF0aXZlXCIpKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdCxhLG4scjtyZXR1cm4gZS54PVZlKGUueC10aGlzLmxvbmcwKSx6dC5mb3J3YXJkLmFwcGx5KHRoaXMsW2VdKSx0PWdlKGUueSksYT15ZShlLnkpLG49eWUoZS54KSxyPXRoaXMuazAqdGhpcy5SMi8oMSt0aGlzLnNpbmMwKnQrdGhpcy5jb3NjMCphKm4pLGUueD1yKmEqZ2UoZS54KSxlLnk9cioodGhpcy5jb3NjMCp0LXRoaXMuc2luYzAqYSpuKSxlLng9dGhpcy5hKmUueCt0aGlzLngwLGUueT10aGlzLmEqZS55K3RoaXMueTAsZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdCxhLG4scixzO2lmKGUueD0oZS54LXRoaXMueDApL3RoaXMuYSxlLnk9KGUueS10aGlzLnkwKS90aGlzLmEsZS54Lz10aGlzLmswLGUueS89dGhpcy5rMCxzPWJlKGUueCplLngrZS55KmUueSkpe3ZhciBpPTIqdWUocyx0aGlzLlIyKTt0PWdlKGkpLGE9eWUoaSkscj1sZShhKnRoaXMuc2luYzArZS55KnQqdGhpcy5jb3NjMC9zKSxuPXVlKGUueCp0LHMqdGhpcy5jb3NjMCphLWUueSp0aGlzLnNpbmMwKnQpfWVsc2Ugcj10aGlzLnBoaWMwLG49MDtyZXR1cm4gZS54PW4sZS55PXIsenQuaW52ZXJzZS5hcHBseSh0aGlzLFtlXSksZS54PVZlKGUueCt0aGlzLmxvbmcwKSxlfSxuYW1lczpbXCJTdGVyZW9ncmFwaGljX05vcnRoX1BvbGVcIixcIk9ibGlxdWVfU3RlcmVvZ3JhcGhpY1wiLFwiUG9sYXJfU3RlcmVvZ3JhcGhpY1wiLFwic3RlcmVhXCIsXCJPYmxpcXVlIFN0ZXJlb2dyYXBoaWMgQWx0ZXJuYXRpdmVcIixcIkRvdWJsZV9TdGVyZW9ncmFwaGljXCJdfSxUdD17aW5pdDpmdW5jdGlvbigpe3RoaXMuY29zbGF0MD15ZSh0aGlzLmxhdDApLHRoaXMuc2lubGF0MD1nZSh0aGlzLmxhdDApLHRoaXMuc3BoZXJlPzE9PT10aGlzLmswJiYhaXNOYU4odGhpcy5sYXRfdHMpJiZuKHRoaXMuY29zbGF0MCk8PXZlJiYodGhpcy5rMD0uNSooMStKZSh0aGlzLmxhdDApKmdlKHRoaXMubGF0X3RzKSkpOihuKHRoaXMuY29zbGF0MCk8PXZlJiYoMDx0aGlzLmxhdDA/dGhpcy5jb249MTp0aGlzLmNvbj0tMSksdGhpcy5jb25zPWJlKG8oMSt0aGlzLmUsMSt0aGlzLmUpKm8oMS10aGlzLmUsMS10aGlzLmUpKSwxPT09dGhpcy5rMCYmIWlzTmFOKHRoaXMubGF0X3RzKSYmbih0aGlzLmNvc2xhdDApPD12ZSYmKHRoaXMuazA9LjUqdGhpcy5jb25zKlFlKHRoaXMuZSxnZSh0aGlzLmxhdF90cykseWUodGhpcy5sYXRfdHMpKS8kZSh0aGlzLmUsdGhpcy5jb24qdGhpcy5sYXRfdHMsdGhpcy5jb24qZ2UodGhpcy5sYXRfdHMpKSksdGhpcy5tczE9UWUodGhpcy5lLHRoaXMuc2lubGF0MCx0aGlzLmNvc2xhdDApLHRoaXMuWDA9MipfZSh0aGlzLnNzZm5fKHRoaXMubGF0MCx0aGlzLnNpbmxhdDAsdGhpcy5lKSktQ2UsdGhpcy5jb3NYMD15ZSh0aGlzLlgwKSx0aGlzLnNpblgwPWdlKHRoaXMuWDApKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnkscj1nZShhKSxzPXllKGEpLGk9VmUodC10aGlzLmxvbmcwKSxvLGQsbCxwLGMsdTtyZXR1cm4gbihuKHQtdGhpcy5sb25nMCktbWUpPD12ZSYmbihhK3RoaXMubGF0MCk8PXZlPyhlLng9TmFOLGUueT1OYU4sZSk6dGhpcy5zcGhlcmU/KG89Mip0aGlzLmswLygxK3RoaXMuc2lubGF0MCpyK3RoaXMuY29zbGF0MCpzKnllKGkpKSxlLng9NjUqdGhpcy5hKnMqZ2UoaSkrdGhpcy54MCxlLnk9NjUqdGhpcy5hKih0aGlzLmNvc2xhdDAqci10aGlzLnNpbmxhdDAqcyp5ZShpKSkrdGhpcy55MCxlKTooZD0yKl9lKHRoaXMuc3Nmbl8oYSxyLHRoaXMuZSkpLUNlLHA9eWUoZCksbD1nZShkKSxuKHRoaXMuY29zbGF0MCk8PXZlKT8oYz0kZSh0aGlzLmUsYSp0aGlzLmNvbix0aGlzLmNvbipyKSx1PTIqdGhpcy5hKnRoaXMuazAqYy90aGlzLmNvbnMsZS54PXRoaXMueDArdSpnZSh0LXRoaXMubG9uZzApLGUueT10aGlzLnkwLXRoaXMuY29uKnUqeWUodC10aGlzLmxvbmcwKSxlKToobih0aGlzLnNpbmxhdDApPHZlPyhvPTIqdGhpcy5hKnRoaXMuazAvKDErcCp5ZShpKSksZS55PTY1KmwpOihvPTIqdGhpcy5hKnRoaXMuazAqdGhpcy5tczEvKHRoaXMuY29zWDAqKDErdGhpcy5zaW5YMCpsK3RoaXMuY29zWDAqcCp5ZShpKSkpLGUueT02NSoodGhpcy5jb3NYMCpsLXRoaXMuc2luWDAqcCp5ZShpKSkrdGhpcy55MCksZS54PTY1KnAqZ2UoaSkrdGhpcy54MCxlKX0saW52ZXJzZTpmdW5jdGlvbihlKXtlLngtPXRoaXMueDAsZS55LT10aGlzLnkwO3ZhciB0PWJlKGUueCplLngrZS55KmUueSksYSxyLHMsaSxvO2lmKHRoaXMuc3BoZXJlKXt2YXIgZD0yKl9lKHQvKDIqdGhpcy5hKnRoaXMuazApKTtyZXR1cm4oYT10aGlzLmxvbmcwLHI9dGhpcy5sYXQwLHQ8PXZlKT8oZS54PWEsZS55PXIsZSk6KHI9bGUoeWUoZCkqdGhpcy5zaW5sYXQwK2UueSpnZShkKSp0aGlzLmNvc2xhdDAvdCksYT1uKHRoaXMuY29zbGF0MCk8dmU/MDx0aGlzLmxhdDA/VmUodGhpcy5sb25nMCt1ZShlLngsLTEqZS55KSk6VmUodGhpcy5sb25nMCt1ZShlLngsZS55KSk6VmUodGhpcy5sb25nMCt1ZShlLngqZ2UoZCksdCp0aGlzLmNvc2xhdDAqeWUoZCktZS55KnRoaXMuc2lubGF0MCpnZShkKSkpLGUueD1hLGUueT1yLGUpfWlmKG4odGhpcy5jb3NsYXQwKTw9dmUpe2lmKHQ8PXZlKXJldHVybiByPXRoaXMubGF0MCxhPXRoaXMubG9uZzAsZS54PWEsZS55PXIsZTtlLngqPXRoaXMuY29uLGUueSo9dGhpcy5jb24scz10KnRoaXMuY29ucy8oMip0aGlzLmEqdGhpcy5rMCkscj10aGlzLmNvbipldCh0aGlzLmUscyksYT10aGlzLmNvbipWZSh0aGlzLmNvbip0aGlzLmxvbmcwK3VlKGUueCwtMSplLnkpKX1lbHNlIGk9MipfZSh0KnRoaXMuY29zWDAvKDIqdGhpcy5hKnRoaXMuazAqdGhpcy5tczEpKSxhPXRoaXMubG9uZzAsdDw9dmU/bz10aGlzLlgwOihvPWxlKHllKGkpKnRoaXMuc2luWDArZS55KmdlKGkpKnRoaXMuY29zWDAvdCksYT1WZSh0aGlzLmxvbmcwK3VlKGUueCpnZShpKSx0KnRoaXMuY29zWDAqeWUoaSktZS55KnRoaXMuc2luWDAqZ2UoaSkpKSkscj0tMSpldCh0aGlzLmUsaGUoLjUqKENlK28pKSk7cmV0dXJuIGUueD1hLGUueT1yLGV9LG5hbWVzOltcInN0ZXJlXCIsXCJTdGVyZW9ncmFwaGljX1NvdXRoX1BvbGVcIixcIlBvbGFyIFN0ZXJlb2dyYXBoaWMgKHZhcmlhbnQgQilcIl0sc3Nmbl86ZnVuY3Rpb24oZSx0LGEpe3JldHVybiB0Kj1hLGhlKC41KihDZStlKSkqbygoMS10KS8oMSt0KSwuNSphKX19LEJ0PXtpbml0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sYXQwO3RoaXMubGFtYmRhMD10aGlzLmxvbmcwO3ZhciBuPWdlKHQpLHI9dGhpcy5hLHM9dGhpcy5yZixpPTEvcyxkPTIqaS1vKGksMiksbD10aGlzLmU9YmUoZCk7dGhpcy5SPXRoaXMuazAqcipiZSgxLWQpLygxLWQqbyhuLDIpKSx0aGlzLmFscGhhPWJlKDErZC8oMS1kKSpvKHllKHQpLDQpKSx0aGlzLmIwPWxlKG4vdGhpcy5hbHBoYSk7dmFyIGU9YShoZShtZS80K3RoaXMuYjAvMikpLHA9YShoZShtZS80K3QvMikpLGM9YSgoMStsKm4pLygxLWwqbikpO3RoaXMuSz1lLXRoaXMuYWxwaGEqcCt0aGlzLmFscGhhKmwvMipjfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWEoaGUobWUvNC1lLnkvMikpLG49dGhpcy5lLzIqYSgoMSt0aGlzLmUqZ2UoZS55KSkvKDEtdGhpcy5lKmdlKGUueSkpKSxyPS10aGlzLmFscGhhKih0K24pK3RoaXMuSyxzPTIqKF9lKGZlKHIpKS1tZS80KSxpPXRoaXMuYWxwaGEqKGUueC10aGlzLmxhbWJkYTApLG89X2UoZ2UoNzMpLyhnZSh0aGlzLmIwKSpoZShzKSt5ZSh0aGlzLmIwKSp5ZSg3MykpKSxkPWxlKHllKHRoaXMuYjApKmdlKHMpLWdlKHRoaXMuYjApKnllKHMpKnllKDczKSk7cmV0dXJuIGUueT10aGlzLlIvMiphKCgxK2dlKGQpKS8oMS1nZShkKSkpK3RoaXMueTAsZS54PXRoaXMuUipvK3RoaXMueDAsZX0saW52ZXJzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS54LXRoaXMueDAscj1lLnktdGhpcy55MCxzPXQvdGhpcy5SLGk9MiooX2UoZmUoci90aGlzLlIpKS1tZS80KSxvPWxlKHllKHRoaXMuYjApKmdlKGkpK2dlKHRoaXMuYjApKnllKGkpKnllKHMpKSxkPV9lKGdlKHMpLyh5ZSh0aGlzLmIwKSp5ZShzKS1nZSh0aGlzLmIwKSpoZShpKSkpLGw9dGhpcy5sYW1iZGEwKzczL3RoaXMuYWxwaGEscD0wLGM9byx1PS0xZTMsbT0wOzFlLTc8bihjLXUpOyl7aWYoMjA8KyttKXJldHVybjtwPTEvdGhpcy5hbHBoYSooYShoZShtZS80K28vMikpLXRoaXMuSykrdGhpcy5lKmEoaGUobWUvNCtsZSh0aGlzLmUqZ2UoYykpLzIpKSx1PWMsYz0yKl9lKGZlKHApKS1tZS8yfXJldHVybiBlLng9bCxlLnk9YyxlfSxuYW1lczpbXCJzb21lcmNcIl19LFB0PXtpbml0OmZ1bmN0aW9uKCl7dGhpcy5ub19vZmY9dGhpcy5ub19vZmZ8fCExLHRoaXMubm9fcm90PXRoaXMubm9fcm90fHwhMSxpc05hTih0aGlzLmswKSYmKHRoaXMuazA9MSk7dmFyIGU9Z2UodGhpcy5sYXQwKSx0PXllKHRoaXMubGF0MCksYT10aGlzLmUqZTt0aGlzLmJsPWJlKDErdGhpcy5lcy8oMS10aGlzLmVzKSpvKHQsNCkpLHRoaXMuYWw9dGhpcy5hKnRoaXMuYmwqdGhpcy5rMCpiZSgxLXRoaXMuZXMpLygxLWEqYSk7dmFyIG49JGUodGhpcy5lLHRoaXMubGF0MCxlKSxyPXRoaXMuYmwvdCpiZSgoMS10aGlzLmVzKS8oMS1hKmEpKTsxPnIqciYmKHI9MSk7dmFyIHMsaTtpZighaXNOYU4odGhpcy5sb25nYykpcz0wPD10aGlzLmxhdDA/citiZShyKnItMSk6ci1iZShyKnItMSksdGhpcy5lbD1zKm8obix0aGlzLmJsKSxpPS41KihzLTEvcyksdGhpcy5nYW1tYTA9bGUoZ2UodGhpcy5hbHBoYSkvciksdGhpcy5sb25nMD10aGlzLmxvbmdjLWxlKGkqaGUodGhpcy5nYW1tYTApKS90aGlzLmJsO2Vsc2V7dmFyIGQ9JGUodGhpcy5lLHRoaXMubGF0MSxnZSh0aGlzLmxhdDEpKSxsPSRlKHRoaXMuZSx0aGlzLmxhdDIsZ2UodGhpcy5sYXQyKSk7dGhpcy5lbD0wPD10aGlzLmxhdDA/KHIrYmUocipyLTEpKSpvKG4sdGhpcy5ibCk6KHItYmUocipyLTEpKSpvKG4sdGhpcy5ibCk7dmFyIHA9byhkLHRoaXMuYmwpLGM9byhsLHRoaXMuYmwpO3M9dGhpcy5lbC9wLGk9LjUqKHMtMS9zKTt2YXIgdT0odGhpcy5lbCp0aGlzLmVsLWMqcCkvKHRoaXMuZWwqdGhpcy5lbCtjKnApLG09VmUodGhpcy5sb25nMS10aGlzLmxvbmcyKTt0aGlzLmxvbmcwPS41Kih0aGlzLmxvbmcxK3RoaXMubG9uZzIpLV9lKHUqaGUoLjUqdGhpcy5ibCptKS8oKGMtcCkvKGMrcCkpKS90aGlzLmJsLHRoaXMubG9uZzA9VmUodGhpcy5sb25nMCk7dmFyIF89VmUodGhpcy5sb25nMS10aGlzLmxvbmcwKTt0aGlzLmdhbW1hMD1fZShnZSh0aGlzLmJsKl8pL2kpLHRoaXMuYWxwaGE9bGUocipnZSh0aGlzLmdhbW1hMCkpfXRoaXMudWM9dGhpcy5ub19vZmY/MDowPD10aGlzLmxhdDA/dGhpcy5hbC90aGlzLmJsKnVlKGJlKHIqci0xKSx5ZSh0aGlzLmFscGhhKSk6LTEqdGhpcy5hbC90aGlzLmJsKnVlKGJlKHIqci0xKSx5ZSh0aGlzLmFscGhhKSl9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHI9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHM9ZS54LGk9ZS55LGQ9VmUocy10aGlzLmxvbmcwKSxsLHAsYztpZihuKG4oaSktQ2UpPD12ZSljPTA8aT8tMToxLHA9dGhpcy5hbC90aGlzLmJsKmEoaGUoT2UrLjUqKGMqdGhpcy5nYW1tYTApKSksbD0tMSpjKkNlKnRoaXMuYWwvdGhpcy5ibDtlbHNle3ZhciB1PSRlKHRoaXMuZSxpLGdlKGkpKSx0PXRoaXMuZWwvbyh1LHRoaXMuYmwpLG09LjUqKHQtMS90KSxfPWdlKHRoaXMuYmwqZCksZj0obSpnZSh0aGlzLmdhbW1hMCktXyp5ZSh0aGlzLmdhbW1hMCkpLyguNSoodCsxL3QpKTtwPW4obihmKS0xKTw9dmU/cjouNSp0aGlzLmFsKmEoKDEtZikvKDErZikpL3RoaXMuYmwsbD1uKHllKHRoaXMuYmwqZCkpPD12ZT90aGlzLmFsKnRoaXMuYmwqZDp0aGlzLmFsKnVlKG0qeWUodGhpcy5nYW1tYTApK18qZ2UodGhpcy5nYW1tYTApLHllKHRoaXMuYmwqZCkpL3RoaXMuYmx9cmV0dXJuIHRoaXMubm9fcm90PyhlLng9dGhpcy54MCtsLGUueT10aGlzLnkwK3ApOihsLT10aGlzLnVjLGUueD10aGlzLngwK3AqeWUodGhpcy5hbHBoYSkrbCpnZSh0aGlzLmFscGhhKSxlLnk9dGhpcy55MCtsKnllKHRoaXMuYWxwaGEpLXAqZ2UodGhpcy5hbHBoYSkpLGV9LGludmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsYTt0aGlzLm5vX3JvdD8oYT1lLnktdGhpcy55MCx0PWUueC10aGlzLngwKTooYT0oZS54LXRoaXMueDApKnllKHRoaXMuYWxwaGEpLShlLnktdGhpcy55MCkqZ2UodGhpcy5hbHBoYSksdD0oZS55LXRoaXMueTApKnllKHRoaXMuYWxwaGEpKyhlLngtdGhpcy54MCkqZ2UodGhpcy5hbHBoYSksdCs9dGhpcy51Yyk7dmFyIHI9ZmUoLTEqdGhpcy5ibCphL3RoaXMuYWwpLHM9LjUqKHItMS9yKSxpPWdlKHRoaXMuYmwqdC90aGlzLmFsKSxkPShpKnllKHRoaXMuZ2FtbWEwKStzKmdlKHRoaXMuZ2FtbWEwKSkvKC41KihyKzEvcikpLGw9byh0aGlzLmVsL2JlKCgxK2QpLygxLWQpKSwxL3RoaXMuYmwpO3JldHVybiBuKGQtMSk8dmU/KGUueD10aGlzLmxvbmcwLGUueT1DZSk6bihkKzEpPHZlPyhlLng9dGhpcy5sb25nMCxlLnk9LTEqQ2UpOihlLnk9ZXQodGhpcy5lLGwpLGUueD1WZSh0aGlzLmxvbmcwLXVlKHMqeWUodGhpcy5nYW1tYTApLWkqZ2UodGhpcy5nYW1tYTApLHllKHRoaXMuYmwqdC90aGlzLmFsKSkvdGhpcy5ibCkpLGV9LG5hbWVzOltcIkhvdGluZV9PYmxpcXVlX01lcmNhdG9yXCIsXCJIb3RpbmUgT2JsaXF1ZSBNZXJjYXRvclwiLFwiSG90aW5lX09ibGlxdWVfTWVyY2F0b3JfQXppbXV0aF9OYXR1cmFsX09yaWdpblwiLFwiSG90aW5lX09ibGlxdWVfTWVyY2F0b3JfQXppbXV0aF9DZW50ZXJcIixcIm9tZXJjXCJdfSxOdD17aW5pdDpmdW5jdGlvbigpe2lmKHRoaXMubGF0Mnx8KHRoaXMubGF0Mj10aGlzLmxhdDEpLHRoaXMuazB8fCh0aGlzLmswPTEpLHRoaXMueDA9dGhpcy54MHx8MCx0aGlzLnkwPXRoaXMueTB8fDAsIShuKHRoaXMubGF0MSt0aGlzLmxhdDIpPHZlKSl7dmFyIGU9dGhpcy5iL3RoaXMuYTt0aGlzLmU9YmUoMS1lKmUpO3ZhciB0PWdlKHRoaXMubGF0MSkscj15ZSh0aGlzLmxhdDEpLHM9UWUodGhpcy5lLHQsciksaT0kZSh0aGlzLmUsdGhpcy5sYXQxLHQpLGQ9Z2UodGhpcy5sYXQyKSxsPXllKHRoaXMubGF0MikscD1RZSh0aGlzLmUsZCxsKSxjPSRlKHRoaXMuZSx0aGlzLmxhdDIsZCksdT0kZSh0aGlzLmUsdGhpcy5sYXQwLGdlKHRoaXMubGF0MCkpO3RoaXMubnM9bih0aGlzLmxhdDEtdGhpcy5sYXQyKT52ZT9hKHMvcCkvYShpL2MpOnQsaXNOYU4odGhpcy5ucykmJih0aGlzLm5zPXQpLHRoaXMuZjA9cy8odGhpcy5ucypvKGksdGhpcy5ucykpLHRoaXMucmg9dGhpcy5hKnRoaXMuZjAqbyh1LHRoaXMubnMpLHRoaXMudGl0bGV8fCh0aGlzLnRpdGxlPVwiTGFtYmVydCBDb25mb3JtYWwgQ29uaWNcIil9fSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueTtuKDIqbihhKS1tZSk8PXZlJiYoYT1KZShhKSooQ2UtMip2ZSkpO3ZhciByPW4obihhKS1DZSkscyxpO2lmKHI+dmUpcz0kZSh0aGlzLmUsYSxnZShhKSksaT10aGlzLmEqdGhpcy5mMCpvKHMsdGhpcy5ucyk7ZWxzZXtpZihyPWEqdGhpcy5ucywwPj1yKXJldHVybiBudWxsO2k9MH12YXIgZD10aGlzLm5zKlZlKHQtdGhpcy5sb25nMCk7cmV0dXJuIGUueD10aGlzLmswKihpKmdlKGQpKSt0aGlzLngwLGUueT10aGlzLmswKih0aGlzLnJoLWkqeWUoZCkpK3RoaXMueTAsZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD0oZS54LXRoaXMueDApL3RoaXMuazAsYT10aGlzLnJoLShlLnktdGhpcy55MCkvdGhpcy5rMCxuLHIscyxpLGQ7MDx0aGlzLm5zPyhuPWJlKHQqdCthKmEpLHI9MSk6KG49LWJlKHQqdCthKmEpLHI9LTEpO3ZhciBsPTA7aWYoMCE9PW4mJihsPXVlKHIqdCxyKmEpKSwhKDAhPT1ufHwwPHRoaXMubnMpKWk9LUNlO2Vsc2UgaWYocj0xL3RoaXMubnMscz1vKG4vKHRoaXMuYSp0aGlzLmYwKSxyKSxpPWV0KHRoaXMuZSxzKSwtOTk5OT09PWkpcmV0dXJuIG51bGw7cmV0dXJuIGQ9VmUobC90aGlzLm5zK3RoaXMubG9uZzApLGUueD1kLGUueT1pLGV9LG5hbWVzOltcIkxhbWJlcnQgVGFuZ2VudGlhbCBDb25mb3JtYWwgQ29uaWMgUHJvamVjdGlvblwiLFwiTGFtYmVydF9Db25mb3JtYWxfQ29uaWNcIixcIkxhbWJlcnRfQ29uZm9ybWFsX0NvbmljXzJTUFwiLFwibGNjXCJdfSxEdD17aW5pdDpmdW5jdGlvbigpe3RoaXMuYT02Mzc3Mzk3LjE1NSx0aGlzLmVzPS4wMDY2NzQzNzIyMzA2MTQsdGhpcy5lPWJlKHRoaXMuZXMpLHRoaXMubGF0MHx8KHRoaXMubGF0MD0uODYzOTM3OTc5NzM3MTkzKSx0aGlzLmxvbmcwfHwodGhpcy5sb25nMD0uNzQxNzY0OTMyMDk3NTkwMS0uMzA4MzQxNTAxMTg1NjY1KSx0aGlzLmswfHwodGhpcy5rMD0uOTk5OSksdGhpcy5zNDU9Ljc4NTM5ODE2MzM5NzQ0OCx0aGlzLnM5MD0yKnRoaXMuczQ1LHRoaXMuZmkwPXRoaXMubGF0MCx0aGlzLmUyPXRoaXMuZXMsdGhpcy5lPWJlKHRoaXMuZTIpLHRoaXMuYWxmYT1iZSgxK3RoaXMuZTIqbyh5ZSh0aGlzLmZpMCksNCkvKDEtdGhpcy5lMikpLHRoaXMudXE9MS4wNDIxNjg1NjM4MDQ3NCx0aGlzLnUwPWxlKGdlKHRoaXMuZmkwKS90aGlzLmFsZmEpLHRoaXMuZz1vKCgxK3RoaXMuZSpnZSh0aGlzLmZpMCkpLygxLXRoaXMuZSpnZSh0aGlzLmZpMCkpLHRoaXMuYWxmYSp0aGlzLmUvMiksdGhpcy5rPWhlKHRoaXMudTAvMit0aGlzLnM0NSkvbyhoZSh0aGlzLmZpMC8yK3RoaXMuczQ1KSx0aGlzLmFsZmEpKnRoaXMuZyx0aGlzLmsxPXRoaXMuazAsdGhpcy5uMD10aGlzLmEqYmUoMS10aGlzLmUyKS8oMS10aGlzLmUyKm8oZ2UodGhpcy5maTApLDIpKSx0aGlzLnMwPTEuMzcwMDgzNDYyODE1NTUsdGhpcy5uPWdlKHRoaXMuczApLHRoaXMucm8wPXRoaXMuazEqdGhpcy5uMC9oZSh0aGlzLnMwKSx0aGlzLmFkPXRoaXMuczkwLXRoaXMudXF9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS54LGE9ZS55LG49VmUodC10aGlzLmxvbmcwKSxyLGksbCxwLGMsbSxfO3JldHVybiByPW8oKDErdGhpcy5lKmdlKGEpKS8oMS10aGlzLmUqZ2UoYSkpLHRoaXMuYWxmYSp0aGlzLmUvMiksaT0yKihfZSh0aGlzLmsqbyhoZShhLzIrdGhpcy5zNDUpLHRoaXMuYWxmYSkvciktdGhpcy5zNDUpLGw9LW4qdGhpcy5hbGZhLHA9bGUoeWUodGhpcy5hZCkqZ2UoaSkrZ2UodGhpcy5hZCkqeWUoaSkqeWUobCkpLGM9bGUoeWUoaSkqZ2UobCkveWUocCkpLG09dGhpcy5uKmMsXz10aGlzLnJvMCpvKGhlKHRoaXMuczAvMit0aGlzLnM0NSksdGhpcy5uKS9vKGhlKHAvMit0aGlzLnM0NSksdGhpcy5uKSxlLnk9Xyp5ZShtKS8xLGUueD1fKmdlKG0pLzEsdGhpcy5jemVjaHx8KGUueSo9LTEsZS54Kj0tMSksZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD1lLngsYSxyLGksbCxwLGMsbSxfO2UueD1lLnksZS55PXQsdGhpcy5jemVjaHx8KGUueSo9LTEsZS54Kj0tMSksYz1iZShlLngqZS54K2UueSplLnkpLHA9dWUoZS55LGUueCksbD1wL2dlKHRoaXMuczApLGk9MiooX2Uobyh0aGlzLnJvMC9jLDEvdGhpcy5uKSpoZSh0aGlzLnMwLzIrdGhpcy5zNDUpKS10aGlzLnM0NSksYT1sZSh5ZSh0aGlzLmFkKSpnZShpKS1nZSh0aGlzLmFkKSp5ZShpKSp5ZShsKSkscj1sZSh5ZShpKSpnZShsKS95ZShhKSksZS54PXRoaXMubG9uZzAtci90aGlzLmFsZmEsbT1hLF89MDt2YXIgZj0wO2RvIGUueT0yKihfZShvKHRoaXMuaywtMS90aGlzLmFsZmEpKm8oaGUoYS8yK3RoaXMuczQ1KSwxL3RoaXMuYWxmYSkqbygoMSt0aGlzLmUqZ2UobSkpLygxLXRoaXMuZSpnZShtKSksdGhpcy5lLzIpKS10aGlzLnM0NSksMWUtMTA+bihtLWUueSkmJihfPTEpLG09ZS55LGYrPTE7d2hpbGUoMD09PV8mJjE1PmYpO3JldHVybiAxNTw9Zj9udWxsOmV9LG5hbWVzOltcIktyb3Zha1wiLFwia3JvdmFrXCJdfSxqdD1mdW5jdGlvbihlLHQsYSxuLHIpe3JldHVybiBlKnItdCpnZSgyKnIpK2EqZ2UoNCpyKS1uKmdlKDYqcil9LFV0PWZ1bmN0aW9uKGUpe3JldHVybiAxLS4yNSplKigxK2UvMTYqKDMrMS4yNSplKSl9LEZ0PWZ1bmN0aW9uKGUpe3JldHVybiAuMzc1KmUqKDErLjI1KmUqKDErLjQ2ODc1KmUpKX0sTXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIC4wNTg1OTM3NSplKmUqKDErLjc1KmUpfSxHdD1mdW5jdGlvbihlKXtyZXR1cm4gZSplKmUqKDM1LzMwNzIpfSxadD1mdW5jdGlvbih0LGEsZSl7dmFyIG49YSplO3JldHVybiB0L2JlKDEtbipuKX0saT1mdW5jdGlvbihlKXtyZXR1cm4gbihlKTxDZT9lOmUtSmUoZSkqbWV9LGNlPWZ1bmN0aW9uKGUsdCxhLHIscyl7dmFyIG8sZDtvPWUvdDtmb3IodmFyIGw9MDsxNT5sO2wrKylpZihkPShlLSh0Km8tYSpnZSgyKm8pK3IqZ2UoNCpvKS1zKmdlKDYqbykpKS8odC0yKmEqeWUoMipvKSs0KnIqeWUoNCpvKS02KnMqeWUoNipvKSksbys9ZCwxZS0xMD49bihkKSlyZXR1cm4gbztyZXR1cm4gTmFOfSxFZT17aW5pdDpmdW5jdGlvbigpe3RoaXMuc3BoZXJlfHwodGhpcy5lMD1VdCh0aGlzLmVzKSx0aGlzLmUxPUZ0KHRoaXMuZXMpLHRoaXMuZTI9TXQodGhpcy5lcyksdGhpcy5lMz1HdCh0aGlzLmVzKSx0aGlzLm1sMD10aGlzLmEqanQodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyx0aGlzLmxhdDApKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnksbixyO2lmKHQ9VmUodC10aGlzLmxvbmcwKSx0aGlzLnNwaGVyZSluPXRoaXMuYSpsZSh5ZShhKSpnZSh0KSkscj10aGlzLmEqKHVlKGhlKGEpLHllKHQpKS10aGlzLmxhdDApO2Vsc2V7dmFyIHM9Z2UoYSksaT15ZShhKSxvPVp0KHRoaXMuYSx0aGlzLmUscyksZD1oZShhKSpoZShhKSxsPXQqeWUoYSkscD1sKmwsYz10aGlzLmVzKmkqaS8oMS10aGlzLmVzKSx1PXRoaXMuYSpqdCh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLGEpO249bypsKigxLXAqZCooMS82LSg4LWQrOCpjKSpwLzEyMCkpLHI9dS10aGlzLm1sMCtvKnMvaSpwKiguNSsoNS1kKzYqYykqcC8yNCl9cmV0dXJuIGUueD1uK3RoaXMueDAsZS55PXIrdGhpcy55MCxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe2UueC09dGhpcy54MCxlLnktPXRoaXMueTA7dmFyIHQ9ZS54L3RoaXMuYSxhPWUueS90aGlzLmEscixzO2lmKHRoaXMuc3BoZXJlKXt2YXIgZD1hK3RoaXMubGF0MDtyPWxlKGdlKGQpKnllKHQpKSxzPXVlKGhlKHQpLHllKGQpKX1lbHNle3ZhciBsPXRoaXMubWwwL3RoaXMuYSthLHA9Y2UobCx0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzKTtpZihuKG4ocCktQ2UpPD12ZSlyZXR1cm4gZS54PXRoaXMubG9uZzAsZS55PUNlLDA+YSYmKGUueSo9LTEpLGU7dmFyIGM9WnQodGhpcy5hLHRoaXMuZSxnZShwKSksdT1jKmMqYy90aGlzLmEvdGhpcy5hKigxLXRoaXMuZXMpLG09byhoZShwKSwyKSxfPXQqdGhpcy5hL2MsZj1fKl87cj1wLWMqaGUocCkvdSpfKl8qKC41LSgxKzMqbSkqXypfLzI0KSxzPV8qKDEtZioobS8zKygxKzMqbSkqbSpmLzE1KSkveWUocCl9cmV0dXJuIGUueD1WZShzK3RoaXMubG9uZzApLGUueT1pKHIpLGV9LG5hbWVzOltcIkNhc3NpbmlcIixcIkNhc3NpbmlfU29sZG5lclwiLFwiY2Fzc1wiXX0sWXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gMWUtNzxlPyhuPWUqdCwoMS1lKmUpKih0LygxLW4qbiktLjUvZSphKCgxLW4pLygxK24pKSkpOjIqdH0scXQ9LjMzMzMzMzMzMzMzMzMzMzMsSHQ9LjE3MjIyMjIyMjIyMjIyMjIyLEt0PS4xMDI1NzkzNjUwNzkzNjUwOCxYdD0uMDYzODg4ODg4ODg4ODg4ODgsV3Q9LjA2NjQwMjExNjQwMjExNjQsUXQ9LjAxNjQxNTAxMjk0MjE5MTU0MyxKdD17aW5pdDpmdW5jdGlvbigpe3ZhciBlPW4odGhpcy5sYXQwKTtpZih0aGlzLm1vZGU9bihlLUNlKTx2ZT8wPnRoaXMubGF0MD90aGlzLlNfUE9MRTp0aGlzLk5fUE9MRTpuKGUpPHZlP3RoaXMuRVFVSVQ6dGhpcy5PQkxJUSwwPHRoaXMuZXMpe3ZhciB0O3N3aXRjaCh0aGlzLnFwPVl0KHRoaXMuZSwxKSx0aGlzLm1tZj0uNS8oMS10aGlzLmVzKSx0aGlzLmFwYT1yZSh0aGlzLmVzKSx0aGlzLm1vZGUpe2Nhc2UgdGhpcy5OX1BPTEU6dGhpcy5kZD0xO2JyZWFrO2Nhc2UgdGhpcy5TX1BPTEU6dGhpcy5kZD0xO2JyZWFrO2Nhc2UgdGhpcy5FUVVJVDp0aGlzLnJxPWJlKC41KnRoaXMucXApLHRoaXMuZGQ9MS90aGlzLnJxLHRoaXMueG1mPTEsdGhpcy55bWY9LjUqdGhpcy5xcDticmVhaztjYXNlIHRoaXMuT0JMSVE6dGhpcy5ycT1iZSguNSp0aGlzLnFwKSx0PWdlKHRoaXMubGF0MCksdGhpcy5zaW5iMT1ZdCh0aGlzLmUsdCkvdGhpcy5xcCx0aGlzLmNvc2IxPWJlKDEtdGhpcy5zaW5iMSp0aGlzLnNpbmIxKSx0aGlzLmRkPXllKHRoaXMubGF0MCkvKGJlKDEtdGhpcy5lcyp0KnQpKnRoaXMucnEqdGhpcy5jb3NiMSksdGhpcy55bWY9KHRoaXMueG1mPXRoaXMucnEpL3RoaXMuZGQsdGhpcy54bWYqPXRoaXMuZGQ7fX1lbHNlIHRoaXMubW9kZT09PXRoaXMuT0JMSVEmJih0aGlzLnNpbnBoMD1nZSh0aGlzLmxhdDApLHRoaXMuY29zcGgwPXllKHRoaXMubGF0MCkpfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueSxyLHMsaSxvLGQsbCxwLGMsdSxtO2lmKHQ9VmUodC10aGlzLmxvbmcwKSwhdGhpcy5zcGhlcmUpe3N3aXRjaChwPTAsYz0wLHU9MCxpPXllKHQpLG89Z2UodCksZD1nZShhKSxsPVl0KHRoaXMuZSxkKSwodGhpcy5tb2RlPT09dGhpcy5PQkxJUXx8dGhpcy5tb2RlPT09dGhpcy5FUVVJVCkmJihwPWwvdGhpcy5xcCxjPWJlKDEtcCpwKSksdGhpcy5tb2RlKXtjYXNlIHRoaXMuT0JMSVE6dT0xK3RoaXMuc2luYjEqcCt0aGlzLmNvc2IxKmMqaTticmVhaztjYXNlIHRoaXMuRVFVSVQ6dT0xK2MqaTticmVhaztjYXNlIHRoaXMuTl9QT0xFOnU9Q2UrYSxsPXRoaXMucXAtbDticmVhaztjYXNlIHRoaXMuU19QT0xFOnU9YS1DZSxsPXRoaXMucXArbDt9aWYobih1KTx2ZSlyZXR1cm4gbnVsbDtzd2l0Y2godGhpcy5tb2RlKXtjYXNlIHRoaXMuT0JMSVE6Y2FzZSB0aGlzLkVRVUlUOnU9YmUoMi91KSxzPXRoaXMubW9kZT09PXRoaXMuT0JMSVE/dGhpcy55bWYqdSoodGhpcy5jb3NiMSpwLXRoaXMuc2luYjEqYyppKToodT1iZSgyLygxK2MqaSkpKSpwKnRoaXMueW1mLHI9dGhpcy54bWYqdSpjKm87YnJlYWs7Y2FzZSB0aGlzLk5fUE9MRTpjYXNlIHRoaXMuU19QT0xFOjA8PWw/KHI9KHU9YmUobCkpKm8scz1pKih0aGlzLm1vZGU9PT10aGlzLlNfUE9MRT91Oi11KSk6cj1zPTA7fX1lbHNlIGlmKGQ9Z2UoYSksbT15ZShhKSxpPXllKHQpLHRoaXMubW9kZT09PXRoaXMuT0JMSVF8fHRoaXMubW9kZT09PXRoaXMuRVFVSVQpe2lmKHM9dGhpcy5tb2RlPT09dGhpcy5FUVVJVD8xK20qaToxK3RoaXMuc2lucGgwKmQrdGhpcy5jb3NwaDAqbSppLHM8PXZlKXJldHVybiBudWxsO3M9YmUoMi9zKSxyPXMqbSpnZSh0KSxzKj10aGlzLm1vZGU9PT10aGlzLkVRVUlUP2Q6dGhpcy5jb3NwaDAqZC10aGlzLnNpbnBoMCptKml9ZWxzZSBpZih0aGlzLm1vZGU9PT10aGlzLk5fUE9MRXx8dGhpcy5tb2RlPT09dGhpcy5TX1BPTEUpe2lmKHRoaXMubW9kZT09PXRoaXMuTl9QT0xFJiYoaT0taSksbihhK3RoaXMucGhpMCk8dmUpcmV0dXJuIG51bGw7cz1PZS0uNSphLHM9MioodGhpcy5tb2RlPT09dGhpcy5TX1BPTEU/eWUocyk6Z2UocykpLHI9cypnZSh0KSxzKj1pfXJldHVybiBlLng9dGhpcy5hKnIrdGhpcy54MCxlLnk9dGhpcy5hKnMrdGhpcy55MCxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe2UueC09dGhpcy54MCxlLnktPXRoaXMueTA7dmFyIHQ9ZS54L3RoaXMuYSxhPWUueS90aGlzLmEscixzLGksbyxkLGwscDtpZih0aGlzLnNwaGVyZSl7dmFyIGM9MCx1PTAsbTtpZihtPWJlKHQqdCthKmEpLHM9LjUqbSwxPHMpcmV0dXJuIG51bGw7c3dpdGNoKHM9MipsZShzKSwodGhpcy5tb2RlPT09dGhpcy5PQkxJUXx8dGhpcy5tb2RlPT09dGhpcy5FUVVJVCkmJih1PWdlKHMpLGM9eWUocykpLHRoaXMubW9kZSl7Y2FzZSB0aGlzLkVRVUlUOnM9bihtKTw9dmU/MDpsZShhKnUvbSksdCo9dSxhPWMqbTticmVhaztjYXNlIHRoaXMuT0JMSVE6cz1uKG0pPD12ZT90aGlzLnBoaTA6bGUoYyp0aGlzLnNpbnBoMCthKnUqdGhpcy5jb3NwaDAvbSksdCo9dSp0aGlzLmNvc3BoMCxhPShjLWdlKHMpKnRoaXMuc2lucGgwKSptO2JyZWFrO2Nhc2UgdGhpcy5OX1BPTEU6YT0tYSxzPUNlLXM7YnJlYWs7Y2FzZSB0aGlzLlNfUE9MRTpzLT1DZTt9cj0wPT09YSYmKHRoaXMubW9kZT09PXRoaXMuRVFVSVR8fHRoaXMubW9kZT09PXRoaXMuT0JMSVEpPzA6dWUodCxhKX1lbHNle2lmKHA9MCx0aGlzLm1vZGU9PT10aGlzLk9CTElRfHx0aGlzLm1vZGU9PT10aGlzLkVRVUlUKXtpZih0Lz10aGlzLmRkLGEqPXRoaXMuZGQsbD1iZSh0KnQrYSphKSxsPHZlKXJldHVybiBlLng9MCxlLnk9dGhpcy5waGkwLGU7bz0yKmxlKC41KmwvdGhpcy5ycSksaT15ZShvKSx0Kj1vPWdlKG8pLHRoaXMubW9kZT09PXRoaXMuT0JMSVE/KHA9aSp0aGlzLnNpbmIxK2Eqbyp0aGlzLmNvc2IxL2wsZD10aGlzLnFwKnAsYT1sKnRoaXMuY29zYjEqaS1hKnRoaXMuc2luYjEqbyk6KHA9YSpvL2wsZD10aGlzLnFwKnAsYT1sKmkpfWVsc2UgaWYodGhpcy5tb2RlPT09dGhpcy5OX1BPTEV8fHRoaXMubW9kZT09PXRoaXMuU19QT0xFKXtpZih0aGlzLm1vZGU9PT10aGlzLk5fUE9MRSYmKGE9LWEpLGQ9dCp0K2EqYSwhZClyZXR1cm4gZS54PTAsZS55PXRoaXMucGhpMCxlO3A9MS1kL3RoaXMucXAsdGhpcy5tb2RlPT09dGhpcy5TX1BPTEUmJihwPS1wKX1yPXVlKHQsYSkscz1zZShsZShwKSx0aGlzLmFwYSl9cmV0dXJuIGUueD1WZSh0aGlzLmxvbmcwK3IpLGUueT1zLGV9LG5hbWVzOltcIkxhbWJlcnQgQXppbXV0aGFsIEVxdWFsIEFyZWFcIixcIkxhbWJlcnRfQXppbXV0aGFsX0VxdWFsX0FyZWFcIixcImxhZWFcIl0sU19QT0xFOjEsTl9QT0xFOjIsRVFVSVQ6MyxPQkxJUTo0fSxWdD1mdW5jdGlvbihlKXtyZXR1cm4gMTxuKGUpJiYoZT0xPGU/MTotMSksbGUoZSl9LCR0PXtpbml0OmZ1bmN0aW9uKCl7bih0aGlzLmxhdDErdGhpcy5sYXQyKTx2ZXx8KHRoaXMudGVtcD10aGlzLmIvdGhpcy5hLHRoaXMuZXM9MS1vKHRoaXMudGVtcCwyKSx0aGlzLmUzPWJlKHRoaXMuZXMpLHRoaXMuc2luX3BvPWdlKHRoaXMubGF0MSksdGhpcy5jb3NfcG89eWUodGhpcy5sYXQxKSx0aGlzLnQxPXRoaXMuc2luX3BvLHRoaXMuY29uPXRoaXMuc2luX3BvLHRoaXMubXMxPVFlKHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMucXMxPVl0KHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMuc2luX3BvPWdlKHRoaXMubGF0MiksdGhpcy5jb3NfcG89eWUodGhpcy5sYXQyKSx0aGlzLnQyPXRoaXMuc2luX3BvLHRoaXMubXMyPVFlKHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMucXMyPVl0KHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMuc2luX3BvPWdlKHRoaXMubGF0MCksdGhpcy5jb3NfcG89eWUodGhpcy5sYXQwKSx0aGlzLnQzPXRoaXMuc2luX3BvLHRoaXMucXMwPVl0KHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMubnMwPW4odGhpcy5sYXQxLXRoaXMubGF0Mik+dmU/KHRoaXMubXMxKnRoaXMubXMxLXRoaXMubXMyKnRoaXMubXMyKS8odGhpcy5xczItdGhpcy5xczEpOnRoaXMuY29uLHRoaXMuYz10aGlzLm1zMSp0aGlzLm1zMSt0aGlzLm5zMCp0aGlzLnFzMSx0aGlzLnJoPXRoaXMuYSpiZSh0aGlzLmMtdGhpcy5uczAqdGhpcy5xczApL3RoaXMubnMwKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnk7dGhpcy5zaW5fcGhpPWdlKGEpLHRoaXMuY29zX3BoaT15ZShhKTt2YXIgbj1ZdCh0aGlzLmUzLHRoaXMuc2luX3BoaSx0aGlzLmNvc19waGkpLHI9dGhpcy5hKmJlKHRoaXMuYy10aGlzLm5zMCpuKS90aGlzLm5zMCxzPXRoaXMubnMwKlZlKHQtdGhpcy5sb25nMCksaT1yKmdlKHMpK3RoaXMueDAsbz10aGlzLnJoLXIqeWUocykrdGhpcy55MDtyZXR1cm4gZS54PWksZS55PW8sZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdCxhLG4scixzLGk7cmV0dXJuIGUueC09dGhpcy54MCxlLnk9dGhpcy5yaC1lLnkrdGhpcy55MCwwPD10aGlzLm5zMD8odD1iZShlLngqZS54K2UueSplLnkpLG49MSk6KHQ9LWJlKGUueCplLngrZS55KmUueSksbj0tMSkscj0wLDAhPT10JiYocj11ZShuKmUueCxuKmUueSkpLG49dCp0aGlzLm5zMC90aGlzLmEsdGhpcy5zcGhlcmU/aT1sZSgodGhpcy5jLW4qbikvKDIqdGhpcy5uczApKTooYT0odGhpcy5jLW4qbikvdGhpcy5uczAsaT10aGlzLnBoaTF6KHRoaXMuZTMsYSkpLHM9VmUoci90aGlzLm5zMCt0aGlzLmxvbmcwKSxlLng9cyxlLnk9aSxlfSxuYW1lczpbXCJBbGJlcnNfQ29uaWNfRXF1YWxfQXJlYVwiLFwiQWxiZXJzXCIsXCJhZWFcIl0scGhpMXo6ZnVuY3Rpb24oZSx0KXt2YXIgcj1WdCguNSp0KSxzLG8sZCxsLHA7aWYoZTx2ZSlyZXR1cm4gcjtmb3IodmFyIGM9MTsyNT49YztjKyspaWYocz1nZShyKSxvPXllKHIpLGQ9ZSpzLGw9MS1kKmQscD0uNSpsKmwvbyoodC8oMS1lKmUpLXMvbCsuNS9lKmEoKDEtZCkvKDErZCkpKSxyKz1wLDFlLTc+PW4ocCkpcmV0dXJuIHI7cmV0dXJuIG51bGx9fSxlYT17aW5pdDpmdW5jdGlvbigpe3RoaXMuc2luX3AxND1nZSh0aGlzLmxhdDApLHRoaXMuY29zX3AxND15ZSh0aGlzLmxhdDApLHRoaXMuaW5maW5pdHlfZGlzdD0xZTMqdGhpcy5hLHRoaXMucmM9MX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnkscixzLGksbyxkLGwscCxjO3JldHVybiBpPVZlKHQtdGhpcy5sb25nMCkscj1nZShhKSxzPXllKGEpLG89eWUoaSksbD10aGlzLnNpbl9wMTQqcit0aGlzLmNvc19wMTQqcypvLGQ9MSwwPGx8fG4obCk8PXZlPyhwPXRoaXMueDArdGhpcy5hKmQqcypnZShpKS9sLGM9dGhpcy55MCt0aGlzLmEqZCoodGhpcy5jb3NfcDE0KnItdGhpcy5zaW5fcDE0KnMqbykvbCk6KHA9dGhpcy54MCt0aGlzLmluZmluaXR5X2Rpc3QqcypnZShpKSxjPXRoaXMueTArdGhpcy5pbmZpbml0eV9kaXN0Kih0aGlzLmNvc19wMTQqci10aGlzLnNpbl9wMTQqcypvKSksZS54PXAsZS55PWMsZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdCxhLG4scixzLGk7cmV0dXJuIGUueD0oZS54LXRoaXMueDApL3RoaXMuYSxlLnk9KGUueS10aGlzLnkwKS90aGlzLmEsZS54Lz10aGlzLmswLGUueS89dGhpcy5rMCwodD1iZShlLngqZS54K2UueSplLnkpKT8ocj11ZSh0LHRoaXMucmMpLGE9Z2Uociksbj15ZShyKSxpPVZ0KG4qdGhpcy5zaW5fcDE0K2UueSphKnRoaXMuY29zX3AxNC90KSxzPXVlKGUueCphLHQqdGhpcy5jb3NfcDE0Km4tZS55KnRoaXMuc2luX3AxNCphKSxzPVZlKHRoaXMubG9uZzArcykpOihpPXRoaXMucGhpYzAscz0wKSxlLng9cyxlLnk9aSxlfSxuYW1lczpbXCJnbm9tXCJdfSx0YT1mdW5jdGlvbihlLHQpe3ZhciByPTEtKDEtZSplKS8oMiplKSphKCgxLWUpLygxK2UpKTtpZigxZS02Pm4obih0KS1yKSlyZXR1cm4gMD50Py0xKkNlOkNlO2Zvcih2YXIgcz1sZSguNSp0KSxkPTAsbCxwLGMsdTszMD5kO2QrKylpZihwPWdlKHMpLGM9eWUocyksdT1lKnAsbD1vKDEtdSp1LDIpLygyKmMpKih0LygxLWUqZSktcC8oMS11KnUpKy41L2UqYSgoMS11KS8oMSt1KSkpLHMrPWwsMWUtMTA+PW4obCkpcmV0dXJuIHM7cmV0dXJuIE5hTn0sYWE9e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnNwaGVyZXx8KHRoaXMuazA9UWUodGhpcy5lLGdlKHRoaXMubGF0X3RzKSx5ZSh0aGlzLmxhdF90cykpKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnksbj1WZSh0LXRoaXMubG9uZzApLHIscztpZih0aGlzLnNwaGVyZSlyPXRoaXMueDArdGhpcy5hKm4qeWUodGhpcy5sYXRfdHMpLHM9dGhpcy55MCt0aGlzLmEqZ2UoYSkveWUodGhpcy5sYXRfdHMpO2Vsc2V7dmFyIGk9WXQodGhpcy5lLGdlKGEpKTtyPXRoaXMueDArdGhpcy5hKnRoaXMuazAqbixzPXRoaXMueTArLjUqKHRoaXMuYSppKS90aGlzLmswfXJldHVybiBlLng9cixlLnk9cyxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe2UueC09dGhpcy54MCxlLnktPXRoaXMueTA7dmFyIHQsYTtyZXR1cm4gdGhpcy5zcGhlcmU/KHQ9VmUodGhpcy5sb25nMCtlLngvdGhpcy5hL3llKHRoaXMubGF0X3RzKSksYT1sZShlLnkvdGhpcy5hKnllKHRoaXMubGF0X3RzKSkpOihhPXRhKHRoaXMuZSwyKmUueSp0aGlzLmswL3RoaXMuYSksdD1WZSh0aGlzLmxvbmcwK2UueC8odGhpcy5hKnRoaXMuazApKSksZS54PXQsZS55PWEsZX0sbmFtZXM6W1wiY2VhXCJdfSxuYT17aW5pdDpmdW5jdGlvbigpe3RoaXMueDA9dGhpcy54MHx8MCx0aGlzLnkwPXRoaXMueTB8fDAsdGhpcy5sYXQwPXRoaXMubGF0MHx8MCx0aGlzLmxvbmcwPXRoaXMubG9uZzB8fDAsdGhpcy5sYXRfdHM9dGhpcy5sYXRfdHN8fDAsdGhpcy50aXRsZT10aGlzLnRpdGxlfHxcIkVxdWlkaXN0YW50IEN5bGluZHJpY2FsIChQbGF0ZSBDYXJyZSlcIix0aGlzLnJjPXllKHRoaXMubGF0X3RzKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnksbj1WZSh0LXRoaXMubG9uZzApLHI9aShhLXRoaXMubGF0MCk7cmV0dXJuIGUueD10aGlzLngwK3RoaXMuYSpuKnRoaXMucmMsZS55PXRoaXMueTArdGhpcy5hKnIsZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnk7cmV0dXJuIGUueD1WZSh0aGlzLmxvbmcwKyh0LXRoaXMueDApLyh0aGlzLmEqdGhpcy5yYykpLGUueT1pKHRoaXMubGF0MCsoYS10aGlzLnkwKS90aGlzLmEpLGV9LG5hbWVzOltcIkVxdWlyZWN0YW5ndWxhclwiLFwiRXF1aWRpc3RhbnRfQ3lsaW5kcmljYWxcIixcImVxY1wiXX0scmE9e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnRlbXA9dGhpcy5iL3RoaXMuYSx0aGlzLmVzPTEtbyh0aGlzLnRlbXAsMiksdGhpcy5lPWJlKHRoaXMuZXMpLHRoaXMuZTA9VXQodGhpcy5lcyksdGhpcy5lMT1GdCh0aGlzLmVzKSx0aGlzLmUyPU10KHRoaXMuZXMpLHRoaXMuZTM9R3QodGhpcy5lcyksdGhpcy5tbDA9dGhpcy5hKmp0KHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsdGhpcy5sYXQwKX0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lLngsYT1lLnkscj1WZSh0LXRoaXMubG9uZzApLHMsbyxkO2lmKGQ9cipnZShhKSx0aGlzLnNwaGVyZSluKGEpPD12ZT8ocz10aGlzLmEqcixvPS0xKnRoaXMuYSp0aGlzLmxhdDApOihzPXRoaXMuYSpnZShkKS9oZShhKSxvPXRoaXMuYSooaShhLXRoaXMubGF0MCkrKDEteWUoZCkpL2hlKGEpKSk7ZWxzZSBpZihuKGEpPD12ZSlzPXRoaXMuYSpyLG89LTEqdGhpcy5tbDA7ZWxzZXt2YXIgbD1adCh0aGlzLmEsdGhpcy5lLGdlKGEpKS9oZShhKTtzPWwqZ2UoZCksbz10aGlzLmEqanQodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxhKS10aGlzLm1sMCtsKigxLXllKGQpKX1yZXR1cm4gZS54PXMrdGhpcy54MCxlLnk9byt0aGlzLnkwLGV9LGludmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsYSxyLHMsZCxsLHAsYyx1O2lmKHI9ZS54LXRoaXMueDAscz1lLnktdGhpcy55MCx0aGlzLnNwaGVyZSl7aWYobihzK3RoaXMuYSp0aGlzLmxhdDApPD12ZSl0PVZlKHIvdGhpcy5hK3RoaXMubG9uZzApLGE9MDtlbHNle2w9dGhpcy5sYXQwK3MvdGhpcy5hLHA9cipyL3RoaXMuYS90aGlzLmErbCpsLGM9bDt2YXIgbTtmb3IoZD0yMDtkOy0tZClpZihtPWhlKGMpLHU9LTEqKGwqKGMqbSsxKS1jLS41KihjKmMrcCkqbSkvKChjLWwpL20tMSksYys9dSxuKHUpPD12ZSl7YT1jO2JyZWFrfXQ9VmUodGhpcy5sb25nMCtsZShyKmhlKGMpL3RoaXMuYSkvZ2UoYSkpfX1lbHNlIGlmKG4ocyt0aGlzLm1sMCk8PXZlKWE9MCx0PVZlKHRoaXMubG9uZzArci90aGlzLmEpO2Vsc2V7bD0odGhpcy5tbDArcykvdGhpcy5hLHA9cipyL3RoaXMuYS90aGlzLmErbCpsLGM9bDt2YXIgXyxmLGgsZyxiO2ZvcihkPTIwO2Q7LS1kKWlmKGI9dGhpcy5lKmdlKGMpLF89YmUoMS1iKmIpKmhlKGMpLGY9dGhpcy5hKmp0KHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsYyksaD10aGlzLmUwLTIqdGhpcy5lMSp5ZSgyKmMpKzQqdGhpcy5lMip5ZSg0KmMpLTYqdGhpcy5lMyp5ZSg2KmMpLGc9Zi90aGlzLmEsdT0obCooXypnKzEpLWctLjUqXyooZypnK3ApKS8odGhpcy5lcypnZSgyKmMpKihnKmcrcC0yKmwqZykvKDQqXykrKGwtZykqKF8qaC0yL2dlKDIqYykpLWgpLGMtPXUsbih1KTw9dmUpe2E9YzticmVha31fPWJlKDEtdGhpcy5lcypvKGdlKGEpLDIpKSpoZShhKSx0PVZlKHRoaXMubG9uZzArbGUocipfL3RoaXMuYSkvZ2UoYSkpfXJldHVybiBlLng9dCxlLnk9YSxlfSxuYW1lczpbXCJQb2x5Y29uaWNcIixcInBvbHlcIl19LHNhPXtpbml0OmZ1bmN0aW9uKCl7dGhpcy5BPVtdLHRoaXMuQVsxXT0uNjM5OTE3NTA3Myx0aGlzLkFbMl09LS4xMzU4Nzk3NjEzLHRoaXMuQVszXT0uMDYzMjk0NDA5LHRoaXMuQVs0XT0tLjAyNTI2ODUzLHRoaXMuQVs1XT0uMDExNzg3OSx0aGlzLkFbNl09LS4wMDU1MTYxLHRoaXMuQVs3XT0uMDAyNjkwNix0aGlzLkFbOF09LS4wMDEzMzMsdGhpcy5BWzldPTY3ZS01LHRoaXMuQVsxMF09LTM0ZS01LHRoaXMuQl9yZT1bXSx0aGlzLkJfaW09W10sdGhpcy5CX3JlWzFdPS43NTU3ODUzMjI4LHRoaXMuQl9pbVsxXT0wLHRoaXMuQl9yZVsyXT0uMjQ5MjA0NjQ2LHRoaXMuQl9pbVsyXT0uMDAzMzcxNTA3LHRoaXMuQl9yZVszXT0tLjAwMTU0MTczOSx0aGlzLkJfaW1bM109LjA0MTA1ODU2LHRoaXMuQl9yZVs0XT0tLjEwMTYyOTA3LHRoaXMuQl9pbVs0XT0uMDE3Mjc2MDksdGhpcy5CX3JlWzVdPS0uMjY2MjM0ODksdGhpcy5CX2ltWzVdPS0uMzYyNDkyMTgsdGhpcy5CX3JlWzZdPS0uNjg3MDk4Myx0aGlzLkJfaW1bNl09LTEuMTY1MTk2Nyx0aGlzLkNfcmU9W10sdGhpcy5DX2ltPVtdLHRoaXMuQ19yZVsxXT0xLjMyMzEyNzA0MzksdGhpcy5DX2ltWzFdPTAsdGhpcy5DX3JlWzJdPS0uNTc3MjQ1Nzg5LHRoaXMuQ19pbVsyXT0tLjAwNzgwOTU5OCx0aGlzLkNfcmVbM109LjUwODMwNzUxMyx0aGlzLkNfaW1bM109LS4xMTIyMDg5NTIsdGhpcy5DX3JlWzRdPS0uMTUwOTQ3NjIsdGhpcy5DX2ltWzRdPS4xODIwMDYwMix0aGlzLkNfcmVbNV09MS4wMTQxODE3OSx0aGlzLkNfaW1bNV09MS42NDQ5NzY5Nix0aGlzLkNfcmVbNl09MS45NjYwNTQ5LHRoaXMuQ19pbVs2XT0yLjUxMjc2NDUsdGhpcy5EPVtdLHRoaXMuRFsxXT0xLjU2MjcwMTQyNDMsdGhpcy5EWzJdPS41MTg1NDA2Mzk4LHRoaXMuRFszXT0tLjAzMzMzMDk4LHRoaXMuRFs0XT0tLjEwNTI5MDYsdGhpcy5EWzVdPS0uMDM2ODU5NCx0aGlzLkRbNl09LjAwNzMxNyx0aGlzLkRbN109LjAxMjIsdGhpcy5EWzhdPS4wMDM5NCx0aGlzLkRbOV09LS4wMDEzfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueSxyPWEtdGhpcy5sYXQwLHM9dC10aGlzLmxvbmcwLGk9MSxvPTAsZDtmb3IoZD0xOzEwPj1kO2QrKylpKj0xRS01KihyL3dlKSxvKz10aGlzLkFbZF0qaTt2YXIgbD1vLHA9cyxjPTEsdT0wLG09MCxfPTAsZixoO2ZvcihkPTE7Nj49ZDtkKyspZj1jKmwtdSpwLGg9dSpsK2MqcCxjPWYsdT1oLG09bSt0aGlzLkJfcmVbZF0qYy10aGlzLkJfaW1bZF0qdSxfPV8rdGhpcy5CX2ltW2RdKmMrdGhpcy5CX3JlW2RdKnU7cmV0dXJuIGUueD1fKnRoaXMuYSt0aGlzLngwLGUueT1tKnRoaXMuYSt0aGlzLnkwLGV9LGludmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS54LGE9ZS55LHI9dC10aGlzLngwLHM9YS10aGlzLnkwLG89cy90aGlzLmEsZD1yL3RoaXMuYSxsPTEscD0wLGM9MCx1PTAsbSxfLGY7Zm9yKG09MTs2Pj1tO20rKylfPWwqby1wKmQsZj1wKm8rbCpkLGw9XyxwPWYsYz1jK3RoaXMuQ19yZVttXSpsLXRoaXMuQ19pbVttXSpwLHU9dSt0aGlzLkNfaW1bbV0qbCt0aGlzLkNfcmVbbV0qcDtmb3IodmFyIGg9MDtoPHRoaXMuaXRlcmF0aW9ucztoKyspe3ZhciBnPWMseT11LGI9byx4PWQsdyxFO2ZvcihtPTI7Nj49bTttKyspdz1nKmMteSp1LEU9eSpjK2cqdSxnPXcseT1FLGIrPShtLTEpKih0aGlzLkJfcmVbbV0qZy10aGlzLkJfaW1bbV0qeSkseCs9KG0tMSkqKHRoaXMuQl9pbVttXSpnK3RoaXMuQl9yZVttXSp5KTtnPTEseT0wO3ZhciBDPXRoaXMuQl9yZVsxXSxBPXRoaXMuQl9pbVsxXTtmb3IobT0yOzY+PW07bSsrKXc9ZypjLXkqdSxFPXkqYytnKnUsZz13LHk9RSxDKz1tKih0aGlzLkJfcmVbbV0qZy10aGlzLkJfaW1bbV0qeSksQSs9bSoodGhpcy5CX2ltW21dKmcrdGhpcy5CX3JlW21dKnkpO3ZhciBTPUMqQytBKkE7Yz0oYipDK3gqQSkvUyx1PSh4KkMtYipBKS9TfXZhciBrPWMsdj11LEk9MSxSPTA7Zm9yKG09MTs5Pj1tO20rKylJKj1rLFIrPXRoaXMuRFttXSpJO3ZhciBPPXRoaXMubGF0MCsxRTUqKFIqd2UpLHo9dGhpcy5sb25nMCt2O3JldHVybiBlLng9eixlLnk9TyxlfSxuYW1lczpbXCJOZXdfWmVhbGFuZF9NYXBfR3JpZFwiLFwibnptZ1wiXX0saWE9e2luaXQ6ZnVuY3Rpb24oKXt9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS54LG49ZS55LHI9VmUodC10aGlzLmxvbmcwKSxzPXRoaXMueDArdGhpcy5hKnIsaT10aGlzLnkwKzEuMjUqKHRoaXMuYSphKGhlKG1lLzQrbi8yLjUpKSk7cmV0dXJuIGUueD1zLGUueT1pLGV9LGludmVyc2U6ZnVuY3Rpb24oZSl7ZS54LT10aGlzLngwLGUueS09dGhpcy55MDt2YXIgdD1WZSh0aGlzLmxvbmcwK2UueC90aGlzLmEpLGE9Mi41KihfZShmZSguOCplLnkvdGhpcy5hKSktbWUvNCk7cmV0dXJuIGUueD10LGUueT1hLGV9LG5hbWVzOltcIk1pbGxlcl9DeWxpbmRyaWNhbFwiLFwibWlsbFwiXX0sb2E9e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnNwaGVyZT8odGhpcy5uPTEsdGhpcy5tPTAsdGhpcy5lcz0wLHRoaXMuQ195PWJlKCh0aGlzLm0rMSkvdGhpcy5uKSx0aGlzLkNfeD10aGlzLkNfeS8odGhpcy5tKzEpKTp0aGlzLmVuPWZ0KHRoaXMuZXMpfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueSxyLG87aWYodD1WZSh0LXRoaXMubG9uZzApLHRoaXMuc3BoZXJlKXtpZighdGhpcy5tKWE9MT09PXRoaXMubj9hOmxlKHRoaXMubipnZShhKSk7ZWxzZSBmb3IodmFyIGQ9dGhpcy5uKmdlKGEpLGw9MjAscDtsJiYocD0odGhpcy5tKmErZ2UoYSktZCkvKHRoaXMubSt5ZShhKSksYS09cCwhKG4ocCk8dmUpKTstLWwpO3I9dGhpcy5hKnRoaXMuQ194KnQqKHRoaXMubSt5ZShhKSksbz10aGlzLmEqdGhpcy5DX3kqYX1lbHNle3ZhciB1PWdlKGEpLHM9eWUoYSk7bz10aGlzLmEqaHQoYSx1LHMsdGhpcy5lbikscj10aGlzLmEqdCpzL2JlKDEtdGhpcy5lcyp1KnUpfXJldHVybiBlLng9cixlLnk9byxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe3ZhciB0LGEscixvO3JldHVybiBlLngtPXRoaXMueDAscj1lLngvdGhpcy5hLGUueS09dGhpcy55MCx0PWUueS90aGlzLmEsdGhpcy5zcGhlcmU/KHQvPXRoaXMuQ195LHIvPXRoaXMuQ194Kih0aGlzLm0reWUodCkpLHRoaXMubT90PVZ0KCh0aGlzLm0qdCtnZSh0KSkvdGhpcy5uKToxIT09dGhpcy5uJiYodD1WdChnZSh0KS90aGlzLm4pKSxyPVZlKHIrdGhpcy5sb25nMCksdD1pKHQpKToodD1ndChlLnkvdGhpcy5hLHRoaXMuZXMsdGhpcy5lbiksbz1uKHQpLG88Q2U/KG89Z2UodCksYT10aGlzLmxvbmcwK2UueCpiZSgxLXRoaXMuZXMqbypvKS8odGhpcy5hKnllKHQpKSxyPVZlKGEpKTpvLXZlPENlJiYocj10aGlzLmxvbmcwKSksZS54PXIsZS55PXQsZX0sbmFtZXM6W1wiU2ludXNvaWRhbFwiLFwic2ludVwiXX0sZGE9e2luaXQ6ZnVuY3Rpb24oKXt9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUueCxhPWUueSxyPVZlKHQtdGhpcy5sb25nMCkscz1hLGk9bWUqZ2UoYSksbztvPS0ocytnZShzKS1pKS8oMSt5ZShzKSkscys9bywhKG4obyk8dmUpOyk7cy89MixtZS8yLW4oYSk8dmUmJihyPTApO3ZhciBkPS45MDAzMTYzMTYxNTgqdGhpcy5hKnIqeWUocykrdGhpcy54MCxsPTEuNDE0MjEzNTYyMzczMSp0aGlzLmEqZ2UocykrdGhpcy55MDtyZXR1cm4gZS54PWQsZS55PWwsZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdCxhO2UueC09dGhpcy54MCxlLnktPXRoaXMueTAsYT1lLnkvKDEuNDE0MjEzNTYyMzczMSp0aGlzLmEpLC45OTk5OTk5OTk5OTk8bihhKSYmKGE9Ljk5OTk5OTk5OTk5OSksdD1sZShhKTt2YXIgcj1WZSh0aGlzLmxvbmcwK2UueC8oLjkwMDMxNjMxNjE1OCp0aGlzLmEqeWUodCkpKTtyPC1tZSYmKHI9LW1lKSxyPm1lJiYocj1tZSksYT0oMip0K2dlKDIqdCkpL21lLDE8bihhKSYmKGE9MSk7dmFyIHM9bGUoYSk7cmV0dXJuIGUueD1yLGUueT1zLGV9LG5hbWVzOltcIk1vbGx3ZWlkZVwiLFwibW9sbFwiXX0sbGE9e2luaXQ6ZnVuY3Rpb24oKXtuKHRoaXMubGF0MSt0aGlzLmxhdDIpPHZlfHwodGhpcy5sYXQyPXRoaXMubGF0Mnx8dGhpcy5sYXQxLHRoaXMudGVtcD10aGlzLmIvdGhpcy5hLHRoaXMuZXM9MS1vKHRoaXMudGVtcCwyKSx0aGlzLmU9YmUodGhpcy5lcyksdGhpcy5lMD1VdCh0aGlzLmVzKSx0aGlzLmUxPUZ0KHRoaXMuZXMpLHRoaXMuZTI9TXQodGhpcy5lcyksdGhpcy5lMz1HdCh0aGlzLmVzKSx0aGlzLnNpbnBoaT1nZSh0aGlzLmxhdDEpLHRoaXMuY29zcGhpPXllKHRoaXMubGF0MSksdGhpcy5tczE9UWUodGhpcy5lLHRoaXMuc2lucGhpLHRoaXMuY29zcGhpKSx0aGlzLm1sMT1qdCh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MSksbih0aGlzLmxhdDEtdGhpcy5sYXQyKTx2ZT90aGlzLm5zPXRoaXMuc2lucGhpOih0aGlzLnNpbnBoaT1nZSh0aGlzLmxhdDIpLHRoaXMuY29zcGhpPXllKHRoaXMubGF0MiksdGhpcy5tczI9UWUodGhpcy5lLHRoaXMuc2lucGhpLHRoaXMuY29zcGhpKSx0aGlzLm1sMj1qdCh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MiksdGhpcy5ucz0odGhpcy5tczEtdGhpcy5tczIpLyh0aGlzLm1sMi10aGlzLm1sMSkpLHRoaXMuZz10aGlzLm1sMSt0aGlzLm1zMS90aGlzLm5zLHRoaXMubWwwPWp0KHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsdGhpcy5sYXQwKSx0aGlzLnJoPXRoaXMuYSoodGhpcy5nLXRoaXMubWwwKSl9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS54LGE9ZS55LG47aWYodGhpcy5zcGhlcmUpbj10aGlzLmEqKHRoaXMuZy1hKTtlbHNle3ZhciByPWp0KHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsYSk7bj10aGlzLmEqKHRoaXMuZy1yKX12YXIgcz10aGlzLm5zKlZlKHQtdGhpcy5sb25nMCksaT10aGlzLngwK24qZ2Uocyksbz10aGlzLnkwK3RoaXMucmgtbip5ZShzKTtyZXR1cm4gZS54PWksZS55PW8sZX0saW52ZXJzZTpmdW5jdGlvbihlKXtlLngtPXRoaXMueDAsZS55PXRoaXMucmgtZS55K3RoaXMueTA7dmFyIHQsYSxuLHI7MDw9dGhpcy5ucz8oYT1iZShlLngqZS54K2UueSplLnkpLHQ9MSk6KGE9LWJlKGUueCplLngrZS55KmUueSksdD0tMSk7dmFyIHM9MDtpZigwIT09YSYmKHM9dWUodCplLngsdCplLnkpKSx0aGlzLnNwaGVyZSlyZXR1cm4gcj1WZSh0aGlzLmxvbmcwK3MvdGhpcy5ucyksbj1pKHRoaXMuZy1hL3RoaXMuYSksZS54PXIsZS55PW4sZTt2YXIgbz10aGlzLmctYS90aGlzLmE7cmV0dXJuIG49Y2Uobyx0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzKSxyPVZlKHRoaXMubG9uZzArcy90aGlzLm5zKSxlLng9cixlLnk9bixlfSxuYW1lczpbXCJFcXVpZGlzdGFudF9Db25pY1wiLFwiZXFkY1wiXX0scGE9e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLlI9dGhpcy5hfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueSxyPVZlKHQtdGhpcy5sb25nMCkscyxpO24oYSk8PXZlJiYocz10aGlzLngwK3RoaXMuUipyLGk9dGhpcy55MCk7dmFyIG89VnQoMipuKGEvbWUpKTsobihyKTw9dmV8fG4obihhKS1DZSk8PXZlKSYmKHM9dGhpcy54MCxpPTA8PWE/dGhpcy55MCttZSp0aGlzLlIqaGUoLjUqbyk6dGhpcy55MCttZSp0aGlzLlIqLWhlKC41Km8pKTt2YXIgZD0uNSpuKG1lL3Itci9tZSksbD1kKmQscD1nZShvKSxjPXllKG8pLHU9Yy8ocCtjLTEpLF89dSooMi9wLTEpLG09XypfLGY9bWUqdGhpcy5SKihkKih1LW0pK2JlKGwqKHUtbSkqKHUtbSktKG0rbCkqKHUqdS1tKSkpLyhtK2wpOzA+ciYmKGY9LWYpLHM9dGhpcy54MCtmO3ZhciBoPWwrdTtyZXR1cm4gZj1tZSp0aGlzLlIqKF8qaC1kKmJlKChtK2wpKihsKzEpLWgqaCkpLyhtK2wpLGk9MDw9YT90aGlzLnkwK2Y6dGhpcy55MC1mLGUueD1zLGUueT1pLGV9LGludmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsYSxyLHMsaSxvLGwscCxjLHUsbSxfLGY7cmV0dXJuIGUueC09dGhpcy54MCxlLnktPXRoaXMueTAsbT1tZSp0aGlzLlIscj1lLngvbSxzPWUueS9tLGk9cipyK3MqcyxvPS1uKHMpKigxK2kpLGw9by0yKnMqcytyKnIscD0tMipvKzErMipzKnMraSppLGY9cypzL3ArKDIqbCpsKmwvcC9wL3AtOSpvKmwvcC9wKS8yNyxjPShvLWwqbC8zL3ApL3AsdT0yKmJlKC1jLzMpLG09MypmL2MvdSwxPG4obSkmJigwPD1tP209MTptPS0xKSxfPXBlKG0pLzMsYT0wPD1lLnk/KC11KnllKF8rbWUvMyktbC8zL3ApKm1lOi0oLXUqeWUoXyttZS8zKS1sLzMvcCkqbWUsdD1uKHIpPHZlP3RoaXMubG9uZzA6VmUodGhpcy5sb25nMCttZSooaS0xK2JlKDErMioocipyLXMqcykraSppKSkvMi9yKSxlLng9dCxlLnk9YSxlfSxuYW1lczpbXCJWYW5fZGVyX0dyaW50ZW5fSVwiLFwiVmFuRGVyR3JpbnRlblwiLFwidmFuZGdcIl19LGNhPXtpbml0OmZ1bmN0aW9uKCl7dGhpcy5zaW5fcDEyPWdlKHRoaXMubGF0MCksdGhpcy5jb3NfcDEyPXllKHRoaXMubGF0MCl9LGZvcndhcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS54LGE9ZS55LHI9Z2UoZS55KSxpPXllKGUueSksbz1WZSh0LXRoaXMubG9uZzApLGQsbCxwLHUsbSxfLGYsaCxnLHksYix4LHcsRSxDLEEsUyxrLHYsSSxSLE8sejtyZXR1cm4gdGhpcy5zcGhlcmU/bih0aGlzLnNpbl9wMTItMSk8PXZlPyhlLng9dGhpcy54MCt0aGlzLmEqKENlLWEpKmdlKG8pLGUueT10aGlzLnkwLXRoaXMuYSooQ2UtYSkqeWUobyksZSk6bih0aGlzLnNpbl9wMTIrMSk8PXZlPyhlLng9dGhpcy54MCt0aGlzLmEqKENlK2EpKmdlKG8pLGUueT10aGlzLnkwK3RoaXMuYSooQ2UrYSkqeWUobyksZSk6KGs9dGhpcy5zaW5fcDEyKnIrdGhpcy5jb3NfcDEyKmkqeWUobyksQT1wZShrKSxTPUEvZ2UoQSksZS54PXRoaXMueDArdGhpcy5hKlMqaSpnZShvKSxlLnk9dGhpcy55MCt0aGlzLmEqUyoodGhpcy5jb3NfcDEyKnItdGhpcy5zaW5fcDEyKmkqeWUobykpLGUpOihkPVV0KHRoaXMuZXMpLGw9RnQodGhpcy5lcykscD1NdCh0aGlzLmVzKSx1PUd0KHRoaXMuZXMpLG4odGhpcy5zaW5fcDEyLTEpPD12ZT8obT10aGlzLmEqanQoZCxsLHAsdSxDZSksXz10aGlzLmEqanQoZCxsLHAsdSxhKSxlLng9dGhpcy54MCsobS1fKSpnZShvKSxlLnk9dGhpcy55MC0obS1fKSp5ZShvKSxlKTpuKHRoaXMuc2luX3AxMisxKTw9dmU/KG09dGhpcy5hKmp0KGQsbCxwLHUsQ2UpLF89dGhpcy5hKmp0KGQsbCxwLHUsYSksZS54PXRoaXMueDArKG0rXykqZ2UobyksZS55PXRoaXMueTArKG0rXykqeWUobyksZSk6KGY9ci9pLGg9WnQodGhpcy5hLHRoaXMuZSx0aGlzLnNpbl9wMTIpLGc9WnQodGhpcy5hLHRoaXMuZSxyKSx5PV9lKCgxLXRoaXMuZXMpKmYrdGhpcy5lcypoKnRoaXMuc2luX3AxMi8oZyppKSksYj11ZShnZShvKSx0aGlzLmNvc19wMTIqaGUoeSktdGhpcy5zaW5fcDEyKnllKG8pKSx2PTA9PT1iP2xlKHRoaXMuY29zX3AxMipnZSh5KS10aGlzLnNpbl9wMTIqeWUoeSkpOm4obihiKS1tZSk8PXZlPy1sZSh0aGlzLmNvc19wMTIqZ2UoeSktdGhpcy5zaW5fcDEyKnllKHkpKTpsZShnZShvKSp5ZSh5KS9nZShiKSkseD10aGlzLmUqdGhpcy5zaW5fcDEyL2JlKDEtdGhpcy5lcyksdz10aGlzLmUqdGhpcy5jb3NfcDEyKnllKGIpL2JlKDEtdGhpcy5lcyksRT14KncsQz13KncsST12KnYsUj1JKnYsTz1SKnYsej1PKnYsQT1oKnYqKDEtSSpDKigxLUMpLzYrUi84KkUqKDEtMipDKStPLzEyMCooQyooNC03KkMpLTMqeCp4KigxLTcqQykpLXovNDgqRSksZS54PXRoaXMueDArQSpnZShiKSxlLnk9dGhpcy55MCtBKnllKGIpLGUpKX0saW52ZXJzZTpmdW5jdGlvbihlKXtlLngtPXRoaXMueDAsZS55LT10aGlzLnkwO3ZhciB0LGEscixzLGksZCxsLHAsYyx1LG0sXyxmLGgsZyx5LGIseCx3LEUsQyxTLGs7cmV0dXJuIHRoaXMuc3BoZXJlPyh0PWJlKGUueCplLngrZS55KmUueSksdD4yKkNlKnRoaXMuYSk/dm9pZCAwOihhPXQvdGhpcy5hLHI9Z2UoYSkscz15ZShhKSxpPXRoaXMubG9uZzAsbih0KTw9dmU/ZD10aGlzLmxhdDA6KGQ9VnQocyp0aGlzLnNpbl9wMTIrZS55KnIqdGhpcy5jb3NfcDEyL3QpLGw9bih0aGlzLmxhdDApLUNlLGk9bihsKTw9dmU/MDw9dGhpcy5sYXQwP1ZlKHRoaXMubG9uZzArdWUoZS54LC1lLnkpKTpWZSh0aGlzLmxvbmcwLXVlKC1lLngsZS55KSk6VmUodGhpcy5sb25nMCt1ZShlLngqcix0KnRoaXMuY29zX3AxMipzLWUueSp0aGlzLnNpbl9wMTIqcikpKSxlLng9aSxlLnk9ZCxlKToocD1VdCh0aGlzLmVzKSxjPUZ0KHRoaXMuZXMpLHU9TXQodGhpcy5lcyksbT1HdCh0aGlzLmVzKSxuKHRoaXMuc2luX3AxMi0xKTw9dmU/KF89dGhpcy5hKmp0KHAsYyx1LG0sQ2UpLHQ9YmUoZS54KmUueCtlLnkqZS55KSxmPV8tdCxkPWNlKGYvdGhpcy5hLHAsYyx1LG0pLGk9VmUodGhpcy5sb25nMCt1ZShlLngsLTEqZS55KSksZS54PWksZS55PWQsZSk6bih0aGlzLnNpbl9wMTIrMSk8PXZlPyhfPXRoaXMuYSpqdChwLGMsdSxtLENlKSx0PWJlKGUueCplLngrZS55KmUueSksZj10LV8sZD1jZShmL3RoaXMuYSxwLGMsdSxtKSxpPVZlKHRoaXMubG9uZzArdWUoZS54LGUueSkpLGUueD1pLGUueT1kLGUpOih0PWJlKGUueCplLngrZS55KmUueSkseT11ZShlLngsZS55KSxoPVp0KHRoaXMuYSx0aGlzLmUsdGhpcy5zaW5fcDEyKSxiPXllKHkpLHg9dGhpcy5lKnRoaXMuY29zX3AxMipiLHc9LXgqeC8oMS10aGlzLmVzKSxFPTMqdGhpcy5lcyooMS13KSp0aGlzLnNpbl9wMTIqdGhpcy5jb3NfcDEyKmIvKDEtdGhpcy5lcyksQz10L2gsUz1DLXcqKDErdykqbyhDLDMpLzYtRSooMSszKncpKm8oQyw0KS8yNCxrPTEtdypTKlMvMi1DKlMqUypTLzYsZz1sZSh0aGlzLnNpbl9wMTIqeWUoUykrdGhpcy5jb3NfcDEyKmdlKFMpKmIpLGk9VmUodGhpcy5sb25nMCtsZShnZSh5KSpnZShTKS95ZShnKSkpLGQ9X2UoKDEtdGhpcy5lcyprKnRoaXMuc2luX3AxMi9nZShnKSkqaGUoZykvKDEtdGhpcy5lcykpLGUueD1pLGUueT1kLGUpKX0sbmFtZXM6W1wiQXppbXV0aGFsX0VxdWlkaXN0YW50XCIsXCJhZXFkXCJdfSx1YT17aW5pdDpmdW5jdGlvbigpe3RoaXMuc2luX3AxND1nZSh0aGlzLmxhdDApLHRoaXMuY29zX3AxND15ZSh0aGlzLmxhdDApfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWUueCxhPWUueSxyLHMsaSxvLGQsbCxwLGM7cmV0dXJuIGk9VmUodC10aGlzLmxvbmcwKSxyPWdlKGEpLHM9eWUoYSksbz15ZShpKSxsPXRoaXMuc2luX3AxNCpyK3RoaXMuY29zX3AxNCpzKm8sZD0xLCgwPGx8fG4obCk8PXZlKSYmKHA9dGhpcy5hKmQqcypnZShpKSxjPXRoaXMueTArdGhpcy5hKmQqKHRoaXMuY29zX3AxNCpyLXRoaXMuc2luX3AxNCpzKm8pKSxlLng9cCxlLnk9YyxlfSxpbnZlcnNlOmZ1bmN0aW9uKGUpe3ZhciB0LGEscixzLGksbyxkO3JldHVybihlLngtPXRoaXMueDAsZS55LT10aGlzLnkwLHQ9YmUoZS54KmUueCtlLnkqZS55KSxhPVZ0KHQvdGhpcy5hKSxyPWdlKGEpLHM9eWUoYSksbz10aGlzLmxvbmcwLG4odCk8PXZlKT8oZD10aGlzLmxhdDAsZS54PW8sZS55PWQsZSk6KGQ9VnQocyp0aGlzLnNpbl9wMTQrZS55KnIqdGhpcy5jb3NfcDE0L3QpLGk9bih0aGlzLmxhdDApLUNlLG4oaSk8PXZlKT8obz0wPD10aGlzLmxhdDA/VmUodGhpcy5sb25nMCt1ZShlLngsLWUueSkpOlZlKHRoaXMubG9uZzAtdWUoLWUueCxlLnkpKSxlLng9byxlLnk9ZCxlKToobz1WZSh0aGlzLmxvbmcwK3VlKGUueCpyLHQqdGhpcy5jb3NfcDE0KnMtZS55KnRoaXMuc2luX3AxNCpyKSksZS54PW8sZS55PWQsZSl9LG5hbWVzOltcIm9ydGhvXCJdfSxtYT17RlJPTlQ6MSxSSUdIVDoyLEJBQ0s6MyxMRUZUOjQsVE9QOjUsQk9UVE9NOjZ9LF9hPXtBUkVBXzA6MSxBUkVBXzE6MixBUkVBXzI6MyxBUkVBXzM6NH0sZmE9e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLngwPXRoaXMueDB8fDAsdGhpcy55MD10aGlzLnkwfHwwLHRoaXMubGF0MD10aGlzLmxhdDB8fDAsdGhpcy5sb25nMD10aGlzLmxvbmcwfHwwLHRoaXMubGF0X3RzPXRoaXMubGF0X3RzfHwwLHRoaXMudGl0bGU9dGhpcy50aXRsZXx8XCJRdWFkcmlsYXRlcmFsaXplZCBTcGhlcmljYWwgQ3ViZVwiLHRoaXMuZmFjZT10aGlzLmxhdDA+PUNlLU9lLzI/bWEuVE9QOnRoaXMubGF0MDw9LShDZS1PZS8yKT9tYS5CT1RUT006bih0aGlzLmxvbmcwKTw9T2U/bWEuRlJPTlQ6bih0aGlzLmxvbmcwKTw9Q2UrT2U/MDx0aGlzLmxvbmcwP21hLlJJR0hUOm1hLkxFRlQ6bWEuQkFDSywwIT09dGhpcy5lcyYmKHRoaXMub25lX21pbnVzX2Y9MS0odGhpcy5hLXRoaXMuYikvdGhpcy5hLHRoaXMub25lX21pbnVzX2Zfc3F1YXJlZD10aGlzLm9uZV9taW51c19mKnRoaXMub25lX21pbnVzX2YpfSxmb3J3YXJkOmZ1bmN0aW9uKGUpe3ZhciBhPXt4OjAseTowfSxuPXt2YWx1ZTowfSxpLG8sZCxsLHAsYztpZihlLngtPXRoaXMubG9uZzAsaT0wPT09dGhpcy5lcz9lLnk6X2UodGhpcy5vbmVfbWludXNfZl9zcXVhcmVkKmhlKGUueSkpLG89ZS54LHRoaXMuZmFjZT09PW1hLlRPUClsPUNlLWksbz49T2UmJm88PUNlK09lPyhuLnZhbHVlPV9hLkFSRUFfMCxkPW8tQ2UpOm8+Q2UrT2V8fG88PS0oQ2UrT2UpPyhuLnZhbHVlPV9hLkFSRUFfMSxkPTA8bz9vLUxlOm8rTGUpOm8+LShDZStPZSkmJm88PS1PZT8obi52YWx1ZT1fYS5BUkVBXzIsZD1vK0NlKToobi52YWx1ZT1fYS5BUkVBXzMsZD1vKTtlbHNlIGlmKHRoaXMuZmFjZT09PW1hLkJPVFRPTSlsPUNlK2ksbz49T2UmJm88PUNlK09lPyhuLnZhbHVlPV9hLkFSRUFfMCxkPS1vK0NlKTpvPE9lJiZvPj0tT2U/KG4udmFsdWU9X2EuQVJFQV8xLGQ9LW8pOm88LU9lJiZvPj0tKENlK09lKT8obi52YWx1ZT1fYS5BUkVBXzIsZD0tby1DZSk6KG4udmFsdWU9X2EuQVJFQV8zLGQ9MDxvPy1vK0xlOi1vLUxlKTtlbHNle3ZhciB1LG0sXyxmLGgsZyx5O3RoaXMuZmFjZT09PW1hLlJJR0hUP289b2UobywrQ2UpOnRoaXMuZmFjZT09PW1hLkJBQ0s/bz1vZShvLCtMZSk6dGhpcy5mYWNlPT09bWEuTEVGVCYmKG89b2UobywtQ2UpKSxmPWdlKGkpLGg9eWUoaSksZz1nZShvKSx5PXllKG8pLHU9aCp5LG09aCpnLF89Zix0aGlzLmZhY2U9PT1tYS5GUk9OVD8obD1wZSh1KSxkPWllKGwsXyxtLG4pKTp0aGlzLmZhY2U9PT1tYS5SSUdIVD8obD1wZShtKSxkPWllKGwsXywtdSxuKSk6dGhpcy5mYWNlPT09bWEuQkFDSz8obD1wZSgtdSksZD1pZShsLF8sLW0sbikpOnRoaXMuZmFjZT09PW1hLkxFRlQ/KGw9cGUoLW0pLGQ9aWUobCxfLHUsbikpOihsPWQ9MCxuLnZhbHVlPV9hLkFSRUFfMCl9cmV0dXJuIGM9X2UoMTIvTGUqKGQrcGUoZ2UoZCkqeWUoT2UpKS1DZSkpLHA9YmUoKDEteWUobCkpLyh5ZShjKSp5ZShjKSkvKDEteWUoX2UoMS95ZShkKSkpKSksbi52YWx1ZT09PV9hLkFSRUFfMT9jKz1DZTpuLnZhbHVlPT09X2EuQVJFQV8yP2MrPUxlOm4udmFsdWU9PT1fYS5BUkVBXzMmJihjKz0xLjUqTGUpLGEueD1wKnllKGMpLGEueT1wKmdlKGMpLGEueD1hLngqdGhpcy5hK3RoaXMueDAsYS55PWEueSp0aGlzLmErdGhpcy55MCxlLng9YS54LGUueT1hLnksZX0saW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgYT17bGFtOjAscGhpOjB9LGk9e3ZhbHVlOjB9LG8sZCxsLHAsYyx1LG0sXyxmO2lmKGUueD0oZS54LXRoaXMueDApL3RoaXMuYSxlLnk9KGUueS10aGlzLnkwKS90aGlzLmEsZD1fZShiZShlLngqZS54K2UueSplLnkpKSxvPXVlKGUueSxlLngpLDA8PWUueCYmZS54Pj1uKGUueSk/aS52YWx1ZT1fYS5BUkVBXzA6MDw9ZS55JiZlLnk+PW4oZS54KT8oaS52YWx1ZT1fYS5BUkVBXzEsby09Q2UpOjA+ZS54JiYtZS54Pj1uKGUueSk/KGkudmFsdWU9X2EuQVJFQV8yLG89MD5vP28rTGU6by1MZSk6KGkudmFsdWU9X2EuQVJFQV8zLG8rPUNlKSxmPUxlLzEyKmhlKG8pLGM9Z2UoZikvKHllKGYpLTEvYmUoMikpLHU9X2UoYyksbD15ZShvKSxwPWhlKGQpLG09MS1sKmwqcCpwKigxLXllKF9lKDEveWUodSkpKSksLTE+bT9tPS0xOjE8bSYmKG09MSksdGhpcy5mYWNlPT09bWEuVE9QKV89cGUobSksYS5waGk9Q2UtXyxhLmxhbT1pLnZhbHVlPT09X2EuQVJFQV8wP3UrQ2U6aS52YWx1ZT09PV9hLkFSRUFfMT8wPnU/dStMZTp1LUxlOmkudmFsdWU9PT1fYS5BUkVBXzI/dS1DZTp1O2Vsc2UgaWYodGhpcy5mYWNlPT09bWEuQk9UVE9NKV89cGUobSksYS5waGk9Xy1DZSxhLmxhbT1pLnZhbHVlPT09X2EuQVJFQV8wPy11K0NlOmkudmFsdWU9PT1fYS5BUkVBXzE/LXU6aS52YWx1ZT09PV9hLkFSRUFfMj8tdS1DZTowPnU/LXUtTGU6LXUrTGU7ZWxzZXt2YXIgaCxnLHk7aD1tLGY9aCpoLHk9MTw9Zj8wOmJlKDEtZikqZ2UodSksZis9eSp5LGc9MTw9Zj8wOmJlKDEtZiksaS52YWx1ZT09PV9hLkFSRUFfMT8oZj1nLGc9LXkseT1mKTppLnZhbHVlPT09X2EuQVJFQV8yPyhnPS1nLHk9LXkpOmkudmFsdWU9PT1fYS5BUkVBXzMmJihmPWcsZz15LHk9LWYpLHRoaXMuZmFjZT09PW1hLlJJR0hUPyhmPWgsaD0tZyxnPWYpOnRoaXMuZmFjZT09PW1hLkJBQ0s/KGg9LWgsZz0tZyk6dGhpcy5mYWNlPT09bWEuTEVGVCYmKGY9aCxoPWcsZz0tZiksYS5waGk9cGUoLXkpLUNlLGEubGFtPXVlKGcsaCksdGhpcy5mYWNlPT09bWEuUklHSFQ/YS5sYW09b2UoYS5sYW0sLUNlKTp0aGlzLmZhY2U9PT1tYS5CQUNLP2EubGFtPW9lKGEubGFtLC1MZSk6dGhpcy5mYWNlPT09bWEuTEVGVCYmKGEubGFtPW9lKGEubGFtLCtDZSkpfWlmKDAhPT10aGlzLmVzKXt2YXIgYix4LHc7Yj0wPmEucGhpPzE6MCx4PWhlKGEucGhpKSx3PXRoaXMuYi9iZSh4KngrdGhpcy5vbmVfbWludXNfZl9zcXVhcmVkKSxhLnBoaT1fZShiZSh0aGlzLmEqdGhpcy5hLXcqdykvKHRoaXMub25lX21pbnVzX2YqdykpLGImJihhLnBoaT0tYS5waGkpfXJldHVybiBhLmxhbSs9dGhpcy5sb25nMCxlLng9YS5sYW0sZS55PWEucGhpLGV9LG5hbWVzOltcIlF1YWRyaWxhdGVyYWxpemVkIFNwaGVyaWNhbCBDdWJlXCIsXCJRdWFkcmlsYXRlcmFsaXplZF9TcGhlcmljYWxfQ3ViZVwiLFwicXNjXCJdfSxoYT1bWzEsMjIxOTllLTIxLC03MTU1MTVlLTEwLDMxMTAzZS0xMF0sWy45OTg2LC00ODIyNDNlLTksLTI0ODk3ZS05LC0xMzMwOWUtMTBdLFsuOTk1NCwtODMxMDNlLTgsLTQ0ODYwNWUtMTAsLTkuODY3MDFlLTddLFsuOTksLS4wMDEzNTM2NCwtNTk2NjFlLTksMzY3NzdlLTEwXSxbLjk4MjIsLS4wMDE2NzQ0MiwtNDQ5NTQ3ZS0xMSwtNTcyNDExZS0xMV0sWy45NzMsLS4wMDIxNDg2OCwtOTAzNTcxZS0xMCwxLjg3MzZlLThdLFsuOTYsLS4wMDMwNTA4NSwtOTAwNzYxZS0xMCwxNjQ5MTdlLTExXSxbLjk0MjcsLS4wMDM4Mjc5MiwtNjUzMzg2ZS0xMCwtMjYxNTRlLTEwXSxbLjkyMTYsLS4wMDQ2Nzc0NiwtMTA0NTdlLTgsNDgxMjQzZS0xMV0sWy44OTYyLC0uMDA1MzYyMjMsLTMyMzgzMWUtMTAsLTU0MzQzMmUtMTFdLFsuODY3OSwtLjAwNjA5MzYzLC0xMTM4OThlLTksMzMyNDg0ZS0xMV0sWy44MzUsLS4wMDY5ODMyNSwtNjQwMjUzZS0xMCw5LjM0OTU5ZS03XSxbLjc5ODYsLS4wMDc1NTMzOCwtNTAwMDA5ZS0xMCw5LjM1MzI0ZS03XSxbLjc1OTcsLS4wMDc5ODMyNCwtMzU5NzFlLTksLTIyNzYyNmUtMTFdLFsuNzE4NiwtLjAwODUxMzY3LC03MDExNDllLTEwLC04NjMwM2UtMTBdLFsuNjczMiwtLjAwOTg2MjA5LC0xOTk1NjllLTksMTkxOTc0ZS0xMF0sWy42MjEzLC0uMDEwNDE4LDg4MzkyM2UtMTAsNjI0MDUxZS0xMV0sWy41NzIyLC0uMDA5MDY2MDEsMTgyZS02LDYyNDA1MWUtMTFdLFsuNTMyMiwtLjAwNjc3Nzk3LDI3NTYwOGUtOSw2MjQwNTFlLTExXV0sZ2E9W1stNTIwNDE3ZS0yMywuMDEyNCwxMjE0MzFlLTIzLC04NDUyODRlLTE2XSxbLjA2MiwuMDEyNCwtMS4yNjc5M2UtOSw0MjI2NDJlLTE1XSxbLjEyNCwuMDEyNCw1LjA3MTcxZS05LC0xLjYwNjA0ZS05XSxbLjE4NiwuMDEyMzk5OSwtMS45MDE4OWUtOCw2LjAwMTUyZS05XSxbLjI0OCwuMDEyNDAwMiw3LjEwMDM5ZS04LC0yLjI0ZS04XSxbLjMxLC4wMTIzOTkyLC0yLjY0OTk3ZS03LDguMzU5ODZlLThdLFsuMzcyLC4wMTI0MDI5LDkuODg5ODNlLTcsLTMuMTE5OTRlLTddLFsuNDM0LC4wMTIzODkzLC0zNjkwOTNlLTExLC00LjM1NjIxZS03XSxbLjQ5NTgsLjAxMjMxOTgsLTEwMjI1MmUtMTAsLTMuNDU1MjNlLTddLFsuNTU3MSwuMDEyMTkxNiwtMTU0MDgxZS0xMCwtNS44MjI4OGUtN10sWy42MTc2LC4wMTE5OTM4LC0yNDE0MjRlLTEwLC01LjI1MzI3ZS03XSxbLjY3NjksLjAxMTcxMywtMzIwMjIzZS0xMCwtNS4xNjQwNWUtN10sWy43MzQ2LC4wMTEzNTQxLC0zOTc2ODRlLTEwLC02LjA5MDUyZS03XSxbLjc5MDMsLjAxMDkxMDcsLTQ4OTA0MmUtMTAsLTEwNDczOWUtMTFdLFsuODQzNSwuMDEwMzQzMSwtNjQ2MTVlLTksLTEuNDAzNzRlLTldLFsuODkzNiwuMDA5Njk2ODYsLTY0NjM2ZS05LC04NTQ3ZS05XSxbLjkzOTQsLjAwODQwOTQ3LC0xOTI4NDFlLTksLTQyMTA2ZS0xMF0sWy45NzYxLC4wMDYxNjUyNywtMjU2ZS02LC00MjEwNmUtMTBdLFsxLC4wMDMyODk0NywtMzE5MTU5ZS05LC00MjEwNmUtMTBdXSx5YT0uODQ4NyxiYT0xLjM1MjMseGE9UmUvNSx3YT1mdW5jdGlvbihlLHQpe3JldHVybiBlWzBdK3QqKGVbMV0rdCooZVsyXSt0KmVbM10pKX0sRWE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVsxXSt0KigyKmVbMl0rMyp0KmVbM10pfSxDYT17aW5pdDpmdW5jdGlvbigpe3RoaXMueDA9dGhpcy54MHx8MCx0aGlzLnkwPXRoaXMueTB8fDAsdGhpcy5sb25nMD10aGlzLmxvbmcwfHwwLHRoaXMuZXM9MCx0aGlzLnRpdGxlPXRoaXMudGl0bGV8fFwiUm9iaW5zb25cIn0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1WZShlLngtdGhpcy5sb25nMCksYT1uKGUueSkscz1yKGEqeGEpOzA+cz9zPTA6MTg8PXMmJihzPTE3KSxhPVJlKihhLTEveGEqcyk7dmFyIG89e3g6d2EoaGFbc10sYSkqdCx5OndhKGdhW3NdLGEpfTtyZXR1cm4gMD5lLnkmJihvLnk9LW8ueSksby54PW8ueCp0aGlzLmEqeWErdGhpcy54MCxvLnk9by55KnRoaXMuYSpiYSt0aGlzLnkwLG99LGludmVyc2U6ZnVuY3Rpb24oZSl7dmFyIGE9e3g6KGUueC10aGlzLngwKS8odGhpcy5hKnlhKSx5Om4oZS55LXRoaXMueTApLyh0aGlzLmEqYmEpfTtpZigxPD1hLnkpYS54Lz1oYVsxOF1bMF0sYS55PTA+ZS55Py1DZTpDZTtlbHNle3ZhciBzPXIoMTgqYS55KTtmb3IoMD5zP3M9MDoxODw9cyYmKHM9MTcpOzspaWYoZ2Fbc11bMF0+YS55KS0tcztlbHNlIGlmKGdhW3MrMV1bMF08PWEueSkrK3M7ZWxzZSBicmVhazt2YXIgbz1nYVtzXSxkPTUqKGEueS1vWzBdKS8oZ2FbcysxXVswXS1vWzBdKTtkPWRlKGZ1bmN0aW9uKGUpe3JldHVybih3YShvLGUpLWEueSkvRWEobyxlKX0sZCx2ZSwxMDApLGEueC89d2EoaGFbc10sZCksYS55PSg1KnMrZCkqSWUsMD5lLnkmJihhLnk9LWEueSl9cmV0dXJuIGEueD1WZShhLngrdGhpcy5sb25nMCksYX0sbmFtZXM6W1wiUm9iaW5zb25cIixcInJvYmluXCJdfSxBYT17aW5pdDpmdW5jdGlvbigpe3RoaXMubmFtZT1cImdlb2NlbnRcIn0sZm9yd2FyZDpmdW5jdGlvbihlKXt2YXIgdD16KGUsdGhpcy5lcyx0aGlzLmEpO3JldHVybiB0fSxpbnZlcnNlOmZ1bmN0aW9uKGUpe3ZhciB0PUwoZSx0aGlzLmVzLHRoaXMuYSx0aGlzLmIpO3JldHVybiB0fSxuYW1lczpbXCJHZW9jZW50cmljXCIsXCJnZW9jZW50cmljXCIsXCJnZW9jZW50XCIsXCJHZW9jZW50XCJdfTtyZXR1cm4gTS5kZWZhdWx0RGF0dW09XCJXR1M4NFwiLE0uUHJvaj1SLE0uV0dTODQ9bmV3IE0uUHJvaihcIldHUzg0XCIpLE0uUG9pbnQ9bmUsTS50b1BvaW50PWx0LE0uZGVmcz1mLE0udHJhbnNmb3JtPWosTS5tZ3JzPXtmb3J3YXJkOkcsaW52ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD1LKCQoZS50b1VwcGVyQ2FzZSgpKSk7cmV0dXJuIHQubGF0JiZ0Lmxvbj9bdC5sb24sdC5sYXQsdC5sb24sdC5sYXRdOlt0LmxlZnQsdC5ib3R0b20sdC5yaWdodCx0LnRvcF19LHRvUG9pbnQ6Wn0sTS52ZXJzaW9uPVwiMi42LjFcIixmdW5jdGlvbihlKXtlLlByb2oucHJvamVjdGlvbnMuYWRkKHl0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKHZ0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKFJ0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKEx0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKFR0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKEJ0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKFB0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKE50KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKER0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKEVlKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKEp0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKCR0KSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGVhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGFhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKG5hKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKHJhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKHNhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGlhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKG9hKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGRhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGxhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKHBhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGNhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKHVhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKGZhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKENhKSxlLlByb2oucHJvamVjdGlvbnMuYWRkKEFhKX0oTSksTX0pfSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxhKXtmdW5jdGlvbiBuKGUpe2lmKGUmJiFkKGUpKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2UpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUudG9TdHJpbmcodGhpcy5lbmNvZGluZyl9ZnVuY3Rpb24gcyhlKXt0aGlzLmNoYXJSZWNlaXZlZD1lLmxlbmd0aCUyLHRoaXMuY2hhckxlbmd0aD10aGlzLmNoYXJSZWNlaXZlZD8yOjB9ZnVuY3Rpb24gaShlKXt0aGlzLmNoYXJSZWNlaXZlZD1lLmxlbmd0aCUzLHRoaXMuY2hhckxlbmd0aD10aGlzLmNoYXJSZWNlaXZlZD8zOjB9dmFyIG89ZShcImJ1ZmZlclwiKS5CdWZmZXIsZD1vLmlzRW5jb2Rpbmd8fGZ1bmN0aW9uKGUpe3N3aXRjaChlJiZlLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6Y2FzZVwicmF3XCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMTt9fSxsPWEuU3RyaW5nRGVjb2Rlcj1mdW5jdGlvbihlKXtzd2l0Y2godGhpcy5lbmNvZGluZz0oZXx8XCJ1dGY4XCIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sXCJcIiksbihlKSx0aGlzLmVuY29kaW5nKXtjYXNlXCJ1dGY4XCI6dGhpcy5zdXJyb2dhdGVTaXplPTM7YnJlYWs7Y2FzZVwidWNzMlwiOmNhc2VcInV0ZjE2bGVcIjp0aGlzLnN1cnJvZ2F0ZVNpemU9Mix0aGlzLmRldGVjdEluY29tcGxldGVDaGFyPXM7YnJlYWs7Y2FzZVwiYmFzZTY0XCI6dGhpcy5zdXJyb2dhdGVTaXplPTMsdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1pO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHZvaWQodGhpcy53cml0ZT1yKTt9dGhpcy5jaGFyQnVmZmVyPW5ldyBvKDYpLHRoaXMuY2hhclJlY2VpdmVkPTAsdGhpcy5jaGFyTGVuZ3RoPTB9O2wucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLGE7dGhpcy5jaGFyTGVuZ3RoOyl7aWYoYT1lLmxlbmd0aD49dGhpcy5jaGFyTGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkP3RoaXMuY2hhckxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZDplLmxlbmd0aCxlLmNvcHkodGhpcy5jaGFyQnVmZmVyLHRoaXMuY2hhclJlY2VpdmVkLDAsYSksdGhpcy5jaGFyUmVjZWl2ZWQrPWEsdGhpcy5jaGFyUmVjZWl2ZWQ8dGhpcy5jaGFyTGVuZ3RoKXJldHVyblwiXCI7ZT1lLnNsaWNlKGEsZS5sZW5ndGgpLHQ9dGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTt2YXIgbj10LmNoYXJDb2RlQXQodC5sZW5ndGgtMSk7aWYoNTUyOTY8PW4mJjU2MzE5Pj1uKXt0aGlzLmNoYXJMZW5ndGgrPXRoaXMuc3Vycm9nYXRlU2l6ZSx0PVwiXCI7Y29udGludWV9aWYodGhpcy5jaGFyUmVjZWl2ZWQ9dGhpcy5jaGFyTGVuZ3RoPTAsMD09PWUubGVuZ3RoKXJldHVybiB0O2JyZWFrfXRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIoZSk7dmFyIHI9ZS5sZW5ndGg7dGhpcy5jaGFyTGVuZ3RoJiYoZS5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLGUubGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkLHIpLHItPXRoaXMuY2hhclJlY2VpdmVkKSx0Kz1lLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCxyKTt2YXIgcj10Lmxlbmd0aC0xLG49dC5jaGFyQ29kZUF0KHIpO2lmKDU1Mjk2PD1uJiY1NjMxOT49bil7dmFyIHM9dGhpcy5zdXJyb2dhdGVTaXplO3JldHVybiB0aGlzLmNoYXJMZW5ndGgrPXMsdGhpcy5jaGFyUmVjZWl2ZWQrPXMsdGhpcy5jaGFyQnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLHMsMCxzKSxlLmNvcHkodGhpcy5jaGFyQnVmZmVyLDAsMCxzKSx0LnN1YnN0cmluZygwLHIpfXJldHVybiB0fSxsLnByb3RvdHlwZS5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9Mzw9ZS5sZW5ndGg/MzplLmxlbmd0aDswPHQ7dC0tKXt2YXIgYT1lW2UubGVuZ3RoLXRdO2lmKDE9PXQmJjY9PWE+PjUpe3RoaXMuY2hhckxlbmd0aD0yO2JyZWFrfWlmKDI+PXQmJjE0PT1hPj40KXt0aGlzLmNoYXJMZW5ndGg9MzticmVha31pZigzPj10JiYzMD09YT4+Myl7dGhpcy5jaGFyTGVuZ3RoPTQ7YnJlYWt9fXRoaXMuY2hhclJlY2VpdmVkPXR9LGwucHJvdG90eXBlLmVuZD1mdW5jdGlvbihlKXt2YXIgdD1cIlwiO2lmKGUmJmUubGVuZ3RoJiYodD10aGlzLndyaXRlKGUpKSx0aGlzLmNoYXJSZWNlaXZlZCl7dmFyIGE9dGhpcy5jaGFyUmVjZWl2ZWQsbj10aGlzLmNoYXJCdWZmZXIscj10aGlzLmVuY29kaW5nO3QrPW4uc2xpY2UoMCxhKS50b1N0cmluZyhyKX1yZXR1cm4gdH19LHtidWZmZXI6N31dLDU3OltmdW5jdGlvbihlLHQpe3QuZXhwb3J0cz1lKFwiLi9saWIvZW5jb2RpbmcuanNcIil9LHtcIi4vbGliL2VuY29kaW5nLmpzXCI6NTh9XSw1ODpbZnVuY3Rpb24oZSx0KXsoZnVuY3Rpb24oYSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIG4oZSx0LGEpe3JldHVybiB0PD1lJiZlPD1hfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4tMSE9PWUuaW5kZXhPZih0KX1mdW5jdGlvbiBpKGUpe2lmKGU9PT12b2lkIDApcmV0dXJue307aWYoZT09PU9iamVjdChlKSlyZXR1cm4gZTt0aHJvdyBUeXBlRXJyb3IoXCJDb3VsZCBub3QgY29udmVydCBhcmd1bWVudCB0byBkaWN0aW9uYXJ5XCIpfWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PWUrXCJcIixhPXQubGVuZ3RoLG49MCxyPVtdO248YTspe3ZhciBzPXQuY2hhckNvZGVBdChuKTtpZig1NTI5Nj5zfHw1NzM0MzxzKXIucHVzaChzKTtlbHNlIGlmKDU2MzIwPD1zJiY1NzM0Mz49cylyLnB1c2goNjU1MzMpO2Vsc2UgaWYoNTUyOTY8PXMmJjU2MzE5Pj1zKWlmKG49PT1hLTEpci5wdXNoKDY1NTMzKTtlbHNle3ZhciBvPXQuY2hhckNvZGVBdChuKzEpO2lmKDU2MzIwPD1vJiY1NzM0Mz49byl7ci5wdXNoKDY1NTM2KygoMTAyMyZzKTw8MTApKygxMDIzJm8pKSxuKz0xfWVsc2Ugci5wdXNoKDY1NTMzKX1uKz0xfXJldHVybiByfWZ1bmN0aW9uIGwoZSl7Zm9yKHZhciB0PVwiXCIsYT0wLG47YTxlLmxlbmd0aDsrK2Epbj1lW2FdLDY1NTM1Pj1uP3QrPWQobik6KG4tPTY1NTM2LHQrPWQoKG4+PjEwKSs1NTI5NiwoMTAyMyZuKSs1NjMyMCkpO3JldHVybiB0fWZ1bmN0aW9uIHAoZSl7cmV0dXJuIDA8PWUmJjEyNz49ZX1mdW5jdGlvbiBjKGUpe3RoaXMudG9rZW5zPVtdLnNsaWNlLmNhbGwoZSksdGhpcy50b2tlbnMucmV2ZXJzZSgpfWZ1bmN0aW9uIHUoZSx0KXtpZihlKXRocm93IFR5cGVFcnJvcihcIkRlY29kZXIgZXJyb3JcIik7cmV0dXJuIHR8fDY1NTMzfWZ1bmN0aW9uIG0oZSl7dGhyb3cgVHlwZUVycm9yKFwiVGhlIGNvZGUgcG9pbnQgXCIrZStcIiBjb3VsZCBub3QgYmUgZW5jb2RlZC5cIil9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZT0oZStcIlwiKS50cmltKCkudG9Mb3dlckNhc2UoKSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoVyxlKT9XW2VdOm51bGx9ZnVuY3Rpb24gZihlLHQpe3JldHVybiB0P3RbZV18fG51bGw6bnVsbH1mdW5jdGlvbiBoKGUsdCl7dmFyIGE9dC5pbmRleE9mKGUpO3JldHVybi0xPT09YT9udWxsOmF9ZnVuY3Rpb24gZyhlKXtpZighKFwiZW5jb2RpbmctaW5kZXhlc1wiaW4gYSkpdGhyb3cgRXJyb3IoXCJJbmRleGVzIG1pc3NpbmcuIERpZCB5b3UgZm9yZ2V0IHRvIGluY2x1ZGUgZW5jb2RpbmctaW5kZXhlcy5qcyBmaXJzdD9cIik7cmV0dXJuIGFbXCJlbmNvZGluZy1pbmRleGVzXCJdW2VdfWZ1bmN0aW9uIHkoZSl7aWYoMzk0MTk8ZSYmMTg5ZTM+ZXx8MTIzNzU3NTxlKXJldHVybiBudWxsO2lmKDc0NTc9PT1lKXJldHVybiA1OTMzNTt2YXIgdD0wLGE9MCxuPWcoXCJnYjE4MDMwLXJhbmdlc1wiKSxyO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3Ipe3ZhciBzPW5bcl07aWYoc1swXTw9ZSl0PXNbMF0sYT1zWzFdO2Vsc2UgYnJlYWt9cmV0dXJuIGErZS10fWZ1bmN0aW9uIGIoZSl7aWYoNTkzMzU9PT1lKXJldHVybiA3NDU3O3ZhciB0PTAsYT0wLG49ZyhcImdiMTgwMzAtcmFuZ2VzXCIpLHI7Zm9yKHI9MDtyPG4ubGVuZ3RoOysrcil7dmFyIHM9bltyXTtpZihzWzFdPD1lKXQ9c1sxXSxhPXNbMF07ZWxzZSBicmVha31yZXR1cm4gYStlLXR9ZnVuY3Rpb24geChlKXtWPVZ8fGcoXCJqaXMwMjA4XCIpLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiBuKHQsODI3Miw4ODM1KT9udWxsOmV9KTt2YXIgdD1WO3JldHVybiB0LmluZGV4T2YoZSl9ZnVuY3Rpb24gdyhlKXskPSR8fGcoXCJiaWc1XCIpLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiB0PDUwMjQ/bnVsbDplfSk7dmFyIHQ9JDtyZXR1cm4gOTU1Mj09PWV8fDk1NjY9PT1lfHw5NTY5PT09ZXx8OTU3OD09PWV8fDIxMzEzPT09ZXx8MjEzMTc9PT1lP3QubGFzdEluZGV4T2YoZSk6aChlLHQpfWZ1bmN0aW9uIEUoZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBFKSl0aHJvdyBUeXBlRXJyb3IoXCJDYWxsZWQgYXMgYSBmdW5jdGlvbi4gRGlkIHlvdSBmb3JnZXQgJ25ldyc/XCIpO2U9dm9pZCAwPT09ZT9cInV0Zi04XCI6ZStcIlwiLHQ9aSh0KSx0aGlzLl9lbmNvZGluZz1udWxsLHRoaXMuX2RlY29kZXI9bnVsbCx0aGlzLl9pZ25vcmVCT009ITEsdGhpcy5fQk9Nc2Vlbj0hMSx0aGlzLl9lcnJvcl9tb2RlPVwicmVwbGFjZW1lbnRcIix0aGlzLl9kb19ub3RfZmx1c2g9ITE7dmFyIGE9XyhlKTtpZihudWxsPT09YXx8XCJyZXBsYWNlbWVudFwiPT09YS5uYW1lKXRocm93IFJhbmdlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitlKTtpZighSlthLm5hbWVdKXRocm93IEVycm9yKFwiRGVjb2RlciBub3QgcHJlc2VudC4gRGlkIHlvdSBmb3JnZXQgdG8gaW5jbHVkZSBlbmNvZGluZy1pbmRleGVzLmpzIGZpcnN0P1wiKTt2YXIgbj10aGlzO3JldHVybiBuLl9lbmNvZGluZz1hLCEhdC5mYXRhbCYmKG4uX2Vycm9yX21vZGU9XCJmYXRhbFwiKSwhIXQuaWdub3JlQk9NJiYobi5faWdub3JlQk9NPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHl8fCh0aGlzLmVuY29kaW5nPW4uX2VuY29kaW5nLm5hbWUudG9Mb3dlckNhc2UoKSx0aGlzLmZhdGFsPVwiZmF0YWxcIj09PW4uX2Vycm9yX21vZGUsdGhpcy5pZ25vcmVCT009bi5faWdub3JlQk9NKSxufWZ1bmN0aW9uIEMoZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBDKSl0aHJvdyBUeXBlRXJyb3IoXCJDYWxsZWQgYXMgYSBmdW5jdGlvbi4gRGlkIHlvdSBmb3JnZXQgJ25ldyc/XCIpO3Q9aSh0KSx0aGlzLl9lbmNvZGluZz1udWxsLHRoaXMuX2VuY29kZXI9bnVsbCx0aGlzLl9kb19ub3RfZmx1c2g9ITEsdGhpcy5fZmF0YWw9IXQuZmF0YWw/XCJyZXBsYWNlbWVudFwiOlwiZmF0YWxcIjt2YXIgbj10aGlzO2lmKCEhdC5OT05TVEFOREFSRF9hbGxvd0xlZ2FjeUVuY29kaW5nKXtlPXZvaWQgMD09PWU/XCJ1dGYtOFwiOmUrXCJcIjt2YXIgcj1fKGUpO2lmKG51bGw9PT1yfHxcInJlcGxhY2VtZW50XCI9PT1yLm5hbWUpdGhyb3cgUmFuZ2VFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2UpO2lmKCFRW3IubmFtZV0pdGhyb3cgRXJyb3IoXCJFbmNvZGVyIG5vdCBwcmVzZW50LiBEaWQgeW91IGZvcmdldCB0byBpbmNsdWRlIGVuY29kaW5nLWluZGV4ZXMuanMgZmlyc3Q/XCIpO24uX2VuY29kaW5nPXJ9ZWxzZSBuLl9lbmNvZGluZz1fKFwidXRmLThcIiksdm9pZCAwIT09ZSYmXCJjb25zb2xlXCJpbiBhJiZjb25zb2xlLndhcm4oXCJUZXh0RW5jb2RlciBjb25zdHJ1Y3RvciBjYWxsZWQgd2l0aCBlbmNvZGluZyBsYWJlbCwgd2hpY2ggaXMgaWdub3JlZC5cIik7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eXx8KHRoaXMuZW5jb2Rpbmc9bi5fZW5jb2RpbmcubmFtZS50b0xvd2VyQ2FzZSgpKSxufWZ1bmN0aW9uIEEoZSl7dmFyIHQ9ZS5mYXRhbCxhPTAscj0wLHM9MCxpPTEyOCxvPTE5MTt0aGlzLmhhbmRsZXI9ZnVuY3Rpb24oZSxkKXtpZigtMT09PWQmJjAhPT1zKXJldHVybiBzPTAsdSh0KTtpZigtMT09PWQpcmV0dXJuLTE7aWYoMD09PXMpe2lmKG4oZCwwLDEyNykpcmV0dXJuIGQ7aWYobihkLDE5NCwyMjMpKXM9MSxhPTMxJmQ7ZWxzZSBpZihuKGQsMjI0LDIzOSkpMjI0PT09ZCYmKGk9MTYwKSwyMzc9PT1kJiYobz0xNTkpLHM9MixhPTE1JmQ7ZWxzZSBpZihuKGQsMjQwLDI0NCkpMjQwPT09ZCYmKGk9MTQ0KSwyNDQ9PT1kJiYobz0xNDMpLHM9MyxhPTcmZDtlbHNlIHJldHVybiB1KHQpO3JldHVybiBudWxsfWlmKCFuKGQsaSxvKSlyZXR1cm4gYT1zPXI9MCxpPTEyOCxvPTE5MSxlLnByZXBlbmQoZCksdSh0KTtpZihpPTEyOCxvPTE5MSxhPWE8PDZ8NjMmZCxyKz0xLHIhPT1zKXJldHVybiBudWxsO3ZhciBsPWE7cmV0dXJuIGE9cz1yPTAsbH19ZnVuY3Rpb24gUyhlKXtlLmZhdGFsO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHQpe2lmKHQ9PT0tMSlyZXR1cm4tMTtpZihIKHQpKXJldHVybiB0O3ZhciBhLHI7bih0LDEyOCwyMDQ3KT8oYT0xLHI9MTkyKTpuKHQsMjA0OCw2NTUzNSk/KGE9MixyPTIyNCk6bih0LDY1NTM2LDExMTQxMTEpJiYoYT0zLHI9MjQwKTtmb3IodmFyIHM9Wyh0Pj42KmEpK3JdOzA8YTspe3ZhciBpPXQ+PjYqKGEtMSk7cy5wdXNoKDEyOHw2MyZpKSxhLT0xfXJldHVybiBzfX1mdW5jdGlvbiBrKGUsdCl7dmFyIGE9dC5mYXRhbDt0aGlzLmhhbmRsZXI9ZnVuY3Rpb24odCxuKXtpZihuPT09LTEpcmV0dXJuLTE7aWYocChuKSlyZXR1cm4gbjt2YXIgcj1lW24tMTI4XTtyZXR1cm4gbnVsbD09PXI/dShhKTpyfX1mdW5jdGlvbiB2KGUsdCl7dC5mYXRhbDt0aGlzLmhhbmRsZXI9ZnVuY3Rpb24odCxhKXtpZigtMT09PWEpcmV0dXJuLTE7aWYoSChhKSlyZXR1cm4gYTt2YXIgbj1oKGEsZSk7cmV0dXJuIG51bGw9PT1uJiZtKGEpLG4rMTI4fX1mdW5jdGlvbiBJKGUpe3ZhciB0PWUuZmF0YWwsYT0wLHI9MCxzPTA7dGhpcy5oYW5kbGVyPWZ1bmN0aW9uKGUsaSl7aWYoaT09PS0xJiYwPT09YSYmMD09PXImJjA9PT1zKXJldHVybi0xO2k9PT0tMSYmKDAhPT1hfHwwIT09cnx8MCE9PXMpJiYoYT0wLHI9MCxzPTAsdSh0KSk7dmFyIG87aWYoMCE9PXMpe289bnVsbCxuKGksNDgsNTcpJiYobz15KDEwKigxMjYqKDEwKihhLTEyOSkrci00OCkrcy0xMjkpK2ktNDgpKTt2YXIgZD1bcixzLGldO3JldHVybiBhPTAscj0wLHM9MCxudWxsPT09bz8oZS5wcmVwZW5kKGQpLHUodCkpOm99aWYoMCE9PXIpcmV0dXJuIG4oaSwxMjksMjU0KT8ocz1pLG51bGwpOihlLnByZXBlbmQoW3IsaV0pLGE9MCxyPTAsdSh0KSk7aWYoMCE9PWEpe2lmKG4oaSw0OCw1NykpcmV0dXJuIHI9aSxudWxsO3ZhciBsPWEsYz1udWxsO2E9MDt2YXIgbT0xMjc+aT82NDo2NTtyZXR1cm4obihpLDY0LDEyNil8fG4oaSwxMjgsMjU0KSkmJihjPTE5MCoobC0xMjkpKyhpLW0pKSxvPW51bGw9PT1jP251bGw6ZihjLGcoXCJnYjE4MDMwXCIpKSxudWxsPT09byYmcChpKSYmZS5wcmVwZW5kKGkpLG51bGw9PT1vP3UodCk6b31yZXR1cm4gcChpKT9pOjEyOD09PWk/ODM2NDpuKGksMTI5LDI1NCk/KGE9aSxudWxsKTp1KHQpfX1mdW5jdGlvbiBSKGUsdCl7ZS5mYXRhbDt0aGlzLmhhbmRsZXI9ZnVuY3Rpb24oZSxhKXtpZihhPT09LTEpcmV0dXJuLTE7aWYoSChhKSlyZXR1cm4gYTtpZig1ODg1Mz09PWEpcmV0dXJuIG0oYSk7aWYodCYmODM2ND09PWEpcmV0dXJuIDEyODt2YXIgbj1oKGEsZyhcImdiMTgwMzBcIikpO2lmKG51bGwhPT1uKXt2YXIgcj1xKG4vMTkwKSsxMjkscz1uJTE5MCxpPTYzPnM/NjQ6NjU7cmV0dXJuW3IscytpXX1pZih0KXJldHVybiBtKGEpO249YihhKTt2YXIgbz1xKG4vMTAvMTI2LzEwKTtuLT0xMCooMTI2KigxMCpvKSk7dmFyIGQ9cShuLzEwLzEyNik7bi09MTI2KigxMCpkKTt2YXIgbD1xKG4vMTApLHA9bi0xMCpsO3JldHVybltvKzEyOSxkKzQ4LGwrMTI5LHArNDhdfX1mdW5jdGlvbiBPKGUpe3ZhciB0PWUuZmF0YWwsYT0wO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHIpe2lmKC0xPT09ciYmMCE9PWEpcmV0dXJuIGE9MCx1KHQpO2lmKC0xPT09ciYmMD09PWEpcmV0dXJuLTE7aWYoMCE9PWEpe3ZhciBzPWEsaT1udWxsO2E9MDt2YXIgbz0xMjc+cj82NDo5ODtzd2l0Y2goKG4ociw2NCwxMjYpfHxuKHIsMTYxLDI1NCkpJiYoaT0xNTcqKHMtMTI5KSsoci1vKSksaSl7Y2FzZSAxMTMzOnJldHVyblsyMDIsNzcyXTtjYXNlIDExMzU6cmV0dXJuWzIwMiw3ODBdO2Nhc2UgMTE2NDpyZXR1cm5bMjM0LDc3Ml07Y2FzZSAxMTY2OnJldHVyblsyMzQsNzgwXTt9dmFyIGQ9bnVsbD09PWk/bnVsbDpmKGksZyhcImJpZzVcIikpO3JldHVybiBudWxsPT09ZCYmcChyKSYmZS5wcmVwZW5kKHIpLG51bGw9PT1kP3UodCk6ZH1yZXR1cm4gcChyKT9yOm4ociwxMjksMjU0KT8oYT1yLG51bGwpOnUodCl9fWZ1bmN0aW9uIHooZSl7ZS5mYXRhbDt0aGlzLmhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtpZih0PT09LTEpcmV0dXJuLTE7aWYoSCh0KSlyZXR1cm4gdDt2YXIgYT13KHQpO2lmKG51bGw9PT1hKXJldHVybiBtKHQpO3ZhciBuPXEoYS8xNTcpKzEyOTtpZigxNjE+bilyZXR1cm4gbSh0KTt2YXIgcj1hJTE1NyxzPTYzPnI/NjQ6OTg7cmV0dXJuW24scitzXX19ZnVuY3Rpb24gTChlKXt2YXIgdD1lLmZhdGFsLGE9ITEscj0wO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHMpe2lmKC0xPT09cyYmMCE9PXIpcmV0dXJuIHI9MCx1KHQpO2lmKC0xPT09cyYmMD09PXIpcmV0dXJuLTE7aWYoMTQyPT09ciYmbihzLDE2MSwyMjMpKXJldHVybiByPTAsNjUyMTYrcztpZigxNDM9PT1yJiZuKHMsMTYxLDI1NCkpcmV0dXJuIGE9ITAscj1zLG51bGw7aWYoMCE9PXIpe3ZhciBpPXI7cj0wO3ZhciBvPW51bGw7cmV0dXJuIG4oaSwxNjEsMjU0KSYmbihzLDE2MSwyNTQpJiYobz1mKDk0KihpLTE2MSkrKHMtMTYxKSxnKGE/XCJqaXMwMjEyXCI6XCJqaXMwMjA4XCIpKSksYT0hMSxuKHMsMTYxLDI1NCl8fGUucHJlcGVuZChzKSxudWxsPT09bz91KHQpOm99cmV0dXJuIHAocyk/czoxNDI9PT1zfHwxNDM9PT1zfHxuKHMsMTYxLDI1NCk/KHI9cyxudWxsKTp1KHQpfX1mdW5jdGlvbiBUKGUpe2UuZmF0YWw7dGhpcy5oYW5kbGVyPWZ1bmN0aW9uKGUsdCl7aWYodD09PS0xKXJldHVybi0xO2lmKEgodCkpcmV0dXJuIHQ7aWYoMTY1PT09dClyZXR1cm4gOTI7aWYoODI1ND09PXQpcmV0dXJuIDEyNjtpZihuKHQsNjUzNzcsNjU0MzkpKXJldHVyblsxNDIsdC02NTM3NysxNjFdOzg3MjI9PT10JiYodD02NTI5Myk7dmFyIGE9aCh0LGcoXCJqaXMwMjA4XCIpKTtpZihudWxsPT09YSlyZXR1cm4gbSh0KTt2YXIgcj1xKGEvOTQpKzE2MTtyZXR1cm5bcixhJTk0KzE2MV19fWZ1bmN0aW9uIEIoZSl7dmFyIHQ9ZS5mYXRhbCxhPXtBU0NJSTowLFJvbWFuOjEsS2F0YWthbmE6MixMZWFkQnl0ZTozLFRyYWlsQnl0ZTo0LEVzY2FwZVN0YXJ0OjUsRXNjYXBlOjZ9LHI9YS5BU0NJSSxzPWEuQVNDSUksaT0wLG89ITE7dGhpcy5oYW5kbGVyPWZ1bmN0aW9uKGUsZCl7c3dpdGNoKHIpe2RlZmF1bHQ6Y2FzZSBhLkFTQ0lJOnJldHVybiAyNz09PWQ/KHI9YS5Fc2NhcGVTdGFydCxudWxsKTpuKGQsMCwxMjcpJiYxNCE9PWQmJjE1IT09ZCYmMjchPT1kPyhvPSExLGQpOi0xPT09ZD8tMToobz0hMSx1KHQpKTtjYXNlIGEuUm9tYW46cmV0dXJuIDI3PT09ZD8ocj1hLkVzY2FwZVN0YXJ0LG51bGwpOjkyPT09ZD8obz0hMSwxNjUpOjEyNj09PWQ/KG89ITEsODI1NCk6bihkLDAsMTI3KSYmMTQhPT1kJiYxNSE9PWQmJjI3IT09ZCYmOTIhPT1kJiYxMjYhPT1kPyhvPSExLGQpOi0xPT09ZD8tMToobz0hMSx1KHQpKTtjYXNlIGEuS2F0YWthbmE6cmV0dXJuIDI3PT09ZD8ocj1hLkVzY2FwZVN0YXJ0LG51bGwpOm4oZCwzMyw5NSk/KG89ITEsNjUzNDQrZCk6LTE9PT1kPy0xOihvPSExLHUodCkpO2Nhc2UgYS5MZWFkQnl0ZTpyZXR1cm4gMjc9PT1kPyhyPWEuRXNjYXBlU3RhcnQsbnVsbCk6bihkLDMzLDEyNik/KG89ITEsaT1kLHI9YS5UcmFpbEJ5dGUsbnVsbCk6LTE9PT1kPy0xOihvPSExLHUodCkpO2Nhc2UgYS5UcmFpbEJ5dGU6aWYoMjc9PT1kKXJldHVybiByPWEuRXNjYXBlU3RhcnQsdSh0KTtpZihuKGQsMzMsMTI2KSl7cj1hLkxlYWRCeXRlO3ZhciBsPTk0KihpLTMzKStkLTMzLHA9ZihsLGcoXCJqaXMwMjA4XCIpKTtyZXR1cm4gbnVsbD09PXA/dSh0KTpwfXJldHVybi0xPT09ZD8ocj1hLkxlYWRCeXRlLGUucHJlcGVuZChkKSx1KHQpKToocj1hLkxlYWRCeXRlLHUodCkpO2Nhc2UgYS5Fc2NhcGVTdGFydDpyZXR1cm4gMzY9PT1kfHw0MD09PWQ/KGk9ZCxyPWEuRXNjYXBlLG51bGwpOihlLnByZXBlbmQoZCksbz0hMSxyPXMsdSh0KSk7Y2FzZSBhLkVzY2FwZTp2YXIgYz1pO2k9MDt2YXIgbT1udWxsO2lmKDQwPT09YyYmNjY9PT1kJiYobT1hLkFTQ0lJKSw0MD09PWMmJjc0PT09ZCYmKG09YS5Sb21hbiksNDA9PT1jJiY3Mz09PWQmJihtPWEuS2F0YWthbmEpLDM2PT09YyYmKDY0PT09ZHx8NjY9PT1kKSYmKG09YS5MZWFkQnl0ZSksbnVsbCE9PW0pe3I9cj1tO3ZhciBfPW87cmV0dXJuIG89ITAsXz91KHQpOm51bGx9cmV0dXJuIGUucHJlcGVuZChbYyxkXSksbz0hMSxyPXMsdSh0KTt9fX1mdW5jdGlvbiBQKGUpe3ZhciB0PWUuZmF0YWwsYT17QVNDSUk6MCxSb21hbjoxLGppczAyMDg6Mn0sbj1hLkFTQ0lJO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHQpe2lmKC0xPT09dCYmbiE9PWEuQVNDSUkpcmV0dXJuIGUucHJlcGVuZCh0KSxuPWEuQVNDSUksWzI3LDQwLDY2XTtpZigtMT09PXQmJm49PT1hLkFTQ0lJKXJldHVybi0xO2lmKChuPT09YS5BU0NJSXx8bj09PWEuUm9tYW4pJiYoMTQ9PT10fHwxNT09PXR8fDI3PT09dCkpcmV0dXJuIG0oNjU1MzMpO2lmKG49PT1hLkFTQ0lJJiZIKHQpKXJldHVybiB0O2lmKG49PT1hLlJvbWFuJiYoSCh0KSYmOTIhPT10JiYxMjYhPT10fHwxNjU9PXR8fDgyNTQ9PXQpKXtpZihIKHQpKXJldHVybiB0O2lmKDE2NT09PXQpcmV0dXJuIDkyO2lmKDgyNTQ9PT10KXJldHVybiAxMjZ9aWYoSCh0KSYmbiE9PWEuQVNDSUkpcmV0dXJuIGUucHJlcGVuZCh0KSxuPWEuQVNDSUksWzI3LDQwLDY2XTtpZigoMTY1PT09dHx8ODI1ND09PXQpJiZuIT09YS5Sb21hbilyZXR1cm4gZS5wcmVwZW5kKHQpLG49YS5Sb21hbixbMjcsNDAsNzRdOzg3MjI9PT10JiYodD02NTI5Myk7dmFyIHI9aCh0LGcoXCJqaXMwMjA4XCIpKTtpZihudWxsPT09cilyZXR1cm4gbSh0KTtpZihuIT09YS5qaXMwMjA4KXJldHVybiBlLnByZXBlbmQodCksbj1hLmppczAyMDgsWzI3LDM2LDY2XTt2YXIgcz1xKHIvOTQpKzMzO3JldHVybltzLHIlOTQrMzNdfX1mdW5jdGlvbiBOKGUpe3ZhciB0PWUuZmF0YWwsYT0wO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHIpe2lmKC0xPT09ciYmMCE9PWEpcmV0dXJuIGE9MCx1KHQpO2lmKC0xPT09ciYmMD09PWEpcmV0dXJuLTE7aWYoMCE9PWEpe3ZhciBzPWEsaT1udWxsO2E9MDt2YXIgbz0xMjc+cj82NDo2NSxkPTE2MD5zPzEyOToxOTM7aWYoKG4ociw2NCwxMjYpfHxuKHIsMTI4LDI1MikpJiYoaT0xODgqKHMtZCkrci1vKSxuKGksODgzNiwxMDcxNSkpcmV0dXJuIDQ4NTA4K2k7dmFyIGw9bnVsbD09PWk/bnVsbDpmKGksZyhcImppczAyMDhcIikpO3JldHVybiBudWxsPT09bCYmcChyKSYmZS5wcmVwZW5kKHIpLG51bGw9PT1sP3UodCk6bH1yZXR1cm4gcChyKXx8MTI4PT09cj9yOm4ociwxNjEsMjIzKT82NTIxNityOm4ociwxMjksMTU5KXx8bihyLDIyNCwyNTIpPyhhPXIsbnVsbCk6dSh0KX19ZnVuY3Rpb24gRChlKXtlLmZhdGFsO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHQpe2lmKHQ9PT0tMSlyZXR1cm4tMTtpZihIKHQpfHwxMjg9PT10KXJldHVybiB0O2lmKDE2NT09PXQpcmV0dXJuIDkyO2lmKDgyNTQ9PT10KXJldHVybiAxMjY7aWYobih0LDY1Mzc3LDY1NDM5KSlyZXR1cm4gdC02NTM3NysxNjE7ODcyMj09PXQmJih0PTY1MjkzKTt2YXIgYT14KHQpO2lmKG51bGw9PT1hKXJldHVybiBtKHQpO3ZhciByPXEoYS8xODgpLHM9MzE+cj8xMjk6MTkzLGk9YSUxODgsbz02Mz5pPzY0OjY1O3JldHVybltyK3MsaStvXX19ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmZhdGFsLGE9MDt0aGlzLmhhbmRsZXI9ZnVuY3Rpb24oZSxyKXtpZigtMT09PXImJjAhPT1hKXJldHVybiBhPTAsdSh0KTtpZigtMT09PXImJjA9PT1hKXJldHVybi0xO2lmKDAhPT1hKXt2YXIgcz1hLGk9bnVsbDthPTAsbihyLDY1LDI1NCkmJihpPTE5MCoocy0xMjkpKyhyLTY1KSk7dmFyIG89bnVsbD09PWk/bnVsbDpmKGksZyhcImV1Yy1rclwiKSk7cmV0dXJuIG51bGw9PT1pJiZwKHIpJiZlLnByZXBlbmQociksbnVsbD09PW8/dSh0KTpvfXJldHVybiBwKHIpP3I6bihyLDEyOSwyNTQpPyhhPXIsbnVsbCk6dSh0KX19ZnVuY3Rpb24gVShlKXtlLmZhdGFsO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHQpe2lmKHQ9PT0tMSlyZXR1cm4tMTtpZihIKHQpKXJldHVybiB0O3ZhciBhPWgodCxnKFwiZXVjLWtyXCIpKTtpZihudWxsPT09YSlyZXR1cm4gbSh0KTt2YXIgbj1xKGEvMTkwKSsxMjk7cmV0dXJuW24sYSUxOTArNjVdfX1mdW5jdGlvbiBGKGUsdCl7dmFyIGE9ZT4+OCxuPTI1NSZlO3JldHVybiB0P1thLG5dOltuLGFdfWZ1bmN0aW9uIE0oZSx0KXt2YXIgYT10LmZhdGFsLHI9bnVsbCxzPW51bGw7dGhpcy5oYW5kbGVyPWZ1bmN0aW9uKHQsaSl7aWYoLTE9PT1pJiYobnVsbCE9PXJ8fG51bGwhPT1zKSlyZXR1cm4gdShhKTtpZigtMT09PWkmJm51bGw9PT1yJiZudWxsPT09cylyZXR1cm4tMTtpZihudWxsPT09cilyZXR1cm4gcj1pLG51bGw7dmFyIG87aWYobz1lPyhyPDw4KStpOihpPDw4KStyLHI9bnVsbCxudWxsIT09cyl7dmFyIGQ9cztyZXR1cm4ocz1udWxsLG4obyw1NjMyMCw1NzM0MykpPzY1NTM2KzEwMjQqKGQtNTUyOTYpKyhvLTU2MzIwKToodC5wcmVwZW5kKEYobyxlKSksdShhKSl9cmV0dXJuIG4obyw1NTI5Niw1NjMxOSk/KHM9byxudWxsKTpuKG8sNTYzMjAsNTczNDMpP3UoYSk6b319ZnVuY3Rpb24gRyhlLHQpe3QuZmF0YWw7dGhpcy5oYW5kbGVyPWZ1bmN0aW9uKHQsYSl7aWYoYT09PS0xKXJldHVybi0xO2lmKG4oYSwwLDY1NTM1KSlyZXR1cm4gRihhLGUpO3ZhciByPUYoKGEtNjU1MzY+PjEwKSs1NTI5NixlKSxzPUYoKDEwMjMmYS02NTUzNikrNTYzMjAsZSk7cmV0dXJuIHIuY29uY2F0KHMpfX1mdW5jdGlvbiBaKGUpe2UuZmF0YWw7dGhpcy5oYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuLTE9PT10Py0xOnAodCk/dDo2MzM2MCt0LTEyOH19ZnVuY3Rpb24gWShlKXtlLmZhdGFsO3RoaXMuaGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybi0xPT09dD8tMTpIKHQpP3Q6bih0LDYzMzYwLDYzNDg3KT90LTYzMzYwKzEyODptKHQpfX1cInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYhYVtcImVuY29kaW5nLWluZGV4ZXNcIl0mJmUoXCIuL2VuY29kaW5nLWluZGV4ZXMuanNcIik7dmFyIHE9cixIPXAsSz0tMTtjLnByb3RvdHlwZT17ZW5kT2ZTdHJlYW06ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy50b2tlbnMubGVuZ3RofSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zLmxlbmd0aD90aGlzLnRva2Vucy5wb3AoKTpLfSxwcmVwZW5kOmZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PWU7dC5sZW5ndGg7KXRoaXMudG9rZW5zLnB1c2godC5wb3AoKSk7ZWxzZSB0aGlzLnRva2Vucy5wdXNoKGUpfSxwdXNoOmZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PWU7dC5sZW5ndGg7KXRoaXMudG9rZW5zLnVuc2hpZnQodC5zaGlmdCgpKTtlbHNlIHRoaXMudG9rZW5zLnVuc2hpZnQoZSl9fTsoZnVuY3Rpb24oKXt9KS5wcm90b3R5cGU9e2hhbmRsZXI6ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbigpe30ucHJvdG90eXBlPXtoYW5kbGVyOmZ1bmN0aW9uKCl7fX07dmFyIFg9W3tlbmNvZGluZ3M6W3tsYWJlbHM6W1widW5pY29kZS0xLTEtdXRmLThcIixcInV0Zi04XCIsXCJ1dGY4XCJdLG5hbWU6XCJVVEYtOFwifV0saGVhZGluZzpcIlRoZSBFbmNvZGluZ1wifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOltcIjg2NlwiLFwiY3A4NjZcIixcImNzaWJtODY2XCIsXCJpYm04NjZcIl0sbmFtZTpcIklCTTg2NlwifSx7bGFiZWxzOltcImNzaXNvbGF0aW4yXCIsXCJpc28tODg1OS0yXCIsXCJpc28taXItMTAxXCIsXCJpc284ODU5LTJcIixcImlzbzg4NTkyXCIsXCJpc29fODg1OS0yXCIsXCJpc29fODg1OS0yOjE5ODdcIixcImwyXCIsXCJsYXRpbjJcIl0sbmFtZTpcIklTTy04ODU5LTJcIn0se2xhYmVsczpbXCJjc2lzb2xhdGluM1wiLFwiaXNvLTg4NTktM1wiLFwiaXNvLWlyLTEwOVwiLFwiaXNvODg1OS0zXCIsXCJpc284ODU5M1wiLFwiaXNvXzg4NTktM1wiLFwiaXNvXzg4NTktMzoxOTg4XCIsXCJsM1wiLFwibGF0aW4zXCJdLG5hbWU6XCJJU08tODg1OS0zXCJ9LHtsYWJlbHM6W1wiY3Npc29sYXRpbjRcIixcImlzby04ODU5LTRcIixcImlzby1pci0xMTBcIixcImlzbzg4NTktNFwiLFwiaXNvODg1OTRcIixcImlzb184ODU5LTRcIixcImlzb184ODU5LTQ6MTk4OFwiLFwibDRcIixcImxhdGluNFwiXSxuYW1lOlwiSVNPLTg4NTktNFwifSx7bGFiZWxzOltcImNzaXNvbGF0aW5jeXJpbGxpY1wiLFwiY3lyaWxsaWNcIixcImlzby04ODU5LTVcIixcImlzby1pci0xNDRcIixcImlzbzg4NTktNVwiLFwiaXNvODg1OTVcIixcImlzb184ODU5LTVcIixcImlzb184ODU5LTU6MTk4OFwiXSxuYW1lOlwiSVNPLTg4NTktNVwifSx7bGFiZWxzOltcImFyYWJpY1wiLFwiYXNtby03MDhcIixcImNzaXNvODg1OTZlXCIsXCJjc2lzbzg4NTk2aVwiLFwiY3Npc29sYXRpbmFyYWJpY1wiLFwiZWNtYS0xMTRcIixcImlzby04ODU5LTZcIixcImlzby04ODU5LTYtZVwiLFwiaXNvLTg4NTktNi1pXCIsXCJpc28taXItMTI3XCIsXCJpc284ODU5LTZcIixcImlzbzg4NTk2XCIsXCJpc29fODg1OS02XCIsXCJpc29fODg1OS02OjE5ODdcIl0sbmFtZTpcIklTTy04ODU5LTZcIn0se2xhYmVsczpbXCJjc2lzb2xhdGluZ3JlZWtcIixcImVjbWEtMTE4XCIsXCJlbG90XzkyOFwiLFwiZ3JlZWtcIixcImdyZWVrOFwiLFwiaXNvLTg4NTktN1wiLFwiaXNvLWlyLTEyNlwiLFwiaXNvODg1OS03XCIsXCJpc284ODU5N1wiLFwiaXNvXzg4NTktN1wiLFwiaXNvXzg4NTktNzoxOTg3XCIsXCJzdW5fZXVfZ3JlZWtcIl0sbmFtZTpcIklTTy04ODU5LTdcIn0se2xhYmVsczpbXCJjc2lzbzg4NTk4ZVwiLFwiY3Npc29sYXRpbmhlYnJld1wiLFwiaGVicmV3XCIsXCJpc28tODg1OS04XCIsXCJpc28tODg1OS04LWVcIixcImlzby1pci0xMzhcIixcImlzbzg4NTktOFwiLFwiaXNvODg1OThcIixcImlzb184ODU5LThcIixcImlzb184ODU5LTg6MTk4OFwiLFwidmlzdWFsXCJdLG5hbWU6XCJJU08tODg1OS04XCJ9LHtsYWJlbHM6W1wiY3Npc284ODU5OGlcIixcImlzby04ODU5LTgtaVwiLFwibG9naWNhbFwiXSxuYW1lOlwiSVNPLTg4NTktOC1JXCJ9LHtsYWJlbHM6W1wiY3Npc29sYXRpbjZcIixcImlzby04ODU5LTEwXCIsXCJpc28taXItMTU3XCIsXCJpc284ODU5LTEwXCIsXCJpc284ODU5MTBcIixcImw2XCIsXCJsYXRpbjZcIl0sbmFtZTpcIklTTy04ODU5LTEwXCJ9LHtsYWJlbHM6W1wiaXNvLTg4NTktMTNcIixcImlzbzg4NTktMTNcIixcImlzbzg4NTkxM1wiXSxuYW1lOlwiSVNPLTg4NTktMTNcIn0se2xhYmVsczpbXCJpc28tODg1OS0xNFwiLFwiaXNvODg1OS0xNFwiLFwiaXNvODg1OTE0XCJdLG5hbWU6XCJJU08tODg1OS0xNFwifSx7bGFiZWxzOltcImNzaXNvbGF0aW45XCIsXCJpc28tODg1OS0xNVwiLFwiaXNvODg1OS0xNVwiLFwiaXNvODg1OTE1XCIsXCJpc29fODg1OS0xNVwiLFwibDlcIl0sbmFtZTpcIklTTy04ODU5LTE1XCJ9LHtsYWJlbHM6W1wiaXNvLTg4NTktMTZcIl0sbmFtZTpcIklTTy04ODU5LTE2XCJ9LHtsYWJlbHM6W1wiY3Nrb2k4clwiLFwia29pXCIsXCJrb2k4XCIsXCJrb2k4LXJcIixcImtvaThfclwiXSxuYW1lOlwiS09JOC1SXCJ9LHtsYWJlbHM6W1wia29pOC1ydVwiLFwia29pOC11XCJdLG5hbWU6XCJLT0k4LVVcIn0se2xhYmVsczpbXCJjc21hY2ludG9zaFwiLFwibWFjXCIsXCJtYWNpbnRvc2hcIixcIngtbWFjLXJvbWFuXCJdLG5hbWU6XCJtYWNpbnRvc2hcIn0se2xhYmVsczpbXCJkb3MtODc0XCIsXCJpc28tODg1OS0xMVwiLFwiaXNvODg1OS0xMVwiLFwiaXNvODg1OTExXCIsXCJ0aXMtNjIwXCIsXCJ3aW5kb3dzLTg3NFwiXSxuYW1lOlwid2luZG93cy04NzRcIn0se2xhYmVsczpbXCJjcDEyNTBcIixcIndpbmRvd3MtMTI1MFwiLFwieC1jcDEyNTBcIl0sbmFtZTpcIndpbmRvd3MtMTI1MFwifSx7bGFiZWxzOltcImNwMTI1MVwiLFwid2luZG93cy0xMjUxXCIsXCJ4LWNwMTI1MVwiXSxuYW1lOlwid2luZG93cy0xMjUxXCJ9LHtsYWJlbHM6W1wiYW5zaV94My40LTE5NjhcIixcImFzY2lpXCIsXCJjcDEyNTJcIixcImNwODE5XCIsXCJjc2lzb2xhdGluMVwiLFwiaWJtODE5XCIsXCJpc28tODg1OS0xXCIsXCJpc28taXItMTAwXCIsXCJpc284ODU5LTFcIixcImlzbzg4NTkxXCIsXCJpc29fODg1OS0xXCIsXCJpc29fODg1OS0xOjE5ODdcIixcImwxXCIsXCJsYXRpbjFcIixcInVzLWFzY2lpXCIsXCJ3aW5kb3dzLTEyNTJcIixcIngtY3AxMjUyXCJdLG5hbWU6XCJ3aW5kb3dzLTEyNTJcIn0se2xhYmVsczpbXCJjcDEyNTNcIixcIndpbmRvd3MtMTI1M1wiLFwieC1jcDEyNTNcIl0sbmFtZTpcIndpbmRvd3MtMTI1M1wifSx7bGFiZWxzOltcImNwMTI1NFwiLFwiY3Npc29sYXRpbjVcIixcImlzby04ODU5LTlcIixcImlzby1pci0xNDhcIixcImlzbzg4NTktOVwiLFwiaXNvODg1OTlcIixcImlzb184ODU5LTlcIixcImlzb184ODU5LTk6MTk4OVwiLFwibDVcIixcImxhdGluNVwiLFwid2luZG93cy0xMjU0XCIsXCJ4LWNwMTI1NFwiXSxuYW1lOlwid2luZG93cy0xMjU0XCJ9LHtsYWJlbHM6W1wiY3AxMjU1XCIsXCJ3aW5kb3dzLTEyNTVcIixcIngtY3AxMjU1XCJdLG5hbWU6XCJ3aW5kb3dzLTEyNTVcIn0se2xhYmVsczpbXCJjcDEyNTZcIixcIndpbmRvd3MtMTI1NlwiLFwieC1jcDEyNTZcIl0sbmFtZTpcIndpbmRvd3MtMTI1NlwifSx7bGFiZWxzOltcImNwMTI1N1wiLFwid2luZG93cy0xMjU3XCIsXCJ4LWNwMTI1N1wiXSxuYW1lOlwid2luZG93cy0xMjU3XCJ9LHtsYWJlbHM6W1wiY3AxMjU4XCIsXCJ3aW5kb3dzLTEyNThcIixcIngtY3AxMjU4XCJdLG5hbWU6XCJ3aW5kb3dzLTEyNThcIn0se2xhYmVsczpbXCJ4LW1hYy1jeXJpbGxpY1wiLFwieC1tYWMtdWtyYWluaWFuXCJdLG5hbWU6XCJ4LW1hYy1jeXJpbGxpY1wifV0saGVhZGluZzpcIkxlZ2FjeSBzaW5nbGUtYnl0ZSBlbmNvZGluZ3NcIn0se2VuY29kaW5nczpbe2xhYmVsczpbXCJjaGluZXNlXCIsXCJjc2diMjMxMlwiLFwiY3Npc281OGdiMjMxMjgwXCIsXCJnYjIzMTJcIixcImdiXzIzMTJcIixcImdiXzIzMTItODBcIixcImdia1wiLFwiaXNvLWlyLTU4XCIsXCJ4LWdia1wiXSxuYW1lOlwiR0JLXCJ9LHtsYWJlbHM6W1wiZ2IxODAzMFwiXSxuYW1lOlwiZ2IxODAzMFwifV0saGVhZGluZzpcIkxlZ2FjeSBtdWx0aS1ieXRlIENoaW5lc2UgKHNpbXBsaWZpZWQpIGVuY29kaW5nc1wifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOltcImJpZzVcIixcImJpZzUtaGtzY3NcIixcImNuLWJpZzVcIixcImNzYmlnNVwiLFwieC14LWJpZzVcIl0sbmFtZTpcIkJpZzVcIn1dLGhlYWRpbmc6XCJMZWdhY3kgbXVsdGktYnl0ZSBDaGluZXNlICh0cmFkaXRpb25hbCkgZW5jb2RpbmdzXCJ9LHtlbmNvZGluZ3M6W3tsYWJlbHM6W1wiY3NldWNwa2RmbXRqYXBhbmVzZVwiLFwiZXVjLWpwXCIsXCJ4LWV1Yy1qcFwiXSxuYW1lOlwiRVVDLUpQXCJ9LHtsYWJlbHM6W1wiY3Npc28yMDIyanBcIixcImlzby0yMDIyLWpwXCJdLG5hbWU6XCJJU08tMjAyMi1KUFwifSx7bGFiZWxzOltcImNzc2hpZnRqaXNcIixcIm1zOTMyXCIsXCJtc19rYW5qaVwiLFwic2hpZnQtamlzXCIsXCJzaGlmdF9qaXNcIixcInNqaXNcIixcIndpbmRvd3MtMzFqXCIsXCJ4LXNqaXNcIl0sbmFtZTpcIlNoaWZ0X0pJU1wifV0saGVhZGluZzpcIkxlZ2FjeSBtdWx0aS1ieXRlIEphcGFuZXNlIGVuY29kaW5nc1wifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOltcImNzZXVja3JcIixcImNza3NjNTYwMTE5ODdcIixcImV1Yy1rclwiLFwiaXNvLWlyLTE0OVwiLFwia29yZWFuXCIsXCJrc19jXzU2MDEtMTk4N1wiLFwia3NfY181NjAxLTE5ODlcIixcImtzYzU2MDFcIixcImtzY181NjAxXCIsXCJ3aW5kb3dzLTk0OVwiXSxuYW1lOlwiRVVDLUtSXCJ9XSxoZWFkaW5nOlwiTGVnYWN5IG11bHRpLWJ5dGUgS29yZWFuIGVuY29kaW5nc1wifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOltcImNzaXNvMjAyMmtyXCIsXCJoei1nYi0yMzEyXCIsXCJpc28tMjAyMi1jblwiLFwiaXNvLTIwMjItY24tZXh0XCIsXCJpc28tMjAyMi1rclwiXSxuYW1lOlwicmVwbGFjZW1lbnRcIn0se2xhYmVsczpbXCJ1dGYtMTZiZVwiXSxuYW1lOlwiVVRGLTE2QkVcIn0se2xhYmVsczpbXCJ1dGYtMTZcIixcInV0Zi0xNmxlXCJdLG5hbWU6XCJVVEYtMTZMRVwifSx7bGFiZWxzOltcIngtdXNlci1kZWZpbmVkXCJdLG5hbWU6XCJ4LXVzZXItZGVmaW5lZFwifV0saGVhZGluZzpcIkxlZ2FjeSBtaXNjZWxsYW5lb3VzIGVuY29kaW5nc1wifV0sVz17fTtYLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5lbmNvZGluZ3MuZm9yRWFjaChmdW5jdGlvbihlKXtlLmxhYmVscy5mb3JFYWNoKGZ1bmN0aW9uKHQpe1dbdF09ZX0pfSl9KTt2YXIgUT17fSxKPXt9LFYsJDtPYmplY3QuZGVmaW5lUHJvcGVydHkmJihPYmplY3QuZGVmaW5lUHJvcGVydHkoRS5wcm90b3R5cGUsXCJlbmNvZGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2RpbmcubmFtZS50b0xvd2VyQ2FzZSgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFLnByb3RvdHlwZSxcImZhdGFsXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwiZmF0YWxcIj09PXRoaXMuX2Vycm9yX21vZGV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEUucHJvdG90eXBlLFwiaWdub3JlQk9NXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZ25vcmVCT019fSkpLEUucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbihlLHQpe3ZhciBhO2E9XCJvYmplY3RcIj09dHlwZW9mIGUmJmUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9uZXcgVWludDhBcnJheShlKTpcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJidWZmZXJcImluIGUmJmUuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/bmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIsZS5ieXRlT2Zmc2V0LGUuYnl0ZUxlbmd0aCk6bmV3IFVpbnQ4QXJyYXkoMCksdD1pKHQpLHRoaXMuX2RvX25vdF9mbHVzaHx8KHRoaXMuX2RlY29kZXI9Slt0aGlzLl9lbmNvZGluZy5uYW1lXSh7ZmF0YWw6XCJmYXRhbFwiPT09dGhpcy5fZXJyb3JfbW9kZX0pLHRoaXMuX0JPTXNlZW49ITEpLHRoaXMuX2RvX25vdF9mbHVzaD0hIXQuc3RyZWFtO2Zvcih2YXIgbj1uZXcgYyhhKSxyPVtdLG8sZDsoZD1uLnJlYWQoKSxkIT09SykmJiEobz10aGlzLl9kZWNvZGVyLmhhbmRsZXIobixkKSwtMT09PW8pOyludWxsIT09byYmKEFycmF5LmlzQXJyYXkobyk/ci5wdXNoLmFwcGx5KHIsbyk6ci5wdXNoKG8pKTtpZighdGhpcy5fZG9fbm90X2ZsdXNoKXtkb3tpZihvPXRoaXMuX2RlY29kZXIuaGFuZGxlcihuLG4ucmVhZCgpKSwtMT09PW8pYnJlYWs7aWYobnVsbD09PW8pY29udGludWU7QXJyYXkuaXNBcnJheShvKT9yLnB1c2guYXBwbHkocixvKTpyLnB1c2gobyl9d2hpbGUoIW4uZW5kT2ZTdHJlYW0oKSk7dGhpcy5fZGVjb2Rlcj1udWxsfXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hcyhbXCJVVEYtOFwiLFwiVVRGLTE2TEVcIixcIlVURi0xNkJFXCJdLHRoaXMuX2VuY29kaW5nLm5hbWUpfHx0aGlzLl9pZ25vcmVCT018fHRoaXMuX0JPTXNlZW58fCgwPGUubGVuZ3RoJiY2NTI3OT09PWVbMF0/KHRoaXMuX0JPTXNlZW49ITAsZS5zaGlmdCgpKTowPGUubGVuZ3RoJiYodGhpcy5fQk9Nc2Vlbj0hMCkpLGwoZSl9LmNhbGwodGhpcyxyKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkoQy5wcm90b3R5cGUsXCJlbmNvZGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2RpbmcubmFtZS50b0xvd2VyQ2FzZSgpfX0pLEMucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbihlLHQpe2U9ZT09PXZvaWQgMD9cIlwiOmUrXCJcIix0PWkodCksdGhpcy5fZG9fbm90X2ZsdXNofHwodGhpcy5fZW5jb2Rlcj1RW3RoaXMuX2VuY29kaW5nLm5hbWVdKHtmYXRhbDpcImZhdGFsXCI9PT10aGlzLl9mYXRhbH0pKSx0aGlzLl9kb19ub3RfZmx1c2g9ISF0LnN0cmVhbTtmb3IodmFyIGE9bmV3IGMobyhlKSksbj1bXSxyLHM7KHM9YS5yZWFkKCkscyE9PUspJiYhKHI9dGhpcy5fZW5jb2Rlci5oYW5kbGVyKGEscyksLTE9PT1yKTspQXJyYXkuaXNBcnJheShyKT9uLnB1c2guYXBwbHkobixyKTpuLnB1c2gocik7aWYoIXRoaXMuX2RvX25vdF9mbHVzaCl7Zm9yKDtyPXRoaXMuX2VuY29kZXIuaGFuZGxlcihhLGEucmVhZCgpKSwtMSE9PXI7KUFycmF5LmlzQXJyYXkocik/bi5wdXNoLmFwcGx5KG4scik6bi5wdXNoKHIpO3RoaXMuX2VuY29kZXI9bnVsbH1yZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9LFFbXCJVVEYtOFwiXT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFMoZSl9LEpbXCJVVEYtOFwiXT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEEoZSl9LGZ1bmN0aW9uKCl7XCJlbmNvZGluZy1pbmRleGVzXCJpbiBhJiZYLmZvckVhY2goZnVuY3Rpb24oZSl7XCJMZWdhY3kgc2luZ2xlLWJ5dGUgZW5jb2RpbmdzXCIhPT1lLmhlYWRpbmd8fGUuZW5jb2RpbmdzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uYW1lLGE9Zyh0LnRvTG93ZXJDYXNlKCkpO0pbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBrKGEsZSl9LFFbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB2KGEsZSl9fSl9KX0oKSxKLkdCSz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEkoZSl9LFEuR0JLPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUihlLCEwKX0sUS5nYjE4MDMwPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUihlKX0sSi5nYjE4MDMwPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgSShlKX0sUS5CaWc1PWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgeihlKX0sSi5CaWc1PWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTyhlKX0sUVtcIkVVQy1KUFwiXT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFQoZSl9LEpbXCJFVUMtSlBcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBMKGUpfSxRW1wiSVNPLTIwMjItSlBcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQKGUpfSxKW1wiSVNPLTIwMjItSlBcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBCKGUpfSxRLlNoaWZ0X0pJUz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEQoZSl9LEouU2hpZnRfSklTPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTihlKX0sUVtcIkVVQy1LUlwiXT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFUoZSl9LEpbXCJFVUMtS1JcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBqKGUpfSxRW1wiVVRGLTE2QkVcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBHKCEwLGUpfSxKW1wiVVRGLTE2QkVcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBNKCEwLGUpfSxRW1wiVVRGLTE2TEVcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBHKCExLGUpfSxKW1wiVVRGLTE2TEVcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBNKCExLGUpfSxRW1wieC11c2VyLWRlZmluZWRcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBZKGUpfSxKW1wieC11c2VyLWRlZmluZWRcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBaKGUpfSxhLlRleHRFbmNvZGVyfHwoYS5UZXh0RW5jb2Rlcj1DKSxhLlRleHREZWNvZGVyfHwoYS5UZXh0RGVjb2Rlcj1FKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYodC5leHBvcnRzPXtUZXh0RW5jb2RlcjphLlRleHRFbmNvZGVyLFRleHREZWNvZGVyOmEuVGV4dERlY29kZXIsRW5jb2RpbmdJbmRleGVzOmFbXCJlbmNvZGluZy1pbmRleGVzXCJdfSl9KSh0aGlzfHx7fSl9LHtcIi4vZW5jb2RpbmctaW5kZXhlcy5qc1wiOjZ9XSw1OTpbZnVuY3Rpb24oZSx0KXsoZnVuY3Rpb24oYSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIG4oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiZm9yZ290IHRvIHBhc3MgYnVmZmVyXCIpO3JldHVybiBtLmlzQnVmZmVyKGUpP2U6ZSBpbnN0YW5jZW9mIGEuQXJyYXlCdWZmZXI/bS5mcm9tKGUpOmUuYnVmZmVyIGluc3RhbmNlb2YgYS5BcnJheUJ1ZmZlcj8xPT09ZS5CWVRFU19QRVJfRUxFTUVOVD9tLmZyb20oZSk6bS5mcm9tKGUuYnVmZmVyKTp2b2lkIDB9ZnVuY3Rpb24gcihlLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiZfLmhhcyhlKT9jLnJlc29sdmUoXy5nZXQoZSkpOnIuZ2V0U2hhcGVmaWxlKGUsdCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmXy5zZXQoZSx0KSx0fSl9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBkKGUpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VaaXAoZSx0KX0pfXZhciBpPWUoXCJwcm9qNFwiKTtpLmRlZmF1bHQmJihpPWkuZGVmYXVsdCk7dmFyIG89ZShcIi4vdW56aXBcIiksZD1lKFwiLi9iaW5hcnlhamF4XCIpLGw9ZShcIi4vcGFyc2VTaHBcIikscD1lKFwicGFyc2VkYmZcIiksYz1lKFwibGllXCIpLHU9ZShcImxydS1jYWNoZVwiKSxtPWUoXCJidWZmZXJcIikuQnVmZmVyLF89bmV3IHUoe21heDoyMH0pO3IuY29tYmluZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9e3R5cGU6XCJGZWF0dXJlQ29sbGVjdGlvblwiLGZlYXR1cmVzOltdfSxhPTAsbj1lWzBdLmxlbmd0aDthPG47KXQuZmVhdHVyZXMucHVzaCh7dHlwZTpcIkZlYXR1cmVcIixnZW9tZXRyeTplWzBdW2FdLHByb3BlcnRpZXM6ZVsxXVthXX0pLGErKztyZXR1cm4gdH0sci5wYXJzZVppcD1mdW5jdGlvbihlLHQpe2U9bihlKTt2YXIgYT1vKGUpLHM9W107Zm9yKHZhciBkIGluIHQ9dHx8W10sYSktMT09PWQuaW5kZXhPZihcIl9fTUFDT1NYXCIpJiYoXCJzaHBcIj09PWQuc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCk/KHMucHVzaChkLnNsaWNlKDAsLTQpKSxhW2Quc2xpY2UoMCwtMykrZC5zbGljZSgtMykudG9Mb3dlckNhc2UoKV09YVtkXSk6XCJwcmpcIj09PWQuc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCk/YVtkLnNsaWNlKDAsLTMpK2Quc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCldPWkoYVtkXSk6XCJqc29uXCI9PT1kLnNsaWNlKC00KS50b0xvd2VyQ2FzZSgpfHwtMTx0LmluZGV4T2YoZC5zcGxpdChcIi5cIikucG9wKCkpP3MucHVzaChkLnNsaWNlKDAsLTMpK2Quc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCkpOihcImRiZlwiPT09ZC5zbGljZSgtMykudG9Mb3dlckNhc2UoKXx8XCJjcGdcIj09PWQuc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCkpJiYoYVtkLnNsaWNlKDAsLTMpK2Quc2xpY2UoLTMpLnRvTG93ZXJDYXNlKCldPWFbZF0pKTtpZighcy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwibm8gbGF5ZXJzIGZvdW5kc1wiKTt2YXIgYz1zLm1hcChmdW5jdGlvbihlKXt2YXIgbj1lLmxhc3RJbmRleE9mKFwiLlwiKSxzLGk7cmV0dXJuLTE8biYmLTE8ZS5zbGljZShuKS5pbmRleE9mKFwianNvblwiKT8ocz1KU09OLnBhcnNlKGFbZV0pLHMuZmlsZU5hbWU9ZS5zbGljZSgwLG4pKTotMTx0LmluZGV4T2YoZS5zbGljZShuKzEpKT8ocz1hW2VdLHMuZmlsZU5hbWU9ZSk6KGFbZStcIi5kYmZcIl0mJihpPXAoYVtlK1wiLmRiZlwiXSxhW2UrXCIuY3BnXCJdKSkscz1yLmNvbWJpbmUoW2woYVtlK1wiLnNocFwiXSxhW2UrXCIucHJqXCJdKSxpXSkscy5maWxlTmFtZT1lKSxzfSk7cmV0dXJuIDE9PT1jLmxlbmd0aD9jWzBdOmN9LHIuZ2V0U2hhcGVmaWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/XCIuemlwXCI9PT1lLnNsaWNlKC00KS50b0xvd2VyQ2FzZSgpP3MoZSx0KTpjLmFsbChbYy5hbGwoW2QoZStcIi5zaHBcIiksZChlK1wiLnByalwiKV0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9ITE7dHJ5e2VbMV0mJih0PWkoZVsxXSkpfWNhdGNoKGEpe3Q9ITF9cmV0dXJuIGwoZVswXSx0KX0pLGMuYWxsKFtkKGUrXCIuZGJmXCIpLGQoZStcIi5jcGdcIildKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBwKGVbMF0sZVsxXSl9KV0pLnRoZW4oci5jb21iaW5lKTpuZXcgYyhmdW5jdGlvbih0KXt0KHIucGFyc2VaaXAoZSkpfSl9LHIucGFyc2VTaHA9ZnVuY3Rpb24oZSx0KXtpZihlPW4oZSksbS5pc0J1ZmZlcih0KSYmKHQ9dC50b1N0cmluZygpKSxcInN0cmluZ1wiPT10eXBlb2YgdCl0cnl7dD1pKHQpfWNhdGNoKGEpe3Q9ITF9cmV0dXJuIGwoZSl9LHIucGFyc2VEYmY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1uKGUpLHAoZSx0KX0sdC5leHBvcnRzPXJ9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIj09dHlwZW9mIGdsb2JhbD9cInVuZGVmaW5lZFwiPT10eXBlb2Ygc2VsZj9cInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P3t9OndpbmRvdzpzZWxmOmdsb2JhbCl9LHtcIi4vYmluYXJ5YWpheFwiOjIsXCIuL3BhcnNlU2hwXCI6MyxcIi4vdW56aXBcIjo0LGJ1ZmZlcjo3LGxpZTozNSxcImxydS1jYWNoZVwiOjM2LHBhcnNlZGJmOjU0LHByb2o0OjU1fV19LHt9LFs1OV0pKDU5KX0pOyIsIiFmdW5jdGlvbiBpKHIscyxvKXtmdW5jdGlvbiBhKGUsdCl7aWYoIXNbZV0pe2lmKCFyW2VdKXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCF0JiZuKXJldHVybiBuKGUsITApO2lmKHUpcmV0dXJuIHUoZSwhMCk7dGhyb3cobj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2UrXCInXCIpKS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLG59bj1zW2VdPXtleHBvcnRzOnt9fSxyW2VdWzBdLmNhbGwobi5leHBvcnRzLGZ1bmN0aW9uKHQpe3JldHVybiBhKHJbZV1bMV1bdF18fHQpfSxuLG4uZXhwb3J0cyxpLHIscyxvKX1yZXR1cm4gc1tlXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHQ9MDt0PG8ubGVuZ3RoO3QrKylhKG9bdF0pO3JldHVybiBhfSh7MTpbZnVuY3Rpb24odCxlLG4pe3dpbmRvdy50dXJmPXthbG9uZzp0KFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtYWxvbmcvaW5kZXguanNcIiksYmV6aWVyOnQoXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1iZXppZXIvaW5kZXguanNcIiksYnVmZmVyOnQoXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1idWZmZXIvaW5kZXguanNcIiksY2VudGVyOnQoXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1jZW50ZXIvaW5kZXguanNcIiksY2VudHJvaWQ6dChcIi4uL25vZGVfbW9kdWxlcy90dXJmLWNlbnRyb2lkL2luZGV4LmpzXCIpLGRlc3RpbmF0aW9uOnQoXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1kZXN0aW5hdGlvbi9pbmRleC5qc1wiKSxlbnZlbG9wZTp0KFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtZW52ZWxvcGUvaW5kZXguanNcIiksZXhwbG9kZTp0KFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtZXhwbG9kZS9pbmRleC5qc1wiKSxtaWRwb2ludDp0KFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtbWlkcG9pbnQvaW5kZXguanNcIiksc2FtcGxlOnQoXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1zYW1wbGUvaW5kZXguanNcIiksc2ltcGxpZnk6dChcIi4uL25vZGVfbW9kdWxlcy90dXJmLXNpbXBsaWZ5L2luZGV4LmpzXCIpLHRpbjp0KFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtdGluL2luZGV4LmpzXCIpLHVuaW9uOnQoXCIuLi9ub2RlX21vZHVsZXMvdHVyZi11bmlvbi9pbmRleC5qc1wiKSx3aXRoaW46dChcIi4uL25vZGVfbW9kdWxlcy90dXJmLXdpdGhpbi9pbmRleC5qc1wiKX19LHtcIi4uL25vZGVfbW9kdWxlcy90dXJmLWFsb25nL2luZGV4LmpzXCI6NSxcIi4uL25vZGVfbW9kdWxlcy90dXJmLWJlemllci9pbmRleC5qc1wiOjksXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1idWZmZXIvaW5kZXguanNcIjoxMSxcIi4uL25vZGVfbW9kdWxlcy90dXJmLWNlbnRlci9pbmRleC5qc1wiOjEyLFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtY2VudHJvaWQvaW5kZXguanNcIjoxMyxcIi4uL25vZGVfbW9kdWxlcy90dXJmLWRlc3RpbmF0aW9uL2luZGV4LmpzXCI6MTQsXCIuLi9ub2RlX21vZHVsZXMvdHVyZi1lbnZlbG9wZS9pbmRleC5qc1wiOjE2LFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtZXhwbG9kZS9pbmRleC5qc1wiOjE3LFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtbWlkcG9pbnQvaW5kZXguanNcIjoyMixcIi4uL25vZGVfbW9kdWxlcy90dXJmLXNhbXBsZS9pbmRleC5qc1wiOjIzLFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtc2ltcGxpZnkvaW5kZXguanNcIjoyNCxcIi4uL25vZGVfbW9kdWxlcy90dXJmLXRpbi9pbmRleC5qc1wiOjI1LFwiLi4vbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vaW5kZXguanNcIjoyNixcIi4uL25vZGVfbW9kdWxlcy90dXJmLXdpdGhpbi9pbmRleC5qc1wiOjI3fV0sMjpbZnVuY3Rpb24odCxlLG4pe2UuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighdHx8IXQudHlwZSlyZXR1cm4gbnVsbDt2YXIgZT1pW3QudHlwZV07aWYoIWUpcmV0dXJuIG51bGw7cmV0dXJuXCJnZW9tZXRyeVwiPT09ZT97dHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsZmVhdHVyZXM6W3t0eXBlOlwiRmVhdHVyZVwiLHByb3BlcnRpZXM6e30sZ2VvbWV0cnk6dH1dfTpcImZlYXR1cmVcIj09PWU/e3R5cGU6XCJGZWF0dXJlQ29sbGVjdGlvblwiLGZlYXR1cmVzOlt0XX06XCJmZWF0dXJlY29sbGVjdGlvblwiPT09ZT90OnZvaWQgMH07dmFyIGk9e1BvaW50OlwiZ2VvbWV0cnlcIixNdWx0aVBvaW50OlwiZ2VvbWV0cnlcIixMaW5lU3RyaW5nOlwiZ2VvbWV0cnlcIixNdWx0aUxpbmVTdHJpbmc6XCJnZW9tZXRyeVwiLFBvbHlnb246XCJnZW9tZXRyeVwiLE11bHRpUG9seWdvbjpcImdlb21ldHJ5XCIsR2VvbWV0cnlDb2xsZWN0aW9uOlwiZ2VvbWV0cnlcIixGZWF0dXJlOlwiZmVhdHVyZVwiLEZlYXR1cmVDb2xsZWN0aW9uOlwiZmVhdHVyZWNvbGxlY3Rpb25cIn19LHt9XSwzOltmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPXRoaXMscj1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9ZnVuY3Rpb24gbigpe31mdW5jdGlvbiBjKCl7fWZ1bmN0aW9uIGcoKXt9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiByKCl7fWZ1bmN0aW9uIHMoKXt9ZnVuY3Rpb24gbygpe31mdW5jdGlvbiBwKHQpe3RoaXMubWVzc2FnZT10fWZ1bmN0aW9uIGEodCxlKXt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSx0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10fWZ1bmN0aW9uIHUoKXswPT09YXJndW1lbnRzLmxlbmd0aD9wLmNhbGwodGhpcyk6MT09PWFyZ3VtZW50cy5sZW5ndGgmJnAuY2FsbCh0aGlzLGFyZ3VtZW50c1swXSl9ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBkKCl7dmFyIHQsZSxuO3RoaXMueD1udWxsLHRoaXMueT1udWxsLHRoaXMuej1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoP2QuY2FsbCh0aGlzLDAsMCk6MT09PWFyZ3VtZW50cy5sZW5ndGg/KHQ9YXJndW1lbnRzWzBdLGQuY2FsbCh0aGlzLHQueCx0LnksdC56KSk6Mj09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGQuY2FsbCh0aGlzLGUsbixkLk5VTExfT1JESU5BVEUpKTozPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLHRoaXMueD10LHRoaXMueT1lLHRoaXMuej1uKX1mdW5jdGlvbiBoKCl7aWYodGhpcy5kaW1lbnNpb25zVG9UZXN0PTIsMD09PWFyZ3VtZW50cy5sZW5ndGgpaC5jYWxsKHRoaXMsMik7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKDIhPT10JiYzIT09dCl0aHJvdyBuZXcgYzt0aGlzLmRpbWVuc2lvbnNUb1Rlc3Q9dH19ZnVuY3Rpb24gZigpe31mdW5jdGlvbiBtKCl7fWZ1bmN0aW9uIHkodCl7dGhpcy5tZXNzYWdlPXR8fFwiXCJ9ZnVuY3Rpb24gdigpe31mdW5jdGlvbiB4KHQpe3RoaXMubWVzc2FnZT10fHxcIlwifWZ1bmN0aW9uIEUodCl7dGhpcy5tZXNzYWdlPXR8fFwiXCJ9ZnVuY3Rpb24gSSgpe3RoaXMuYXJyYXlfPVtdLGFyZ3VtZW50c1swXWluc3RhbmNlb2YgbSYmdGhpcy5hZGRBbGwoYXJndW1lbnRzWzBdKX1mdW5jdGlvbiBOKCl7dmFyIHQsZTtJLmFwcGx5KHRoaXMpLDA9PT1hcmd1bWVudHMubGVuZ3RofHwoMT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLHRoaXMuZW5zdXJlQ2FwYWNpdHkoZS5sZW5ndGgpLHRoaXMuYWRkKGUsITApKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuZW5zdXJlQ2FwYWNpdHkodC5sZW5ndGgpLHRoaXMuYWRkKHQsZSkpKX1mdW5jdGlvbiBDKCl7dmFyIHQsZSxuLGk7dGhpcy5taW54PW51bGwsdGhpcy5tYXh4PW51bGwsdGhpcy5taW55PW51bGwsdGhpcy5tYXh5PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5pbml0KCk6MT09PWFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkPyh0PWFyZ3VtZW50c1swXSx0aGlzLmluaXQodC54LHQueCx0LnksdC55KSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDJiYoZT1hcmd1bWVudHNbMF0sdGhpcy5pbml0KGUpKToyPT09YXJndW1lbnRzLmxlbmd0aD8obj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0sdGhpcy5pbml0KG4ueCxpLngsbi55LGkueSkpOjQ9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM10sdGhpcy5pbml0KHQsZSxuLGkpKX1mdW5jdGlvbiBTKCl7fWZ1bmN0aW9uIHcoKXtTLmNhbGwodGhpcyxcIlByb2plY3RpdmUgcG9pbnQgbm90IHJlcHJlc2VudGFibGUgb24gdGhlIENhcnRlc2lhbiBwbGFuZS5cIil9ZnVuY3Rpb24gTCgpe31mdW5jdGlvbiBSKHQsZSl7cmV0dXJuIHQuaW50ZXJmYWNlc18mJi0xPHQuaW50ZXJmYWNlc18oKS5pbmRleE9mKGUpfWZ1bmN0aW9uIFQoKXt9ZnVuY3Rpb24gUCh0KXt0aGlzLnN0cj10fWZ1bmN0aW9uIGIodCl7dGhpcy52YWx1ZT10fWZ1bmN0aW9uIE8oKXt9ZnVuY3Rpb24gXygpe3ZhciB0LGUsbjt0aGlzLmhpPTAsKHRoaXMubG89MCk9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuaW5pdCgwKToxPT09YXJndW1lbnRzLmxlbmd0aD9cIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdPyh0PWFyZ3VtZW50c1swXSx0aGlzLmluaXQodCkpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgXz8oZT1hcmd1bWVudHNbMF0sdGhpcy5pbml0KGUpKTpcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdJiYobj1hcmd1bWVudHNbMF0sXy5jYWxsKHRoaXMsXy5wYXJzZShuKSkpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYoZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sdGhpcy5pbml0KGUsbikpfWZ1bmN0aW9uIE0oKXt9ZnVuY3Rpb24gRCgpe31mdW5jdGlvbiBBKCl7fWZ1bmN0aW9uIEYoKXt2YXIgdCxlLG4saSxyLHMsbyxhLHU7dGhpcy54PW51bGwsdGhpcy55PW51bGwsdGhpcy53PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGg/KHRoaXMueD0wLHRoaXMueT0wLHRoaXMudz0xKToxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sdGhpcy54PWUueCx0aGlzLnk9ZS55LHRoaXMudz0xKToyPT09YXJndW1lbnRzLmxlbmd0aD9cIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdPyh0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLng9dCx0aGlzLnk9ZSx0aGlzLnc9MSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBGJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEY/KHU9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHRoaXMueD11Lnkqby53LW8ueSp1LncsdGhpcy55PW8ueCp1LnctdS54Km8udyx0aGlzLnc9dS54Km8ueS1vLngqdS55KTphcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgZCYmKGE9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLHRoaXMueD1hLnktbi55LHRoaXMueT1uLngtYS54LHRoaXMudz1hLngqbi55LW4ueCphLnkpOjM9PT1hcmd1bWVudHMubGVuZ3RoPyhpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxzPWFyZ3VtZW50c1syXSx0aGlzLng9aSx0aGlzLnk9cix0aGlzLnc9cyk6ND09PWFyZ3VtZW50cy5sZW5ndGgmJihvPWFyZ3VtZW50c1sxXSx1PWFyZ3VtZW50c1syXSxuPWFyZ3VtZW50c1szXSxpPShhPWFyZ3VtZW50c1swXSkueS1vLnkscj1vLngtYS54LHM9YS54Km8ueS1vLngqYS55LG89dS55LW4ueSxhPW4ueC11LngsdT11Lngqbi55LW4ueCp1LnksdGhpcy54PXIqdS1hKnMsdGhpcy55PW8qcy1pKnUsdGhpcy53PWkqYS1vKnIpfWZ1bmN0aW9uIEcoKXt9ZnVuY3Rpb24gcSgpe31mdW5jdGlvbiBCKCl7dGhpcy5lbnZlbG9wZT1udWxsLHRoaXMuZmFjdG9yeT1udWxsLHRoaXMuU1JJRD1udWxsLHRoaXMudXNlckRhdGE9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5mYWN0b3J5PXQsdGhpcy5TUklEPXQuZ2V0U1JJRCgpfWZ1bmN0aW9uIHooKXt9ZnVuY3Rpb24gVigpe31mdW5jdGlvbiBrKCl7fWZ1bmN0aW9uIFkoKXt9ZnVuY3Rpb24gVSgpe31mdW5jdGlvbiBYKCl7fWZ1bmN0aW9uIEgoKXt9ZnVuY3Rpb24gVygpe31mdW5jdGlvbiBqKCl7fWZ1bmN0aW9uIEsoKXt9ZnVuY3Rpb24gWigpe31mdW5jdGlvbiBKKCl7fWZ1bmN0aW9uIFEoKXt0aGlzLmFycmF5Xz1bXSxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIG0mJnRoaXMuYWRkQWxsKGFyZ3VtZW50c1swXSl9ZnVuY3Rpb24gJCh0KXtyZXR1cm4gbnVsbD09dD9Hczp0LmNvbG9yfWZ1bmN0aW9uIHR0KHQpe3JldHVybiBudWxsPT10P251bGw6dC5wYXJlbnR9ZnVuY3Rpb24gZXQodCxlKXtudWxsIT09dCYmKHQuY29sb3I9ZSl9ZnVuY3Rpb24gbnQodCl7cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmxlZnR9ZnVuY3Rpb24gaXQodCl7cmV0dXJuIG51bGw9PXQ/bnVsbDp0LnJpZ2h0fWZ1bmN0aW9uIHJ0KCl7dGhpcy5yb290Xz1udWxsLHRoaXMuc2l6ZV89MH1mdW5jdGlvbiBzdCgpe31mdW5jdGlvbiBvdCgpe31mdW5jdGlvbiBhdCgpe3RoaXMuYXJyYXlfPVtdLGFyZ3VtZW50c1swXWluc3RhbmNlb2YgbSYmdGhpcy5hZGRBbGwoYXJndW1lbnRzWzBdKX1mdW5jdGlvbiB1dCgpe31mdW5jdGlvbiBsdCgpe31mdW5jdGlvbiBodCgpe31mdW5jdGlvbiBjdCgpe31mdW5jdGlvbiBmdCgpe3RoaXMuZ2VvbWV0cmllcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTtpZihCLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pLG51bGw9PT10JiYodD1bXSksQi5oYXNOdWxsRWxlbWVudHModCkpdGhyb3cgbmV3IGM7dGhpcy5nZW9tZXRyaWVzPXR9ZnVuY3Rpb24gZ3QoKXtmdC5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSl9ZnVuY3Rpb24gZHQoKXt2YXIgdCxlO3RoaXMuZ2VvbT1udWxsLHRoaXMuZ2VvbUZhY3Q9bnVsbCx0aGlzLmJuUnVsZT1udWxsLHRoaXMuZW5kcG9pbnRNYXA9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sZHQuY2FsbCh0aGlzLGUsVi5NT0QyX0JPVU5EQVJZX1JVTEUpKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuZ2VvbT10LHRoaXMuZ2VvbUZhY3Q9dC5nZXRGYWN0b3J5KCksdGhpcy5iblJ1bGU9ZSl9ZnVuY3Rpb24gcHQoKXt0aGlzLmNvdW50PW51bGx9ZnVuY3Rpb24gbXQoKXt9ZnVuY3Rpb24geXQoKXt9ZnVuY3Rpb24gdnQoKXt9ZnVuY3Rpb24geHQoKXt9ZnVuY3Rpb24gRXQoKXt9ZnVuY3Rpb24gSXQoKXt9ZnVuY3Rpb24gTnQoKXt9ZnVuY3Rpb24gQ3QoKXt0aGlzLnBvaW50cz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTtCLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pLHRoaXMuaW5pdCh0KX1mdW5jdGlvbiBTdCgpe31mdW5jdGlvbiB3dCgpe3RoaXMuY29vcmRpbmF0ZXM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07Qi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdKSx0aGlzLmluaXQodCl9ZnVuY3Rpb24gTHQoKXt9ZnVuY3Rpb24gUnQoKXt0aGlzLnNoZWxsPW51bGwsdGhpcy5ob2xlcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZihCLmNhbGwodGhpcyxhcmd1bWVudHNbMl0pLG51bGw9PT10JiYodD10aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKCkpLG51bGw9PT1lJiYoZT1bXSksQi5oYXNOdWxsRWxlbWVudHMoZSkpdGhyb3cgbmV3IGM7aWYodC5pc0VtcHR5KCkmJkIuaGFzTm9uRW1wdHlFbGVtZW50cyhlKSl0aHJvdyBuZXcgYzt0aGlzLnNoZWxsPXQsdGhpcy5ob2xlcz1lfWZ1bmN0aW9uIFR0KCl7ZnQuY2FsbCh0aGlzLGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pfWZ1bmN0aW9uIFB0KCl7dmFyIHQsZTthcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgWXQ/KHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLFB0LmNhbGwodGhpcyxlLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCksZSkpOlIoYXJndW1lbnRzWzBdLEQpJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIFl0JiYoQ3QuY2FsbCh0aGlzLGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pLHRoaXMudmFsaWRhdGVDb25zdHJ1Y3Rpb24oKSl9ZnVuY3Rpb24gYnQoKXtmdC5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSl9ZnVuY3Rpb24gT3QoKXt2YXIgdDt0aGlzLmZhY3Rvcnk9bnVsbCx0aGlzLmlzVXNlckRhdGFDb3BpZWQ9ITEsMD09PWFyZ3VtZW50cy5sZW5ndGh8fDE9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sdGhpcy5mYWN0b3J5PXQpfWZ1bmN0aW9uIF90KCl7fWZ1bmN0aW9uIE10KCl7fWZ1bmN0aW9uIER0KCl7fWZ1bmN0aW9uIEF0KCl7fWZ1bmN0aW9uIEZ0KCl7aWYodGhpcy5kaW1lbnNpb249Myx0aGlzLmNvb3JkaW5hdGVzPW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkpe3ZhciB0PWFyZ3VtZW50c1swXTtGdC5jYWxsKHRoaXMsdCwzKX1lbHNlIGlmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSl7dmFyIGU9YXJndW1lbnRzWzBdO3RoaXMuY29vcmRpbmF0ZXM9bmV3IEFycmF5KGUpLmZpbGwobnVsbCk7Zm9yKHZhciBuPTA7bjxlO24rKyl0aGlzLmNvb3JkaW5hdGVzW25dPW5ldyBkfWVsc2UgaWYoUihhcmd1bWVudHNbMF0sRCkpe3ZhciBpPWFyZ3VtZW50c1swXTtpZihudWxsPT09aSlyZXR1cm4gdGhpcy5jb29yZGluYXRlcz1uZXcgQXJyYXkoMCkuZmlsbChudWxsKSxudWxsO3RoaXMuZGltZW5zaW9uPWkuZ2V0RGltZW5zaW9uKCksdGhpcy5jb29yZGluYXRlcz1uZXcgQXJyYXkoaS5zaXplKCkpLmZpbGwobnVsbCk7Zm9yKG49MDtuPHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO24rKyl0aGlzLmNvb3JkaW5hdGVzW25dPWkuZ2V0Q29vcmRpbmF0ZUNvcHkobil9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgcj1hcmd1bWVudHNbMF0sdD1hcmd1bWVudHNbMV07dGhpcy5jb29yZGluYXRlcz1yLHRoaXMuZGltZW5zaW9uPXQsbnVsbD09PXImJih0aGlzLmNvb3JkaW5hdGVzPW5ldyBBcnJheSgwKS5maWxsKG51bGwpKX1lbHNlIGlmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgcz1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07dGhpcy5jb29yZGluYXRlcz1uZXcgQXJyYXkocykuZmlsbChudWxsKSx0aGlzLmRpbWVuc2lvbj1yO2ZvcihuPTA7bjxzO24rKyl0aGlzLmNvb3JkaW5hdGVzW25dPW5ldyBkfX1mdW5jdGlvbiBHdCgpe31mdW5jdGlvbiBxdChuLGkscil7dmFyIHM9WzBdLG89ITE7cmV0dXJuIG4ucHVzaChzKSx7bmV4dDpmdW5jdGlvbigpe3ZhciB0LGU9c1swXTtyZXR1cm4hbyYmZTxpLmxlbmd0aD8odD1yP1tpW2VdLHJbZV1dOmlbZV0sc1swXSsrKToobz0hMCxuLnNwbGljZShuLmluZGV4T2YocyksMSkpLHtkb25lOm8sdmFsdWU6dH19fX1mdW5jdGlvbiBCdCgpe3JldHVybiB0aGlzLl92YWx1ZXMubGVuZ3RofWZ1bmN0aW9uIHp0KCl7dGhpcy5tYXBfPW5ldyBVc31mdW5jdGlvbiBWdCgpe3ZhciB0LGU7dGhpcy5tb2RlbFR5cGU9bnVsbCx0aGlzLnNjYWxlPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5tb2RlbFR5cGU9VnQuRkxPQVRJTkc6MT09PWFyZ3VtZW50cy5sZW5ndGgmJihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGt0Pyh0PWFyZ3VtZW50c1swXSwodGhpcy5tb2RlbFR5cGU9dCk9PT1WdC5GSVhFRCYmdGhpcy5zZXRTY2FsZSgxKSk6XCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXT8oZT1hcmd1bWVudHNbMF0sdGhpcy5tb2RlbFR5cGU9VnQuRklYRUQsdGhpcy5zZXRTY2FsZShlKSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBWdCYmKGU9YXJndW1lbnRzWzBdLHRoaXMubW9kZWxUeXBlPWUubW9kZWxUeXBlLHRoaXMuc2NhbGU9ZS5zY2FsZSkpfWZ1bmN0aW9uIGt0KCl7dGhpcy5uYW1lPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubmFtZT10LGt0Lm5hbWVUb1R5cGVNYXAucHV0KHQsdGhpcyl9ZnVuY3Rpb24gWXQoKXt2YXIgdCxlLG4saTt0aGlzLnByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5jb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5PW51bGwsdGhpcy5TUklEPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGg/WXQuY2FsbCh0aGlzLG5ldyBWdCwwKToxPT09YXJndW1lbnRzLmxlbmd0aD9SKGFyZ3VtZW50c1swXSxHKT8odD1hcmd1bWVudHNbMF0sWXQuY2FsbCh0aGlzLG5ldyBWdCwwLHQpKTphcmd1bWVudHNbMF1pbnN0YW5jZW9mIFZ0JiYoZT1hcmd1bWVudHNbMF0sWXQuY2FsbCh0aGlzLGUsMCxZdC5nZXREZWZhdWx0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpKSk6Mj09PWFyZ3VtZW50cy5sZW5ndGg/KG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLFl0LmNhbGwodGhpcyxuLGksWXQuZ2V0RGVmYXVsdENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKSkpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYoZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMl0sdGhpcy5wcmVjaXNpb25Nb2RlbD1lLHRoaXMuY29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeT1pLHRoaXMuU1JJRD1uKX1mdW5jdGlvbiBVdCh0KXt0aGlzLmdlb21ldHJ5RmFjdG9yeT10fHxuZXcgWXR9ZnVuY3Rpb24gWHQodCl7dGhpcy5wYXJzZXI9bmV3IFV0KHQpfWZ1bmN0aW9uIEh0KCl7dGhpcy5yZXN1bHQ9bnVsbCx0aGlzLmlucHV0TGluZXM9QXJyYXkoMikuZmlsbCgpLm1hcChmdW5jdGlvbigpe3JldHVybiBBcnJheSgyKX0pLHRoaXMuaW50UHQ9bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5pbnRMaW5lSW5kZXg9bnVsbCx0aGlzLl9pc1Byb3Blcj1udWxsLHRoaXMucGE9bnVsbCx0aGlzLnBiPW51bGwsdGhpcy5wcmVjaXNpb25Nb2RlbD1udWxsLHRoaXMuaW50UHRbMF09bmV3IGQsdGhpcy5pbnRQdFsxXT1uZXcgZCx0aGlzLnBhPXRoaXMuaW50UHRbMF0sdGhpcy5wYj10aGlzLmludFB0WzFdLHRoaXMucmVzdWx0PTB9ZnVuY3Rpb24gV3QoKXtIdC5hcHBseSh0aGlzKX1mdW5jdGlvbiBqdCgpe31mdW5jdGlvbiBLdCgpe3RoaXMucD1udWxsLHRoaXMuY3Jvc3NpbmdDb3VudD0wLHRoaXMuaXNQb2ludE9uU2VnbWVudD0hMTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wPXR9ZnVuY3Rpb24gWnQoKXt9ZnVuY3Rpb24gSnQoKXt2YXIgdCxlLG4saTt0aGlzLnAwPW51bGwsdGhpcy5wMT1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoP0p0LmNhbGwodGhpcyxuZXcgZCxuZXcgZCk6MT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLEp0LmNhbGwodGhpcyxlLnAwLGUucDEpKToyPT09YXJndW1lbnRzLmxlbmd0aD8obj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0sdGhpcy5wMD1uLHRoaXMucDE9aSk6ND09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPWFyZ3VtZW50c1szXSxKdC5jYWxsKHRoaXMsbmV3IGQodCxlKSxuZXcgZChuLGkpKSl9ZnVuY3Rpb24gUXQoKXt2YXIgdDt0aGlzLm1hdHJpeD1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLm1hdHJpeD1BcnJheSgzKS5maWxsKCkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5KDMpfSksdGhpcy5zZXRBbGwobHQuRkFMU0UpKToxPT09YXJndW1lbnRzLmxlbmd0aCYmKFwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0/KHQ9YXJndW1lbnRzWzBdLFF0LmNhbGwodGhpcyksdGhpcy5zZXQodCkpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgUXQmJih0PWFyZ3VtZW50c1swXSxRdC5jYWxsKHRoaXMpLHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdPXQubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdLHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuQk9VTkRBUlldPXQubWF0cml4W0wuSU5URVJJT1JdW0wuQk9VTkRBUlldLHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuRVhURVJJT1JdPXQubWF0cml4W0wuSU5URVJJT1JdW0wuRVhURVJJT1JdLHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuSU5URVJJT1JdPXQubWF0cml4W0wuQk9VTkRBUlldW0wuSU5URVJJT1JdLHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuQk9VTkRBUlldPXQubWF0cml4W0wuQk9VTkRBUlldW0wuQk9VTkRBUlldLHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuRVhURVJJT1JdPXQubWF0cml4W0wuQk9VTkRBUlldW0wuRVhURVJJT1JdLHRoaXMubWF0cml4W0wuRVhURVJJT1JdW0wuSU5URVJJT1JdPXQubWF0cml4W0wuRVhURVJJT1JdW0wuSU5URVJJT1JdLHRoaXMubWF0cml4W0wuRVhURVJJT1JdW0wuQk9VTkRBUlldPXQubWF0cml4W0wuRVhURVJJT1JdW0wuQk9VTkRBUlldLHRoaXMubWF0cml4W0wuRVhURVJJT1JdW0wuRVhURVJJT1JdPXQubWF0cml4W0wuRVhURVJJT1JdW0wuRVhURVJJT1JdKSl9ZnVuY3Rpb24gJHQoKXt0aGlzLmFyZWFCYXNlUHQ9bnVsbCx0aGlzLnRyaWFuZ2xlQ2VudDM9bmV3IGQsdGhpcy5hcmVhc3VtMj0wLHRoaXMuY2czPW5ldyBkLHRoaXMubGluZUNlbnRTdW09bmV3IGQsdGhpcy50b3RhbExlbmd0aD0wLHRoaXMucHRDb3VudD0wLHRoaXMucHRDZW50U3VtPW5ldyBkO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmFyZWFCYXNlUHQ9bnVsbCx0aGlzLmFkZCh0KX1mdW5jdGlvbiB0ZSh0KXt0aGlzLm1lc3NhZ2U9dHx8XCJcIn1mdW5jdGlvbiBlZSgpe3RoaXMuYXJyYXlfPVtdfWZ1bmN0aW9uIG5lKCl7dGhpcy50cmVlU2V0PW5ldyBhdCx0aGlzLmxpc3Q9bmV3IEl9ZnVuY3Rpb24gaWUoKXt2YXIgdCxlO3RoaXMuZ2VvbUZhY3Rvcnk9bnVsbCx0aGlzLmlucHV0UHRzPW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLGllLmNhbGwodGhpcyxpZS5leHRyYWN0Q29vcmRpbmF0ZXMoZSksZS5nZXRGYWN0b3J5KCkpKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuaW5wdXRQdHM9bmUuZmlsdGVyQ29vcmRpbmF0ZXModCksdGhpcy5nZW9tRmFjdG9yeT1lKX1mdW5jdGlvbiByZSgpe3RoaXMub3JpZ2luPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMub3JpZ2luPXR9ZnVuY3Rpb24gc2UoKXt0aGlzLmlucHV0R2VvbT1udWxsLHRoaXMuZmFjdG9yeT1udWxsLHRoaXMucHJ1bmVFbXB0eUdlb21ldHJ5PSEwLHRoaXMucHJlc2VydmVHZW9tZXRyeUNvbGxlY3Rpb25UeXBlPSEwLHRoaXMucHJlc2VydmVDb2xsZWN0aW9ucz0hMSx0aGlzLnByZXNlcnZlVHlwZT0hMX1mdW5jdGlvbiBvZSgpe3ZhciB0LGU7dGhpcy5zbmFwVG9sZXJhbmNlPTAsdGhpcy5zcmNQdHM9bnVsbCx0aGlzLnNlZz1uZXcgSnQsdGhpcy5hbGxvd1NuYXBwaW5nVG9Tb3VyY2VWZXJ0aWNlcz0hMSx0aGlzLl9pc0Nsb3NlZD0hMSxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEN0JiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdPyh0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxvZS5jYWxsKHRoaXMsdC5nZXRDb29yZGluYXRlcygpLGUpKTphcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5JiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5zcmNQdHM9dCx0aGlzLl9pc0Nsb3NlZD1vZS5pc0Nsb3NlZCh0KSx0aGlzLnNuYXBUb2xlcmFuY2U9ZSl9ZnVuY3Rpb24gYWUoKXt0aGlzLnNyY0dlb209bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zcmNHZW9tPXR9ZnVuY3Rpb24gdWUoKXt2YXIgdCxlLG47c2UuYXBwbHkodGhpcyksdGhpcy5zbmFwVG9sZXJhbmNlPW51bGwsdGhpcy5zbmFwUHRzPW51bGwsdGhpcy5pc1NlbGZTbmFwPSExLDI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSx0aGlzLnNuYXBUb2xlcmFuY2U9ZSx0aGlzLnNuYXBQdHM9bik6Mz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLnNuYXBUb2xlcmFuY2U9dCx0aGlzLnNuYXBQdHM9ZSx0aGlzLmlzU2VsZlNuYXA9bil9ZnVuY3Rpb24gbGUoKXt0aGlzLmlzRmlyc3Q9ITAsdGhpcy5jb21tb25NYW50aXNzYUJpdHNDb3VudD01Myx0aGlzLmNvbW1vbkJpdHM9MCx0aGlzLmNvbW1vblNpZ25FeHA9bnVsbH1mdW5jdGlvbiBoZSgpe3RoaXMuY29tbW9uQ29vcmQ9bnVsbCx0aGlzLmNjRmlsdGVyPW5ldyBjZX1mdW5jdGlvbiBjZSgpe3RoaXMuY29tbW9uQml0c1g9bmV3IGxlLHRoaXMuY29tbW9uQml0c1k9bmV3IGxlfWZ1bmN0aW9uIGZlKCl7dGhpcy50cmFucz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnRyYW5zPXR9ZnVuY3Rpb24gZ2UoKXt0aGlzLnBhcmVudD1udWxsLHRoaXMuYXRTdGFydD1udWxsLHRoaXMubWF4PW51bGwsdGhpcy5pbmRleD1udWxsLHRoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucGFyZW50PXQsdGhpcy5hdFN0YXJ0PSEwLHRoaXMuaW5kZXg9MCx0aGlzLm1heD10LmdldE51bUdlb21ldHJpZXMoKX1mdW5jdGlvbiBkZSgpe2lmKHRoaXMuYm91bmRhcnlSdWxlPVYuT0dDX1NGU19CT1VOREFSWV9SVUxFLHRoaXMuaXNJbj1udWxsLHRoaXMubnVtQm91bmRhcmllcz1udWxsLDAhPT1hcmd1bWVudHMubGVuZ3RoJiYxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKG51bGw9PT10KXRocm93IG5ldyBjO3RoaXMuYm91bmRhcnlSdWxlPXR9fWZ1bmN0aW9uIHBlKCl7fWZ1bmN0aW9uIG1lKCl7fWZ1bmN0aW9uIHllKCl7dGhpcy5wdHM9bnVsbCx0aGlzLmRhdGE9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5wdHM9dCx0aGlzLmRhdGE9ZX1mdW5jdGlvbiB2ZSgpe31mdW5jdGlvbiB4ZSgpe3RoaXMuYm91bmRzPW51bGwsdGhpcy5pdGVtPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuYm91bmRzPXQsdGhpcy5pdGVtPWV9ZnVuY3Rpb24gRWUoKXt0aGlzLl9zaXplPW51bGwsdGhpcy5pdGVtcz1udWxsLHRoaXMuX3NpemU9MCx0aGlzLml0ZW1zPW5ldyBJLHRoaXMuaXRlbXMuYWRkKG51bGwpfWZ1bmN0aW9uIEllKCl7fWZ1bmN0aW9uIE5lKCl7fWZ1bmN0aW9uIENlKCl7dmFyIHQ7dGhpcy5jaGlsZEJvdW5kYWJsZXM9bmV3IEksdGhpcy5ib3VuZHM9bnVsbCx0aGlzLmxldmVsPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGh8fDE9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sdGhpcy5sZXZlbD10KX1mdW5jdGlvbiBTZSgpe3RoaXMuYm91bmRhYmxlMT1udWxsLHRoaXMuYm91bmRhYmxlMj1udWxsLHRoaXMuX2Rpc3RhbmNlPW51bGwsdGhpcy5pdGVtRGlzdGFuY2U9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5ib3VuZGFibGUxPXQsdGhpcy5ib3VuZGFibGUyPWUsdGhpcy5pdGVtRGlzdGFuY2U9bix0aGlzLl9kaXN0YW5jZT10aGlzLmRpc3RhbmNlKCl9ZnVuY3Rpb24gd2UoKXt2YXIgdDt0aGlzLnJvb3Q9bnVsbCx0aGlzLmJ1aWx0PSExLHRoaXMuaXRlbUJvdW5kYWJsZXM9bmV3IEksdGhpcy5ub2RlQ2FwYWNpdHk9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aD93ZS5jYWxsKHRoaXMsd2UuREVGQVVMVF9OT0RFX0NBUEFDSVRZKToxPT09YXJndW1lbnRzLmxlbmd0aCYmKGwuaXNUcnVlKDE8KHQ9YXJndW1lbnRzWzBdKSxcIk5vZGUgY2FwYWNpdHkgbXVzdCBiZSBncmVhdGVyIHRoYW4gMVwiKSx0aGlzLm5vZGVDYXBhY2l0eT10KX1mdW5jdGlvbiBMZSgpe31mdW5jdGlvbiBSZSgpe3ZhciB0OzA9PT1hcmd1bWVudHMubGVuZ3RoP1JlLmNhbGwodGhpcyxSZS5ERUZBVUxUX05PREVfQ0FQQUNJVFkpOjE9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sd2UuY2FsbCh0aGlzLHQpKX1mdW5jdGlvbiBUZSgpe0NlLmNhbGwodGhpcyxhcmd1bWVudHNbMF0pfWZ1bmN0aW9uIFBlKCl7fWZ1bmN0aW9uIGJlKCl7dGhpcy5zZWdTdHJpbmc9bnVsbCx0aGlzLmNvb3JkPW51bGwsdGhpcy5zZWdtZW50SW5kZXg9bnVsbCx0aGlzLnNlZ21lbnRPY3RhbnQ9bnVsbCx0aGlzLl9pc0ludGVyaW9yPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3RoaXMuc2VnU3RyaW5nPXQsdGhpcy5jb29yZD1uZXcgZChlKSx0aGlzLnNlZ21lbnRJbmRleD1uLHRoaXMuc2VnbWVudE9jdGFudD1pLHRoaXMuX2lzSW50ZXJpb3I9IWUuZXF1YWxzMkQodC5nZXRDb29yZGluYXRlKG4pKX1mdW5jdGlvbiBPZSgpe3RoaXMubm9kZU1hcD1uZXcgcnQsdGhpcy5lZGdlPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZWRnZT10fWZ1bmN0aW9uIF9lKCl7dGhpcy5ub2RlTGlzdD1udWxsLHRoaXMuZWRnZT1udWxsLHRoaXMubm9kZUl0PW51bGwsdGhpcy5jdXJyTm9kZT1udWxsLHRoaXMubmV4dE5vZGU9bnVsbDt2YXIgdD1hcmd1bWVudHNbdGhpcy5jdXJyU2VnSW5kZXg9MF07dGhpcy5ub2RlTGlzdD10LHRoaXMuZWRnZT10LmdldEVkZ2UoKSx0aGlzLm5vZGVJdD10Lml0ZXJhdG9yKCksdGhpcy5yZWFkTmV4dE5vZGUoKX1mdW5jdGlvbiBNZSgpe31mdW5jdGlvbiBEZSgpe3RoaXMubm9kZUxpc3Q9bmV3IE9lKHRoaXMpLHRoaXMucHRzPW51bGwsdGhpcy5kYXRhPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMucHRzPXQsdGhpcy5kYXRhPWV9ZnVuY3Rpb24gQWUoKXt0aGlzLnRlbXBFbnYxPW5ldyBDLHRoaXMudGVtcEVudjI9bmV3IEMsdGhpcy5vdmVybGFwU2VnMT1uZXcgSnQsdGhpcy5vdmVybGFwU2VnMj1uZXcgSnR9ZnVuY3Rpb24gRmUoKXt0aGlzLnB0cz1udWxsLHRoaXMuc3RhcnQ9bnVsbCx0aGlzLmVuZD1udWxsLHRoaXMuZW52PW51bGwsdGhpcy5jb250ZXh0PW51bGwsdGhpcy5pZD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPWFyZ3VtZW50c1szXTt0aGlzLnB0cz10LHRoaXMuc3RhcnQ9ZSx0aGlzLmVuZD1uLHRoaXMuY29udGV4dD1pfWZ1bmN0aW9uIEdlKCl7fWZ1bmN0aW9uIHFlKCl7fWZ1bmN0aW9uIEJlKCl7fWZ1bmN0aW9uIHplKCl7dmFyIHQ7dGhpcy5zZWdJbnQ9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aHx8MT09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSx0aGlzLnNldFNlZ21lbnRJbnRlcnNlY3Rvcih0KSl9ZnVuY3Rpb24gVmUoKXt0aGlzLm1vbm9DaGFpbnM9bmV3IEksdGhpcy5pbmRleD1uZXcgUmUsdGhpcy5pZENvdW50ZXI9MCx0aGlzLm5vZGVkU2VnU3RyaW5ncz1udWxsLCh0aGlzLm5PdmVybGFwcz0wKT09PWFyZ3VtZW50cy5sZW5ndGh8fDE9PT1hcmd1bWVudHMubGVuZ3RoJiZ6ZS5jYWxsKHRoaXMsYXJndW1lbnRzWzBdKX1mdW5jdGlvbiBrZSgpe0FlLmFwcGx5KHRoaXMpLHRoaXMuc2k9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zaT10fWZ1bmN0aW9uIFllKCl7dmFyIHQsZTt0aGlzLnB0PW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGg/cC5jYWxsKHRoaXMsYXJndW1lbnRzWzBdKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHAuY2FsbCh0aGlzLFllLm1zZ1dpdGhDb29yZCh0LGUpKSx0aGlzLnB0PW5ldyBkKGUpKX1mdW5jdGlvbiBVZSgpe31mdW5jdGlvbiBYZSgpe3RoaXMuZmluZEFsbEludGVyc2VjdGlvbnM9ITEsdGhpcy5pc0NoZWNrRW5kU2VnbWVudHNPbmx5PSExLHRoaXMubGk9bnVsbCx0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uPW51bGwsdGhpcy5pbnRTZWdtZW50cz1udWxsLHRoaXMuaW50ZXJzZWN0aW9ucz1uZXcgSSx0aGlzLmludGVyc2VjdGlvbkNvdW50PTAsdGhpcy5rZWVwSW50ZXJzZWN0aW9ucz0hMDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5saT10LHRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb249bnVsbH1mdW5jdGlvbiBIZSgpe3RoaXMubGk9bmV3IFd0LHRoaXMuc2VnU3RyaW5ncz1udWxsLHRoaXMuZmluZEFsbEludGVyc2VjdGlvbnM9ITEsdGhpcy5zZWdJbnQ9bnVsbCx0aGlzLl9pc1ZhbGlkPSEwO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNlZ1N0cmluZ3M9dH1mdW5jdGlvbiBXZSgpe3RoaXMubnY9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5udj1uZXcgSGUoV2UudG9TZWdtZW50U3RyaW5ncyh0KSl9ZnVuY3Rpb24gamUoKXt0aGlzLm1hcE9wPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubWFwT3A9dH1mdW5jdGlvbiBLZSgpe31mdW5jdGlvbiBaZSgpe3ZhciB0O2lmKHRoaXMubG9jYXRpb249bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIGU9YXJndW1lbnRzWzBdO3RoaXMuaW5pdChlLmxlbmd0aCl9ZWxzZSBpZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1swXSkpe3ZhciBuPWFyZ3VtZW50c1swXTt0aGlzLmluaXQoMSksdGhpcy5sb2NhdGlvbltLZS5PTl09bn1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgWmUpe3ZhciBpPWFyZ3VtZW50c1swXTtpZih0aGlzLmluaXQoaS5sb2NhdGlvbi5sZW5ndGgpLG51bGwhPT1pKWZvcih2YXIgcj0wO3I8dGhpcy5sb2NhdGlvbi5sZW5ndGg7cisrKXRoaXMubG9jYXRpb25bcl09aS5sb2NhdGlvbltyXX19ZWxzZSAzPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLHRoaXMuaW5pdCgzKSx0aGlzLmxvY2F0aW9uW0tlLk9OXT10LHRoaXMubG9jYXRpb25bS2UuTEVGVF09ZSx0aGlzLmxvY2F0aW9uW0tlLlJJR0hUXT1uKX1mdW5jdGlvbiBKZSgpe3ZhciB0LGUsbixpLHIsczt0aGlzLmVsdD1uZXcgQXJyYXkoMikuZmlsbChudWxsKSwxPT09YXJndW1lbnRzLmxlbmd0aD9OdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1swXSk/KHQ9YXJndW1lbnRzWzBdLHRoaXMuZWx0WzBdPW5ldyBaZSh0KSx0aGlzLmVsdFsxXT1uZXcgWmUodCkpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgSmUmJihlPWFyZ3VtZW50c1swXSx0aGlzLmVsdFswXT1uZXcgWmUoZS5lbHRbMF0pLHRoaXMuZWx0WzFdPW5ldyBaZShlLmVsdFsxXSkpOjI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSx0aGlzLmVsdFswXT1uZXcgWmUoTC5OT05FKSx0aGlzLmVsdFsxXT1uZXcgWmUoTC5OT05FKSx0aGlzLmVsdFtlXS5zZXRMb2NhdGlvbihuKSk6Mz09PWFyZ3VtZW50cy5sZW5ndGg/KGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdLHRoaXMuZWx0WzBdPW5ldyBaZShpLHIscyksdGhpcy5lbHRbMV09bmV3IFplKGkscixzKSk6ND09PWFyZ3VtZW50cy5sZW5ndGgmJihuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXSxzPWFyZ3VtZW50c1szXSx0aGlzLmVsdFswXT1uZXcgWmUoTC5OT05FLEwuTk9ORSxMLk5PTkUpLHRoaXMuZWx0WzFdPW5ldyBaZShMLk5PTkUsTC5OT05FLEwuTk9ORSksdGhpcy5lbHRbbl0uc2V0TG9jYXRpb25zKGkscixzKSl9ZnVuY3Rpb24gUWUoKXt0aGlzLnN0YXJ0RGU9bnVsbCx0aGlzLm1heE5vZGVEZWdyZWU9LTEsdGhpcy5lZGdlcz1uZXcgSSx0aGlzLnB0cz1uZXcgSSx0aGlzLmxhYmVsPW5ldyBKZShMLk5PTkUpLHRoaXMucmluZz1udWxsLHRoaXMuX2lzSG9sZT1udWxsLHRoaXMuc2hlbGw9bnVsbCx0aGlzLmhvbGVzPW5ldyBJLHRoaXMuZ2VvbWV0cnlGYWN0b3J5PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuZ2VvbWV0cnlGYWN0b3J5PWUsdGhpcy5jb21wdXRlUG9pbnRzKHQpLHRoaXMuY29tcHV0ZVJpbmcoKX1mdW5jdGlvbiAkZSgpe1FlLmNhbGwodGhpcyxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKX1mdW5jdGlvbiB0bigpe1FlLmNhbGwodGhpcyxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKX1mdW5jdGlvbiBlbigpe3ZhciB0O3RoaXMubGFiZWw9bnVsbCx0aGlzLl9pc0luUmVzdWx0PSExLHRoaXMuX2lzQ292ZXJlZD0hMSx0aGlzLl9pc0NvdmVyZWRTZXQ9ITEsdGhpcy5faXNWaXNpdGVkPSExLDA9PT1hcmd1bWVudHMubGVuZ3RofHwxPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLHRoaXMubGFiZWw9dCl9ZnVuY3Rpb24gbm4oKXtlbi5hcHBseSh0aGlzKSx0aGlzLmNvb3JkPW51bGwsdGhpcy5lZGdlcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmNvb3JkPXQsdGhpcy5lZGdlcz1lLHRoaXMubGFiZWw9bmV3IEplKDAsTC5OT05FKX1mdW5jdGlvbiBybigpe3RoaXMubm9kZU1hcD1uZXcgcnQsdGhpcy5ub2RlRmFjdD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm5vZGVGYWN0PXR9ZnVuY3Rpb24gc24oKXt2YXIgdCxlLG4saTt0aGlzLmVkZ2U9bnVsbCx0aGlzLmxhYmVsPW51bGwsdGhpcy5ub2RlPW51bGwsdGhpcy5wMD1udWxsLHRoaXMucDE9bnVsbCx0aGlzLmR4PW51bGwsdGhpcy5keT1udWxsLHRoaXMucXVhZHJhbnQ9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD8odD1hcmd1bWVudHNbMF0sdGhpcy5lZGdlPXQpOjM9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXSxzbi5jYWxsKHRoaXMsZSxuLGksbnVsbCkpOjQ9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM10sc24uY2FsbCh0aGlzLHQpLHRoaXMuaW5pdChlLG4pLHRoaXMubGFiZWw9aSl9ZnVuY3Rpb24gb24oKXt0aGlzLl9pc0ZvcndhcmQ9bnVsbCx0aGlzLl9pc0luUmVzdWx0PSExLHRoaXMuX2lzVmlzaXRlZD0hMSx0aGlzLnN5bT1udWxsLHRoaXMubmV4dD1udWxsLHRoaXMubmV4dE1pbj1udWxsLHRoaXMuZWRnZVJpbmc9bnVsbCx0aGlzLm1pbkVkZ2VSaW5nPW51bGwsdGhpcy5kZXB0aD1bMCwtOTk5LC05OTldO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtzbi5jYWxsKHRoaXMsdCksKHRoaXMuX2lzRm9yd2FyZD1lKT90aGlzLmluaXQodC5nZXRDb29yZGluYXRlKDApLHQuZ2V0Q29vcmRpbmF0ZSgxKSk6KGU9dC5nZXROdW1Qb2ludHMoKS0xLHRoaXMuaW5pdCh0LmdldENvb3JkaW5hdGUoZSksdC5nZXRDb29yZGluYXRlKGUtMSkpKSx0aGlzLmNvbXB1dGVEaXJlY3RlZExhYmVsKCl9ZnVuY3Rpb24gYW4oKXt9ZnVuY3Rpb24gdW4oKXt2YXIgdDt0aGlzLmVkZ2VzPW5ldyBJLHRoaXMubm9kZXM9bnVsbCx0aGlzLmVkZ2VFbmRMaXN0PW5ldyBJLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubm9kZXM9bmV3IHJuKG5ldyBhbik6MT09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSx0aGlzLm5vZGVzPW5ldyBybih0KSl9ZnVuY3Rpb24gbG4oKXt0aGlzLmdlb21ldHJ5RmFjdG9yeT1udWxsLHRoaXMuc2hlbGxMaXN0PW5ldyBJO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmdlb21ldHJ5RmFjdG9yeT10fWZ1bmN0aW9uIGhuKCl7dGhpcy5vcD1udWxsLHRoaXMuZ2VvbWV0cnlGYWN0b3J5PW51bGwsdGhpcy5wdExvY2F0b3I9bnVsbCx0aGlzLmxpbmVFZGdlc0xpc3Q9bmV3IEksdGhpcy5yZXN1bHRMaW5lTGlzdD1uZXcgSTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5vcD10LHRoaXMuZ2VvbWV0cnlGYWN0b3J5PWUsdGhpcy5wdExvY2F0b3I9bn1mdW5jdGlvbiBjbigpe3RoaXMub3A9bnVsbCx0aGlzLmdlb21ldHJ5RmFjdG9yeT1udWxsLHRoaXMucmVzdWx0UG9pbnRMaXN0PW5ldyBJO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLm9wPXQsdGhpcy5nZW9tZXRyeUZhY3Rvcnk9ZX1mdW5jdGlvbiBmbigpe31mdW5jdGlvbiBnbigpe3RoaXMuZ2VvbT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmdlb209dH1mdW5jdGlvbiBkbigpe3RoaXMuZWRnZU1hcD1uZXcgcnQsdGhpcy5lZGdlTGlzdD1udWxsLHRoaXMucHRJbkFyZWFMb2NhdGlvbj1bTC5OT05FLEwuTk9ORV19ZnVuY3Rpb24gcG4oKXtkbi5hcHBseSh0aGlzKSx0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdD1udWxsLHRoaXMubGFiZWw9bnVsbCx0aGlzLlNDQU5OSU5HX0ZPUl9JTkNPTUlORz0xLHRoaXMuTElOS0lOR19UT19PVVRHT0lORz0yfWZ1bmN0aW9uIG1uKCl7YW4uYXBwbHkodGhpcyl9ZnVuY3Rpb24geW4oKXt0aGlzLm1jZT1udWxsLHRoaXMuY2hhaW5JbmRleD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLm1jZT10LHRoaXMuY2hhaW5JbmRleD1lfWZ1bmN0aW9uIHZuKCl7dmFyIHQsZSxuO3RoaXMubGFiZWw9bnVsbCx0aGlzLnhWYWx1ZT1udWxsLHRoaXMuZXZlbnRUeXBlPW51bGwsdGhpcy5pbnNlcnRFdmVudD1udWxsLHRoaXMuZGVsZXRlRXZlbnRJbmRleD1udWxsLHRoaXMub2JqPW51bGwsMj09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLHRoaXMuZXZlbnRUeXBlPXZuLkRFTEVURSx0aGlzLnhWYWx1ZT1lLHRoaXMuaW5zZXJ0RXZlbnQ9bik6Mz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLmV2ZW50VHlwZT12bi5JTlNFUlQsdGhpcy5sYWJlbD10LHRoaXMueFZhbHVlPWUsdGhpcy5vYmo9bil9ZnVuY3Rpb24geG4oKXt9ZnVuY3Rpb24gRW4oKXt0aGlzLl9oYXNJbnRlcnNlY3Rpb249ITEsdGhpcy5oYXNQcm9wZXI9ITEsdGhpcy5oYXNQcm9wZXJJbnRlcmlvcj0hMSx0aGlzLnByb3BlckludGVyc2VjdGlvblBvaW50PW51bGwsdGhpcy5saT1udWxsLHRoaXMuaW5jbHVkZVByb3Blcj1udWxsLHRoaXMucmVjb3JkSXNvbGF0ZWQ9bnVsbCx0aGlzLmlzU2VsZkludGVyc2VjdGlvbj1udWxsLHRoaXMubnVtSW50ZXJzZWN0aW9ucz0wLHRoaXMubnVtVGVzdHM9MCx0aGlzLmJkeU5vZGVzPW51bGwsdGhpcy5faXNEb25lPSExLHRoaXMuaXNEb25lV2hlblByb3BlckludD0hMTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5saT10LHRoaXMuaW5jbHVkZVByb3Blcj1lLHRoaXMucmVjb3JkSXNvbGF0ZWQ9bn1mdW5jdGlvbiBJbigpe3huLmFwcGx5KHRoaXMpLHRoaXMuZXZlbnRzPW5ldyBJLHRoaXMubk92ZXJsYXBzPW51bGx9ZnVuY3Rpb24gTm4oKXt0aGlzLm1pbj1nLlBPU0lUSVZFX0lORklOSVRZLHRoaXMubWF4PWcuTkVHQVRJVkVfSU5GSU5JVFl9ZnVuY3Rpb24gQ24oKXt9ZnVuY3Rpb24gU24oKXtObi5hcHBseSh0aGlzKSx0aGlzLml0ZW09bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5taW49dCx0aGlzLm1heD1lLHRoaXMuaXRlbT1ufWZ1bmN0aW9uIHduKCl7Tm4uYXBwbHkodGhpcyksdGhpcy5ub2RlMT1udWxsLHRoaXMubm9kZTI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5ub2RlMT10LHRoaXMubm9kZTI9ZSx0aGlzLmJ1aWxkRXh0ZW50KHRoaXMubm9kZTEsdGhpcy5ub2RlMil9ZnVuY3Rpb24gTG4oKXt0aGlzLmxlYXZlcz1uZXcgSSx0aGlzLnJvb3Q9bnVsbCx0aGlzLmxldmVsPTB9ZnVuY3Rpb24gUm4oKXt2YXIgdCxlO3RoaXMubGluZXM9bnVsbCx0aGlzLmlzRm9yY2VkVG9MaW5lU3RyaW5nPSExLDE9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSx0aGlzLmxpbmVzPWUpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5saW5lcz10LHRoaXMuaXNGb3JjZWRUb0xpbmVTdHJpbmc9ZSl9ZnVuY3Rpb24gVG4oKXt0aGlzLml0ZW1zPW5ldyBJfWZ1bmN0aW9uIFBuKCl7dGhpcy5pbmRleD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTtpZighUih0LEx0KSl0aHJvdyBuZXcgYzt0aGlzLmluZGV4PW5ldyBPbih0KX1mdW5jdGlvbiBibigpe3RoaXMuY291bnRlcj1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNvdW50ZXI9dH1mdW5jdGlvbiBPbigpe3RoaXMuaW5kZXg9bmV3IExuO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmluaXQodCl9ZnVuY3Rpb24gX24oKXt0aGlzLmNvb3JkPW51bGwsdGhpcy5zZWdtZW50SW5kZXg9bnVsbCx0aGlzLmRpc3Q9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5jb29yZD1uZXcgZCh0KSx0aGlzLnNlZ21lbnRJbmRleD1lLHRoaXMuZGlzdD1ufWZ1bmN0aW9uIE1uKCl7dGhpcy5ub2RlTWFwPW5ldyBydCx0aGlzLmVkZ2U9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5lZGdlPXR9ZnVuY3Rpb24gRG4oKXt9ZnVuY3Rpb24gQW4oKXt0aGlzLmU9bnVsbCx0aGlzLnB0cz1udWxsLHRoaXMuc3RhcnRJbmRleD1udWxsLHRoaXMuZW52MT1uZXcgQyx0aGlzLmVudjI9bmV3IEM7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZT10LHRoaXMucHRzPXQuZ2V0Q29vcmRpbmF0ZXMoKTt0PW5ldyBEbjt0aGlzLnN0YXJ0SW5kZXg9dC5nZXRDaGFpblN0YXJ0SW5kaWNlcyh0aGlzLnB0cyl9ZnVuY3Rpb24gRm4oKXt0aGlzLmRlcHRoPUFycmF5KDIpLmZpbGwoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkoMyl9KTtmb3IodmFyIHQ9MDt0PDI7dCsrKWZvcih2YXIgZT0wO2U8MztlKyspdGhpcy5kZXB0aFt0XVtlXT1Gbi5OVUxMX1ZBTFVFfWZ1bmN0aW9uIEduKCl7dmFyIHQsZTtlbi5hcHBseSh0aGlzKSx0aGlzLnB0cz1udWxsLHRoaXMuZW52PW51bGwsdGhpcy5laUxpc3Q9bmV3IE1uKHRoaXMpLHRoaXMubmFtZT1udWxsLHRoaXMubWNlPW51bGwsdGhpcy5faXNJc29sYXRlZD0hMCx0aGlzLmRlcHRoPW5ldyBGbix0aGlzLmRlcHRoRGVsdGE9MCwxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sR24uY2FsbCh0aGlzLGUsbnVsbCkpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5wdHM9dCx0aGlzLmxhYmVsPWUpfWZ1bmN0aW9uIHFuKCl7dmFyIHQsZSxuO3VuLmFwcGx5KHRoaXMpLHRoaXMucGFyZW50R2VvbT1udWxsLHRoaXMubGluZUVkZ2VNYXA9bmV3IHp0LHRoaXMuYm91bmRhcnlOb2RlUnVsZT1udWxsLHRoaXMudXNlQm91bmRhcnlEZXRlcm1pbmF0aW9uUnVsZT0hMCx0aGlzLmFyZ0luZGV4PW51bGwsdGhpcy5ib3VuZGFyeU5vZGVzPW51bGwsdGhpcy5faGFzVG9vRmV3UG9pbnRzPSExLHRoaXMuaW52YWxpZFBvaW50PW51bGwsdGhpcy5hcmVhUHRMb2NhdG9yPW51bGwsdGhpcy5wdExvY2F0b3I9bmV3IGRlLDI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxxbi5jYWxsKHRoaXMsZSxuLFYuT0dDX1NGU19CT1VOREFSWV9SVUxFKSk6Mz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLmFyZ0luZGV4PXQsdGhpcy5wYXJlbnRHZW9tPWUsdGhpcy5ib3VuZGFyeU5vZGVSdWxlPW4sbnVsbCE9PWUmJnRoaXMuYWRkKGUpKX1mdW5jdGlvbiBCbigpe3ZhciB0LGUsbjt0aGlzLmxpPW5ldyBXdCx0aGlzLnJlc3VsdFByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5hcmc9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sdGhpcy5zZXRDb21wdXRhdGlvblByZWNpc2lvbihlLmdldFByZWNpc2lvbk1vZGVsKCkpLHRoaXMuYXJnPW5ldyBBcnJheSgxKS5maWxsKG51bGwpLHRoaXMuYXJnWzBdPW5ldyBxbigwLGUpKToyPT09YXJndW1lbnRzLmxlbmd0aD8obj1hcmd1bWVudHNbMF0sdD1hcmd1bWVudHNbMV0sQm4uY2FsbCh0aGlzLG4sdCxWLk9HQ19TRlNfQk9VTkRBUllfUlVMRSkpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYoZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sMDw9KHQ9YXJndW1lbnRzWzBdKS5nZXRQcmVjaXNpb25Nb2RlbCgpLmNvbXBhcmVUbyhlLmdldFByZWNpc2lvbk1vZGVsKCkpP3RoaXMuc2V0Q29tcHV0YXRpb25QcmVjaXNpb24odC5nZXRQcmVjaXNpb25Nb2RlbCgpKTp0aGlzLnNldENvbXB1dGF0aW9uUHJlY2lzaW9uKGUuZ2V0UHJlY2lzaW9uTW9kZWwoKSksdGhpcy5hcmc9bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5hcmdbMF09bmV3IHFuKDAsdCxuKSx0aGlzLmFyZ1sxXT1uZXcgcW4oMSxlLG4pKX1mdW5jdGlvbiB6bigpe3RoaXMucHRzPW51bGwsdGhpcy5fb3JpZW50YXRpb249bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wdHM9dCx0aGlzLl9vcmllbnRhdGlvbj16bi5vcmllbnRhdGlvbih0KX1mdW5jdGlvbiBWbigpe3RoaXMuZWRnZXM9bmV3IEksdGhpcy5vY2FNYXA9bmV3IHJ0fWZ1bmN0aW9uIGtuKCl7dGhpcy5wdExvY2F0b3I9bmV3IGRlLHRoaXMuZ2VvbUZhY3Q9bnVsbCx0aGlzLnJlc3VsdEdlb209bnVsbCx0aGlzLmdyYXBoPW51bGwsdGhpcy5lZGdlTGlzdD1uZXcgVm4sdGhpcy5yZXN1bHRQb2x5TGlzdD1uZXcgSSx0aGlzLnJlc3VsdExpbmVMaXN0PW5ldyBJLHRoaXMucmVzdWx0UG9pbnRMaXN0PW5ldyBJO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtCbi5jYWxsKHRoaXMsdCxlKSx0aGlzLmdyYXBoPW5ldyB1bihuZXcgbW4pLHRoaXMuZ2VvbUZhY3Q9dC5nZXRGYWN0b3J5KCl9ZnVuY3Rpb24gWW4oKXt0aGlzLmdlb209bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5zbmFwVG9sZXJhbmNlPW51bGwsdGhpcy5jYnI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5nZW9tWzBdPXQsdGhpcy5nZW9tWzFdPWUsdGhpcy5jb21wdXRlU25hcFRvbGVyYW5jZSgpfWZ1bmN0aW9uIFVuKCl7dGhpcy5nZW9tPW5ldyBBcnJheSgyKS5maWxsKG51bGwpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmdlb21bMF09dCx0aGlzLmdlb21bMV09ZX1mdW5jdGlvbiBYbigpe3RoaXMuZmFjdG9yeT1udWxsLHRoaXMuaW50ZXJpb3JQb2ludD1udWxsO3ZhciB0PWFyZ3VtZW50c1t0aGlzLm1heFdpZHRoPTBdO3RoaXMuZmFjdG9yeT10LmdldEZhY3RvcnkoKSx0aGlzLmFkZCh0KX1mdW5jdGlvbiBIbigpe3RoaXMucG9seT1udWxsLHRoaXMuY2VudHJlWT1udWxsLHRoaXMuaGlZPWcuTUFYX1ZBTFVFLHRoaXMubG9ZPS1nLk1BWF9WQUxVRTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wb2x5PXQsdGhpcy5oaVk9dC5nZXRFbnZlbG9wZUludGVybmFsKCkuZ2V0TWF4WSgpLHRoaXMubG9ZPXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmdldE1pblkoKSx0aGlzLmNlbnRyZVk9WG4uYXZnKHRoaXMubG9ZLHRoaXMuaGlZKX1mdW5jdGlvbiBXbigpe3RoaXMuY2VudHJvaWQ9bnVsbCx0aGlzLm1pbkRpc3RhbmNlPWcuTUFYX1ZBTFVFLHRoaXMuaW50ZXJpb3JQb2ludD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNlbnRyb2lkPXQuZ2V0Q2VudHJvaWQoKS5nZXRDb29yZGluYXRlKCksdGhpcy5hZGRJbnRlcmlvcih0KSxudWxsPT09dGhpcy5pbnRlcmlvclBvaW50JiZ0aGlzLmFkZEVuZHBvaW50cyh0KX1mdW5jdGlvbiBqbigpe3RoaXMuY2VudHJvaWQ9bnVsbCx0aGlzLm1pbkRpc3RhbmNlPWcuTUFYX1ZBTFVFLHRoaXMuaW50ZXJpb3JQb2ludD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNlbnRyb2lkPXQuZ2V0Q2VudHJvaWQoKS5nZXRDb29yZGluYXRlKCksdGhpcy5hZGQodCl9ZnVuY3Rpb24gS24oKXt9ZnVuY3Rpb24gWm4oKXt0aGlzLnAwPW51bGwsdGhpcy5wMT1udWxsLHRoaXMucDI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5wMD10LHRoaXMucDE9ZSx0aGlzLnAyPW59ZnVuY3Rpb24gSm4oKXt0aGlzLmlucHV0PW51bGwsdGhpcy5leHRyZW1hbFB0cz1udWxsLHRoaXMuY2VudHJlPW51bGw7dmFyIHQ9YXJndW1lbnRzW3RoaXMucmFkaXVzPTBdO3RoaXMuaW5wdXQ9dH1mdW5jdGlvbiBRbigpe3ZhciB0LGU7dGhpcy5pbnB1dEdlb209bnVsbCx0aGlzLmlzQ29udmV4PW51bGwsdGhpcy5jb252ZXhIdWxsUHRzPW51bGwsdGhpcy5taW5CYXNlU2VnPW5ldyBKdCx0aGlzLm1pbldpZHRoUHQ9bnVsbCx0aGlzLm1pblB0SW5kZXg9bnVsbCx0aGlzLm1pbldpZHRoPTAsMT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLFFuLmNhbGwodGhpcyxlLCExKSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLmlucHV0R2VvbT10LHRoaXMuaXNDb252ZXg9ZSl9ZnVuY3Rpb24gJG4oKXt0aGlzLmlucHV0R2VvbT1udWxsLHRoaXMuZGlzdGFuY2VUb2xlcmFuY2U9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbnB1dEdlb209dH1mdW5jdGlvbiB0aSgpe3NlLmFwcGx5KHRoaXMpLHRoaXMuZGlzdGFuY2VUb2xlcmFuY2U9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5kaXN0YW5jZVRvbGVyYW5jZT10fWZ1bmN0aW9uIGVpKCl7dGhpcy5fb3JpZz1udWxsLHRoaXMuX3N5bT1udWxsLHRoaXMuX25leHQ9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fb3JpZz10fWZ1bmN0aW9uIG5pKCl7dGhpcy5faXNNYXJrZWQ9ITEsZWkuY2FsbCh0aGlzLGFyZ3VtZW50c1swXSl9ZnVuY3Rpb24gaWkoKXt0aGlzLnZlcnRleE1hcD1uZXcgenR9ZnVuY3Rpb24gcmkoKXt0aGlzLl9pc1N0YXJ0PSExLG5pLmNhbGwodGhpcyxhcmd1bWVudHNbMF0pfWZ1bmN0aW9uIHNpKCl7aWkuYXBwbHkodGhpcyl9ZnVuY3Rpb24gb2koKXt0aGlzLnJlc3VsdD1udWxsLHRoaXMuZmFjdG9yeT1udWxsLHRoaXMuZ3JhcGg9bnVsbCx0aGlzLmxpbmVzPW5ldyBJLHRoaXMubm9kZUVkZ2VTdGFjaz1uZXcgZWUsdGhpcy5yaW5nU3RhcnRFZGdlPW51bGwsdGhpcy5ncmFwaD1uZXcgc2l9ZnVuY3Rpb24gYWkoKXt0aGlzLml0ZW1zPW5ldyBJLHRoaXMuc3Vibm9kZT1uZXcgQXJyYXkoNCkuZmlsbChudWxsKX1mdW5jdGlvbiB1aSgpe31mdW5jdGlvbiBsaSgpe3RoaXMucHQ9bmV3IGQsdGhpcy5sZXZlbD0wLHRoaXMuZW52PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuY29tcHV0ZUtleSh0KX1mdW5jdGlvbiBoaSgpe2FpLmFwcGx5KHRoaXMpLHRoaXMuZW52PW51bGwsdGhpcy5jZW50cmV4PW51bGwsdGhpcy5jZW50cmV5PW51bGwsdGhpcy5sZXZlbD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmVudj10LHRoaXMubGV2ZWw9ZSx0aGlzLmNlbnRyZXg9KHQuZ2V0TWluWCgpK3QuZ2V0TWF4WCgpKS8yLHRoaXMuY2VudHJleT0odC5nZXRNaW5ZKCkrdC5nZXRNYXhZKCkpLzJ9ZnVuY3Rpb24gY2koKXt9ZnVuY3Rpb24gZmkoKXthaS5hcHBseSh0aGlzKX1mdW5jdGlvbiBnaSgpe3RoaXMucm9vdD1udWxsLHRoaXMubWluRXh0ZW50PTEsdGhpcy5yb290PW5ldyBmaX1mdW5jdGlvbiBkaSh0KXt0aGlzLmdlb21ldHJ5RmFjdG9yeT10fHxuZXcgWXR9ZnVuY3Rpb24gcGkodCl7dGhpcy5nZW9tZXRyeUZhY3Rvcnk9dHx8bmV3IFl0LHRoaXMucHJlY2lzaW9uTW9kZWw9dGhpcy5nZW9tZXRyeUZhY3RvcnkuZ2V0UHJlY2lzaW9uTW9kZWwoKSx0aGlzLnBhcnNlcj1uZXcgZGkodGhpcy5nZW9tZXRyeUZhY3RvcnkpfWZ1bmN0aW9uIG1pKCl7dGhpcy5wYXJzZXI9bmV3IGRpKHRoaXMuZ2VvbWV0cnlGYWN0b3J5KX1mdW5jdGlvbiB5aSh0KXt0aGlzLmdlb21ldHJ5RmFjdG9yeT10fHxuZXcgWXQsdGhpcy5wcmVjaXNpb25Nb2RlbD10aGlzLmdlb21ldHJ5RmFjdG9yeS5nZXRQcmVjaXNpb25Nb2RlbCgpLHRoaXMucGFyc2VyPW5ldyBVdCh0aGlzLmdlb21ldHJ5RmFjdG9yeSl9ZnVuY3Rpb24gdmkodCl7cmV0dXJuW3QueCx0LnldfWZ1bmN0aW9uIHhpKHQpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PXR8fG5ldyBZdH1mdW5jdGlvbiBFaSgpe3ZhciB0LGU7dGhpcy5ub2Rlcj1udWxsLHRoaXMuc2NhbGVGYWN0b3I9bnVsbCx0aGlzLm9mZnNldFg9bnVsbCx0aGlzLm9mZnNldFk9bnVsbCx0aGlzLmlzU2NhbGVkPSExLDI9PT1hcmd1bWVudHMubGVuZ3RoPyh0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxFaS5jYWxsKHRoaXMsdCxlLDAsMCkpOjQ9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5ub2Rlcj10LHRoaXMuc2NhbGVGYWN0b3I9ZSx0aGlzLmlzU2NhbGVkPSF0aGlzLmlzSW50ZWdlclByZWNpc2lvbigpKX1mdW5jdGlvbiBJaSgpe3ZhciB0LGU7dGhpcy5pbnB1dEdlb209bnVsbCx0aGlzLmlzQ2xvc2VkRW5kcG9pbnRzSW5JbnRlcmlvcj0hMCx0aGlzLm5vblNpbXBsZUxvY2F0aW9uPW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLHRoaXMuaW5wdXRHZW9tPWUpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5pbnB1dEdlb209dCx0aGlzLmlzQ2xvc2VkRW5kcG9pbnRzSW5JbnRlcmlvcj0hZS5pc0luQm91bmRhcnkoMikpfWZ1bmN0aW9uIE5pKCl7dGhpcy5wdD1udWxsLHRoaXMuaXNDbG9zZWQ9bnVsbCx0aGlzLmRlZ3JlZT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnB0PXQsdGhpcy5pc0Nsb3NlZD0hMSx0aGlzLmRlZ3JlZT0wfWZ1bmN0aW9uIENpKCl7dmFyIHQsZSxuLGk7dGhpcy5xdWFkcmFudFNlZ21lbnRzPUNpLkRFRkFVTFRfUVVBRFJBTlRfU0VHTUVOVFMsdGhpcy5lbmRDYXBTdHlsZT1DaS5DQVBfUk9VTkQsdGhpcy5qb2luU3R5bGU9Q2kuSk9JTl9ST1VORCx0aGlzLm1pdHJlTGltaXQ9Q2kuREVGQVVMVF9NSVRSRV9MSU1JVCx0aGlzLl9pc1NpbmdsZVNpZGVkPSExLHRoaXMuc2ltcGxpZnlGYWN0b3I9Q2kuREVGQVVMVF9TSU1QTElGWV9GQUNUT1IsMD09PWFyZ3VtZW50cy5sZW5ndGh8fCgxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sdGhpcy5zZXRRdWFkcmFudFNlZ21lbnRzKGUpKToyPT09YXJndW1lbnRzLmxlbmd0aD8obj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0sdGhpcy5zZXRRdWFkcmFudFNlZ21lbnRzKG4pLHRoaXMuc2V0RW5kQ2FwU3R5bGUoaSkpOjQ9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM10sdGhpcy5zZXRRdWFkcmFudFNlZ21lbnRzKHQpLHRoaXMuc2V0RW5kQ2FwU3R5bGUoZSksdGhpcy5zZXRKb2luU3R5bGUobiksdGhpcy5zZXRNaXRyZUxpbWl0KGkpKSl9ZnVuY3Rpb24gU2koKXt0aGlzLm1pbkluZGV4PS0xLHRoaXMubWluQ29vcmQ9bnVsbCx0aGlzLm1pbkRlPW51bGwsdGhpcy5vcmllbnRlZERlPW51bGx9ZnVuY3Rpb24gd2koKXt0aGlzLmFycmF5Xz1bXX1mdW5jdGlvbiBMaSgpe3RoaXMuZmluZGVyPW51bGwsdGhpcy5kaXJFZGdlTGlzdD1uZXcgSSx0aGlzLm5vZGVzPW5ldyBJLHRoaXMucmlnaHRNb3N0Q29vcmQ9bnVsbCx0aGlzLmVudj1udWxsLHRoaXMuZmluZGVyPW5ldyBTaX1mdW5jdGlvbiBSaSgpe3RoaXMuaW5wdXRMaW5lPW51bGwsdGhpcy5kaXN0YW5jZVRvbD1udWxsLHRoaXMuaXNEZWxldGVkPW51bGwsdGhpcy5hbmdsZU9yaWVudGF0aW9uPVp0LkNPVU5URVJDTE9DS1dJU0U7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuaW5wdXRMaW5lPXR9ZnVuY3Rpb24gVGkoKXt0aGlzLnB0TGlzdD1udWxsLHRoaXMucHJlY2lzaW9uTW9kZWw9bnVsbCx0aGlzLm1pbmltaW1WZXJ0ZXhEaXN0YW5jZT0wLHRoaXMucHRMaXN0PW5ldyBJfWZ1bmN0aW9uIFBpKCl7dGhpcy5tYXhDdXJ2ZVNlZ21lbnRFcnJvcj0wLHRoaXMuZmlsbGV0QW5nbGVRdWFudHVtPW51bGwsdGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yPTEsdGhpcy5zZWdMaXN0PW51bGwsdGhpcy5kaXN0YW5jZT0wLHRoaXMucHJlY2lzaW9uTW9kZWw9bnVsbCx0aGlzLmJ1ZlBhcmFtcz1udWxsLHRoaXMubGk9bnVsbCx0aGlzLnMwPW51bGwsdGhpcy5zMT1udWxsLHRoaXMuczI9bnVsbCx0aGlzLnNlZzA9bmV3IEp0LHRoaXMuc2VnMT1uZXcgSnQsdGhpcy5vZmZzZXQwPW5ldyBKdCx0aGlzLm9mZnNldDE9bmV3IEp0LHRoaXMuc2lkZT0wLHRoaXMuX2hhc05hcnJvd0NvbmNhdmVBbmdsZT0hMTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5wcmVjaXNpb25Nb2RlbD10LHRoaXMuYnVmUGFyYW1zPWUsdGhpcy5saT1uZXcgV3QsdGhpcy5maWxsZXRBbmdsZVF1YW50dW09TWF0aC5QSS8yL2UuZ2V0UXVhZHJhbnRTZWdtZW50cygpLDg8PWUuZ2V0UXVhZHJhbnRTZWdtZW50cygpJiZlLmdldEpvaW5TdHlsZSgpPT09Q2kuSk9JTl9ST1VORCYmKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcj1QaS5NQVhfQ0xPU0lOR19TRUdfTEVOX0ZBQ1RPUiksdGhpcy5pbml0KG4pfWZ1bmN0aW9uIGJpKCl7dGhpcy5kaXN0YW5jZT0wLHRoaXMucHJlY2lzaW9uTW9kZWw9bnVsbCx0aGlzLmJ1ZlBhcmFtcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLnByZWNpc2lvbk1vZGVsPXQsdGhpcy5idWZQYXJhbXM9ZX1mdW5jdGlvbiBPaSgpe3RoaXMuc3ViZ3JhcGhzPW51bGwsdGhpcy5zZWc9bmV3IEp0LHRoaXMuY2dhPW5ldyBadDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zdWJncmFwaHM9dH1mdW5jdGlvbiBfaSgpe3RoaXMudXB3YXJkU2VnPW51bGwsdGhpcy5sZWZ0RGVwdGg9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy51cHdhcmRTZWc9bmV3IEp0KHQpLHRoaXMubGVmdERlcHRoPWV9ZnVuY3Rpb24gTWkoKXt0aGlzLmlucHV0R2VvbT1udWxsLHRoaXMuZGlzdGFuY2U9bnVsbCx0aGlzLmN1cnZlQnVpbGRlcj1udWxsLHRoaXMuY3VydmVMaXN0PW5ldyBJO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLmlucHV0R2VvbT10LHRoaXMuZGlzdGFuY2U9ZSx0aGlzLmN1cnZlQnVpbGRlcj1ufWZ1bmN0aW9uIERpKCl7dGhpcy5faGFzSW50ZXJzZWN0aW9uPSExLHRoaXMuaGFzUHJvcGVyPSExLHRoaXMuaGFzUHJvcGVySW50ZXJpb3I9ITEsdGhpcy5oYXNJbnRlcmlvcj0hMSx0aGlzLnByb3BlckludGVyc2VjdGlvblBvaW50PW51bGwsdGhpcy5saT1udWxsLHRoaXMuaXNTZWxmSW50ZXJzZWN0aW9uPW51bGwsdGhpcy5udW1JbnRlcnNlY3Rpb25zPTAsdGhpcy5udW1JbnRlcmlvckludGVyc2VjdGlvbnM9MCx0aGlzLm51bVByb3BlckludGVyc2VjdGlvbnM9MDt2YXIgdD1hcmd1bWVudHNbdGhpcy5udW1UZXN0cz0wXTt0aGlzLmxpPXR9ZnVuY3Rpb24gQWkoKXt0aGlzLmJ1ZlBhcmFtcz1udWxsLHRoaXMud29ya2luZ1ByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy53b3JraW5nTm9kZXI9bnVsbCx0aGlzLmdlb21GYWN0PW51bGwsdGhpcy5ncmFwaD1udWxsLHRoaXMuZWRnZUxpc3Q9bmV3IFZuO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmJ1ZlBhcmFtcz10fWZ1bmN0aW9uIEZpKCl7dGhpcy5saT1uZXcgV3QsdGhpcy5zZWdTdHJpbmdzPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2VnU3RyaW5ncz10fWZ1bmN0aW9uIEdpKCl7dGhpcy5saT1udWxsLHRoaXMucHQ9bnVsbCx0aGlzLm9yaWdpbmFsUHQ9bnVsbCx0aGlzLnB0U2NhbGVkPW51bGwsdGhpcy5wMFNjYWxlZD1udWxsLHRoaXMucDFTY2FsZWQ9bnVsbCx0aGlzLnNjYWxlRmFjdG9yPW51bGwsdGhpcy5taW54PW51bGwsdGhpcy5tYXh4PW51bGwsdGhpcy5taW55PW51bGwsdGhpcy5tYXh5PW51bGwsdGhpcy5jb3JuZXI9bmV3IEFycmF5KDQpLmZpbGwobnVsbCksdGhpcy5zYWZlRW52PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO2lmKHRoaXMub3JpZ2luYWxQdD10LHRoaXMucHQ9dCx0aGlzLnNjYWxlRmFjdG9yPWUsdGhpcy5saT1uLGU8PTApdGhyb3cgbmV3IGM7MSE9PWUmJih0aGlzLnB0PW5ldyBkKHRoaXMuc2NhbGUodC54KSx0aGlzLnNjYWxlKHQueSkpLHRoaXMucDBTY2FsZWQ9bmV3IGQsdGhpcy5wMVNjYWxlZD1uZXcgZCksdGhpcy5pbml0Q29ybmVycyh0aGlzLnB0KX1mdW5jdGlvbiBxaSgpe3RoaXMudGVtcEVudjE9bmV3IEMsdGhpcy5zZWxlY3RlZFNlZ21lbnQ9bmV3IEp0fWZ1bmN0aW9uIEJpKCl7dGhpcy5pbmRleD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmluZGV4PXR9ZnVuY3Rpb24gemkoKXtxaS5hcHBseSh0aGlzKSx0aGlzLmhvdFBpeGVsPW51bGwsdGhpcy5wYXJlbnRFZGdlPW51bGwsdGhpcy5ob3RQaXhlbFZlcnRleEluZGV4PW51bGwsdGhpcy5faXNOb2RlQWRkZWQ9ITE7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuaG90UGl4ZWw9dCx0aGlzLnBhcmVudEVkZ2U9ZSx0aGlzLmhvdFBpeGVsVmVydGV4SW5kZXg9bn1mdW5jdGlvbiBWaSgpe3RoaXMubGk9bnVsbCx0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9ucz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmxpPXQsdGhpcy5pbnRlcmlvckludGVyc2VjdGlvbnM9bmV3IEl9ZnVuY3Rpb24ga2koKXt0aGlzLnBtPW51bGwsdGhpcy5saT1udWxsLHRoaXMuc2NhbGVGYWN0b3I9bnVsbCx0aGlzLm5vZGVyPW51bGwsdGhpcy5wb2ludFNuYXBwZXI9bnVsbCx0aGlzLm5vZGVkU2VnU3RyaW5ncz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnBtPXQsdGhpcy5saT1uZXcgV3QsdGhpcy5saS5zZXRQcmVjaXNpb25Nb2RlbCh0KSx0aGlzLnNjYWxlRmFjdG9yPXQuZ2V0U2NhbGUoKX1mdW5jdGlvbiBZaSgpe3ZhciB0LGU7dGhpcy5hcmdHZW9tPW51bGwsdGhpcy5kaXN0YW5jZT1udWxsLHRoaXMuYnVmUGFyYW1zPW5ldyBDaSx0aGlzLnJlc3VsdEdlb21ldHJ5PW51bGwsdGhpcy5zYXZlRXhjZXB0aW9uPW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLHRoaXMuYXJnR2VvbT1lKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuYXJnR2VvbT10LHRoaXMuYnVmUGFyYW1zPWUpfWZ1bmN0aW9uIFVpKCl7dGhpcy5jb21wcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNvbXBzPXR9ZnVuY3Rpb24gWGkoKXt2YXIgdCxlLG47dGhpcy5jb21wb25lbnQ9bnVsbCx0aGlzLnNlZ0luZGV4PW51bGwsdGhpcy5wdD1udWxsLDI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxYaS5jYWxsKHRoaXMsZSxYaS5JTlNJREVfQVJFQSxuKSk6Mz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLmNvbXBvbmVudD10LHRoaXMuc2VnSW5kZXg9ZSx0aGlzLnB0PW4pfWZ1bmN0aW9uIEhpKCl7dGhpcy5wdHM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wdHM9dH1mdW5jdGlvbiBXaSgpe3RoaXMubG9jYXRpb25zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubG9jYXRpb25zPXR9ZnVuY3Rpb24gamkoKXt2YXIgdCxlLG47dGhpcy5nZW9tPW51bGwsdGhpcy50ZXJtaW5hdGVEaXN0YW5jZT0wLHRoaXMucHRMb2NhdG9yPW5ldyBkZSx0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb249bnVsbCx0aGlzLm1pbkRpc3RhbmNlPWcuTUFYX1ZBTFVFLDI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxqaS5jYWxsKHRoaXMsZSxuLDApKTozPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLHRoaXMuZ2VvbT1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0aGlzLmdlb21bMF09dCx0aGlzLmdlb21bMV09ZSx0aGlzLnRlcm1pbmF0ZURpc3RhbmNlPW4pfWZ1bmN0aW9uIEtpKCl7dGhpcy5mYWN0b3J5PW51bGwsdGhpcy5kaXJlY3RlZEVkZ2VzPW5ldyBJLHRoaXMuY29vcmRpbmF0ZXM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5mYWN0b3J5PXR9ZnVuY3Rpb24gWmkoKXt0aGlzLl9pc01hcmtlZD0hMSx0aGlzLl9pc1Zpc2l0ZWQ9ITEsdGhpcy5kYXRhPW51bGx9ZnVuY3Rpb24gSmkoKXtaaS5hcHBseSh0aGlzKSx0aGlzLnBhcmVudEVkZ2U9bnVsbCx0aGlzLmZyb209bnVsbCx0aGlzLnRvPW51bGwsdGhpcy5wMD1udWxsLHRoaXMucDE9bnVsbCx0aGlzLnN5bT1udWxsLHRoaXMuZWRnZURpcmVjdGlvbj1udWxsLHRoaXMucXVhZHJhbnQ9bnVsbCx0aGlzLmFuZ2xlPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3RoaXMuZnJvbT10LHRoaXMudG89ZSx0aGlzLmVkZ2VEaXJlY3Rpb249aSx0aGlzLnAwPXQuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMucDE9bjt0PXRoaXMucDEueC10aGlzLnAwLngsbj10aGlzLnAxLnktdGhpcy5wMC55O3RoaXMucXVhZHJhbnQ9R2UucXVhZHJhbnQodCxuKSx0aGlzLmFuZ2xlPU1hdGguYXRhbjIobix0KX1mdW5jdGlvbiBRaSgpe0ppLmNhbGwodGhpcyxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pfWZ1bmN0aW9uICRpKCl7dmFyIHQsZTtaaS5hcHBseSh0aGlzKSx0aGlzLmRpckVkZ2U9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aHx8Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLnNldERpcmVjdGVkRWRnZXModCxlKSl9ZnVuY3Rpb24gdHIoKXt0aGlzLm91dEVkZ2VzPW5ldyBJLHRoaXMuc29ydGVkPSExfWZ1bmN0aW9uIGVyKCl7dmFyIHQsZTtaaS5hcHBseSh0aGlzKSx0aGlzLnB0PW51bGwsdGhpcy5kZVN0YXI9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sZXIuY2FsbCh0aGlzLGUsbmV3IHRyKSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLnB0PXQsdGhpcy5kZVN0YXI9ZSl9ZnVuY3Rpb24gbnIoKXskaS5hcHBseSh0aGlzKSx0aGlzLmxpbmU9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5saW5lPXR9ZnVuY3Rpb24gaXIoKXt0aGlzLm5vZGVNYXA9bmV3IHJ0fWZ1bmN0aW9uIHJyKCl7dGhpcy5lZGdlcz1uZXcgUSx0aGlzLmRpckVkZ2VzPW5ldyBRLHRoaXMubm9kZU1hcD1uZXcgaXJ9ZnVuY3Rpb24gc3IoKXtyci5hcHBseSh0aGlzKX1mdW5jdGlvbiBvcigpe3RoaXMuZ3JhcGg9bmV3IHNyLHRoaXMubWVyZ2VkTGluZVN0cmluZ3M9bnVsbCx0aGlzLmZhY3Rvcnk9bnVsbCx0aGlzLmVkZ2VTdHJpbmdzPW51bGx9ZnVuY3Rpb24gYXIoKXt0aGlzLmVkZ2VSaW5nPW51bGwsdGhpcy5uZXh0PW51bGwsdGhpcy5sYWJlbD0tMSxKaS5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdKX1mdW5jdGlvbiB1cigpeyRpLmFwcGx5KHRoaXMpLHRoaXMubGluZT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmxpbmU9dH1mdW5jdGlvbiBscigpe3RoaXMuZmFjdG9yeT1udWxsLHRoaXMuZGVMaXN0PW5ldyBJLHRoaXMubG93ZXN0RWRnZT1udWxsLHRoaXMucmluZz1udWxsLHRoaXMucmluZ1B0cz1udWxsLHRoaXMuaG9sZXM9bnVsbCx0aGlzLnNoZWxsPW51bGwsdGhpcy5faXNIb2xlPW51bGwsdGhpcy5faXNQcm9jZXNzZWQ9ITEsdGhpcy5faXNJbmNsdWRlZFNldD0hMSx0aGlzLl9pc0luY2x1ZGVkPSExO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmZhY3Rvcnk9dH1mdW5jdGlvbiBocigpe31mdW5jdGlvbiBjcigpe3JyLmFwcGx5KHRoaXMpLHRoaXMuZmFjdG9yeT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmZhY3Rvcnk9dH1mdW5jdGlvbiBmcigpe3ZhciB0O3RoaXMubGluZVN0cmluZ0FkZGVyPW5ldyBncih0aGlzKSx0aGlzLmdyYXBoPW51bGwsdGhpcy5kYW5nbGVzPW5ldyBJLHRoaXMuY3V0RWRnZXM9bmV3IEksdGhpcy5pbnZhbGlkUmluZ0xpbmVzPW5ldyBJLHRoaXMuaG9sZUxpc3Q9bnVsbCx0aGlzLnNoZWxsTGlzdD1udWxsLHRoaXMucG9seUxpc3Q9bnVsbCx0aGlzLmlzQ2hlY2tpbmdSaW5nc1ZhbGlkPSEwLHRoaXMuZXh0cmFjdE9ubHlQb2x5Z29uYWw9bnVsbCx0aGlzLmdlb21GYWN0b3J5PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGg/ZnIuY2FsbCh0aGlzLCExKToxPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLHRoaXMuZXh0cmFjdE9ubHlQb2x5Z29uYWw9dCl9ZnVuY3Rpb24gZ3IoKXt0aGlzLnA9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wPXR9ZnVuY3Rpb24gZHIoKXt9ZnVuY3Rpb24gcHIoKXt2YXIgdDt0aGlzLmVkZ2VFbmRzPW5ldyBJLDE9PT1hcmd1bWVudHMubGVuZ3RoPyh0PWFyZ3VtZW50c1swXSxwci5jYWxsKHRoaXMsbnVsbCx0KSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1sxXSxzbi5jYWxsKHRoaXMsdC5nZXRFZGdlKCksdC5nZXRDb29yZGluYXRlKCksdC5nZXREaXJlY3RlZENvb3JkaW5hdGUoKSxuZXcgSmUodC5nZXRMYWJlbCgpKSksdGhpcy5pbnNlcnQodCkpfWZ1bmN0aW9uIG1yKCl7ZG4uYXBwbHkodGhpcyl9ZnVuY3Rpb24geXIoKXtubi5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSl9ZnVuY3Rpb24gdnIoKXthbi5hcHBseSh0aGlzKX1mdW5jdGlvbiB4cigpe3RoaXMubGk9bmV3IFd0LHRoaXMucHRMb2NhdG9yPW5ldyBkZSx0aGlzLmFyZz1udWxsLHRoaXMubm9kZXM9bmV3IHJuKG5ldyB2ciksdGhpcy5pbT1udWxsLHRoaXMuaXNvbGF0ZWRFZGdlcz1uZXcgSSx0aGlzLmludmFsaWRQb2ludD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmFyZz10fWZ1bmN0aW9uIEVyKCl7dGhpcy5yZWN0RW52PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucmVjdEVudj10LmdldEVudmVsb3BlSW50ZXJuYWwoKX1mdW5jdGlvbiBJcigpe3RoaXMubGk9bmV3IFd0LHRoaXMucmVjdEVudj1udWxsLHRoaXMuZGlhZ1VwMD1udWxsLHRoaXMuZGlhZ1VwMT1udWxsLHRoaXMuZGlhZ0Rvd24wPW51bGwsdGhpcy5kaWFnRG93bjE9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yZWN0RW52PXQsdGhpcy5kaWFnVXAwPW5ldyBkKHQuZ2V0TWluWCgpLHQuZ2V0TWluWSgpKSx0aGlzLmRpYWdVcDE9bmV3IGQodC5nZXRNYXhYKCksdC5nZXRNYXhZKCkpLHRoaXMuZGlhZ0Rvd24wPW5ldyBkKHQuZ2V0TWluWCgpLHQuZ2V0TWF4WSgpKSx0aGlzLmRpYWdEb3duMT1uZXcgZCh0LmdldE1heFgoKSx0LmdldE1pblkoKSl9ZnVuY3Rpb24gTnIoKXt0aGlzLl9pc0RvbmU9ITF9ZnVuY3Rpb24gQ3IoKXt0aGlzLnJlY3RhbmdsZT1udWxsLHRoaXMucmVjdEVudj1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnJlY3RhbmdsZT10LHRoaXMucmVjdEVudj10LmdldEVudmVsb3BlSW50ZXJuYWwoKX1mdW5jdGlvbiBTcigpe05yLmFwcGx5KHRoaXMpLHRoaXMucmVjdEVudj1udWxsLHRoaXMuX2ludGVyc2VjdHM9ITE7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucmVjdEVudj10fWZ1bmN0aW9uIHdyKCl7TnIuYXBwbHkodGhpcyksdGhpcy5yZWN0U2VxPW51bGwsdGhpcy5yZWN0RW52PW51bGwsdGhpcy5fY29udGFpbnNQb2ludD0hMTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yZWN0U2VxPXQuZ2V0RXh0ZXJpb3JSaW5nKCkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksdGhpcy5yZWN0RW52PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpfWZ1bmN0aW9uIExyKCl7TnIuYXBwbHkodGhpcyksdGhpcy5yZWN0RW52PW51bGwsdGhpcy5yZWN0SW50ZXJzZWN0b3I9bnVsbCx0aGlzLmhhc0ludGVyc2VjdGlvbj0hMSx0aGlzLnAwPW5ldyBkLHRoaXMucDE9bmV3IGQ7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucmVjdEVudj10LmdldEVudmVsb3BlSW50ZXJuYWwoKSx0aGlzLnJlY3RJbnRlcnNlY3Rvcj1uZXcgSXIodGhpcy5yZWN0RW52KX1mdW5jdGlvbiBScigpe3ZhciB0LGUsbjt0aGlzLl9yZWxhdGU9bnVsbCwyPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sQm4uY2FsbCh0aGlzLGUsbiksdGhpcy5fcmVsYXRlPW5ldyB4cih0aGlzLmFyZykpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sQm4uY2FsbCh0aGlzLHQsZSxuKSx0aGlzLl9yZWxhdGU9bmV3IHhyKHRoaXMuYXJnKSl9ZnVuY3Rpb24gVHIoKXt0aGlzLmdlb21GYWN0b3J5PW51bGwsdGhpcy5za2lwRW1wdHk9ITEsdGhpcy5pbnB1dEdlb21zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZ2VvbUZhY3Rvcnk9VHIuZXh0cmFjdEZhY3RvcnkodCksdGhpcy5pbnB1dEdlb21zPXR9ZnVuY3Rpb24gUHIoKXt0aGlzLnBvaW50R2VvbT1udWxsLHRoaXMub3RoZXJHZW9tPW51bGwsdGhpcy5nZW9tRmFjdD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLnBvaW50R2VvbT10LHRoaXMub3RoZXJHZW9tPWUsdGhpcy5nZW9tRmFjdD1lLmdldEZhY3RvcnkoKX1mdW5jdGlvbiBicigpe3RoaXMuc29ydEluZGV4PS0xLHRoaXMuY29tcHM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5zb3J0SW5kZXg9dCx0aGlzLmNvbXBzPWV9ZnVuY3Rpb24gT3IoKXt0aGlzLmlucHV0UG9seXM9bnVsbCx0aGlzLmdlb21GYWN0b3J5PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuaW5wdXRQb2x5cz10LG51bGw9PT10aGlzLmlucHV0UG9seXMmJih0aGlzLmlucHV0UG9seXM9bmV3IEkpfWZ1bmN0aW9uIF9yKCl7dmFyIHQsZTt0aGlzLnBvbHlnb25zPW5ldyBJLHRoaXMubGluZXM9bmV3IEksdGhpcy5wb2ludHM9bmV3IEksdGhpcy5nZW9tRmFjdD1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoP1IoYXJndW1lbnRzWzBdLG0pPyh0PWFyZ3VtZW50c1swXSx0aGlzLmV4dHJhY3QodCkpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgQiYmKGU9YXJndW1lbnRzWzBdLHRoaXMuZXh0cmFjdChlKSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLmdlb21GYWN0PWUsdGhpcy5leHRyYWN0KHQpKX1mdW5jdGlvbiBNcigpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PW5ldyBZdCx0aGlzLmdlb21HcmFwaD1udWxsLHRoaXMuZGlzY29ubmVjdGVkUmluZ2Nvb3JkPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZ2VvbUdyYXBoPXR9ZnVuY3Rpb24gRHIoKXt0aGlzLml0ZW1zPW5ldyBJLHRoaXMuc3Vibm9kZT1bbnVsbCxudWxsXX1mdW5jdGlvbiBBcigpe3ZhciB0LGU7dGhpcy5taW49bnVsbCx0aGlzLm1heD1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLm1pbj0wLHRoaXMubWF4PTApOjE9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSx0aGlzLmluaXQoZS5taW4sZS5tYXgpKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuaW5pdCh0LGUpKX1mdW5jdGlvbiBGcigpe3RoaXMucHQ9MCx0aGlzLmxldmVsPTAsdGhpcy5pbnRlcnZhbD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNvbXB1dGVLZXkodCl9ZnVuY3Rpb24gR3IoKXtEci5hcHBseSh0aGlzKSx0aGlzLmludGVydmFsPW51bGwsdGhpcy5jZW50cmU9bnVsbCx0aGlzLmxldmVsPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuaW50ZXJ2YWw9dCx0aGlzLmxldmVsPWUsdGhpcy5jZW50cmU9KHQuZ2V0TWluKCkrdC5nZXRNYXgoKSkvMn1mdW5jdGlvbiBxcigpe0RyLmFwcGx5KHRoaXMpfWZ1bmN0aW9uIEJyKCl7dGhpcy5yb290PW51bGwsdGhpcy5taW5FeHRlbnQ9MSx0aGlzLnJvb3Q9bmV3IHFyfWZ1bmN0aW9uIHpyKCl7fWZ1bmN0aW9uIFZyKCl7dGhpcy5yaW5nPW51bGwsdGhpcy50cmVlPW51bGwsdGhpcy5jcm9zc2luZ3M9MCx0aGlzLmludGVydmFsPW5ldyBBcjt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yaW5nPXQsdGhpcy5idWlsZEluZGV4KCl9ZnVuY3Rpb24ga3IoKXtxaS5hcHBseSh0aGlzKSx0aGlzLm1jcD1udWxsLHRoaXMucD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLm1jcD10LHRoaXMucD1lfWZ1bmN0aW9uIFlyKCl7dGhpcy5ub2Rlcz1uZXcgcm4obmV3IHZyKX1mdW5jdGlvbiBVcigpe3RoaXMubGk9bmV3IFd0LHRoaXMuZ2VvbUdyYXBoPW51bGwsdGhpcy5ub2RlR3JhcGg9bmV3IFlyLHRoaXMuaW52YWxpZFBvaW50PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZ2VvbUdyYXBoPXR9ZnVuY3Rpb24gWHIoKXt0aGlzLmdyYXBoPW51bGwsdGhpcy5yaW5ncz1uZXcgSSx0aGlzLnRvdGFsRW52PW5ldyBDLHRoaXMuaW5kZXg9bnVsbCx0aGlzLm5lc3RlZFB0PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZ3JhcGg9dH1mdW5jdGlvbiBIcigpe3ZhciB0LGU7dGhpcy5lcnJvclR5cGU9bnVsbCx0aGlzLnB0PW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLEhyLmNhbGwodGhpcyxlLG51bGwpKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuZXJyb3JUeXBlPXQsbnVsbCE9PWUmJih0aGlzLnB0PWUuY29weSgpKSl9ZnVuY3Rpb24gV3IoKXt0aGlzLnBhcmVudEdlb21ldHJ5PW51bGwsdGhpcy5pc1NlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkPSExLHRoaXMudmFsaWRFcnI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wYXJlbnRHZW9tZXRyeT10fWZ1bmN0aW9uIGpyKCl7T3QuQ29vcmRpbmF0ZU9wZXJhdGlvbi5hcHBseSh0aGlzKSx0aGlzLnRhcmdldFBNPW51bGwsdGhpcy5yZW1vdmVDb2xsYXBzZWQ9ITA7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMudGFyZ2V0UE09dCx0aGlzLnJlbW92ZUNvbGxhcHNlZD1lfWZ1bmN0aW9uIEtyKCl7dGhpcy50YXJnZXRQTT1udWxsLHRoaXMucmVtb3ZlQ29sbGFwc2VkPSEwLHRoaXMuY2hhbmdlUHJlY2lzaW9uTW9kZWw9ITEsdGhpcy5pc1BvaW50d2lzZT0hMTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy50YXJnZXRQTT10fWZ1bmN0aW9uIFpyKCl7dGhpcy5wdHM9bnVsbCx0aGlzLnVzZVB0PW51bGwsdGhpcy5kaXN0YW5jZVRvbGVyYW5jZT1udWxsLHRoaXMuc2VnPW5ldyBKdDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wdHM9dH1mdW5jdGlvbiBKcigpe3RoaXMuaW5wdXRHZW9tPW51bGwsdGhpcy5kaXN0YW5jZVRvbGVyYW5jZT1udWxsLHRoaXMuaXNFbnN1cmVWYWxpZFRvcG9sb2d5PSEwO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmlucHV0R2VvbT10fWZ1bmN0aW9uIFFyKCl7c2UuYXBwbHkodGhpcyksdGhpcy5pc0Vuc3VyZVZhbGlkVG9wb2xvZ3k9ITAsdGhpcy5kaXN0YW5jZVRvbGVyYW5jZT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmlzRW5zdXJlVmFsaWRUb3BvbG9neT10LHRoaXMuZGlzdGFuY2VUb2xlcmFuY2U9ZX1mdW5jdGlvbiAkcigpe3ZhciB0LGUsbixpO3RoaXMucGFyZW50PW51bGwsdGhpcy5pbmRleD1udWxsLDI9PT1hcmd1bWVudHMubGVuZ3RoPyhuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSwkci5jYWxsKHRoaXMsbixpLG51bGwsLTEpKTo0PT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdLEp0LmNhbGwodGhpcyx0LGUpLHRoaXMucGFyZW50PW4sdGhpcy5pbmRleD1pKX1mdW5jdGlvbiB0cygpe3ZhciB0LGU7dGhpcy5wYXJlbnRMaW5lPW51bGwsdGhpcy5zZWdzPW51bGwsdGhpcy5yZXN1bHRTZWdzPW5ldyBJLHRoaXMubWluaW11bVNpemU9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sdHMuY2FsbCh0aGlzLGUsMikpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5wYXJlbnRMaW5lPXQsdGhpcy5taW5pbXVtU2l6ZT1lLHRoaXMuaW5pdCgpKX1mdW5jdGlvbiBlcygpe3RoaXMuaW5kZXg9bmV3IGdpfWZ1bmN0aW9uIG5zKCl7dGhpcy5xdWVyeVNlZz1udWxsLHRoaXMuaXRlbXM9bmV3IEk7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucXVlcnlTZWc9dH1mdW5jdGlvbiBpcygpe3RoaXMubGk9bmV3IFd0LHRoaXMuaW5wdXRJbmRleD1uZXcgZXMsdGhpcy5vdXRwdXRJbmRleD1uZXcgZXMsdGhpcy5saW5lPW51bGwsdGhpcy5saW5lUHRzPW51bGw7dmFyIHQ9YXJndW1lbnRzW3RoaXMuZGlzdGFuY2VUb2xlcmFuY2U9MF0sZT1hcmd1bWVudHNbMV07dGhpcy5pbnB1dEluZGV4PXQsdGhpcy5vdXRwdXRJbmRleD1lfWZ1bmN0aW9uIHJzKCl7dGhpcy5pbnB1dEluZGV4PW5ldyBlcyx0aGlzLm91dHB1dEluZGV4PW5ldyBlcyx0aGlzLmRpc3RhbmNlVG9sZXJhbmNlPTB9ZnVuY3Rpb24gc3MoKXt0aGlzLmlucHV0R2VvbT1udWxsLHRoaXMubGluZVNpbXBsaWZpZXI9bmV3IHJzLHRoaXMubGluZXN0cmluZ01hcD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmlucHV0R2VvbT10fWZ1bmN0aW9uIG9zKCl7c2UuYXBwbHkodGhpcyksdGhpcy5saW5lc3RyaW5nTWFwPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubGluZXN0cmluZ01hcD10fWZ1bmN0aW9uIGFzKCl7dGhpcy50cHM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy50cHM9dH1mdW5jdGlvbiB1cygpe3RoaXMuc2VnPW51bGwsdGhpcy5zZWdMZW49bnVsbCx0aGlzLnNwbGl0UHQ9bnVsbDt2YXIgdD1hcmd1bWVudHNbdGhpcy5taW5pbXVtTGVuPTBdO3RoaXMuc2VnPXQsdGhpcy5zZWdMZW49dC5nZXRMZW5ndGgoKX1mdW5jdGlvbiBscygpe31mdW5jdGlvbiBocygpe31mdW5jdGlvbiBjcygpe31mdW5jdGlvbiBmcygpe3ZhciB0LGUsbjt0aGlzLnA9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD8odD1hcmd1bWVudHNbMF0sdGhpcy5wPW5ldyBkKHQpKToyPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sdGhpcy5wPW5ldyBkKGUsbikpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sdGhpcy5wPW5ldyBkKHQsZSxuKSl9ZnVuY3Rpb24gZ3MoKXt0aGlzLl9pc09uQ29uc3RyYWludD1udWxsLHRoaXMuY29uc3RyYWludD1udWxsLGZzLmNhbGwodGhpcyxhcmd1bWVudHNbMF0pfWZ1bmN0aW9uIGRzKCl7dGhpcy5fcm90PW51bGwsdGhpcy52ZXJ0ZXg9bnVsbCx0aGlzLm5leHQ9bnVsbCx0aGlzLmRhdGE9bnVsbH1mdW5jdGlvbiBwcygpe3RoaXMuc3ViZGl2PW51bGwsdGhpcy5pc1VzaW5nVG9sZXJhbmNlPSExO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnN1YmRpdj10LHRoaXMuaXNVc2luZ1RvbGVyYW5jZT0wPHQuZ2V0VG9sZXJhbmNlKCl9ZnVuY3Rpb24gbXMoKXt9ZnVuY3Rpb24geXMoKXt0aGlzLnN1YmRpdj1udWxsLHRoaXMubGFzdEVkZ2U9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zdWJkaXY9dCx0aGlzLmluaXQoKX1mdW5jdGlvbiB2cygpe3ZhciB0LGU7dGhpcy5zZWc9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aD9cInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdP3AuY2FsbCh0aGlzLGFyZ3VtZW50c1swXSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBKdCYmKHAuY2FsbCh0aGlzLFwiTG9jYXRlIGZhaWxlZCB0byBjb252ZXJnZSAoYXQgZWRnZTogXCIrKGU9YXJndW1lbnRzWzBdKStcIikuICBQb3NzaWJsZSBjYXVzZXMgaW5jbHVkZSBpbnZhbGlkIFN1YmRpdmlzaW9uIHRvcG9sb2d5IG9yIHZlcnkgY2xvc2Ugc2l0ZXNcIiksdGhpcy5zZWc9bmV3IEp0KGUpKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHAuY2FsbCh0aGlzLHZzLm1zZ1dpdGhTcGF0aWFsKHQsZSkpLHRoaXMuc2VnPW5ldyBKdChlKSl9ZnVuY3Rpb24geHMoKXt9ZnVuY3Rpb24gRXMoKXt0aGlzLnZpc2l0ZWRLZXk9MCx0aGlzLnF1YWRFZGdlcz1uZXcgSSx0aGlzLnN0YXJ0aW5nRWRnZT1udWxsLHRoaXMudG9sZXJhbmNlPW51bGwsdGhpcy5lZGdlQ29pbmNpZGVuY2VUb2xlcmFuY2U9bnVsbCx0aGlzLmZyYW1lVmVydGV4PW5ldyBBcnJheSgzKS5maWxsKG51bGwpLHRoaXMuZnJhbWVFbnY9bnVsbCx0aGlzLmxvY2F0b3I9bnVsbCx0aGlzLnNlZz1uZXcgSnQsdGhpcy50cmlFZGdlcz1uZXcgQXJyYXkoMykuZmlsbChudWxsKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy50b2xlcmFuY2U9ZSx0aGlzLmVkZ2VDb2luY2lkZW5jZVRvbGVyYW5jZT1lL0VzLkVER0VfQ09JTkNJREVOQ0VfVE9MX0ZBQ1RPUix0aGlzLmNyZWF0ZUZyYW1lKHQpLHRoaXMuc3RhcnRpbmdFZGdlPXRoaXMuaW5pdFN1YmRpdigpLHRoaXMubG9jYXRvcj1uZXcgeXModGhpcyl9ZnVuY3Rpb24gSXMoKXt9ZnVuY3Rpb24gTnMoKXt0aGlzLnRyaUxpc3Q9bmV3IEl9ZnVuY3Rpb24gQ3MoKXt0aGlzLnRyaUxpc3Q9bmV3IEl9ZnVuY3Rpb24gU3MoKXt0aGlzLmNvb3JkTGlzdD1uZXcgTix0aGlzLnRyaUNvb3Jkcz1uZXcgSX1mdW5jdGlvbiB3cygpe3ZhciB0LGUsbixpLHIscyxvLGEsdTt0aGlzLmxzPW51bGwsdGhpcy5kYXRhPW51bGwsMj09PWFyZ3VtZW50cy5sZW5ndGg/KHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMubHM9bmV3IEp0KHQsZSkpOjM9PT1hcmd1bWVudHMubGVuZ3RoPyh0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLmxzPW5ldyBKdCh0LGUpLHRoaXMuZGF0YT1uKTo2PT09YXJndW1lbnRzLmxlbmd0aD8oaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sbz1hcmd1bWVudHNbM10sYT1hcmd1bWVudHNbNF0sdT1hcmd1bWVudHNbNV0sd3MuY2FsbCh0aGlzLG5ldyBkKGkscixzKSxuZXcgZChvLGEsdSkpKTo3PT09YXJndW1lbnRzLmxlbmd0aCYmKG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLHM9YXJndW1lbnRzWzNdLG89YXJndW1lbnRzWzRdLGE9YXJndW1lbnRzWzVdLHU9YXJndW1lbnRzWzZdLHdzLmNhbGwodGhpcyxuZXcgZChuLGksciksbmV3IGQocyxvLGEpLHUpKX1mdW5jdGlvbiBMcygpe31mdW5jdGlvbiBScygpe3ZhciB0LGUsbjt0aGlzLnA9bnVsbCx0aGlzLmRhdGE9bnVsbCx0aGlzLmxlZnQ9bnVsbCx0aGlzLnJpZ2h0PW51bGwsdGhpcy5jb3VudD1udWxsLDI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSx0aGlzLnA9bmV3IGQoZSksdGhpcy5sZWZ0PW51bGwsdGhpcy5yaWdodD1udWxsLHRoaXMuY291bnQ9MSx0aGlzLmRhdGE9bik6Mz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLnA9bmV3IGQodCxlKSx0aGlzLmxlZnQ9bnVsbCx0aGlzLnJpZ2h0PW51bGwsdGhpcy5jb3VudD0xLHRoaXMuZGF0YT1uKX1mdW5jdGlvbiBUcygpe3ZhciB0O3RoaXMucm9vdD1udWxsLHRoaXMubnVtYmVyT2ZOb2Rlcz1udWxsLHRoaXMudG9sZXJhbmNlPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGg/VHMuY2FsbCh0aGlzLDApOjE9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sdGhpcy50b2xlcmFuY2U9dCl9ZnVuY3Rpb24gUHMoKXt0aGlzLnRvbGVyYW5jZT1udWxsLHRoaXMubWF0Y2hOb2RlPW51bGwsdGhpcy5tYXRjaERpc3Q9MCx0aGlzLnA9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5wPXQsdGhpcy50b2xlcmFuY2U9ZX1mdW5jdGlvbiBicygpe3RoaXMuaW5pdGlhbFZlcnRpY2VzPW51bGwsdGhpcy5zZWdWZXJ0aWNlcz1udWxsLHRoaXMuc2VnbWVudHM9bmV3IEksdGhpcy5zdWJkaXY9bnVsbCx0aGlzLmluY0RlbD1udWxsLHRoaXMuY29udmV4SHVsbD1udWxsLHRoaXMuc3BsaXRGaW5kZXI9bmV3IGhzLHRoaXMua2R0PW51bGwsdGhpcy52ZXJ0ZXhGYWN0b3J5PW51bGwsdGhpcy5jb21wdXRlQXJlYUVudj1udWxsLHRoaXMuc3BsaXRQdD1udWxsLHRoaXMudG9sZXJhbmNlPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuaW5pdGlhbFZlcnRpY2VzPW5ldyBJKHQpLHRoaXMudG9sZXJhbmNlPWUsdGhpcy5rZHQ9bmV3IFRzKGUpfWZ1bmN0aW9uIE9zKCl7dGhpcy5zaXRlQ29vcmRzPW51bGwsdGhpcy50b2xlcmFuY2U9MCx0aGlzLnN1YmRpdj1udWxsfWZ1bmN0aW9uIF9zKCl7dGhpcy5zaXRlQ29vcmRzPW51bGwsdGhpcy5jb25zdHJhaW50TGluZXM9bnVsbCx0aGlzLnRvbGVyYW5jZT0wLHRoaXMuc3ViZGl2PW51bGwsdGhpcy5jb25zdHJhaW50VmVydGV4TWFwPW5ldyBydH1mdW5jdGlvbiBNcygpe3RoaXMuc2l0ZUNvb3Jkcz1udWxsLHRoaXMudG9sZXJhbmNlPTAsdGhpcy5zdWJkaXY9bnVsbCx0aGlzLmNsaXBFbnY9bnVsbCx0aGlzLmRpYWdyYW1FbnY9bnVsbH1mdW5jdGlvbiBEcygpe31BcnJheS5wcm90b3R5cGUuZmlsbHx8KEFycmF5LnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1PYmplY3QodGhpcyksbj1wYXJzZUludChlLmxlbmd0aCwxMCksaT1wYXJzZUludChhcmd1bWVudHNbMV0sMTApfHwwLHI9aTwwP01hdGgubWF4KG4raSwwKTpNYXRoLm1pbihpLG4pLGk9YXJndW1lbnRzWzJdLGk9dm9pZCAwPT09aT9uOnBhcnNlSW50KGksMTApfHwwLHM9aTwwP01hdGgubWF4KG4raSwwKTpNYXRoLm1pbihpLG4pO3I8cztyKyspZVtyXT10O3JldHVybiBlfSksTnVtYmVyLmlzRmluaXRlPU51bWJlci5pc0Zpbml0ZXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJmlzRmluaXRlKHQpfSxOdW1iZXIuaXNJbnRlZ2VyPU51bWJlci5pc0ludGVnZXJ8fGZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZpc0Zpbml0ZSh0KSYmTWF0aC5mbG9vcih0KT09PXR9LE51bWJlci5wYXJzZUZsb2F0PU51bWJlci5wYXJzZUZsb2F0fHxwYXJzZUZsb2F0LE51bWJlci5pc05hTj1OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKHQpe3JldHVybiB0IT10fSxNYXRoLnRydW5jPU1hdGgudHJ1bmN8fGZ1bmN0aW9uKHQpe3JldHVybiB0PDA/TWF0aC5jZWlsKHQpOk1hdGguZmxvb3IodCl9LGUobi5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG59fSksbi5lcXVhbHNXaXRoVG9sZXJhbmNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTWF0aC5hYnModC1lKTw9bn0sZy5pc05hTj1mdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyLmlzTmFOKHQpfSxnLmRvdWJsZVRvTG9uZ0JpdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGcubG9uZ0JpdHNUb0RvdWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdH0sZy5pc0luZmluaXRlPWZ1bmN0aW9uKHQpe3JldHVybiFOdW1iZXIuaXNGaW5pdGUodCl9LGcuTUFYX1ZBTFVFPU51bWJlci5NQVhfVkFMVUUsYSh1LHApLGUodS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHV9fSksZShsLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbH19KSxsLnNob3VsZE5ldmVyUmVhY2hIZXJlPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpbC5zaG91bGROZXZlclJlYWNoSGVyZShudWxsKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhyb3cgbmV3IHUoXCJTaG91bGQgbmV2ZXIgcmVhY2ggaGVyZVwiKyhudWxsIT09dD9cIjogXCIrdDpcIlwiKSl9fSxsLmlzVHJ1ZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWwuaXNUcnVlKGFyZ3VtZW50c1swXSxudWxsKTtlbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMV07aWYoIWFyZ3VtZW50c1swXSl0aHJvdyBudWxsPT09dD9uZXcgdTpuZXcgdSh0KX19LGwuZXF1YWxzPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpbC5lcXVhbHMoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxudWxsKTtlbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07aWYoIWUuZXF1YWxzKHQpKXRocm93IG5ldyB1KFwiRXhwZWN0ZWQgXCIrdCtcIiBidXQgZW5jb3VudGVyZWQgXCIrZSsobnVsbCE9PW4/XCI6IFwiK246XCJcIikpfX0sZShkLnByb3RvdHlwZSx7c2V0T3JkaW5hdGU6ZnVuY3Rpb24odCxlKXtzd2l0Y2godCl7Y2FzZSBkLlg6dGhpcy54PWU7YnJlYWs7Y2FzZSBkLlk6dGhpcy55PWU7YnJlYWs7Y2FzZSBkLlo6dGhpcy56PWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgY319LGVxdWFsczJEOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy54PT09dC54JiZ0aGlzLnk9PT10Lnl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXTtyZXR1cm4hIW4uZXF1YWxzV2l0aFRvbGVyYW5jZSh0aGlzLngsZS54LHQpJiYhIW4uZXF1YWxzV2l0aFRvbGVyYW5jZSh0aGlzLnksZS55LHQpfX0sZ2V0T3JkaW5hdGU6ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgZC5YOnJldHVybiB0aGlzLng7Y2FzZSBkLlk6cmV0dXJuIHRoaXMueTtjYXNlIGQuWjpyZXR1cm4gdGhpcy56fXRocm93IG5ldyBjfSxlcXVhbHMzRDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PT09dC54JiZ0aGlzLnk9PT10LnkmJih0aGlzLno9PT10Lnp8fGcuaXNOYU4odGhpcy56KSYmZy5pc05hTih0LnopKX0sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZCYmdGhpcy5lcXVhbHMyRCh0KX0sZXF1YWxJblo6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5lcXVhbHNXaXRoVG9sZXJhbmNlKHRoaXMueix0LnosZSl9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PHQueD8tMTp0aGlzLng+dC54PzE6dGhpcy55PHQueT8tMTp0aGlzLnk+dC55PzE6MH0sY2xvbmU6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG51bGx9Y2F0Y2godCl7aWYodCBpbnN0YW5jZW9mIENsb25lTm90U3VwcG9ydGVkRXhjZXB0aW9uKXJldHVybiBsLnNob3VsZE5ldmVyUmVhY2hIZXJlKFwidGhpcyBzaG91bGRuJ3QgaGFwcGVuIGJlY2F1c2UgdGhpcyBjbGFzcyBpcyBDbG9uZWFibGVcIiksbnVsbDt0aHJvdyB0fX0sY29weTpmdW5jdGlvbigpe3JldHVybiBuZXcgZCh0aGlzKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIihcIit0aGlzLngrXCIsIFwiK3RoaXMueStcIiwgXCIrdGhpcy56K1wiKVwifSxkaXN0YW5jZTNEOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueC10Lngsbj10aGlzLnktdC55LHQ9dGhpcy56LXQuejtyZXR1cm4gTWF0aC5zcXJ0KGUqZStuKm4rdCp0KX0sZGlzdGFuY2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LXQueCx0PXRoaXMueS10Lnk7cmV0dXJuIE1hdGguc3FydChlKmUrdCp0KX0saGFzaENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gMzcqKDYyOStkLmhhc2hDb2RlKHRoaXMueCkpK2QuaGFzaENvZGUodGhpcy55KX0sc2V0Q29vcmRpbmF0ZTpmdW5jdGlvbih0KXt0aGlzLng9dC54LHRoaXMueT10LnksdGhpcy56PXQuen0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5baSxyLG9dfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBkfX0pLGQuaGFzaENvZGU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9Zy5kb3VibGVUb0xvbmdCaXRzKGFyZ3VtZW50c1swXSk7cmV0dXJuIE1hdGgudHJ1bmModF50Pj4+MzIpfX0sZShoLnByb3RvdHlwZSx7Y29tcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQsdD1lLGU9aC5jb21wYXJlKG4ueCx0LngpO2lmKDAhPT1lKXJldHVybiBlO2U9aC5jb21wYXJlKG4ueSx0LnkpO3JldHVybiAwIT09ZT9lOnRoaXMuZGltZW5zaW9uc1RvVGVzdDw9Mj8wOmguY29tcGFyZShuLnosdC56KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bc119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGh9fSksaC5jb21wYXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8ZT8tMTplPHQ/MTpnLmlzTmFOKHQpP2cuaXNOYU4oZSk/MDotMTpnLmlzTmFOKGUpPzE6MH0sZC5EaW1lbnNpb25hbENvbXBhcmF0b3I9aCxkLnNlcmlhbFZlcnNpb25VSUQ9MHg1Y2JmMmMyMzVjN2U1ODAwLGQuTlVMTF9PUkRJTkFURT1nLk5hTixkLlg9MCxkLlk9MSxkLlo9MixmLnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7fSxmLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7fSxmLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt9LG0ucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe30sbS5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKCl7fSxtLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7fSxtLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe30sbS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe30sbS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe30sbS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7fSwoeS5wcm90b3R5cGU9bmV3IEVycm9yKS5uYW1lPVwiSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvblwiLCgodi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShtLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPXYpLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt9LHYucHJvdG90eXBlLnNldD1mdW5jdGlvbigpe30sdi5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe30sKHgucHJvdG90eXBlPW5ldyBFcnJvcikubmFtZT1cIk5vU3VjaEVsZW1lbnRFeGNlcHRpb25cIiwoRS5wcm90b3R5cGU9bmV3IEVycm9yKS5uYW1lPVwiT3BlcmF0aW9uTm90U3VwcG9ydGVkXCIsKChJLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHYucHJvdG90eXBlKSkuY29uc3RydWN0b3I9SSkucHJvdG90eXBlLmVuc3VyZUNhcGFjaXR5PWZ1bmN0aW9uKCl7fSxJLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVyblt2LG1dfSxJLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlfLnB1c2godCksITB9LEkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5hcnJheV89W119LEkucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSk7cmV0dXJuITB9LEkucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYXJyYXlfW3RdO3JldHVybiB0aGlzLmFycmF5X1t0XT1lLG59LEkucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBcyh0aGlzKX0sSS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5zaXplKCkpdGhyb3cgbmV3IHk7cmV0dXJuIHRoaXMuYXJyYXlfW3RdfSxJLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmFycmF5Xy5sZW5ndGh9LEkucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnJheV8ubGVuZ3RofSxJLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXQucHVzaCh0aGlzLmFycmF5X1tlXSk7cmV0dXJuIHR9LEkucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9ITEsbj0wLGk9dGhpcy5hcnJheV8ubGVuZ3RoO248aTtuKyspaWYodGhpcy5hcnJheV9bbl09PT10KXt0aGlzLmFycmF5Xy5zcGxpY2UobiwxKSxlPSEwO2JyZWFrfXJldHVybiBlfTt2YXIgQXM9ZnVuY3Rpb24odCl7dGhpcy5hcnJheUxpc3RfPXQsdGhpcy5wb3NpdGlvbl89MH07QXMucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBvc2l0aW9uXz09PXRoaXMuYXJyYXlMaXN0Xy5zaXplKCkpdGhyb3cgbmV3IHg7cmV0dXJuIHRoaXMuYXJyYXlMaXN0Xy5nZXQodGhpcy5wb3NpdGlvbl8rKyl9LEFzLnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zaXRpb25fPHRoaXMuYXJyYXlMaXN0Xy5zaXplKCl9LEFzLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlMaXN0Xy5zZXQodGhpcy5wb3NpdGlvbl8tMSx0KX0sQXMucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyBFfSxhKE4sSSksZShOLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXQodCl9LGFkZEFsbDpmdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBJLnByb3RvdHlwZS5hZGRBbGwuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgdD1hcmd1bWVudHNbMV0sZT0hMSxuPWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl0aGlzLmFkZChuLm5leHQoKSx0KSxlPSEwO3JldHVybiBlfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1JLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpLGU9MDtlPHRoaXMuc2l6ZSgpO2UrKyl0LmFkZChlLHRoaXMuZ2V0KGUpLmNvcHkoKSk7cmV0dXJuIHR9LHRvQ29vcmRpbmF0ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9BcnJheShOLmNvb3JkQXJyYXlUeXBlKX0sYWRkOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtJLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLHQpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkmJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYWRkKHQsZSwhMCksITB9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkJiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7ZT1hcmd1bWVudHNbMF07aWYoIWFyZ3VtZW50c1sxXSYmMTw9dGhpcy5zaXplKCkpaWYodGhpcy5nZXQodGhpcy5zaXplKCktMSkuZXF1YWxzMkQoZSkpcmV0dXJuIG51bGw7SS5wcm90b3R5cGUuYWRkLmNhbGwodGhpcyxlKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgT2JqZWN0JiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmFkZChuLGkpLCEwfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSYmXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciByPWFyZ3VtZW50c1swXSxzPWFyZ3VtZW50c1sxXTtpZihhcmd1bWVudHNbMl0pZm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspdGhpcy5hZGQocltvXSxzKTtlbHNlIGZvcihvPXIubGVuZ3RoLTE7MDw9bztvLS0pdGhpcy5hZGQocltvXSxzKTtyZXR1cm4hMH1pZihcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1syXSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMF0pJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIGQpe3ZhciBuPWFyZ3VtZW50c1swXSxhPWFyZ3VtZW50c1sxXTtpZighYXJndW1lbnRzWzJdKXtpPXRoaXMuc2l6ZSgpO2lmKDA8aSl7aWYoMDxuKWlmKHRoaXMuZ2V0KG4tMSkuZXF1YWxzMkQoYSkpcmV0dXJuIG51bGw7aWYobjxpKWlmKHRoaXMuZ2V0KG4pLmVxdWFsczJEKGEpKXJldHVybiBudWxsfX1JLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLG4sYSl9fWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB1PWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXSxoPWFyZ3VtZW50c1szXSxjPTE7aDxhJiYoYz0tMSk7Zm9yKG89YTtvIT09aDtvKz1jKXRoaXMuYWRkKHVbb10sbCk7cmV0dXJuITB9fSxjbG9zZVJpbmc6ZnVuY3Rpb24oKXswPHRoaXMuc2l6ZSgpJiZ0aGlzLmFkZChuZXcgZCh0aGlzLmdldCgwKSksITEpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBOfX0pLE4uY29vcmRBcnJheVR5cGU9bmV3IEFycmF5KDApLmZpbGwobnVsbCksZShDLnByb3RvdHlwZSx7Z2V0QXJlYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFdpZHRoKCkqdGhpcy5nZXRIZWlnaHQoKX0sZXF1YWxzOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEMpKXJldHVybiExO3JldHVybiB0aGlzLmlzTnVsbCgpP3QuaXNOdWxsKCk6dGhpcy5tYXh4PT09dC5nZXRNYXhYKCkmJnRoaXMubWF4eT09PXQuZ2V0TWF4WSgpJiZ0aGlzLm1pbng9PT10LmdldE1pblgoKSYmdGhpcy5taW55PT09dC5nZXRNaW5ZKCl9LGludGVyc2VjdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLmlzTnVsbCgpfHx0LmlzTnVsbCgpfHwhdGhpcy5pbnRlcnNlY3RzKHQpKXJldHVybiBuZXcgQzt2YXIgZT0odGhpcy5taW54PnQubWlueD90aGlzOnQpLm1pbngsbj0odGhpcy5taW55PnQubWlueT90aGlzOnQpLm1pbnk7cmV0dXJuIG5ldyBDKGUsKHRoaXMubWF4eDx0Lm1heHg/dGhpczp0KS5tYXh4LG4sKHRoaXMubWF4eTx0Lm1heHk/dGhpczp0KS5tYXh5KX0saXNOdWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4eDx0aGlzLm1pbnh9LGdldE1heFg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh4fSxjb3ZlcnM6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY292ZXJzKHQueCx0LnkpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiF0aGlzLmlzTnVsbCgpJiYhZS5pc051bGwoKSYmKGUuZ2V0TWluWCgpPj10aGlzLm1pbngmJmUuZ2V0TWF4WCgpPD10aGlzLm1heHgmJmUuZ2V0TWluWSgpPj10aGlzLm1pbnkmJmUuZ2V0TWF4WSgpPD10aGlzLm1heHkpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4hdGhpcy5pc051bGwoKSYmKHQ+PXRoaXMubWlueCYmdDw9dGhpcy5tYXh4JiZlPj10aGlzLm1pbnkmJmU8PXRoaXMubWF4eSl9fSxpbnRlcnNlY3RzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiF0aGlzLmlzTnVsbCgpJiYhdC5pc051bGwoKSYmISh0Lm1pbng+dGhpcy5tYXh4fHx0Lm1heHg8dGhpcy5taW54fHx0Lm1pbnk+dGhpcy5tYXh5fHx0Lm1heHk8dGhpcy5taW55KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzKGUueCxlLnkpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4hdGhpcy5pc051bGwoKSYmISh0PnRoaXMubWF4eHx8dDx0aGlzLm1pbnh8fGU+dGhpcy5tYXh5fHxlPHRoaXMubWlueSl9fSxnZXRNaW5ZOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWlueX0sZ2V0TWluWDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbnh9LGV4cGFuZFRvSW5jbHVkZTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmV4cGFuZFRvSW5jbHVkZSh0LngsdC55KX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIGU9YXJndW1lbnRzWzBdO2lmKGUuaXNOdWxsKCkpcmV0dXJuIG51bGw7dGhpcy5pc051bGwoKT8odGhpcy5taW54PWUuZ2V0TWluWCgpLHRoaXMubWF4eD1lLmdldE1heFgoKSx0aGlzLm1pbnk9ZS5nZXRNaW5ZKCksdGhpcy5tYXh5PWUuZ2V0TWF4WSgpKTooZS5taW54PHRoaXMubWlueCYmKHRoaXMubWlueD1lLm1pbngpLGUubWF4eD50aGlzLm1heHgmJih0aGlzLm1heHg9ZS5tYXh4KSxlLm1pbnk8dGhpcy5taW55JiYodGhpcy5taW55PWUubWlueSksZS5tYXh5PnRoaXMubWF4eSYmKHRoaXMubWF4eT1lLm1heHkpKX19ZWxzZSAyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuaXNOdWxsKCk/KHRoaXMubWlueD10LHRoaXMubWF4eD10LHRoaXMubWlueT1lLHRoaXMubWF4eT1lKToodDx0aGlzLm1pbngmJih0aGlzLm1pbng9dCksdD50aGlzLm1heHgmJih0aGlzLm1heHg9dCksZTx0aGlzLm1pbnkmJih0aGlzLm1pbnk9ZSksZT50aGlzLm1heHkmJih0aGlzLm1heHk9ZSkpKX0sbWluRXh0ZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5pc051bGwoKSlyZXR1cm4gMDt2YXIgdD10aGlzLmdldFdpZHRoKCksZT10aGlzLmdldEhlaWdodCgpO3JldHVybiB0PGU/dDplfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTnVsbCgpPzA6dGhpcy5tYXh4LXRoaXMubWlueH0sY29tcGFyZVRvOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzTnVsbCgpP3QuaXNOdWxsKCk/MDotMTp0LmlzTnVsbCgpPzE6dGhpcy5taW54PHQubWlueD8tMTp0aGlzLm1pbng+dC5taW54PzE6dGhpcy5taW55PHQubWlueT8tMTp0aGlzLm1pbnk+dC5taW55PzE6dGhpcy5tYXh4PHQubWF4eD8tMTp0aGlzLm1heHg+dC5tYXh4PzE6dGhpcy5tYXh5PHQubWF4eT8tMTp0aGlzLm1heHk+dC5tYXh5PzE6MH0sdHJhbnNsYXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaXNOdWxsKCk/bnVsbDp2b2lkIHRoaXMuaW5pdCh0aGlzLmdldE1pblgoKSt0LHRoaXMuZ2V0TWF4WCgpK3QsdGhpcy5nZXRNaW5ZKCkrZSx0aGlzLmdldE1heFkoKStlKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIkVudltcIit0aGlzLm1pbngrXCIgOiBcIit0aGlzLm1heHgrXCIsIFwiK3RoaXMubWlueStcIiA6IFwiK3RoaXMubWF4eStcIl1cIn0sc2V0VG9OdWxsOmZ1bmN0aW9uKCl7dGhpcy5taW54PTAsdGhpcy5tYXh4PS0xLHRoaXMubWlueT0wLHRoaXMubWF4eT0tMX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOdWxsKCk/MDp0aGlzLm1heHktdGhpcy5taW55fSxtYXhFeHRlbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzTnVsbCgpKXJldHVybiAwO3ZhciB0PXRoaXMuZ2V0V2lkdGgoKSxlPXRoaXMuZ2V0SGVpZ2h0KCk7cmV0dXJuIGU8dD90OmV9LGV4cGFuZEJ5OmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmV4cGFuZEJ5KHQsdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLHQ9YXJndW1lbnRzWzFdO2lmKHRoaXMuaXNOdWxsKCkpcmV0dXJuIG51bGw7dGhpcy5taW54LT1lLHRoaXMubWF4eCs9ZSx0aGlzLm1pbnktPXQsdGhpcy5tYXh5Kz10LCh0aGlzLm1pbng+dGhpcy5tYXh4fHx0aGlzLm1pbnk+dGhpcy5tYXh5KSYmdGhpcy5zZXRUb051bGwoKX19LGNvbnRhaW5zOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNvdmVycyh0KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jb3ZlcnMoZSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3Q9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmNvdmVycyh0LGUpfX0sY2VudHJlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOdWxsKCk/bnVsbDpuZXcgZCgodGhpcy5nZXRNaW5YKCkrdGhpcy5nZXRNYXhYKCkpLzIsKHRoaXMuZ2V0TWluWSgpK3RoaXMuZ2V0TWF4WSgpKS8yKX0saW5pdDpmdW5jdGlvbigpe3ZhciB0LGUsbixpOzA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuc2V0VG9OdWxsKCk6MT09PWFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkPyhuPWFyZ3VtZW50c1swXSx0aGlzLmluaXQobi54LG4ueCxuLnksbi55KSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDJiYoaT1hcmd1bWVudHNbMF0sdGhpcy5taW54PWkubWlueCx0aGlzLm1heHg9aS5tYXh4LHRoaXMubWlueT1pLm1pbnksdGhpcy5tYXh5PWkubWF4eSk6Mj09PWFyZ3VtZW50cy5sZW5ndGg/KHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuaW5pdCh0LngsZS54LHQueSxlLnkpKTo0PT09YXJndW1lbnRzLmxlbmd0aCYmKG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdLCh0PWFyZ3VtZW50c1swXSk8KGU9YXJndW1lbnRzWzFdKT8odGhpcy5taW54PXQsdGhpcy5tYXh4PWUpOih0aGlzLm1pbng9ZSx0aGlzLm1heHg9dCksbjxpPyh0aGlzLm1pbnk9bix0aGlzLm1heHk9aSk6KHRoaXMubWlueT1pLHRoaXMubWF4eT1uKSl9LGdldE1heFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh5fSxkaXN0YW5jZTpmdW5jdGlvbih0KXtpZih0aGlzLmludGVyc2VjdHModCkpcmV0dXJuIDA7dmFyIGU9MDt0aGlzLm1heHg8dC5taW54P2U9dC5taW54LXRoaXMubWF4eDp0aGlzLm1pbng+dC5tYXh4JiYoZT10aGlzLm1pbngtdC5tYXh4KTt2YXIgbj0wO3JldHVybiB0aGlzLm1heHk8dC5taW55P249dC5taW55LXRoaXMubWF4eTp0aGlzLm1pbnk+dC5tYXh5JiYobj10aGlzLm1pbnktdC5tYXh5KSwwPT09ZT9uOjA9PT1uP2U6TWF0aC5zcXJ0KGUqZStuKm4pfSxoYXNoQ29kZTpmdW5jdGlvbigpe3JldHVybiAzNyooMzcqKDM3Kig2MjkrZC5oYXNoQ29kZSh0aGlzLm1pbngpKStkLmhhc2hDb2RlKHRoaXMubWF4eCkpK2QuaGFzaENvZGUodGhpcy5taW55KSkrZC5oYXNoQ29kZSh0aGlzLm1heHkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltpLG9dfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDfX0pLEMuaW50ZXJzZWN0cz1mdW5jdGlvbigpe2lmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07cmV0dXJuIG4ueD49KHQueDxlLng/dDplKS54JiZuLng8PSh0Lng+ZS54P3Q6ZSkueCYmbi55Pj0odC55PGUueT90OmUpLnkmJm4ueTw9KHQueT5lLnk/dDplKS55fWlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sbz1hcmd1bWVudHNbM10sYT1NYXRoLm1pbihzLngsby54KSxuPU1hdGgubWF4KHMueCxvLngpLHQ9TWF0aC5taW4oaS54LHIueCksZT1NYXRoLm1heChpLngsci54KTtyZXR1cm4hKG48dCkmJighKGU8YSkmJihhPU1hdGgubWluKHMueSxvLnkpLG49TWF0aC5tYXgocy55LG8ueSksdD1NYXRoLm1pbihpLnksci55KSxlPU1hdGgubWF4KGkueSxyLnkpLCEobjx0KSYmIShlPGEpKSl9fSxDLnNlcmlhbFZlcnNpb25VSUQ9MHg1MTg0NWNkNTUyMTg5ODAwLGEodyxTKSxlKHcucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB3fX0pLGUoTC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEx9fSksTC50b0xvY2F0aW9uU3ltYm9sPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIEwuRVhURVJJT1I6cmV0dXJuXCJlXCI7Y2FzZSBMLkJPVU5EQVJZOnJldHVyblwiYlwiO2Nhc2UgTC5JTlRFUklPUjpyZXR1cm5cImlcIjtjYXNlIEwuTk9ORTpyZXR1cm5cIi1cIn10aHJvdyBuZXcgY30sTC5JTlRFUklPUj0wLEwuQk9VTkRBUlk9MSxMLkVYVEVSSU9SPTIsTC5OT05FPS0xLGUoVC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFR9fSksVC5sb2cxMD1mdW5jdGlvbih0KXt0PU1hdGgubG9nKHQpO3JldHVybiBnLmlzSW5maW5pdGUodCl8fGcuaXNOYU4odCk/dDp0L1QuTE9HXzEwfSxULm1pbj1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gZTx0JiYodD1lKSxuPHQmJih0PW4pLGk8dCYmKHQ9aSksdH0sVC5jbGFtcD1mdW5jdGlvbigpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gdDxlP2U6bjx0P246dH1pZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1syXSkmJk51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXtlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSx0PWFyZ3VtZW50c1syXTtyZXR1cm4gZTxuP246dDxlP3Q6ZX19LFQud3JhcD1mdW5jdGlvbih0LGUpe3JldHVybiB0PDA/ZS0gLXQlZTp0JWV9LFQubWF4PWZ1bmN0aW9uKCl7aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1sxXSxlPWFyZ3VtZW50c1syXTtyZXR1cm4obj1hcmd1bWVudHNbMF0pPHQmJihuPXQpLG48ZSYmKG49ZSksbn1pZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG4saT1hcmd1bWVudHNbMV0sdD1hcmd1bWVudHNbMl0sZT1hcmd1bWVudHNbM107cmV0dXJuKG49YXJndW1lbnRzWzBdKTxpJiYobj1pKSxuPHQmJihuPXQpLG48ZSYmKG49ZSksbn19LFQuYXZlcmFnZT1mdW5jdGlvbih0LGUpe3JldHVybih0K2UpLzJ9LFQuTE9HXzEwPU1hdGgubG9nKDEwKSxQLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7dGhpcy5zdHIrPXR9LFAucHJvdG90eXBlLnNldENoYXJBdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN0ci5zdWJzdHIoMCx0KStlK3RoaXMuc3RyLnN1YnN0cih0KzEpfSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdHJ9LGIucHJvdG90eXBlLmludFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGIucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52YWx1ZTx0Py0xOnRoaXMudmFsdWU+dD8xOjB9LGIuaXNOYU49ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlci5pc05hTih0KX0sTy5pc1doaXRlc3BhY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTMyJiYwPD10fHwxMjc9PXR9LE8udG9VcHBlckNhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0sZShfLnByb3RvdHlwZSx7bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGk8dC5oaXx8dGhpcy5oaT09PXQuaGkmJnRoaXMubG88PXQubG99LGV4dHJhY3RTaWduaWZpY2FudERpZ2l0czpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYWJzKCksaT1fLm1hZ25pdHVkZShuLmhpKSxyPV8uVEVOLnBvdyhpKTsobj1uLmRpdmlkZShyKSkuZ3QoXy5URU4pPyhuPW4uZGl2aWRlKF8uVEVOKSxpKz0xKTpuLmx0KF8uT05FKSYmKG49bi5tdWx0aXBseShfLlRFTiksLS1pKTtmb3IodmFyIHM9aSsxLG89bmV3IFAsYT1fLk1BWF9QUklOVF9ESUdJVFMtMSx1PTA7dTw9YTt1Kyspe3QmJnU9PT1zJiZvLmFwcGVuZChcIi5cIik7dmFyIGw9TWF0aC50cnVuYyhuLmhpKTtpZihsPDApYnJlYWs7dmFyIGg9ITEsYz0wLGM9OTxsPyhoPSEwLFwiOVwiKTpcIjBcIitsO28uYXBwZW5kKGMpLG49bi5zdWJ0cmFjdChfLnZhbHVlT2YobCkpLm11bHRpcGx5KF8uVEVOKSxoJiZuLnNlbGZBZGQoXy5URU4pO2w9ITAsaD1fLm1hZ25pdHVkZShuLmhpKTtpZihoPDAmJk1hdGguYWJzKGgpPj1hLXUmJihsPSExKSwhbClicmVha31yZXR1cm4gZVswXT1pLG8udG9TdHJpbmcoKX0sc3FyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbHkodGhpcyl9LGRvdWJsZVZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGkrdGhpcy5sb30sc3VidHJhY3Q6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIF8pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5hZGQodC5uZWdhdGUoKSl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuYWRkKC10KX19LGVxdWFsczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaGk9PT10LmhpJiZ0aGlzLmxvPT09dC5sb319LGlzWmVybzpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5oaSYmMD09PXRoaXMubG99LHNlbGZTdWJ0cmFjdDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgXyl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmlzTmFOKCk/dGhpczp0aGlzLnNlbGZBZGQoLXQuaGksLXQubG8pfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3Q9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmlzTmFOKCk/dGhpczp0aGlzLnNlbGZBZGQoLXQsMCl9fSxnZXRTcGVjaWFsTnVtYmVyU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNaZXJvKCk/XCIwLjBcIjp0aGlzLmlzTmFOKCk/XCJOYU4gXCI6bnVsbH0sbWluOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxlKHQpP3RoaXM6dH0sc2VsZkRpdmlkZTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIF8pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmRGl2aWRlKHQuaGksdC5sbyl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLnNlbGZEaXZpZGUoZSwwKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG4saSxyLHM9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9bnVsbCx1PW51bGwsZT1udWxsLGw9dGhpcy5oaS9zO3JldHVybiBlPShhPSh1PV8uU1BMSVQqbCktKGE9dS1sKSkqKGk9KGU9Xy5TUExJVCpzKS0oZS1zKSktKHQ9bCpzKSthKihyPXMtaSkrKG49bC1hKSppK24qcixlPWwrKHU9KHRoaXMuaGktdC1lK3RoaXMubG8tbCpvKS9zKSx0aGlzLmhpPWUsdGhpcy5sbz1sLWUrdSx0aGlzfX0sZHVtcDpmdW5jdGlvbigpe3JldHVyblwiREQ8XCIrdGhpcy5oaStcIiwgXCIrdGhpcy5sbytcIj5cIn0sZGl2aWRlOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBfKXt2YXIgdCxlLG4saT1hcmd1bWVudHNbMF0scj1udWxsLHM9bnVsbCxvPW51bGwsYT1udWxsLHU9KHM9dGhpcy5oaS9pLmhpKS0ocj0obz1fLlNQTElUKnMpLShyPW8tcykpO3JldHVybiBhPXIqKHQ9KGE9Xy5TUExJVCppLmhpKS0oYS1pLmhpKSktKG49cyppLmhpKStyKihlPWkuaGktdCkrdSp0K3UqZSxuZXcgXyhhPXMrKG89KHRoaXMuaGktbi1hK3RoaXMubG8tcyppLmxvKS9pLmhpKSxzLWErbyl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7bz1hcmd1bWVudHNbMF07cmV0dXJuIGcuaXNOYU4obyk/Xy5jcmVhdGVOYU4oKTpfLmNvcHkodGhpcykuc2VsZkRpdmlkZShvLDApfX0sZ2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGk+dC5oaXx8dGhpcy5oaT09PXQuaGkmJnRoaXMubG8+PXQubG99LHBvdzpmdW5jdGlvbih0KXtpZigwPT09dClyZXR1cm4gXy52YWx1ZU9mKDEpO3ZhciBlPW5ldyBfKHRoaXMpLG49Xy52YWx1ZU9mKDEpLGk9TWF0aC5hYnModCk7aWYoMTxpKWZvcig7MDxpOylpJTI9PTEmJm4uc2VsZk11bHRpcGx5KGUpLDA8KGkvPTIpJiYoZT1lLnNxcigpKTtlbHNlIG49ZTtyZXR1cm4gdDwwP24ucmVjaXByb2NhbCgpOm59LGNlaWw6ZnVuY3Rpb24oKXtpZih0aGlzLmlzTmFOKCkpcmV0dXJuIF8uTmFOO3ZhciB0PU1hdGguY2VpbCh0aGlzLmhpKSxlPTA7cmV0dXJuIHQ9PT10aGlzLmhpJiYoZT1NYXRoLmNlaWwodGhpcy5sbykpLG5ldyBfKHQsZSl9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oaTx0LmhpPy0xOnRoaXMuaGk+dC5oaT8xOnRoaXMubG88dC5sbz8tMTp0aGlzLmxvPnQubG8/MTowfSxyaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOYU4oKT90aGlzOnRoaXMuYWRkKC41KS5mbG9vcigpfSxzZXRWYWx1ZTpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgXyl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmluaXQodCksdGhpc31pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5pbml0KHQpLHRoaXN9fSxtYXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2UodCk/dGhpczp0fSxzcXJ0OmZ1bmN0aW9uKCl7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gXy52YWx1ZU9mKDApO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXJldHVybiBfLk5hTjt2YXIgdD0xL01hdGguc3FydCh0aGlzLmhpKSxlPXRoaXMuaGkqdCxlPV8udmFsdWVPZihlKSx0PXRoaXMuc3VidHJhY3QoZS5zcXIoKSkuaGkqKC41KnQpO3JldHVybiBlLmFkZCh0KX0sc2VsZkFkZDpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIF8pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmQWRkKHQuaGksdC5sbyl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdLG49bnVsbCxpPW51bGwscj1udWxsLHM9bnVsbCxvPW51bGwsYT1udWxsO3JldHVybiBzPShyPXRoaXMuaGkrZSktKG89ci10aGlzLmhpKSxpPShhPShzPWUtbysodGhpcy5oaS1zKSkrdGhpcy5sbykrKHItKG49cithKSksdGhpcy5oaT1uK2ksdGhpcy5sbz1pKyhuLXRoaXMuaGkpLHRoaXN9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB1PWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXSxuPW51bGwsaT1udWxsLHI9bnVsbCxzPW51bGwsbz1udWxsLGE9bnVsbDtyPXRoaXMuaGkrdSx0PXRoaXMubG8rbCxzPXItKG89ci10aGlzLmhpKSxlPXQtKGE9dC10aGlzLmxvKTtpPShuPXIrKG89KHM9dS1vKyh0aGlzLmhpLXMpKSt0KSkrKG89bC1hKyh0aGlzLmxvLWUpKyhpPW8rKHItbikpKSxuPW8rKG4taSk7cmV0dXJuIHRoaXMuaGk9aSx0aGlzLmxvPW4sdGhpc319LHNlbGZNdWx0aXBseTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIF8pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmTXVsdGlwbHkodC5oaSx0LmxvKX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuc2VsZk11bHRpcGx5KGUsMCl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuLGkscixzPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSx0PW51bGwsYT0odD1fLlNQTElUKnRoaXMuaGkpLXRoaXMuaGksZT1fLlNQTElUKnM7YT10LWEsbj10aGlzLmhpLWEsaT1lLXM7cz0odD10aGlzLmhpKnMpKyhlPWEqKGk9ZS1pKS10K2EqKHI9cy1pKStuKmkrbipyKyh0aGlzLmhpKm8rdGhpcy5sbypzKSksYT1lKyh0LXMpO3JldHVybiB0aGlzLmhpPXMsdGhpcy5sbz1hLHRoaXN9fSxzZWxmU3FyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZk11bHRpcGx5KHRoaXMpfSxmbG9vcjpmdW5jdGlvbigpe2lmKHRoaXMuaXNOYU4oKSlyZXR1cm4gXy5OYU47dmFyIHQ9TWF0aC5mbG9vcih0aGlzLmhpKSxlPTA7cmV0dXJuIHQ9PT10aGlzLmhpJiYoZT1NYXRoLmZsb29yKHRoaXMubG8pKSxuZXcgXyh0LGUpfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05hTigpP3RoaXM6bmV3IF8oLXRoaXMuaGksLXRoaXMubG8pfSxjbG9uZTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gbnVsbH1jYXRjaCh0KXtpZih0IGluc3RhbmNlb2YgQ2xvbmVOb3RTdXBwb3J0ZWRFeGNlcHRpb24pcmV0dXJuIG51bGw7dGhyb3cgdH19LG11bHRpcGx5OmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBfKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHQuaXNOYU4oKT9fLmNyZWF0ZU5hTigpOl8uY29weSh0aGlzKS5zZWxmTXVsdGlwbHkodCl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dD1hcmd1bWVudHNbMF07cmV0dXJuIGcuaXNOYU4odCk/Xy5jcmVhdGVOYU4oKTpfLmNvcHkodGhpcykuc2VsZk11bHRpcGx5KHQsMCl9fSxpc05hTjpmdW5jdGlvbigpe3JldHVybiBnLmlzTmFOKHRoaXMuaGkpfSxpbnRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLnRydW5jKHRoaXMuaGkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PV8ubWFnbml0dWRlKHRoaXMuaGkpO3JldHVybi0zPD10JiZ0PD0yMD90aGlzLnRvU3RhbmRhcmROb3RhdGlvbigpOnRoaXMudG9TY2lOb3RhdGlvbigpfSx0b1N0YW5kYXJkTm90YXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNwZWNpYWxOdW1iZXJTdHJpbmcoKTtpZihudWxsIT09dClyZXR1cm4gdDt2YXIgZT1uZXcgQXJyYXkoMSkuZmlsbChudWxsKSxuPXRoaXMuZXh0cmFjdFNpZ25pZmljYW50RGlnaXRzKCEwLGUpLHQ9ZVswXSsxLGU9bjtyZXR1cm5cIi5cIj09PW4uY2hhckF0KDApP2U9XCIwXCIrbjp0PDA/ZT1cIjAuXCIrXy5zdHJpbmdPZkNoYXIoXCIwXCIsLXQpK246LTE9PT1uLmluZGV4T2YoXCIuXCIpJiYodD10LW4ubGVuZ3RoLGU9bitfLnN0cmluZ09mQ2hhcihcIjBcIix0KStcIi4wXCIpLHRoaXMuaXNOZWdhdGl2ZSgpP1wiLVwiK2U6ZX0scmVjaXByb2NhbDpmdW5jdGlvbigpe3ZhciB0LGUsbj1udWxsLGk9bnVsbCxyPW51bGwscz1udWxsLG89KGk9MS90aGlzLmhpKS0obj0ocj1fLlNQTElUKmkpLShuPXItaSkpLGE9KHM9Xy5TUExJVCp0aGlzLmhpKS10aGlzLmhpLHM9aSsocj0oMS0oZT1pKnRoaXMuaGkpLShzPW4qKGE9cy1hKS1lK24qKHQ9dGhpcy5oaS1hKStvKmErbyp0KS1pKnRoaXMubG8pL3RoaXMuaGkpO3JldHVybiBuZXcgXyhzLGktcytyKX0sdG9TY2lOb3RhdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIF8uU0NJX05PVF9aRVJPO3ZhciB0PXRoaXMuZ2V0U3BlY2lhbE51bWJlclN0cmluZygpO2lmKG51bGwhPT10KXJldHVybiB0O3ZhciBlPW5ldyBBcnJheSgxKS5maWxsKG51bGwpLG49dGhpcy5leHRyYWN0U2lnbmlmaWNhbnREaWdpdHMoITEsZSksdD1fLlNDSV9OT1RfRVhQT05FTlRfQ0hBUitlWzBdO2lmKFwiMFwiPT09bi5jaGFyQXQoMCkpdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcIkZvdW5kIGxlYWRpbmcgemVybzogXCIrbik7ZT1cIlwiOzE8bi5sZW5ndGgmJihlPW4uc3Vic3RyaW5nKDEpKTtlPW4uY2hhckF0KDApK1wiLlwiK2U7cmV0dXJuIHRoaXMuaXNOZWdhdGl2ZSgpP1wiLVwiK2UrdDplK3R9LGFiczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTmFOKCk/Xy5OYU46dGhpcy5pc05lZ2F0aXZlKCk/dGhpcy5uZWdhdGUoKTpuZXcgXyh0aGlzKX0saXNQb3NpdGl2ZTpmdW5jdGlvbigpe3JldHVybiAwPHRoaXMuaGl8fDA9PT10aGlzLmhpJiYwPHRoaXMubG99LGx0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhpPHQuaGl8fHRoaXMuaGk9PT10LmhpJiZ0aGlzLmxvPHQubG99LGFkZDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgXyl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBfLmNvcHkodGhpcykuc2VsZkFkZCh0KX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt0PWFyZ3VtZW50c1swXTtyZXR1cm4gXy5jb3B5KHRoaXMpLnNlbGZBZGQodCl9fSxpbml0OmZ1bmN0aW9uKCl7dmFyIHQsZTsxPT09YXJndW1lbnRzLmxlbmd0aD9cIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdPyh0PWFyZ3VtZW50c1swXSx0aGlzLmhpPXQsdGhpcy5sbz0wKTphcmd1bWVudHNbMF1pbnN0YW5jZW9mIF8mJihlPWFyZ3VtZW50c1swXSx0aGlzLmhpPWUuaGksdGhpcy5sbz1lLmxvKToyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuaGk9dCx0aGlzLmxvPWUpfSxndDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oaT50LmhpfHx0aGlzLmhpPT09dC5oaSYmdGhpcy5sbz50LmxvfSxpc05lZ2F0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGk8MHx8MD09PXRoaXMuaGkmJnRoaXMubG88MH0sdHJ1bmM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05hTigpP18uTmFOOnRoaXMuaXNQb3NpdGl2ZSgpP3RoaXMuZmxvb3IoKTp0aGlzLmNlaWwoKX0sc2lnbnVtOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5oaT8xOnRoaXMuaGk8MD8tMTowPHRoaXMubG8/MTp0aGlzLmxvPDA/LTE6MH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bbyxpLHJdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBffX0pLF8uc3FyPWZ1bmN0aW9uKHQpe3JldHVybiBfLnZhbHVlT2YodCkuc2VsZk11bHRpcGx5KHQpfSxfLnZhbHVlT2Y9ZnVuY3Rpb24oKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIF8ucGFyc2UodCl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSlyZXR1cm4gbmV3IF8oYXJndW1lbnRzWzBdKX0sXy5zcXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBfLnZhbHVlT2YodCkuc3FydCgpfSxfLnBhcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dC5sZW5ndGg7Ty5pc1doaXRlc3BhY2UodC5jaGFyQXQoZSkpOyllKys7dmFyIGk9ITE7ZTxuJiYoXCItXCIhPT0oZz10LmNoYXJBdChlKSkmJlwiK1wiIT09Z3x8KGUrKyxcIi1cIj09PWcmJihpPSEwKSkpO2Zvcih2YXIgcj1uZXcgXyxzPTAsbz0wLGE9MDshKG48PWUpOyl7dmFyIHU9dC5jaGFyQXQoZSk7aWYoZSsrLE8uaXNEaWdpdCh1KSl7dmFyIGw9dS1cIjBcIjtyLnNlbGZNdWx0aXBseShfLlRFTiksci5zZWxmQWRkKGwpLHMrK31lbHNle2lmKFwiLlwiIT09dSl7aWYoXCJlXCIhPT11JiZcIkVcIiE9PXUpdGhyb3cgbmV3IE51bWJlckZvcm1hdEV4Y2VwdGlvbihcIlVuZXhwZWN0ZWQgY2hhcmFjdGVyICdcIit1K1wiJyBhdCBwb3NpdGlvbiBcIitlK1wiIGluIHN0cmluZyBcIit0KTt2YXIgaD10LnN1YnN0cmluZyhlKTt0cnl7YT1iLnBhcnNlSW50KGgpfWNhdGNoKGUpe3Rocm93IGUgaW5zdGFuY2VvZiBOdW1iZXJGb3JtYXRFeGNlcHRpb24/bmV3IE51bWJlckZvcm1hdEV4Y2VwdGlvbihcIkludmFsaWQgZXhwb25lbnQgXCIraCtcIiBpbiBzdHJpbmcgXCIrdCk6ZX1icmVha31vPXN9fXZhciBjLGY9cixnPXMtby1hO3JldHVybiAwPT1nP2Y9cjowPGc/KGM9Xy5URU4ucG93KGcpLGY9ci5kaXZpZGUoYykpOmc8MCYmKGM9Xy5URU4ucG93KC1nKSxmPXIubXVsdGlwbHkoYykpLGk/Zi5uZWdhdGUoKTpmfSxfLmNyZWF0ZU5hTj1mdW5jdGlvbigpe3JldHVybiBuZXcgXyhnLk5hTixnLk5hTil9LF8uY29weT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IF8odCl9LF8ubWFnbml0dWRlPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguYWJzKHQpLHQ9TWF0aC5sb2coZSkvTWF0aC5sb2coMTApLHQ9TWF0aC50cnVuYyhNYXRoLmZsb29yKHQpKTtyZXR1cm4gMTAqTWF0aC5wb3coMTAsdCk8PWUmJih0Kz0xKSx0fSxfLnN0cmluZ09mQ2hhcj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgUCxpPTA7aTxlO2krKyluLmFwcGVuZCh0KTtyZXR1cm4gbi50b1N0cmluZygpfSxfLlBJPW5ldyBfKDMuMTQxNTkyNjUzNTg5NzkzLDEyMjQ2NDY3OTkxNDczNTMyZS0zMiksXy5UV09fUEk9bmV3IF8oNi4yODMxODUzMDcxNzk1ODYsMjQ0OTI5MzU5ODI5NDcwNjRlLTMyKSxfLlBJXzI9bmV3IF8oMS41NzA3OTYzMjY3OTQ4OTY2LDYxMjMyMzM5OTU3MzY3NjZlLTMyKSxfLkU9bmV3IF8oMi43MTgyODE4Mjg0NTkwNDUsMTQ0NTY0Njg5MTcyOTI1MDJlLTMyKSxfLk5hTj1uZXcgXyhnLk5hTixnLk5hTiksXy5FUFM9MTIzMjU5NTE2NDQwNzgzZS00NixfLlNQTElUPTEzNDIxNzcyOSxfLk1BWF9QUklOVF9ESUdJVFM9MzIsXy5URU49Xy52YWx1ZU9mKDEwKSxfLk9ORT1fLnZhbHVlT2YoMSksXy5TQ0lfTk9UX0VYUE9ORU5UX0NIQVI9XCJFXCIsXy5TQ0lfTk9UX1pFUk89XCIwLjBFMFwiLGUoTS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE19fSksTS5vcmllbnRhdGlvbkluZGV4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1NLm9yaWVudGF0aW9uSW5kZXhGaWx0ZXIodCxlLG4pO2lmKGk8PTEpcmV0dXJuIGk7dmFyIHI9Xy52YWx1ZU9mKGUueCkuc2VsZkFkZCgtdC54KSxpPV8udmFsdWVPZihlLnkpLnNlbGZBZGQoLXQueSksdD1fLnZhbHVlT2Yobi54KS5zZWxmQWRkKC1lLngpLGU9Xy52YWx1ZU9mKG4ueSkuc2VsZkFkZCgtZS55KTtyZXR1cm4gci5zZWxmTXVsdGlwbHkoZSkuc2VsZlN1YnRyYWN0KGkuc2VsZk11bHRpcGx5KHQpKS5zaWdudW0oKX0sTS5zaWduT2ZEZXQyeDI9ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHQubXVsdGlwbHkoaSkuc2VsZlN1YnRyYWN0KGUubXVsdGlwbHkobikpLnNpZ251bSgpfSxNLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1fLnZhbHVlT2YoaS55KS5zZWxmU3VidHJhY3Qobi55KS5zZWxmTXVsdGlwbHkoXy52YWx1ZU9mKGUueCkuc2VsZlN1YnRyYWN0KHQueCkpLHM9Xy52YWx1ZU9mKGkueCkuc2VsZlN1YnRyYWN0KG4ueCkuc2VsZk11bHRpcGx5KF8udmFsdWVPZihlLnkpLnNlbGZTdWJ0cmFjdCh0LnkpKSxvPXIuc3VidHJhY3Qocykscj1fLnZhbHVlT2YoaS54KS5zZWxmU3VidHJhY3Qobi54KS5zZWxmTXVsdGlwbHkoXy52YWx1ZU9mKHQueSkuc2VsZlN1YnRyYWN0KG4ueSkpLHM9Xy52YWx1ZU9mKGkueSkuc2VsZlN1YnRyYWN0KG4ueSkuc2VsZk11bHRpcGx5KF8udmFsdWVPZih0LngpLnNlbGZTdWJ0cmFjdChuLngpKSxyPXIuc3VidHJhY3Qocykuc2VsZkRpdmlkZShvKS5kb3VibGVWYWx1ZSgpLHM9Xy52YWx1ZU9mKHQueCkuc2VsZkFkZChfLnZhbHVlT2YoZS54KS5zZWxmU3VidHJhY3QodC54KS5zZWxmTXVsdGlwbHkocikpLmRvdWJsZVZhbHVlKCkscj1fLnZhbHVlT2YoZS54KS5zZWxmU3VidHJhY3QodC54KS5zZWxmTXVsdGlwbHkoXy52YWx1ZU9mKHQueSkuc2VsZlN1YnRyYWN0KG4ueSkpLHQ9Xy52YWx1ZU9mKGUueSkuc2VsZlN1YnRyYWN0KHQueSkuc2VsZk11bHRpcGx5KF8udmFsdWVPZih0LngpLnNlbGZTdWJ0cmFjdChuLngpKSxvPXIuc3VidHJhY3QodCkuc2VsZkRpdmlkZShvKS5kb3VibGVWYWx1ZSgpO3JldHVybiBuZXcgZChzLF8udmFsdWVPZihuLnkpLnNlbGZBZGQoXy52YWx1ZU9mKGkueSkuc2VsZlN1YnRyYWN0KG4ueSkuc2VsZk11bHRpcGx5KG8pKS5kb3VibGVWYWx1ZSgpKX0sTS5vcmllbnRhdGlvbkluZGV4RmlsdGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1udWxsLHI9KHQueC1uLngpKihlLnktbi55KSxlPSh0Lnktbi55KSooZS54LW4ueCksbj1yLWU7aWYoMDxyKXtpZihlPD0wKXJldHVybiBNLnNpZ251bShuKTtpPXIrZX1lbHNle2lmKCEocjwwKSlyZXR1cm4gTS5zaWdudW0obik7aWYoMDw9ZSlyZXR1cm4gTS5zaWdudW0obik7aT0tci1lfWkqPU0uRFBfU0FGRV9FUFNJTE9OO3JldHVybiBpPD1ufHxpPD0tbj9NLnNpZ251bShuKToyfSxNLnNpZ251bT1mdW5jdGlvbih0KXtyZXR1cm4gMDx0PzE6dDwwPy0xOjB9LE0uRFBfU0FGRV9FUFNJTE9OPTFlLTE1LGUoRC5wcm90b3R5cGUse3NldE9yZGluYXRlOmZ1bmN0aW9uKHQsZSxuKXt9LHNpemU6ZnVuY3Rpb24oKXt9LGdldE9yZGluYXRlOmZ1bmN0aW9uKHQsZSl7fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7fSxnZXRDb29yZGluYXRlQ29weTpmdW5jdGlvbih0KXt9LGdldERpbWVuc2lvbjpmdW5jdGlvbigpe30sZ2V0WDpmdW5jdGlvbih0KXt9LGNsb25lOmZ1bmN0aW9uKCl7fSxleHBhbmRFbnZlbG9wZTpmdW5jdGlvbih0KXt9LGNvcHk6ZnVuY3Rpb24oKXt9LGdldFk6ZnVuY3Rpb24odCl7fSx0b0Nvb3JkaW5hdGVBcnJheTpmdW5jdGlvbigpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bcl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIER9fSksRC5YPTAsRC5ZPTEsRC5aPTIsRC5NPTMsQS5hcnJheWNvcHk9ZnVuY3Rpb24odCxlLG4saSxyKXtmb3IodmFyIHM9MCxvPWU7bzxlK3I7bysrKW5baStzXT10W29dLHMrK30sQS5nZXRQcm9wZXJ0eT1mdW5jdGlvbih0KXtyZXR1cm57XCJsaW5lLnNlcGFyYXRvclwiOlwiXFxuXCJ9W3RdfSxlKEYucHJvdG90eXBlLHtnZXRZOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy55L3RoaXMudztpZihnLmlzTmFOKHQpfHxnLmlzSW5maW5pdGUodCkpdGhyb3cgbmV3IHc7cmV0dXJuIHR9LGdldFg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLngvdGhpcy53O2lmKGcuaXNOYU4odCl8fGcuaXNJbmZpbml0ZSh0KSl0aHJvdyBuZXcgdztyZXR1cm4gdH0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBkO3JldHVybiB0Lng9dGhpcy5nZXRYKCksdC55PXRoaXMuZ2V0WSgpLHR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fSksRi5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dC55LWUueSxzPWUueC10Lngsbz10LngqZS55LWUueCp0LnksZT1uLnktaS55LHQ9aS54LW4ueCxpPW4ueCppLnktaS54Km4ueSxuPXIqdC1lKnMsdD0ocyppLXQqbykvbixuPShlKm8tcippKS9uO2lmKGcuaXNOYU4odCl8fGcuaXNJbmZpbml0ZSh0KXx8Zy5pc05hTihuKXx8Zy5pc0luZmluaXRlKG4pKXRocm93IG5ldyB3O3JldHVybiBuZXcgZCh0LG4pfSxlKEcucHJvdG90eXBlLHtjcmVhdGU6ZnVuY3Rpb24oKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXl8fFIoYXJndW1lbnRzWzBdLEQpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gR319KSxlKHEucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBxfX0pLGUoQi5wcm90b3R5cGUse2lzR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U29ydEluZGV4KCk9PT1CLlNPUlRJTkRFWF9HRU9NRVRSWUNPTExFQ1RJT059LGdldEZhY3Rvcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mYWN0b3J5fSxnZXRHZW9tZXRyeU46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXN9LGdldEFyZWE6ZnVuY3Rpb24oKXtyZXR1cm4gMH0saXNSZWN0YW5nbGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZXF1YWxzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQil7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBudWxsIT09dCYmdGhpcy5lcXVhbHNUb3BvKHQpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgT2JqZWN0KXt0PWFyZ3VtZW50c1swXTtpZighKHQgaW5zdGFuY2VvZiBCKSlyZXR1cm4hMTtyZXR1cm4gdGhpcy5lcXVhbHNFeGFjdCh0KX19fSxlcXVhbHNFeGFjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09PXR8fHRoaXMuZXF1YWxzRXhhY3QodCwwKX0sZ2VvbWV0cnlDaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy5hcHBseShCLmdlb21ldHJ5Q2hhbmdlZEZpbHRlcil9LGdlb21ldHJ5Q2hhbmdlZEFjdGlvbjpmdW5jdGlvbigpe3RoaXMuZW52ZWxvcGU9bnVsbH0sZXF1YWxzTm9ybTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQmJnRoaXMubm9ybSgpLmVxdWFsc0V4YWN0KHQubm9ybSgpKX0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldE51bUdlb21ldHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gMX0sY29tcGFyZVRvOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPXQ7cmV0dXJuIHRoaXMuZ2V0U29ydEluZGV4KCkhPT1lLmdldFNvcnRJbmRleCgpP3RoaXMuZ2V0U29ydEluZGV4KCktZS5nZXRTb3J0SW5kZXgoKTp0aGlzLmlzRW1wdHkoKSYmZS5pc0VtcHR5KCk/MDp0aGlzLmlzRW1wdHkoKT8tMTplLmlzRW1wdHkoKT8xOnRoaXMuY29tcGFyZVRvU2FtZUNsYXNzKHQpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0sdD1hcmd1bWVudHNbMV0sZT1uO3JldHVybiB0aGlzLmdldFNvcnRJbmRleCgpIT09ZS5nZXRTb3J0SW5kZXgoKT90aGlzLmdldFNvcnRJbmRleCgpLWUuZ2V0U29ydEluZGV4KCk6dGhpcy5pc0VtcHR5KCkmJmUuaXNFbXB0eSgpPzA6dGhpcy5pc0VtcHR5KCk/LTE6ZS5pc0VtcHR5KCk/MTp0aGlzLmNvbXBhcmVUb1NhbWVDbGFzcyhuLHQpfX0sZ2V0VXNlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2VyRGF0YX0sZ2V0U1JJRDpmdW5jdGlvbigpe3JldHVybiB0aGlzLlNSSUR9LGdldEVudmVsb3BlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLnRvR2VvbWV0cnkodGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkpfSxjaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0KXtpZih0LmdldFNvcnRJbmRleCgpPT09Qi5TT1JUSU5ERVhfR0VPTUVUUllDT0xMRUNUSU9OKXRocm93IG5ldyBjfSxlcXVhbDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT1uP3QuZXF1YWxzKGUpOnQuZGlzdGFuY2UoZSk8PW59LG5vcm06ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvcHkoKTtyZXR1cm4gdC5ub3JtYWxpemUoKSx0fSxnZXRQcmVjaXNpb25Nb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZhY3RvcnkuZ2V0UHJlY2lzaW9uTW9kZWwoKX0sZ2V0RW52ZWxvcGVJbnRlcm5hbDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5lbnZlbG9wZSYmKHRoaXMuZW52ZWxvcGU9dGhpcy5jb21wdXRlRW52ZWxvcGVJbnRlcm5hbCgpKSxuZXcgQyh0aGlzLmVudmVsb3BlKX0sc2V0U1JJRDpmdW5jdGlvbih0KXt0aGlzLlNSSUQ9dH0sc2V0VXNlckRhdGE6ZnVuY3Rpb24odCl7dGhpcy51c2VyRGF0YT10fSxjb21wYXJlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuaXRlcmF0b3IoKSxpPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKSYmaS5oYXNOZXh0KCk7KXt2YXIgcj1uLm5leHQoKSxzPWkubmV4dCgpLHM9ci5jb21wYXJlVG8ocyk7aWYoMCE9PXMpcmV0dXJuIHN9cmV0dXJuIG4uaGFzTmV4dCgpPzE6aS5oYXNOZXh0KCk/LTE6MH0saGFzaENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkuaGFzaENvZGUoKX0saXNHZW9tZXRyeUNvbGxlY3Rpb25PckRlcml2ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTb3J0SW5kZXgoKT09PUIuU09SVElOREVYX0dFT01FVFJZQ09MTEVDVElPTnx8dGhpcy5nZXRTb3J0SW5kZXgoKT09PUIuU09SVElOREVYX01VTFRJUE9JTlR8fHRoaXMuZ2V0U29ydEluZGV4KCk9PT1CLlNPUlRJTkRFWF9NVUxUSUxJTkVTVFJJTkd8fHRoaXMuZ2V0U29ydEluZGV4KCk9PT1CLlNPUlRJTkRFWF9NVUxUSVBPTFlHT059LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3IsaSxvXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQn19KSxCLmhhc05vbkVtcHR5RWxlbWVudHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRbZV0uaXNFbXB0eSgpKXJldHVybiEwO3JldHVybiExfSxCLmhhc051bGxFbGVtZW50cz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZihudWxsPT09dFtlXSlyZXR1cm4hMDtyZXR1cm4hMX0sQi5zZXJpYWxWZXJzaW9uVUlEPTB4Nzk5ZWE0NjUyMjg1NGMwMCxCLlNPUlRJTkRFWF9QT0lOVD0wLEIuU09SVElOREVYX01VTFRJUE9JTlQ9MSxCLlNPUlRJTkRFWF9MSU5FU1RSSU5HPTIsQi5TT1JUSU5ERVhfTElORUFSUklORz0zLEIuU09SVElOREVYX01VTFRJTElORVNUUklORz00LEIuU09SVElOREVYX1BPTFlHT049NSxCLlNPUlRJTkRFWF9NVUxUSVBPTFlHT049NixCLlNPUlRJTkRFWF9HRU9NRVRSWUNPTExFQ1RJT049NyxCLmdlb21ldHJ5Q2hhbmdlZEZpbHRlcj17aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bcV19LGZpbHRlcjpmdW5jdGlvbih0KXt0Lmdlb21ldHJ5Q2hhbmdlZEFjdGlvbigpfX0sZSh6LnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gen19KSxlKFYucHJvdG90eXBlLHtpc0luQm91bmRhcnk6ZnVuY3Rpb24odCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBWfX0pLGUoay5wcm90b3R5cGUse2lzSW5Cb3VuZGFyeTpmdW5jdGlvbih0KXtyZXR1cm4gdCUyPT0xfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltWXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4ga319KSxlKFkucHJvdG90eXBlLHtpc0luQm91bmRhcnk6ZnVuY3Rpb24odCl7cmV0dXJuIDA8dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bVl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFl9fSksZShVLnByb3RvdHlwZSx7aXNJbkJvdW5kYXJ5OmZ1bmN0aW9uKHQpe3JldHVybiAxPHR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW1ZdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBVfX0pLGUoWC5wcm90b3R5cGUse2lzSW5Cb3VuZGFyeTpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW1ZdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBYfX0pLFYuTW9kMkJvdW5kYXJ5Tm9kZVJ1bGU9ayxWLkVuZFBvaW50Qm91bmRhcnlOb2RlUnVsZT1ZLFYuTXVsdGlWYWxlbnRFbmRQb2ludEJvdW5kYXJ5Tm9kZVJ1bGU9VSxWLk1vbm9WYWxlbnRFbmRQb2ludEJvdW5kYXJ5Tm9kZVJ1bGU9WCxWLk1PRDJfQk9VTkRBUllfUlVMRT1uZXcgayxWLkVORFBPSU5UX0JPVU5EQVJZX1JVTEU9bmV3IFksVi5NVUxUSVZBTEVOVF9FTkRQT0lOVF9CT1VOREFSWV9SVUxFPW5ldyBVLFYuTU9OT1ZBTEVOVF9FTkRQT0lOVF9CT1VOREFSWV9SVUxFPW5ldyBYLFYuT0dDX1NGU19CT1VOREFSWV9SVUxFPVYuTU9EMl9CT1VOREFSWV9SVUxFLGUoSC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEh9fSksSC5pc1Jpbmc9ZnVuY3Rpb24odCl7cmV0dXJuISh0Lmxlbmd0aDw0KSYmISF0WzBdLmVxdWFsczJEKHRbdC5sZW5ndGgtMV0pfSxILnB0Tm90SW5MaXN0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aWYoSC5pbmRleE9mKGksZSk8MClyZXR1cm4gaX1yZXR1cm4gbnVsbH0sSC5zY3JvbGw9ZnVuY3Rpb24odCxlKXt2YXIgbj1ILmluZGV4T2YoZSx0KTtpZihuPDApcmV0dXJuIG51bGw7ZT1uZXcgQXJyYXkodC5sZW5ndGgpLmZpbGwobnVsbCk7QS5hcnJheWNvcHkodCxuLGUsMCx0Lmxlbmd0aC1uKSxBLmFycmF5Y29weSh0LDAsZSx0Lmxlbmd0aC1uLG4pLEEuYXJyYXljb3B5KGUsMCx0LDAsdC5sZW5ndGgpfSxILmVxdWFscz1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYodD09PWUpcmV0dXJuITA7aWYobnVsbD09PXR8fG51bGw9PT1lKXJldHVybiExO2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXF1YWxzKGVbbl0pKXJldHVybiExO3JldHVybiEwfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl07aWYoaT09PXIpcmV0dXJuITA7aWYobnVsbD09PWl8fG51bGw9PT1yKXJldHVybiExO2lmKGkubGVuZ3RoIT09ci5sZW5ndGgpcmV0dXJuITE7Zm9yKG49MDtuPGkubGVuZ3RoO24rKylpZigwIT09cy5jb21wYXJlKGlbbl0scltuXSkpcmV0dXJuITE7cmV0dXJuITB9fSxILmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgTixpPTA7aTx0Lmxlbmd0aDtpKyspZS5pbnRlcnNlY3RzKHRbaV0pJiZuLmFkZCh0W2ldLCEwKTtyZXR1cm4gbi50b0Nvb3JkaW5hdGVBcnJheSgpfSxILmhhc1JlcGVhdGVkUG9pbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZS0xXS5lcXVhbHModFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LEgucmVtb3ZlUmVwZWF0ZWRQb2ludHM9ZnVuY3Rpb24odCl7cmV0dXJuIEguaGFzUmVwZWF0ZWRQb2ludHModCk/bmV3IE4odCwhMSkudG9Db29yZGluYXRlQXJyYXkoKTp0fSxILnJldmVyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLTEsbj1NYXRoLnRydW5jKGUvMiksaT0wO2k8PW47aSsrKXt2YXIgcj10W2ldO3RbaV09dFtlLWldLHRbZS1pXT1yfX0sSC5yZW1vdmVOdWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtuPHQubGVuZ3RoO24rKyludWxsIT09dFtuXSYmZSsrO3ZhciBpPW5ldyBBcnJheShlKS5maWxsKG51bGwpO2lmKDA9PT1lKXJldHVybiBpO2Zvcih2YXIgcj0wLG49MDtuPHQubGVuZ3RoO24rKyludWxsIT09dFtuXSYmKGlbcisrXT10W25dKTtyZXR1cm4gaX0sSC5jb3B5RGVlcD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IEFycmF5KHQubGVuZ3RoKS5maWxsKG51bGwpLG49MDtuPHQubGVuZ3RoO24rKyllW25dPW5ldyBkKHRbbl0pO3JldHVybiBlfWlmKDU9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sbz1hcmd1bWVudHNbM10sYT1hcmd1bWVudHNbNF0sbj0wO248YTtuKyspc1tvK25dPW5ldyBkKGlbcituXSl9LEguaXNFcXVhbFJldmVyc2VkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl0scj1lW3QubGVuZ3RoLW4tMV07aWYoMCE9PWkuY29tcGFyZVRvKHIpKXJldHVybiExfXJldHVybiEwfSxILmVudmVsb3BlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQyxuPTA7bjx0Lmxlbmd0aDtuKyspZS5leHBhbmRUb0luY2x1ZGUodFtuXSk7cmV0dXJuIGV9LEgudG9Db29yZGluYXRlQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIHQudG9BcnJheShILmNvb3JkQXJyYXlUeXBlKX0sSC5hdExlYXN0TkNvb3JkaW5hdGVzT3JOb3RoaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubGVuZ3RoPj10P2U6W119LEguaW5kZXhPZj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKHQuZXF1YWxzKGVbbl0pKXJldHVybiBuO3JldHVybi0xfSxILmluY3JlYXNpbmdEaXJlY3Rpb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTxNYXRoLnRydW5jKHQubGVuZ3RoLzIpO2UrKyl7dmFyIG49dC5sZW5ndGgtMS1lLG49dFtlXS5jb21wYXJlVG8odFtuXSk7aWYoMCE9PW4pcmV0dXJuIG59cmV0dXJuIDF9LEguY29tcGFyZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGgmJm48ZS5sZW5ndGg7KXt2YXIgaT10W25dLmNvbXBhcmVUbyhlW25dKTtpZigwIT09aSlyZXR1cm4gaTtuKyt9cmV0dXJuIG48ZS5sZW5ndGg/LTE6bjx0Lmxlbmd0aD8xOjB9LEgubWluQ29vcmRpbmF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPTA7bjx0Lmxlbmd0aDtuKyspKG51bGw9PT1lfHwwPGUuY29tcGFyZVRvKHRbbl0pKSYmKGU9dFtuXSk7cmV0dXJuIGV9LEguZXh0cmFjdD1mdW5jdGlvbih0LGUsbil7ZT1ULmNsYW1wKGUsMCx0Lmxlbmd0aCk7dmFyIGk9KG49VC5jbGFtcChuLC0xLHQubGVuZ3RoKSk8MD8wOm4tZSsxO2U+PXQubGVuZ3RoJiYoaT0wKSxuPGUmJihpPTApO3ZhciByPW5ldyBBcnJheShpKS5maWxsKG51bGwpO2lmKDA9PT1pKXJldHVybiByO2Zvcih2YXIgcz0wLG89ZTtvPD1uO28rKylyW3MrK109dFtvXTtyZXR1cm4gcn0sZShXLnByb3RvdHlwZSx7Y29tcGFyZTpmdW5jdGlvbih0LGUpe3JldHVybiBILmNvbXBhcmUodCxlKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bc119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFd9fSksZShqLnByb3RvdHlwZSx7Y29tcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQsdD1lO2lmKG4ubGVuZ3RoPHQubGVuZ3RoKXJldHVybi0xO2lmKG4ubGVuZ3RoPnQubGVuZ3RoKXJldHVybiAxO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4gMDtlPUguY29tcGFyZShuLHQpO3JldHVybiBILmlzRXF1YWxSZXZlcnNlZChuLHQpPzA6ZX0sT0xEY29tcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQsaT1lO2lmKG4ubGVuZ3RoPGkubGVuZ3RoKXJldHVybi0xO2lmKG4ubGVuZ3RoPmkubGVuZ3RoKXJldHVybiAxO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4gMDtmb3IodmFyIHI9SC5pbmNyZWFzaW5nRGlyZWN0aW9uKG4pLHM9SC5pbmNyZWFzaW5nRGlyZWN0aW9uKGkpLG89MDxyPzA6bi5sZW5ndGgtMSxhPTA8cz8wOm4ubGVuZ3RoLTEsdT0wO3U8bi5sZW5ndGg7dSsrKXt2YXIgbD1uW29dLmNvbXBhcmVUbyhpW2FdKTtpZigwIT09bClyZXR1cm4gbDtvKz1yLGErPXN9cmV0dXJuIDB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3NdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBqfX0pLEguRm9yd2FyZENvbXBhcmF0b3I9VyxILkJpZGlyZWN0aW9uYWxDb21wYXJhdG9yPWosSC5jb29yZEFycmF5VHlwZT1uZXcgQXJyYXkoMCkuZmlsbChudWxsKSxLLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt9LEsucHJvdG90eXBlLnB1dD1mdW5jdGlvbigpe30sSy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe30sSy5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7fSxLLnByb3RvdHlwZS5lbnRyeVNldD1mdW5jdGlvbigpe30sWi5wcm90b3R5cGU9bmV3IEssKEoucHJvdG90eXBlPW5ldyBtKS5jb250YWlucz1mdW5jdGlvbigpe30sKFEucHJvdG90eXBlPW5ldyBKKS5jb250YWlucz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXtpZih0aGlzLmFycmF5X1tlXT09PXQpcmV0dXJuITB9cmV0dXJuITF9LFEucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250YWlucyh0KSYmKHRoaXMuYXJyYXlfLnB1c2godCksITApfSxRLnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspdGhpcy5hZGQoZS5uZXh0KCkpO3JldHVybiEwfSxRLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IGphdmFzY3JpcHQudXRpbC5PcGVyYXRpb25Ob3RTdXBwb3J0ZWR9LFEucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnJheV8ubGVuZ3RofSxRLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmFycmF5Xy5sZW5ndGh9LFEucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspdC5wdXNoKHRoaXMuYXJyYXlfW2VdKTtyZXR1cm4gdH0sUS5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZzKHRoaXMpfTt2YXIgRnM9ZnVuY3Rpb24odCl7dGhpcy5oYXNoU2V0Xz10LHRoaXMucG9zaXRpb25fPTB9O0ZzLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5wb3NpdGlvbl89PT10aGlzLmhhc2hTZXRfLnNpemUoKSl0aHJvdyBuZXcgeDtyZXR1cm4gdGhpcy5oYXNoU2V0Xy5hcnJheV9bdGhpcy5wb3NpdGlvbl8rK119LEZzLnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zaXRpb25fPHRoaXMuaGFzaFNldF8uc2l6ZSgpfSxGcy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEV9O3ZhciBHcz0wOyhydC5wcm90b3R5cGU9bmV3IFopLmdldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yb290XztudWxsIT09ZTspe3ZhciBuPXQuY29tcGFyZVRvKGUua2V5KTtpZihuPDApZT1lLmxlZnQ7ZWxzZXtpZighKDA8bikpcmV0dXJuIGUudmFsdWU7ZT1lLnJpZ2h0fX1yZXR1cm4gbnVsbH0scnQucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PT10aGlzLnJvb3RfKXJldHVybiB0aGlzLnJvb3RfPXtrZXk6dCx2YWx1ZTplLGxlZnQ6bnVsbCxyaWdodDpudWxsLHBhcmVudDpudWxsLGNvbG9yOkdzLGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGdldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleX19LHRoaXMuc2l6ZV89MSxudWxsO3ZhciBuLGkscj10aGlzLnJvb3RfO2Rve2lmKG49ciwoaT10LmNvbXBhcmVUbyhyLmtleSkpPDApcj1yLmxlZnQ7ZWxzZXtpZighKDA8aSkpe3ZhciBzPXIudmFsdWU7cmV0dXJuIHIudmFsdWU9ZSxzfXI9ci5yaWdodH19d2hpbGUobnVsbCE9PXIpO3ZhciBvPXtrZXk6dCxsZWZ0Om51bGwscmlnaHQ6bnVsbCx2YWx1ZTplLHBhcmVudDpuLGNvbG9yOkdzLGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGdldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleX19O3JldHVybiBpPDA/bi5sZWZ0PW86bi5yaWdodD1vLHRoaXMuZml4QWZ0ZXJJbnNlcnRpb24obyksdGhpcy5zaXplXysrLG51bGx9LHJ0LnByb3RvdHlwZS5maXhBZnRlckluc2VydGlvbj1mdW5jdGlvbih0KXtmb3IodC5jb2xvcj0xO251bGwhPXQmJnQhPXRoaXMucm9vdF8mJjE9PXQucGFyZW50LmNvbG9yOyl7dmFyIGU7dHQodCk9PW50KHR0KHR0KHQpKSk/MT09JChlPWl0KHR0KHR0KHQpKSkpPyhldCh0dCh0KSxHcyksZXQoZSxHcyksZXQodHQodHQodCkpLDEpLHQ9dHQodHQodCkpKToodD09aXQodHQodCkpJiYodD10dCh0KSx0aGlzLnJvdGF0ZUxlZnQodCkpLGV0KHR0KHQpLEdzKSxldCh0dCh0dCh0KSksMSksdGhpcy5yb3RhdGVSaWdodCh0dCh0dCh0KSkpKToxPT0kKGU9bnQodHQodHQodCkpKSk/KGV0KHR0KHQpLEdzKSxldChlLEdzKSxldCh0dCh0dCh0KSksMSksdD10dCh0dCh0KSkpOih0PT1udCh0dCh0KSkmJih0PXR0KHQpLHRoaXMucm90YXRlUmlnaHQodCkpLGV0KHR0KHQpLEdzKSxldCh0dCh0dCh0KSksMSksdGhpcy5yb3RhdGVMZWZ0KHR0KHR0KHQpKSkpfXRoaXMucm9vdF8uY29sb3I9R3N9LHJ0LnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgSSxlPXRoaXMuZ2V0Rmlyc3RFbnRyeSgpO2lmKG51bGwhPT1lKWZvcih0LmFkZChlLnZhbHVlKTtudWxsIT09KGU9cnQuc3VjY2Vzc29yKGUpKTspdC5hZGQoZS52YWx1ZSk7cmV0dXJuIHR9LHJ0LnByb3RvdHlwZS5lbnRyeVNldD1mdW5jdGlvbigpe3ZhciB0PW5ldyBRLGU9dGhpcy5nZXRGaXJzdEVudHJ5KCk7aWYobnVsbCE9PWUpZm9yKHQuYWRkKGUpO251bGwhPT0oZT1ydC5zdWNjZXNzb3IoZSkpOyl0LmFkZChlKTtyZXR1cm4gdH0scnQucHJvdG90eXBlLnJvdGF0ZUxlZnQ9ZnVuY3Rpb24odCl7dmFyIGU7bnVsbCE9dCYmKGU9dC5yaWdodCx0LnJpZ2h0PWUubGVmdCxudWxsIT1lLmxlZnQmJihlLmxlZnQucGFyZW50PXQpLGUucGFyZW50PXQucGFyZW50LG51bGw9PXQucGFyZW50P3RoaXMucm9vdF89ZTp0LnBhcmVudC5sZWZ0PT10P3QucGFyZW50LmxlZnQ9ZTp0LnBhcmVudC5yaWdodD1lLChlLmxlZnQ9dCkucGFyZW50PWUpfSxydC5wcm90b3R5cGUucm90YXRlUmlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU7bnVsbCE9dCYmKGU9dC5sZWZ0LHQubGVmdD1lLnJpZ2h0LG51bGwhPWUucmlnaHQmJihlLnJpZ2h0LnBhcmVudD10KSxlLnBhcmVudD10LnBhcmVudCxudWxsPT10LnBhcmVudD90aGlzLnJvb3RfPWU6dC5wYXJlbnQucmlnaHQ9PXQ/dC5wYXJlbnQucmlnaHQ9ZTp0LnBhcmVudC5sZWZ0PWUsKGUucmlnaHQ9dCkucGFyZW50PWUpfSxydC5wcm90b3R5cGUuZ2V0Rmlyc3RFbnRyeT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucm9vdF87aWYobnVsbCE9dClmb3IoO251bGwhPXQubGVmdDspdD10LmxlZnQ7cmV0dXJuIHR9LHJ0LnN1Y2Nlc3Nvcj1mdW5jdGlvbih0KXtpZihudWxsPT09dClyZXR1cm4gbnVsbDtpZihudWxsIT09dC5yaWdodCl7Zm9yKHZhciBlPXQucmlnaHQ7bnVsbCE9PWUubGVmdDspZT1lLmxlZnQ7cmV0dXJuIGV9Zm9yKHZhciBlPXQucGFyZW50LG49dDtudWxsIT09ZSYmbj09PWUucmlnaHQ7KWU9KG49ZSkucGFyZW50O3JldHVybiBlfSxydC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemVffSxlKHN0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gc3R9fSksb3QucHJvdG90eXBlPW5ldyBKLChhdC5wcm90b3R5cGU9bmV3IG90KS5jb250YWlucz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXtpZigwPT09dGhpcy5hcnJheV9bZV0uY29tcGFyZVRvKHQpKXJldHVybiEwfXJldHVybiExfSxhdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGFpbnModCkpcmV0dXJuITE7Zm9yKHZhciBlPTAsbj10aGlzLmFycmF5Xy5sZW5ndGg7ZTxuO2UrKyl7aWYoMT09PXRoaXMuYXJyYXlfW2VdLmNvbXBhcmVUbyh0KSlyZXR1cm4gdGhpcy5hcnJheV8uc3BsaWNlKGUsMCx0KSwhMH1yZXR1cm4gdGhpcy5hcnJheV8ucHVzaCh0KSwhMH0sYXQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSk7cmV0dXJuITB9LGF0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEV9LGF0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlfLmxlbmd0aH0sYXQucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sYXQucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspdC5wdXNoKHRoaXMuYXJyYXlfW2VdKTtyZXR1cm4gdH0sYXQucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBxcyh0aGlzKX07dmFyIHFzPWZ1bmN0aW9uKHQpe3RoaXMudHJlZVNldF89dCx0aGlzLnBvc2l0aW9uXz0wfTtxcy5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMucG9zaXRpb25fPT09dGhpcy50cmVlU2V0Xy5zaXplKCkpdGhyb3cgbmV3IHg7cmV0dXJuIHRoaXMudHJlZVNldF8uYXJyYXlfW3RoaXMucG9zaXRpb25fKytdfSxxcy5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uXzx0aGlzLnRyZWVTZXRfLnNpemUoKX0scXMucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyBFfSx1dC5zb3J0PWZ1bmN0aW9uKCl7dmFyIHQsZSxuLGkscj1hcmd1bWVudHNbMF07aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jb21wYXJlVG8oZSl9LHZvaWQgci5zb3J0KGkpO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKW49YXJndW1lbnRzWzFdLGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5jb21wYXJlKHQsZSl9LHIuc29ydChpKTtlbHNlIGlmKDMhPT1hcmd1bWVudHMubGVuZ3RoKXtpZig0PT09YXJndW1lbnRzLmxlbmd0aClmb3IoZT1yLnNsaWNlKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pLG49YXJndW1lbnRzWzNdLGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5jb21wYXJlKHQsZSl9LGUuc29ydChpKSxzPXIuc2xpY2UoMCxhcmd1bWVudHNbMV0pLmNvbmNhdChlLHIuc2xpY2UoYXJndW1lbnRzWzJdLHIubGVuZ3RoKSksci5zcGxpY2UoMCxyLmxlbmd0aCksdD0wO3Q8cy5sZW5ndGg7dCsrKXIucHVzaChzW3RdKX1lbHNleyhlPXIuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSkpLnNvcnQoKTt2YXIgcz1yLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoZSxyLnNsaWNlKGFyZ3VtZW50c1syXSxyLmxlbmd0aCkpO2ZvcihyLnNwbGljZSgwLHIubGVuZ3RoKSx0PTA7dDxzLmxlbmd0aDt0Kyspci5wdXNoKHNbdF0pfX0sdXQuYXNMaXN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPTAsaT10Lmxlbmd0aDtuPGk7bisrKWUuYWRkKHRbbl0pO3JldHVybiBlfSxlKGx0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbHR9fSksbHQudG9EaW1lbnNpb25TeW1ib2w9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgbHQuRkFMU0U6cmV0dXJuIGx0LlNZTV9GQUxTRTtjYXNlIGx0LlRSVUU6cmV0dXJuIGx0LlNZTV9UUlVFO2Nhc2UgbHQuRE9OVENBUkU6cmV0dXJuIGx0LlNZTV9ET05UQ0FSRTtjYXNlIGx0LlA6cmV0dXJuIGx0LlNZTV9QO2Nhc2UgbHQuTDpyZXR1cm4gbHQuU1lNX0w7Y2FzZSBsdC5BOnJldHVybiBsdC5TWU1fQX10aHJvdyBuZXcgY30sbHQudG9EaW1lbnNpb25WYWx1ZT1mdW5jdGlvbih0KXtzd2l0Y2goTy50b1VwcGVyQ2FzZSh0KSl7Y2FzZSBsdC5TWU1fRkFMU0U6cmV0dXJuIGx0LkZBTFNFO2Nhc2UgbHQuU1lNX1RSVUU6cmV0dXJuIGx0LlRSVUU7Y2FzZSBsdC5TWU1fRE9OVENBUkU6cmV0dXJuIGx0LkRPTlRDQVJFO2Nhc2UgbHQuU1lNX1A6cmV0dXJuIGx0LlA7Y2FzZSBsdC5TWU1fTDpyZXR1cm4gbHQuTDtjYXNlIGx0LlNZTV9BOnJldHVybiBsdC5BfXRocm93IG5ldyBjfSxsdC5QPTAsbHQuTD0xLGx0LkE9MixsdC5GQUxTRT0tMSxsdC5UUlVFPS0yLGx0LkRPTlRDQVJFPS0zLGx0LlNZTV9GQUxTRT1cIkZcIixsdC5TWU1fVFJVRT1cIlRcIixsdC5TWU1fRE9OVENBUkU9XCIqXCIsbHQuU1lNX1A9XCIwXCIsbHQuU1lNX0w9XCIxXCIsbHQuU1lNX0E9XCIyXCIsZShodC5wcm90b3R5cGUse2ZpbHRlcjpmdW5jdGlvbih0KXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGh0fX0pLGUoY3QucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCxlKXt9LGlzRG9uZTpmdW5jdGlvbigpe30saXNHZW9tZXRyeUNoYW5nZWQ6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGN0fX0pLGEoZnQsQiksZShmdC5wcm90b3R5cGUse2NvbXB1dGVFbnZlbG9wZUludGVybmFsOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBDLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQuZXhwYW5kVG9JbmNsdWRlKHRoaXMuZ2VvbWV0cmllc1tlXS5nZXRFbnZlbG9wZUludGVybmFsKCkpO3JldHVybiB0fSxnZXRHZW9tZXRyeU46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2VvbWV0cmllc1t0XX0sZ2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEIuU09SVElOREVYX0dFT01FVFJZQ09MTEVDVElPTn0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2V0TnVtUG9pbnRzKCkpLmZpbGwobnVsbCksZT0tMSxuPTA7bjx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO24rKylmb3IodmFyIGk9dGhpcy5nZW9tZXRyaWVzW25dLmdldENvb3JkaW5hdGVzKCkscj0wO3I8aS5sZW5ndGg7cisrKXRbKytlXT1pW3JdO3JldHVybiB0fSxnZXRBcmVhOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdCs9dGhpcy5nZW9tZXRyaWVzW2VdLmdldEFyZWEoKTtyZXR1cm4gdH0sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gQi5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyh0KSlyZXR1cm4hMTt2YXIgbj10O2lmKHRoaXMuZ2VvbWV0cmllcy5sZW5ndGghPT1uLmdlb21ldHJpZXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgaT0wO2k8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtpKyspaWYoIXRoaXMuZ2VvbWV0cmllc1tpXS5lcXVhbHNFeGFjdChuLmdlb21ldHJpZXNbaV0sZSkpcmV0dXJuITE7cmV0dXJuITB9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDt0KyspdGhpcy5nZW9tZXRyaWVzW3RdLm5vcm1hbGl6ZSgpO3V0LnNvcnQodGhpcy5nZW9tZXRyaWVzKX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9udWxsOnRoaXMuZ2VvbWV0cmllc1swXS5nZXRDb29yZGluYXRlKCl9LGdldEJvdW5kYXJ5RGltZW5zaW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWx0LkZBTFNFLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQ9TWF0aC5tYXgodCx0aGlzLmdlb21ldHJpZXNbZV0uZ2V0Qm91bmRhcnlEaW1lbnNpb24oKSk7cmV0dXJuIHR9LGdldERpbWVuc2lvbjpmdW5jdGlvbigpe2Zvcih2YXIgdD1sdC5GQUxTRSxlPTA7ZTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2UrKyl0PU1hdGgubWF4KHQsdGhpcy5nZW9tZXRyaWVzW2VdLmdldERpbWVuc2lvbigpKTtyZXR1cm4gdH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdCs9dGhpcy5nZW9tZXRyaWVzW2VdLmdldExlbmd0aCgpO3JldHVybiB0fSxnZXROdW1Qb2ludHM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2UrKyl0Kz10aGlzLmdlb21ldHJpZXNbZV0uZ2V0TnVtUG9pbnRzKCk7cmV0dXJuIHR9LGdldE51bUdlb21ldHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZW9tZXRyaWVzLmxlbmd0aH0scmV2ZXJzZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdlb21ldHJpZXMubGVuZ3RoLGU9bmV3IEFycmF5KHQpLmZpbGwobnVsbCksbj0wO248dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtuKyspZVtuXT10aGlzLmdlb21ldHJpZXNbbl0ucmV2ZXJzZSgpO3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oZSl9LGNvbXBhcmVUb1NhbWVDbGFzczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgYXQodXQuYXNMaXN0KHRoaXMuZ2VvbWV0cmllcykpLHQ9bmV3IGF0KHV0LmFzTGlzdCh0Lmdlb21ldHJpZXMpKTtyZXR1cm4gdGhpcy5jb21wYXJlKGUsdCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMF0scj10aGlzLmdldE51bUdlb21ldHJpZXMoKSxzPWkuZ2V0TnVtR2VvbWV0cmllcygpLG89MDtvPHImJm88czspe3ZhciBhPXRoaXMuZ2V0R2VvbWV0cnlOKG8pLHU9aS5nZXRHZW9tZXRyeU4obyksdT1hLmNvbXBhcmVUb1NhbWVDbGFzcyh1LG4pO2lmKDAhPT11KXJldHVybiB1O28rK31yZXR1cm4gbzxyPzE6bzxzPy0xOjB9fSxhcHBseTpmdW5jdGlvbigpe2lmKFIoYXJndW1lbnRzWzBdLHopKWZvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdGhpcy5nZW9tZXRyaWVzW2VdLmFwcGx5KHQpO2Vsc2UgaWYoUihhcmd1bWVudHNbMF0sY3QpKXt2YXIgbj1hcmd1bWVudHNbMF07aWYoMD09PXRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpcmV0dXJuIG51bGw7Zm9yKGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgmJih0aGlzLmdlb21ldHJpZXNbZV0uYXBwbHkobiksIW4uaXNEb25lKCkpO2UrKyk7bi5pc0dlb21ldHJ5Q2hhbmdlZCgpJiZ0aGlzLmdlb21ldHJ5Q2hhbmdlZCgpfWVsc2UgaWYoUihhcmd1bWVudHNbMF0saHQpKXt2YXIgaT1hcmd1bWVudHNbMF07aS5maWx0ZXIodGhpcyk7Zm9yKGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXRoaXMuZ2VvbWV0cmllc1tlXS5hcHBseShpKX1lbHNlIGlmKFIoYXJndW1lbnRzWzBdLHEpKXt2YXIgcj1hcmd1bWVudHNbMF07ci5maWx0ZXIodGhpcyk7Zm9yKGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXRoaXMuZ2VvbWV0cmllc1tlXS5hcHBseShyKX19LGdldEJvdW5kYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odGhpcyksbC5zaG91bGROZXZlclJlYWNoSGVyZSgpLG51bGx9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Qi5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTt0Lmdlb21ldHJpZXM9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2UrKyl0Lmdlb21ldHJpZXNbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNsb25lKCk7cmV0dXJuIHR9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiR2VvbWV0cnlDb2xsZWN0aW9uXCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IGZ0KHQsdGhpcy5mYWN0b3J5KX0saXNFbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDt0KyspaWYoIXRoaXMuZ2VvbWV0cmllc1t0XS5pc0VtcHR5KCkpcmV0dXJuITE7cmV0dXJuITB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGZ0fX0pLGZ0LnNlcmlhbFZlcnNpb25VSUQ9LTB4NGYwN2JjYjFmODU3ZDgwMCxhKGd0LGZ0KSxlKGd0LnByb3RvdHlwZSx7Z2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEIuU09SVElOREVYX01VTFRJTElORVNUUklOR30sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZnQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuISF0aGlzLmlzRXF1aXZhbGVudENsYXNzKHQpJiZmdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuY2FsbCh0aGlzLHQsZSl9LGdldEJvdW5kYXJ5RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDbG9zZWQoKT9sdC5GQUxTRTowfSxpc0Nsb3NlZDpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiExO2Zvcih2YXIgdD0wO3Q8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDt0KyspaWYoIXRoaXMuZ2VvbWV0cmllc1t0XS5pc0Nsb3NlZCgpKXJldHVybiExO3JldHVybiEwfSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMX0scmV2ZXJzZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdlb21ldHJpZXMubGVuZ3RoLGU9bmV3IEFycmF5KHQpLmZpbGwobnVsbCksbj0wO248dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtuKyspZVt0LTEtbl09dGhpcy5nZW9tZXRyaWVzW25dLnJldmVyc2UoKTtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGUpfSxnZXRCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgZHQodGhpcykuZ2V0Qm91bmRhcnkoKX0sZ2V0R2VvbWV0cnlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJNdWx0aUxpbmVTdHJpbmdcIn0sY29weTpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5nZW9tZXRyaWVzLmxlbmd0aCkuZmlsbChudWxsKSxlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXT10aGlzLmdlb21ldHJpZXNbZV0uY29weSgpO3JldHVybiBuZXcgZ3QodCx0aGlzLmZhY3RvcnkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGd0fX0pLGd0LnNlcmlhbFZlcnNpb25VSUQ9MHg3MTU1ZDJhYjRhZmE4MDAwLGUoZHQucHJvdG90eXBlLHtib3VuZGFyeU11bHRpTGluZVN0cmluZzpmdW5jdGlvbih0KXtpZih0aGlzLmdlb20uaXNFbXB0eSgpKXJldHVybiB0aGlzLmdldEVtcHR5TXVsdGlQb2ludCgpO3Q9dGhpcy5jb21wdXRlQm91bmRhcnlDb29yZGluYXRlcyh0KTtyZXR1cm4gMT09PXQubGVuZ3RoP3RoaXMuZ2VvbUZhY3QuY3JlYXRlUG9pbnQodFswXSk6dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50RnJvbUNvb3Jkcyh0KX0sZ2V0Qm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZW9tIGluc3RhbmNlb2YgQ3Q/dGhpcy5ib3VuZGFyeUxpbmVTdHJpbmcodGhpcy5nZW9tKTp0aGlzLmdlb20gaW5zdGFuY2VvZiBndD90aGlzLmJvdW5kYXJ5TXVsdGlMaW5lU3RyaW5nKHRoaXMuZ2VvbSk6dGhpcy5nZW9tLmdldEJvdW5kYXJ5KCl9LGJvdW5kYXJ5TGluZVN0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZW9tLmlzRW1wdHkoKT90aGlzLmdldEVtcHR5TXVsdGlQb2ludCgpOnQuaXNDbG9zZWQoKT90aGlzLmJuUnVsZS5pc0luQm91bmRhcnkoMik/dC5nZXRTdGFydFBvaW50KCk6dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50KCk6dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50KFt0LmdldFN0YXJ0UG9pbnQoKSx0LmdldEVuZFBvaW50KCldKX0sZ2V0RW1wdHlNdWx0aVBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2VvbUZhY3QuY3JlYXRlTXVsdGlQb2ludCgpfSxjb21wdXRlQm91bmRhcnlDb29yZGluYXRlczpmdW5jdGlvbih0KXt2YXIgZT1uZXcgSTt0aGlzLmVuZHBvaW50TWFwPW5ldyBydDtmb3IodmFyIG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dC5nZXRHZW9tZXRyeU4obik7MCE9PWkuZ2V0TnVtUG9pbnRzKCkmJih0aGlzLmFkZEVuZHBvaW50KGkuZ2V0Q29vcmRpbmF0ZU4oMCkpLHRoaXMuYWRkRW5kcG9pbnQoaS5nZXRDb29yZGluYXRlTihpLmdldE51bVBvaW50cygpLTEpKSl9Zm9yKHZhciByPXRoaXMuZW5kcG9pbnRNYXAuZW50cnlTZXQoKS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHM9ci5uZXh0KCksbz1zLmdldFZhbHVlKCkuY291bnQ7dGhpcy5iblJ1bGUuaXNJbkJvdW5kYXJ5KG8pJiZlLmFkZChzLmdldEtleSgpKX1yZXR1cm4gSC50b0Nvb3JkaW5hdGVBcnJheShlKX0sYWRkRW5kcG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbmRwb2ludE1hcC5nZXQodCk7bnVsbD09PWUmJihlPW5ldyBwdCx0aGlzLmVuZHBvaW50TWFwLnB1dCh0LGUpKSxlLmNvdW50Kyt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGR0fX0pLGR0LmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP25ldyBkdChhcmd1bWVudHNbMF0pLmdldEJvdW5kYXJ5KCk6Mj09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGR0KGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pLmdldEJvdW5kYXJ5KCk6dm9pZCAwfSxlKHB0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcHR9fSksZShJdC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEl0fX0pLEl0LmNoYXJzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBBcnJheShlKS5maWxsKG51bGwpLGk9MDtpPGU7aSsrKW5baV09dDtyZXR1cm4gbmV3IFN0cmluZyhuKX0sSXQuZ2V0U3RhY2tUcmFjZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1uZXcgdnQsZT1uZXcgbXQ7cmV0dXJuIGFyZ3VtZW50c1swXS5wcmludFN0YWNrVHJhY2UoZSksdC50b1N0cmluZygpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIG49YXJndW1lbnRzWzFdLGk9XCJcIixyPW5ldyBFdChJdC5nZXRTdGFja1RyYWNlKGFyZ3VtZW50c1swXSkpLHM9MDtzPG47cysrKXRyeXtpKz1yLnJlYWRMaW5lKCkrSXQuTkVXTElORX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiB4dCkpdGhyb3cgdDtsLnNob3VsZE5ldmVyUmVhY2hIZXJlKCl9cmV0dXJuIGl9fSxJdC5zcGxpdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lLmxlbmd0aCxpPW5ldyBJLHI9XCJcIit0LHM9ci5pbmRleE9mKGUpOzA8PXM7KXt2YXIgbz1yLnN1YnN0cmluZygwLHMpO2kuYWRkKG8pLHM9KHI9ci5zdWJzdHJpbmcocytuKSkuaW5kZXhPZihlKX0wPHIubGVuZ3RoJiZpLmFkZChyKTtmb3IodmFyIGE9bmV3IEFycmF5KGkuc2l6ZSgpKS5maWxsKG51bGwpLHU9MDt1PGEubGVuZ3RoO3UrKylhW3VdPWkuZ2V0KHUpO3JldHVybiBhfSxJdC50b1N0cmluZz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIEl0LlNJTVBMRV9PUkRJTkFURV9GT1JNQVQuZm9ybWF0KHQpfX0sSXQuc3BhY2VzPWZ1bmN0aW9uKHQpe3JldHVybiBJdC5jaGFycyhcIiBcIix0KX0sSXQuTkVXTElORT1BLmdldFByb3BlcnR5KFwibGluZS5zZXBhcmF0b3JcIiksSXQuU0lNUExFX09SRElOQVRFX0ZPUk1BVD1uZXcgZnVuY3Rpb24oKXt9LGUoTnQucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBOdH19KSxOdC5jb3B5Q29vcmQ9ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciByPU1hdGgubWluKHQuZ2V0RGltZW5zaW9uKCksbi5nZXREaW1lbnNpb24oKSkscz0wO3M8cjtzKyspbi5zZXRPcmRpbmF0ZShpLHMsdC5nZXRPcmRpbmF0ZShlLHMpKX0sTnQuaXNSaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2l6ZSgpO3JldHVybiAwPT09ZXx8IShlPD0zKSYmKHQuZ2V0T3JkaW5hdGUoMCxELlgpPT09dC5nZXRPcmRpbmF0ZShlLTEsRC5YKSYmdC5nZXRPcmRpbmF0ZSgwLEQuWSk9PT10LmdldE9yZGluYXRlKGUtMSxELlkpKX0sTnQuaXNFcXVhbD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc2l6ZSgpO2lmKG4hPT1lLnNpemUoKSlyZXR1cm4hMTtmb3IodmFyIGk9TWF0aC5taW4odC5nZXREaW1lbnNpb24oKSxlLmdldERpbWVuc2lvbigpKSxyPTA7cjxuO3IrKylmb3IodmFyIHM9MDtzPGk7cysrKXt2YXIgbz10LmdldE9yZGluYXRlKHIscyksYT1lLmdldE9yZGluYXRlKHIscyk7aWYoISh0LmdldE9yZGluYXRlKHIscyk9PT1lLmdldE9yZGluYXRlKHIscyl8fGcuaXNOYU4obykmJmcuaXNOYU4oYSkpKXJldHVybiExfXJldHVybiEwfSxOdC5leHRlbmQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuY3JlYXRlKG4sZS5nZXREaW1lbnNpb24oKSkscj1lLnNpemUoKTtpZihOdC5jb3B5KGUsMCxpLDAsciksMDxyKWZvcih2YXIgcz1yO3M8bjtzKyspTnQuY29weShlLHItMSxpLHMsMSk7cmV0dXJuIGl9LE50LnJldmVyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuc2l6ZSgpLTEsbj1NYXRoLnRydW5jKGUvMiksaT0wO2k8PW47aSsrKU50LnN3YXAodCxpLGUtaSl9LE50LnN3YXA9ZnVuY3Rpb24odCxlLG4pe2lmKGU9PT1uKXJldHVybiBudWxsO2Zvcih2YXIgaT0wO2k8dC5nZXREaW1lbnNpb24oKTtpKyspe3ZhciByPXQuZ2V0T3JkaW5hdGUoZSxpKTt0LnNldE9yZGluYXRlKGUsaSx0LmdldE9yZGluYXRlKG4saSkpLHQuc2V0T3JkaW5hdGUobixpLHIpfX0sTnQuY29weT1mdW5jdGlvbih0LGUsbixpLHIpe2Zvcih2YXIgcz0wO3M8cjtzKyspTnQuY29weUNvb3JkKHQsZStzLG4saStzKX0sTnQudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dC5zaXplKCk7aWYoMD09PWUpcmV0dXJuXCIoKVwiO3ZhciBuPXQuZ2V0RGltZW5zaW9uKCksaT1uZXcgUDtpLmFwcGVuZChcIihcIik7Zm9yKHZhciByPTA7cjxlO3IrKyl7MDxyJiZpLmFwcGVuZChcIiBcIik7Zm9yKHZhciBzPTA7czxuO3MrKykwPHMmJmkuYXBwZW5kKFwiLFwiKSxpLmFwcGVuZChJdC50b1N0cmluZyh0LmdldE9yZGluYXRlKHIscykpKX1yZXR1cm4gaS5hcHBlbmQoXCIpXCIpLGkudG9TdHJpbmcoKX19LE50LmVuc3VyZVZhbGlkUmluZz1mdW5jdGlvbih0LGUpe3ZhciBuPWUuc2l6ZSgpO3JldHVybiAwPT09bj9lOm48PTM/TnQuY3JlYXRlQ2xvc2VkUmluZyh0LGUsNCk6ZS5nZXRPcmRpbmF0ZSgwLEQuWCk9PT1lLmdldE9yZGluYXRlKG4tMSxELlgpJiZlLmdldE9yZGluYXRlKDAsRC5ZKT09PWUuZ2V0T3JkaW5hdGUobi0xLEQuWSk/ZTpOdC5jcmVhdGVDbG9zZWRSaW5nKHQsZSxuKzEpfSxOdC5jcmVhdGVDbG9zZWRSaW5nPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmNyZWF0ZShuLGUuZ2V0RGltZW5zaW9uKCkpLHQ9ZS5zaXplKCk7TnQuY29weShlLDAsaSwwLHQpO2Zvcih2YXIgcj10O3I8bjtyKyspTnQuY29weShlLDAsaSxyLDEpO3JldHVybiBpfSxhKEN0LEIpLGUoQ3QucHJvdG90eXBlLHtjb21wdXRlRW52ZWxvcGVJbnRlcm5hbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9uZXcgQzp0aGlzLnBvaW50cy5leHBhbmRFbnZlbG9wZShuZXcgQyl9LGlzUmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ2xvc2VkKCkmJnRoaXMuaXNTaW1wbGUoKX0sZ2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEIuU09SVElOREVYX0xJTkVTVFJJTkd9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnRzLnRvQ29vcmRpbmF0ZUFycmF5KCl9LGVxdWFsc0V4YWN0OmZ1bmN0aW9uKCl7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIEIucHJvdG90eXBlLmVxdWFsc0V4YWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYoIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3ModCkpcmV0dXJuITE7dmFyIG49dDtpZih0aGlzLnBvaW50cy5zaXplKCkhPT1uLnBvaW50cy5zaXplKCkpcmV0dXJuITE7Zm9yKHZhciBpPTA7aTx0aGlzLnBvaW50cy5zaXplKCk7aSsrKWlmKCF0aGlzLmVxdWFsKHRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUoaSksbi5wb2ludHMuZ2V0Q29vcmRpbmF0ZShpKSxlKSlyZXR1cm4hMTtyZXR1cm4hMH0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxNYXRoLnRydW5jKHRoaXMucG9pbnRzLnNpemUoKS8yKTt0Kyspe3ZhciBlPXRoaXMucG9pbnRzLnNpemUoKS0xLXQ7aWYoIXRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUodCkuZXF1YWxzKHRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUoZSkpKXJldHVybiAwPHRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUodCkuY29tcGFyZVRvKHRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUoZSkpJiZOdC5yZXZlcnNlKHRoaXMucG9pbnRzKSxudWxsfX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9udWxsOnRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUoMCl9LGdldEJvdW5kYXJ5RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDbG9zZWQoKT9sdC5GQUxTRTowfSxpc0Nsb3NlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRW1wdHkoKSYmdGhpcy5nZXRDb29yZGluYXRlTigwKS5lcXVhbHMyRCh0aGlzLmdldENvb3JkaW5hdGVOKHRoaXMuZ2V0TnVtUG9pbnRzKCktMSkpfSxnZXRFbmRQb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9udWxsOnRoaXMuZ2V0UG9pbnROKHRoaXMuZ2V0TnVtUG9pbnRzKCktMSl9LGdldERpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiAxfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gWnQuY29tcHV0ZUxlbmd0aCh0aGlzLnBvaW50cyl9LGdldE51bVBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvaW50cy5zaXplKCl9LHJldmVyc2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBvaW50cy5jb3B5KCk7cmV0dXJuIE50LnJldmVyc2UodCksdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyh0KX0sY29tcGFyZVRvU2FtZUNsYXNzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wLG49MDtlPHRoaXMucG9pbnRzLnNpemUoKSYmbjx0LnBvaW50cy5zaXplKCk7KXt2YXIgaT10aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKGUpLmNvbXBhcmVUbyh0LnBvaW50cy5nZXRDb29yZGluYXRlKG4pKTtpZigwIT09aSlyZXR1cm4gaTtlKyssbisrfXJldHVybiBlPHRoaXMucG9pbnRzLnNpemUoKT8xOm48dC5wb2ludHMuc2l6ZSgpPy0xOjB9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3Q9YXJndW1lbnRzWzBdO3JldHVybiBhcmd1bWVudHNbMV0uY29tcGFyZSh0aGlzLnBvaW50cyx0LnBvaW50cyl9fSxhcHBseTpmdW5jdGlvbigpe2lmKFIoYXJndW1lbnRzWzBdLHopKWZvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wO2U8dGhpcy5wb2ludHMuc2l6ZSgpO2UrKyl0LmZpbHRlcih0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKGUpKTtlbHNlIGlmKFIoYXJndW1lbnRzWzBdLGN0KSl7dmFyIG49YXJndW1lbnRzWzBdO2lmKDA9PT10aGlzLnBvaW50cy5zaXplKCkpcmV0dXJuIG51bGw7Zm9yKGU9MDtlPHRoaXMucG9pbnRzLnNpemUoKSYmKG4uZmlsdGVyKHRoaXMucG9pbnRzLGUpLCFuLmlzRG9uZSgpKTtlKyspO24uaXNHZW9tZXRyeUNoYW5nZWQoKSYmdGhpcy5nZW9tZXRyeUNoYW5nZWQoKX1lbHNleyhSKGFyZ3VtZW50c1swXSxodCl8fFIoYXJndW1lbnRzWzBdLHEpKSYmYXJndW1lbnRzWzBdLmZpbHRlcih0aGlzKX19LGdldEJvdW5kYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkdCh0aGlzKS5nZXRCb3VuZGFyeSgpfSxpc0VxdWl2YWxlbnRDbGFzczpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEN0fSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PUIucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQucG9pbnRzPXRoaXMucG9pbnRzLmNsb25lKCksdH0sZ2V0Q29vcmRpbmF0ZU46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUodCl9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiTGluZVN0cmluZ1wifSxjb3B5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDdCh0aGlzLnBvaW50cy5jb3B5KCksdGhpcy5mYWN0b3J5KX0sZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnRzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnBvaW50cy5zaXplKCl9LGluaXQ6ZnVuY3Rpb24odCl7aWYobnVsbD09PXQmJih0PXRoaXMuZ2V0RmFjdG9yeSgpLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoW10pKSwxPT09dC5zaXplKCkpdGhyb3cgbmV3IGModC5zaXplKCkpO3RoaXMucG9pbnRzPXR9LGlzQ29vcmRpbmF0ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMucG9pbnRzLnNpemUoKTtlKyspaWYodGhpcy5wb2ludHMuZ2V0Q29vcmRpbmF0ZShlKS5lcXVhbHModCkpcmV0dXJuITA7cmV0dXJuITF9LGdldFN0YXJ0UG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bnVsbDp0aGlzLmdldFBvaW50TigwKX0sZ2V0UG9pbnROOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKHQpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bc3RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDdH19KSxDdC5zZXJpYWxWZXJzaW9uVUlEPTB4MmIyYjUxYmE0MzVjOGUwMCxlKFN0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gU3R9fSksYSh3dCxCKSxlKHd0LnByb3RvdHlwZSx7Y29tcHV0ZUVudmVsb3BlSW50ZXJuYWw6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gbmV3IEM7dmFyIHQ9bmV3IEM7cmV0dXJuIHQuZXhwYW5kVG9JbmNsdWRlKHRoaXMuY29vcmRpbmF0ZXMuZ2V0WCgwKSx0aGlzLmNvb3JkaW5hdGVzLmdldFkoMCkpLHR9LGdldFNvcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiBCLlNPUlRJTkRFWF9QT0lOVH0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/W106W3RoaXMuZ2V0Q29vcmRpbmF0ZSgpXX0sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gQi5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4hIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3ModCkmJighKCF0aGlzLmlzRW1wdHkoKXx8IXQuaXNFbXB0eSgpKXx8dGhpcy5pc0VtcHR5KCk9PT10LmlzRW1wdHkoKSYmdGhpcy5lcXVhbCh0LmdldENvb3JkaW5hdGUoKSx0aGlzLmdldENvb3JkaW5hdGUoKSxlKSl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe30sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5jb29yZGluYXRlcy5zaXplKCk/dGhpcy5jb29yZGluYXRlcy5nZXRDb29yZGluYXRlKDApOm51bGx9LGdldEJvdW5kYXJ5RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGx0LkZBTFNFfSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZ2V0TnVtUG9pbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpPzA6MX0scmV2ZXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvcHkoKX0sZ2V0WDpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmdldENvb3JkaW5hdGUoKSl0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiZ2V0WCBjYWxsZWQgb24gZW1wdHkgUG9pbnRcIik7cmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLnh9LGNvbXBhcmVUb1NhbWVDbGFzczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLmNvbXBhcmVUbyh0LmdldENvb3JkaW5hdGUoKSl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3Q9YXJndW1lbnRzWzBdO3JldHVybiBhcmd1bWVudHNbMV0uY29tcGFyZSh0aGlzLmNvb3JkaW5hdGVzLHQuY29vcmRpbmF0ZXMpfX0sYXBwbHk6ZnVuY3Rpb24oKXtpZihSKGFyZ3VtZW50c1swXSx6KSl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiBudWxsO3QuZmlsdGVyKHRoaXMuZ2V0Q29vcmRpbmF0ZSgpKX1lbHNlIGlmKFIoYXJndW1lbnRzWzBdLGN0KSl7dD1hcmd1bWVudHNbMF07aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dC5maWx0ZXIodGhpcy5jb29yZGluYXRlcywwKSx0LmlzR2VvbWV0cnlDaGFuZ2VkKCkmJnRoaXMuZ2VvbWV0cnlDaGFuZ2VkKCl9ZWxzZXsoUihhcmd1bWVudHNbMF0saHQpfHxSKGFyZ3VtZW50c1swXSxxKSkmJmFyZ3VtZW50c1swXS5maWx0ZXIodGhpcyl9fSxnZXRCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Qi5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5jb29yZGluYXRlcz10aGlzLmNvb3JkaW5hdGVzLmNsb25lKCksdH0sZ2V0R2VvbWV0cnlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJQb2ludFwifSxjb3B5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB3dCh0aGlzLmNvb3JkaW5hdGVzLmNvcHkoKSx0aGlzLmZhY3RvcnkpfSxnZXRDb29yZGluYXRlU2VxdWVuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlc30sZ2V0WTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmdldENvb3JkaW5hdGUoKSl0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiZ2V0WSBjYWxsZWQgb24gZW1wdHkgUG9pbnRcIik7cmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLnl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuY29vcmRpbmF0ZXMuc2l6ZSgpfSxpbml0OmZ1bmN0aW9uKHQpe251bGw9PT10JiYodD10aGlzLmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSksbC5pc1RydWUodC5zaXplKCk8PTEpLHRoaXMuY29vcmRpbmF0ZXM9dH0saXNTaW1wbGU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bU3RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB3dH19KSx3dC5zZXJpYWxWZXJzaW9uVUlEPTB4NDQwNzdiYWQxNjFjYmMwMCxlKEx0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTHR9fSksYShSdCxCKSxlKFJ0LnByb3RvdHlwZSx7Y29tcHV0ZUVudmVsb3BlSW50ZXJuYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGVsbC5nZXRFbnZlbG9wZUludGVybmFsKCl9LGdldFNvcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiBCLlNPUlRJTkRFWF9QT0xZR09OfSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybltdO2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5nZXROdW1Qb2ludHMoKSkuZmlsbChudWxsKSxlPS0xLG49dGhpcy5zaGVsbC5nZXRDb29yZGluYXRlcygpLGk9MDtpPG4ubGVuZ3RoO2krKyl0WysrZV09bltpXTtmb3IodmFyIHI9MDtyPHRoaXMuaG9sZXMubGVuZ3RoO3IrKylmb3IodmFyIHM9dGhpcy5ob2xlc1tyXS5nZXRDb29yZGluYXRlcygpLG89MDtvPHMubGVuZ3RoO28rKyl0WysrZV09c1tvXTtyZXR1cm4gdH0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciB0PTA7dCs9TWF0aC5hYnMoWnQuc2lnbmVkQXJlYSh0aGlzLnNoZWxsLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKSk7Zm9yKHZhciBlPTA7ZTx0aGlzLmhvbGVzLmxlbmd0aDtlKyspdC09TWF0aC5hYnMoWnQuc2lnbmVkQXJlYSh0aGlzLmhvbGVzW2VdLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKSk7cmV0dXJuIHR9LGlzUmVjdGFuZ2xlOmZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMuZ2V0TnVtSW50ZXJpb3JSaW5nKCkpcmV0dXJuITE7aWYobnVsbD09PXRoaXMuc2hlbGwpcmV0dXJuITE7aWYoNSE9PXRoaXMuc2hlbGwuZ2V0TnVtUG9pbnRzKCkpcmV0dXJuITE7Zm9yKHZhciB0PXRoaXMuc2hlbGwuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksZT10aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKSxuPTA7bjw1O24rKyl7aWYoKGk9dC5nZXRYKG4pKSE9PWUuZ2V0TWluWCgpJiZpIT09ZS5nZXRNYXhYKCkpcmV0dXJuITE7aWYoKHI9dC5nZXRZKG4pKSE9PWUuZ2V0TWluWSgpJiZyIT09ZS5nZXRNYXhZKCkpcmV0dXJuITF9Zm9yKHZhciBpLHIscz10LmdldFgoMCksbz10LmdldFkoMCksbj0xO248PTQ7bisrKXtpZigoaT10LmdldFgobikpIT09cz09KChyPXQuZ2V0WShuKSkhPT1vKSlyZXR1cm4hMTtzPWksbz1yfXJldHVybiEwfSxlcXVhbHNFeGFjdDpmdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBCLnByb3RvdHlwZS5lcXVhbHNFeGFjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKCF0aGlzLmlzRXF1aXZhbGVudENsYXNzKHQpKXJldHVybiExO3ZhciBuPXQsaT10aGlzLnNoZWxsLHQ9bi5zaGVsbDtpZighaS5lcXVhbHNFeGFjdCh0LGUpKXJldHVybiExO2lmKHRoaXMuaG9sZXMubGVuZ3RoIT09bi5ob2xlcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0aGlzLmhvbGVzLmxlbmd0aDtyKyspaWYoIXRoaXMuaG9sZXNbcl0uZXF1YWxzRXhhY3Qobi5ob2xlc1tyXSxlKSlyZXR1cm4hMTtyZXR1cm4hMH0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe3RoaXMubm9ybWFsaXplKHRoaXMuc2hlbGwsITApO2Zvcih2YXIgdD0wO3Q8dGhpcy5ob2xlcy5sZW5ndGg7dCsrKXRoaXMubm9ybWFsaXplKHRoaXMuaG9sZXNbdF0sITEpO3V0LnNvcnQodGhpcy5ob2xlcyl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO2lmKGUuaXNFbXB0eSgpKXJldHVybiBudWxsO3ZhciBpPW5ldyBBcnJheShlLmdldENvb3JkaW5hdGVzKCkubGVuZ3RoLTEpLmZpbGwobnVsbCk7QS5hcnJheWNvcHkoZS5nZXRDb29yZGluYXRlcygpLDAsaSwwLGkubGVuZ3RoKTt2YXIgcj1ILm1pbkNvb3JkaW5hdGUoZS5nZXRDb29yZGluYXRlcygpKTtILnNjcm9sbChpLHIpLEEuYXJyYXljb3B5KGksMCxlLmdldENvb3JkaW5hdGVzKCksMCxpLmxlbmd0aCksZS5nZXRDb29yZGluYXRlcygpW2kubGVuZ3RoXT1pWzBdLFp0LmlzQ0NXKGUuZ2V0Q29vcmRpbmF0ZXMoKSk9PT1uJiZILnJldmVyc2UoZS5nZXRDb29yZGluYXRlcygpKX19LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGVsbC5nZXRDb29yZGluYXRlKCl9LGdldE51bUludGVyaW9yUmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhvbGVzLmxlbmd0aH0sZ2V0Qm91bmRhcnlEaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMX0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDJ9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciB0PTA7dCs9dGhpcy5zaGVsbC5nZXRMZW5ndGgoKTtmb3IodmFyIGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0Kz10aGlzLmhvbGVzW2VdLmdldExlbmd0aCgpO3JldHVybiB0fSxnZXROdW1Qb2ludHM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5zaGVsbC5nZXROdW1Qb2ludHMoKSxlPTA7ZTx0aGlzLmhvbGVzLmxlbmd0aDtlKyspdCs9dGhpcy5ob2xlc1tlXS5nZXROdW1Qb2ludHMoKTtyZXR1cm4gdH0scmV2ZXJzZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY29weSgpO3Quc2hlbGw9dGhpcy5zaGVsbC5jb3B5KCkucmV2ZXJzZSgpLHQuaG9sZXM9bmV3IEFycmF5KHRoaXMuaG9sZXMubGVuZ3RoKS5maWxsKG51bGwpO2Zvcih2YXIgZT0wO2U8dGhpcy5ob2xlcy5sZW5ndGg7ZSsrKXQuaG9sZXNbZV09dGhpcy5ob2xlc1tlXS5jb3B5KCkucmV2ZXJzZSgpO3JldHVybiB0fSxjb252ZXhIdWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RXh0ZXJpb3JSaW5nKCkuY29udmV4SHVsbCgpfSxjb21wYXJlVG9TYW1lQ2xhc3M6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dGhpcy5zaGVsbCx0PXQuc2hlbGw7cmV0dXJuIGUuY29tcGFyZVRvU2FtZUNsYXNzKHQpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMF0sZT10aGlzLnNoZWxsLHQ9aS5zaGVsbCx0PWUuY29tcGFyZVRvU2FtZUNsYXNzKHQsbik7aWYoMCE9PXQpcmV0dXJuIHQ7Zm9yKHZhciByPXRoaXMuZ2V0TnVtSW50ZXJpb3JSaW5nKCkscz1pLmdldE51bUludGVyaW9yUmluZygpLG89MDtvPHImJm88czspe3ZhciBhPXRoaXMuZ2V0SW50ZXJpb3JSaW5nTihvKSx1PWkuZ2V0SW50ZXJpb3JSaW5nTihvKSx1PWEuY29tcGFyZVRvU2FtZUNsYXNzKHUsbik7aWYoMCE9PXUpcmV0dXJuIHU7bysrfXJldHVybiBvPHI/MTpvPHM/LTE6MH19LGFwcGx5OmZ1bmN0aW9uKCl7aWYoUihhcmd1bWVudHNbMF0seikpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNoZWxsLmFwcGx5KHQpO2Zvcih2YXIgZT0wO2U8dGhpcy5ob2xlcy5sZW5ndGg7ZSsrKXRoaXMuaG9sZXNbZV0uYXBwbHkodCl9ZWxzZSBpZihSKGFyZ3VtZW50c1swXSxjdCkpe3ZhciBuPWFyZ3VtZW50c1swXTtpZih0aGlzLnNoZWxsLmFwcGx5KG4pLCFuLmlzRG9uZSgpKWZvcihlPTA7ZTx0aGlzLmhvbGVzLmxlbmd0aCYmKHRoaXMuaG9sZXNbZV0uYXBwbHkobiksIW4uaXNEb25lKCkpO2UrKyk7bi5pc0dlb21ldHJ5Q2hhbmdlZCgpJiZ0aGlzLmdlb21ldHJ5Q2hhbmdlZCgpfWVsc2UgaWYoUihhcmd1bWVudHNbMF0saHQpKXthcmd1bWVudHNbMF0uZmlsdGVyKHRoaXMpfWVsc2UgaWYoUihhcmd1bWVudHNbMF0scSkpe3ZhciBpPWFyZ3VtZW50c1swXTtpLmZpbHRlcih0aGlzKSx0aGlzLnNoZWxsLmFwcGx5KGkpO2ZvcihlPTA7ZTx0aGlzLmhvbGVzLmxlbmd0aDtlKyspdGhpcy5ob2xlc1tlXS5hcHBseShpKX19LGdldEJvdW5kYXJ5OmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpTGluZVN0cmluZygpO3ZhciB0PW5ldyBBcnJheSh0aGlzLmhvbGVzLmxlbmd0aCsxKS5maWxsKG51bGwpO3RbMF09dGhpcy5zaGVsbDtmb3IodmFyIGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0W2UrMV09dGhpcy5ob2xlc1tlXTtyZXR1cm4gdC5sZW5ndGg8PTE/dGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZWFyUmluZyh0WzBdLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKTp0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcodCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Qi5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTt0LnNoZWxsPXRoaXMuc2hlbGwuY2xvbmUoKSx0LmhvbGVzPW5ldyBBcnJheSh0aGlzLmhvbGVzLmxlbmd0aCkuZmlsbChudWxsKTtmb3IodmFyIGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0LmhvbGVzW2VdPXRoaXMuaG9sZXNbZV0uY2xvbmUoKTtyZXR1cm4gdH0sZ2V0R2VvbWV0cnlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJQb2x5Z29uXCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5zaGVsbC5jb3B5KCksZT1uZXcgQXJyYXkodGhpcy5ob2xlcy5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248ZS5sZW5ndGg7bisrKWVbbl09dGhpcy5ob2xlc1tuXS5jb3B5KCk7cmV0dXJuIG5ldyBSdCh0LGUsdGhpcy5mYWN0b3J5KX0sZ2V0RXh0ZXJpb3JSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlbGx9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGVsbC5pc0VtcHR5KCl9LGdldEludGVyaW9yUmluZ046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaG9sZXNbdF19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0x0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUnR9fSksUnQuc2VyaWFsVmVyc2lvblVJRD0tMHgzMDdmZmVmZDhkYzk3MjAwLGEoVHQsZnQpLGUoVHQucHJvdG90eXBlLHtnZXRTb3J0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gQi5TT1JUSU5ERVhfTVVMVElQT0lOVH0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiEwfSxlcXVhbHNFeGFjdDpmdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBmdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4hIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3ModCkmJmZ0LnByb3RvdHlwZS5lcXVhbHNFeGFjdC5jYWxsKHRoaXMsdCxlKX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBmdC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmdlb21ldHJpZXNbdF0uZ2V0Q29vcmRpbmF0ZSgpfSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiBsdC5GQUxTRX0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldEJvdW5kYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKX0sZ2V0R2VvbWV0cnlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJNdWx0aVBvaW50XCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IFR0KHQsdGhpcy5mYWN0b3J5KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bU3RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBUdH19KSxUdC5zZXJpYWxWZXJzaW9uVUlEPS0weDZmYjFlZDQxNjJlMGZjMDAsYShQdCxDdCksZShQdC5wcm90b3R5cGUse2dldFNvcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiBCLlNPUlRJTkRFWF9MSU5FQVJSSU5HfSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiBsdC5GQUxTRX0saXNDbG9zZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuaXNFbXB0eSgpfHxDdC5wcm90b3R5cGUuaXNDbG9zZWQuY2FsbCh0aGlzKX0scmV2ZXJzZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMucG9pbnRzLmNvcHkoKTtyZXR1cm4gTnQucmV2ZXJzZSh0KSx0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKHQpfSx2YWxpZGF0ZUNvbnN0cnVjdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzLmlzRW1wdHkoKSYmIUN0LnByb3RvdHlwZS5pc0Nsb3NlZC5jYWxsKHRoaXMpKXRocm93IG5ldyBjO2lmKDE8PXRoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkuc2l6ZSgpJiZ0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLnNpemUoKTxQdC5NSU5JTVVNX1ZBTElEX1NJWkUpdGhyb3cgbmV3IGModGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2UoKS5zaXplKCkpfSxnZXRHZW9tZXRyeVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm5cIkxpbmVhclJpbmdcIn0sY29weTpmdW5jdGlvbigpe3JldHVybiBuZXcgUHQodGhpcy5wb2ludHMuY29weSgpLHRoaXMuZmFjdG9yeSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFB0fX0pLFB0Lk1JTklNVU1fVkFMSURfU0laRT00LFB0LnNlcmlhbFZlcnNpb25VSUQ9LTB4M2IyMjllMjYyMzY3YTYwMCxhKGJ0LGZ0KSxlKGJ0LnByb3RvdHlwZSx7Z2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEIuU09SVElOREVYX01VTFRJUE9MWUdPTn0sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZnQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuISF0aGlzLmlzRXF1aXZhbGVudENsYXNzKHQpJiZmdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuY2FsbCh0aGlzLHQsZSl9LGdldEJvdW5kYXJ5RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDF9LGdldERpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiAyfSxyZXZlcnNlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ2VvbWV0cmllcy5sZW5ndGgsZT1uZXcgQXJyYXkodCkuZmlsbChudWxsKSxuPTA7bjx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO24rKyllW25dPXRoaXMuZ2VvbWV0cmllc1tuXS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpUG9seWdvbihlKX0sZ2V0Qm91bmRhcnk6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKCk7Zm9yKHZhciB0PW5ldyBJLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKWZvcih2YXIgbj10aGlzLmdlb21ldHJpZXNbZV0uZ2V0Qm91bmRhcnkoKSxpPTA7aTxuLmdldE51bUdlb21ldHJpZXMoKTtpKyspdC5hZGQobi5nZXRHZW9tZXRyeU4oaSkpO3ZhciByPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKHQudG9BcnJheShyKSl9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiTXVsdGlQb2x5Z29uXCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IGJ0KHQsdGhpcy5mYWN0b3J5KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bTHRdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBidH19KSxidC5zZXJpYWxWZXJzaW9uVUlEPS0weDdhNWFhMTM2OTE3MTk4MCxlKE90LnByb3RvdHlwZSx7c2V0Q29weVVzZXJEYXRhOmZ1bmN0aW9uKHQpe3RoaXMuaXNVc2VyRGF0YUNvcGllZD10fSxlZGl0OmZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7ZT10aGlzLmVkaXRJbnRlcm5hbCh0LGUpO3JldHVybiB0aGlzLmlzVXNlckRhdGFDb3BpZWQmJmUuc2V0VXNlckRhdGEodC5nZXRVc2VyRGF0YSgpKSxlfSxlZGl0SW50ZXJuYWw6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09PXRoaXMuZmFjdG9yeSYmKHRoaXMuZmFjdG9yeT10LmdldEZhY3RvcnkoKSksdCBpbnN0YW5jZW9mIGZ0P3RoaXMuZWRpdEdlb21ldHJ5Q29sbGVjdGlvbih0LGUpOnQgaW5zdGFuY2VvZiBSdD90aGlzLmVkaXRQb2x5Z29uKHQsZSk6dCBpbnN0YW5jZW9mIHd0fHx0IGluc3RhbmNlb2YgQ3Q/ZS5lZGl0KHQsdGhpcy5mYWN0b3J5KToobC5zaG91bGROZXZlclJlYWNoSGVyZShcIlVuc3VwcG9ydGVkIEdlb21ldHJ5IGNsYXNzOiBcIit0LmdldENsYXNzKCkuZ2V0TmFtZSgpKSxudWxsKX0sZWRpdEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lLmVkaXQodCx0aGlzLmZhY3RvcnkpLGk9bmV3IEkscj0wO3I8bi5nZXROdW1HZW9tZXRyaWVzKCk7cisrKXt2YXIgcz10aGlzLmVkaXQobi5nZXRHZW9tZXRyeU4ociksZSk7bnVsbD09PXN8fHMuaXNFbXB0eSgpfHxpLmFkZChzKX1yZXR1cm4gbi5nZXRDbGFzcygpPT09VHQ/dGhpcy5mYWN0b3J5LmNyZWF0ZU11bHRpUG9pbnQoaS50b0FycmF5KFtdKSk6bi5nZXRDbGFzcygpPT09Z3Q/dGhpcy5mYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhpLnRvQXJyYXkoW10pKTpuLmdldENsYXNzKCk9PT1idD90aGlzLmZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKGkudG9BcnJheShbXSkpOnRoaXMuZmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oaS50b0FycmF5KFtdKSl9LGVkaXRQb2x5Z29uOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5lZGl0KHQsdGhpcy5mYWN0b3J5KTtpZihudWxsPT09biYmKG49dGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24obnVsbCkpLG4uaXNFbXB0eSgpKXJldHVybiBuO3Q9dGhpcy5lZGl0KG4uZ2V0RXh0ZXJpb3JSaW5nKCksZSk7aWYobnVsbD09PXR8fHQuaXNFbXB0eSgpKXJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlUG9seWdvbigpO2Zvcih2YXIgaT1uZXcgSSxyPTA7cjxuLmdldE51bUludGVyaW9yUmluZygpO3IrKyl7dmFyIHM9dGhpcy5lZGl0KG4uZ2V0SW50ZXJpb3JSaW5nTihyKSxlKTtudWxsPT09c3x8cy5pc0VtcHR5KCl8fGkuYWRkKHMpfXJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlUG9seWdvbih0LGkudG9BcnJheShbXSkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPdH19KSxPdC5HZW9tZXRyeUVkaXRvck9wZXJhdGlvbj1fdCxlKE10LnByb3RvdHlwZSx7ZWRpdDpmdW5jdGlvbih0LGUpe3JldHVybiB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltfdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE10fX0pLGUoRHQucHJvdG90eXBlLHtlZGl0OmZ1bmN0aW9uKHQsZSl7aWYodCBpbnN0YW5jZW9mIFB0KXJldHVybiBlLmNyZWF0ZUxpbmVhclJpbmcodGhpcy5lZGl0Q29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlcygpLHQpKTtpZih0IGluc3RhbmNlb2YgQ3QpcmV0dXJuIGUuY3JlYXRlTGluZVN0cmluZyh0aGlzLmVkaXRDb29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVzKCksdCkpO2lmKHQgaW5zdGFuY2VvZiB3dCl7dmFyIG49dGhpcy5lZGl0Q29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlcygpLHQpO3JldHVybiAwPG4ubGVuZ3RoP2UuY3JlYXRlUG9pbnQoblswXSk6ZS5jcmVhdGVQb2ludCgpfXJldHVybiB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltfdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIER0fX0pLGUoQXQucHJvdG90eXBlLHtlZGl0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBQdD9lLmNyZWF0ZUxpbmVhclJpbmcodGhpcy5lZGl0KHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksdCkpOnQgaW5zdGFuY2VvZiBDdD9lLmNyZWF0ZUxpbmVTdHJpbmcodGhpcy5lZGl0KHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksdCkpOnQgaW5zdGFuY2VvZiB3dD9lLmNyZWF0ZVBvaW50KHRoaXMuZWRpdCh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpKTp0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltfdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEF0fX0pLE90Lk5vT3BHZW9tZXRyeU9wZXJhdGlvbj1NdCxPdC5Db29yZGluYXRlT3BlcmF0aW9uPUR0LE90LkNvb3JkaW5hdGVTZXF1ZW5jZU9wZXJhdGlvbj1BdCxlKEZ0LnByb3RvdHlwZSx7c2V0T3JkaW5hdGU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaChlKXtjYXNlIEQuWDp0aGlzLmNvb3JkaW5hdGVzW3RdLng9bjticmVhaztjYXNlIEQuWTp0aGlzLmNvb3JkaW5hdGVzW3RdLnk9bjticmVhaztjYXNlIEQuWjp0aGlzLmNvb3JkaW5hdGVzW3RdLno9bjticmVhaztkZWZhdWx0OnRocm93IG5ldyBjfX0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aH0sZ2V0T3JkaW5hdGU6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSBELlg6cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXNbdF0ueDtjYXNlIEQuWTpyZXR1cm4gdGhpcy5jb29yZGluYXRlc1t0XS55O2Nhc2UgRC5aOnJldHVybiB0aGlzLmNvb3JkaW5hdGVzW3RdLnp9cmV0dXJuIGcuTmFOfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jb29yZGluYXRlc1t0XX12YXIgZTsyPT09YXJndW1lbnRzLmxlbmd0aCYmKGU9YXJndW1lbnRzWzBdLCh0PWFyZ3VtZW50c1sxXSkueD10aGlzLmNvb3JkaW5hdGVzW2VdLngsdC55PXRoaXMuY29vcmRpbmF0ZXNbZV0ueSx0Lno9dGhpcy5jb29yZGluYXRlc1tlXS56KX0sZ2V0Q29vcmRpbmF0ZUNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBkKHRoaXMuY29vcmRpbmF0ZXNbdF0pfSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaW1lbnNpb259LGdldFg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXNbdF0ueH0sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuc2l6ZSgpKS5maWxsKG51bGwpLGU9MDtlPHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO2UrKyl0W2VdPXRoaXMuY29vcmRpbmF0ZXNbZV0uY2xvbmUoKTtyZXR1cm4gbmV3IEZ0KHQsdGhpcy5kaW1lbnNpb24pfSxleHBhbmRFbnZlbG9wZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO2UrKyl0LmV4cGFuZFRvSW5jbHVkZSh0aGlzLmNvb3JkaW5hdGVzW2VdKTtyZXR1cm4gdH0sY29weTpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5zaXplKCkpLmZpbGwobnVsbCksZT0wO2U8dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7ZSsrKXRbZV09dGhpcy5jb29yZGluYXRlc1tlXS5jb3B5KCk7cmV0dXJuIG5ldyBGdCh0LHRoaXMuZGltZW5zaW9uKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtpZigwPHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoKXt2YXIgdD1uZXcgUCgxNyp0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCk7dC5hcHBlbmQoXCIoXCIpLHQuYXBwZW5kKHRoaXMuY29vcmRpbmF0ZXNbMF0pO2Zvcih2YXIgZT0xO2U8dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7ZSsrKXQuYXBwZW5kKFwiLCBcIiksdC5hcHBlbmQodGhpcy5jb29yZGluYXRlc1tlXSk7cmV0dXJuIHQuYXBwZW5kKFwiKVwiKSx0LnRvU3RyaW5nKCl9cmV0dXJuXCIoKVwifSxnZXRZOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvb3JkaW5hdGVzW3RdLnl9LHRvQ29vcmRpbmF0ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXN9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0Qsb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEZ0fX0pLEZ0LnNlcmlhbFZlcnNpb25VSUQ9LTB4Y2I0NGE3NzhkYjE4ZTAwLGUoR3QucHJvdG90eXBlLHtyZWFkUmVzb2x2ZTpmdW5jdGlvbigpe3JldHVybiBHdC5pbnN0YW5jZSgpfSxjcmVhdGU6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheXx8Uihhcmd1bWVudHNbMF0sRCk/bmV3IEZ0KGFyZ3VtZW50c1swXSk6dm9pZCAwO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIDM8ZSYmKGU9MyksZTwyP25ldyBGdCh0KTpuZXcgRnQodCxlKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0csb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEd0fX0pLEd0Lmluc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIEd0Lmluc3RhbmNlT2JqZWN0fSxHdC5zZXJpYWxWZXJzaW9uVUlEPS0weDM4ZTQ5ZmE2Y2Y2ZjJlMDAsR3QuaW5zdGFuY2VPYmplY3Q9bmV3IEd0O3ZhciBCcyx6cyxWcyxrcz1PYmplY3QuZGVmaW5lUHJvcGVydHksWXM9KHpzPXtkZWxldGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzKHQpJiYodGhpcy5fa2V5cy5zcGxpY2UoQnMsMSksdGhpcy5fdmFsdWVzLnNwbGljZShCcywxKSx0aGlzLl9pdHAuZm9yRWFjaChmdW5jdGlvbih0KXtCczx0WzBdJiZ0WzBdLS19KSksLTE8QnN9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXtpZih0aGlzLm9iamVjdE9ubHkmJmUhPT1PYmplY3QoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdmFsdWUgdXNlZCBhcyB3ZWFrIGNvbGxlY3Rpb24ga2V5XCIpO2lmKGUhPWV8fDA9PT1lKWZvcihCcz10Lmxlbmd0aDtCcy0tJiYoKG49dFtCc10pIT09KGk9ZSkmJihuPT1ufHxpPT1pKSk7KTtlbHNlIEJzPXQuaW5kZXhPZihlKTt2YXIgbixpO3JldHVybi0xPEJzfS5jYWxsKHRoaXMsdGhpcy5fa2V5cyx0KX0sZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhcyh0KT90aGlzLl92YWx1ZXNbQnNdOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaGFzKHQpP3RoaXMuX3ZhbHVlc1tCc109ZTp0aGlzLl92YWx1ZXNbdGhpcy5fa2V5cy5wdXNoKHQpLTFdPWUsdGhpc30sa2V5czpmdW5jdGlvbigpe3JldHVybiBxdCh0aGlzLl9pdHAsdGhpcy5fa2V5cyl9LHZhbHVlczpmdW5jdGlvbigpe3JldHVybiBxdCh0aGlzLl9pdHAsdGhpcy5fdmFsdWVzKX0sZW50cmllczpmdW5jdGlvbigpe3JldHVybiBxdCh0aGlzLl9pdHAsdGhpcy5fa2V5cyx0aGlzLl92YWx1ZXMpfSxmb3JFYWNoOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuZW50cmllcygpOzspe3ZhciBpPW4ubmV4dCgpO2lmKGkuZG9uZSlicmVhazt0LmNhbGwoZSxpLnZhbHVlWzFdLGkudmFsdWVbMF0sdGhpcyl9fSxjbGVhcjpmdW5jdGlvbigpeyh0aGlzLl9rZXlzfHwwKS5sZW5ndGg9dGhpcy5fdmFsdWVzLmxlbmd0aD0wfX0sVnN8fGtzKHpzLFwic2l6ZVwiLHtnZXQ6QnR9KSwoenMuY29uc3RydWN0b3I9WHMpLnByb3RvdHlwZT16cyxYcyksVXM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1hcCYmTWFwLnByb3RvdHlwZS52YWx1ZXM/TWFwOllzO2Z1bmN0aW9uIFhzKHQpe3JldHVybiB0aGlzJiZ0aGlzLmNvbnN0cnVjdG9yPT09WHM/KHRoaXMuX2tleXM9W10sdGhpcy5fdmFsdWVzPVtdLHRoaXMuX2l0cD1bXSx0aGlzLm9iamVjdE9ubHk9VnMsdm9pZCh0JiZmdW5jdGlvbih0KXt0aGlzLmFkZD90LmZvckVhY2godGhpcy5hZGQsdGhpcyk6dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuc2V0KHRbMF0sdFsxXSl9LHRoaXMpfS5jYWxsKHRoaXMsdCkpKTpuZXcgWHModCl9KHp0LnByb3RvdHlwZT1uZXcgSykuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1hcF8uZ2V0KHQpfHxudWxsfSx6dC5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWFwXy5zZXQodCxlKSxlfSx6dC5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBJLGU9dGhpcy5tYXBfLnZhbHVlcygpLG49ZS5uZXh0KCk7IW4uZG9uZTspdC5hZGQobi52YWx1ZSksbj1lLm5leHQoKTtyZXR1cm4gdH0senQucHJvdG90eXBlLmVudHJ5U2V0PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IFE7cmV0dXJuIHRoaXMubWFwXy5lbnRyaWVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5hZGQodCl9KSxlfSx6dC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcF8uc2l6ZSgpfSxlKFZ0LnByb3RvdHlwZSx7ZXF1YWxzOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIFZ0KSlyZXR1cm4hMTtyZXR1cm4gdGhpcy5tb2RlbFR5cGU9PT10Lm1vZGVsVHlwZSYmdGhpcy5zY2FsZT09PXQuc2NhbGV9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXt2YXIgZT10LHQ9dGhpcy5nZXRNYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMoKSxlPWUuZ2V0TWF4aW11bVNpZ25pZmljYW50RGlnaXRzKCk7cmV0dXJuIG5ldyBiKHQpLmNvbXBhcmVUbyhuZXcgYihlKSl9LGdldFNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2NhbGV9LGlzRmxvYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbFR5cGU9PT1WdC5GTE9BVElOR3x8dGhpcy5tb2RlbFR5cGU9PT1WdC5GTE9BVElOR19TSU5HTEV9LGdldFR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbFR5cGV9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHQ9XCJVTktOT1dOXCI7cmV0dXJuIHRoaXMubW9kZWxUeXBlPT09VnQuRkxPQVRJTkc/dD1cIkZsb2F0aW5nXCI6dGhpcy5tb2RlbFR5cGU9PT1WdC5GTE9BVElOR19TSU5HTEU/dD1cIkZsb2F0aW5nLVNpbmdsZVwiOnRoaXMubW9kZWxUeXBlPT09VnQuRklYRUQmJih0PVwiRml4ZWQgKFNjYWxlPVwiK3RoaXMuZ2V0U2NhbGUoKStcIilcIiksdH0sbWFrZVByZWNpc2U6ZnVuY3Rpb24oKXtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIGcuaXNOYU4odCk/dDp0aGlzLm1vZGVsVHlwZSE9PVZ0LkZMT0FUSU5HX1NJTkdMRSYmdGhpcy5tb2RlbFR5cGU9PT1WdC5GSVhFRD9NYXRoLnJvdW5kKHQqdGhpcy5zY2FsZSkvdGhpcy5zY2FsZTp0fWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCl7dD1hcmd1bWVudHNbMF07aWYodGhpcy5tb2RlbFR5cGU9PT1WdC5GTE9BVElORylyZXR1cm4gbnVsbDt0Lng9dGhpcy5tYWtlUHJlY2lzZSh0LngpLHQueT10aGlzLm1ha2VQcmVjaXNlKHQueSl9fSxnZXRNYXhpbXVtU2lnbmlmaWNhbnREaWdpdHM6ZnVuY3Rpb24oKXt2YXIgdD0xNjtyZXR1cm4gdGhpcy5tb2RlbFR5cGU9PT1WdC5GTE9BVElORz90PTE2OnRoaXMubW9kZWxUeXBlPT09VnQuRkxPQVRJTkdfU0lOR0xFP3Q9Njp0aGlzLm1vZGVsVHlwZT09PVZ0LkZJWEVEJiYodD0xK01hdGgudHJ1bmMoTWF0aC5jZWlsKE1hdGgubG9nKHRoaXMuZ2V0U2NhbGUoKSkvTWF0aC5sb2coMTApKSkpLHR9LHNldFNjYWxlOmZ1bmN0aW9uKHQpe3RoaXMuc2NhbGU9TWF0aC5hYnModCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW28saV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFZ0fX0pLFZ0Lm1vc3RQcmVjaXNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA8PXQuY29tcGFyZVRvKGUpP3Q6ZX0sZShrdC5wcm90b3R5cGUse3JlYWRSZXNvbHZlOmZ1bmN0aW9uKCl7cmV0dXJuIGt0Lm5hbWVUb1R5cGVNYXAuZ2V0KHRoaXMubmFtZSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGt0fX0pLGt0LnNlcmlhbFZlcnNpb25VSUQ9LTU1Mjg2MDI2MzE3MzE1OWU0LGt0Lm5hbWVUb1R5cGVNYXA9bmV3IHp0LFZ0LlR5cGU9a3QsVnQuc2VyaWFsVmVyc2lvblVJRD0weDZiZWU2NDA0ZTlhMjVjMDAsVnQuRklYRUQ9bmV3IGt0KFwiRklYRURcIiksVnQuRkxPQVRJTkc9bmV3IGt0KFwiRkxPQVRJTkdcIiksVnQuRkxPQVRJTkdfU0lOR0xFPW5ldyBrdChcIkZMT0FUSU5HIFNJTkdMRVwiKSxWdC5tYXhpbXVtUHJlY2lzZVZhbHVlPTkwMDcxOTkyNTQ3NDA5OTIsZShZdC5wcm90b3R5cGUse3RvR2VvbWV0cnk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNOdWxsKCk/dGhpcy5jcmVhdGVQb2ludChudWxsKTp0LmdldE1pblgoKT09PXQuZ2V0TWF4WCgpJiZ0LmdldE1pblkoKT09PXQuZ2V0TWF4WSgpP3RoaXMuY3JlYXRlUG9pbnQobmV3IGQodC5nZXRNaW5YKCksdC5nZXRNaW5ZKCkpKTp0LmdldE1pblgoKT09PXQuZ2V0TWF4WCgpfHx0LmdldE1pblkoKT09PXQuZ2V0TWF4WSgpP3RoaXMuY3JlYXRlTGluZVN0cmluZyhbbmV3IGQodC5nZXRNaW5YKCksdC5nZXRNaW5ZKCkpLG5ldyBkKHQuZ2V0TWF4WCgpLHQuZ2V0TWF4WSgpKV0pOnRoaXMuY3JlYXRlUG9seWdvbih0aGlzLmNyZWF0ZUxpbmVhclJpbmcoW25ldyBkKHQuZ2V0TWluWCgpLHQuZ2V0TWluWSgpKSxuZXcgZCh0LmdldE1pblgoKSx0LmdldE1heFkoKSksbmV3IGQodC5nZXRNYXhYKCksdC5nZXRNYXhZKCkpLG5ldyBkKHQuZ2V0TWF4WCgpLHQuZ2V0TWluWSgpKSxuZXcgZCh0LmdldE1pblgoKSx0LmdldE1pblkoKSldKSxudWxsKX0sY3JlYXRlTGluZVN0cmluZzpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmNyZWF0ZUxpbmVTdHJpbmcodGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jcmVhdGVMaW5lU3RyaW5nKG51bGwhPT10P3RoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZSh0KTpudWxsKX1pZihSKGFyZ3VtZW50c1swXSxEKSlyZXR1cm4gbmV3IEN0KGFyZ3VtZW50c1swXSx0aGlzKX19LGNyZWF0ZU11bHRpTGluZVN0cmluZzpmdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9uZXcgZ3QobnVsbCx0aGlzKToxPT09YXJndW1lbnRzLmxlbmd0aD9uZXcgZ3QoYXJndW1lbnRzWzBdLHRoaXMpOnZvaWQgMH0sYnVpbGRHZW9tZXRyeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPSExLGk9ITEscj10Lml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1yLm5leHQoKSxvPXMuZ2V0Q2xhc3MoKTtudWxsPT09ZSYmKGU9byksbyE9PWUmJihuPSEwKSxzLmlzR2VvbWV0cnlDb2xsZWN0aW9uT3JEZXJpdmVkKCkmJihpPSEwKX1pZihudWxsPT09ZSlyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oKTtpZihufHxpKXJldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihZdC50b0dlb21ldHJ5QXJyYXkodCkpO3ZhciBhPXQuaXRlcmF0b3IoKS5uZXh0KCk7aWYoMTx0LnNpemUoKSl7aWYoYSBpbnN0YW5jZW9mIFJ0KXJldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9seWdvbihZdC50b1BvbHlnb25BcnJheSh0KSk7aWYoYSBpbnN0YW5jZW9mIEN0KXJldHVybiB0aGlzLmNyZWF0ZU11bHRpTGluZVN0cmluZyhZdC50b0xpbmVTdHJpbmdBcnJheSh0KSk7aWYoYSBpbnN0YW5jZW9mIHd0KXJldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9pbnQoWXQudG9Qb2ludEFycmF5KHQpKTtsLnNob3VsZE5ldmVyUmVhY2hIZXJlKFwiVW5oYW5kbGVkIGNsYXNzOiBcIithLmdldENsYXNzKCkuZ2V0TmFtZSgpKX1yZXR1cm4gYX0sY3JlYXRlTXVsdGlQb2ludEZyb21Db29yZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChudWxsIT09dD90aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCk6bnVsbCl9LGNyZWF0ZVBvaW50OmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuY3JlYXRlUG9pbnQodGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZVBvaW50KG51bGwhPT10P3RoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZShbdF0pOm51bGwpfWlmKFIoYXJndW1lbnRzWzBdLEQpKXJldHVybiBuZXcgd3QoYXJndW1lbnRzWzBdLHRoaXMpfX0sZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkaW5hdGVTZXF1ZW5jZUZhY3Rvcnl9LGNyZWF0ZVBvbHlnb246ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbmV3IFJ0KG51bGwsbnVsbCx0aGlzKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoUihhcmd1bWVudHNbMF0sRCkpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jcmVhdGVQb2x5Z29uKHRoaXMuY3JlYXRlTGluZWFyUmluZyh0KSl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZVBvbHlnb24odGhpcy5jcmVhdGVMaW5lYXJSaW5nKGUpKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFB0KXtlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jcmVhdGVQb2x5Z29uKGUsbnVsbCl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBuZXcgUnQoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSx0aGlzKX19LGdldFNSSUQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5TUklEfSxjcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGZ0KG51bGwsdGhpcyk6MT09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGZ0KGFyZ3VtZW50c1swXSx0aGlzKTp2b2lkIDB9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgT3QodGhpcykuZWRpdCh0LHtlZGl0OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5LmNyZWF0ZSh0KX19fSl9LGdldFByZWNpc2lvbk1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJlY2lzaW9uTW9kZWx9LGNyZWF0ZUxpbmVhclJpbmc6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5jcmVhdGVMaW5lYXJSaW5nKHRoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZShbXSkpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY3JlYXRlTGluZWFyUmluZyhudWxsIT09dD90aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCk6bnVsbCl9aWYoUihhcmd1bWVudHNbMF0sRCkpcmV0dXJuIG5ldyBQdChhcmd1bWVudHNbMF0sdGhpcyl9fSxjcmVhdGVNdWx0aVBvbHlnb246ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGJ0KG51bGwsdGhpcyk6MT09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGJ0KGFyZ3VtZW50c1swXSx0aGlzKTp2b2lkIDB9LGNyZWF0ZU11bHRpUG9pbnQ6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbmV3IFR0KG51bGwsdGhpcyk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkpcmV0dXJuIG5ldyBUdChhcmd1bWVudHNbMF0sdGhpcyk7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9pbnQobnVsbCE9PXQ/dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpOm51bGwpfWlmKFIoYXJndW1lbnRzWzBdLEQpKXt2YXIgZT1hcmd1bWVudHNbMF07aWYobnVsbD09PWUpcmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChuZXcgQXJyYXkoMCkuZmlsbChudWxsKSk7Zm9yKHZhciBuPW5ldyBBcnJheShlLnNpemUoKSkuZmlsbChudWxsKSxpPTA7aTxlLnNpemUoKTtpKyspe3ZhciByPXRoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZSgxLGUuZ2V0RGltZW5zaW9uKCkpO050LmNvcHkoZSxpLHIsMCwxKSxuW2ldPXRoaXMuY3JlYXRlUG9pbnQocil9cmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChuKX19fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltvXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWXR9fSksWXQudG9NdWx0aVBvbHlnb25BcnJheT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHQudG9BcnJheShlKX0sWXQudG9HZW9tZXRyeUFycmF5PWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXJldHVybiBudWxsO3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSxZdC5nZXREZWZhdWx0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeT1mdW5jdGlvbigpe3JldHVybiBHdC5pbnN0YW5jZSgpfSxZdC50b011bHRpTGluZVN0cmluZ0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSxZdC50b0xpbmVTdHJpbmdBcnJheT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHQudG9BcnJheShlKX0sWXQudG9NdWx0aVBvaW50QXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LFl0LnRvTGluZWFyUmluZ0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSxZdC50b1BvaW50QXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LFl0LnRvUG9seWdvbkFycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSxZdC5jcmVhdGVQb2ludEZyb21JbnRlcm5hbENvb3JkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZ2V0UHJlY2lzaW9uTW9kZWwoKS5tYWtlUHJlY2lzZSh0KSxlLmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0KX0sWXQuc2VyaWFsVmVyc2lvblVJRD0tMHg1ZWE3NWYyMDUxZWViNDAwO3ZhciBIcz17dHlwZVN0cjovXlxccyooXFx3KylcXHMqXFwoXFxzKiguKilcXHMqXFwpXFxzKiQvLGVtcHR5VHlwZVN0cjovXlxccyooXFx3KylcXHMqRU1QVFlcXHMqJC8sc3BhY2VzOi9cXHMrLyxwYXJlbkNvbW1hOi9cXClcXHMqLFxccypcXCgvLGRvdWJsZVBhcmVuQ29tbWE6L1xcKVxccypcXClcXHMqLFxccypcXChcXHMqXFwoLyx0cmltUGFyZW5zOi9eXFxzKlxcKD8oLio/KVxcKT9cXHMqJC99O2UoVXQucHJvdG90eXBlLHtyZWFkOmZ1bmN0aW9uKHQpe3ZhciBlLG47dD10LnJlcGxhY2UoL1tcXG5cXHJdL2csXCIgXCIpO3ZhciBpPUhzLnR5cGVTdHIuZXhlYyh0KTtpZigtMSE9PXQuc2VhcmNoKFwiRU1QVFlcIikmJigoaT1Icy5lbXB0eVR5cGVTdHIuZXhlYyh0KSlbMl09dm9pZCAwKSxpJiYobj1pWzFdLnRvTG93ZXJDYXNlKCksaT1pWzJdLGpzW25dJiYoZT1qc1tuXS5hcHBseSh0aGlzLFtpXSkpKSx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBXS1QgXCIrdCk7cmV0dXJuIGV9LHdyaXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4dHJhY3RHZW9tZXRyeSh0KX0sZXh0cmFjdEdlb21ldHJ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0R2VvbWV0cnlUeXBlKCkudG9Mb3dlckNhc2UoKTtpZighV3NbZV0pcmV0dXJuIG51bGw7dmFyIG49ZS50b1VwcGVyQ2FzZSgpO3JldHVybiB0LmlzRW1wdHkoKT9uK1wiIEVNUFRZXCI6bitcIihcIitXc1tlXS5hcHBseSh0aGlzLFt0XSkrXCIpXCJ9fSk7dmFyIFdzPXtjb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0LngrXCIgXCIrdC55fSxwb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gV3MuY29vcmRpbmF0ZS5jYWxsKHRoaXMsdC5jb29yZGluYXRlcy5jb29yZGluYXRlc1swXSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxpPXQuZ2VvbWV0cmllcy5sZW5ndGg7bjxpOysrbillLnB1c2goXCIoXCIrV3MucG9pbnQuYXBwbHkodGhpcyxbdC5nZW9tZXRyaWVzW25dXSkrXCIpXCIpO3JldHVybiBlLmpvaW4oXCIsXCIpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10LnBvaW50cy5jb29yZGluYXRlcy5sZW5ndGg7bjxpOysrbillLnB1c2goV3MuY29vcmRpbmF0ZS5hcHBseSh0aGlzLFt0LnBvaW50cy5jb29yZGluYXRlc1tuXV0pKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0sbGluZWFycmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dC5wb2ludHMuY29vcmRpbmF0ZXMubGVuZ3RoO248aTsrK24pZS5wdXNoKFdzLmNvb3JkaW5hdGUuYXBwbHkodGhpcyxbdC5wb2ludHMuY29vcmRpbmF0ZXNbbl1dKSk7cmV0dXJuIGUuam9pbihcIixcIil9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dC5nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaChcIihcIitXcy5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW3QuZ2VvbWV0cmllc1tuXV0pK1wiKVwiKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0scG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT1bXTtlLnB1c2goXCIoXCIrV3MubGluZXN0cmluZy5hcHBseSh0aGlzLFt0LnNoZWxsXSkrXCIpXCIpO2Zvcih2YXIgbj0wLGk9dC5ob2xlcy5sZW5ndGg7bjxpOysrbillLnB1c2goXCIoXCIrV3MubGluZXN0cmluZy5hcHBseSh0aGlzLFt0LmhvbGVzW25dXSkrXCIpXCIpO3JldHVybiBlLmpvaW4oXCIsXCIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxpPXQuZ2VvbWV0cmllcy5sZW5ndGg7bjxpOysrbillLnB1c2goXCIoXCIrV3MucG9seWdvbi5hcHBseSh0aGlzLFt0Lmdlb21ldHJpZXNbbl1dKStcIilcIik7cmV0dXJuIGUuam9pbihcIixcIil9LGdlb21ldHJ5Y29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dC5nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaCh0aGlzLmV4dHJhY3RHZW9tZXRyeSh0Lmdlb21ldHJpZXNbbl0pKTtyZXR1cm4gZS5qb2luKFwiLFwiKX19LGpzPXtwb2ludDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludCgpO3Q9dC50cmltKCkuc3BsaXQoSHMuc3BhY2VzKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9pbnQobmV3IGQoTnVtYmVyLnBhcnNlRmxvYXQodFswXSksTnVtYmVyLnBhcnNlRmxvYXQodFsxXSkpKX0sbXVsdGlwb2ludDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KCk7Zm9yKHZhciBlLG49dC50cmltKCkuc3BsaXQoXCIsXCIpLGk9W10scj0wLHM9bi5sZW5ndGg7cjxzOysrcillPW5bcl0ucmVwbGFjZShIcy50cmltUGFyZW5zLFwiJDFcIiksaS5wdXNoKGpzLnBvaW50LmFwcGx5KHRoaXMsW2VdKSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9pbnQoaSl9LGxpbmVzdHJpbmc6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZygpO2Zvcih2YXIgZSxuPXQudHJpbSgpLnNwbGl0KFwiLFwiKSxpPVtdLHI9MCxzPW4ubGVuZ3RoO3I8czsrK3IpZT1uW3JdLnRyaW0oKS5zcGxpdChIcy5zcGFjZXMpLGkucHVzaChuZXcgZChOdW1iZXIucGFyc2VGbG9hdChlWzBdKSxOdW1iZXIucGFyc2VGbG9hdChlWzFdKSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKGkpfSxsaW5lYXJyaW5nOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoKTtmb3IodmFyIGUsbj10LnRyaW0oKS5zcGxpdChcIixcIiksaT1bXSxyPTAscz1uLmxlbmd0aDtyPHM7KytyKWU9bltyXS50cmltKCkuc3BsaXQoSHMuc3BhY2VzKSxpLnB1c2gobmV3IGQoTnVtYmVyLnBhcnNlRmxvYXQoZVswXSksTnVtYmVyLnBhcnNlRmxvYXQoZVsxXSkpKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhpKX0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZygpO2Zvcih2YXIgZSxuPXQudHJpbSgpLnNwbGl0KEhzLnBhcmVuQ29tbWEpLGk9W10scj0wLHM9bi5sZW5ndGg7cjxzOysrcillPW5bcl0ucmVwbGFjZShIcy50cmltUGFyZW5zLFwiJDFcIiksaS5wdXNoKGpzLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbZV0pKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGkpfSxwb2x5Z29uOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvbHlnb24oKTtmb3IodmFyIGUsbixpPXQudHJpbSgpLnNwbGl0KEhzLnBhcmVuQ29tbWEpLHI9W10scz0wLG89aS5sZW5ndGg7czxvOysrcyllPWlbc10ucmVwbGFjZShIcy50cmltUGFyZW5zLFwiJDFcIiksZT1qcy5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2VdKSxlPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoZS5wb2ludHMpLDA9PT1zP249ZTpyLnB1c2goZSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvbHlnb24obixyKX0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9seWdvbigpO2Zvcih2YXIgZSxuPXQudHJpbSgpLnNwbGl0KEhzLmRvdWJsZVBhcmVuQ29tbWEpLGk9W10scj0wLHM9bi5sZW5ndGg7cjxzOysrcillPW5bcl0ucmVwbGFjZShIcy50cmltUGFyZW5zLFwiJDFcIiksaS5wdXNoKGpzLnBvbHlnb24uYXBwbHkodGhpcyxbZV0pKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKGkpfSxnZW9tZXRyeWNvbGxlY3Rpb246ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKCk7Zm9yKHZhciBlPSh0PXQucmVwbGFjZSgvLFxccyooW0EtWmEtel0pL2csXCJ8JDFcIikpLnRyaW0oKS5zcGxpdChcInxcIiksbj1bXSxpPTAscj1lLmxlbmd0aDtpPHI7KytpKW4ucHVzaCh0aGlzLnJlYWQoZVtpXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obil9fTtlKFh0LnByb3RvdHlwZSx7d3JpdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyc2VyLndyaXRlKHQpfX0pLGUoWHQse3RvTGluZVN0cmluZzpmdW5jdGlvbih0LGUpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtyZXR1cm5cIkxJTkVTVFJJTkcgKCBcIit0LngrXCIgXCIrdC55K1wiLCBcIitlLngrXCIgXCIrZS55K1wiIClcIn19KSxlKEh0LnByb3RvdHlwZSx7Z2V0SW5kZXhBbG9uZ1NlZ21lbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb21wdXRlSW50TGluZUluZGV4KCksdGhpcy5pbnRMaW5lSW5kZXhbdF1bZV19LGdldFRvcG9sb2d5U3VtbWFyeTpmdW5jdGlvbigpe3ZhciB0PW5ldyBQO3JldHVybiB0aGlzLmlzRW5kUG9pbnQoKSYmdC5hcHBlbmQoXCIgZW5kcG9pbnRcIiksdGhpcy5faXNQcm9wZXImJnQuYXBwZW5kKFwiIHByb3BlclwiKSx0aGlzLmlzQ29sbGluZWFyKCkmJnQuYXBwZW5kKFwiIGNvbGxpbmVhclwiKSx0LnRvU3RyaW5nKCl9LGNvbXB1dGVJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dGhpcy5pbnB1dExpbmVzWzBdWzBdPXQsdGhpcy5pbnB1dExpbmVzWzBdWzFdPWUsdGhpcy5pbnB1dExpbmVzWzFdWzBdPW4sdGhpcy5pbnB1dExpbmVzWzFdWzFdPWksdGhpcy5yZXN1bHQ9dGhpcy5jb21wdXRlSW50ZXJzZWN0KHQsZSxuLGkpfSxnZXRJbnRlcnNlY3Rpb25OdW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHR9LGNvbXB1dGVJbnRMaW5lSW5kZXg6ZnVuY3Rpb24oKXt2YXIgdCxlOzA9PT1hcmd1bWVudHMubGVuZ3RoP251bGw9PT10aGlzLmludExpbmVJbmRleCYmKHRoaXMuaW50TGluZUluZGV4PUFycmF5KDIpLmZpbGwoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkoMil9KSx0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoMCksdGhpcy5jb21wdXRlSW50TGluZUluZGV4KDEpKToxPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9dGhpcy5nZXRFZGdlRGlzdGFuY2UodCwwKSx0aGlzLmdldEVkZ2VEaXN0YW5jZSh0LDEpPGU/KHRoaXMuaW50TGluZUluZGV4W3RdWzBdPTAsdGhpcy5pbnRMaW5lSW5kZXhbdF1bMV09MSk6KHRoaXMuaW50TGluZUluZGV4W3RdWzBdPTEsdGhpcy5pbnRMaW5lSW5kZXhbdF1bMV09MCkpfSxpc1Byb3BlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyc2VjdGlvbigpJiZ0aGlzLl9pc1Byb3Blcn0sc2V0UHJlY2lzaW9uTW9kZWw6ZnVuY3Rpb24odCl7dGhpcy5wcmVjaXNpb25Nb2RlbD10fSxpc0ludGVyaW9ySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuISF0aGlzLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oMCl8fCEhdGhpcy5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKDEpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHRoaXMucmVzdWx0O2UrKylpZighdGhpcy5pbnRQdFtlXS5lcXVhbHMyRCh0aGlzLmlucHV0TGluZXNbdF1bMF0pJiYhdGhpcy5pbnRQdFtlXS5lcXVhbHMyRCh0aGlzLmlucHV0TGluZXNbdF1bMV0pKXJldHVybiEwO3JldHVybiExfX0sZ2V0SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludFB0W3RdfSxpc0VuZFBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzSW50ZXJzZWN0aW9uKCkmJiF0aGlzLl9pc1Byb3Blcn0saGFzSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdWx0IT09SHQuTk9fSU5URVJTRUNUSU9OfSxnZXRFZGdlRGlzdGFuY2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gSHQuY29tcHV0ZUVkZ2VEaXN0YW5jZSh0aGlzLmludFB0W2VdLHRoaXMuaW5wdXRMaW5lc1t0XVswXSx0aGlzLmlucHV0TGluZXNbdF1bMV0pfSxpc0NvbGxpbmVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3VsdD09PUh0LkNPTExJTkVBUl9JTlRFUlNFQ1RJT059LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFh0LnRvTGluZVN0cmluZyh0aGlzLmlucHV0TGluZXNbMF1bMF0sdGhpcy5pbnB1dExpbmVzWzBdWzFdKStcIiAtIFwiK1h0LnRvTGluZVN0cmluZyh0aGlzLmlucHV0TGluZXNbMV1bMF0sdGhpcy5pbnB1dExpbmVzWzFdWzFdKSt0aGlzLmdldFRvcG9sb2d5U3VtbWFyeSgpfSxnZXRFbmRwb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmlucHV0TGluZXNbdF1bZV19LGlzSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5yZXN1bHQ7ZSsrKWlmKHRoaXMuaW50UHRbZV0uZXF1YWxzMkQodCkpcmV0dXJuITA7cmV0dXJuITF9LGdldEludGVyc2VjdGlvbkFsb25nU2VnbWVudDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoKSx0aGlzLmludFB0W3RoaXMuaW50TGluZUluZGV4W3RdW2VdXX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSHR9fSksSHQuY29tcHV0ZUVkZ2VEaXN0YW5jZT1mdW5jdGlvbih0LGUsbil7dmFyIGkscj1NYXRoLmFicyhuLngtZS54KSxzPU1hdGguYWJzKG4ueS1lLnkpLG89LTE7cmV0dXJuIHQuZXF1YWxzKGUpP289MDp0LmVxdWFscyhuKT9vPXM8cj9yOnM6KGk9TWF0aC5hYnModC54LWUueCksbj1NYXRoLmFicyh0LnktZS55KSwwIT09KG89czxyP2k6bil8fHQuZXF1YWxzKGUpfHwobz1NYXRoLm1heChpLG4pKSksbC5pc1RydWUoISgwPT09byYmIXQuZXF1YWxzKGUpKSxcIkJhZCBkaXN0YW5jZSBjYWxjdWxhdGlvblwiKSxvfSxIdC5ub25Sb2J1c3RDb21wdXRlRWRnZURpc3RhbmNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LngtZS54LHI9dC55LWUueSxyPU1hdGguc3FydChpKmkrcipyKTtyZXR1cm4gbC5pc1RydWUoISgwPT09ciYmIXQuZXF1YWxzKGUpKSxcIkludmFsaWQgZGlzdGFuY2UgY2FsY3VsYXRpb25cIikscn0sSHQuRE9OVF9JTlRFUlNFQ1Q9MCxIdC5ET19JTlRFUlNFQ1Q9MSxIdC5DT0xMSU5FQVI9MixIdC5OT19JTlRFUlNFQ1RJT049MCxIdC5QT0lOVF9JTlRFUlNFQ1RJT049MSxIdC5DT0xMSU5FQVJfSU5URVJTRUNUSU9OPTIsYShXdCxIdCksZShXdC5wcm90b3R5cGUse2lzSW5TZWdtZW50RW52ZWxvcGVzOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBDKHRoaXMuaW5wdXRMaW5lc1swXVswXSx0aGlzLmlucHV0TGluZXNbMF1bMV0pLG49bmV3IEModGhpcy5pbnB1dExpbmVzWzFdWzBdLHRoaXMuaW5wdXRMaW5lc1sxXVsxXSk7cmV0dXJuIGUuY29udGFpbnModCkmJm4uY29udGFpbnModCl9LGNvbXB1dGVJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtpZigzIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gSHQucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gdGhpcy5faXNQcm9wZXI9ITEsQy5pbnRlcnNlY3RzKGUsbix0KSYmMD09PVp0Lm9yaWVudGF0aW9uSW5kZXgoZSxuLHQpJiYwPT09WnQub3JpZW50YXRpb25JbmRleChuLGUsdCk/KHRoaXMuX2lzUHJvcGVyPSEwLCh0LmVxdWFscyhlKXx8dC5lcXVhbHMobikpJiYodGhpcy5faXNQcm9wZXI9ITEpLHRoaXMucmVzdWx0PUh0LlBPSU5UX0lOVEVSU0VDVElPTixudWxsKTp2b2lkKHRoaXMucmVzdWx0PUh0Lk5PX0lOVEVSU0VDVElPTil9LG5vcm1hbGl6ZVRvTWluaW11bTpmdW5jdGlvbih0LGUsbixpLHIpe3IueD10aGlzLnNtYWxsZXN0SW5BYnNWYWx1ZSh0LngsZS54LG4ueCxpLngpLHIueT10aGlzLnNtYWxsZXN0SW5BYnNWYWx1ZSh0LnksZS55LG4ueSxpLnkpLHQueC09ci54LHQueS09ci55LGUueC09ci54LGUueS09ci55LG4ueC09ci54LG4ueS09ci55LGkueC09ci54LGkueS09ci55fSxzYWZlSENvb3JkaW5hdGVJbnRlcnNlY3Rpb246ZnVuY3Rpb24oZSxuLGkscil7dmFyIHM9bnVsbDt0cnl7cz1GLmludGVyc2VjdGlvbihlLG4saSxyKX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiB3KSl0aHJvdyB0O3M9V3QubmVhcmVzdEVuZHBvaW50KGUsbixpLHIpfXJldHVybiBzfSxpbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dGhpcy5pbnRlcnNlY3Rpb25XaXRoTm9ybWFsaXphdGlvbih0LGUsbixpKTtyZXR1cm4gdGhpcy5pc0luU2VnbWVudEVudmVsb3BlcyhyKXx8KHI9bmV3IGQoV3QubmVhcmVzdEVuZHBvaW50KHQsZSxuLGkpKSksbnVsbCE9PXRoaXMucHJlY2lzaW9uTW9kZWwmJnRoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2Uocikscn0sc21hbGxlc3RJbkFic1ZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQsdD1NYXRoLmFicyhyKTtyZXR1cm4gTWF0aC5hYnMoZSk8dCYmKHI9ZSx0PU1hdGguYWJzKGUpKSxNYXRoLmFicyhuKTx0JiYocj1uLHQ9TWF0aC5hYnMobikpLE1hdGguYWJzKGkpPHQmJihyPWkpLHJ9LGNoZWNrREQ6ZnVuY3Rpb24odCxlLG4saSxyKXtuPU0uaW50ZXJzZWN0aW9uKHQsZSxuLGkpLGk9dGhpcy5pc0luU2VnbWVudEVudmVsb3BlcyhuKTtBLm91dC5wcmludGxuKFwiREQgaW4gZW52ID0gXCIraStcIiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFwiK24pLDFlLTQ8ci5kaXN0YW5jZShuKSYmQS5vdXQucHJpbnRsbihcIkRpc3RhbmNlID0gXCIrci5kaXN0YW5jZShuKSl9LGludGVyc2VjdGlvbldpdGhOb3JtYWxpemF0aW9uOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW5ldyBkKHQpLHQ9bmV3IGQoZSksZT1uZXcgZChuKSxuPW5ldyBkKGkpLGk9bmV3IGQ7dGhpcy5ub3JtYWxpemVUb0VudkNlbnRyZShyLHQsZSxuLGkpO249dGhpcy5zYWZlSENvb3JkaW5hdGVJbnRlcnNlY3Rpb24ocix0LGUsbik7cmV0dXJuIG4ueCs9aS54LG4ueSs9aS55LG59LGNvbXB1dGVDb2xsaW5lYXJJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9Qy5pbnRlcnNlY3RzKHQsZSxuKSxzPUMuaW50ZXJzZWN0cyh0LGUsaSksbz1DLmludGVyc2VjdHMobixpLHQpLGE9Qy5pbnRlcnNlY3RzKG4saSxlKTtyZXR1cm4gciYmcz8odGhpcy5pbnRQdFswXT1uLHRoaXMuaW50UHRbMV09aSxIdC5DT0xMSU5FQVJfSU5URVJTRUNUSU9OKTpvJiZhPyh0aGlzLmludFB0WzBdPXQsdGhpcy5pbnRQdFsxXT1lLEh0LkNPTExJTkVBUl9JTlRFUlNFQ1RJT04pOnImJm8/KHRoaXMuaW50UHRbMF09bix0aGlzLmludFB0WzFdPXQsIW4uZXF1YWxzKHQpfHxzfHxhP0h0LkNPTExJTkVBUl9JTlRFUlNFQ1RJT046SHQuUE9JTlRfSU5URVJTRUNUSU9OKTpyJiZhPyh0aGlzLmludFB0WzBdPW4sdGhpcy5pbnRQdFsxXT1lLCFuLmVxdWFscyhlKXx8c3x8bz9IdC5DT0xMSU5FQVJfSU5URVJTRUNUSU9OOkh0LlBPSU5UX0lOVEVSU0VDVElPTik6cyYmbz8odGhpcy5pbnRQdFswXT1pLHRoaXMuaW50UHRbMV09dCwhaS5lcXVhbHModCl8fHJ8fGE/SHQuQ09MTElORUFSX0lOVEVSU0VDVElPTjpIdC5QT0lOVF9JTlRFUlNFQ1RJT04pOnMmJmE/KHRoaXMuaW50UHRbMF09aSx0aGlzLmludFB0WzFdPWUsIWkuZXF1YWxzKGUpfHxyfHxvP0h0LkNPTExJTkVBUl9JTlRFUlNFQ1RJT046SHQuUE9JTlRfSU5URVJTRUNUSU9OKTpIdC5OT19JTlRFUlNFQ1RJT059LG5vcm1hbGl6ZVRvRW52Q2VudHJlOmZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIHM9KHQueDxlLng/dDplKS54LG89KHQueTxlLnk/dDplKS55LGE9KHQueD5lLng/dDplKS54LHU9KHQueT5lLnk/dDplKS55LGw9KG4ueDxpLng/bjppKS54LGg9KG4ueTxpLnk/bjppKS55LGM9KG4ueD5pLng/bjppKS54LGY9KG4ueT5pLnk/bjppKS55LGM9KChsPHM/czpsKSsoYTxjP2E6YykpLzIsZj0oKGg8bz9vOmgpKyh1PGY/dTpmKSkvMjtyLng9YyxyLnk9Zix0LngtPXIueCx0LnktPXIueSxlLngtPXIueCxlLnktPXIueSxuLngtPXIueCxuLnktPXIueSxpLngtPXIueCxpLnktPXIueX0sY29tcHV0ZUludGVyc2VjdDpmdW5jdGlvbih0LGUsbixpKXtpZih0aGlzLl9pc1Byb3Blcj0hMSwhQy5pbnRlcnNlY3RzKHQsZSxuLGkpKXJldHVybiBIdC5OT19JTlRFUlNFQ1RJT047dmFyIHI9WnQub3JpZW50YXRpb25JbmRleCh0LGUsbikscz1adC5vcmllbnRhdGlvbkluZGV4KHQsZSxpKTtpZigwPHImJjA8c3x8cjwwJiZzPDApcmV0dXJuIEh0Lk5PX0lOVEVSU0VDVElPTjt2YXIgbz1adC5vcmllbnRhdGlvbkluZGV4KG4saSx0KSxhPVp0Lm9yaWVudGF0aW9uSW5kZXgobixpLGUpO3JldHVybiAwPG8mJjA8YXx8bzwwJiZhPDA/SHQuTk9fSU5URVJTRUNUSU9OOjA9PT1yJiYwPT09cyYmMD09PW8mJjA9PT1hP3RoaXMuY29tcHV0ZUNvbGxpbmVhckludGVyc2VjdGlvbih0LGUsbixpKTooMD09PXJ8fDA9PT1zfHwwPT09b3x8MD09PWE/KHRoaXMuX2lzUHJvcGVyPSExLHQuZXF1YWxzMkQobil8fHQuZXF1YWxzMkQoaSk/dGhpcy5pbnRQdFswXT10OmUuZXF1YWxzMkQobil8fGUuZXF1YWxzMkQoaSk/dGhpcy5pbnRQdFswXT1lOjA9PT1yP3RoaXMuaW50UHRbMF09bmV3IGQobik6MD09PXM/dGhpcy5pbnRQdFswXT1uZXcgZChpKTowPT09bz90aGlzLmludFB0WzBdPW5ldyBkKHQpOjA9PT1hJiYodGhpcy5pbnRQdFswXT1uZXcgZChlKSkpOih0aGlzLl9pc1Byb3Blcj0hMCx0aGlzLmludFB0WzBdPXRoaXMuaW50ZXJzZWN0aW9uKHQsZSxuLGkpKSxIdC5QT0lOVF9JTlRFUlNFQ1RJT04pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBXdH19KSxXdC5uZWFyZXN0RW5kcG9pbnQ9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dCxzPVp0LmRpc3RhbmNlUG9pbnRMaW5lKHQsbixpKSxvPVp0LmRpc3RhbmNlUG9pbnRMaW5lKGUsbixpKTtyZXR1cm4gbzxzJiYocz1vLHI9ZSksKG89WnQuZGlzdGFuY2VQb2ludExpbmUobix0LGUpKTxzJiYocz1vLHI9biksKG89WnQuZGlzdGFuY2VQb2ludExpbmUoaSx0LGUpKTxzJiYocz1vLHI9aSkscn0sZShqdC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGp0fX0pLGp0Lm9yaWVudGF0aW9uSW5kZXg9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUueC10Lngscj1lLnktdC55LHQ9bi54LWUueCxlPW4ueS1lLnk7cmV0dXJuIGp0LnNpZ25PZkRldDJ4MihpLHIsdCxlKX0sanQuc2lnbk9mRGV0MngyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByLHM9bnVsbCxvPW51bGwscz0xO2lmKDA9PT10fHwwPT09aSlyZXR1cm4gMD09PWV8fDA9PT1uPzA6MDxlPzA8bj8tczpzOjA8bj9zOi1zO2lmKDA9PT1lfHwwPT09bilyZXR1cm4gMDxpPzA8dD9zOi1zOjA8dD8tczpzO2lmKDA8ZT8wPGk/ZTw9aXx8KHM9LXMsbz10LHQ9bixuPW8sbz1lLGU9aSxpPW8pOmk9ZTw9LWk/KHM9LXMsbj0tbiwtaSk6KG89dCx0PS1uLG49byxvPWUsZT0taSxvKTowPGk/LWU8PWk/KHM9LXMsdD0tdCxlPS1lKToobz0tdCx0PW4sbj1vLG89LWUsZT1pLGk9byk6aT1pPD1lPyh0PS10LGU9LWUsbj0tbiwtaSk6KHM9LXMsbz0tdCx0PS1uLG49byxvPS1lLGU9LWksbyksMDx0KXtpZighKDA8bikpcmV0dXJuIHM7aWYoISh0PD1uKSlyZXR1cm4gc31lbHNle2lmKDA8bilyZXR1cm4tcztpZighKG48PXQpKXJldHVybi1zO3M9LXMsdD0tdCxuPS1ufWZvcig7Oyl7aWYoKGktPShyPU1hdGguZmxvb3Iobi90KSkqZSk8MClyZXR1cm4tcztpZihlPGkpcmV0dXJuIHM7aWYoKG4tPXIqdCkrbjx0KXtpZihlPGkraSlyZXR1cm4gc31lbHNle2lmKGkraTxlKXJldHVybi1zO249dC1uLGk9ZS1pLHM9LXN9aWYoMD09PWkpcmV0dXJuIDA9PT1uPzA6LXM7aWYoMD09PW4pcmV0dXJuIHM7aWYoKGUtPShyPU1hdGguZmxvb3IodC9uKSkqaSk8MClyZXR1cm4gcztpZihpPGUpcmV0dXJuLXM7aWYoKHQtPXIqbikrdDxuKXtpZihpPGUrZSlyZXR1cm4tc31lbHNle2lmKGUrZTxpKXJldHVybiBzO3Q9bi10LGU9aS1lLHM9LXN9aWYoMD09PWUpcmV0dXJuIDA9PT10PzA6cztpZigwPT09dClyZXR1cm4tc319LGUoS3QucHJvdG90eXBlLHtjb3VudFNlZ21lbnQ6ZnVuY3Rpb24odCxlKXtpZih0Lng8dGhpcy5wLngmJmUueDx0aGlzLnAueClyZXR1cm4gbnVsbDtpZih0aGlzLnAueD09PWUueCYmdGhpcy5wLnk9PT1lLnkpcmV0dXJuIHRoaXMuaXNQb2ludE9uU2VnbWVudD0hMCxudWxsO2lmKHQueT09PXRoaXMucC55JiZlLnk9PT10aGlzLnAueSl7dmFyIG49dC54LGk9ZS54O3JldHVybiBpPG4mJihuPWUueCxpPXQueCksdGhpcy5wLng+PW4mJnRoaXMucC54PD1pJiYodGhpcy5pc1BvaW50T25TZWdtZW50PSEwKSxudWxsfWlmKHQueT50aGlzLnAueSYmZS55PD10aGlzLnAueXx8ZS55PnRoaXMucC55JiZ0Lnk8PXRoaXMucC55KXtuPXQueC10aGlzLnAueCxpPXQueS10aGlzLnAueSx0PWUueC10aGlzLnAueCxlPWUueS10aGlzLnAueSx0PWp0LnNpZ25PZkRldDJ4MihuLGksdCxlKTtpZigwPT09dClyZXR1cm4gdGhpcy5pc1BvaW50T25TZWdtZW50PSEwLG51bGw7ZTxpJiYodD0tdCksMDx0JiZ0aGlzLmNyb3NzaW5nQ291bnQrK319LGlzUG9pbnRJblBvbHlnb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMb2NhdGlvbigpIT09TC5FWFRFUklPUn0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1BvaW50T25TZWdtZW50P0wuQk9VTkRBUlk6dGhpcy5jcm9zc2luZ0NvdW50JTI9PTE/TC5JTlRFUklPUjpMLkVYVEVSSU9SfSxpc09uU2VnbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUG9pbnRPblNlZ21lbnR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEt0fX0pLEt0LmxvY2F0ZVBvaW50SW5SaW5nPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkJiZSKGFyZ3VtZW50c1sxXSxEKSl7Zm9yKHZhciB0PWFyZ3VtZW50c1sxXSxlPW5ldyBLdChhcmd1bWVudHNbMF0pLG49bmV3IGQsaT1uZXcgZCxyPTE7cjx0LnNpemUoKTtyKyspaWYodC5nZXRDb29yZGluYXRlKHIsbiksdC5nZXRDb29yZGluYXRlKHItMSxpKSxlLmNvdW50U2VnbWVudChuLGkpLGUuaXNPblNlZ21lbnQoKSlyZXR1cm4gZS5nZXRMb2NhdGlvbigpO3JldHVybiBlLmdldExvY2F0aW9uKCl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIHM9YXJndW1lbnRzWzFdLGU9bmV3IEt0KGFyZ3VtZW50c1swXSkscj0xO3I8cy5sZW5ndGg7cisrKXtuPXNbcl0saT1zW3ItMV07aWYoZS5jb3VudFNlZ21lbnQobixpKSxlLmlzT25TZWdtZW50KCkpcmV0dXJuIGUuZ2V0TG9jYXRpb24oKX1yZXR1cm4gZS5nZXRMb2NhdGlvbigpfX0sZShadC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFp0fX0pLFp0Lm9yaWVudGF0aW9uSW5kZXg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBNLm9yaWVudGF0aW9uSW5kZXgodCxlLG4pfSxadC5zaWduZWRBcmVhPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHQubGVuZ3RoPDMpcmV0dXJuIDA7Zm9yKHZhciBlPTAsbj10WzBdLngsaT0xO2k8dC5sZW5ndGgtMTtpKyspe3ZhciByPXRbaV0ueC1uLHM9dFtpKzFdLnk7ZSs9cioodFtpLTFdLnktcyl9cmV0dXJuIGUvMn1pZihSKGFyZ3VtZW50c1swXSxEKSl7dmFyIG89YXJndW1lbnRzWzBdLGE9by5zaXplKCk7aWYoYTwzKXJldHVybiAwO3ZhciB1PW5ldyBkLGw9bmV3IGQsaD1uZXcgZDtvLmdldENvb3JkaW5hdGUoMCxsKSxvLmdldENvb3JkaW5hdGUoMSxoKTtuPWwueDtoLngtPW47Zm9yKGU9MCxpPTE7aTxhLTE7aSsrKXUueT1sLnksbC54PWgueCxsLnk9aC55LG8uZ2V0Q29vcmRpbmF0ZShpKzEsaCksaC54LT1uLGUrPWwueCoodS55LWgueSk7cmV0dXJuIGUvMn19LFp0LmRpc3RhbmNlTGluZUxpbmU9ZnVuY3Rpb24odCxlLG4saSl7aWYodC5lcXVhbHMoZSkpcmV0dXJuIFp0LmRpc3RhbmNlUG9pbnRMaW5lKHQsbixpKTtpZihuLmVxdWFscyhpKSlyZXR1cm4gWnQuZGlzdGFuY2VQb2ludExpbmUoaSx0LGUpO3ZhciByLHMsbyxhPSExO3JldHVybiFDLmludGVyc2VjdHModCxlLG4saSl8fDA9PShvPShlLngtdC54KSooaS55LW4ueSktKGUueS10LnkpKihpLngtbi54KSk/YT0hMDoocj0odC55LW4ueSkqKGkueC1uLngpLSh0Lngtbi54KSooaS55LW4ueSkscz0oKHQueS1uLnkpKihlLngtdC54KS0odC54LW4ueCkqKGUueS10LnkpKS9vLCgobz1yL28pPDB8fDE8b3x8czwwfHwxPHMpJiYoYT0hMCkpLGE/VC5taW4oWnQuZGlzdGFuY2VQb2ludExpbmUodCxuLGkpLFp0LmRpc3RhbmNlUG9pbnRMaW5lKGUsbixpKSxadC5kaXN0YW5jZVBvaW50TGluZShuLHQsZSksWnQuZGlzdGFuY2VQb2ludExpbmUoaSx0LGUpKTowfSxadC5pc1BvaW50SW5SaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFp0LmxvY2F0ZVBvaW50SW5SaW5nKHQsZSkhPT1MLkVYVEVSSU9SfSxadC5jb21wdXRlTGVuZ3RoPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2l6ZSgpO2lmKGU8PTEpcmV0dXJuIDA7dmFyIG49MCxpPW5ldyBkO3QuZ2V0Q29vcmRpbmF0ZSgwLGkpO2Zvcih2YXIgcj1pLngscz1pLnksbz0xO288ZTtvKyspe3QuZ2V0Q29vcmRpbmF0ZShvLGkpO3ZhciBhPWkueCx1PWkueSxsPWEtcixoPXUtcztuKz1NYXRoLnNxcnQobCpsK2gqaCkscj1hLHM9dX1yZXR1cm4gbn0sWnQuaXNDQ1c9ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgtMTtpZihlPDMpdGhyb3cgbmV3IGM7Zm9yKHZhciBuPXRbMF0saT0wLHI9MTtyPD1lO3IrKyl7dmFyIHM9dFtyXTtzLnk+bi55JiYobj1zLGk9cil9Zm9yKHZhciBvPWk7LS1vPDAmJihvPWUpLHRbb10uZXF1YWxzMkQobikmJm8hPT1pOyk7Zm9yKHZhciBhPWk7dFthPShhKzEpJWVdLmVxdWFsczJEKG4pJiZhIT09aTspO3ZhciB1PXRbb10sbD10W2FdO2lmKHUuZXF1YWxzMkQobil8fGwuZXF1YWxzMkQobil8fHUuZXF1YWxzMkQobCkpcmV0dXJuITE7dmFyIGg9WnQuY29tcHV0ZU9yaWVudGF0aW9uKHUsbixsKTtyZXR1cm4gMD09PWg/dS54PmwueDowPGh9LFp0LmxvY2F0ZVBvaW50SW5SaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEt0LmxvY2F0ZVBvaW50SW5SaW5nKHQsZSl9LFp0LmRpc3RhbmNlUG9pbnRMaW5lUGVycGVuZGljdWxhcj1mdW5jdGlvbih0LGUsbil7dmFyIGk9KG4ueC1lLngpKihuLngtZS54KSsobi55LWUueSkqKG4ueS1lLnkpLGU9KChlLnktdC55KSoobi54LWUueCktKGUueC10LngpKihuLnktZS55KSkvaTtyZXR1cm4gTWF0aC5hYnMoZSkqTWF0aC5zcXJ0KGkpfSxadC5jb21wdXRlT3JpZW50YXRpb249ZnVuY3Rpb24odCxlLG4pe3JldHVybiBadC5vcmllbnRhdGlvbkluZGV4KHQsZSxuKX0sWnQuZGlzdGFuY2VQb2ludExpbmU9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBuZXcgYztmb3IodmFyIG49dC5kaXN0YW5jZShlWzBdKSxpPTA7aTxlLmxlbmd0aC0xO2krKyl7dmFyIHI9WnQuZGlzdGFuY2VQb2ludExpbmUodCxlW2ldLGVbaSsxXSk7cjxuJiYobj1yKX1yZXR1cm4gbn1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHM9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO2lmKG8ueD09PWEueCYmby55PT09YS55KXJldHVybiBzLmRpc3RhbmNlKG8pO3ZhciB1PShhLngtby54KSooYS54LW8ueCkrKGEueS1vLnkpKihhLnktby55KSxsPSgocy54LW8ueCkqKGEueC1vLngpKyhzLnktby55KSooYS55LW8ueSkpL3U7aWYobDw9MClyZXR1cm4gcy5kaXN0YW5jZShvKTtpZigxPD1sKXJldHVybiBzLmRpc3RhbmNlKGEpO289KChvLnktcy55KSooYS54LW8ueCktKG8ueC1zLngpKihhLnktby55KSkvdTtyZXR1cm4gTWF0aC5hYnMobykqTWF0aC5zcXJ0KHUpfX0sWnQuaXNPbkxpbmU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IFd0LGk9MTtpPGUubGVuZ3RoO2krKyl7dmFyIHI9ZVtpLTFdLHM9ZVtpXTtpZihuLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxyLHMpLG4uaGFzSW50ZXJzZWN0aW9uKCkpcmV0dXJuITB9cmV0dXJuITF9LFp0LlJJR0hUPVp0LkNMT0NLV0lTRT0tMSxadC5MRUZUPVp0LkNPVU5URVJDTE9DS1dJU0U9MSxadC5TVFJBSUdIVD1adC5DT0xMSU5FQVI9MCxlKEp0LnByb3RvdHlwZSx7bWluWDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbih0aGlzLnAwLngsdGhpcy5wMS54KX0sb3JpZW50YXRpb25JbmRleDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgSnQpe3ZhciB0PWFyZ3VtZW50c1swXSxlPVp0Lm9yaWVudGF0aW9uSW5kZXgodGhpcy5wMCx0aGlzLnAxLHQucDApLHQ9WnQub3JpZW50YXRpb25JbmRleCh0aGlzLnAwLHRoaXMucDEsdC5wMSk7cmV0dXJuIDA8PWUmJjA8PXR8fGU8PTAmJnQ8PTA/TWF0aC5tYXgoZSx0KTowfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCl7dD1hcmd1bWVudHNbMF07cmV0dXJuIFp0Lm9yaWVudGF0aW9uSW5kZXgodGhpcy5wMCx0aGlzLnAxLHQpfX0sdG9HZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVMaW5lU3RyaW5nKFt0aGlzLnAwLHRoaXMucDFdKX0saXNWZXJ0aWNhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnAwLng9PT10aGlzLnAxLnh9LGVxdWFsczpmdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBKdCkpcmV0dXJuITE7cmV0dXJuIHRoaXMucDAuZXF1YWxzKHQucDApJiZ0aGlzLnAxLmVxdWFscyh0LnAxKX0saW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBXdDtyZXR1cm4gZS5jb21wdXRlSW50ZXJzZWN0aW9uKHRoaXMucDAsdGhpcy5wMSx0LnAwLHQucDEpLGUuaGFzSW50ZXJzZWN0aW9uKCk/ZS5nZXRJbnRlcnNlY3Rpb24oMCk6bnVsbH0scHJvamVjdDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHQuZXF1YWxzKHRoaXMucDApfHx0LmVxdWFscyh0aGlzLnAxKSlyZXR1cm4gbmV3IGQodCk7dmFyIGU9dGhpcy5wcm9qZWN0aW9uRmFjdG9yKHQpLG49bmV3IGQ7cmV0dXJuIG4ueD10aGlzLnAwLngrZSoodGhpcy5wMS54LXRoaXMucDAueCksbi55PXRoaXMucDAueStlKih0aGlzLnAxLnktdGhpcy5wMC55KSxufWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgSnQpe3ZhciBpPWFyZ3VtZW50c1swXSx0PXRoaXMucHJvamVjdGlvbkZhY3RvcihpLnAwKSxlPXRoaXMucHJvamVjdGlvbkZhY3RvcihpLnAxKTtpZigxPD10JiYxPD1lKXJldHVybiBudWxsO2lmKHQ8PTAmJmU8PTApcmV0dXJuIG51bGw7bj10aGlzLnByb2plY3QoaS5wMCk7dDwwJiYobj10aGlzLnAwKSwxPHQmJihuPXRoaXMucDEpO2k9dGhpcy5wcm9qZWN0KGkucDEpO3JldHVybiBlPDAmJihpPXRoaXMucDApLDE8ZSYmKGk9dGhpcy5wMSksbmV3IEp0KG4saSl9fSxub3JtYWxpemU6ZnVuY3Rpb24oKXt0aGlzLnAxLmNvbXBhcmVUbyh0aGlzLnAwKTwwJiZ0aGlzLnJldmVyc2UoKX0sYW5nbGU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hdGFuMih0aGlzLnAxLnktdGhpcy5wMC55LHRoaXMucDEueC10aGlzLnAwLngpfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD90aGlzLnAwOnRoaXMucDF9LGRpc3RhbmNlUGVycGVuZGljdWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gWnQuZGlzdGFuY2VQb2ludExpbmVQZXJwZW5kaWN1bGFyKHQsdGhpcy5wMCx0aGlzLnAxKX0sbWluWTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbih0aGlzLnAwLnksdGhpcy5wMS55KX0sbWlkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gSnQubWlkUG9pbnQodGhpcy5wMCx0aGlzLnAxKX0scHJvamVjdGlvbkZhY3RvcjpmdW5jdGlvbih0KXtpZih0LmVxdWFscyh0aGlzLnAwKSlyZXR1cm4gMDtpZih0LmVxdWFscyh0aGlzLnAxKSlyZXR1cm4gMTt2YXIgZT10aGlzLnAxLngtdGhpcy5wMC54LG49dGhpcy5wMS55LXRoaXMucDAueSxpPWUqZStuKm47cmV0dXJuIGk8PTA/Zy5OYU46KCh0LngtdGhpcy5wMC54KSplKyh0LnktdGhpcy5wMC55KSpuKS9pfSxjbG9zZXN0UG9pbnRzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW50ZXJzZWN0aW9uKHQpO2lmKG51bGwhPT1lKXJldHVybltlLGVdO3ZhciBuPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLGk9Zy5NQVhfVkFMVUUscj1udWxsLGU9dGhpcy5jbG9zZXN0UG9pbnQodC5wMCksaT1lLmRpc3RhbmNlKHQucDApO25bMF09ZSxuWzFdPXQucDA7ZT10aGlzLmNsb3Nlc3RQb2ludCh0LnAxKTsocj1lLmRpc3RhbmNlKHQucDEpKTxpJiYoaT1yLG5bMF09ZSxuWzFdPXQucDEpO2U9dC5jbG9zZXN0UG9pbnQodGhpcy5wMCk7KHI9ZS5kaXN0YW5jZSh0aGlzLnAwKSk8aSYmKGk9cixuWzBdPXRoaXMucDAsblsxXT1lKTt0PXQuY2xvc2VzdFBvaW50KHRoaXMucDEpO3JldHVybihyPXQuZGlzdGFuY2UodGhpcy5wMSkpPGkmJihpPXIsblswXT10aGlzLnAxLG5bMV09dCksbn0sY2xvc2VzdFBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHJvamVjdGlvbkZhY3Rvcih0KTtyZXR1cm4gMDxlJiZlPDE/dGhpcy5wcm9qZWN0KHQpOnRoaXMucDAuZGlzdGFuY2UodCk8dGhpcy5wMS5kaXN0YW5jZSh0KT90aGlzLnAwOnRoaXMucDF9LG1heFg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgodGhpcy5wMC54LHRoaXMucDEueCl9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnAwLmRpc3RhbmNlKHRoaXMucDEpfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7dmFyIGU9dCx0PXRoaXMucDAuY29tcGFyZVRvKGUucDApO3JldHVybiAwIT09dD90OnRoaXMucDEuY29tcGFyZVRvKGUucDEpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wMDt0aGlzLnAwPXRoaXMucDEsdGhpcy5wMT10fSxlcXVhbHNUb3BvOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnAwLmVxdWFscyh0LnAwKSYmdGhpcy5wMS5lcXVhbHModC5wMSl8fHRoaXMucDAuZXF1YWxzKHQucDEpJiZ0aGlzLnAxLmVxdWFscyh0LnAwKX0sbGluZUludGVyc2VjdGlvbjpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIEYuaW50ZXJzZWN0aW9uKHRoaXMucDAsdGhpcy5wMSx0LnAwLHQucDEpfWNhdGNoKHQpe2lmKCEodCBpbnN0YW5jZW9mIHcpKXRocm93IHR9cmV0dXJuIG51bGx9LG1heFk6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgodGhpcy5wMC55LHRoaXMucDEueSl9LHBvaW50QWxvbmdPZmZzZXQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnAwLngrdCoodGhpcy5wMS54LXRoaXMucDAueCksaT10aGlzLnAwLnkrdCoodGhpcy5wMS55LXRoaXMucDAueSkscj10aGlzLnAxLngtdGhpcy5wMC54LHM9dGhpcy5wMS55LXRoaXMucDAueSxvPU1hdGguc3FydChyKnIrcypzKSxhPTAsdD0wO2lmKDAhPT1lKXtpZihvPD0wKXRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJDYW5ub3QgY29tcHV0ZSBvZmZzZXQgZnJvbSB6ZXJvLWxlbmd0aCBsaW5lIHNlZ21lbnRcIik7YT1lKnIvbyx0PWUqcy9vfXJldHVybiBuZXcgZChuLXQsaSthKX0sc2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgdCxlOzE9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSx0aGlzLnNldENvb3JkaW5hdGVzKGUucDAsZS5wMSkpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5wMC54PXQueCx0aGlzLnAwLnk9dC55LHRoaXMucDEueD1lLngsdGhpcy5wMS55PWUueSl9LHNlZ21lbnRGcmFjdGlvbjpmdW5jdGlvbih0KXt0PXRoaXMucHJvamVjdGlvbkZhY3Rvcih0KTtyZXR1cm4gdDwwP3Q9MDooMTx0fHxnLmlzTmFOKHQpKSYmKHQ9MSksdH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIkxJTkVTVFJJTkcoIFwiK3RoaXMucDAueCtcIiBcIit0aGlzLnAwLnkrXCIsIFwiK3RoaXMucDEueCtcIiBcIit0aGlzLnAxLnkrXCIpXCJ9LGlzSG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnAwLnk9PT10aGlzLnAxLnl9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBKdCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBadC5kaXN0YW5jZUxpbmVMaW5lKHRoaXMucDAsdGhpcy5wMSx0LnAwLHQucDEpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZClyZXR1cm4gWnQuZGlzdGFuY2VQb2ludExpbmUoYXJndW1lbnRzWzBdLHRoaXMucDAsdGhpcy5wMSl9LHBvaW50QWxvbmc6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGQ7cmV0dXJuIGUueD10aGlzLnAwLngrdCoodGhpcy5wMS54LXRoaXMucDAueCksZS55PXRoaXMucDAueSt0Kih0aGlzLnAxLnktdGhpcy5wMC55KSxlfSxoYXNoQ29kZTpmdW5jdGlvbigpe3ZhciB0PWphdmEubGFuZy5Eb3VibGUuZG91YmxlVG9Mb25nQml0cyh0aGlzLnAwLngpO3RePTMxKmphdmEubGFuZy5Eb3VibGUuZG91YmxlVG9Mb25nQml0cyh0aGlzLnAwLnkpO3ZhciBlPU1hdGgudHJ1bmModCleTWF0aC50cnVuYyh0Pj4zMiksdD1qYXZhLmxhbmcuRG91YmxlLmRvdWJsZVRvTG9uZ0JpdHModGhpcy5wMS54KTtyZXR1cm4gdF49MzEqamF2YS5sYW5nLkRvdWJsZS5kb3VibGVUb0xvbmdCaXRzKHRoaXMucDEueSksZV4oTWF0aC50cnVuYyh0KV5NYXRoLnRydW5jKHQ+PjMyKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ksb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEp0fX0pLEp0Lm1pZFBvaW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBkKCh0LngrZS54KS8yLCh0LnkrZS55KS8yKX0sSnQuc2VyaWFsVmVyc2lvblVJRD0weDJkMjE3MjEzNWY0MTFjMDAsZShRdC5wcm90b3R5cGUse2lzSW50ZXJzZWN0czpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRGlzam9pbnQoKX0saXNDb3ZlcnM6ZnVuY3Rpb24oKXtyZXR1cm4oUXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdKXx8UXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuQk9VTkRBUlldKXx8UXQuaXNUcnVlKHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuSU5URVJJT1JdKXx8UXQuaXNUcnVlKHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuQk9VTkRBUlldKSkmJnRoaXMubWF0cml4W0wuRVhURVJJT1JdW0wuSU5URVJJT1JdPT09bHQuRkFMU0UmJnRoaXMubWF0cml4W0wuRVhURVJJT1JdW0wuQk9VTkRBUlldPT09bHQuRkFMU0V9LGlzQ292ZXJlZEJ5OmZ1bmN0aW9uKCl7cmV0dXJuKFF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLklOVEVSSU9SXSl8fFF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLkJPVU5EQVJZXSl8fFF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLkJPVU5EQVJZXVtMLklOVEVSSU9SXSl8fFF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLkJPVU5EQVJZXVtMLkJPVU5EQVJZXSkpJiZ0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLkVYVEVSSU9SXT09PWx0LkZBTFNFJiZ0aGlzLm1hdHJpeFtMLkJPVU5EQVJZXVtMLkVYVEVSSU9SXT09PWx0LkZBTFNFfSxzZXQ6ZnVuY3Rpb24oKXt2YXIgdCxlLG47aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpPWFyZ3VtZW50c1swXSxyPTA7cjxpLmxlbmd0aDtyKyspe3ZhciBzPU1hdGgudHJ1bmMoci8zKSxvPXIlMzt0aGlzLm1hdHJpeFtzXVtvXT1sdC50b0RpbWVuc2lvblZhbHVlKGkuY2hhckF0KHIpKX1lbHNlIDM9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sdGhpcy5tYXRyaXhbdF1bZV09bil9LGlzQ29udGFpbnM6ZnVuY3Rpb24oKXtyZXR1cm4gUXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdKSYmdGhpcy5tYXRyaXhbTC5FWFRFUklPUl1bTC5JTlRFUklPUl09PT1sdC5GQUxTRSYmdGhpcy5tYXRyaXhbTC5FWFRFUklPUl1bTC5CT1VOREFSWV09PT1sdC5GQUxTRX0sc2V0QXRMZWFzdDpmdW5jdGlvbigpe3ZhciB0LGUsbjtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGk9YXJndW1lbnRzWzBdLHI9MDtyPGkubGVuZ3RoO3IrKyl7dmFyIHM9TWF0aC50cnVuYyhyLzMpLG89ciUzO3RoaXMuc2V0QXRMZWFzdChzLG8sbHQudG9EaW1lbnNpb25WYWx1ZShpLmNoYXJBdChyKSkpfWVsc2UgMz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSx0aGlzLm1hdHJpeFt0XVtlXTxuJiYodGhpcy5tYXRyaXhbdF1bZV09bikpfSxzZXRBdExlYXN0SWZWYWxpZDpmdW5jdGlvbih0LGUsbil7MDw9dCYmMDw9ZSYmdGhpcy5zZXRBdExlYXN0KHQsZSxuKX0saXNXaXRoaW46ZnVuY3Rpb24oKXtyZXR1cm4gUXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdKSYmdGhpcy5tYXRyaXhbTC5JTlRFUklPUl1bTC5FWFRFUklPUl09PT1sdC5GQUxTRSYmdGhpcy5tYXRyaXhbTC5CT1VOREFSWV1bTC5FWFRFUklPUl09PT1sdC5GQUxTRX0saXNUb3VjaGVzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU8dD90aGlzLmlzVG91Y2hlcyhlLHQpOih0PT09bHQuQSYmZT09PWx0LkF8fHQ9PT1sdC5MJiZlPT09bHQuTHx8dD09PWx0LkwmJmU9PT1sdC5BfHx0PT09bHQuUCYmZT09PWx0LkF8fHQ9PT1sdC5QJiZlPT09bHQuTCkmJih0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLklOVEVSSU9SXT09PWx0LkZBTFNFJiYoUXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuQk9VTkRBUlldKXx8UXQuaXNUcnVlKHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuSU5URVJJT1JdKXx8UXQuaXNUcnVlKHRoaXMubWF0cml4W0wuQk9VTkRBUlldW0wuQk9VTkRBUlldKSkpfSxpc092ZXJsYXBzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1sdC5QJiZlPT09bHQuUHx8dD09PWx0LkEmJmU9PT1sdC5BP1F0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLklOVEVSSU9SXSkmJlF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLkVYVEVSSU9SXSkmJlF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLkVYVEVSSU9SXVtMLklOVEVSSU9SXSk6dD09PWx0LkwmJmU9PT1sdC5MJiYoMT09PXRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdJiZRdC5pc1RydWUodGhpcy5tYXRyaXhbTC5JTlRFUklPUl1bTC5FWFRFUklPUl0pJiZRdC5pc1RydWUodGhpcy5tYXRyaXhbTC5FWFRFUklPUl1bTC5JTlRFUklPUl0pKX0saXNFcXVhbHM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWUmJihRdC5pc1RydWUodGhpcy5tYXRyaXhbTC5JTlRFUklPUl1bTC5JTlRFUklPUl0pJiZ0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLkVYVEVSSU9SXT09PWx0LkZBTFNFJiZ0aGlzLm1hdHJpeFtMLkJPVU5EQVJZXVtMLkVYVEVSSU9SXT09PWx0LkZBTFNFJiZ0aGlzLm1hdHJpeFtMLkVYVEVSSU9SXVtMLklOVEVSSU9SXT09PWx0LkZBTFNFJiZ0aGlzLm1hdHJpeFtMLkVYVEVSSU9SXVtMLkJPVU5EQVJZXT09PWx0LkZBTFNFKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IFAoXCIxMjM0NTY3ODlcIiksZT0wO2U8MztlKyspZm9yKHZhciBuPTA7bjwzO24rKyl0LnNldENoYXJBdCgzKmUrbixsdC50b0RpbWVuc2lvblN5bWJvbCh0aGlzLm1hdHJpeFtlXVtuXSkpO3JldHVybiB0LnRvU3RyaW5nKCl9LHNldEFsbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPDM7ZSsrKWZvcih2YXIgbj0wO248MztuKyspdGhpcy5tYXRyaXhbZV1bbl09dH0sZ2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWF0cml4W3RdW2VdfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1hdHJpeFsxXVswXTtyZXR1cm4gdGhpcy5tYXRyaXhbMV1bMF09dGhpcy5tYXRyaXhbMF1bMV0sdGhpcy5tYXRyaXhbMF1bMV09dCx0PXRoaXMubWF0cml4WzJdWzBdLHRoaXMubWF0cml4WzJdWzBdPXRoaXMubWF0cml4WzBdWzJdLHRoaXMubWF0cml4WzBdWzJdPXQsdD10aGlzLm1hdHJpeFsyXVsxXSx0aGlzLm1hdHJpeFsyXVsxXT10aGlzLm1hdHJpeFsxXVsyXSx0aGlzLm1hdHJpeFsxXVsyXT10LHRoaXN9LG1hdGNoZXM6ZnVuY3Rpb24odCl7aWYoOSE9PXQubGVuZ3RoKXRocm93IG5ldyBjO2Zvcih2YXIgZT0wO2U8MztlKyspZm9yKHZhciBuPTA7bjwzO24rKylpZighUXQubWF0Y2hlcyh0aGlzLm1hdHJpeFtlXVtuXSx0LmNoYXJBdCgzKmUrbikpKXJldHVybiExO3JldHVybiEwfSxhZGQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTwzO2UrKylmb3IodmFyIG49MDtuPDM7bisrKXRoaXMuc2V0QXRMZWFzdChlLG4sdC5nZXQoZSxuKSl9LGlzRGlzam9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXRyaXhbTC5JTlRFUklPUl1bTC5JTlRFUklPUl09PT1sdC5GQUxTRSYmdGhpcy5tYXRyaXhbTC5JTlRFUklPUl1bTC5CT1VOREFSWV09PT1sdC5GQUxTRSYmdGhpcy5tYXRyaXhbTC5CT1VOREFSWV1bTC5JTlRFUklPUl09PT1sdC5GQUxTRSYmdGhpcy5tYXRyaXhbTC5CT1VOREFSWV1bTC5CT1VOREFSWV09PT1sdC5GQUxTRX0saXNDcm9zc2VzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1sdC5QJiZlPT09bHQuTHx8dD09PWx0LlAmJmU9PT1sdC5BfHx0PT09bHQuTCYmZT09PWx0LkE/UXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuSU5URVJJT1JdKSYmUXQuaXNUcnVlKHRoaXMubWF0cml4W0wuSU5URVJJT1JdW0wuRVhURVJJT1JdKTp0PT09bHQuTCYmZT09PWx0LlB8fHQ9PT1sdC5BJiZlPT09bHQuUHx8dD09PWx0LkEmJmU9PT1sdC5MP1F0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLklOVEVSSU9SXVtMLklOVEVSSU9SXSkmJlF0LmlzVHJ1ZSh0aGlzLm1hdHJpeFtMLkVYVEVSSU9SXVtMLklOVEVSSU9SXSk6dD09PWx0LkwmJmU9PT1sdC5MJiYwPT09dGhpcy5tYXRyaXhbTC5JTlRFUklPUl1bTC5JTlRFUklPUl19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3JdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBRdH19KSxRdC5tYXRjaGVzPWZ1bmN0aW9uKCl7aWYoTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMF0pJiZcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIGU9PT1sdC5TWU1fRE9OVENBUkV8fChlPT09bHQuU1lNX1RSVUUmJigwPD10fHx0PT09bHQuVFJVRSl8fChlPT09bHQuU1lNX0ZBTFNFJiZ0PT09bHQuRkFMU0V8fChlPT09bHQuU1lNX1AmJnQ9PT1sdC5QfHwoZT09PWx0LlNZTV9MJiZ0PT09bHQuTHx8ZT09PWx0LlNZTV9BJiZ0PT09bHQuQSkpKSl9aWYoXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dD1hcmd1bWVudHNbMV07cmV0dXJuIG5ldyBRdChhcmd1bWVudHNbMF0pLm1hdGNoZXModCl9fSxRdC5pc1RydWU9ZnVuY3Rpb24odCl7cmV0dXJuIDA8PXR8fHQ9PT1sdC5UUlVFfTt2YXIgS3M9T2JqZWN0LmZyZWV6ZSh7Q29vcmRpbmF0ZTpkLENvb3JkaW5hdGVMaXN0Ok4sRW52ZWxvcGU6QyxMaW5lU2VnbWVudDpKdCxHZW9tZXRyeUZhY3Rvcnk6WXQsR2VvbWV0cnk6QixQb2ludDp3dCxMaW5lU3RyaW5nOkN0LExpbmVhclJpbmc6UHQsUG9seWdvbjpSdCxHZW9tZXRyeUNvbGxlY3Rpb246ZnQsTXVsdGlQb2ludDpUdCxNdWx0aUxpbmVTdHJpbmc6Z3QsTXVsdGlQb2x5Z29uOmJ0LERpbWVuc2lvbjpsdCxJbnRlcnNlY3Rpb25NYXRyaXg6UXR9KTtlKCR0LnByb3RvdHlwZSx7YWRkUG9pbnQ6ZnVuY3Rpb24odCl7dGhpcy5wdENvdW50Kz0xLHRoaXMucHRDZW50U3VtLngrPXQueCx0aGlzLnB0Q2VudFN1bS55Kz10Lnl9LHNldEJhc2VQb2ludDpmdW5jdGlvbih0KXtudWxsPT09dGhpcy5hcmVhQmFzZVB0JiYodGhpcy5hcmVhQmFzZVB0PXQpfSxhZGRMaW5lU2VnbWVudHM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO248dC5sZW5ndGgtMTtuKyspe3ZhciBpLHI9dFtuXS5kaXN0YW5jZSh0W24rMV0pOzAhPT1yJiYoZSs9cixpPSh0W25dLngrdFtuKzFdLngpLzIsdGhpcy5saW5lQ2VudFN1bS54Kz1yKmksaT0odFtuXS55K3RbbisxXS55KS8yLHRoaXMubGluZUNlbnRTdW0ueSs9cippKX10aGlzLnRvdGFsTGVuZ3RoKz1lLDA9PT1lJiYwPHQubGVuZ3RoJiZ0aGlzLmFkZFBvaW50KHRbMF0pfSxhZGRIb2xlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1adC5pc0NDVyh0KSxuPTA7bjx0Lmxlbmd0aC0xO24rKyl0aGlzLmFkZFRyaWFuZ2xlKHRoaXMuYXJlYUJhc2VQdCx0W25dLHRbbisxXSxlKTt0aGlzLmFkZExpbmVTZWdtZW50cyh0KX0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZDtpZigwPE1hdGguYWJzKHRoaXMuYXJlYXN1bTIpKXQueD10aGlzLmNnMy54LzMvdGhpcy5hcmVhc3VtMix0Lnk9dGhpcy5jZzMueS8zL3RoaXMuYXJlYXN1bTI7ZWxzZSBpZigwPHRoaXMudG90YWxMZW5ndGgpdC54PXRoaXMubGluZUNlbnRTdW0ueC90aGlzLnRvdGFsTGVuZ3RoLHQueT10aGlzLmxpbmVDZW50U3VtLnkvdGhpcy50b3RhbExlbmd0aDtlbHNle2lmKCEoMDx0aGlzLnB0Q291bnQpKXJldHVybiBudWxsO3QueD10aGlzLnB0Q2VudFN1bS54L3RoaXMucHRDb3VudCx0Lnk9dGhpcy5wdENlbnRTdW0ueS90aGlzLnB0Q291bnR9cmV0dXJuIHR9LGFkZFNoZWxsOmZ1bmN0aW9uKHQpezA8dC5sZW5ndGgmJnRoaXMuc2V0QmFzZVBvaW50KHRbMF0pO2Zvcih2YXIgZT0hWnQuaXNDQ1codCksbj0wO248dC5sZW5ndGgtMTtuKyspdGhpcy5hZGRUcmlhbmdsZSh0aGlzLmFyZWFCYXNlUHQsdFtuXSx0W24rMV0sZSk7dGhpcy5hZGRMaW5lU2VnbWVudHModCl9LGFkZFRyaWFuZ2xlOmZ1bmN0aW9uKHQsZSxuLGkpe2k9aT8xOi0xOyR0LmNlbnRyb2lkMyh0LGUsbix0aGlzLnRyaWFuZ2xlQ2VudDMpO249JHQuYXJlYTIodCxlLG4pO3RoaXMuY2czLngrPWkqbip0aGlzLnRyaWFuZ2xlQ2VudDMueCx0aGlzLmNnMy55Kz1pKm4qdGhpcy50cmlhbmdsZUNlbnQzLnksdGhpcy5hcmVhc3VtMis9aSpufSxhZGQ6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFJ0KXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5hZGRTaGVsbCh0LmdldEV4dGVyaW9yUmluZygpLmdldENvb3JkaW5hdGVzKCkpO2Zvcih2YXIgZT0wO2U8dC5nZXROdW1JbnRlcmlvclJpbmcoKTtlKyspdGhpcy5hZGRIb2xlKHQuZ2V0SW50ZXJpb3JSaW5nTihlKS5nZXRDb29yZGluYXRlcygpKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQil7dmFyIG49YXJndW1lbnRzWzBdO2lmKG4uaXNFbXB0eSgpKXJldHVybiBudWxsO2lmKG4gaW5zdGFuY2VvZiB3dCl0aGlzLmFkZFBvaW50KG4uZ2V0Q29vcmRpbmF0ZSgpKTtlbHNlIGlmKG4gaW5zdGFuY2VvZiBDdCl0aGlzLmFkZExpbmVTZWdtZW50cyhuLmdldENvb3JkaW5hdGVzKCkpO2Vsc2UgaWYobiBpbnN0YW5jZW9mIFJ0KXt0aGlzLmFkZChuKX1lbHNlIGlmKG4gaW5zdGFuY2VvZiBmdClmb3IodmFyIGk9bixlPTA7ZTxpLmdldE51bUdlb21ldHJpZXMoKTtlKyspdGhpcy5hZGQoaS5nZXRHZW9tZXRyeU4oZSkpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJHR9fSksJHQuYXJlYTI9ZnVuY3Rpb24odCxlLG4pe3JldHVybihlLngtdC54KSoobi55LXQueSktKG4ueC10LngpKihlLnktdC55KX0sJHQuY2VudHJvaWQzPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiBpLng9dC54K2UueCtuLngsaS55PXQueStlLnkrbi55LG51bGx9LCR0LmdldENlbnRyb2lkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgJHQodCkuZ2V0Q2VudHJvaWQoKX0sKHRlLnByb3RvdHlwZT1uZXcgRXJyb3IpLm5hbWU9XCJFbXB0eVN0YWNrRXhjZXB0aW9uXCIsKGVlLnByb3RvdHlwZT1uZXcgdikuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5Xy5wdXNoKHQpLCEwfSxlZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5zaXplKCkpdGhyb3cgbmV3IEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247cmV0dXJuIHRoaXMuYXJyYXlfW3RdfSxlZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheV8ucHVzaCh0KSx0fSxlZS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKHQpe2lmKDA9PT10aGlzLmFycmF5Xy5sZW5ndGgpdGhyb3cgbmV3IHRlO3JldHVybiB0aGlzLmFycmF5Xy5wb3AoKX0sZWUucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hcnJheV8ubGVuZ3RoKXRocm93IG5ldyB0ZTtyZXR1cm4gdGhpcy5hcnJheV9bdGhpcy5hcnJheV8ubGVuZ3RoLTFdfSxlZS5wcm90b3R5cGUuZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sZWUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbXB0eSgpfSxlZS5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5Xy5pbmRleE9mKHQpfSxlZS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Xy5sZW5ndGh9LGVlLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXQucHVzaCh0aGlzLmFycmF5X1tlXSk7cmV0dXJuIHR9LGUobmUucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7dGhpcy50cmVlU2V0LmNvbnRhaW5zKHQpfHwodGhpcy5saXN0LmFkZCh0KSx0aGlzLnRyZWVTZXQuYWRkKHQpKX0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQXJyYXkodGhpcy5saXN0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdGhpcy5saXN0LnRvQXJyYXkodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3pdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBuZX19KSxuZS5maWx0ZXJDb29yZGluYXRlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IG5lLG49MDtuPHQubGVuZ3RoO24rKyllLmZpbHRlcih0W25dKTtyZXR1cm4gZS5nZXRDb29yZGluYXRlcygpfSxlKGllLnByb3RvdHlwZSx7cHJlU29ydDpmdW5jdGlvbih0KXtmb3IodmFyIGUsbj0xO248dC5sZW5ndGg7bisrKSh0W25dLnk8dFswXS55fHx0W25dLnk9PT10WzBdLnkmJnRbbl0ueDx0WzBdLngpJiYoZT10WzBdLHRbMF09dFtuXSx0W25dPWUpO3JldHVybiB1dC5zb3J0KHQsMSx0Lmxlbmd0aCxuZXcgcmUodFswXSkpLHR9LGNvbXB1dGVPY3RSaW5nOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29tcHV0ZU9jdFB0cyh0KSx0PW5ldyBOO3JldHVybiB0LmFkZChlLCExKSx0LnNpemUoKTwzP251bGw6KHQuY2xvc2VSaW5nKCksdC50b0Nvb3JkaW5hdGVBcnJheSgpKX0sbGluZU9yUG9seWdvbjpmdW5jdGlvbih0KXtpZigzPT09KHQ9dGhpcy5jbGVhblJpbmcodCkpLmxlbmd0aClyZXR1cm4gdGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKFt0WzBdLHRbMV1dKTt0PXRoaXMuZ2VvbUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyh0KTtyZXR1cm4gdGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVQb2x5Z29uKHQsbnVsbCl9LGNsZWFuUmluZzpmdW5jdGlvbih0KXtsLmVxdWFscyh0WzBdLHRbdC5sZW5ndGgtMV0pO2Zvcih2YXIgZT1uZXcgSSxuPW51bGwsaT0wO2k8PXQubGVuZ3RoLTI7aSsrKXt2YXIgcj10W2ldLHM9dFtpKzFdO3IuZXF1YWxzKHMpfHxudWxsIT09biYmdGhpcy5pc0JldHdlZW4obixyLHMpfHwoZS5hZGQociksbj1yKX1lLmFkZCh0W3QubGVuZ3RoLTFdKTt2YXIgbz1uZXcgQXJyYXkoZS5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIGUudG9BcnJheShvKX0saXNCZXR3ZWVuOmZ1bmN0aW9uKHQsZSxuKXtpZigwIT09WnQuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKSlyZXR1cm4hMTtpZih0LnghPT1uLngpe2lmKHQueDw9ZS54JiZlLng8PW4ueClyZXR1cm4hMDtpZihuLng8PWUueCYmZS54PD10LngpcmV0dXJuITB9aWYodC55IT09bi55KXtpZih0Lnk8PWUueSYmZS55PD1uLnkpcmV0dXJuITA7aWYobi55PD1lLnkmJmUueTw9dC55KXJldHVybiEwfXJldHVybiExfSxyZWR1Y2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb21wdXRlT2N0UmluZyh0KTtpZihudWxsPT09ZSlyZXR1cm4gdDtmb3IodmFyIG49bmV3IGF0LGk9MDtpPGUubGVuZ3RoO2krKyluLmFkZChlW2ldKTtmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKVp0LmlzUG9pbnRJblJpbmcodFtpXSxlKXx8bi5hZGQodFtpXSk7dmFyIHI9SC50b0Nvb3JkaW5hdGVBcnJheShuKTtyZXR1cm4gci5sZW5ndGg8Mz90aGlzLnBhZEFycmF5MyhyKTpyfSxnZXRDb252ZXhIdWxsOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuaW5wdXRQdHMubGVuZ3RoKXJldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKTtpZigxPT09dGhpcy5pbnB1dFB0cy5sZW5ndGgpcmV0dXJuIHRoaXMuZ2VvbUZhY3RvcnkuY3JlYXRlUG9pbnQodGhpcy5pbnB1dFB0c1swXSk7aWYoMj09PXRoaXMuaW5wdXRQdHMubGVuZ3RoKXJldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodGhpcy5pbnB1dFB0cyk7dmFyIHQ9dGhpcy5pbnB1dFB0czs1MDx0aGlzLmlucHV0UHRzLmxlbmd0aCYmKHQ9dGhpcy5yZWR1Y2UodGhpcy5pbnB1dFB0cykpO3Q9dGhpcy5wcmVTb3J0KHQpLHQ9dGhpcy5ncmFoYW1TY2FuKHQpLHQ9dGhpcy50b0Nvb3JkaW5hdGVBcnJheSh0KTtyZXR1cm4gdGhpcy5saW5lT3JQb2x5Z29uKHQpfSxwYWRBcnJheTM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSgzKS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyluPHQubGVuZ3RoP2Vbbl09dFtuXTplW25dPXRbMF07cmV0dXJuIGV9LGNvbXB1dGVPY3RQdHM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSg4KS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyllW25dPXRbMF07Zm9yKHZhciBpPTE7aTx0Lmxlbmd0aDtpKyspdFtpXS54PGVbMF0ueCYmKGVbMF09dFtpXSksdFtpXS54LXRbaV0ueTxlWzFdLngtZVsxXS55JiYoZVsxXT10W2ldKSx0W2ldLnk+ZVsyXS55JiYoZVsyXT10W2ldKSx0W2ldLngrdFtpXS55PmVbM10ueCtlWzNdLnkmJihlWzNdPXRbaV0pLHRbaV0ueD5lWzRdLngmJihlWzRdPXRbaV0pLHRbaV0ueC10W2ldLnk+ZVs1XS54LWVbNV0ueSYmKGVbNV09dFtpXSksdFtpXS55PGVbNl0ueSYmKGVbNl09dFtpXSksdFtpXS54K3RbaV0ueTxlWzddLngrZVs3XS55JiYoZVs3XT10W2ldKTtyZXR1cm4gZX0sdG9Db29yZGluYXRlQXJyYXk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKSxuPTA7bjx0LnNpemUoKTtuKyspe3ZhciBpPXQuZ2V0KG4pO2Vbbl09aX1yZXR1cm4gZX0sZ3JhaGFtU2NhbjpmdW5jdGlvbih0KXt2YXIgZT1udWxsLG49bmV3IGVlLGU9bi5wdXNoKHRbMF0pO2U9bi5wdXNoKHRbMV0pLGU9bi5wdXNoKHRbMl0pO2Zvcih2YXIgaT0zO2k8dC5sZW5ndGg7aSsrKXtmb3IoZT1uLnBvcCgpOyFuLmVtcHR5KCkmJjA8WnQuY29tcHV0ZU9yaWVudGF0aW9uKG4ucGVlaygpLGUsdFtpXSk7KWU9bi5wb3AoKTtlPW4ucHVzaChlKSxlPW4ucHVzaCh0W2ldKX1yZXR1cm4gZT1uLnB1c2godFswXSksbn0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gaWV9fSksaWUuZXh0cmFjdENvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBuZTtyZXR1cm4gdC5hcHBseShlKSxlLmdldENvb3JkaW5hdGVzKCl9LGUocmUucHJvdG90eXBlLHtjb21wYXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJlLnBvbGFyQ29tcGFyZSh0aGlzLm9yaWdpbix0LGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcmV9fSkscmUucG9sYXJDb21wYXJlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLngtdC54LHI9ZS55LXQueSxzPW4ueC10Lngsbz1uLnktdC55LG49WnQuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKTtpZihuPT09WnQuQ09VTlRFUkNMT0NLV0lTRSlyZXR1cm4gMTtpZihuPT09WnQuQ0xPQ0tXSVNFKXJldHVybi0xO3I9aSppK3IqcixvPXMqcytvKm87cmV0dXJuIHI8bz8tMTpvPHI/MTowfSxpZS5SYWRpYWxDb21wYXJhdG9yPXJlLGUoc2UucHJvdG90eXBlLHt0cmFuc2Zvcm1Qb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlUG9pbnQodGhpcy50cmFuc2Zvcm1Db29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpKX0sdHJhbnNmb3JtUG9seWdvbjpmdW5jdGlvbih0LGUpe3ZhciBuPSEwLGk9dGhpcy50cmFuc2Zvcm1MaW5lYXJSaW5nKHQuZ2V0RXh0ZXJpb3JSaW5nKCksdCk7bnVsbCE9PWkmJmkgaW5zdGFuY2VvZiBQdCYmIWkuaXNFbXB0eSgpfHwobj0hMSk7Zm9yKHZhciByPW5ldyBJLHM9MDtzPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7cysrKXt2YXIgbz10aGlzLnRyYW5zZm9ybUxpbmVhclJpbmcodC5nZXRJbnRlcmlvclJpbmdOKHMpLHQpO251bGw9PT1vfHxvLmlzRW1wdHkoKXx8KG8gaW5zdGFuY2VvZiBQdHx8KG49ITEpLHIuYWRkKG8pKX1pZihuKXJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlUG9seWdvbihpLHIudG9BcnJheShbXSkpO3ZhciBhPW5ldyBJO3JldHVybiBudWxsIT09aSYmYS5hZGQoaSksYS5hZGRBbGwociksdGhpcy5mYWN0b3J5LmJ1aWxkR2VvbWV0cnkoYSl9LGNyZWF0ZUNvb3JkaW5hdGVTZXF1ZW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5mYWN0b3J5LmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCl9LGdldElucHV0R2VvbWV0cnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dEdlb219LHRyYW5zZm9ybU11bHRpTGluZVN0cmluZzpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgSSxpPTA7aTx0LmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPXRoaXMudHJhbnNmb3JtTGluZVN0cmluZyh0LmdldEdlb21ldHJ5TihpKSx0KTtudWxsIT09ciYmKHIuaXNFbXB0eSgpfHxuLmFkZChyKSl9cmV0dXJuIHRoaXMuZmFjdG9yeS5idWlsZEdlb21ldHJ5KG4pfSx0cmFuc2Zvcm1Db29yZGluYXRlczpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvcHkodCl9LHRyYW5zZm9ybUxpbmVTdHJpbmc6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodGhpcy50cmFuc2Zvcm1Db29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpKX0sdHJhbnNmb3JtTXVsdGlQb2ludDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgSSxpPTA7aTx0LmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPXRoaXMudHJhbnNmb3JtUG9pbnQodC5nZXRHZW9tZXRyeU4oaSksdCk7bnVsbCE9PXImJihyLmlzRW1wdHkoKXx8bi5hZGQocikpfXJldHVybiB0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeShuKX0sdHJhbnNmb3JtTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBJLGk9MDtpPHQuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIHI9dGhpcy50cmFuc2Zvcm1Qb2x5Z29uKHQuZ2V0R2VvbWV0cnlOKGkpLHQpO251bGwhPT1yJiYoci5pc0VtcHR5KCl8fG4uYWRkKHIpKX1yZXR1cm4gdGhpcy5mYWN0b3J5LmJ1aWxkR2VvbWV0cnkobil9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29weSgpfSx0cmFuc2Zvcm1HZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IEksaT0wO2k8dC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj10aGlzLnRyYW5zZm9ybSh0LmdldEdlb21ldHJ5TihpKSk7bnVsbCE9PXImJih0aGlzLnBydW5lRW1wdHlHZW9tZXRyeSYmci5pc0VtcHR5KCl8fG4uYWRkKHIpKX1yZXR1cm4gdGhpcy5wcmVzZXJ2ZUdlb21ldHJ5Q29sbGVjdGlvblR5cGU/dGhpcy5mYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihZdC50b0dlb21ldHJ5QXJyYXkobikpOnRoaXMuZmFjdG9yeS5idWlsZEdlb21ldHJ5KG4pfSx0cmFuc2Zvcm06ZnVuY3Rpb24odCl7aWYodGhpcy5pbnB1dEdlb209dCx0aGlzLmZhY3Rvcnk9dC5nZXRGYWN0b3J5KCksdCBpbnN0YW5jZW9mIHd0KXJldHVybiB0aGlzLnRyYW5zZm9ybVBvaW50KHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIFR0KXJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpUG9pbnQodCxudWxsKTtpZih0IGluc3RhbmNlb2YgUHQpcmV0dXJuIHRoaXMudHJhbnNmb3JtTGluZWFyUmluZyh0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBDdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1MaW5lU3RyaW5nKHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIGd0KXJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpTGluZVN0cmluZyh0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBSdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1Qb2x5Z29uKHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIGJ0KXJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpUG9seWdvbih0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBmdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1HZW9tZXRyeUNvbGxlY3Rpb24odCxudWxsKTt0aHJvdyBuZXcgYyh0LmdldENsYXNzKCkuZ2V0TmFtZSgpKX0sdHJhbnNmb3JtTGluZWFyUmluZzpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMudHJhbnNmb3JtQ29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KTtpZihudWxsPT09bilyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcobnVsbCk7dD1uLnNpemUoKTtyZXR1cm4gMDx0JiZ0PDQmJiF0aGlzLnByZXNlcnZlVHlwZT90aGlzLmZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhuKTp0aGlzLmZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhuKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gc2V9fSksZShvZS5wcm90b3R5cGUse3NuYXBWZXJ0aWNlczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLl9pc0Nsb3NlZD90LnNpemUoKS0xOnQuc2l6ZSgpLGk9MDtpPG47aSsrKXt2YXIgcj10LmdldChpKSxyPXRoaXMuZmluZFNuYXBGb3JWZXJ0ZXgocixlKTtudWxsIT09ciYmKHQuc2V0KGksbmV3IGQocikpLDA9PT1pJiZ0aGlzLl9pc0Nsb3NlZCYmdC5zZXQodC5zaXplKCktMSxuZXcgZChyKSkpfX0sZmluZFNuYXBGb3JWZXJ0ZXg6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7aWYodC5lcXVhbHMyRChlW25dKSlyZXR1cm4gbnVsbDtpZih0LmRpc3RhbmNlKGVbbl0pPHRoaXMuc25hcFRvbGVyYW5jZSlyZXR1cm4gZVtuXX1yZXR1cm4gbnVsbH0sc25hcFRvOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBOKHRoaXMuc3JjUHRzKTtyZXR1cm4gdGhpcy5zbmFwVmVydGljZXMoZSx0KSx0aGlzLnNuYXBTZWdtZW50cyhlLHQpLGUudG9Db29yZGluYXRlQXJyYXkoKX0sc25hcFNlZ21lbnRzOmZ1bmN0aW9uKHQsZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiBudWxsO3ZhciBuPWUubGVuZ3RoO2VbMF0uZXF1YWxzMkQoZVtlLmxlbmd0aC0xXSkmJihuPWUubGVuZ3RoLTEpO2Zvcih2YXIgaT0wO2k8bjtpKyspe3ZhciByPWVbaV0scz10aGlzLmZpbmRTZWdtZW50SW5kZXhUb1NuYXAocix0KTswPD1zJiZ0LmFkZChzKzEsbmV3IGQociksITEpfX0sZmluZFNlZ21lbnRJbmRleFRvU25hcDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1nLk1BWF9WQUxVRSxpPS0xLHI9MDtyPGUuc2l6ZSgpLTE7cisrKXtpZih0aGlzLnNlZy5wMD1lLmdldChyKSx0aGlzLnNlZy5wMT1lLmdldChyKzEpLHRoaXMuc2VnLnAwLmVxdWFsczJEKHQpfHx0aGlzLnNlZy5wMS5lcXVhbHMyRCh0KSl7aWYodGhpcy5hbGxvd1NuYXBwaW5nVG9Tb3VyY2VWZXJ0aWNlcyljb250aW51ZTtyZXR1cm4tMX12YXIgcz10aGlzLnNlZy5kaXN0YW5jZSh0KTtzPHRoaXMuc25hcFRvbGVyYW5jZSYmczxuJiYobj1zLGk9cil9cmV0dXJuIGl9LHNldEFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzOmZ1bmN0aW9uKHQpe3RoaXMuYWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXM9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gb2V9fSksb2UuaXNDbG9zZWQ9ZnVuY3Rpb24odCl7cmV0dXJuISh0Lmxlbmd0aDw9MSkmJnRbMF0uZXF1YWxzMkQodFt0Lmxlbmd0aC0xXSl9LGUoYWUucHJvdG90eXBlLHtzbmFwVG86ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHVlKGUsdGhpcy5leHRyYWN0VGFyZ2V0Q29vcmRpbmF0ZXModCkpLnRyYW5zZm9ybSh0aGlzLnNyY0dlb20pfSxzbmFwVG9TZWxmOmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IHVlKHQsdGhpcy5leHRyYWN0VGFyZ2V0Q29vcmRpbmF0ZXModGhpcy5zcmNHZW9tKSwhMCkudHJhbnNmb3JtKHRoaXMuc3JjR2VvbSksdD1uO3JldHVybiBlJiZSKHQsTHQpJiYodD1uLmJ1ZmZlcigwKSksdH0sY29tcHV0ZVNuYXBUb2xlcmFuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29tcHV0ZU1pbmltdW1TZWdtZW50TGVuZ3RoKHQpLzEwfSxleHRyYWN0VGFyZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBhdCxuPXQuZ2V0Q29vcmRpbmF0ZXMoKSxpPTA7aTxuLmxlbmd0aDtpKyspZS5hZGQobltpXSk7cmV0dXJuIGUudG9BcnJheShuZXcgQXJyYXkoMCkuZmlsbChudWxsKSl9LGNvbXB1dGVNaW5pbXVtU2VnbWVudExlbmd0aDpmdW5jdGlvbih0KXtmb3IodmFyIGU9Zy5NQVhfVkFMVUUsbj0wO248dC5sZW5ndGgtMTtuKyspe3ZhciBpPXRbbl0uZGlzdGFuY2UodFtuKzFdKTtpPGUmJihlPWkpfXJldHVybiBlfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBhZX19KSxhZS5zbmFwPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0PW5ldyBhZSh0KTtpWzBdPXQuc25hcFRvKGUsbik7ZT1uZXcgYWUoZSk7cmV0dXJuIGlbMV09ZS5zbmFwVG8oaVswXSxuKSxpfSxhZS5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2U9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YWUuY29tcHV0ZVNpemVCYXNlZFNuYXBUb2xlcmFuY2UodCksdD10LmdldFByZWNpc2lvbk1vZGVsKCk7cmV0dXJuIHQuZ2V0VHlwZSgpIT09VnQuRklYRUR8fGU8KG49MS90LmdldFNjYWxlKCkqMi8xLjQxNSkmJihlPW4pLGV9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4gTWF0aC5taW4oYWUuY29tcHV0ZU92ZXJsYXlTbmFwVG9sZXJhbmNlKG4pLGFlLmNvbXB1dGVPdmVybGF5U25hcFRvbGVyYW5jZShlKSl9fSxhZS5jb21wdXRlU2l6ZUJhc2VkU25hcFRvbGVyYW5jZT1mdW5jdGlvbih0KXt0PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3JldHVybiBNYXRoLm1pbih0LmdldEhlaWdodCgpLHQuZ2V0V2lkdGgoKSkqYWUuU05BUF9QUkVDSVNJT05fRkFDVE9SfSxhZS5zbmFwVG9TZWxmPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IGFlKHQpLnNuYXBUb1NlbGYoZSxuKX0sYWUuU05BUF9QUkVDSVNJT05fRkFDVE9SPTFlLTksYSh1ZSxzZSksZSh1ZS5wcm90b3R5cGUse3NuYXBMaW5lOmZ1bmN0aW9uKHQsZSl7dD1uZXcgb2UodCx0aGlzLnNuYXBUb2xlcmFuY2UpO3JldHVybiB0LnNldEFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzKHRoaXMuaXNTZWxmU25hcCksdC5zbmFwVG8oZSl9LHRyYW5zZm9ybUNvb3JkaW5hdGVzOmZ1bmN0aW9uKHQsZSl7dD10LnRvQ29vcmRpbmF0ZUFycmF5KCksdD10aGlzLnNuYXBMaW5lKHQsdGhpcy5zbmFwUHRzKTtyZXR1cm4gdGhpcy5mYWN0b3J5LmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHVlfX0pLGUobGUucHJvdG90eXBlLHtnZXRDb21tb246ZnVuY3Rpb24oKXtyZXR1cm4gZy5sb25nQml0c1RvRG91YmxlKHRoaXMuY29tbW9uQml0cyl9LGFkZDpmdW5jdGlvbih0KXt0PWcuZG91YmxlVG9Mb25nQml0cyh0KTtyZXR1cm4gdGhpcy5pc0ZpcnN0Pyh0aGlzLmNvbW1vbkJpdHM9dCx0aGlzLmNvbW1vblNpZ25FeHA9bGUuc2lnbkV4cEJpdHModGhpcy5jb21tb25CaXRzKSx0aGlzLmlzRmlyc3Q9ITEsbnVsbCk6bGUuc2lnbkV4cEJpdHModCkhPT10aGlzLmNvbW1vblNpZ25FeHA/KHRoaXMuY29tbW9uQml0cz0wLG51bGwpOih0aGlzLmNvbW1vbk1hbnRpc3NhQml0c0NvdW50PWxlLm51bUNvbW1vbk1vc3RTaWdNYW50aXNzYUJpdHModGhpcy5jb21tb25CaXRzLHQpLHZvaWQodGhpcy5jb21tb25CaXRzPWxlLnplcm9Mb3dlckJpdHModGhpcy5jb21tb25CaXRzLDY0LSgxMit0aGlzLmNvbW1vbk1hbnRpc3NhQml0c0NvdW50KSkpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9Zy5sb25nQml0c1RvRG91YmxlKHQpLHQ9XCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIrTG9uZy50b0JpbmFyeVN0cmluZyh0KSx0PXQuc3Vic3RyaW5nKHQubGVuZ3RoLTY0KTtyZXR1cm4gdC5zdWJzdHJpbmcoMCwxKStcIiAgXCIrdC5zdWJzdHJpbmcoMSwxMikrXCIoZXhwKSBcIit0LnN1YnN0cmluZygxMikrXCIgWyBcIitlK1wiIF1cIn19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGxlfX0pLGxlLmdldEJpdD1mdW5jdGlvbih0LGUpe3JldHVybiAwIT0odCYxPDxlKT8xOjB9LGxlLnNpZ25FeHBCaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj41Mn0sbGUuemVyb0xvd2VyQml0cz1mdW5jdGlvbih0LGUpe3JldHVybiB0Jn4oKDE8PGUpLTEpfSxsZS5udW1Db21tb25Nb3N0U2lnTWFudGlzc2FCaXRzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAsaT01MjswPD1pO2ktLSl7aWYobGUuZ2V0Qml0KHQsaSkhPT1sZS5nZXRCaXQoZSxpKSlyZXR1cm4gbjtuKyt9cmV0dXJuIDUyfSxlKGhlLnByb3RvdHlwZSx7YWRkQ29tbW9uQml0czpmdW5jdGlvbih0KXt2YXIgZT1uZXcgZmUodGhpcy5jb21tb25Db29yZCk7dC5hcHBseShlKSx0Lmdlb21ldHJ5Q2hhbmdlZCgpfSxyZW1vdmVDb21tb25CaXRzOmZ1bmN0aW9uKHQpe2lmKDA9PT10aGlzLmNvbW1vbkNvb3JkLngmJjA9PT10aGlzLmNvbW1vbkNvb3JkLnkpcmV0dXJuIHQ7dmFyIGU9bmV3IGQodGhpcy5jb21tb25Db29yZCk7ZS54PS1lLngsZS55PS1lLnk7ZT1uZXcgZmUoZSk7cmV0dXJuIHQuYXBwbHkoZSksdC5nZW9tZXRyeUNoYW5nZWQoKSx0fSxnZXRDb21tb25Db29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tbW9uQ29vcmR9LGFkZDpmdW5jdGlvbih0KXt0LmFwcGx5KHRoaXMuY2NGaWx0ZXIpLHRoaXMuY29tbW9uQ29vcmQ9dGhpcy5jY0ZpbHRlci5nZXRDb21tb25Db29yZGluYXRlKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGhlfX0pLGUoY2UucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7dGhpcy5jb21tb25CaXRzWC5hZGQodC54KSx0aGlzLmNvbW1vbkJpdHNZLmFkZCh0LnkpfSxnZXRDb21tb25Db29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKHRoaXMuY29tbW9uQml0c1guZ2V0Q29tbW9uKCksdGhpcy5jb21tb25CaXRzWS5nZXRDb21tb24oKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3pdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBjZX19KSxlKGZlLnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRPcmRpbmF0ZShlLDApK3RoaXMudHJhbnMueCxpPXQuZ2V0T3JkaW5hdGUoZSwxKSt0aGlzLnRyYW5zLnk7dC5zZXRPcmRpbmF0ZShlLDAsbiksdC5zZXRPcmRpbmF0ZShlLDEsaSl9LGlzRG9uZTpmdW5jdGlvbigpe3JldHVybiExfSxpc0dlb21ldHJ5Q2hhbmdlZDpmdW5jdGlvbigpe3JldHVybiEwfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltjdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGZlfX0pLGhlLkNvbW1vbkNvb3JkaW5hdGVGaWx0ZXI9Y2UsaGUuVHJhbnNsYXRlcj1mZSxlKGdlLnByb3RvdHlwZSx7bmV4dDpmdW5jdGlvbigpe2lmKHRoaXMuYXRTdGFydClyZXR1cm4gdGhpcy5hdFN0YXJ0PSExLGdlLmlzQXRvbWljKHRoaXMucGFyZW50KSYmdGhpcy5pbmRleCsrLHRoaXMucGFyZW50O2lmKG51bGwhPT10aGlzLnN1YmNvbGxlY3Rpb25JdGVyYXRvcil7aWYodGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3IuaGFzTmV4dCgpKXJldHVybiB0aGlzLnN1YmNvbGxlY3Rpb25JdGVyYXRvci5uZXh0KCk7dGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3I9bnVsbH1pZih0aGlzLmluZGV4Pj10aGlzLm1heCl0aHJvdyBuZXcgeDt2YXIgdD10aGlzLnBhcmVudC5nZXRHZW9tZXRyeU4odGhpcy5pbmRleCsrKTtyZXR1cm4gdCBpbnN0YW5jZW9mIGZ0Pyh0aGlzLnN1YmNvbGxlY3Rpb25JdGVyYXRvcj1uZXcgZ2UodCksdGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3IubmV4dCgpKTp0fSxyZW1vdmU6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24odGhpcy5nZXRDbGFzcygpLmdldE5hbWUoKSl9LGhhc05leHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmF0U3RhcnQpcmV0dXJuITA7aWYobnVsbCE9PXRoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yKXtpZih0aGlzLnN1YmNvbGxlY3Rpb25JdGVyYXRvci5oYXNOZXh0KCkpcmV0dXJuITA7dGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3I9bnVsbH1yZXR1cm4hKHRoaXMuaW5kZXg+PXRoaXMubWF4KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bZl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGdlfX0pLGdlLmlzQXRvbWljPWZ1bmN0aW9uKHQpe3JldHVybiEodCBpbnN0YW5jZW9mIGZ0KX0sZShkZS5wcm90b3R5cGUse2xvY2F0ZUludGVybmFsOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIFJ0KXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYoZS5pc0VtcHR5KCkpcmV0dXJuIEwuRVhURVJJT1I7dmFyIG49ZS5nZXRFeHRlcmlvclJpbmcoKSxpPXRoaXMubG9jYXRlSW5Qb2x5Z29uUmluZyh0LG4pO2lmKGk9PT1MLkVYVEVSSU9SKXJldHVybiBMLkVYVEVSSU9SO2lmKGk9PT1MLkJPVU5EQVJZKXJldHVybiBMLkJPVU5EQVJZO2Zvcih2YXIgcj0wO3I8ZS5nZXROdW1JbnRlcmlvclJpbmcoKTtyKyspe3ZhciBzPWUuZ2V0SW50ZXJpb3JSaW5nTihyKSxzPXRoaXMubG9jYXRlSW5Qb2x5Z29uUmluZyh0LHMpO2lmKHM9PT1MLklOVEVSSU9SKXJldHVybiBMLkVYVEVSSU9SO2lmKHM9PT1MLkJPVU5EQVJZKXJldHVybiBMLkJPVU5EQVJZfXJldHVybiBMLklOVEVSSU9SfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDdCl7bj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07aWYoIWkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHMobikpcmV0dXJuIEwuRVhURVJJT1I7dmFyIG89aS5nZXRDb29yZGluYXRlcygpO3JldHVybiBpLmlzQ2xvc2VkKCl8fCFuLmVxdWFscyhvWzBdKSYmIW4uZXF1YWxzKG9bby5sZW5ndGgtMV0pP1p0LmlzT25MaW5lKG4sbyk/TC5JTlRFUklPUjpMLkVYVEVSSU9SOkwuQk9VTkRBUll9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIHd0KXtvPWFyZ3VtZW50c1swXTtyZXR1cm4gYXJndW1lbnRzWzFdLmdldENvb3JkaW5hdGUoKS5lcXVhbHMyRChvKT9MLklOVEVSSU9SOkwuRVhURVJJT1J9fSxsb2NhdGVJblBvbHlnb25SaW5nOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHModCk/WnQubG9jYXRlUG9pbnRJblJpbmcodCxlLmdldENvb3JkaW5hdGVzKCkpOkwuRVhURVJJT1J9LGludGVyc2VjdHM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5sb2NhdGUodCxlKSE9PUwuRVhURVJJT1J9LHVwZGF0ZUxvY2F0aW9uSW5mbzpmdW5jdGlvbih0KXt0PT09TC5JTlRFUklPUiYmKHRoaXMuaXNJbj0hMCksdD09PUwuQk9VTkRBUlkmJnRoaXMubnVtQm91bmRhcmllcysrfSxjb21wdXRlTG9jYXRpb246ZnVuY3Rpb24odCxlKXtpZihlIGluc3RhbmNlb2Ygd3QmJnRoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxlKSksZSBpbnN0YW5jZW9mIEN0KXRoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxlKSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgUnQpdGhpcy51cGRhdGVMb2NhdGlvbkluZm8odGhpcy5sb2NhdGVJbnRlcm5hbCh0LGUpKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBndClmb3IodmFyIG49ZSxpPTA7aTxuLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPW4uZ2V0R2VvbWV0cnlOKGkpO3RoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxyKSl9ZWxzZSBpZihlIGluc3RhbmNlb2YgYnQpZm9yKHZhciBzPWUsaT0wO2k8cy5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgbz1zLmdldEdlb21ldHJ5TihpKTt0aGlzLnVwZGF0ZUxvY2F0aW9uSW5mbyh0aGlzLmxvY2F0ZUludGVybmFsKHQsbykpfWVsc2UgaWYoZSBpbnN0YW5jZW9mIGZ0KWZvcih2YXIgYT1uZXcgZ2UoZSk7YS5oYXNOZXh0KCk7KXt2YXIgdT1hLm5leHQoKTt1IT09ZSYmdGhpcy5jb21wdXRlTG9jYXRpb24odCx1KX19LGxvY2F0ZTpmdW5jdGlvbih0LGUpe3JldHVybiBlLmlzRW1wdHkoKT9MLkVYVEVSSU9SOmUgaW5zdGFuY2VvZiBDdHx8ZSBpbnN0YW5jZW9mIFJ0P3RoaXMubG9jYXRlSW50ZXJuYWwodCxlKToodGhpcy5pc0luPSExLHRoaXMubnVtQm91bmRhcmllcz0wLHRoaXMuY29tcHV0ZUxvY2F0aW9uKHQsZSksdGhpcy5ib3VuZGFyeVJ1bGUuaXNJbkJvdW5kYXJ5KHRoaXMubnVtQm91bmRhcmllcyk/TC5CT1VOREFSWTowPHRoaXMubnVtQm91bmRhcmllc3x8dGhpcy5pc0luP0wuSU5URVJJT1I6TC5FWFRFUklPUil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGRlfX0pLGUocGUucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBwZX19KSxwZS5vY3RhbnQ9ZnVuY3Rpb24oKXtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYoMD09PXQmJjA9PT1lKXRocm93IG5ldyBjO3ZhciBuPU1hdGguYWJzKHQpLGk9TWF0aC5hYnMoZSk7cmV0dXJuIDA8PXQ/MDw9ZT9pPD1uPzA6MTppPD1uPzc6NjowPD1lP2k8PW4/MzoyOmk8PW4/NDo1fWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBkKXtlPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxuPWkueC1lLngsaT1pLnktZS55O2lmKDA9PW4mJjA9PWkpdGhyb3cgbmV3IGM7cmV0dXJuIHBlLm9jdGFudChuLGkpfX0sZShtZS5wcm90b3R5cGUse2dldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7fSxzaXplOmZ1bmN0aW9uKCl7fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe30saXNDbG9zZWQ6ZnVuY3Rpb24oKXt9LHNldERhdGE6ZnVuY3Rpb24odCl7fSxnZXREYXRhOmZ1bmN0aW9uKCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBtZX19KSxlKHllLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHN9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RofSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnB0c1t0XX0saXNDbG9zZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHNbMF0uZXF1YWxzKHRoaXMucHRzW3RoaXMucHRzLmxlbmd0aC0xXSl9LGdldFNlZ21lbnRPY3RhbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLnB0cy5sZW5ndGgtMT8tMTpwZS5vY3RhbnQodGhpcy5nZXRDb29yZGluYXRlKHQpLHRoaXMuZ2V0Q29vcmRpbmF0ZSh0KzEpKX0sc2V0RGF0YTpmdW5jdGlvbih0KXt0aGlzLmRhdGE9dH0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFh0LnRvTGluZVN0cmluZyhuZXcgRnQodGhpcy5wdHMpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bbWVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB5ZX19KSxlKHZlLnByb3RvdHlwZSx7Z2V0Qm91bmRzOmZ1bmN0aW9uKCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB2ZX19KSxlKHhlLnByb3RvdHlwZSx7Z2V0SXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW19LGdldEJvdW5kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvdW5kc30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bdmUsb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHhlfX0pLGUoRWUucHJvdG90eXBlLHtwb2xsOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5pdGVtcy5nZXQoMSk7cmV0dXJuIHRoaXMuaXRlbXMuc2V0KDEsdGhpcy5pdGVtcy5nZXQodGhpcy5fc2l6ZSkpLC0tdGhpcy5fc2l6ZSx0aGlzLnJlb3JkZXIoMSksdH0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplfSxyZW9yZGVyOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dGhpcy5pdGVtcy5nZXQodCk7Mip0PD10aGlzLl9zaXplJiYoKGU9Mip0KSE9PXRoaXMuX3NpemUmJnRoaXMuaXRlbXMuZ2V0KGUrMSkuY29tcGFyZVRvKHRoaXMuaXRlbXMuZ2V0KGUpKTwwJiZlKyssdGhpcy5pdGVtcy5nZXQoZSkuY29tcGFyZVRvKG4pPDApO3Q9ZSl0aGlzLml0ZW1zLnNldCh0LHRoaXMuaXRlbXMuZ2V0KGUpKTt0aGlzLml0ZW1zLnNldCh0LG4pfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX3NpemU9MCx0aGlzLml0ZW1zLmNsZWFyKCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3NpemV9LGFkZDpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZChudWxsKSx0aGlzLl9zaXplKz0xO3ZhciBlPXRoaXMuX3NpemU7Zm9yKHRoaXMuaXRlbXMuc2V0KDAsdCk7dC5jb21wYXJlVG8odGhpcy5pdGVtcy5nZXQoTWF0aC50cnVuYyhlLzIpKSk8MDtlLz0yKXRoaXMuaXRlbXMuc2V0KGUsdGhpcy5pdGVtcy5nZXQoTWF0aC50cnVuYyhlLzIpKSk7dGhpcy5pdGVtcy5zZXQoZSx0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRWV9fSksZShJZS5wcm90b3R5cGUse3Zpc2l0SXRlbTpmdW5jdGlvbih0KXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEllfX0pLGUoTmUucHJvdG90eXBlLHtpbnNlcnQ6ZnVuY3Rpb24odCxlKXt9LHJlbW92ZTpmdW5jdGlvbih0LGUpe30scXVlcnk6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE5lfX0pLGUoQ2UucHJvdG90eXBlLHtnZXRMZXZlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxldmVsfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRCb3VuZGFibGVzLnNpemUoKX0sZ2V0Q2hpbGRCb3VuZGFibGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRCb3VuZGFibGVzfSxhZGRDaGlsZEJvdW5kYWJsZTpmdW5jdGlvbih0KXtsLmlzVHJ1ZShudWxsPT09dGhpcy5ib3VuZHMpLHRoaXMuY2hpbGRCb3VuZGFibGVzLmFkZCh0KX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkQm91bmRhYmxlcy5pc0VtcHR5KCl9LGdldEJvdW5kczpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5ib3VuZHMmJih0aGlzLmJvdW5kcz10aGlzLmNvbXB1dGVCb3VuZHMoKSksdGhpcy5ib3VuZHN9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3ZlLG9dfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDZX19KSxDZS5zZXJpYWxWZXJzaW9uVUlEPTB4NWExZTU1ZWM0MTM2OTgwMDt2YXIgWnM9e3JldmVyc2VPcmRlcjpmdW5jdGlvbigpe3JldHVybntjb21wYXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuY29tcGFyZVRvKHQpfX19LG1pbjpmdW5jdGlvbih0KXtyZXR1cm4gWnMuc29ydCh0KSx0LmdldCgwKX0sc29ydDpmdW5jdGlvbih0LGUpe3ZhciBuPXQudG9BcnJheSgpO2U/dXQuc29ydChuLGUpOnV0LnNvcnQobik7Zm9yKHZhciBpPXQuaXRlcmF0b3IoKSxyPTAscz1uLmxlbmd0aDtyPHM7cisrKWkubmV4dCgpLGkuc2V0KG5bcl0pfSxzaW5nbGV0b25MaXN0OmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBJO3JldHVybiBlLmFkZCh0KSxlfX07ZShTZS5wcm90b3R5cGUse2V4cGFuZFRvUXVldWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1TZS5pc0NvbXBvc2l0ZSh0aGlzLmJvdW5kYWJsZTEpLGk9U2UuaXNDb21wb3NpdGUodGhpcy5ib3VuZGFibGUyKTtpZihuJiZpKXJldHVybiBTZS5hcmVhKHRoaXMuYm91bmRhYmxlMSk+U2UuYXJlYSh0aGlzLmJvdW5kYWJsZTIpP3RoaXMuZXhwYW5kKHRoaXMuYm91bmRhYmxlMSx0aGlzLmJvdW5kYWJsZTIsdCxlKTp0aGlzLmV4cGFuZCh0aGlzLmJvdW5kYWJsZTIsdGhpcy5ib3VuZGFibGUxLHQsZSksbnVsbDtpZihuKXJldHVybiB0aGlzLmV4cGFuZCh0aGlzLmJvdW5kYWJsZTEsdGhpcy5ib3VuZGFibGUyLHQsZSksbnVsbDtpZihpKXJldHVybiB0aGlzLmV4cGFuZCh0aGlzLmJvdW5kYWJsZTIsdGhpcy5ib3VuZGFibGUxLHQsZSksbnVsbDt0aHJvdyBuZXcgY30saXNMZWF2ZXM6ZnVuY3Rpb24oKXtyZXR1cm4hKFNlLmlzQ29tcG9zaXRlKHRoaXMuYm91bmRhYmxlMSl8fFNlLmlzQ29tcG9zaXRlKHRoaXMuYm91bmRhYmxlMikpfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Rpc3RhbmNlPHQuX2Rpc3RhbmNlPy0xOnRoaXMuX2Rpc3RhbmNlPnQuX2Rpc3RhbmNlPzE6MH0sZXhwYW5kOmZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj10LmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1uZXcgU2Uoci5uZXh0KCksZSx0aGlzLml0ZW1EaXN0YW5jZSk7cy5nZXREaXN0YW5jZSgpPGkmJm4uYWRkKHMpfX0sZ2V0Qm91bmRhYmxlOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD90aGlzLmJvdW5kYWJsZTE6dGhpcy5ib3VuZGFibGUyfSxnZXREaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXN0YW5jZX0sZGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYXZlcygpP3RoaXMuaXRlbURpc3RhbmNlLmRpc3RhbmNlKHRoaXMuYm91bmRhYmxlMSx0aGlzLmJvdW5kYWJsZTIpOnRoaXMuYm91bmRhYmxlMS5nZXRCb3VuZHMoKS5kaXN0YW5jZSh0aGlzLmJvdW5kYWJsZTIuZ2V0Qm91bmRzKCkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltpXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gU2V9fSksU2UuYXJlYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRCb3VuZHMoKS5nZXRBcmVhKCl9LFNlLmlzQ29tcG9zaXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQ2V9LGUod2UucHJvdG90eXBlLHtnZXROb2RlQ2FwYWNpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlQ2FwYWNpdHl9LGxhc3ROb2RlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldCh0LnNpemUoKS0xKX0sc2l6ZTpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmlzRW1wdHkoKT8wOih0aGlzLmJ1aWxkKCksdGhpcy5zaXplKHRoaXMucm9vdCkpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9MCxlPWFyZ3VtZW50c1swXS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7biBpbnN0YW5jZW9mIENlP3QrPXRoaXMuc2l6ZShuKTpuIGluc3RhbmNlb2YgeGUmJih0Kz0xKX1yZXR1cm4gdH19LHJlbW92ZUl0ZW06ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bnVsbCxpPXQuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO3IgaW5zdGFuY2VvZiB4ZSYmci5nZXRJdGVtKCk9PT1lJiYobj1yKX1yZXR1cm4gbnVsbCE9PW4mJih0LmdldENoaWxkQm91bmRhYmxlcygpLnJlbW92ZShuKSwhMCl9LGl0ZW1zVHJlZTpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLmJ1aWxkKCk7dmFyIHQ9dGhpcy5pdGVtc1RyZWUodGhpcy5yb290KTtyZXR1cm4gbnVsbD09PXQ/bmV3IEk6dH1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBJLG49dC5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGkscj1uLm5leHQoKTtyIGluc3RhbmNlb2YgQ2U/bnVsbCE9PShpPXRoaXMuaXRlbXNUcmVlKHIpKSYmZS5hZGQoaSk6ciBpbnN0YW5jZW9mIHhlP2UuYWRkKHIuZ2V0SXRlbSgpKTpsLnNob3VsZE5ldmVyUmVhY2hIZXJlKCl9cmV0dXJuIGUuc2l6ZSgpPD0wP251bGw6ZX19LGluc2VydDpmdW5jdGlvbih0LGUpe2wuaXNUcnVlKCF0aGlzLmJ1aWx0LFwiQ2Fubm90IGluc2VydCBpdGVtcyBpbnRvIGFuIFNUUiBwYWNrZWQgUi10cmVlIGFmdGVyIGl0IGhhcyBiZWVuIGJ1aWx0LlwiKSx0aGlzLml0ZW1Cb3VuZGFibGVzLmFkZChuZXcgeGUodCxlKSl9LGJvdW5kYWJsZXNBdExldmVsOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBJO3JldHVybiB0aGlzLmJvdW5kYWJsZXNBdExldmVsKHQsdGhpcy5yb290LGUpLGV9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXTtpZihsLmlzVHJ1ZSgtMjxuKSxlLmdldExldmVsKCk9PT1uKXJldHVybiBpLmFkZChlKSxudWxsO2Zvcih2YXIgcj1lLmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1yLm5leHQoKTtzIGluc3RhbmNlb2YgQ2U/dGhpcy5ib3VuZGFibGVzQXRMZXZlbChuLHMsaSk6KGwuaXNUcnVlKHMgaW5zdGFuY2VvZiB4ZSksLTE9PT1uJiZpLmFkZChzKSl9cmV0dXJuIG51bGx9fSxxdWVyeTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5idWlsZCgpO3ZhciBlPW5ldyBJO3JldHVybiB0aGlzLmlzRW1wdHkoKXx8dGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKHRoaXMucm9vdC5nZXRCb3VuZHMoKSx0KSYmdGhpcy5xdWVyeSh0LHRoaXMucm9vdCxlKSxlfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZih0aGlzLmJ1aWxkKCksdGhpcy5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKHRoaXMucm9vdC5nZXRCb3VuZHMoKSx0KSYmdGhpcy5xdWVyeSh0LHRoaXMucm9vdCxlKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKFIoYXJndW1lbnRzWzJdLEllKSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3QmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgQ2UpZm9yKHZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1syXSxyPWFyZ3VtZW50c1sxXS5nZXRDaGlsZEJvdW5kYWJsZXMoKSxzPTA7czxyLnNpemUoKTtzKyspe3ZhciBvPXIuZ2V0KHMpO3RoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyhvLmdldEJvdW5kcygpLG4pJiYobyBpbnN0YW5jZW9mIENlP3RoaXMucXVlcnkobixvLGkpOm8gaW5zdGFuY2VvZiB4ZT9pLnZpc2l0SXRlbShvLmdldEl0ZW0oKSk6bC5zaG91bGROZXZlclJlYWNoSGVyZSgpKX1lbHNlIGlmKFIoYXJndW1lbnRzWzJdLHYpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDZSlmb3IodmFyIGE9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzJdLHI9YXJndW1lbnRzWzFdLmdldENoaWxkQm91bmRhYmxlcygpLHM9MDtzPHIuc2l6ZSgpO3MrKyl7bz1yLmdldChzKTt0aGlzLmdldEludGVyc2VjdHNPcCgpLmludGVyc2VjdHMoby5nZXRCb3VuZHMoKSxhKSYmKG8gaW5zdGFuY2VvZiBDZT90aGlzLnF1ZXJ5KGEsbyx1KTpvIGluc3RhbmNlb2YgeGU/dS5hZGQoby5nZXRJdGVtKCkpOmwuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKSl9fSxidWlsZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1aWx0P251bGw6KHRoaXMucm9vdD10aGlzLml0ZW1Cb3VuZGFibGVzLmlzRW1wdHkoKT90aGlzLmNyZWF0ZU5vZGUoMCk6dGhpcy5jcmVhdGVIaWdoZXJMZXZlbHModGhpcy5pdGVtQm91bmRhYmxlcywtMSksdGhpcy5pdGVtQm91bmRhYmxlcz1udWxsLHZvaWQodGhpcy5idWlsdD0hMCkpfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVpbGQoKSx0aGlzLnJvb3R9LHJlbW92ZTpmdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYnVpbGQoKSwhIXRoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyh0aGlzLnJvb3QuZ2V0Qm91bmRzKCksdCkmJnRoaXMucmVtb3ZlKHQsdGhpcy5yb290LGUpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMl0scj10aGlzLnJlbW92ZUl0ZW0oZSxpKTtpZihyKXJldHVybiEwO2Zvcih2YXIgcz1udWxsLG89ZS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO28uaGFzTmV4dCgpOyl7dmFyIGE9by5uZXh0KCk7aWYodGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKGEuZ2V0Qm91bmRzKCksbikmJmEgaW5zdGFuY2VvZiBDZSYmKHI9dGhpcy5yZW1vdmUobixhLGkpKSl7cz1hO2JyZWFrfX1yZXR1cm4gbnVsbCE9PXMmJnMuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXNFbXB0eSgpJiZlLmdldENoaWxkQm91bmRhYmxlcygpLnJlbW92ZShzKSxyfX0sY3JlYXRlSGlnaGVyTGV2ZWxzOmZ1bmN0aW9uKHQsZSl7bC5pc1RydWUoIXQuaXNFbXB0eSgpKTt0PXRoaXMuY3JlYXRlUGFyZW50Qm91bmRhYmxlcyh0LGUrMSk7cmV0dXJuIDE9PT10LnNpemUoKT90LmdldCgwKTp0aGlzLmNyZWF0ZUhpZ2hlckxldmVscyh0LGUrMSl9LGRlcHRoOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuaXNFbXB0eSgpPzA6KHRoaXMuYnVpbGQoKSx0aGlzLmRlcHRoKHRoaXMucm9vdCkpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9MCxlPWFyZ3VtZW50c1swXS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7biBpbnN0YW5jZW9mIENlJiYodDwobj10aGlzLmRlcHRoKG4pKSYmKHQ9bikpfXJldHVybiB0KzF9fSxjcmVhdGVQYXJlbnRCb3VuZGFibGVzOmZ1bmN0aW9uKHQsZSl7bC5pc1RydWUoIXQuaXNFbXB0eSgpKTt2YXIgbj1uZXcgSTtuLmFkZCh0aGlzLmNyZWF0ZU5vZGUoZSkpO3Q9bmV3IEkodCk7WnMuc29ydCh0LHRoaXMuZ2V0Q29tcGFyYXRvcigpKTtmb3IodmFyIGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7dGhpcy5sYXN0Tm9kZShuKS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5zaXplKCk9PT10aGlzLmdldE5vZGVDYXBhY2l0eSgpJiZuLmFkZCh0aGlzLmNyZWF0ZU5vZGUoZSkpLHRoaXMubGFzdE5vZGUobikuYWRkQ2hpbGRCb3VuZGFibGUocil9cmV0dXJuIG59LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5idWlsdD90aGlzLnJvb3Q6dGhpcy5pdGVtQm91bmRhYmxlcykuaXNFbXB0eSgpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltvXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gd2V9fSksd2UuY29tcGFyZURvdWJsZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZTx0PzE6dDxlPy0xOjB9LHdlLkludGVyc2VjdHNPcD1mdW5jdGlvbigpe30sd2Uuc2VyaWFsVmVyc2lvblVJRD0tMHgzNWVmNjRjODJkNGM1NDAwLHdlLkRFRkFVTFRfTk9ERV9DQVBBQ0lUWT0xMCxlKExlLnByb3RvdHlwZSx7ZGlzdGFuY2U6ZnVuY3Rpb24odCxlKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIExlfX0pLGEoUmUsd2UpLGUoUmUucHJvdG90eXBlLHtjcmVhdGVQYXJlbnRCb3VuZGFibGVzRnJvbVZlcnRpY2FsU2xpY2VzOmZ1bmN0aW9uKHQsZSl7bC5pc1RydWUoMDx0Lmxlbmd0aCk7Zm9yKHZhciBuPW5ldyBJLGk9MDtpPHQubGVuZ3RoO2krKyluLmFkZEFsbCh0aGlzLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZSh0W2ldLGUpKTtyZXR1cm4gbn0sY3JlYXRlTm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFRlKHQpfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3dlLnByb3RvdHlwZS5zaXplLmNhbGwodGhpcyk6d2UucHJvdG90eXBlLnNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpbnNlcnQ6ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gd2UucHJvdG90eXBlLmluc2VydC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiB0LmlzTnVsbCgpP251bGw6dm9pZCB3ZS5wcm90b3R5cGUuaW5zZXJ0LmNhbGwodGhpcyx0LGUpfSxnZXRJbnRlcnNlY3RzT3A6ZnVuY3Rpb24oKXtyZXR1cm4gUmUuaW50ZXJzZWN0c09wfSx2ZXJ0aWNhbFNsaWNlczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1NYXRoLnRydW5jKE1hdGguY2VpbCh0LnNpemUoKS9lKSksaT1uZXcgQXJyYXkoZSkuZmlsbChudWxsKSxyPXQuaXRlcmF0b3IoKSxzPTA7czxlO3MrKyl7aVtzXT1uZXcgSTtmb3IodmFyIG89MDtyLmhhc05leHQoKSYmbzxuOyl7dmFyIGE9ci5uZXh0KCk7aVtzXS5hZGQoYSksbysrfX1yZXR1cm4gaX0scXVlcnk6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB3ZS5wcm90b3R5cGUucXVlcnkuY2FsbCh0aGlzLHQpfXZhciBlLG4saSxyOzI9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXSx3ZS5wcm90b3R5cGUucXVlcnkuY2FsbCh0aGlzLGUsdCkpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYoUihhcmd1bWVudHNbMl0sSWUpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDZT8obj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl0sd2UucHJvdG90eXBlLnF1ZXJ5LmNhbGwodGhpcyxuLGkscikpOlIoYXJndW1lbnRzWzJdLHYpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDZSYmKG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLHdlLnByb3RvdHlwZS5xdWVyeS5jYWxsKHRoaXMsbixpLHIpKSl9LGdldENvbXBhcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gUmUueUNvbXBhcmF0b3J9LGNyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZTpmdW5jdGlvbih0LGUpe3JldHVybiB3ZS5wcm90b3R5cGUuY3JlYXRlUGFyZW50Qm91bmRhYmxlcy5jYWxsKHRoaXMsdCxlKX0scmVtb3ZlOmZ1bmN0aW9uKCl7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHdlLnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4gd2UucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsdCxlKX0sZGVwdGg6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/d2UucHJvdG90eXBlLmRlcHRoLmNhbGwodGhpcyk6d2UucHJvdG90eXBlLmRlcHRoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY3JlYXRlUGFyZW50Qm91bmRhYmxlczpmdW5jdGlvbih0LGUpe2wuaXNUcnVlKCF0LmlzRW1wdHkoKSk7dmFyIG49TWF0aC50cnVuYyhNYXRoLmNlaWwodC5zaXplKCkvdGhpcy5nZXROb2RlQ2FwYWNpdHkoKSkpLHQ9bmV3IEkodCk7WnMuc29ydCh0LFJlLnhDb21wYXJhdG9yKTtuPXRoaXMudmVydGljYWxTbGljZXModCxNYXRoLnRydW5jKE1hdGguY2VpbChNYXRoLnNxcnQobikpKSk7cmV0dXJuIHRoaXMuY3JlYXRlUGFyZW50Qm91bmRhYmxlc0Zyb21WZXJ0aWNhbFNsaWNlcyhuLGUpfSxuZWFyZXN0TmVpZ2hib3VyOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFIoYXJndW1lbnRzWzBdLExlKSl7dmFyIHQ9YXJndW1lbnRzWzBdLHQ9bmV3IFNlKHRoaXMuZ2V0Um9vdCgpLHRoaXMuZ2V0Um9vdCgpLHQpO3JldHVybiB0aGlzLm5lYXJlc3ROZWlnaGJvdXIodCl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBTZSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLm5lYXJlc3ROZWlnaGJvdXIoZSxnLlBPU0lUSVZFX0lORklOSVRZKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBSZSYmUihhcmd1bWVudHNbMV0sTGUpKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sdD1uZXcgU2UodGhpcy5nZXRSb290KCksZS5nZXRSb290KCksbik7cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cih0KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFNlJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1udWxsLG89bmV3IEVlO2ZvcihvLmFkZChpKTshby5pc0VtcHR5KCkmJjA8cjspe3ZhciBhPW8ucG9sbCgpLHU9YS5nZXREaXN0YW5jZSgpO2lmKHI8PXUpYnJlYWs7YS5pc0xlYXZlcygpPyhyPXUscz1hKTphLmV4cGFuZFRvUXVldWUobyxyKX1yZXR1cm5bcy5nZXRCb3VuZGFibGUoMCkuZ2V0SXRlbSgpLHMuZ2V0Qm91bmRhYmxlKDEpLmdldEl0ZW0oKV19fWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe249YXJndW1lbnRzWzJdLGk9bmV3IHhlKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pLHQ9bmV3IFNlKHRoaXMuZ2V0Um9vdCgpLGksbik7cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cih0KVswXX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW05lLG9dfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBSZX19KSxSZS5jZW50cmVYPWZ1bmN0aW9uKHQpe3JldHVybiBSZS5hdmcodC5nZXRNaW5YKCksdC5nZXRNYXhYKCkpfSxSZS5hdmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4odCtlKS8yfSxSZS5jZW50cmVZPWZ1bmN0aW9uKHQpe3JldHVybiBSZS5hdmcodC5nZXRNaW5ZKCksdC5nZXRNYXhZKCkpfSxhKFRlLENlKSxlKFRlLnByb3RvdHlwZSx7Y29tcHV0ZUJvdW5kczpmdW5jdGlvbigpe2Zvcih2YXIgdD1udWxsLGU9dGhpcy5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bnVsbD09PXQ/dD1uZXcgQyhuLmdldEJvdW5kcygpKTp0LmV4cGFuZFRvSW5jbHVkZShuLmdldEJvdW5kcygpKX1yZXR1cm4gdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVGV9fSksUmUuU1RSdHJlZU5vZGU9VGUsUmUuc2VyaWFsVmVyc2lvblVJRD0weDM5OTIwZjdkNWYyNjFlMCxSZS54Q29tcGFyYXRvcj17aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bc119LGNvbXBhcmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gd2UuY29tcGFyZURvdWJsZXMoUmUuY2VudHJlWCh0LmdldEJvdW5kcygpKSxSZS5jZW50cmVYKGUuZ2V0Qm91bmRzKCkpKX19LFJlLnlDb21wYXJhdG9yPXtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzXX0sY29tcGFyZTpmdW5jdGlvbih0LGUpe3JldHVybiB3ZS5jb21wYXJlRG91YmxlcyhSZS5jZW50cmVZKHQuZ2V0Qm91bmRzKCkpLFJlLmNlbnRyZVkoZS5nZXRCb3VuZHMoKSkpfX0sUmUuaW50ZXJzZWN0c09wPXtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltJbnRlcnNlY3RzT3BdfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW50ZXJzZWN0cyhlKX19LFJlLkRFRkFVTFRfTk9ERV9DQVBBQ0lUWT0xMCxlKFBlLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUGV9fSksUGUucmVsYXRpdmVTaWduPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8ZT8tMTplPHQ/MTowfSxQZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSxuKXtpZihlLmVxdWFsczJEKG4pKXJldHVybiAwO3ZhciBpPVBlLnJlbGF0aXZlU2lnbihlLngsbi54KSxuPVBlLnJlbGF0aXZlU2lnbihlLnksbi55KTtzd2l0Y2godCl7Y2FzZSAwOnJldHVybiBQZS5jb21wYXJlVmFsdWUoaSxuKTtjYXNlIDE6cmV0dXJuIFBlLmNvbXBhcmVWYWx1ZShuLGkpO2Nhc2UgMjpyZXR1cm4gUGUuY29tcGFyZVZhbHVlKG4sLWkpO2Nhc2UgMzpyZXR1cm4gUGUuY29tcGFyZVZhbHVlKC1pLG4pO2Nhc2UgNDpyZXR1cm4gUGUuY29tcGFyZVZhbHVlKC1pLC1uKTtjYXNlIDU6cmV0dXJuIFBlLmNvbXBhcmVWYWx1ZSgtbiwtaSk7Y2FzZSA2OnJldHVybiBQZS5jb21wYXJlVmFsdWUoLW4saSk7Y2FzZSA3OnJldHVybiBQZS5jb21wYXJlVmFsdWUoaSwtbil9cmV0dXJuIGwuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoXCJpbnZhbGlkIG9jdGFudCB2YWx1ZVwiKSwwfSxQZS5jb21wYXJlVmFsdWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdDwwPy0xOjA8dD8xOmU8MD8tMTowPGU/MTowfSxlKGJlLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkfSxwcmludDpmdW5jdGlvbih0KXt0LnByaW50KHRoaXMuY29vcmQpLHQucHJpbnQoXCIgc2VnICMgPSBcIit0aGlzLnNlZ21lbnRJbmRleCl9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZWdtZW50SW5kZXg8dC5zZWdtZW50SW5kZXg/LTE6dGhpcy5zZWdtZW50SW5kZXg+dC5zZWdtZW50SW5kZXg/MTp0aGlzLmNvb3JkLmVxdWFsczJEKHQuY29vcmQpPzA6UGUuY29tcGFyZSh0aGlzLnNlZ21lbnRPY3RhbnQsdGhpcy5jb29yZCx0LmNvb3JkKX0saXNFbmRQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXRoaXMuc2VnbWVudEluZGV4JiYhdGhpcy5faXNJbnRlcmlvcnx8dGhpcy5zZWdtZW50SW5kZXg9PT10fSxpc0ludGVyaW9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSW50ZXJpb3J9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBiZX19KSxlKE9lLnByb3RvdHlwZSx7Z2V0U3BsaXRDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciB0PW5ldyBOO3RoaXMuYWRkRW5kcG9pbnRzKCk7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKSxuPWUubmV4dCgpO2UuaGFzTmV4dCgpOyl7dmFyIGk9ZS5uZXh0KCk7dGhpcy5hZGRFZGdlQ29vcmRpbmF0ZXMobixpLHQpLG49aX1yZXR1cm4gdC50b0Nvb3JkaW5hdGVBcnJheSgpfSxhZGRDb2xsYXBzZWROb2RlczpmdW5jdGlvbigpe3ZhciB0PW5ldyBJO3RoaXMuZmluZENvbGxhcHNlc0Zyb21JbnNlcnRlZE5vZGVzKHQpLHRoaXMuZmluZENvbGxhcHNlc0Zyb21FeGlzdGluZ1ZlcnRpY2VzKHQpO2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKS5pbnRWYWx1ZSgpO3RoaXMuYWRkKHRoaXMuZWRnZS5nZXRDb29yZGluYXRlKG4pLG4pfX0scHJpbnQ6ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiSW50ZXJzZWN0aW9uczpcIik7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe2UubmV4dCgpLnByaW50KHQpfX0sZmluZENvbGxhcHNlc0Zyb21FeGlzdGluZ1ZlcnRpY2VzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5lZGdlLnNpemUoKS0yO2UrKyl7dmFyIG49dGhpcy5lZGdlLmdldENvb3JkaW5hdGUoZSksaT0odGhpcy5lZGdlLmdldENvb3JkaW5hdGUoZSsxKSx0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShlKzIpKTtuLmVxdWFsczJEKGkpJiZ0LmFkZChuZXcgYihlKzEpKX19LGFkZEVkZ2VDb29yZGluYXRlczpmdW5jdGlvbih0LGUsbil7ZS5zZWdtZW50SW5kZXgsdC5zZWdtZW50SW5kZXg7dmFyIGk9dGhpcy5lZGdlLmdldENvb3JkaW5hdGUoZS5zZWdtZW50SW5kZXgpLGk9ZS5pc0ludGVyaW9yKCl8fCFlLmNvb3JkLmVxdWFsczJEKGkpO24uYWRkKG5ldyBkKHQuY29vcmQpLCExKTtmb3IodmFyIHI9dC5zZWdtZW50SW5kZXgrMTtyPD1lLnNlZ21lbnRJbmRleDtyKyspbi5hZGQodGhpcy5lZGdlLmdldENvb3JkaW5hdGUocikpO2kmJm4uYWRkKG5ldyBkKGUuY29vcmQpKX0saXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlTWFwLnZhbHVlcygpLml0ZXJhdG9yKCl9LGFkZFNwbGl0RWRnZXM6ZnVuY3Rpb24odCl7dGhpcy5hZGRFbmRwb2ludHMoKSx0aGlzLmFkZENvbGxhcHNlZE5vZGVzKCk7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKSxuPWUubmV4dCgpO2UuaGFzTmV4dCgpOyl7dmFyIGk9ZS5uZXh0KCkscj10aGlzLmNyZWF0ZVNwbGl0RWRnZShuLGkpO3QuYWRkKHIpLG49aX19LGZpbmRDb2xsYXBzZUluZGV4OmZ1bmN0aW9uKHQsZSxuKXtpZighdC5jb29yZC5lcXVhbHMyRChlLmNvb3JkKSlyZXR1cm4hMTt2YXIgaT1lLnNlZ21lbnRJbmRleC10LnNlZ21lbnRJbmRleDtyZXR1cm4gZS5pc0ludGVyaW9yKCl8fGktLSwxPT09aSYmKG5bMF09dC5zZWdtZW50SW5kZXgrMSwhMCl9LGZpbmRDb2xsYXBzZXNGcm9tSW5zZXJ0ZWROb2RlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KDEpLmZpbGwobnVsbCksbj10aGlzLml0ZXJhdG9yKCksaT1uLm5leHQoKTtuLmhhc05leHQoKTspe3ZhciByPW4ubmV4dCgpO3RoaXMuZmluZENvbGxhcHNlSW5kZXgoaSxyLGUpJiZ0LmFkZChuZXcgYihlWzBdKSksaT1yfX0sZ2V0RWRnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2V9LGFkZEVuZHBvaW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWRnZS5zaXplKCktMTt0aGlzLmFkZCh0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZSgwKSwwKSx0aGlzLmFkZCh0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZSh0KSx0KX0sY3JlYXRlU3BsaXRFZGdlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5zZWdtZW50SW5kZXgtdC5zZWdtZW50SW5kZXgrMixpPXRoaXMuZWRnZS5nZXRDb29yZGluYXRlKGUuc2VnbWVudEluZGV4KSxpPWUuaXNJbnRlcmlvcigpfHwhZS5jb29yZC5lcXVhbHMyRChpKTtpfHxuLS07dmFyIHI9bmV3IEFycmF5KG4pLmZpbGwobnVsbCkscz0wO3JbcysrXT1uZXcgZCh0LmNvb3JkKTtmb3IodmFyIG89dC5zZWdtZW50SW5kZXgrMTtvPD1lLnNlZ21lbnRJbmRleDtvKyspcltzKytdPXRoaXMuZWRnZS5nZXRDb29yZGluYXRlKG8pO3JldHVybiBpJiYocltzXT1uZXcgZChlLmNvb3JkKSksbmV3IERlKHIsdGhpcy5lZGdlLmdldERhdGEoKSl9LGFkZDpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBiZSh0aGlzLmVkZ2UsdCxlLHRoaXMuZWRnZS5nZXRTZWdtZW50T2N0YW50KGUpKSxlPXRoaXMubm9kZU1hcC5nZXQobik7cmV0dXJuIG51bGwhPT1lPyhsLmlzVHJ1ZShlLmNvb3JkLmVxdWFsczJEKHQpLFwiRm91bmQgZXF1YWwgbm9kZXMgd2l0aCBkaWZmZXJlbnQgY29vcmRpbmF0ZXNcIiksZSk6KHRoaXMubm9kZU1hcC5wdXQobixuKSxuKX0sY2hlY2tTcGxpdEVkZ2VzQ29ycmVjdG5lc3M6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lZGdlLmdldENvb3JkaW5hdGVzKCksbj10LmdldCgwKS5nZXRDb29yZGluYXRlKDApO2lmKCFuLmVxdWFsczJEKGVbMF0pKXRocm93IG5ldyBwKFwiYmFkIHNwbGl0IGVkZ2Ugc3RhcnQgcG9pbnQgYXQgXCIrbik7dD10LmdldCh0LnNpemUoKS0xKS5nZXRDb29yZGluYXRlcygpLHQ9dFt0Lmxlbmd0aC0xXTtpZighdC5lcXVhbHMyRChlW2UubGVuZ3RoLTFdKSl0aHJvdyBuZXcgcChcImJhZCBzcGxpdCBlZGdlIGVuZCBwb2ludCBhdCBcIit0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gT2V9fSksZShfZS5wcm90b3R5cGUse25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuY3Vyck5vZGU/KHRoaXMuY3Vyck5vZGU9dGhpcy5uZXh0Tm9kZSx0aGlzLmN1cnJTZWdJbmRleD10aGlzLmN1cnJOb2RlLnNlZ21lbnRJbmRleCx0aGlzLnJlYWROZXh0Tm9kZSgpLHRoaXMuY3Vyck5vZGUpOm51bGw9PT10aGlzLm5leHROb2RlP251bGw6dGhpcy5uZXh0Tm9kZS5zZWdtZW50SW5kZXg9PT10aGlzLmN1cnJOb2RlLnNlZ21lbnRJbmRleD8odGhpcy5jdXJyTm9kZT10aGlzLm5leHROb2RlLHRoaXMuY3VyclNlZ0luZGV4PXRoaXMuY3Vyck5vZGUuc2VnbWVudEluZGV4LHRoaXMucmVhZE5leHROb2RlKCksdGhpcy5jdXJyTm9kZSk6KHRoaXMubmV4dE5vZGUuc2VnbWVudEluZGV4LHRoaXMuY3Vyck5vZGUuc2VnbWVudEluZGV4LG51bGwpfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24odGhpcy5nZXRDbGFzcygpLmdldE5hbWUoKSl9LGhhc05leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMubmV4dE5vZGV9LHJlYWROZXh0Tm9kZTpmdW5jdGlvbigpe3RoaXMubm9kZUl0Lmhhc05leHQoKT90aGlzLm5leHROb2RlPXRoaXMubm9kZUl0Lm5leHQoKTp0aGlzLm5leHROb2RlPW51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ZdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBfZX19KSxlKE1lLnByb3RvdHlwZSx7YWRkSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblttZV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE1lfX0pLGUoRGUucHJvdG90eXBlLHtnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c30sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy5sZW5ndGh9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHRzW3RdfSxpc0Nsb3NlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c1swXS5lcXVhbHModGhpcy5wdHNbdGhpcy5wdHMubGVuZ3RoLTFdKX0sZ2V0U2VnbWVudE9jdGFudDpmdW5jdGlvbih0KXtyZXR1cm4gdD09PXRoaXMucHRzLmxlbmd0aC0xPy0xOnRoaXMuc2FmZU9jdGFudCh0aGlzLmdldENvb3JkaW5hdGUodCksdGhpcy5nZXRDb29yZGluYXRlKHQrMSkpfSxzZXREYXRhOmZ1bmN0aW9uKHQpe3RoaXMuZGF0YT10fSxzYWZlT2N0YW50OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZXF1YWxzMkQoZSk/MDpwZS5vY3RhbnQodCxlKX0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LGFkZEludGVyc2VjdGlvbjpmdW5jdGlvbigpe3ZhciB0LGU7Mj09PWFyZ3VtZW50cy5sZW5ndGg/KHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMuYWRkSW50ZXJzZWN0aW9uTm9kZSh0LGUpKTo0PT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzFdLGU9YXJndW1lbnRzWzNdLGU9bmV3IGQoYXJndW1lbnRzWzBdLmdldEludGVyc2VjdGlvbihlKSksdGhpcy5hZGRJbnRlcnNlY3Rpb24oZSx0KSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFh0LnRvTGluZVN0cmluZyhuZXcgRnQodGhpcy5wdHMpKX0sZ2V0Tm9kZUxpc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlTGlzdH0sYWRkSW50ZXJzZWN0aW9uTm9kZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUsaT1uKzE7cmV0dXJuIGk8dGhpcy5wdHMubGVuZ3RoJiYoZT10aGlzLnB0c1tpXSx0LmVxdWFsczJEKGUpJiYobj1pKSksdGhpcy5ub2RlTGlzdC5hZGQodCxuKX0sYWRkSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPTA7aTx0LmdldEludGVyc2VjdGlvbk51bSgpO2krKyl0aGlzLmFkZEludGVyc2VjdGlvbih0LGUsbixpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bTWVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBEZX19KSxEZS5nZXROb2RlZFN1YnN0cmluZ3M9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IEk7cmV0dXJuIERlLmdldE5vZGVkU3Vic3RyaW5ncyh0LGUpLGV9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7aS5uZXh0KCkuZ2V0Tm9kZUxpc3QoKS5hZGRTcGxpdEVkZ2VzKG4pfX0sZShBZS5wcm90b3R5cGUse292ZXJsYXA6ZnVuY3Rpb24oKXt2YXIgdCxlLG47Mj09PWFyZ3VtZW50cy5sZW5ndGh8fDQ9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMV0sZT1hcmd1bWVudHNbMl0sbj1hcmd1bWVudHNbM10sYXJndW1lbnRzWzBdLmdldExpbmVTZWdtZW50KHQsdGhpcy5vdmVybGFwU2VnMSksZS5nZXRMaW5lU2VnbWVudChuLHRoaXMub3ZlcmxhcFNlZzIpLHRoaXMub3ZlcmxhcCh0aGlzLm92ZXJsYXBTZWcxLHRoaXMub3ZlcmxhcFNlZzIpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQWV9fSksZShGZS5wcm90b3R5cGUse2dldExpbmVTZWdtZW50OmZ1bmN0aW9uKHQsZSl7ZS5wMD10aGlzLnB0c1t0XSxlLnAxPXRoaXMucHRzW3QrMV19LGNvbXB1dGVTZWxlY3Q6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dGhpcy5wdHNbZV0scz10aGlzLnB0c1tuXTtpZihpLnRlbXBFbnYxLmluaXQocixzKSxuLWU9PTEpcmV0dXJuIGkuc2VsZWN0KHRoaXMsZSksbnVsbDtpZighdC5pbnRlcnNlY3RzKGkudGVtcEVudjEpKXJldHVybiBudWxsO3M9TWF0aC50cnVuYygoZStuKS8yKTtlPHMmJnRoaXMuY29tcHV0ZVNlbGVjdCh0LGUscyxpKSxzPG4mJnRoaXMuY29tcHV0ZVNlbGVjdCh0LHMsbixpKX0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZW5kLXRoaXMuc3RhcnQrMSkuZmlsbChudWxsKSxlPTAsbj10aGlzLnN0YXJ0O248PXRoaXMuZW5kO24rKyl0W2UrK109dGhpcy5wdHNbbl07cmV0dXJuIHR9LGNvbXB1dGVPdmVybGFwczpmdW5jdGlvbih0LGUpe3RoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwodGhpcy5zdGFydCx0aGlzLmVuZCx0LHQuc3RhcnQsdC5lbmQsZSl9LHNldElkOmZ1bmN0aW9uKHQpe3RoaXMuaWQ9dH0sc2VsZWN0OmZ1bmN0aW9uKHQsZSl7dGhpcy5jb21wdXRlU2VsZWN0KHQsdGhpcy5zdGFydCx0aGlzLmVuZCxlKX0sZ2V0RW52ZWxvcGU6ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiBudWxsPT09dGhpcy5lbnYmJih0PXRoaXMucHRzW3RoaXMuc3RhcnRdLGU9dGhpcy5wdHNbdGhpcy5lbmRdLHRoaXMuZW52PW5ldyBDKHQsZSkpLHRoaXMuZW52fSxnZXRFbmRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZH0sZ2V0U3RhcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0fSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dH0sZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZH0sY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWw6ZnVuY3Rpb24odCxlLG4saSxyLHMpe3ZhciBvPXRoaXMucHRzW3RdLGE9dGhpcy5wdHNbZV0sdT1uLnB0c1tpXSxsPW4ucHRzW3JdO2lmKGUtdD09MSYmci1pPT0xKXJldHVybiBzLm92ZXJsYXAodGhpcyx0LG4saSksbnVsbDtpZihzLnRlbXBFbnYxLmluaXQobyxhKSxzLnRlbXBFbnYyLmluaXQodSxsKSwhcy50ZW1wRW52MS5pbnRlcnNlY3RzKHMudGVtcEVudjIpKXJldHVybiBudWxsO3U9TWF0aC50cnVuYygodCtlKS8yKSxsPU1hdGgudHJ1bmMoKGkrcikvMik7dDx1JiYoaTxsJiZ0aGlzLmNvbXB1dGVPdmVybGFwc0ludGVybmFsKHQsdSxuLGksbCxzKSxsPHImJnRoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwodCx1LG4sbCxyLHMpKSx1PGUmJihpPGwmJnRoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwodSxlLG4saSxsLHMpLGw8ciYmdGhpcy5jb21wdXRlT3ZlcmxhcHNJbnRlcm5hbCh1LGUsbixsLHIscykpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBGZX19KSxlKEdlLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gR2V9fSksR2UuaXNOb3J0aGVybj1mdW5jdGlvbih0KXtyZXR1cm4gdD09PUdlLk5FfHx0PT09R2UuTld9LEdlLmlzT3Bwb3NpdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCE9PWUmJjI9PSh0LWUrNCklNH0sR2UuY29tbW9uSGFsZlBsYW5lPWZ1bmN0aW9uKHQsZSl7aWYodD09PWUpcmV0dXJuIHQ7aWYoMj09KHQtZSs0KSU0KXJldHVybi0xO3ZhciBuPXQ8ZT90OmU7cmV0dXJuIDA9PT1uJiYzPT09KGU8dD90OmUpPzM6bn0sR2UuaXNJbkhhbGZQbGFuZT1mdW5jdGlvbih0LGUpe3JldHVybiBlPT09R2UuU0U/dD09PUdlLlNFfHx0PT09R2UuU1c6dD09PWV8fHQ9PT1lKzF9LEdlLnF1YWRyYW50PWZ1bmN0aW9uKCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKDA9PT10JiYwPT09ZSl0aHJvdyBuZXcgYztyZXR1cm4gMDw9dD8wPD1lP0dlLk5FOkdlLlNFOjA8PWU/R2UuTlc6R2UuU1d9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIGQpe3Q9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKGUueD09PXQueCYmZS55PT09dC55KXRocm93IG5ldyBjO3JldHVybiBlLng+PXQueD9lLnk+PXQueT9HZS5ORTpHZS5TRTplLnk+PXQueT9HZS5OVzpHZS5TV319LEdlLk5FPTAsR2UuTlc9MSxHZS5TVz0yLEdlLlNFPTMsZShxZS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHFlfX0pLHFlLmdldENoYWluU3RhcnRJbmRpY2VzPWZ1bmN0aW9uKHQpe3ZhciBlPTAsbj1uZXcgSTtuLmFkZChuZXcgYihlKSk7ZG97dmFyIGk9cWUuZmluZENoYWluRW5kKHQsZSl9d2hpbGUobi5hZGQobmV3IGIoaSkpLChlPWkpPHQubGVuZ3RoLTEpO3JldHVybiBxZS50b0ludEFycmF5KG4pfSxxZS5maW5kQ2hhaW5FbmQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZTtuPHQubGVuZ3RoLTEmJnRbbl0uZXF1YWxzMkQodFtuKzFdKTspbisrO2lmKG4+PXQubGVuZ3RoLTEpcmV0dXJuIHQubGVuZ3RoLTE7Zm9yKHZhciBpPUdlLnF1YWRyYW50KHRbbl0sdFtuKzFdKSxyPWUrMTtyPHQubGVuZ3RoOyl7aWYoIXRbci0xXS5lcXVhbHMyRCh0W3JdKSlpZihHZS5xdWFkcmFudCh0W3ItMV0sdFtyXSkhPT1pKWJyZWFrO3IrK31yZXR1cm4gci0xfSxxZS5nZXRDaGFpbnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcWUuZ2V0Q2hhaW5zKGFyZ3VtZW50c1swXSxudWxsKTtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPW5ldyBJLGk9cWUuZ2V0Q2hhaW5TdGFydEluZGljZXModCkscj0wO3I8aS5sZW5ndGgtMTtyKyspe3ZhciBzPW5ldyBGZSh0LGlbcl0saVtyKzFdLGUpO24uYWRkKHMpfXJldHVybiBufX0scWUudG9JbnRBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyllW25dPXQuZ2V0KG4pLmludFZhbHVlKCk7cmV0dXJuIGV9LGUoQmUucHJvdG90eXBlLHtjb21wdXRlTm9kZXM6ZnVuY3Rpb24odCl7fSxnZXROb2RlZFN1YnN0cmluZ3M6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEJlfX0pLGUoemUucHJvdG90eXBlLHtzZXRTZWdtZW50SW50ZXJzZWN0b3I6ZnVuY3Rpb24odCl7dGhpcy5zZWdJbnQ9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bQmVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB6ZX19KSxhKFZlLHplKSxlKFZlLnByb3RvdHlwZSx7Z2V0TW9ub3RvbmVDaGFpbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb25vQ2hhaW5zfSxnZXROb2RlZFN1YnN0cmluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gRGUuZ2V0Tm9kZWRTdWJzdHJpbmdzKHRoaXMubm9kZWRTZWdTdHJpbmdzKX0sZ2V0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleH0sYWRkOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1xZS5nZXRDaGFpbnModC5nZXRDb29yZGluYXRlcygpLHQpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtuLnNldElkKHRoaXMuaWRDb3VudGVyKyspLHRoaXMuaW5kZXguaW5zZXJ0KG4uZ2V0RW52ZWxvcGUoKSxuKSx0aGlzLm1vbm9DaGFpbnMuYWRkKG4pfX0sY29tcHV0ZU5vZGVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0odGhpcy5ub2RlZFNlZ1N0cmluZ3M9dCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspdGhpcy5hZGQoZS5uZXh0KCkpO3RoaXMuaW50ZXJzZWN0Q2hhaW5zKCl9LGludGVyc2VjdENoYWluczpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcga2UodGhpcy5zZWdJbnQpLGU9dGhpcy5tb25vQ2hhaW5zLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPXRoaXMuaW5kZXgucXVlcnkobi5nZXRFbnZlbG9wZSgpKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7aWYoci5nZXRJZCgpPm4uZ2V0SWQoKSYmKG4uY29tcHV0ZU92ZXJsYXBzKHIsdCksdGhpcy5uT3ZlcmxhcHMrKyksdGhpcy5zZWdJbnQuaXNEb25lKCkpcmV0dXJuIG51bGx9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBWZX19KSxhKGtlLEFlKSxlKGtlLnByb3RvdHlwZSx7b3ZlcmxhcDpmdW5jdGlvbigpe2lmKDQhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBBZS5wcm90b3R5cGUub3ZlcmxhcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzFdLGU9YXJndW1lbnRzWzJdLG49YXJndW1lbnRzWzNdLGk9YXJndW1lbnRzWzBdLmdldENvbnRleHQoKSxlPWUuZ2V0Q29udGV4dCgpO3RoaXMuc2kucHJvY2Vzc0ludGVyc2VjdGlvbnMoaSx0LGUsbil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGtlfX0pLFZlLlNlZ21lbnRPdmVybGFwQWN0aW9uPWtlLGEoWWUscCksZShZZS5wcm90b3R5cGUse2dldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWWV9fSksWWUubXNnV2l0aENvb3JkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPT1lP3QrXCIgWyBcIitlK1wiIF1cIjp0fSxlKFVlLnByb3RvdHlwZSx7cHJvY2Vzc0ludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4saSl7fSxpc0RvbmU6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFVlfX0pLGUoWGUucHJvdG90eXBlLHtnZXRJbnRlcmlvckludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9ufSxzZXRDaGVja0VuZFNlZ21lbnRzT25seTpmdW5jdGlvbih0KXt0aGlzLmlzQ2hlY2tFbmRTZWdtZW50c09ubHk9dH0sZ2V0SW50ZXJzZWN0aW9uU2VnbWVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRTZWdtZW50c30sY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25Db3VudH0sZ2V0SW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyc2VjdGlvbnN9LHNldEZpbmRBbGxJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQpe3RoaXMuZmluZEFsbEludGVyc2VjdGlvbnM9dH0sc2V0S2VlcEludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCl7dGhpcy5rZWVwSW50ZXJzZWN0aW9ucz10fSxwcm9jZXNzSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0LGUsbixpKXtpZighdGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucyYmdGhpcy5oYXNJbnRlcnNlY3Rpb24oKSlyZXR1cm4gbnVsbDtpZih0PT09biYmZT09PWkpcmV0dXJuIG51bGw7aWYodGhpcy5pc0NoZWNrRW5kU2VnbWVudHNPbmx5JiYhKHRoaXMuaXNFbmRTZWdtZW50KHQsZSl8fHRoaXMuaXNFbmRTZWdtZW50KG4saSkpKXJldHVybiBudWxsO3ZhciByPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlXSx0PXQuZ2V0Q29vcmRpbmF0ZXMoKVtlKzFdLGU9bi5nZXRDb29yZGluYXRlcygpW2ldLGk9bi5nZXRDb29yZGluYXRlcygpW2krMV07dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHIsdCxlLGkpLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJnRoaXMubGkuaXNJbnRlcmlvckludGVyc2VjdGlvbigpJiYodGhpcy5pbnRTZWdtZW50cz1uZXcgQXJyYXkoNCkuZmlsbChudWxsKSx0aGlzLmludFNlZ21lbnRzWzBdPXIsdGhpcy5pbnRTZWdtZW50c1sxXT10LHRoaXMuaW50U2VnbWVudHNbMl09ZSx0aGlzLmludFNlZ21lbnRzWzNdPWksdGhpcy5pbnRlcmlvckludGVyc2VjdGlvbj10aGlzLmxpLmdldEludGVyc2VjdGlvbigwKSx0aGlzLmtlZXBJbnRlcnNlY3Rpb25zJiZ0aGlzLmludGVyc2VjdGlvbnMuYWRkKHRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb24pLHRoaXMuaW50ZXJzZWN0aW9uQ291bnQrKyl9LGlzRW5kU2VnbWVudDpmdW5jdGlvbih0LGUpe3JldHVybiAwPT09ZXx8ZT49dC5zaXplKCktMn0saGFzSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmludGVyaW9ySW50ZXJzZWN0aW9ufSxpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucyYmbnVsbCE9PXRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb259LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW1VlXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWGV9fSksWGUuY3JlYXRlQWxsSW50ZXJzZWN0aW9uc0ZpbmRlcj1mdW5jdGlvbih0KXt0PW5ldyBYZSh0KTtyZXR1cm4gdC5zZXRGaW5kQWxsSW50ZXJzZWN0aW9ucyghMCksdH0sWGUuY3JlYXRlQW55SW50ZXJzZWN0aW9uRmluZGVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWGUodCl9LFhlLmNyZWF0ZUludGVyc2VjdGlvbkNvdW50ZXI9ZnVuY3Rpb24odCl7dD1uZXcgWGUodCk7cmV0dXJuIHQuc2V0RmluZEFsbEludGVyc2VjdGlvbnMoITApLHQuc2V0S2VlcEludGVyc2VjdGlvbnMoITEpLHR9LGUoSGUucHJvdG90eXBlLHtleGVjdXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnNlZ0ludD9udWxsOnZvaWQgdGhpcy5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucygpfSxnZXRJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnSW50LmdldEludGVyc2VjdGlvbnMoKX0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4ZWN1dGUoKSx0aGlzLl9pc1ZhbGlkfSxzZXRGaW5kQWxsSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0KXt0aGlzLmZpbmRBbGxJbnRlcnNlY3Rpb25zPXR9LGNoZWNrSW50ZXJpb3JJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKCl7dGhpcy5faXNWYWxpZD0hMCx0aGlzLnNlZ0ludD1uZXcgWGUodGhpcy5saSksdGhpcy5zZWdJbnQuc2V0RmluZEFsbEludGVyc2VjdGlvbnModGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucyk7dmFyIHQ9bmV3IFZlO3JldHVybiB0LnNldFNlZ21lbnRJbnRlcnNlY3Rvcih0aGlzLnNlZ0ludCksdC5jb21wdXRlTm9kZXModGhpcy5zZWdTdHJpbmdzKSx0aGlzLnNlZ0ludC5oYXNJbnRlcnNlY3Rpb24oKT8odGhpcy5faXNWYWxpZD0hMSxudWxsKTp2b2lkIDB9LGNoZWNrVmFsaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV4ZWN1dGUoKSwhdGhpcy5faXNWYWxpZCl0aHJvdyBuZXcgWWUodGhpcy5nZXRFcnJvck1lc3NhZ2UoKSx0aGlzLnNlZ0ludC5nZXRJbnRlcmlvckludGVyc2VjdGlvbigpKX0sZ2V0RXJyb3JNZXNzYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy5faXNWYWxpZClyZXR1cm5cIm5vIGludGVyc2VjdGlvbnMgZm91bmRcIjt2YXIgdD10aGlzLnNlZ0ludC5nZXRJbnRlcnNlY3Rpb25TZWdtZW50cygpO3JldHVyblwiZm91bmQgbm9uLW5vZGVkIGludGVyc2VjdGlvbiBiZXR3ZWVuIFwiK1h0LnRvTGluZVN0cmluZyh0WzBdLHRbMV0pK1wiIGFuZCBcIitYdC50b0xpbmVTdHJpbmcodFsyXSx0WzNdKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSGV9fSksSGUuY29tcHV0ZUludGVyc2VjdGlvbnM9ZnVuY3Rpb24odCl7dD1uZXcgSGUodCk7cmV0dXJuIHQuc2V0RmluZEFsbEludGVyc2VjdGlvbnMoITApLHQuaXNWYWxpZCgpLHQuZ2V0SW50ZXJzZWN0aW9ucygpfSxlKFdlLnByb3RvdHlwZSx7Y2hlY2tWYWxpZDpmdW5jdGlvbigpe3RoaXMubnYuY2hlY2tWYWxpZCgpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBXZX19KSxXZS50b1NlZ21lbnRTdHJpbmdzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuYWRkKG5ldyB5ZShpLmdldENvb3JkaW5hdGVzKCksaSkpfXJldHVybiBlfSxXZS5jaGVja1ZhbGlkPWZ1bmN0aW9uKHQpe25ldyBXZSh0KS5jaGVja1ZhbGlkKCl9LGUoamUucHJvdG90eXBlLHttYXA6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJLG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dGhpcy5tYXBPcC5tYXAodC5nZXRHZW9tZXRyeU4obikpO2kuaXNFbXB0eSgpfHxlLmFkZChpKX1yZXR1cm4gdC5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKFl0LnRvR2VvbWV0cnlBcnJheShlKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGplfX0pLGplLm1hcD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgamUoZSkubWFwKHQpfSxlKEtlLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gS2V9fSksS2Uub3Bwb3NpdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1LZS5MRUZUP0tlLlJJR0hUOnQ9PT1LZS5SSUdIVD9LZS5MRUZUOnR9LEtlLk9OPTAsS2UuTEVGVD0xLEtlLlJJR0hUPTIsZShaZS5wcm90b3R5cGUse3NldEFsbExvY2F0aW9uczpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubG9jYXRpb24ubGVuZ3RoO2UrKyl0aGlzLmxvY2F0aW9uW2VdPXR9LGlzTnVsbDpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5sb2NhdGlvbi5sZW5ndGg7dCsrKWlmKHRoaXMubG9jYXRpb25bdF0hPT1MLk5PTkUpcmV0dXJuITE7cmV0dXJuITB9LHNldEFsbExvY2F0aW9uc0lmTnVsbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubG9jYXRpb24ubGVuZ3RoO2UrKyl0aGlzLmxvY2F0aW9uW2VdPT09TC5OT05FJiYodGhpcy5sb2NhdGlvbltlXT10KX0saXNMaW5lOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PT10aGlzLmxvY2F0aW9uLmxlbmd0aH0sbWVyZ2U6ZnVuY3Rpb24odCl7dmFyIGU7dC5sb2NhdGlvbi5sZW5ndGg+dGhpcy5sb2NhdGlvbi5sZW5ndGgmJigoZT1uZXcgQXJyYXkoMykuZmlsbChudWxsKSlbS2UuT05dPXRoaXMubG9jYXRpb25bS2UuT05dLGVbS2UuTEVGVF09TC5OT05FLGVbS2UuUklHSFRdPUwuTk9ORSx0aGlzLmxvY2F0aW9uPWUpO2Zvcih2YXIgbj0wO248dGhpcy5sb2NhdGlvbi5sZW5ndGg7bisrKXRoaXMubG9jYXRpb25bbl09PT1MLk5PTkUmJm48dC5sb2NhdGlvbi5sZW5ndGgmJih0aGlzLmxvY2F0aW9uW25dPXQubG9jYXRpb25bbl0pfSxnZXRMb2NhdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhdGlvbn0sZmxpcDpmdW5jdGlvbigpe2lmKHRoaXMubG9jYXRpb24ubGVuZ3RoPD0xKXJldHVybiBudWxsO3ZhciB0PXRoaXMubG9jYXRpb25bS2UuTEVGVF07dGhpcy5sb2NhdGlvbltLZS5MRUZUXT10aGlzLmxvY2F0aW9uW0tlLlJJR0hUXSx0aGlzLmxvY2F0aW9uW0tlLlJJR0hUXT10fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PW5ldyBQO3JldHVybiAxPHRoaXMubG9jYXRpb24ubGVuZ3RoJiZ0LmFwcGVuZChMLnRvTG9jYXRpb25TeW1ib2wodGhpcy5sb2NhdGlvbltLZS5MRUZUXSkpLHQuYXBwZW5kKEwudG9Mb2NhdGlvblN5bWJvbCh0aGlzLmxvY2F0aW9uW0tlLk9OXSkpLDE8dGhpcy5sb2NhdGlvbi5sZW5ndGgmJnQuYXBwZW5kKEwudG9Mb2NhdGlvblN5bWJvbCh0aGlzLmxvY2F0aW9uW0tlLlJJR0hUXSkpLHQudG9TdHJpbmcoKX0sc2V0TG9jYXRpb25zOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLmxvY2F0aW9uW0tlLk9OXT10LHRoaXMubG9jYXRpb25bS2UuTEVGVF09ZSx0aGlzLmxvY2F0aW9uW0tlLlJJR0hUXT1ufSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8dGhpcy5sb2NhdGlvbi5sZW5ndGg/dGhpcy5sb2NhdGlvblt0XTpMLk5PTkV9LGlzQXJlYTpmdW5jdGlvbigpe3JldHVybiAxPHRoaXMubG9jYXRpb24ubGVuZ3RofSxpc0FueU51bGw6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMubG9jYXRpb24ubGVuZ3RoO3QrKylpZih0aGlzLmxvY2F0aW9uW3RdPT09TC5OT05FKXJldHVybiEwO3JldHVybiExfSxzZXRMb2NhdGlvbjpmdW5jdGlvbigpe3ZhciB0LGU7MT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLHRoaXMuc2V0TG9jYXRpb24oS2UuT04sZSkpOjI9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sdGhpcy5sb2NhdGlvblt0XT1lKX0saW5pdDpmdW5jdGlvbih0KXt0aGlzLmxvY2F0aW9uPW5ldyBBcnJheSh0KS5maWxsKG51bGwpLHRoaXMuc2V0QWxsTG9jYXRpb25zKEwuTk9ORSl9LGlzRXF1YWxPblNpZGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5sb2NhdGlvbltlXT09PXQubG9jYXRpb25bZV19LGFsbFBvc2l0aW9uc0VxdWFsOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhdGlvbi5sZW5ndGg7ZSsrKWlmKHRoaXMubG9jYXRpb25bZV0hPT10KXJldHVybiExO3JldHVybiEwfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBaZX19KSxlKEplLnByb3RvdHlwZSx7Z2V0R2VvbWV0cnlDb3VudDpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuZWx0WzBdLmlzTnVsbCgpfHx0KyssdGhpcy5lbHRbMV0uaXNOdWxsKCl8fHQrKyx0fSxzZXRBbGxMb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXt0aGlzLmVsdFt0XS5zZXRBbGxMb2NhdGlvbnMoZSl9LGlzTnVsbDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbHRbdF0uaXNOdWxsKCl9LHNldEFsbExvY2F0aW9uc0lmTnVsbDpmdW5jdGlvbigpe3ZhciB0LGU7MT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLHRoaXMuc2V0QWxsTG9jYXRpb25zSWZOdWxsKDAsZSksdGhpcy5zZXRBbGxMb2NhdGlvbnNJZk51bGwoMSxlKSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLmVsdFt0XS5zZXRBbGxMb2NhdGlvbnNJZk51bGwoZSkpfSxpc0xpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWx0W3RdLmlzTGluZSgpfSxtZXJnZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPDI7ZSsrKW51bGw9PT10aGlzLmVsdFtlXSYmbnVsbCE9PXQuZWx0W2VdP3RoaXMuZWx0W2VdPW5ldyBaZSh0LmVsdFtlXSk6dGhpcy5lbHRbZV0ubWVyZ2UodC5lbHRbZV0pfSxmbGlwOmZ1bmN0aW9uKCl7dGhpcy5lbHRbMF0uZmxpcCgpLHRoaXMuZWx0WzFdLmZsaXAoKX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmVsdFt0XS5nZXQoS2UuT04pfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sdD1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuZWx0W2VdLmdldCh0KX19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFA7cmV0dXJuIG51bGwhPT10aGlzLmVsdFswXSYmKHQuYXBwZW5kKFwiQTpcIiksdC5hcHBlbmQodGhpcy5lbHRbMF0udG9TdHJpbmcoKSkpLG51bGwhPT10aGlzLmVsdFsxXSYmKHQuYXBwZW5kKFwiIEI6XCIpLHQuYXBwZW5kKHRoaXMuZWx0WzFdLnRvU3RyaW5nKCkpKSx0LnRvU3RyaW5nKCl9LGlzQXJlYTpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmVsdFswXS5pc0FyZWEoKXx8dGhpcy5lbHRbMV0uaXNBcmVhKCk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5lbHRbdF0uaXNBcmVhKCl9fSxpc0FueU51bGw6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWx0W3RdLmlzQW55TnVsbCgpfSxzZXRMb2NhdGlvbjpmdW5jdGlvbigpe3ZhciB0LGUsbjsyPT09YXJndW1lbnRzLmxlbmd0aD8oZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sdGhpcy5lbHRbZV0uc2V0TG9jYXRpb24oS2UuT04sbikpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sdGhpcy5lbHRbdF0uc2V0TG9jYXRpb24oZSxuKSl9LGlzRXF1YWxPblNpZGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbHRbMF0uaXNFcXVhbE9uU2lkZSh0LmVsdFswXSxlKSYmdGhpcy5lbHRbMV0uaXNFcXVhbE9uU2lkZSh0LmVsdFsxXSxlKX0sYWxsUG9zaXRpb25zRXF1YWw6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbHRbdF0uYWxsUG9zaXRpb25zRXF1YWwoZSl9LHRvTGluZTpmdW5jdGlvbih0KXt0aGlzLmVsdFt0XS5pc0FyZWEoKSYmKHRoaXMuZWx0W3RdPW5ldyBaZSh0aGlzLmVsdFt0XS5sb2NhdGlvblswXSkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBKZX19KSxKZS50b0xpbmVMYWJlbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEplKEwuTk9ORSksbj0wO248MjtuKyspZS5zZXRMb2NhdGlvbihuLHQuZ2V0TG9jYXRpb24obikpO3JldHVybiBlfSxlKFFlLnByb3RvdHlwZSx7Y29tcHV0ZVJpbmc6ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5yaW5nKXJldHVybiBudWxsO2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5wdHMuc2l6ZSgpKS5maWxsKG51bGwpLGU9MDtlPHRoaXMucHRzLnNpemUoKTtlKyspdFtlXT10aGlzLnB0cy5nZXQoZSk7dGhpcy5yaW5nPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcodCksdGhpcy5faXNIb2xlPVp0LmlzQ0NXKHRoaXMucmluZy5nZXRDb29yZGluYXRlcygpKX0saXNJc29sYXRlZDpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5sYWJlbC5nZXRHZW9tZXRyeUNvdW50KCl9LGNvbXB1dGVQb2ludHM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGFydERlPXQsbj0hMDtkb3tpZihudWxsPT09ZSl0aHJvdyBuZXcgWWUoXCJGb3VuZCBudWxsIERpcmVjdGVkRWRnZVwiKTtpZihlLmdldEVkZ2VSaW5nKCk9PT10aGlzKXRocm93IG5ldyBZZShcIkRpcmVjdGVkIEVkZ2UgdmlzaXRlZCB0d2ljZSBkdXJpbmcgcmluZy1idWlsZGluZyBhdCBcIitlLmdldENvb3JkaW5hdGUoKSk7dGhpcy5lZGdlcy5hZGQoZSk7dmFyIGk9ZS5nZXRMYWJlbCgpfXdoaWxlKGwuaXNUcnVlKGkuaXNBcmVhKCkpLHRoaXMubWVyZ2VMYWJlbChpKSx0aGlzLmFkZFBvaW50cyhlLmdldEVkZ2UoKSxlLmlzRm9yd2FyZCgpLG4pLG49ITEsdGhpcy5zZXRFZGdlUmluZyhlLHRoaXMpLChlPXRoaXMuZ2V0TmV4dChlKSkhPT10aGlzLnN0YXJ0RGUpfSxnZXRMaW5lYXJSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmluZ30sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wdHMuZ2V0KHQpfSxjb21wdXRlTWF4Tm9kZURlZ3JlZTpmdW5jdGlvbigpe3RoaXMubWF4Tm9kZURlZ3JlZT0wO3ZhciB0PXRoaXMuc3RhcnREZTtkb3t2YXIgZT10LmdldE5vZGUoKS5nZXRFZGdlcygpLmdldE91dGdvaW5nRGVncmVlKHRoaXMpfXdoaWxlKGU+dGhpcy5tYXhOb2RlRGVncmVlJiYodGhpcy5tYXhOb2RlRGVncmVlPWUpLCh0PXRoaXMuZ2V0TmV4dCh0KSkhPT10aGlzLnN0YXJ0RGUpO3RoaXMubWF4Tm9kZURlZ3JlZSo9Mn0sYWRkUG9pbnRzOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldENvb3JkaW5hdGVzKCk7aWYoZSl7dmFyIHI9MTtuJiYocj0wKTtmb3IodmFyIHM9cjtzPGkubGVuZ3RoO3MrKyl0aGlzLnB0cy5hZGQoaVtzXSl9ZWxzZXtyPWkubGVuZ3RoLTI7biYmKHI9aS5sZW5ndGgtMSk7Zm9yKHM9cjswPD1zO3MtLSl0aGlzLnB0cy5hZGQoaVtzXSl9fSxpc0hvbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNIb2xlfSxzZXRJblJlc3VsdDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnN0YXJ0RGU7dC5nZXRFZGdlKCkuc2V0SW5SZXN1bHQoITApLCh0PXQuZ2V0TmV4dCgpKSE9PXRoaXMuc3RhcnREZTspO30sY29udGFpbnNQb2ludDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldExpbmVhclJpbmcoKTtpZighZS5nZXRFbnZlbG9wZUludGVybmFsKCkuY29udGFpbnModCkpcmV0dXJuITE7aWYoIVp0LmlzUG9pbnRJblJpbmcodCxlLmdldENvb3JkaW5hdGVzKCkpKXJldHVybiExO2Zvcih2YXIgbj10aGlzLmhvbGVzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXtpZihuLm5leHQoKS5jb250YWluc1BvaW50KHQpKXJldHVybiExfXJldHVybiEwfSxhZGRIb2xlOmZ1bmN0aW9uKHQpe3RoaXMuaG9sZXMuYWRkKHQpfSxpc1NoZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnNoZWxsfSxnZXRMYWJlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsfSxnZXRFZGdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzfSxnZXRNYXhOb2RlRGVncmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Tm9kZURlZ3JlZTwwJiZ0aGlzLmNvbXB1dGVNYXhOb2RlRGVncmVlKCksdGhpcy5tYXhOb2RlRGVncmVlfSxnZXRTaGVsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoZWxsfSxtZXJnZUxhYmVsOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm1lcmdlTGFiZWwodCwwKSx0aGlzLm1lcmdlTGFiZWwodCwxKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMV0sdD1hcmd1bWVudHNbMF0uZ2V0TG9jYXRpb24oZSxLZS5SSUdIVCk7cmV0dXJuIHQ9PT1MLk5PTkU/bnVsbDp0aGlzLmxhYmVsLmdldExvY2F0aW9uKGUpPT09TC5OT05FPyh0aGlzLmxhYmVsLnNldExvY2F0aW9uKGUsdCksbnVsbCk6dm9pZCAwfX0sc2V0U2hlbGw6ZnVuY3Rpb24odCl7bnVsbCE9PSh0aGlzLnNoZWxsPXQpJiZ0LmFkZEhvbGUodGhpcyl9LHRvUG9seWdvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHRoaXMuaG9sZXMuc2l6ZSgpKS5maWxsKG51bGwpLG49MDtuPHRoaXMuaG9sZXMuc2l6ZSgpO24rKyllW25dPXRoaXMuaG9sZXMuZ2V0KG4pLmdldExpbmVhclJpbmcoKTtyZXR1cm4gdC5jcmVhdGVQb2x5Z29uKHRoaXMuZ2V0TGluZWFyUmluZygpLGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBRZX19KSxhKCRlLFFlKSxlKCRlLnByb3RvdHlwZSx7c2V0RWRnZVJpbmc6ZnVuY3Rpb24odCxlKXt0LnNldE1pbkVkZ2VSaW5nKGUpfSxnZXROZXh0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldE5leHRNaW4oKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJGV9fSksYSh0bixRZSksZSh0bi5wcm90b3R5cGUse2J1aWxkTWluaW1hbFJpbmdzOmZ1bmN0aW9uKCl7dmFyIHQsZT1uZXcgSSxuPXRoaXMuc3RhcnREZTtkb3t9d2hpbGUobnVsbD09PW4uZ2V0TWluRWRnZVJpbmcoKSYmKHQ9bmV3ICRlKG4sdGhpcy5nZW9tZXRyeUZhY3RvcnkpLGUuYWRkKHQpKSwobj1uLmdldE5leHQoKSkhPT10aGlzLnN0YXJ0RGUpO3JldHVybiBlfSxzZXRFZGdlUmluZzpmdW5jdGlvbih0LGUpe3Quc2V0RWRnZVJpbmcoZSl9LGxpbmtEaXJlY3RlZEVkZ2VzRm9yTWluaW1hbEVkZ2VSaW5nczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RhcnREZTtkb3t9d2hpbGUodC5nZXROb2RlKCkuZ2V0RWRnZXMoKS5saW5rTWluaW1hbERpcmVjdGVkRWRnZXModGhpcyksKHQ9dC5nZXROZXh0KCkpIT09dGhpcy5zdGFydERlKX0sZ2V0TmV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXROZXh0KCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRufX0pLGUoZW4ucHJvdG90eXBlLHtzZXRWaXNpdGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmlzaXRlZD10fSxzZXRJblJlc3VsdDpmdW5jdGlvbih0KXt0aGlzLl9pc0luUmVzdWx0PXR9LGlzQ292ZXJlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvdmVyZWR9LGlzQ292ZXJlZFNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvdmVyZWRTZXR9LHNldExhYmVsOmZ1bmN0aW9uKHQpe3RoaXMubGFiZWw9dH0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sc2V0Q292ZXJlZDpmdW5jdGlvbih0KXt0aGlzLl9pc0NvdmVyZWQ9dCx0aGlzLl9pc0NvdmVyZWRTZXQ9ITB9LHVwZGF0ZUlNOmZ1bmN0aW9uKHQpe2wuaXNUcnVlKDI8PXRoaXMubGFiZWwuZ2V0R2VvbWV0cnlDb3VudCgpLFwiZm91bmQgcGFydGlhbCBsYWJlbFwiKSx0aGlzLmNvbXB1dGVJTSh0KX0saXNJblJlc3VsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luUmVzdWx0fSxpc1Zpc2l0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpdGVkfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBlbn19KSxhKG5uLGVuKSxlKG5uLnByb3RvdHlwZSx7aXNJbmNpZGVudEVkZ2VJblJlc3VsdDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdldEVkZ2VzKCkuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7aWYodC5uZXh0KCkuZ2V0RWRnZSgpLmlzSW5SZXN1bHQoKSlyZXR1cm4hMH1yZXR1cm4hMX0saXNJc29sYXRlZDpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5sYWJlbC5nZXRHZW9tZXRyeUNvdW50KCl9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZH0scHJpbnQ6ZnVuY3Rpb24odCl7dC5wcmludGxuKFwibm9kZSBcIit0aGlzLmNvb3JkK1wiIGxibDogXCIrdGhpcy5sYWJlbCl9LGNvbXB1dGVJTTpmdW5jdGlvbih0KXt9LGNvbXB1dGVNZXJnZWRMb2NhdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBuPUwuTk9ORSxuPXRoaXMubGFiZWwuZ2V0TG9jYXRpb24oZSk7cmV0dXJuIHQuaXNOdWxsKGUpfHwoZT10LmdldExvY2F0aW9uKGUpLG4hPT1MLkJPVU5EQVJZJiYobj1lKSksbn0sc2V0TGFiZWw6ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZW4ucHJvdG90eXBlLnNldExhYmVsLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07bnVsbD09PXRoaXMubGFiZWw/dGhpcy5sYWJlbD1uZXcgSmUodCxlKTp0aGlzLmxhYmVsLnNldExvY2F0aW9uKHQsZSl9LGdldEVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXN9LG1lcmdlTGFiZWw6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIG5uKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5tZXJnZUxhYmVsKHQubGFiZWwpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBKZSlmb3IodmFyIGU9YXJndW1lbnRzWzBdLG49MDtuPDI7bisrKXt2YXIgaT10aGlzLmNvbXB1dGVNZXJnZWRMb2NhdGlvbihlLG4pO3RoaXMubGFiZWwuZ2V0TG9jYXRpb24obik9PT1MLk5PTkUmJnRoaXMubGFiZWwuc2V0TG9jYXRpb24obixpKX19LGFkZDpmdW5jdGlvbih0KXt0aGlzLmVkZ2VzLmluc2VydCh0KSx0LnNldE5vZGUodGhpcyl9LHNldExhYmVsQm91bmRhcnk6ZnVuY3Rpb24odCl7aWYobnVsbD09PXRoaXMubGFiZWwpcmV0dXJuIG51bGw7dmFyIGU9TC5OT05FO251bGwhPT10aGlzLmxhYmVsJiYoZT10aGlzLmxhYmVsLmdldExvY2F0aW9uKHQpKTt2YXIgbj1udWxsO3N3aXRjaChlKXtjYXNlIEwuQk9VTkRBUlk6bj1MLklOVEVSSU9SO2JyZWFrO2Nhc2UgTC5JTlRFUklPUjpuPUwuQk9VTkRBUlk7YnJlYWs7ZGVmYXVsdDpuPUwuQk9VTkRBUll9dGhpcy5sYWJlbC5zZXRMb2NhdGlvbih0LG4pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBubn19KSxlKHJuLnByb3RvdHlwZSx7ZmluZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub2RlTWFwLmdldCh0KX0sYWRkTm9kZTpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBudWxsPT09KGU9dGhpcy5ub2RlTWFwLmdldCh0KSkmJihlPXRoaXMubm9kZUZhY3QuY3JlYXRlTm9kZSh0KSx0aGlzLm5vZGVNYXAucHV0KHQsZSkpLGV9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBubil7dmFyIGUsdD1hcmd1bWVudHNbMF07cmV0dXJuIG51bGw9PT0oZT10aGlzLm5vZGVNYXAuZ2V0KHQuZ2V0Q29vcmRpbmF0ZSgpKSk/KHRoaXMubm9kZU1hcC5wdXQodC5nZXRDb29yZGluYXRlKCksdCksdCk6KGUubWVyZ2VMYWJlbCh0KSxlKX19LHByaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5wcmludCh0KX19LGl0ZXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC52YWx1ZXMoKS5pdGVyYXRvcigpfSx2YWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlTWFwLnZhbHVlcygpfSxnZXRCb3VuZGFyeU5vZGVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KT09PUwuQk9VTkRBUlkmJmUuYWRkKGkpfXJldHVybiBlfSxhZGQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRDb29yZGluYXRlKCk7dGhpcy5hZGROb2RlKGUpLmFkZCh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcm59fSksZShzbi5wcm90b3R5cGUse2NvbXBhcmVEaXJlY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZHg9PT10LmR4JiZ0aGlzLmR5PT09dC5keT8wOnRoaXMucXVhZHJhbnQ+dC5xdWFkcmFudD8xOnRoaXMucXVhZHJhbnQ8dC5xdWFkcmFudD8tMTpadC5jb21wdXRlT3JpZW50YXRpb24odC5wMCx0LnAxLHRoaXMucDEpfSxnZXREeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmR5fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDB9LHNldE5vZGU6ZnVuY3Rpb24odCl7dGhpcy5ub2RlPXR9LHByaW50OmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguYXRhbjIodGhpcy5keSx0aGlzLmR4KSxuPXRoaXMuZ2V0Q2xhc3MoKS5nZXROYW1lKCksaT1uLmxhc3RJbmRleE9mKFwiLlwiKSxpPW4uc3Vic3RyaW5nKGkrMSk7dC5wcmludChcIiAgXCIraStcIjogXCIrdGhpcy5wMCtcIiAtIFwiK3RoaXMucDErXCIgXCIrdGhpcy5xdWFkcmFudCtcIjpcIitlK1wiICAgXCIrdGhpcy5sYWJlbCl9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wYXJlRGlyZWN0aW9uKHQpfSxnZXREaXJlY3RlZENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMX0sZ2V0RHg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5keH0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sZ2V0RWRnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2V9LGdldFF1YWRyYW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVhZHJhbnR9LGdldE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PU1hdGguYXRhbjIodGhpcy5keSx0aGlzLmR4KSxlPXRoaXMuZ2V0Q2xhc3MoKS5nZXROYW1lKCksbj1lLmxhc3RJbmRleE9mKFwiLlwiKTtyZXR1cm5cIiAgXCIrZS5zdWJzdHJpbmcobisxKStcIjogXCIrdGhpcy5wMCtcIiAtIFwiK3RoaXMucDErXCIgXCIrdGhpcy5xdWFkcmFudCtcIjpcIit0K1wiICAgXCIrdGhpcy5sYWJlbH0sY29tcHV0ZUxhYmVsOmZ1bmN0aW9uKHQpe30saW5pdDpmdW5jdGlvbih0LGUpe3RoaXMucDA9dCx0aGlzLnAxPWUsdGhpcy5keD1lLngtdC54LHRoaXMuZHk9ZS55LXQueSx0aGlzLnF1YWRyYW50PUdlLnF1YWRyYW50KHRoaXMuZHgsdGhpcy5keSksbC5pc1RydWUoISgwPT09dGhpcy5keCYmMD09PXRoaXMuZHkpLFwiRWRnZUVuZCB3aXRoIGlkZW50aWNhbCBlbmRwb2ludHMgZm91bmRcIil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBzbn19KSxhKG9uLHNuKSxlKG9uLnByb3RvdHlwZSx7Z2V0TmV4dE1pbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHRNaW59LGdldERlcHRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlcHRoW3RdfSxzZXRWaXNpdGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmlzaXRlZD10fSxjb21wdXRlRGlyZWN0ZWRMYWJlbDpmdW5jdGlvbigpe3RoaXMubGFiZWw9bmV3IEplKHRoaXMuZWRnZS5nZXRMYWJlbCgpKSx0aGlzLl9pc0ZvcndhcmR8fHRoaXMubGFiZWwuZmxpcCgpfSxnZXROZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dH0sc2V0RGVwdGg6ZnVuY3Rpb24odCxlKXtpZigtOTk5IT09dGhpcy5kZXB0aFt0XSYmdGhpcy5kZXB0aFt0XSE9PWUpdGhyb3cgbmV3IFllKFwiYXNzaWduZWQgZGVwdGhzIGRvIG5vdCBtYXRjaFwiLHRoaXMuZ2V0Q29vcmRpbmF0ZSgpKTt0aGlzLmRlcHRoW3RdPWV9LGlzSW50ZXJpb3JBcmVhRWRnZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0hMCxlPTA7ZTwyO2UrKyl0aGlzLmxhYmVsLmlzQXJlYShlKSYmdGhpcy5sYWJlbC5nZXRMb2NhdGlvbihlLEtlLkxFRlQpPT09TC5JTlRFUklPUiYmdGhpcy5sYWJlbC5nZXRMb2NhdGlvbihlLEtlLlJJR0hUKT09PUwuSU5URVJJT1J8fCh0PSExKTtyZXR1cm4gdH0sc2V0TmV4dE1pbjpmdW5jdGlvbih0KXt0aGlzLm5leHRNaW49dH0scHJpbnQ6ZnVuY3Rpb24odCl7c24ucHJvdG90eXBlLnByaW50LmNhbGwodGhpcyx0KSx0LnByaW50KFwiIFwiK3RoaXMuZGVwdGhbS2UuTEVGVF0rXCIvXCIrdGhpcy5kZXB0aFtLZS5SSUdIVF0pLHQucHJpbnQoXCIgKFwiK3RoaXMuZ2V0RGVwdGhEZWx0YSgpK1wiKVwiKSx0aGlzLl9pc0luUmVzdWx0JiZ0LnByaW50KFwiIGluUmVzdWx0XCIpfSxzZXRNaW5FZGdlUmluZzpmdW5jdGlvbih0KXt0aGlzLm1pbkVkZ2VSaW5nPXR9LGlzTGluZUVkZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxhYmVsLmlzTGluZSgwKXx8dGhpcy5sYWJlbC5pc0xpbmUoMSksZT0hdGhpcy5sYWJlbC5pc0FyZWEoMCl8fHRoaXMubGFiZWwuYWxsUG9zaXRpb25zRXF1YWwoMCxMLkVYVEVSSU9SKSxuPSF0aGlzLmxhYmVsLmlzQXJlYSgxKXx8dGhpcy5sYWJlbC5hbGxQb3NpdGlvbnNFcXVhbCgxLEwuRVhURVJJT1IpO3JldHVybiB0JiZlJiZufSxzZXRFZGdlUmluZzpmdW5jdGlvbih0KXt0aGlzLmVkZ2VSaW5nPXR9LGdldE1pbkVkZ2VSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluRWRnZVJpbmd9LGdldERlcHRoRGVsdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVkZ2UuZ2V0RGVwdGhEZWx0YSgpO3JldHVybiB0aGlzLl9pc0ZvcndhcmR8fCh0PS10KSx0fSxzZXRJblJlc3VsdDpmdW5jdGlvbih0KXt0aGlzLl9pc0luUmVzdWx0PXR9LGdldFN5bTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN5bX0saXNGb3J3YXJkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzRm9yd2FyZH0sZ2V0RWRnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2V9LHByaW50RWRnZTpmdW5jdGlvbih0KXt0aGlzLnByaW50KHQpLHQucHJpbnQoXCIgXCIpLHRoaXMuX2lzRm9yd2FyZD90aGlzLmVkZ2UucHJpbnQodCk6dGhpcy5lZGdlLnByaW50UmV2ZXJzZSh0KX0sc2V0U3ltOmZ1bmN0aW9uKHQpe3RoaXMuc3ltPXR9LHNldFZpc2l0ZWRFZGdlOmZ1bmN0aW9uKHQpe3RoaXMuc2V0VmlzaXRlZCh0KSx0aGlzLnN5bS5zZXRWaXNpdGVkKHQpfSxzZXRFZGdlRGVwdGhzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRFZGdlKCkuZ2V0RGVwdGhEZWx0YSgpO3RoaXMuX2lzRm9yd2FyZHx8KG49LW4pO3ZhciBpPTE7dD09PUtlLkxFRlQmJihpPS0xKTt2YXIgcj1LZS5vcHBvc2l0ZSh0KSxpPWUrbippO3RoaXMuc2V0RGVwdGgodCxlKSx0aGlzLnNldERlcHRoKHIsaSl9LGdldEVkZ2VSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZVJpbmd9LGlzSW5SZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJblJlc3VsdH0sc2V0TmV4dDpmdW5jdGlvbih0KXt0aGlzLm5leHQ9dH0saXNWaXNpdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmlzaXRlZH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gb259fSksb24uZGVwdGhGYWN0b3I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PUwuRVhURVJJT1ImJmU9PT1MLklOVEVSSU9SPzE6dD09PUwuSU5URVJJT1ImJmU9PT1MLkVYVEVSSU9SPy0xOjB9LGUoYW4ucHJvdG90eXBlLHtjcmVhdGVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbm4odCxudWxsKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYW59fSksZSh1bi5wcm90b3R5cGUse3ByaW50RWRnZXM6ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiRWRnZXM6XCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5lZGdlcy5zaXplKCk7ZSsrKXt0LnByaW50bG4oXCJlZGdlIFwiK2UrXCI6XCIpO3ZhciBuPXRoaXMuZWRnZXMuZ2V0KGUpO24ucHJpbnQodCksbi5laUxpc3QucHJpbnQodCl9fSxmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vZGVzLmZpbmQodCl9LGFkZE5vZGU6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIG5uKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMubm9kZXMuYWRkTm9kZSh0KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQpe3Q9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLm5vZGVzLmFkZE5vZGUodCl9fSxnZXROb2RlSXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy5pdGVyYXRvcigpfSxsaW5rUmVzdWx0RGlyZWN0ZWRFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5vZGVzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt0Lm5leHQoKS5nZXRFZGdlcygpLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCl9fSxkZWJ1Z1ByaW50bG46ZnVuY3Rpb24odCl7QS5vdXQucHJpbnRsbih0KX0saXNCb3VuZGFyeU5vZGU6ZnVuY3Rpb24odCxlKXtlPXRoaXMubm9kZXMuZmluZChlKTtpZihudWxsPT09ZSlyZXR1cm4hMTtlPWUuZ2V0TGFiZWwoKTtyZXR1cm4gbnVsbCE9PWUmJmUuZ2V0TG9jYXRpb24odCk9PT1MLkJPVU5EQVJZfSxsaW5rQWxsRGlyZWN0ZWRFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5vZGVzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt0Lm5leHQoKS5nZXRFZGdlcygpLmxpbmtBbGxEaXJlY3RlZEVkZ2VzKCl9fSxtYXRjaEluU2FtZURpcmVjdGlvbjpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4hIXQuZXF1YWxzKG4pJiYoWnQuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxpKT09PVp0LkNPTExJTkVBUiYmR2UucXVhZHJhbnQodCxlKT09PUdlLnF1YWRyYW50KG4saSkpfSxnZXRFZGdlRW5kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VFbmRMaXN0fSxkZWJ1Z1ByaW50OmZ1bmN0aW9uKHQpe0Eub3V0LnByaW50KHQpfSxnZXRFZGdlSXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlcy5pdGVyYXRvcigpfSxmaW5kRWRnZUluU2FtZURpcmVjdGlvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy5lZGdlcy5zaXplKCk7bisrKXt2YXIgaT10aGlzLmVkZ2VzLmdldChuKSxyPWkuZ2V0Q29vcmRpbmF0ZXMoKTtpZih0aGlzLm1hdGNoSW5TYW1lRGlyZWN0aW9uKHQsZSxyWzBdLHJbMV0pKXJldHVybiBpO2lmKHRoaXMubWF0Y2hJblNhbWVEaXJlY3Rpb24odCxlLHJbci5sZW5ndGgtMV0scltyLmxlbmd0aC0yXSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGluc2VydEVkZ2U6ZnVuY3Rpb24odCl7dGhpcy5lZGdlcy5hZGQodCl9LGZpbmRFZGdlRW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO2lmKG4uZ2V0RWRnZSgpPT09dClyZXR1cm4gbn1yZXR1cm4gbnVsbH0sYWRkRWRnZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuZWRnZXMuYWRkKG4pO3ZhciBpPW5ldyBvbihuLCEwKSxuPW5ldyBvbihuLCExKTtpLnNldFN5bShuKSxuLnNldFN5bShpKSx0aGlzLmFkZChpKSx0aGlzLmFkZChuKX19LGFkZDpmdW5jdGlvbih0KXt0aGlzLm5vZGVzLmFkZCh0KSx0aGlzLmVkZ2VFbmRMaXN0LmFkZCh0KX0sZ2V0Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy52YWx1ZXMoKX0sZmluZEVkZ2U6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMuZWRnZXMuc2l6ZSgpO24rKyl7dmFyIGk9dGhpcy5lZGdlcy5nZXQobikscj1pLmdldENvb3JkaW5hdGVzKCk7aWYodC5lcXVhbHMoclswXSkmJmUuZXF1YWxzKHJbMV0pKXJldHVybiBpfXJldHVybiBudWxsfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB1bn19KSx1bi5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkuZ2V0RWRnZXMoKS5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcygpfX0sZShsbi5wcm90b3R5cGUse3NvcnRTaGVsbHNBbmRIb2xlczpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpOyhyLmlzSG9sZSgpP246ZSkuYWRkKHIpfX0sY29tcHV0ZVBvbHlnb25zOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpLnRvUG9seWdvbih0aGlzLmdlb21ldHJ5RmFjdG9yeSk7ZS5hZGQoaSl9cmV0dXJuIGV9LHBsYWNlRnJlZUhvbGVzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKG51bGw9PT1pLmdldFNoZWxsKCkpe3ZhciByPXRoaXMuZmluZEVkZ2VSaW5nQ29udGFpbmluZyhpLHQpO2lmKG51bGw9PT1yKXRocm93IG5ldyBZZShcInVuYWJsZSB0byBhc3NpZ24gaG9sZSB0byBhIHNoZWxsXCIsaS5nZXRDb29yZGluYXRlKDApKTtpLnNldFNoZWxsKHIpfX19LGJ1aWxkTWluaW1hbEVkZ2VSaW5nczpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPW5ldyBJLHI9dC5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHMsbyxhPXIubmV4dCgpOzI8YS5nZXRNYXhOb2RlRGVncmVlKCk/KGEubGlua0RpcmVjdGVkRWRnZXNGb3JNaW5pbWFsRWRnZVJpbmdzKCkscz1hLmJ1aWxkTWluaW1hbFJpbmdzKCksbnVsbCE9PShvPXRoaXMuZmluZFNoZWxsKHMpKT8odGhpcy5wbGFjZVBvbHlnb25Ib2xlcyhvLHMpLGUuYWRkKG8pKTpuLmFkZEFsbChzKSk6aS5hZGQoYSl9cmV0dXJuIGl9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuc2hlbGxMaXN0Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtpZihlLm5leHQoKS5jb250YWluc1BvaW50KHQpKXJldHVybiEwfXJldHVybiExfSxidWlsZE1heGltYWxFZGdlUmluZ3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJLG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aS5pc0luUmVzdWx0KCkmJmkuZ2V0TGFiZWwoKS5pc0FyZWEoKSYmbnVsbD09PWkuZ2V0RWRnZVJpbmcoKSYmKGk9bmV3IHRuKGksdGhpcy5nZW9tZXRyeUZhY3RvcnkpLGUuYWRkKGkpLGkuc2V0SW5SZXN1bHQoKSl9cmV0dXJuIGV9LHBsYWNlUG9seWdvbkhvbGVzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kuaXNIb2xlKCkmJmkuc2V0U2hlbGwodCl9fSxnZXRQb2x5Z29uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGVQb2x5Z29ucyh0aGlzLnNoZWxsTGlzdCl9LGZpbmRFZGdlUmluZ0NvbnRhaW5pbmc6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHQ9dC5nZXRMaW5lYXJSaW5nKCksbj10LmdldEVudmVsb3BlSW50ZXJuYWwoKSxpPXQuZ2V0Q29vcmRpbmF0ZU4oMCkscj1udWxsLHM9bnVsbCxvPWUuaXRlcmF0b3IoKTtvLmhhc05leHQoKTspe3ZhciBhPW8ubmV4dCgpLHU9YS5nZXRMaW5lYXJSaW5nKCksbD11LmdldEVudmVsb3BlSW50ZXJuYWwoKTtudWxsIT09ciYmKHM9ci5nZXRMaW5lYXJSaW5nKCkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKTt2YXIgaD0hMTtsLmNvbnRhaW5zKG4pJiZadC5pc1BvaW50SW5SaW5nKGksdS5nZXRDb29yZGluYXRlcygpKSYmKGg9ITApLGgmJihudWxsPT09cnx8cy5jb250YWlucyhsKSkmJihyPWEpfXJldHVybiByfSxmaW5kU2hlbGw6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj1udWxsLGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7ci5pc0hvbGUoKXx8KG49cixlKyspfXJldHVybiBsLmlzVHJ1ZShlPD0xLFwiZm91bmQgdHdvIHNoZWxscyBpbiBNaW5pbWFsRWRnZVJpbmcgbGlzdFwiKSxufSxhZGQ6ZnVuY3Rpb24oKXt2YXIgdCxlOzE9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSx0aGlzLmFkZChlLmdldEVkZ2VFbmRzKCksZS5nZXROb2RlcygpKSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSx1bi5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcyhhcmd1bWVudHNbMV0pLGU9dGhpcy5idWlsZE1heGltYWxFZGdlUmluZ3ModCksdD1uZXcgSSxlPXRoaXMuYnVpbGRNaW5pbWFsRWRnZVJpbmdzKGUsdGhpcy5zaGVsbExpc3QsdCksdGhpcy5zb3J0U2hlbGxzQW5kSG9sZXMoZSx0aGlzLnNoZWxsTGlzdCx0KSx0aGlzLnBsYWNlRnJlZUhvbGVzKHRoaXMuc2hlbGxMaXN0LHQpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbG59fSksZShobi5wcm90b3R5cGUse2NvbGxlY3RMaW5lczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcC5nZXRHcmFwaCgpLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuY29sbGVjdExpbmVFZGdlKG4sdCx0aGlzLmxpbmVFZGdlc0xpc3QpLHRoaXMuY29sbGVjdEJvdW5kYXJ5VG91Y2hFZGdlKG4sdCx0aGlzLmxpbmVFZGdlc0xpc3QpfX0sbGFiZWxJc29sYXRlZExpbmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnB0TG9jYXRvci5sb2NhdGUodC5nZXRDb29yZGluYXRlKCksdGhpcy5vcC5nZXRBcmdHZW9tZXRyeShlKSk7dC5nZXRMYWJlbCgpLnNldExvY2F0aW9uKGUsbil9LGJ1aWxkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZpbmRDb3ZlcmVkTGluZUVkZ2VzKCksdGhpcy5jb2xsZWN0TGluZXModCksdGhpcy5idWlsZExpbmVzKHQpLHRoaXMucmVzdWx0TGluZUxpc3R9LGNvbGxlY3RMaW5lRWRnZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRMYWJlbCgpLHI9dC5nZXRFZGdlKCk7dC5pc0xpbmVFZGdlKCkmJih0LmlzVmlzaXRlZCgpfHwha24uaXNSZXN1bHRPZk9wKGksZSl8fHIuaXNDb3ZlcmVkKCl8fChuLmFkZChyKSx0LnNldFZpc2l0ZWRFZGdlKCEwKSkpfSxmaW5kQ292ZXJlZExpbmVFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm9wLmdldEdyYXBoKCkuZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dC5uZXh0KCkuZ2V0RWRnZXMoKS5maW5kQ292ZXJlZExpbmVFZGdlcygpfWZvcih2YXIgZT10aGlzLm9wLmdldEdyYXBoKCkuZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCksaT1uLmdldEVkZ2UoKTtuLmlzTGluZUVkZ2UoKSYmIWkuaXNDb3ZlcmVkU2V0KCkmJihuPXRoaXMub3AuaXNDb3ZlcmVkQnlBKG4uZ2V0Q29vcmRpbmF0ZSgpKSxpLnNldENvdmVyZWQobikpfX0sbGFiZWxJc29sYXRlZExpbmVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKTtuLmlzSXNvbGF0ZWQoKSYmKGkuaXNOdWxsKDApP3RoaXMubGFiZWxJc29sYXRlZExpbmUobiwwKTp0aGlzLmxhYmVsSXNvbGF0ZWRMaW5lKG4sMSkpfX0sYnVpbGRMaW5lczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5saW5lRWRnZXNMaXN0Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPShuLmdldExhYmVsKCksdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhuLmdldENvb3JkaW5hdGVzKCkpKTt0aGlzLnJlc3VsdExpbmVMaXN0LmFkZChpKSxuLnNldEluUmVzdWx0KCEwKX19LGNvbGxlY3RCb3VuZGFyeVRvdWNoRWRnZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRMYWJlbCgpO3JldHVybiB0LmlzTGluZUVkZ2UoKXx8dC5pc1Zpc2l0ZWQoKXx8dC5pc0ludGVyaW9yQXJlYUVkZ2UoKXx8dC5nZXRFZGdlKCkuaXNJblJlc3VsdCgpP251bGw6KGwuaXNUcnVlKCEodC5pc0luUmVzdWx0KCl8fHQuZ2V0U3ltKCkuaXNJblJlc3VsdCgpKXx8IXQuZ2V0RWRnZSgpLmlzSW5SZXN1bHQoKSksdm9pZChrbi5pc1Jlc3VsdE9mT3AoaSxlKSYmZT09PWtuLklOVEVSU0VDVElPTiYmKG4uYWRkKHQuZ2V0RWRnZSgpKSx0LnNldFZpc2l0ZWRFZGdlKCEwKSkpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gaG59fSksZShjbi5wcm90b3R5cGUse2ZpbHRlckNvdmVyZWROb2RlVG9Qb2ludDpmdW5jdGlvbih0KXt0PXQuZ2V0Q29vcmRpbmF0ZSgpO3RoaXMub3AuaXNDb3ZlcmVkQnlMQSh0KXx8KHQ9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9pbnQodCksdGhpcy5yZXN1bHRQb2ludExpc3QuYWRkKHQpKX0sZXh0cmFjdE5vbkNvdmVyZWRSZXN1bHROb2RlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcC5nZXRHcmFwaCgpLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuLGk9ZS5uZXh0KCk7aS5pc0luUmVzdWx0KCl8fGkuaXNJbmNpZGVudEVkZ2VJblJlc3VsdCgpfHwwIT09aS5nZXRFZGdlcygpLmdldERlZ3JlZSgpJiZ0IT09a24uSU5URVJTRUNUSU9OfHwobj1pLmdldExhYmVsKCksa24uaXNSZXN1bHRPZk9wKG4sdCkmJnRoaXMuZmlsdGVyQ292ZXJlZE5vZGVUb1BvaW50KGkpKX19LGJ1aWxkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4dHJhY3ROb25Db3ZlcmVkUmVzdWx0Tm9kZXModCksdGhpcy5yZXN1bHRQb2ludExpc3R9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGNufX0pLGUoZm4ucHJvdG90eXBlLHtsb2NhdGU6ZnVuY3Rpb24odCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBmbn19KSxlKGduLnByb3RvdHlwZSx7bG9jYXRlOmZ1bmN0aW9uKHQpe3JldHVybiBnbi5sb2NhdGUodCx0aGlzLmdlb20pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltmbl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGdufX0pLGduLmlzUG9pbnRJblJpbmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIWUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHModCkmJlp0LmlzUG9pbnRJblJpbmcodCxlLmdldENvb3JkaW5hdGVzKCkpfSxnbi5jb250YWluc1BvaW50SW5Qb2x5Z29uPWZ1bmN0aW9uKHQsZSl7aWYoZS5pc0VtcHR5KCkpcmV0dXJuITE7dmFyIG49ZS5nZXRFeHRlcmlvclJpbmcoKTtpZighZ24uaXNQb2ludEluUmluZyh0LG4pKXJldHVybiExO2Zvcih2YXIgaT0wO2k8ZS5nZXROdW1JbnRlcmlvclJpbmcoKTtpKyspe3ZhciByPWUuZ2V0SW50ZXJpb3JSaW5nTihpKTtpZihnbi5pc1BvaW50SW5SaW5nKHQscikpcmV0dXJuITF9cmV0dXJuITB9LGduLmNvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24odCxlKXtpZihlIGluc3RhbmNlb2YgUnQpcmV0dXJuIGduLmNvbnRhaW5zUG9pbnRJblBvbHlnb24odCxlKTtpZihlIGluc3RhbmNlb2YgZnQpZm9yKHZhciBuPW5ldyBnZShlKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKGkhPT1lJiZnbi5jb250YWluc1BvaW50KHQsaSkpcmV0dXJuITB9cmV0dXJuITF9LGduLmxvY2F0ZT1mdW5jdGlvbih0LGUpe3JldHVybiFlLmlzRW1wdHkoKSYmZ24uY29udGFpbnNQb2ludCh0LGUpP0wuSU5URVJJT1I6TC5FWFRFUklPUn0sZShkbi5wcm90b3R5cGUse2dldE5leHRDVzpmdW5jdGlvbih0KXt0aGlzLmdldEVkZ2VzKCk7dmFyIGU9dGhpcy5lZGdlTGlzdC5pbmRleE9mKHQpLHQ9ZS0xO3JldHVybiAwPT09ZSYmKHQ9dGhpcy5lZGdlTGlzdC5zaXplKCktMSksdGhpcy5lZGdlTGlzdC5nZXQodCl9LHByb3BhZ2F0ZVNpZGVMYWJlbHM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPUwuTk9ORSxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspeyhyPShpPW4ubmV4dCgpKS5nZXRMYWJlbCgpKS5pc0FyZWEodCkmJnIuZ2V0TG9jYXRpb24odCxLZS5MRUZUKSE9PUwuTk9ORSYmKGU9ci5nZXRMb2NhdGlvbih0LEtlLkxFRlQpKX1pZihlPT09TC5OT05FKXJldHVybiBudWxsO2Zvcih2YXIgaSxyLHM9ZSxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe2lmKChyPShpPW4ubmV4dCgpKS5nZXRMYWJlbCgpKS5nZXRMb2NhdGlvbih0LEtlLk9OKT09PUwuTk9ORSYmci5zZXRMb2NhdGlvbih0LEtlLk9OLHMpLHIuaXNBcmVhKHQpKXt2YXIgbz1yLmdldExvY2F0aW9uKHQsS2UuTEVGVCksYT1yLmdldExvY2F0aW9uKHQsS2UuUklHSFQpO2lmKGEhPT1MLk5PTkUpe2lmKGEhPT1zKXRocm93IG5ldyBZZShcInNpZGUgbG9jYXRpb24gY29uZmxpY3RcIixpLmdldENvb3JkaW5hdGUoKSk7bz09PUwuTk9ORSYmbC5zaG91bGROZXZlclJlYWNoSGVyZShcImZvdW5kIHNpbmdsZSBudWxsIHNpZGUgKGF0IFwiK2kuZ2V0Q29vcmRpbmF0ZSgpK1wiKVwiKSxzPW99ZWxzZSBsLmlzVHJ1ZShyLmdldExvY2F0aW9uKHQsS2UuTEVGVCk9PT1MLk5PTkUsXCJmb3VuZCBzaW5nbGUgbnVsbCBzaWRlXCIpLHIuc2V0TG9jYXRpb24odCxLZS5SSUdIVCxzKSxyLnNldExvY2F0aW9uKHQsS2UuTEVGVCxzKX19fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pdGVyYXRvcigpO3JldHVybiB0Lmhhc05leHQoKT90Lm5leHQoKS5nZXRDb29yZGluYXRlKCk6bnVsbH0scHJpbnQ6ZnVuY3Rpb24odCl7QS5vdXQucHJpbnRsbihcIkVkZ2VFbmRTdGFyOiAgIFwiK3RoaXMuZ2V0Q29vcmRpbmF0ZSgpKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkucHJpbnQodCl9fSxpc0FyZWFMYWJlbHNDb25zaXN0ZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXB1dGVFZGdlRW5kTGFiZWxzKHQuZ2V0Qm91bmRhcnlOb2RlUnVsZSgpKSx0aGlzLmNoZWNrQXJlYUxhYmVsc0NvbnNpc3RlbnQoMCl9LGNoZWNrQXJlYUxhYmVsc0NvbnNpc3RlbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRFZGdlcygpO2lmKGUuc2l6ZSgpPD0wKXJldHVybiEwO3ZhciBuPWUuc2l6ZSgpLTEsbj1lLmdldChuKS5nZXRMYWJlbCgpLmdldExvY2F0aW9uKHQsS2UuTEVGVCk7bC5pc1RydWUobiE9PUwuTk9ORSxcIkZvdW5kIHVubGFiZWxsZWQgYXJlYSBlZGdlXCIpO2Zvcih2YXIgaT1uLHI9dGhpcy5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHM9ci5uZXh0KCkuZ2V0TGFiZWwoKTtsLmlzVHJ1ZShzLmlzQXJlYSh0KSxcIkZvdW5kIG5vbi1hcmVhIGVkZ2VcIik7dmFyIG89cy5nZXRMb2NhdGlvbih0LEtlLkxFRlQpLHM9cy5nZXRMb2NhdGlvbih0LEtlLlJJR0hUKTtpZihvPT09cylyZXR1cm4hMTtpZihzIT09aSlyZXR1cm4hMTtpPW99cmV0dXJuITB9LGZpbmRJbmRleDpmdW5jdGlvbih0KXt0aGlzLml0ZXJhdG9yKCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmVkZ2VMaXN0LnNpemUoKTtlKyspe2lmKHRoaXMuZWRnZUxpc3QuZ2V0KGUpPT09dClyZXR1cm4gZX1yZXR1cm4tMX0saXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFZGdlcygpLml0ZXJhdG9yKCl9LGdldEVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmVkZ2VMaXN0JiYodGhpcy5lZGdlTGlzdD1uZXcgSSh0aGlzLmVkZ2VNYXAudmFsdWVzKCkpKSx0aGlzLmVkZ2VMaXN0fSxnZXRMb2NhdGlvbjpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMucHRJbkFyZWFMb2NhdGlvblt0XT09PUwuTk9ORSYmKHRoaXMucHRJbkFyZWFMb2NhdGlvblt0XT1nbi5sb2NhdGUoZSxuW3RdLmdldEdlb21ldHJ5KCkpKSx0aGlzLnB0SW5BcmVhTG9jYXRpb25bdF19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFA7dC5hcHBlbmQoXCJFZGdlRW5kU3RhcjogICBcIit0aGlzLmdldENvb3JkaW5hdGUoKSksdC5hcHBlbmQoXCJcXG5cIik7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3QuYXBwZW5kKG4pLHQuYXBwZW5kKFwiXFxuXCIpfXJldHVybiB0LnRvU3RyaW5nKCl9LGNvbXB1dGVFZGdlRW5kTGFiZWxzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5jb21wdXRlTGFiZWwodCl9fSxjb21wdXRlTGFiZWxsaW5nOmZ1bmN0aW9uKHQpe3RoaXMuY29tcHV0ZUVkZ2VFbmRMYWJlbHModFswXS5nZXRCb3VuZGFyeU5vZGVSdWxlKCkpLHRoaXMucHJvcGFnYXRlU2lkZUxhYmVscygwKSx0aGlzLnByb3BhZ2F0ZVNpZGVMYWJlbHMoMSk7Zm9yKHZhciBlPVshMSwhMV0sbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KWZvcih2YXIgaT1uLm5leHQoKSxyPWkuZ2V0TGFiZWwoKSxzPTA7czwyO3MrKylyLmlzTGluZShzKSYmci5nZXRMb2NhdGlvbihzKT09PUwuQk9VTkRBUlkmJihlW3NdPSEwKTtmb3IodmFyIG8sYSxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspZm9yKHI9KGk9bi5uZXh0KCkpLmdldExhYmVsKCkscz0wO3M8MjtzKyspe3IuaXNBbnlOdWxsKHMpJiYoYT1MLk5PTkUsYT1lW3NdP0wuRVhURVJJT1I6KG89aS5nZXRDb29yZGluYXRlKCksdGhpcy5nZXRMb2NhdGlvbihzLG8sdCkpLHIuc2V0QWxsTG9jYXRpb25zSWZOdWxsKHMsYSkpfX0sZ2V0RGVncmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZU1hcC5zaXplKCl9LGluc2VydEVkZ2VFbmQ6ZnVuY3Rpb24odCxlKXt0aGlzLmVkZ2VNYXAucHV0KHQsZSksdGhpcy5lZGdlTGlzdD1udWxsfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBkbn19KSxhKHBuLGRuKSxlKHBuLnByb3RvdHlwZSx7bGlua1Jlc3VsdERpcmVjdGVkRWRnZXM6ZnVuY3Rpb24oKXt0aGlzLmdldFJlc3VsdEFyZWFFZGdlcygpO2Zvcih2YXIgdD1udWxsLGU9bnVsbCxuPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HLGk9MDtpPHRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LnNpemUoKTtpKyspe3ZhciByPXRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LmdldChpKSxzPXIuZ2V0U3ltKCk7aWYoci5nZXRMYWJlbCgpLmlzQXJlYSgpKXN3aXRjaChudWxsPT09dCYmci5pc0luUmVzdWx0KCkmJih0PXIpLG4pe2Nhc2UgdGhpcy5TQ0FOTklOR19GT1JfSU5DT01JTkc6aWYoIXMuaXNJblJlc3VsdCgpKWNvbnRpbnVlO2U9cyxuPXRoaXMuTElOS0lOR19UT19PVVRHT0lORzticmVhaztjYXNlIHRoaXMuTElOS0lOR19UT19PVVRHT0lORzppZighci5pc0luUmVzdWx0KCkpY29udGludWU7ZS5zZXROZXh0KHIpLG49dGhpcy5TQ0FOTklOR19GT1JfSU5DT01JTkd9fWlmKG49PT10aGlzLkxJTktJTkdfVE9fT1VUR09JTkcpe2lmKG51bGw9PT10KXRocm93IG5ldyBZZShcIm5vIG91dGdvaW5nIGRpckVkZ2UgZm91bmRcIix0aGlzLmdldENvb3JkaW5hdGUoKSk7bC5pc1RydWUodC5pc0luUmVzdWx0KCksXCJ1bmFibGUgdG8gbGluayBsYXN0IGluY29taW5nIGRpckVkZ2VcIiksZS5zZXROZXh0KHQpfX0saW5zZXJ0OmZ1bmN0aW9uKHQpe3RoaXMuaW5zZXJ0RWRnZUVuZCh0LHQpfSxnZXRSaWdodG1vc3RFZGdlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRFZGdlcygpLGU9dC5zaXplKCk7aWYoZTwxKXJldHVybiBudWxsO3ZhciBuPXQuZ2V0KDApO2lmKDE9PT1lKXJldHVybiBuO3ZhciBpPXQuZ2V0KGUtMSksdD1uLmdldFF1YWRyYW50KCksZT1pLmdldFF1YWRyYW50KCk7cmV0dXJuIEdlLmlzTm9ydGhlcm4odCkmJkdlLmlzTm9ydGhlcm4oZSk/bjpHZS5pc05vcnRoZXJuKHQpfHxHZS5pc05vcnRoZXJuKGUpPzAhPT1uLmdldER5KCk/bjowIT09aS5nZXREeSgpP2k6KGwuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoXCJmb3VuZCB0d28gaG9yaXpvbnRhbCBlZGdlcyBpbmNpZGVudCBvbiBub2RlXCIpLG51bGwpOml9LHByaW50OmZ1bmN0aW9uKHQpe0Eub3V0LnByaW50bG4oXCJEaXJlY3RlZEVkZ2VTdGFyOiBcIit0aGlzLmdldENvb3JkaW5hdGUoKSk7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3QucHJpbnQoXCJvdXQgXCIpLG4ucHJpbnQodCksdC5wcmludGxuKCksdC5wcmludChcImluIFwiKSxuLmdldFN5bSgpLnByaW50KHQpLHQucHJpbnRsbigpfX0sZ2V0UmVzdWx0QXJlYUVkZ2VzOmZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0KXJldHVybiB0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdDt0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdD1uZXcgSTtmb3IodmFyIHQ9dGhpcy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7KGUuaXNJblJlc3VsdCgpfHxlLmdldFN5bSgpLmlzSW5SZXN1bHQoKSkmJnRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LmFkZChlKX1yZXR1cm4gdGhpcy5yZXN1bHRBcmVhRWRnZUxpc3R9LHVwZGF0ZUxhYmVsbGluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCkuZ2V0TGFiZWwoKTtuLnNldEFsbExvY2F0aW9uc0lmTnVsbCgwLHQuZ2V0TG9jYXRpb24oMCkpLG4uc2V0QWxsTG9jYXRpb25zSWZOdWxsKDEsdC5nZXRMb2NhdGlvbigxKSl9fSxsaW5rQWxsRGlyZWN0ZWRFZGdlczpmdW5jdGlvbigpe3RoaXMuZ2V0RWRnZXMoKTtmb3IodmFyIHQ9bnVsbCxlPW51bGwsbj10aGlzLmVkZ2VMaXN0LnNpemUoKS0xOzA8PW47bi0tKXt2YXIgaT10aGlzLmVkZ2VMaXN0LmdldChuKSxyPWkuZ2V0U3ltKCk7bnVsbD09PWUmJihlPXIpLG51bGwhPT10JiZyLnNldE5leHQodCksdD1pfWUuc2V0TmV4dCh0KX0sY29tcHV0ZURlcHRoczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLmZpbmRJbmRleCh0KSxuPSh0LmdldExhYmVsKCksdC5nZXREZXB0aChLZS5MRUZUKSksaT10LmdldERlcHRoKEtlLlJJR0hUKSxuPXRoaXMuY29tcHV0ZURlcHRocyhlKzEsdGhpcy5lZGdlTGlzdC5zaXplKCksbik7aWYodGhpcy5jb21wdXRlRGVwdGhzKDAsZSxuKSE9PWkpdGhyb3cgbmV3IFllKFwiZGVwdGggbWlzbWF0Y2ggYXQgXCIrdC5nZXRDb29yZGluYXRlKCkpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgcj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sbz1hcmd1bWVudHNbMF07bzxyO28rKyl7dmFyIGE9dGhpcy5lZGdlTGlzdC5nZXQobyk7YS5nZXRMYWJlbCgpLGEuc2V0RWRnZURlcHRocyhLZS5SSUdIVCxzKSxzPWEuZ2V0RGVwdGgoS2UuTEVGVCl9cmV0dXJuIHN9fSxtZXJnZVN5bUxhYmVsczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTtlLmdldExhYmVsKCkubWVyZ2UoZS5nZXRTeW0oKS5nZXRMYWJlbCgpKX19LGxpbmtNaW5pbWFsRGlyZWN0ZWRFZGdlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPW51bGwsaT10aGlzLlNDQU5OSU5HX0ZPUl9JTkNPTUlORyxyPXRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LnNpemUoKS0xOzA8PXI7ci0tKXt2YXIgcz10aGlzLnJlc3VsdEFyZWFFZGdlTGlzdC5nZXQociksbz1zLmdldFN5bSgpO3N3aXRjaChudWxsPT09ZSYmcy5nZXRFZGdlUmluZygpPT09dCYmKGU9cyksaSl7Y2FzZSB0aGlzLlNDQU5OSU5HX0ZPUl9JTkNPTUlORzppZihvLmdldEVkZ2VSaW5nKCkhPT10KWNvbnRpbnVlO249byxpPXRoaXMuTElOS0lOR19UT19PVVRHT0lORzticmVhaztjYXNlIHRoaXMuTElOS0lOR19UT19PVVRHT0lORzppZihzLmdldEVkZ2VSaW5nKCkhPT10KWNvbnRpbnVlO24uc2V0TmV4dE1pbihzKSxpPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HfX1pPT09dGhpcy5MSU5LSU5HX1RPX09VVEdPSU5HJiYobC5pc1RydWUobnVsbCE9PWUsXCJmb3VuZCBudWxsIGZvciBmaXJzdCBvdXRnb2luZyBkaXJFZGdlXCIpLGwuaXNUcnVlKGUuZ2V0RWRnZVJpbmcoKT09PXQsXCJ1bmFibGUgdG8gbGluayBsYXN0IGluY29taW5nIGRpckVkZ2VcIiksbi5zZXROZXh0TWluKGUpKX0sZ2V0T3V0Z29pbmdEZWdyZWU6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PTAsZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5pc0luUmVzdWx0KCkmJnQrK31yZXR1cm4gdH1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBuPWFyZ3VtZW50c1swXSx0PTAsZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5nZXRFZGdlUmluZygpPT09biYmdCsrfXJldHVybiB0fX0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sZmluZENvdmVyZWRMaW5lRWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9TC5OT05FLGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49KHI9ZS5uZXh0KCkpLmdldFN5bSgpO2lmKCFyLmlzTGluZUVkZ2UoKSl7aWYoci5pc0luUmVzdWx0KCkpe3Q9TC5JTlRFUklPUjticmVha31pZihuLmlzSW5SZXN1bHQoKSl7dD1MLkVYVEVSSU9SO2JyZWFrfX19aWYodD09PUwuTk9ORSlyZXR1cm4gbnVsbDtmb3IodmFyIGk9dCxlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciByLG49KHI9ZS5uZXh0KCkpLmdldFN5bSgpO3IuaXNMaW5lRWRnZSgpP3IuZ2V0RWRnZSgpLnNldENvdmVyZWQoaT09PUwuSU5URVJJT1IpOihyLmlzSW5SZXN1bHQoKSYmKGk9TC5FWFRFUklPUiksbi5pc0luUmVzdWx0KCkmJihpPUwuSU5URVJJT1IpKX19LGNvbXB1dGVMYWJlbGxpbmc6ZnVuY3Rpb24odCl7ZG4ucHJvdG90eXBlLmNvbXB1dGVMYWJlbGxpbmcuY2FsbCh0aGlzLHQpLHRoaXMubGFiZWw9bmV3IEplKEwuTk9ORSk7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspZm9yKHZhciBuPWUubmV4dCgpLmdldEVkZ2UoKS5nZXRMYWJlbCgpLGk9MDtpPDI7aSsrKXt2YXIgcj1uLmdldExvY2F0aW9uKGkpO3IhPT1MLklOVEVSSU9SJiZyIT09TC5CT1VOREFSWXx8dGhpcy5sYWJlbC5zZXRMb2NhdGlvbihpLEwuSU5URVJJT1IpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcG59fSksYShtbixhbiksZShtbi5wcm90b3R5cGUse2NyZWF0ZU5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBubih0LG5ldyBwbil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG1ufX0pLGUoeW4ucHJvdG90eXBlLHtjb21wdXRlSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0LGUpe3RoaXMubWNlLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4odGhpcy5jaGFpbkluZGV4LHQubWNlLHQuY2hhaW5JbmRleCxlKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4geW59fSksZSh2bi5wcm90b3R5cGUse2lzRGVsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnRUeXBlPT09dm4uREVMRVRFfSxzZXREZWxldGVFdmVudEluZGV4OmZ1bmN0aW9uKHQpe3RoaXMuZGVsZXRlRXZlbnRJbmRleD10fSxnZXRPYmplY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmp9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54VmFsdWU8dC54VmFsdWU/LTE6dGhpcy54VmFsdWU+dC54VmFsdWU/MTp0aGlzLmV2ZW50VHlwZTx0LmV2ZW50VHlwZT8tMTp0aGlzLmV2ZW50VHlwZT50LmV2ZW50VHlwZT8xOjB9LGdldEluc2VydEV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5zZXJ0RXZlbnR9LGlzSW5zZXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnRUeXBlPT09dm4uSU5TRVJUfSxpc1NhbWVMYWJlbDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXRoaXMubGFiZWwmJnRoaXMubGFiZWw9PT10LmxhYmVsfSxnZXREZWxldGVFdmVudEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVsZXRlRXZlbnRJbmRleH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5baV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHZufX0pLHZuLklOU0VSVD0xLHZuLkRFTEVURT0yLGUoeG4ucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB4bn19KSxlKEVuLnByb3RvdHlwZSx7aXNUcml2aWFsSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1uJiYxPT09dGhpcy5saS5nZXRJbnRlcnNlY3Rpb25OdW0oKSl7aWYoRW4uaXNBZGphY2VudFNlZ21lbnRzKGUsaSkpcmV0dXJuITA7aWYodC5pc0Nsb3NlZCgpKXt0PXQuZ2V0TnVtUG9pbnRzKCktMTtpZigwPT09ZSYmaT09PXR8fDA9PT1pJiZlPT09dClyZXR1cm4hMH19cmV0dXJuITF9LGdldFByb3BlckludGVyc2VjdGlvblBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcGVySW50ZXJzZWN0aW9uUG9pbnR9LHNldElzRG9uZUlmUHJvcGVySW50OmZ1bmN0aW9uKHQpe3RoaXMuaXNEb25lV2hlblByb3BlckludD10fSxoYXNQcm9wZXJJbnRlcmlvckludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc1Byb3BlckludGVyaW9yfSxpc0JvdW5kYXJ5UG9pbnRJbnRlcm5hbDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKS5nZXRDb29yZGluYXRlKCk7aWYodC5pc0ludGVyc2VjdGlvbihpKSlyZXR1cm4hMH1yZXR1cm4hMX0saGFzUHJvcGVySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzUHJvcGVyfSxoYXNJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzSW50ZXJzZWN0aW9ufSxpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNEb25lfSxpc0JvdW5kYXJ5UG9pbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9PWUmJighIXRoaXMuaXNCb3VuZGFyeVBvaW50SW50ZXJuYWwodCxlWzBdKXx8ISF0aGlzLmlzQm91bmRhcnlQb2ludEludGVybmFsKHQsZVsxXSkpfSxzZXRCb3VuZGFyeU5vZGVzOmZ1bmN0aW9uKHQsZSl7dGhpcy5iZHlOb2Rlcz1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0aGlzLmJkeU5vZGVzWzBdPXQsdGhpcy5iZHlOb2Rlc1sxXT1lfSxhZGRJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1uJiZlPT09aSlyZXR1cm4gbnVsbDt0aGlzLm51bVRlc3RzKys7dmFyIHI9dC5nZXRDb29yZGluYXRlcygpW2VdLHM9dC5nZXRDb29yZGluYXRlcygpW2UrMV0sbz1uLmdldENvb3JkaW5hdGVzKClbaV0sYT1uLmdldENvb3JkaW5hdGVzKClbaSsxXTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocixzLG8sYSksdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKSYmKHRoaXMucmVjb3JkSXNvbGF0ZWQmJih0LnNldElzb2xhdGVkKCExKSxuLnNldElzb2xhdGVkKCExKSksdGhpcy5udW1JbnRlcnNlY3Rpb25zKyssdGhpcy5pc1RyaXZpYWxJbnRlcnNlY3Rpb24odCxlLG4saSl8fCh0aGlzLl9oYXNJbnRlcnNlY3Rpb249ITAsIXRoaXMuaW5jbHVkZVByb3BlciYmdGhpcy5saS5pc1Byb3BlcigpfHwodC5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksZSwwKSxuLmFkZEludGVyc2VjdGlvbnModGhpcy5saSxpLDEpKSx0aGlzLmxpLmlzUHJvcGVyKCkmJih0aGlzLnByb3BlckludGVyc2VjdGlvblBvaW50PXRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uKDApLmNvcHkoKSx0aGlzLmhhc1Byb3Blcj0hMCx0aGlzLmlzRG9uZVdoZW5Qcm9wZXJJbnQmJih0aGlzLl9pc0RvbmU9ITApLHRoaXMuaXNCb3VuZGFyeVBvaW50KHRoaXMubGksdGhpcy5iZHlOb2Rlcyl8fCh0aGlzLmhhc1Byb3BlckludGVyaW9yPSEwKSkpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRW59fSksRW4uaXNBZGphY2VudFNlZ21lbnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDE9PT1NYXRoLmFicyh0LWUpfSxhKEluLHhuKSxlKEluLnByb3RvdHlwZSx7cHJlcGFyZUV2ZW50czpmdW5jdGlvbigpe1pzLnNvcnQodGhpcy5ldmVudHMpO2Zvcih2YXIgdD0wO3Q8dGhpcy5ldmVudHMuc2l6ZSgpO3QrKyl7dmFyIGU9dGhpcy5ldmVudHMuZ2V0KHQpO2UuaXNEZWxldGUoKSYmZS5nZXRJbnNlcnRFdmVudCgpLnNldERlbGV0ZUV2ZW50SW5kZXgodCl9fSxjb21wdXRlSW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5uT3ZlcmxhcHM9MCx0aGlzLnByZXBhcmVFdmVudHMoKTtmb3IodmFyIGU9MDtlPHRoaXMuZXZlbnRzLnNpemUoKTtlKyspe3ZhciBuPXRoaXMuZXZlbnRzLmdldChlKTtpZihuLmlzSW5zZXJ0KCkmJnRoaXMucHJvY2Vzc092ZXJsYXBzKGUsbi5nZXREZWxldGVFdmVudEluZGV4KCksbix0KSx0LmlzRG9uZSgpKWJyZWFrfX1lbHNle3ZhciBpLHIsczszPT09YXJndW1lbnRzLmxlbmd0aCYmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgRW4mJlIoYXJndW1lbnRzWzBdLHYpJiZSKGFyZ3VtZW50c1sxXSx2KT8oaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sdGhpcy5hZGRFZGdlcyhpLGkpLHRoaXMuYWRkRWRnZXMocixyKSx0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25zKHMpKTpcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1syXSYmUihhcmd1bWVudHNbMF0sdikmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgRW4mJihyPWFyZ3VtZW50c1swXSxzPWFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0/dGhpcy5hZGRFZGdlcyhyLG51bGwpOnRoaXMuYWRkRWRnZXMociksdGhpcy5jb21wdXRlSW50ZXJzZWN0aW9ucyhzKSkpfX0sYWRkRWRnZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmdldE1vbm90b25lQ2hhaW5FZGdlKCksaT1uLmdldFN0YXJ0SW5kZXhlcygpLHI9MDtyPGkubGVuZ3RoLTE7cisrKXt2YXIgcz1uZXcgeW4obixyKSxzPW5ldyB2bihlLG4uZ2V0TWluWChyKSxzKTt0aGlzLmV2ZW50cy5hZGQocyksdGhpcy5ldmVudHMuYWRkKG5ldyB2bihuLmdldE1heFgocikscykpfX0scHJvY2Vzc092ZXJsYXBzOmZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj1uLmdldE9iamVjdCgpLHM9dDtzPGU7cysrKXt2YXIgbyxhPXRoaXMuZXZlbnRzLmdldChzKTthLmlzSW5zZXJ0KCkmJihvPWEuZ2V0T2JqZWN0KCksbi5pc1NhbWVMYWJlbChhKXx8KHIuY29tcHV0ZUludGVyc2VjdGlvbnMobyxpKSx0aGlzLm5PdmVybGFwcysrKSl9fSxhZGRFZGdlczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgdD1hcmd1bWVudHNbMF0uaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpO3RoaXMuYWRkRWRnZShlLGUpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBuPWFyZ3VtZW50c1sxXSx0PWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7ZT10Lm5leHQoKTt0aGlzLmFkZEVkZ2UoZSxuKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIElufX0pLGUoTm4ucHJvdG90eXBlLHtnZXRNaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW59LGludGVyc2VjdHM6ZnVuY3Rpb24odCxlKXtyZXR1cm4hKHRoaXMubWluPmV8fHRoaXMubWF4PHQpfSxnZXRNYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFh0LnRvTGluZVN0cmluZyhuZXcgZCh0aGlzLm1pbiwwKSxuZXcgZCh0aGlzLm1heCwwKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE5ufX0pLGUoQ24ucHJvdG90eXBlLHtjb21wYXJlOmZ1bmN0aW9uKHQsZSl7dD0odC5taW4rdC5tYXgpLzIsZT0oZS5taW4rZS5tYXgpLzI7cmV0dXJuIHQ8ZT8tMTplPHQ/MTowfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQ259fSksTm4uTm9kZUNvbXBhcmF0b3I9Q24sYShTbixObiksZShTbi5wcm90b3R5cGUse3F1ZXJ5OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzKHQsZSk/dm9pZCBuLnZpc2l0SXRlbSh0aGlzLml0ZW0pOm51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFNufX0pLGEod24sTm4pLGUod24ucHJvdG90eXBlLHtidWlsZEV4dGVudDpmdW5jdGlvbih0LGUpe3RoaXMubWluPU1hdGgubWluKHQubWluLGUubWluKSx0aGlzLm1heD1NYXRoLm1heCh0Lm1heCxlLm1heCl9LHF1ZXJ5OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzKHQsZSk/KG51bGwhPT10aGlzLm5vZGUxJiZ0aGlzLm5vZGUxLnF1ZXJ5KHQsZSxuKSx2b2lkKG51bGwhPT10aGlzLm5vZGUyJiZ0aGlzLm5vZGUyLnF1ZXJ5KHQsZSxuKSkpOm51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHdufX0pLGUoTG4ucHJvdG90eXBlLHtidWlsZFRyZWU6ZnVuY3Rpb24oKXtacy5zb3J0KHRoaXMubGVhdmVzLG5ldyBJbnRlcnZhbFJUcmVlTm9kZS5Ob2RlQ29tcGFyYXRvcik7Zm9yKHZhciB0LGU9dGhpcy5sZWF2ZXMsbj1uZXcgSTs7KXtpZih0aGlzLmJ1aWxkTGV2ZWwoZSxuKSwxPT09bi5zaXplKCkpcmV0dXJuIG4uZ2V0KDApO3Q9ZSxlPW4sbj10fX0saW5zZXJ0OmZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT09dGhpcy5yb290KXRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJJbmRleCBjYW5ub3QgYmUgYWRkZWQgdG8gb25jZSBpdCBoYXMgYmVlbiBxdWVyaWVkXCIpO3RoaXMubGVhdmVzLmFkZChuZXcgU24odCxlLG4pKX0scXVlcnk6ZnVuY3Rpb24odCxlLG4pe3RoaXMuaW5pdCgpLHRoaXMucm9vdC5xdWVyeSh0LGUsbil9LGJ1aWxkUm9vdDpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5yb290P251bGw6dm9pZCh0aGlzLnJvb3Q9dGhpcy5idWlsZFRyZWUoKSl9LHByaW50Tm9kZTpmdW5jdGlvbih0KXtBLm91dC5wcmludGxuKFh0LnRvTGluZVN0cmluZyhuZXcgZCh0Lm1pbix0aGlzLmxldmVsKSxuZXcgZCh0Lm1heCx0aGlzLmxldmVsKSkpfSxpbml0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnJvb3Q/bnVsbDp2b2lkIHRoaXMuYnVpbGRSb290KCl9LGJ1aWxkTGV2ZWw6ZnVuY3Rpb24odCxlKXt0aGlzLmxldmVsKyssZS5jbGVhcigpO2Zvcih2YXIgbj0wO248dC5zaXplKCk7bis9Mil7dmFyIGk9dC5nZXQobik7bnVsbD09PShuKzE8dC5zaXplKCk/dC5nZXQobik6bnVsbCk/ZS5hZGQoaSk6KGk9bmV3IHduKHQuZ2V0KG4pLHQuZ2V0KG4rMSkpLGUuYWRkKGkpKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIExufX0pLGUoUm4ucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7aWYodGhpcy5pc0ZvcmNlZFRvTGluZVN0cmluZyYmdCBpbnN0YW5jZW9mIFB0KXt2YXIgZT10LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpO3JldHVybiB0aGlzLmxpbmVzLmFkZChlKSxudWxsfXQgaW5zdGFuY2VvZiBDdCYmdGhpcy5saW5lcy5hZGQodCl9LHNldEZvcmNlVG9MaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe3RoaXMuaXNGb3JjZWRUb0xpbmVTdHJpbmc9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bcV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFJufX0pLFJuLmdldEdlb21ldHJ5PWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdC5nZXRGYWN0b3J5KCkuYnVpbGRHZW9tZXRyeShSbi5nZXRMaW5lcyh0KSl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXTtyZXR1cm4gZS5nZXRGYWN0b3J5KCkuYnVpbGRHZW9tZXRyeShSbi5nZXRMaW5lcyhlLHQpKX19LFJuLmdldExpbmVzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIFJuLmdldExpbmVzKGFyZ3VtZW50c1swXSwhMSk7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFIoYXJndW1lbnRzWzBdLG0pJiZSKGFyZ3VtZW50c1sxXSxtKSl7Zm9yKHZhciB0PWFyZ3VtZW50c1sxXSxlPWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7Um4uZ2V0TGluZXMobix0KX1yZXR1cm4gdH1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEImJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0scz1uZXcgSTtyZXR1cm4gaS5hcHBseShuZXcgUm4ocyxyKSksc31pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEImJlIoYXJndW1lbnRzWzFdLG0pKXt2YXIgbz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV07cmV0dXJuIG8gaW5zdGFuY2VvZiBDdD9hLmFkZChvKTpvLmFwcGx5KG5ldyBSbihhKSksYX19ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJlIoYXJndW1lbnRzWzBdLG0pJiZSKGFyZ3VtZW50c1sxXSxtKSl7Zm9yKHZhciB1PWFyZ3VtZW50c1sxXSxsPWFyZ3VtZW50c1syXSxlPWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7bj1lLm5leHQoKTtSbi5nZXRMaW5lcyhuLHUsbCl9cmV0dXJuIHV9aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgQiYmUihhcmd1bWVudHNbMV0sbSkpe289YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO3JldHVybiBhcmd1bWVudHNbMF0uYXBwbHkobmV3IFJuKG8sYSkpLG99fX0sZShUbi5wcm90b3R5cGUse3Zpc2l0SXRlbTpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZCh0KX0sZ2V0SXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtc30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bSWVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBUbn19KSxlKFBuLnByb3RvdHlwZSx7bG9jYXRlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBLdCh0KSxuPW5ldyBibihlKTtyZXR1cm4gdGhpcy5pbmRleC5xdWVyeSh0LnksdC55LG4pLGUuZ2V0TG9jYXRpb24oKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bZm5dfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBQbn19KSxlKGJuLnByb3RvdHlwZSx7dmlzaXRJdGVtOmZ1bmN0aW9uKHQpe3RoaXMuY291bnRlci5jb3VudFNlZ21lbnQodC5nZXRDb29yZGluYXRlKDApLHQuZ2V0Q29vcmRpbmF0ZSgxKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0llXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYm59fSksZShPbi5wcm90b3R5cGUse2luaXQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVJuLmdldExpbmVzKHQpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKS5nZXRDb29yZGluYXRlcygpO3RoaXMuYWRkTGluZShuKX19LGFkZExpbmU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTx0Lmxlbmd0aDtlKyspe3ZhciBuPW5ldyBKdCh0W2UtMV0sdFtlXSksaT1NYXRoLm1pbihuLnAwLnksbi5wMS55KSxyPU1hdGgubWF4KG4ucDAueSxuLnAxLnkpO3RoaXMuaW5kZXguaW5zZXJ0KGkscixuKX19LHF1ZXJ5OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPW5ldyBUbjtyZXR1cm4gdGhpcy5pbmRleC5xdWVyeSh0LGUsbiksbi5nZXRJdGVtcygpfTM9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sdGhpcy5pbmRleC5xdWVyeSh0LGUsbikpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPbn19KSxQbi5TZWdtZW50VmlzaXRvcj1ibixQbi5JbnRlcnZhbEluZGV4ZWRHZW9tZXRyeT1PbixlKF9uLnByb3RvdHlwZSx7Z2V0U2VnbWVudEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnbWVudEluZGV4fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmR9LHByaW50OmZ1bmN0aW9uKHQpe3QucHJpbnQodGhpcy5jb29yZCksdC5wcmludChcIiBzZWcgIyA9IFwiK3RoaXMuc2VnbWVudEluZGV4KSx0LnByaW50bG4oXCIgZGlzdCA9IFwiK3RoaXMuZGlzdCl9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wYXJlKHQuc2VnbWVudEluZGV4LHQuZGlzdCl9LGlzRW5kUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10aGlzLnNlZ21lbnRJbmRleCYmMD09PXRoaXMuZGlzdHx8dGhpcy5zZWdtZW50SW5kZXg9PT10fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkK1wiIHNlZyAjID0gXCIrdGhpcy5zZWdtZW50SW5kZXgrXCIgZGlzdCA9IFwiK3RoaXMuZGlzdH0sZ2V0RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXN0fSxjb21wYXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2VnbWVudEluZGV4PHQ/LTE6dGhpcy5zZWdtZW50SW5kZXg+dD8xOnRoaXMuZGlzdDxlPy0xOnRoaXMuZGlzdD5lPzE6MH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5baV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIF9ufX0pLGUoTW4ucHJvdG90eXBlLHtwcmludDpmdW5jdGlvbih0KXt0LnByaW50bG4oXCJJbnRlcnNlY3Rpb25zOlwiKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkucHJpbnQodCl9fSxpdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKX0sYWRkU3BsaXRFZGdlczpmdW5jdGlvbih0KXt0aGlzLmFkZEVuZHBvaW50cygpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCksbj1lLm5leHQoKTtlLmhhc05leHQoKTspe3ZhciBpPWUubmV4dCgpLHI9dGhpcy5jcmVhdGVTcGxpdEVkZ2UobixpKTt0LmFkZChyKSxuPWl9fSxhZGRFbmRwb2ludHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVkZ2UucHRzLmxlbmd0aC0xO3RoaXMuYWRkKHRoaXMuZWRnZS5wdHNbMF0sMCwwKSx0aGlzLmFkZCh0aGlzLmVkZ2UucHRzW3RdLHQsMCl9LGNyZWF0ZVNwbGl0RWRnZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuc2VnbWVudEluZGV4LXQuc2VnbWVudEluZGV4KzIsaT10aGlzLmVkZ2UucHRzW2Uuc2VnbWVudEluZGV4XSxpPTA8ZS5kaXN0fHwhZS5jb29yZC5lcXVhbHMyRChpKTtpfHxuLS07dmFyIHI9bmV3IEFycmF5KG4pLmZpbGwobnVsbCkscz0wO3JbcysrXT1uZXcgZCh0LmNvb3JkKTtmb3IodmFyIG89dC5zZWdtZW50SW5kZXgrMTtvPD1lLnNlZ21lbnRJbmRleDtvKyspcltzKytdPXRoaXMuZWRnZS5wdHNbb107cmV0dXJuIGkmJihyW3NdPWUuY29vcmQpLG5ldyBHbihyLG5ldyBKZSh0aGlzLmVkZ2UubGFiZWwpKX0sYWRkOmZ1bmN0aW9uKHQsZSxuKXtlPW5ldyBfbih0LGUsbiksbj10aGlzLm5vZGVNYXAuZ2V0KGUpO3JldHVybiBudWxsIT09bj9uOih0aGlzLm5vZGVNYXAucHV0KGUsZSksZSl9LGlzSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtpZihlLm5leHQoKS5jb29yZC5lcXVhbHModCkpcmV0dXJuITB9cmV0dXJuITF9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE1ufX0pLGUoRG4ucHJvdG90eXBlLHtnZXRDaGFpblN0YXJ0SW5kaWNlczpmdW5jdGlvbih0KXt2YXIgZT0wLG49bmV3IEk7bi5hZGQobmV3IGIoZSkpO2Rve3ZhciBpPXRoaXMuZmluZENoYWluRW5kKHQsZSl9d2hpbGUobi5hZGQobmV3IGIoaSkpLChlPWkpPHQubGVuZ3RoLTEpO3JldHVybiBEbi50b0ludEFycmF5KG4pfSxmaW5kQ2hhaW5FbmQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49R2UucXVhZHJhbnQodFtlXSx0W2UrMV0pLGk9ZSsxO2k8dC5sZW5ndGg7KXtpZihHZS5xdWFkcmFudCh0W2ktMV0sdFtpXSkhPT1uKWJyZWFrO2krK31yZXR1cm4gaS0xfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBEbn19KSxEbi50b0ludEFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCksbj0wO248ZS5sZW5ndGg7bisrKWVbbl09dC5nZXQobikuaW50VmFsdWUoKTtyZXR1cm4gZX0sZShBbi5wcm90b3R5cGUse2dldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRzfSxnZXRNYXhYOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFt0XV0ueCx0PXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFt0KzFdXS54O3JldHVybiB0PGU/ZTp0fSxnZXRNaW5YOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFt0XV0ueCx0PXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFt0KzFdXS54O3JldHVybiBlPHQ/ZTp0fSxjb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluOmZ1bmN0aW9uKCl7aWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPWFyZ3VtZW50c1szXTt0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4odGhpcy5zdGFydEluZGV4W3RdLHRoaXMuc3RhcnRJbmRleFt0KzFdLGUsZS5zdGFydEluZGV4W25dLGUuc3RhcnRJbmRleFtuKzFdLGkpfWVsc2UgaWYoNj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxzPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXSxhPWFyZ3VtZW50c1szXSx1PWFyZ3VtZW50c1s0XSxsPWFyZ3VtZW50c1s1XSx0PXRoaXMucHRzW3JdLGU9dGhpcy5wdHNbc10sbj1vLnB0c1thXSxpPW8ucHRzW3VdO2lmKHMtcj09MSYmdS1hPT0xKXJldHVybiBsLmFkZEludGVyc2VjdGlvbnModGhpcy5lLHIsby5lLGEpLG51bGw7aWYodGhpcy5lbnYxLmluaXQodCxlKSx0aGlzLmVudjIuaW5pdChuLGkpLCF0aGlzLmVudjEuaW50ZXJzZWN0cyh0aGlzLmVudjIpKXJldHVybiBudWxsO249TWF0aC50cnVuYygocitzKS8yKSxpPU1hdGgudHJ1bmMoKGErdSkvMik7cjxuJiYoYTxpJiZ0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4ocixuLG8sYSxpLGwpLGk8dSYmdGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKHIsbixvLGksdSxsKSksbjxzJiYoYTxpJiZ0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4obixzLG8sYSxpLGwpLGk8dSYmdGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKG4scyxvLGksdSxsKSl9fSxnZXRTdGFydEluZGV4ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydEluZGV4fSxjb21wdXRlSW50ZXJzZWN0czpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy5zdGFydEluZGV4Lmxlbmd0aC0xO24rKylmb3IodmFyIGk9MDtpPHQuc3RhcnRJbmRleC5sZW5ndGgtMTtpKyspdGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKG4sdCxpLGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBBbn19KSxlKEZuLnByb3RvdHlwZSx7Z2V0RGVwdGg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kZXB0aFt0XVtlXX0sc2V0RGVwdGg6ZnVuY3Rpb24odCxlLG4pe3RoaXMuZGVwdGhbdF1bZV09bn0saXNOdWxsOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD0wO3Q8Mjt0KyspZm9yKHZhciBlPTA7ZTwzO2UrKylpZih0aGlzLmRlcHRoW3RdW2VdIT09Rm4uTlVMTF9WQUxVRSlyZXR1cm4hMTtyZXR1cm4hMH1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRlcHRoW25dWzFdPT09Rm4uTlVMTF9WQUxVRX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmRlcHRoW2ldW25dPT09Rm4uTlVMTF9WQUxVRX19LG5vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8Mjt0KyspaWYoIXRoaXMuaXNOdWxsKHQpKXt2YXIgZT10aGlzLmRlcHRoW3RdWzFdO3RoaXMuZGVwdGhbdF1bMl08ZSYmKGU9dGhpcy5kZXB0aFt0XVsyXSksZTwwJiYoZT0wKTtmb3IodmFyIG49MTtuPDM7bisrKXt2YXIgaT0wO3RoaXMuZGVwdGhbdF1bbl0+ZSYmKGk9MSksdGhpcy5kZXB0aFt0XVtuXT1pfX19LGdldERlbHRhOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlcHRoW3RdW0tlLlJJR0hUXS10aGlzLmRlcHRoW3RdW0tlLkxFRlRdfSxnZXRMb2NhdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRlcHRoW3RdW2VdPD0wP0wuRVhURVJJT1I6TC5JTlRFUklPUn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIkE6IFwiK3RoaXMuZGVwdGhbMF1bMV0rXCIsXCIrdGhpcy5kZXB0aFswXVsyXStcIiBCOiBcIit0aGlzLmRlcHRoWzFdWzFdK1wiLFwiK3RoaXMuZGVwdGhbMV1bMl19LGFkZDpmdW5jdGlvbigpe3ZhciB0LGU7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBuPWFyZ3VtZW50c1swXSxpPTA7aTwyO2krKylmb3IodmFyIHI9MTtyPDM7cisrKXt2YXIgcz1uLmdldExvY2F0aW9uKGkscik7cyE9PUwuRVhURVJJT1ImJnMhPT1MLklOVEVSSU9SfHwodGhpcy5pc051bGwoaSxyKT90aGlzLmRlcHRoW2ldW3JdPUZuLmRlcHRoQXRMb2NhdGlvbihzKTp0aGlzLmRlcHRoW2ldW3JdKz1Gbi5kZXB0aEF0TG9jYXRpb24ocykpfWVsc2UgMz09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl09PT1MLklOVEVSSU9SJiZ0aGlzLmRlcHRoW3RdW2VdKyspfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBGbn19KSxGbi5kZXB0aEF0TG9jYXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1MLkVYVEVSSU9SPzA6dD09PUwuSU5URVJJT1I/MTpGbi5OVUxMX1ZBTFVFfSxGbi5OVUxMX1ZBTFVFPS0xLGEoR24sZW4pLGUoR24ucHJvdG90eXBlLHtnZXREZXB0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlcHRofSxnZXRDb2xsYXBzZWRFZGdlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEFycmF5KDIpLmZpbGwobnVsbCk7cmV0dXJuIHRbMF09dGhpcy5wdHNbMF0sdFsxXT10aGlzLnB0c1sxXSxuZXcgR24odCxKZS50b0xpbmVMYWJlbCh0aGlzLmxhYmVsKSl9LGlzSXNvbGF0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJc29sYXRlZH0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHN9LHNldElzb2xhdGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzSXNvbGF0ZWQ9dH0sc2V0TmFtZTpmdW5jdGlvbih0KXt0aGlzLm5hbWU9dH0sZXF1YWxzOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEduKSlyZXR1cm4hMTt2YXIgZT10O2lmKHRoaXMucHRzLmxlbmd0aCE9PWUucHRzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49ITAsaT0hMCxyPXRoaXMucHRzLmxlbmd0aCxzPTA7czx0aGlzLnB0cy5sZW5ndGg7cysrKWlmKHRoaXMucHRzW3NdLmVxdWFsczJEKGUucHRzW3NdKXx8KG49ITEpLHRoaXMucHRzW3NdLmVxdWFsczJEKGUucHRzWy0tcl0pfHwoaT0hMSksIW4mJiFpKXJldHVybiExO3JldHVybiEwfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIDA8dGhpcy5wdHMubGVuZ3RoP3RoaXMucHRzWzBdOm51bGw7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5wdHNbdF19fSxwcmludDpmdW5jdGlvbih0KXt0LnByaW50KFwiZWRnZSBcIit0aGlzLm5hbWUrXCI6IFwiKSx0LnByaW50KFwiTElORVNUUklORyAoXCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5wdHMubGVuZ3RoO2UrKykwPGUmJnQucHJpbnQoXCIsXCIpLHQucHJpbnQodGhpcy5wdHNbZV0ueCtcIiBcIit0aGlzLnB0c1tlXS55KTt0LnByaW50KFwiKSAgXCIrdGhpcy5sYWJlbCtcIiBcIit0aGlzLmRlcHRoRGVsdGEpfSxjb21wdXRlSU06ZnVuY3Rpb24odCl7R24udXBkYXRlSU0odGhpcy5sYWJlbCx0KX0saXNDb2xsYXBzZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMubGFiZWwuaXNBcmVhKCkmJigzPT09dGhpcy5wdHMubGVuZ3RoJiYhIXRoaXMucHRzWzBdLmVxdWFscyh0aGlzLnB0c1syXSkpfSxpc0Nsb3NlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c1swXS5lcXVhbHModGhpcy5wdHNbdGhpcy5wdHMubGVuZ3RoLTFdKX0sZ2V0TWF4aW11bVNlZ21lbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy5sZW5ndGgtMX0sZ2V0RGVwdGhEZWx0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlcHRoRGVsdGF9LGdldE51bVBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy5sZW5ndGh9LHByaW50UmV2ZXJzZTpmdW5jdGlvbih0KXt0LnByaW50KFwiZWRnZSBcIit0aGlzLm5hbWUrXCI6IFwiKTtmb3IodmFyIGU9dGhpcy5wdHMubGVuZ3RoLTE7MDw9ZTtlLS0pdC5wcmludCh0aGlzLnB0c1tlXStcIiBcIik7dC5wcmludGxuKFwiXCIpfSxnZXRNb25vdG9uZUNoYWluRWRnZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5tY2UmJih0aGlzLm1jZT1uZXcgQW4odGhpcykpLHRoaXMubWNlfSxnZXRFbnZlbG9wZTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmVudil7dGhpcy5lbnY9bmV3IEM7Zm9yKHZhciB0PTA7dDx0aGlzLnB0cy5sZW5ndGg7dCsrKXRoaXMuZW52LmV4cGFuZFRvSW5jbHVkZSh0aGlzLnB0c1t0XSl9cmV0dXJuIHRoaXMuZW52fSxhZGRJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bmV3IGQodC5nZXRJbnRlcnNlY3Rpb24oaSkpLGU9ZSx0PXQuZ2V0RWRnZURpc3RhbmNlKG4saSksbj1lKzE7bjx0aGlzLnB0cy5sZW5ndGgmJihpPXRoaXMucHRzW25dLHIuZXF1YWxzMkQoaSkmJihlPW4sdD0wKSksdGhpcy5laUxpc3QuYWRkKHIsZSx0KX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgUDt0LmFwcGVuZChcImVkZ2UgXCIrdGhpcy5uYW1lK1wiOiBcIiksdC5hcHBlbmQoXCJMSU5FU1RSSU5HIChcIik7Zm9yKHZhciBlPTA7ZTx0aGlzLnB0cy5sZW5ndGg7ZSsrKTA8ZSYmdC5hcHBlbmQoXCIsXCIpLHQuYXBwZW5kKHRoaXMucHRzW2VdLngrXCIgXCIrdGhpcy5wdHNbZV0ueSk7cmV0dXJuIHQuYXBwZW5kKFwiKSAgXCIrdGhpcy5sYWJlbCtcIiBcIit0aGlzLmRlcHRoRGVsdGEpLHQudG9TdHJpbmcoKX0saXNQb2ludHdpc2VFcXVhbDpmdW5jdGlvbih0KXtpZih0aGlzLnB0cy5sZW5ndGghPT10LnB0cy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLnB0cy5sZW5ndGg7ZSsrKWlmKCF0aGlzLnB0c1tlXS5lcXVhbHMyRCh0LnB0c1tlXSkpcmV0dXJuITE7cmV0dXJuITB9LHNldERlcHRoRGVsdGE6ZnVuY3Rpb24odCl7dGhpcy5kZXB0aERlbHRhPXR9LGdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWlMaXN0fSxhZGRJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuZ2V0SW50ZXJzZWN0aW9uTnVtKCk7aSsrKXRoaXMuYWRkSW50ZXJzZWN0aW9uKHQsZSxuLGkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBHbn19KSxHbi51cGRhdGVJTT1mdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBlbi5wcm90b3R5cGUudXBkYXRlSU0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtlLnNldEF0TGVhc3RJZlZhbGlkKHQuZ2V0TG9jYXRpb24oMCxLZS5PTiksdC5nZXRMb2NhdGlvbigxLEtlLk9OKSwxKSx0LmlzQXJlYSgpJiYoZS5zZXRBdExlYXN0SWZWYWxpZCh0LmdldExvY2F0aW9uKDAsS2UuTEVGVCksdC5nZXRMb2NhdGlvbigxLEtlLkxFRlQpLDIpLGUuc2V0QXRMZWFzdElmVmFsaWQodC5nZXRMb2NhdGlvbigwLEtlLlJJR0hUKSx0LmdldExvY2F0aW9uKDEsS2UuUklHSFQpLDIpKX0sYShxbix1biksZShxbi5wcm90b3R5cGUse2luc2VydEJvdW5kYXJ5UG9pbnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLmFkZE5vZGUoZSkuZ2V0TGFiZWwoKSxlPTE7bi5nZXRMb2NhdGlvbih0LEtlLk9OKT09PUwuQk9VTkRBUlkmJmUrKztlPXFuLmRldGVybWluZUJvdW5kYXJ5KHRoaXMuYm91bmRhcnlOb2RlUnVsZSxlKTtuLnNldExvY2F0aW9uKHQsZSl9LGNvbXB1dGVTZWxmTm9kZXM6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmNvbXB1dGVTZWxmTm9kZXModCxlLCExKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdLHQ9bmV3IEVuKGFyZ3VtZW50c1swXSwhMCwhMSk7dC5zZXRJc0RvbmVJZlByb3BlckludChpKTtlPXRoaXMuY3JlYXRlRWRnZVNldEludGVyc2VjdG9yKCksaT10aGlzLnBhcmVudEdlb20gaW5zdGFuY2VvZiBQdHx8dGhpcy5wYXJlbnRHZW9tIGluc3RhbmNlb2YgUnR8fHRoaXMucGFyZW50R2VvbSBpbnN0YW5jZW9mIGJ0LGk9bnx8IWk7cmV0dXJuIGUuY29tcHV0ZUludGVyc2VjdGlvbnModGhpcy5lZGdlcyx0LGkpLHRoaXMuYWRkU2VsZkludGVyc2VjdGlvbk5vZGVzKHRoaXMuYXJnSW5kZXgpLHR9fSxjb21wdXRlU3BsaXRFZGdlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5lZGdlcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkuZWlMaXN0LmFkZFNwbGl0RWRnZXModCl9fSxjb21wdXRlRWRnZUludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4pe249bmV3IEVuKGUsbiwhMCk7cmV0dXJuIG4uc2V0Qm91bmRhcnlOb2Rlcyh0aGlzLmdldEJvdW5kYXJ5Tm9kZXMoKSx0LmdldEJvdW5kYXJ5Tm9kZXMoKSksdGhpcy5jcmVhdGVFZGdlU2V0SW50ZXJzZWN0b3IoKS5jb21wdXRlSW50ZXJzZWN0aW9ucyh0aGlzLmVkZ2VzLHQuZWRnZXMsbiksbn0sZ2V0R2VvbWV0cnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnRHZW9tfSxnZXRCb3VuZGFyeU5vZGVSdWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm91bmRhcnlOb2RlUnVsZX0saGFzVG9vRmV3UG9pbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Rvb0Zld1BvaW50c30sYWRkUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdDthcmd1bWVudHNbMF1pbnN0YW5jZW9mIHd0Pyh0PWFyZ3VtZW50c1swXS5nZXRDb29yZGluYXRlKCksdGhpcy5pbnNlcnRQb2ludCh0aGlzLmFyZ0luZGV4LHQsTC5JTlRFUklPUikpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCYmKHQ9YXJndW1lbnRzWzBdLHRoaXMuaW5zZXJ0UG9pbnQodGhpcy5hcmdJbmRleCx0LEwuSU5URVJJT1IpKX0sYWRkUG9seWdvbjpmdW5jdGlvbih0KXt0aGlzLmFkZFBvbHlnb25SaW5nKHQuZ2V0RXh0ZXJpb3JSaW5nKCksTC5FWFRFUklPUixMLklOVEVSSU9SKTtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7ZSsrKXt2YXIgbj10LmdldEludGVyaW9yUmluZ04oZSk7dGhpcy5hZGRQb2x5Z29uUmluZyhuLEwuSU5URVJJT1IsTC5FWFRFUklPUil9fSxhZGRFZGdlOmZ1bmN0aW9uKHQpe3RoaXMuaW5zZXJ0RWRnZSh0KTt0PXQuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLmluc2VydFBvaW50KHRoaXMuYXJnSW5kZXgsdFswXSxMLkJPVU5EQVJZKSx0aGlzLmluc2VydFBvaW50KHRoaXMuYXJnSW5kZXgsdFt0Lmxlbmd0aC0xXSxMLkJPVU5EQVJZKX0sYWRkTGluZVN0cmluZzpmdW5jdGlvbih0KXt2YXIgZT1ILnJlbW92ZVJlcGVhdGVkUG9pbnRzKHQuZ2V0Q29vcmRpbmF0ZXMoKSk7aWYoZS5sZW5ndGg8MilyZXR1cm4gdGhpcy5faGFzVG9vRmV3UG9pbnRzPSEwLHRoaXMuaW52YWxpZFBvaW50PWVbMF0sbnVsbDt2YXIgbj1uZXcgR24oZSxuZXcgSmUodGhpcy5hcmdJbmRleCxMLklOVEVSSU9SKSk7dGhpcy5saW5lRWRnZU1hcC5wdXQodCxuKSx0aGlzLmluc2VydEVkZ2UobiksbC5pc1RydWUoMjw9ZS5sZW5ndGgsXCJmb3VuZCBMaW5lU3RyaW5nIHdpdGggc2luZ2xlIHBvaW50XCIpLHRoaXMuaW5zZXJ0Qm91bmRhcnlQb2ludCh0aGlzLmFyZ0luZGV4LGVbMF0pLHRoaXMuaW5zZXJ0Qm91bmRhcnlQb2ludCh0aGlzLmFyZ0luZGV4LGVbZS5sZW5ndGgtMV0pfSxnZXRJbnZhbGlkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnR9LGdldEJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ2V0Qm91bmRhcnlOb2RlcygpLGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MCxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO2VbbisrXT1yLmdldENvb3JkaW5hdGUoKS5jb3B5KCl9cmV0dXJuIGV9LGdldEJvdW5kYXJ5Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuYm91bmRhcnlOb2RlcyYmKHRoaXMuYm91bmRhcnlOb2Rlcz10aGlzLm5vZGVzLmdldEJvdW5kYXJ5Tm9kZXModGhpcy5hcmdJbmRleCkpLHRoaXMuYm91bmRhcnlOb2Rlc30sYWRkU2VsZkludGVyc2VjdGlvbk5vZGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmlzQm91bmRhcnlOb2RlKHQsZSk/bnVsbDp2b2lkKG49PT1MLkJPVU5EQVJZJiZ0aGlzLnVzZUJvdW5kYXJ5RGV0ZXJtaW5hdGlvblJ1bGU/dGhpcy5pbnNlcnRCb3VuZGFyeVBvaW50KHQsZSk6dGhpcy5pbnNlcnRQb2ludCh0LGUsbikpfSxhZGRQb2x5Z29uUmluZzpmdW5jdGlvbih0LGUsbil7aWYodC5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dmFyIGk9SC5yZW1vdmVSZXBlYXRlZFBvaW50cyh0LmdldENvb3JkaW5hdGVzKCkpO2lmKGkubGVuZ3RoPDQpcmV0dXJuIHRoaXMuX2hhc1Rvb0Zld1BvaW50cz0hMCx0aGlzLmludmFsaWRQb2ludD1pWzBdLG51bGw7dmFyIHI9ZSxzPW47WnQuaXNDQ1coaSkmJihyPW4scz1lKTtzPW5ldyBHbihpLG5ldyBKZSh0aGlzLmFyZ0luZGV4LEwuQk9VTkRBUlkscixzKSk7dGhpcy5saW5lRWRnZU1hcC5wdXQodCxzKSx0aGlzLmluc2VydEVkZ2UocyksdGhpcy5pbnNlcnRQb2ludCh0aGlzLmFyZ0luZGV4LGlbMF0sTC5CT1VOREFSWSl9LGluc2VydFBvaW50OmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLm5vZGVzLmFkZE5vZGUoZSksZT1pLmdldExhYmVsKCk7bnVsbD09PWU/aS5sYWJlbD1uZXcgSmUodCxuKTplLnNldExvY2F0aW9uKHQsbil9LGNyZWF0ZUVkZ2VTZXRJbnRlcnNlY3RvcjpmdW5jdGlvbigpe3JldHVybiBuZXcgSW59LGFkZFNlbGZJbnRlcnNlY3Rpb25Ob2RlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5lZGdlcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOylmb3IodmFyIG49ZS5uZXh0KCksaT1uLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCkscj1uLmVpTGlzdC5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHM9ci5uZXh0KCk7dGhpcy5hZGRTZWxmSW50ZXJzZWN0aW9uTm9kZSh0LHMuY29vcmQsaSl9fSxhZGQ6ZnVuY3Rpb24oKXtpZigxIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdW4ucHJvdG90eXBlLmFkZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHQuaXNFbXB0eSgpKXJldHVybiBudWxsO2lmKHQgaW5zdGFuY2VvZiBidCYmKHRoaXMudXNlQm91bmRhcnlEZXRlcm1pbmF0aW9uUnVsZT0hMSksdCBpbnN0YW5jZW9mIFJ0KXRoaXMuYWRkUG9seWdvbih0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBDdCl0aGlzLmFkZExpbmVTdHJpbmcodCk7ZWxzZSBpZih0IGluc3RhbmNlb2Ygd3QpdGhpcy5hZGRQb2ludCh0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBUdCl0aGlzLmFkZENvbGxlY3Rpb24odCk7ZWxzZSBpZih0IGluc3RhbmNlb2YgZ3QpdGhpcy5hZGRDb2xsZWN0aW9uKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGJ0KXRoaXMuYWRkQ29sbGVjdGlvbih0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIGZ0KSl0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24odC5nZXRDbGFzcygpLmdldE5hbWUoKSk7dGhpcy5hZGRDb2xsZWN0aW9uKHQpfX0sYWRkQ29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7dGhpcy5hZGQobil9fSxsb2NhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIFIodGhpcy5wYXJlbnRHZW9tLEx0KSYmNTA8dGhpcy5wYXJlbnRHZW9tLmdldE51bUdlb21ldHJpZXMoKT8obnVsbD09PXRoaXMuYXJlYVB0TG9jYXRvciYmKHRoaXMuYXJlYVB0TG9jYXRvcj1uZXcgUG4odGhpcy5wYXJlbnRHZW9tKSksdGhpcy5hcmVhUHRMb2NhdG9yLmxvY2F0ZSh0KSk6dGhpcy5wdExvY2F0b3IubG9jYXRlKHQsdGhpcy5wYXJlbnRHZW9tKX0sZmluZEVkZ2U6ZnVuY3Rpb24oKXtpZigxIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdW4ucHJvdG90eXBlLmZpbmRFZGdlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMubGluZUVkZ2VNYXAuZ2V0KHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBxbn19KSxxbi5kZXRlcm1pbmVCb3VuZGFyeT1mdW5jdGlvbih0LGUpe3JldHVybiB0LmlzSW5Cb3VuZGFyeShlKT9MLkJPVU5EQVJZOkwuSU5URVJJT1J9LGUoQm4ucHJvdG90eXBlLHtnZXRBcmdHZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcmdbdF0uZ2V0R2VvbWV0cnkoKX0sc2V0Q29tcHV0YXRpb25QcmVjaXNpb246ZnVuY3Rpb24odCl7dGhpcy5yZXN1bHRQcmVjaXNpb25Nb2RlbD10LHRoaXMubGkuc2V0UHJlY2lzaW9uTW9kZWwodGhpcy5yZXN1bHRQcmVjaXNpb25Nb2RlbCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEJufX0pLGUoem4ucHJvdG90eXBlLHtjb21wYXJlVG86ZnVuY3Rpb24odCl7cmV0dXJuIHpuLmNvbXBhcmVPcmllbnRlZCh0aGlzLnB0cyx0aGlzLl9vcmllbnRhdGlvbix0LnB0cyx0Ll9vcmllbnRhdGlvbil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB6bn19KSx6bi5vcmllbnRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gMT09PUguaW5jcmVhc2luZ0RpcmVjdGlvbih0KX0sem4uY29tcGFyZU9yaWVudGVkPWZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj1lPzE6LTEscz1pPzE6LTEsbz1lP3QubGVuZ3RoOi0xLGE9aT9uLmxlbmd0aDotMSx1PWU/MDp0Lmxlbmd0aC0xLGw9aT8wOm4ubGVuZ3RoLTE7Oyl7dmFyIGg9dFt1XS5jb21wYXJlVG8obltsXSk7aWYoMCE9PWgpcmV0dXJuIGg7dmFyIGM9KHUrPXIpPT09byxoPShsKz1zKT09PWE7aWYoYyYmIWgpcmV0dXJuLTE7aWYoIWMmJmgpcmV0dXJuIDE7aWYoYyYmaClyZXR1cm4gMH19LGUoVm4ucHJvdG90eXBlLHtwcmludDpmdW5jdGlvbih0KXt0LnByaW50KFwiTVVMVElMSU5FU1RSSU5HICggXCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5lZGdlcy5zaXplKCk7ZSsrKXt2YXIgbj10aGlzLmVkZ2VzLmdldChlKTswPGUmJnQucHJpbnQoXCIsXCIpLHQucHJpbnQoXCIoXCIpO2Zvcih2YXIgaT1uLmdldENvb3JkaW5hdGVzKCkscj0wO3I8aS5sZW5ndGg7cisrKTA8ciYmdC5wcmludChcIixcIiksdC5wcmludChpW3JdLngrXCIgXCIraVtyXS55KTt0LnByaW50bG4oXCIpXCIpfXQucHJpbnQoXCIpICBcIil9LGFkZEFsbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSl9LGZpbmRFZGdlSW5kZXg6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmVkZ2VzLnNpemUoKTtlKyspaWYodGhpcy5lZGdlcy5nZXQoZSkuZXF1YWxzKHQpKXJldHVybiBlO3JldHVybi0xfSxpdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzLml0ZXJhdG9yKCl9LGdldEVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXN9LGdldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lZGdlcy5nZXQodCl9LGZpbmRFcXVhbEVkZ2U6ZnVuY3Rpb24odCl7dD1uZXcgem4odC5nZXRDb29yZGluYXRlcygpKTtyZXR1cm4gdGhpcy5vY2FNYXAuZ2V0KHQpfSxhZGQ6ZnVuY3Rpb24odCl7dGhpcy5lZGdlcy5hZGQodCk7dmFyIGU9bmV3IHpuKHQuZ2V0Q29vcmRpbmF0ZXMoKSk7dGhpcy5vY2FNYXAucHV0KGUsdCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFZufX0pLGEoa24sQm4pLGUoa24ucHJvdG90eXBlLHtpbnNlcnRVbmlxdWVFZGdlOmZ1bmN0aW9uKHQpe3ZhciBlLG4saT10aGlzLmVkZ2VMaXN0LmZpbmRFcXVhbEVkZ2UodCk7bnVsbCE9PWk/KGU9aS5nZXRMYWJlbCgpLG49dC5nZXRMYWJlbCgpLGkuaXNQb2ludHdpc2VFcXVhbCh0KXx8KG49bmV3IEplKHQuZ2V0TGFiZWwoKSkpLmZsaXAoKSwoaT1pLmdldERlcHRoKCkpLmlzTnVsbCgpJiZpLmFkZChlKSxpLmFkZChuKSxlLm1lcmdlKG4pKTp0aGlzLmVkZ2VMaXN0LmFkZCh0KX0sZ2V0R3JhcGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncmFwaH0sY2FuY2VsRHVwbGljYXRlUmVzdWx0RWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ncmFwaC5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKSxuPWUuZ2V0U3ltKCk7ZS5pc0luUmVzdWx0KCkmJm4uaXNJblJlc3VsdCgpJiYoZS5zZXRJblJlc3VsdCghMSksbi5zZXRJblJlc3VsdCghMSkpfX0saXNDb3ZlcmVkQnlMQTpmdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuaXNDb3ZlcmVkKHQsdGhpcy5yZXN1bHRMaW5lTGlzdCl8fCEhdGhpcy5pc0NvdmVyZWQodCx0aGlzLnJlc3VsdFBvbHlMaXN0KX0sY29tcHV0ZUdlb21ldHJ5OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW5ldyBJO3JldHVybiByLmFkZEFsbCh0KSxyLmFkZEFsbChlKSxyLmFkZEFsbChuKSxyLmlzRW1wdHkoKT9rbi5jcmVhdGVFbXB0eVJlc3VsdChpLHRoaXMuYXJnWzBdLmdldEdlb21ldHJ5KCksdGhpcy5hcmdbMV0uZ2V0R2VvbWV0cnkoKSx0aGlzLmdlb21GYWN0KTp0aGlzLmdlb21GYWN0LmJ1aWxkR2VvbWV0cnkocil9LG1lcmdlU3ltTGFiZWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ3JhcGguZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dC5uZXh0KCkuZ2V0RWRnZXMoKS5tZXJnZVN5bUxhYmVscygpfX0saXNDb3ZlcmVkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKHRoaXMucHRMb2NhdG9yLmxvY2F0ZSh0LGkpIT09TC5FWFRFUklPUilyZXR1cm4hMH1yZXR1cm4hMX0scmVwbGFjZUNvbGxhcHNlZEVkZ2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBJLGU9dGhpcy5lZGdlTGlzdC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5pc0NvbGxhcHNlZCgpJiYoZS5yZW1vdmUoKSx0LmFkZChuLmdldENvbGxhcHNlZEVkZ2UoKSkpfXRoaXMuZWRnZUxpc3QuYWRkQWxsKHQpfSx1cGRhdGVOb2RlTGFiZWxsaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ3JhcGguZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCksbj1lLmdldEVkZ2VzKCkuZ2V0TGFiZWwoKTtlLmdldExhYmVsKCkubWVyZ2Uobil9fSxnZXRSZXN1bHRHZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wdXRlT3ZlcmxheSh0KSx0aGlzLnJlc3VsdEdlb219LGluc2VydFVuaXF1ZUVkZ2VzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLmluc2VydFVuaXF1ZUVkZ2Uobil9fSxjb21wdXRlT3ZlcmxheTpmdW5jdGlvbih0KXt0aGlzLmNvcHlQb2ludHMoMCksdGhpcy5jb3B5UG9pbnRzKDEpLHRoaXMuYXJnWzBdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSwhMSksdGhpcy5hcmdbMV0uY29tcHV0ZVNlbGZOb2Rlcyh0aGlzLmxpLCExKSx0aGlzLmFyZ1swXS5jb21wdXRlRWRnZUludGVyc2VjdGlvbnModGhpcy5hcmdbMV0sdGhpcy5saSwhMCk7dmFyIGU9bmV3IEk7dGhpcy5hcmdbMF0uY29tcHV0ZVNwbGl0RWRnZXMoZSksdGhpcy5hcmdbMV0uY29tcHV0ZVNwbGl0RWRnZXMoZSksdGhpcy5pbnNlcnRVbmlxdWVFZGdlcyhlKSx0aGlzLmNvbXB1dGVMYWJlbHNGcm9tRGVwdGhzKCksdGhpcy5yZXBsYWNlQ29sbGFwc2VkRWRnZXMoKSxXZS5jaGVja1ZhbGlkKHRoaXMuZWRnZUxpc3QuZ2V0RWRnZXMoKSksdGhpcy5ncmFwaC5hZGRFZGdlcyh0aGlzLmVkZ2VMaXN0LmdldEVkZ2VzKCkpLHRoaXMuY29tcHV0ZUxhYmVsbGluZygpLHRoaXMubGFiZWxJbmNvbXBsZXRlTm9kZXMoKSx0aGlzLmZpbmRSZXN1bHRBcmVhRWRnZXModCksdGhpcy5jYW5jZWxEdXBsaWNhdGVSZXN1bHRFZGdlcygpO2U9bmV3IGxuKHRoaXMuZ2VvbUZhY3QpO2UuYWRkKHRoaXMuZ3JhcGgpLHRoaXMucmVzdWx0UG9seUxpc3Q9ZS5nZXRQb2x5Z29ucygpO2U9bmV3IGhuKHRoaXMsdGhpcy5nZW9tRmFjdCx0aGlzLnB0TG9jYXRvcik7dGhpcy5yZXN1bHRMaW5lTGlzdD1lLmJ1aWxkKHQpO2U9bmV3IGNuKHRoaXMsdGhpcy5nZW9tRmFjdCx0aGlzLnB0TG9jYXRvcik7dGhpcy5yZXN1bHRQb2ludExpc3Q9ZS5idWlsZCh0KSx0aGlzLnJlc3VsdEdlb209dGhpcy5jb21wdXRlR2VvbWV0cnkodGhpcy5yZXN1bHRQb2ludExpc3QsdGhpcy5yZXN1bHRMaW5lTGlzdCx0aGlzLnJlc3VsdFBvbHlMaXN0LHQpfSxsYWJlbEluY29tcGxldGVOb2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5wdExvY2F0b3IubG9jYXRlKHQuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuYXJnW2VdLmdldEdlb21ldHJ5KCkpO3QuZ2V0TGFiZWwoKS5zZXRMb2NhdGlvbihlLG4pfSxjb3B5UG9pbnRzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFyZ1t0XS5nZXROb2RlSXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuZ3JhcGguYWRkTm9kZShuLmdldENvb3JkaW5hdGUoKSkuc2V0TGFiZWwodCxuLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCkpfX0sZmluZFJlc3VsdEFyZWFFZGdlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5ncmFwaC5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKTtpLmlzQXJlYSgpJiYhbi5pc0ludGVyaW9yQXJlYUVkZ2UoKSYma24uaXNSZXN1bHRPZk9wKGkuZ2V0TG9jYXRpb24oMCxLZS5SSUdIVCksaS5nZXRMb2NhdGlvbigxLEtlLlJJR0hUKSx0KSYmbi5zZXRJblJlc3VsdCghMCl9fSxjb21wdXRlTGFiZWxzRnJvbURlcHRoczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmVkZ2VMaXN0Lml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKSxuPWUuZ2V0TGFiZWwoKSxpPWUuZ2V0RGVwdGgoKTtpZighaS5pc051bGwoKSl7aS5ub3JtYWxpemUoKTtmb3IodmFyIHI9MDtyPDI7cisrKW4uaXNOdWxsKHIpfHwhbi5pc0FyZWEoKXx8aS5pc051bGwocil8fCgwPT09aS5nZXREZWx0YShyKT9uLnRvTGluZShyKToobC5pc1RydWUoIWkuaXNOdWxsKHIsS2UuTEVGVCksXCJkZXB0aCBvZiBMRUZUIHNpZGUgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkXCIpLG4uc2V0TG9jYXRpb24ocixLZS5MRUZULGkuZ2V0TG9jYXRpb24ocixLZS5MRUZUKSksbC5pc1RydWUoIWkuaXNOdWxsKHIsS2UuUklHSFQpLFwiZGVwdGggb2YgUklHSFQgc2lkZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWRcIiksbi5zZXRMb2NhdGlvbihyLEtlLlJJR0hULGkuZ2V0TG9jYXRpb24ocixLZS5SSUdIVCkpKSl9fX0sY29tcHV0ZUxhYmVsbGluZzpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3QubmV4dCgpLmdldEVkZ2VzKCkuY29tcHV0ZUxhYmVsbGluZyh0aGlzLmFyZyl9dGhpcy5tZXJnZVN5bUxhYmVscygpLHRoaXMudXBkYXRlTm9kZUxhYmVsbGluZygpfSxsYWJlbEluY29tcGxldGVOb2RlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpLG49ZS5nZXRMYWJlbCgpO2UuaXNJc29sYXRlZCgpJiYobi5pc051bGwoMCk/dGhpcy5sYWJlbEluY29tcGxldGVOb2RlKGUsMCk6dGhpcy5sYWJlbEluY29tcGxldGVOb2RlKGUsMSkpLGUuZ2V0RWRnZXMoKS51cGRhdGVMYWJlbGxpbmcobil9fSxpc0NvdmVyZWRCeUE6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmlzQ292ZXJlZCh0LHRoaXMucmVzdWx0UG9seUxpc3QpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBrbn19KSxrbi5vdmVybGF5T3A9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcga24odCxlKS5nZXRSZXN1bHRHZW9tZXRyeShuKX0sa24uaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSl7aWYodC5pc0VtcHR5KCl8fGUuaXNFbXB0eSgpKXJldHVybiBrbi5jcmVhdGVFbXB0eVJlc3VsdChrbi5JTlRFUlNFQ1RJT04sdCxlLHQuZ2V0RmFjdG9yeSgpKTtpZih0LmlzR2VvbWV0cnlDb2xsZWN0aW9uKCkpe3ZhciBuPWU7cmV0dXJuIGplLm1hcCh0LHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltNYXBPcF19LG1hcDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnRlcnNlY3Rpb24obil9fSl9cmV0dXJuIHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksdC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbihlKSxVbi5vdmVybGF5T3AodCxlLGtuLklOVEVSU0VDVElPTil9LGtuLnN5bURpZmZlcmVuY2U9ZnVuY3Rpb24odCxlKXtpZih0LmlzRW1wdHkoKXx8ZS5pc0VtcHR5KCkpe2lmKHQuaXNFbXB0eSgpJiZlLmlzRW1wdHkoKSlyZXR1cm4ga24uY3JlYXRlRW1wdHlSZXN1bHQoa24uU1lNRElGRkVSRU5DRSx0LGUsdC5nZXRGYWN0b3J5KCkpO2lmKHQuaXNFbXB0eSgpKXJldHVybiBlLmNvcHkoKTtpZihlLmlzRW1wdHkoKSlyZXR1cm4gdC5jb3B5KCl9cmV0dXJuIHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksdC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbihlKSxVbi5vdmVybGF5T3AodCxlLGtuLlNZTURJRkZFUkVOQ0UpfSxrbi5yZXN1bHREaW1lbnNpb249ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUuZ2V0RGltZW5zaW9uKCksZT1uLmdldERpbWVuc2lvbigpLG49LTE7c3dpdGNoKHQpe2Nhc2Uga24uSU5URVJTRUNUSU9OOm49TWF0aC5taW4oaSxlKTticmVhaztjYXNlIGtuLlVOSU9OOm49TWF0aC5tYXgoaSxlKTticmVhaztjYXNlIGtuLkRJRkZFUkVOQ0U6bj1pO2JyZWFrO2Nhc2Uga24uU1lNRElGRkVSRU5DRTpuPU1hdGgubWF4KGksZSl9cmV0dXJuIG59LGtuLmNyZWF0ZUVtcHR5UmVzdWx0PWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW51bGw7c3dpdGNoKGtuLnJlc3VsdERpbWVuc2lvbih0LGUsbikpe2Nhc2UtMTpyPWkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKG5ldyBBcnJheSgwKS5maWxsKG51bGwpKTticmVhaztjYXNlIDA6cj1pLmNyZWF0ZVBvaW50KCk7YnJlYWs7Y2FzZSAxOnI9aS5jcmVhdGVMaW5lU3RyaW5nKCk7YnJlYWs7Y2FzZSAyOnI9aS5jcmVhdGVQb2x5Z29uKCl9cmV0dXJuIHJ9LGtuLmRpZmZlcmVuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0VtcHR5KCk/a24uY3JlYXRlRW1wdHlSZXN1bHQoa24uRElGRkVSRU5DRSx0LGUsdC5nZXRGYWN0b3J5KCkpOmUuaXNFbXB0eSgpP3QuY29weSgpOih0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksVW4ub3ZlcmxheU9wKHQsZSxrbi5ESUZGRVJFTkNFKSl9LGtuLmlzUmVzdWx0T2ZPcD1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj10LmdldExvY2F0aW9uKDApLHQ9dC5nZXRMb2NhdGlvbigxKTtyZXR1cm4ga24uaXNSZXN1bHRPZk9wKG4sdCxlKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07c3dpdGNoKHQ9PT1MLkJPVU5EQVJZJiYodD1MLklOVEVSSU9SKSxlPT09TC5CT1VOREFSWSYmKGU9TC5JTlRFUklPUiksYXJndW1lbnRzWzJdKXtjYXNlIGtuLklOVEVSU0VDVElPTjpyZXR1cm4gdD09PUwuSU5URVJJT1ImJmU9PT1MLklOVEVSSU9SO2Nhc2Uga24uVU5JT046cmV0dXJuIHQ9PT1MLklOVEVSSU9SfHxlPT09TC5JTlRFUklPUjtjYXNlIGtuLkRJRkZFUkVOQ0U6cmV0dXJuIHQ9PT1MLklOVEVSSU9SJiZlIT09TC5JTlRFUklPUjtjYXNlIGtuLlNZTURJRkZFUkVOQ0U6cmV0dXJuIHQ9PT1MLklOVEVSSU9SJiZlIT09TC5JTlRFUklPUnx8dCE9PUwuSU5URVJJT1ImJmU9PT1MLklOVEVSSU9SfXJldHVybiExfX0sa24uSU5URVJTRUNUSU9OPTEsa24uVU5JT049Mixrbi5ESUZGRVJFTkNFPTMsa24uU1lNRElGRkVSRU5DRT00LGUoWW4ucHJvdG90eXBlLHtzZWxmU25hcDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGFlKHQpLnNuYXBUbyh0LHRoaXMuc25hcFRvbGVyYW5jZSl9LHJlbW92ZUNvbW1vbkJpdHM6ZnVuY3Rpb24odCl7dGhpcy5jYnI9bmV3IGhlLHRoaXMuY2JyLmFkZCh0WzBdKSx0aGlzLmNici5hZGQodFsxXSk7dmFyIGU9bmV3IEFycmF5KDIpLmZpbGwobnVsbCk7cmV0dXJuIGVbMF09dGhpcy5jYnIucmVtb3ZlQ29tbW9uQml0cyh0WzBdLmNvcHkoKSksZVsxXT10aGlzLmNici5yZW1vdmVDb21tb25CaXRzKHRbMV0uY29weSgpKSxlfSxwcmVwYXJlUmVzdWx0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNici5hZGRDb21tb25CaXRzKHQpLHR9LGdldFJlc3VsdEdlb21ldHJ5OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuc25hcCh0aGlzLmdlb20pLHQ9a24ub3ZlcmxheU9wKGVbMF0sZVsxXSx0KTtyZXR1cm4gdGhpcy5wcmVwYXJlUmVzdWx0KHQpfSxjaGVja1ZhbGlkOmZ1bmN0aW9uKHQpe3QuaXNWYWxpZCgpfHxBLm91dC5wcmludGxuKFwiU25hcHBlZCBnZW9tZXRyeSBpcyBpbnZhbGlkXCIpfSxjb21wdXRlU25hcFRvbGVyYW5jZTpmdW5jdGlvbigpe3RoaXMuc25hcFRvbGVyYW5jZT1hZS5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2UodGhpcy5nZW9tWzBdLHRoaXMuZ2VvbVsxXSl9LHNuYXA6ZnVuY3Rpb24odCl7dD10aGlzLnJlbW92ZUNvbW1vbkJpdHModCk7cmV0dXJuIGFlLnNuYXAodFswXSx0WzFdLHRoaXMuc25hcFRvbGVyYW5jZSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFlufX0pLFluLm92ZXJsYXlPcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyBZbih0LGUpLmdldFJlc3VsdEdlb21ldHJ5KG4pfSxZbi51bmlvbj1mdW5jdGlvbih0LGUpe3JldHVybiBZbi5vdmVybGF5T3AodCxlLGtuLlVOSU9OKX0sWW4uaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFluLm92ZXJsYXlPcCh0LGUsa24uSU5URVJTRUNUSU9OKX0sWW4uc3ltRGlmZmVyZW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBZbi5vdmVybGF5T3AodCxlLGtuLlNZTURJRkZFUkVOQ0UpfSxZbi5kaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFluLm92ZXJsYXlPcCh0LGUsa24uRElGRkVSRU5DRSl9LGUoVW4ucHJvdG90eXBlLHtnZXRSZXN1bHRHZW9tZXRyeTpmdW5jdGlvbih0KXt2YXIgZT1udWxsLG49ITEsaT1udWxsO3RyeXtlPWtuLm92ZXJsYXlPcCh0aGlzLmdlb21bMF0sdGhpcy5nZW9tWzFdLHQpO249ITB9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgcCkpdGhyb3cgdDtpPXR9aWYoIW4pdHJ5e2U9WW4ub3ZlcmxheU9wKHRoaXMuZ2VvbVswXSx0aGlzLmdlb21bMV0sdCl9Y2F0Y2godCl7dGhyb3cgdCBpbnN0YW5jZW9mIHA/aTp0fXJldHVybiBlfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBVbn19KSxVbi5vdmVybGF5T3A9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgVW4odCxlKS5nZXRSZXN1bHRHZW9tZXRyeShuKX0sVW4udW5pb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gVW4ub3ZlcmxheU9wKHQsZSxrbi5VTklPTil9LFVuLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiBVbi5vdmVybGF5T3AodCxlLGtuLklOVEVSU0VDVElPTil9LFVuLnN5bURpZmZlcmVuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gVW4ub3ZlcmxheU9wKHQsZSxrbi5TWU1ESUZGRVJFTkNFKX0sVW4uZGlmZmVyZW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBVbi5vdmVybGF5T3AodCxlLGtuLkRJRkZFUkVOQ0UpfSxlKFhuLnByb3RvdHlwZSx7YWRkUG9seWdvbjpmdW5jdGlvbih0KXtpZih0LmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt2YXIgZT1udWxsLG49MCxpPXRoaXMuaG9yaXpvbnRhbEJpc2VjdG9yKHQpO2U9MD09PWkuZ2V0TGVuZ3RoKCk/KG49MCxpLmdldENvb3JkaW5hdGUoKSk6KHQ9VW4ub3ZlcmxheU9wKGksdCxrbi5JTlRFUlNFQ1RJT04pLG49KHQ9dGhpcy53aWRlc3RHZW9tZXRyeSh0KSkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmdldFdpZHRoKCksWG4uY2VudHJlKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSksKG51bGw9PT10aGlzLmludGVyaW9yUG9pbnR8fG4+dGhpcy5tYXhXaWR0aCkmJih0aGlzLmludGVyaW9yUG9pbnQ9ZSx0aGlzLm1heFdpZHRoPW4pfSxnZXRJbnRlcmlvclBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJpb3JQb2ludH0sd2lkZXN0R2VvbWV0cnk6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGZ0KXt2YXIgdD1hcmd1bWVudHNbMF07aWYodC5pc0VtcHR5KCkpcmV0dXJuIHQ7Zm9yKHZhciBlPXQuZ2V0R2VvbWV0cnlOKDApLG49MTtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl0LmdldEdlb21ldHJ5TihuKS5nZXRFbnZlbG9wZUludGVybmFsKCkuZ2V0V2lkdGgoKT5lLmdldEVudmVsb3BlSW50ZXJuYWwoKS5nZXRXaWR0aCgpJiYoZT10LmdldEdlb21ldHJ5TihuKSk7cmV0dXJuIGV9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCKXt2YXIgaT1hcmd1bWVudHNbMF07cmV0dXJuIGkgaW5zdGFuY2VvZiBmdD90aGlzLndpZGVzdEdlb21ldHJ5KGkpOml9fSxob3Jpem9udGFsQmlzZWN0b3I6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRFbnZlbG9wZUludGVybmFsKCksdD1Ibi5nZXRCaXNlY3RvclkodCk7cmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKFtuZXcgZChlLmdldE1pblgoKSx0KSxuZXcgZChlLmdldE1heFgoKSx0KV0pfSxhZGQ6ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIFJ0KXRoaXMuYWRkUG9seWdvbih0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBmdClmb3IodmFyIGU9dCxuPTA7bjxlLmdldE51bUdlb21ldHJpZXMoKTtuKyspdGhpcy5hZGQoZS5nZXRHZW9tZXRyeU4obikpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBYbn19KSxYbi5jZW50cmU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBkKFhuLmF2Zyh0LmdldE1pblgoKSx0LmdldE1heFgoKSksWG4uYXZnKHQuZ2V0TWluWSgpLHQuZ2V0TWF4WSgpKSl9LFhuLmF2Zz1mdW5jdGlvbih0LGUpe3JldHVybih0K2UpLzJ9LGUoSG4ucHJvdG90eXBlLHt1cGRhdGVJbnRlcnZhbDpmdW5jdGlvbih0KXt0PD10aGlzLmNlbnRyZVk/dD50aGlzLmxvWSYmKHRoaXMubG9ZPXQpOnQ+dGhpcy5jZW50cmVZJiZ0PHRoaXMuaGlZJiYodGhpcy5oaVk9dCl9LGdldEJpc2VjdG9yWTpmdW5jdGlvbigpe3RoaXMucHJvY2Vzcyh0aGlzLnBvbHkuZ2V0RXh0ZXJpb3JSaW5nKCkpO2Zvcih2YXIgdD0wO3Q8dGhpcy5wb2x5LmdldE51bUludGVyaW9yUmluZygpO3QrKyl0aGlzLnByb2Nlc3ModGhpcy5wb2x5LmdldEludGVyaW9yUmluZ04odCkpO3JldHVybiBYbi5hdmcodGhpcy5oaVksdGhpcy5sb1kpfSxwcm9jZXNzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLG49MDtuPGUuc2l6ZSgpO24rKyl7dmFyIGk9ZS5nZXRZKG4pO3RoaXMudXBkYXRlSW50ZXJ2YWwoaSl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBIbn19KSxIbi5nZXRCaXNlY3Rvclk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBIbih0KS5nZXRCaXNlY3RvclkoKX0sWG4uU2FmZUJpc2VjdG9yRmluZGVyPUhuLGUoV24ucHJvdG90eXBlLHthZGRFbmRwb2ludHM6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEIpe3ZhciB0PWFyZ3VtZW50c1swXTtpZih0IGluc3RhbmNlb2YgQ3QpdGhpcy5hZGRFbmRwb2ludHModC5nZXRDb29yZGluYXRlcygpKTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBmdClmb3IodmFyIGU9dCxuPTA7bjxlLmdldE51bUdlb21ldHJpZXMoKTtuKyspdGhpcy5hZGRFbmRwb2ludHMoZS5nZXRHZW9tZXRyeU4obikpfWVsc2V7YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSYmKHQ9YXJndW1lbnRzWzBdLHRoaXMuYWRkKHRbMF0pLHRoaXMuYWRkKHRbdC5sZW5ndGgtMV0pKX19LGdldEludGVyaW9yUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvclBvaW50fSxhZGRJbnRlcmlvcjpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQil7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHQgaW5zdGFuY2VvZiBDdCl0aGlzLmFkZEludGVyaW9yKHQuZ2V0Q29vcmRpbmF0ZXMoKSk7ZWxzZSBpZih0IGluc3RhbmNlb2YgZnQpZm9yKHZhciBlPXQsbj0wO248ZS5nZXROdW1HZW9tZXRyaWVzKCk7bisrKXRoaXMuYWRkSW50ZXJpb3IoZS5nZXRHZW9tZXRyeU4obikpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSlmb3IodmFyIGk9YXJndW1lbnRzWzBdLG49MTtuPGkubGVuZ3RoLTE7bisrKXRoaXMuYWRkKGlbbl0pfSxhZGQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5kaXN0YW5jZSh0aGlzLmNlbnRyb2lkKTtlPHRoaXMubWluRGlzdGFuY2UmJih0aGlzLmludGVyaW9yUG9pbnQ9bmV3IGQodCksdGhpcy5taW5EaXN0YW5jZT1lKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gV259fSksZShqbi5wcm90b3R5cGUse2dldEludGVyaW9yUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvclBvaW50fSxhZGQ6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEIpe3ZhciB0PWFyZ3VtZW50c1swXTtpZih0IGluc3RhbmNlb2Ygd3QpdGhpcy5hZGQodC5nZXRDb29yZGluYXRlKCkpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGZ0KWZvcih2YXIgZT10LG49MDtuPGUuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl0aGlzLmFkZChlLmdldEdlb21ldHJ5TihuKSl9ZWxzZXt2YXIgaTthcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQmJigodD0oaT1hcmd1bWVudHNbMF0pLmRpc3RhbmNlKHRoaXMuY2VudHJvaWQpKTx0aGlzLm1pbkRpc3RhbmNlJiYodGhpcy5pbnRlcmlvclBvaW50PW5ldyBkKGkpLHRoaXMubWluRGlzdGFuY2U9dCkpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gam59fSksZShLbi5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEtufX0pLEtuLnRvRGVncmVlcz1mdW5jdGlvbih0KXtyZXR1cm4gMTgwKnQvTWF0aC5QSX0sS24ubm9ybWFsaXplPWZ1bmN0aW9uKHQpe2Zvcig7dD5NYXRoLlBJOyl0LT1Lbi5QSV9USU1FU18yO2Zvcig7dDw9LU1hdGguUEk7KXQrPUtuLlBJX1RJTUVTXzI7cmV0dXJuIHR9LEtuLmFuZ2xlPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gTWF0aC5hdGFuMih0LnksdC54KX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLHQ9bi54LWUueCxlPW4ueS1lLnk7cmV0dXJuIE1hdGguYXRhbjIoZSx0KX19LEtuLmlzQWN1dGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQueC1lLngsdD10LnktZS55O3JldHVybiAwPGkqKG4ueC1lLngpK3QqKG4ueS1lLnkpfSxLbi5pc09idHVzZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC54LWUueCx0PXQueS1lLnk7cmV0dXJuIGkqKG4ueC1lLngpK3QqKG4ueS1lLnkpPDB9LEtuLmludGVyaW9yQW5nbGU9ZnVuY3Rpb24odCxlLG4pe3Q9S24uYW5nbGUoZSx0KSxuPUtuLmFuZ2xlKGUsbik7cmV0dXJuIE1hdGguYWJzKG4tdCl9LEtuLm5vcm1hbGl6ZVBvc2l0aXZlPWZ1bmN0aW9uKHQpe2lmKHQ8MCl7Zm9yKDt0PDA7KXQrPUtuLlBJX1RJTUVTXzI7S24uUElfVElNRVNfMjw9dCYmKHQ9MCl9ZWxzZXtmb3IoO0tuLlBJX1RJTUVTXzI8PXQ7KXQtPUtuLlBJX1RJTUVTXzI7dDwwJiYodD0wKX1yZXR1cm4gdH0sS24uYW5nbGVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuKXt0PUtuLmFuZ2xlKGUsdCksbj1Lbi5hbmdsZShlLG4pO3JldHVybiBLbi5kaWZmKHQsbil9LEtuLmRpZmY9ZnVuY3Rpb24odCxlKXt2YXIgbj1udWxsO3JldHVybihuPXQ8ZT9lLXQ6dC1lKT5NYXRoLlBJJiYobj0yKk1hdGguUEktbiksbn0sS24udG9SYWRpYW5zPWZ1bmN0aW9uKHQpe3JldHVybiB0Kk1hdGguUEkvMTgwfSxLbi5nZXRUdXJuPWZ1bmN0aW9uKHQsZSl7dD1NYXRoLnNpbihlLXQpO3JldHVybiAwPHQ/S24uQ09VTlRFUkNMT0NLV0lTRTp0PDA/S24uQ0xPQ0tXSVNFOktuLk5PTkV9LEtuLmFuZ2xlQmV0d2Vlbk9yaWVudGVkPWZ1bmN0aW9uKHQsZSxuKXt0PUtuLmFuZ2xlKGUsdCksdD1Lbi5hbmdsZShlLG4pLXQ7cmV0dXJuIHQ8PS1NYXRoLlBJP3QrS24uUElfVElNRVNfMjp0Pk1hdGguUEk/dC1Lbi5QSV9USU1FU18yOnR9LEtuLlBJX1RJTUVTXzI9MipNYXRoLlBJLEtuLlBJX09WRVJfMj1NYXRoLlBJLzIsS24uUElfT1ZFUl80PU1hdGguUEkvNCxLbi5DT1VOVEVSQ0xPQ0tXSVNFPVp0LkNPVU5URVJDTE9DS1dJU0UsS24uQ0xPQ0tXSVNFPVp0LkNMT0NLV0lTRSxLbi5OT05FPVp0LkNPTExJTkVBUixlKFpuLnByb3RvdHlwZSx7YXJlYTpmdW5jdGlvbigpe3JldHVybiBabi5hcmVhKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0sc2lnbmVkQXJlYTpmdW5jdGlvbigpe3JldHVybiBabi5zaWduZWRBcmVhKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0saW50ZXJwb2xhdGVaOmZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXRocm93IG5ldyBjO3JldHVybiBabi5pbnRlcnBvbGF0ZVoodCx0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LGxvbmdlc3RTaWRlTGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIFpuLmxvbmdlc3RTaWRlTGVuZ3RoKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0saXNBY3V0ZTpmdW5jdGlvbigpe3JldHVybiBabi5pc0FjdXRlKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0sY2lyY3VtY2VudHJlOmZ1bmN0aW9uKCl7cmV0dXJuIFpuLmNpcmN1bWNlbnRyZSh0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LGFyZWEzRDpmdW5jdGlvbigpe3JldHVybiBabi5hcmVhM0QodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpfSxjZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBabi5jZW50cm9pZCh0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LGluQ2VudHJlOmZ1bmN0aW9uKCl7cmV0dXJuIFpuLmluQ2VudHJlKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWm59fSksWm4uYXJlYT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIE1hdGguYWJzKCgobi54LXQueCkqKGUueS10LnkpLShlLngtdC54KSoobi55LXQueSkpLzIpfSxabi5zaWduZWRBcmVhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oKG4ueC10LngpKihlLnktdC55KS0oZS54LXQueCkqKG4ueS10LnkpKS8yfSxabi5kZXQ9ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHQqaS1lKm59LFpuLmludGVycG9sYXRlWj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1lLngscz1lLnksbz1uLngtcixhPWkueC1yLHU9bi55LXMsbD1pLnktcyxoPW8qbC1hKnUscj10LngtcixzPXQueS1zLGE9KGwqci1hKnMpL2gsaD0oLXUqcitvKnMpL2g7cmV0dXJuIGUueithKihuLnotZS56KStoKihpLnotZS56KX0sWm4ubG9uZ2VzdFNpZGVMZW5ndGg9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuZGlzdGFuY2UoZSksZT1lLmRpc3RhbmNlKG4pLHQ9bi5kaXN0YW5jZSh0KSxpPWk7cmV0dXJuIGk8ZSYmKGk9ZSksaTx0JiYoaT10KSxpfSxabi5pc0FjdXRlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hKCFLbi5pc0FjdXRlKHQsZSxuKXx8IUtuLmlzQWN1dGUoZSxuLHQpKSYmISFLbi5pc0FjdXRlKG4sdCxlKX0sWm4uY2lyY3VtY2VudHJlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uLngscj1uLnkscz10LngtaSxvPXQueS1yLG49ZS54LWksdD1lLnktcixlPTIqWm4uZGV0KHMsbyxuLHQpO3JldHVybiBuZXcgZChpLVpuLmRldChvLHMqcytvKm8sdCxuKm4rdCp0KS9lLHIrWm4uZGV0KHMscypzK28qbyxuLG4qbit0KnQpL2UpfSxabi5wZXJwZW5kaWN1bGFyQmlzZWN0b3I9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLngtdC54LGk9ZS55LXQueSxlPW5ldyBGKHQueCtuLzIsdC55K2kvMiwxKSxpPW5ldyBGKHQueC1pK24vMix0LnkrbitpLzIsMSk7cmV0dXJuIG5ldyBGKGUsaSl9LFpuLmFuZ2xlQmlzZWN0b3I9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUuZGlzdGFuY2UodCksaT1pLyhpK2UuZGlzdGFuY2UobikpLGU9bi54LXQueCxuPW4ueS10Lnk7cmV0dXJuIG5ldyBkKHQueCtpKmUsdC55K2kqbil9LFpuLmFyZWEzRD1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS54LXQueCxyPWUueS10Lnkscz1lLnotdC56LG89bi54LXQueCxlPW4ueS10Lnksbj1uLnotdC56LHQ9cipuLXMqZSxuPXMqby1pKm4sbz1pKmUtcipvLG89dCp0K24qbitvKm87cmV0dXJuIE1hdGguc3FydChvKS8yfSxabi5jZW50cm9pZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyBkKCh0LngrZS54K24ueCkvMywodC55K2UueStuLnkpLzMpfSxabi5pbkNlbnRyZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5kaXN0YW5jZShuKSxyPXQuZGlzdGFuY2Uobikscz10LmRpc3RhbmNlKGUpLG89aStyK3M7cmV0dXJuIG5ldyBkKChpKnQueCtyKmUueCtzKm4ueCkvbywoaSp0LnkrciplLnkrcypuLnkpL28pfSxlKEpuLnByb3RvdHlwZSx7Z2V0UmFkaXVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZSgpLHRoaXMucmFkaXVzfSxnZXREaWFtZXRlcjpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNvbXB1dGUoKSx0aGlzLmV4dHJlbWFsUHRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0aGlzLmlucHV0LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKCk7Y2FzZSAxOnJldHVybiB0aGlzLmlucHV0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLmNlbnRyZSl9dmFyIHQ9dGhpcy5leHRyZW1hbFB0c1swXSxlPXRoaXMuZXh0cmVtYWxQdHNbMV07cmV0dXJuIHRoaXMuaW5wdXQuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVTdHJpbmcoW3QsZV0pfSxnZXRFeHRyZW1hbFBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGUoKSx0aGlzLmV4dHJlbWFsUHRzfSxjb21wdXRlQ2lyY2xlUG9pbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5pbnB1dC5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZXh0cmVtYWxQdHM9bmV3IEFycmF5KDApLmZpbGwobnVsbCksbnVsbDtpZigxPT09dGhpcy5pbnB1dC5nZXROdW1Qb2ludHMoKSl7dmFyIHQ9dGhpcy5pbnB1dC5nZXRDb29yZGluYXRlcygpO3JldHVybiB0aGlzLmV4dHJlbWFsUHRzPVtuZXcgZCh0WzBdKV0sbnVsbH12YXIgZT10aGlzLmlucHV0LmNvbnZleEh1bGwoKS5nZXRDb29yZGluYXRlcygpLHQ9ZTtpZihlWzBdLmVxdWFsczJEKGVbZS5sZW5ndGgtMV0pJiYodD1uZXcgQXJyYXkoZS5sZW5ndGgtMSkuZmlsbChudWxsKSxILmNvcHlEZWVwKGUsMCx0LDAsZS5sZW5ndGgtMSkpLHQubGVuZ3RoPD0yKXJldHVybiB0aGlzLmV4dHJlbWFsUHRzPUguY29weURlZXAodCksbnVsbDtmb3IodmFyIG49Sm4ubG93ZXN0UG9pbnQodCksaT1Kbi5wb2ludFdpdE1pbkFuZ2xlV2l0aFgodCxuKSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBzPUpuLnBvaW50V2l0aE1pbkFuZ2xlV2l0aFNlZ21lbnQodCxuLGkpO2lmKEtuLmlzT2J0dXNlKG4scyxpKSlyZXR1cm4gdGhpcy5leHRyZW1hbFB0cz1bbmV3IGQobiksbmV3IGQoaSldLG51bGw7aWYoS24uaXNPYnR1c2UocyxuLGkpKW49cztlbHNle2lmKCFLbi5pc09idHVzZShzLGksbikpcmV0dXJuIHRoaXMuZXh0cmVtYWxQdHM9W25ldyBkKG4pLG5ldyBkKGkpLG5ldyBkKHMpXSxudWxsO2k9c319bC5zaG91bGROZXZlclJlYWNoSGVyZShcIkxvZ2ljIGZhaWx1cmUgaW4gTWluaW11bSBCb3VuZGluZyBDaXJjbGUgYWxnb3JpdGhtIVwiKX0sY29tcHV0ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5leHRyZW1hbFB0cz9udWxsOih0aGlzLmNvbXB1dGVDaXJjbGVQb2ludHMoKSx0aGlzLmNvbXB1dGVDZW50cmUoKSx2b2lkKG51bGwhPT10aGlzLmNlbnRyZSYmKHRoaXMucmFkaXVzPXRoaXMuY2VudHJlLmRpc3RhbmNlKHRoaXMuZXh0cmVtYWxQdHNbMF0pKSkpfSxnZXRGYXJ0aGVzdFBvaW50czpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNvbXB1dGUoKSx0aGlzLmV4dHJlbWFsUHRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0aGlzLmlucHV0LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKCk7Y2FzZSAxOnJldHVybiB0aGlzLmlucHV0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLmNlbnRyZSl9dmFyIHQ9dGhpcy5leHRyZW1hbFB0c1swXSxlPXRoaXMuZXh0cmVtYWxQdHNbdGhpcy5leHRyZW1hbFB0cy5sZW5ndGgtMV07cmV0dXJuIHRoaXMuaW5wdXQuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVTdHJpbmcoW3QsZV0pfSxnZXRDaXJjbGU6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbXB1dGUoKSxudWxsPT09dGhpcy5jZW50cmUpcmV0dXJuIHRoaXMuaW5wdXQuZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvbHlnb24oKTt2YXIgdD10aGlzLmlucHV0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLmNlbnRyZSk7cmV0dXJuIDA9PT10aGlzLnJhZGl1cz90OnQuYnVmZmVyKHRoaXMucmFkaXVzKX0sZ2V0Q2VudHJlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZSgpLHRoaXMuY2VudHJlfSxjb21wdXRlQ2VudHJlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZXh0cmVtYWxQdHMubGVuZ3RoKXtjYXNlIDA6dGhpcy5jZW50cmU9bnVsbDticmVhaztjYXNlIDE6dGhpcy5jZW50cmU9dGhpcy5leHRyZW1hbFB0c1swXTticmVhaztjYXNlIDI6dGhpcy5jZW50cmU9bmV3IGQoKHRoaXMuZXh0cmVtYWxQdHNbMF0ueCt0aGlzLmV4dHJlbWFsUHRzWzFdLngpLzIsKHRoaXMuZXh0cmVtYWxQdHNbMF0ueSt0aGlzLmV4dHJlbWFsUHRzWzFdLnkpLzIpO2JyZWFrO2Nhc2UgMzp0aGlzLmNlbnRyZT1abi5jaXJjdW1jZW50cmUodGhpcy5leHRyZW1hbFB0c1swXSx0aGlzLmV4dHJlbWFsUHRzWzFdLHRoaXMuZXh0cmVtYWxQdHNbMl0pfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSm59fSksSm4ucG9pbnRXaXRNaW5BbmdsZVdpdGhYPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWcuTUFYX1ZBTFVFLGk9bnVsbCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBzLG8sYT10W3JdO2EhPT1lJiYocz1hLngtZS54LChvPWEueS1lLnkpPDAmJihvPS1vKSwobz1vL01hdGguc3FydChzKnMrbypvKSk8biYmKG49byxpPWEpKX1yZXR1cm4gaX0sSm4ubG93ZXN0UG9pbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRbMF0sbj0xO248dC5sZW5ndGg7bisrKXRbbl0ueTxlLnkmJihlPXRbbl0pO3JldHVybiBlfSxKbi5wb2ludFdpdGhNaW5BbmdsZVdpdGhTZWdtZW50PWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9Zy5NQVhfVkFMVUUscj1udWxsLHM9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIG8sYT10W3NdO2E9PT1lfHxhPT09bnx8KG89S24uYW5nbGVCZXR3ZWVuKGUsYSxuKSk8aSYmKGk9byxyPWEpfXJldHVybiByfSxlKFFuLnByb3RvdHlwZSx7Z2V0V2lkdGhDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZU1pbmltdW1EaWFtZXRlcigpLHRoaXMubWluV2lkdGhQdH0sZ2V0U3VwcG9ydGluZ1NlZ21lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wdXRlTWluaW11bURpYW1ldGVyKCksdGhpcy5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVTdHJpbmcoW3RoaXMubWluQmFzZVNlZy5wMCx0aGlzLm1pbkJhc2VTZWcucDFdKX0sZ2V0RGlhbWV0ZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbXB1dGVNaW5pbXVtRGlhbWV0ZXIoKSxudWxsPT09dGhpcy5taW5XaWR0aFB0KXJldHVybiB0aGlzLmlucHV0R2VvbS5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhudWxsKTt2YXIgdD10aGlzLm1pbkJhc2VTZWcucHJvamVjdCh0aGlzLm1pbldpZHRoUHQpO3JldHVybiB0aGlzLmlucHV0R2VvbS5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhbdCx0aGlzLm1pbldpZHRoUHRdKX0sY29tcHV0ZVdpZHRoQ29udmV4OmZ1bmN0aW9uKHQpe3RoaXMuY29udmV4SHVsbFB0cz0odCBpbnN0YW5jZW9mIFJ0P3QuZ2V0RXh0ZXJpb3JSaW5nKCk6dCkuZ2V0Q29vcmRpbmF0ZXMoKSwwPT09dGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aD8odGhpcy5taW5XaWR0aD0wLHRoaXMubWluV2lkdGhQdD1udWxsLHRoaXMubWluQmFzZVNlZz1udWxsKToxPT09dGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aD8odGhpcy5taW5XaWR0aD0wLHRoaXMubWluV2lkdGhQdD10aGlzLmNvbnZleEh1bGxQdHNbMF0sdGhpcy5taW5CYXNlU2VnLnAwPXRoaXMuY29udmV4SHVsbFB0c1swXSx0aGlzLm1pbkJhc2VTZWcucDE9dGhpcy5jb252ZXhIdWxsUHRzWzBdKToyPT09dGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aHx8Mz09PXRoaXMuY29udmV4SHVsbFB0cy5sZW5ndGg/KHRoaXMubWluV2lkdGg9MCx0aGlzLm1pbldpZHRoUHQ9dGhpcy5jb252ZXhIdWxsUHRzWzBdLHRoaXMubWluQmFzZVNlZy5wMD10aGlzLmNvbnZleEh1bGxQdHNbMF0sdGhpcy5taW5CYXNlU2VnLnAxPXRoaXMuY29udmV4SHVsbFB0c1sxXSk6dGhpcy5jb21wdXRlQ29udmV4UmluZ01pbkRpYW1ldGVyKHRoaXMuY29udmV4SHVsbFB0cyl9LGNvbXB1dGVDb252ZXhSaW5nTWluRGlhbWV0ZXI6ZnVuY3Rpb24odCl7dGhpcy5taW5XaWR0aD1nLk1BWF9WQUxVRTtmb3IodmFyIGU9MSxuPW5ldyBKdCxpPTA7aTx0Lmxlbmd0aC0xO2krKyluLnAwPXRbaV0sbi5wMT10W2krMV0sZT10aGlzLmZpbmRNYXhQZXJwRGlzdGFuY2UodCxuLGUpfSxjb21wdXRlTWluaW11bURpYW1ldGVyOmZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMubWluV2lkdGhQdClyZXR1cm4gbnVsbDt2YXIgdDt0aGlzLmlzQ29udmV4P3RoaXMuY29tcHV0ZVdpZHRoQ29udmV4KHRoaXMuaW5wdXRHZW9tKToodD1uZXcgaWUodGhpcy5pbnB1dEdlb20pLmdldENvbnZleEh1bGwoKSx0aGlzLmNvbXB1dGVXaWR0aENvbnZleCh0KSl9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGVNaW5pbXVtRGlhbWV0ZXIoKSx0aGlzLm1pbldpZHRofSxmaW5kTWF4UGVycERpc3RhbmNlOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9ZS5kaXN0YW5jZVBlcnBlbmRpY3VsYXIodFtuXSkscj1pLHM9bixvPXM7aTw9cjspaT1yLHM9byxvPVFuLm5leHRJbmRleCh0LHMpLHI9ZS5kaXN0YW5jZVBlcnBlbmRpY3VsYXIodFtvXSk7cmV0dXJuIGk8dGhpcy5taW5XaWR0aCYmKHRoaXMubWluUHRJbmRleD1zLHRoaXMubWluV2lkdGg9aSx0aGlzLm1pbldpZHRoUHQ9dFt0aGlzLm1pblB0SW5kZXhdLHRoaXMubWluQmFzZVNlZz1uZXcgSnQoZSkpLHN9LGdldE1pbmltdW1SZWN0YW5nbGU6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbXB1dGVNaW5pbXVtRGlhbWV0ZXIoKSwwPT09dGhpcy5taW5XaWR0aClyZXR1cm4gdGhpcy5taW5CYXNlU2VnLnAwLmVxdWFsczJEKHRoaXMubWluQmFzZVNlZy5wMSk/dGhpcy5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvaW50KHRoaXMubWluQmFzZVNlZy5wMCk6dGhpcy5taW5CYXNlU2VnLnRvR2VvbWV0cnkodGhpcy5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpKTtmb3IodmFyIHQ9dGhpcy5taW5CYXNlU2VnLnAxLngtdGhpcy5taW5CYXNlU2VnLnAwLngsZT10aGlzLm1pbkJhc2VTZWcucDEueS10aGlzLm1pbkJhc2VTZWcucDAueSxuPWcuTUFYX1ZBTFVFLGk9LWcuTUFYX1ZBTFVFLHI9Zy5NQVhfVkFMVUUscz0tZy5NQVhfVkFMVUUsbz0wO288dGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aDtvKyspe3ZhciBhPVFuLmNvbXB1dGVDKHQsZSx0aGlzLmNvbnZleEh1bGxQdHNbb10pO2k8YSYmKGk9YSksYTxuJiYobj1hKTthPVFuLmNvbXB1dGVDKC1lLHQsdGhpcy5jb252ZXhIdWxsUHRzW29dKTtzPGEmJihzPWEpLGE8ciYmKHI9YSl9dmFyIHU9UW4uY29tcHV0ZVNlZ21lbnRGb3JMaW5lKC10LC1lLHMpLGw9UW4uY29tcHV0ZVNlZ21lbnRGb3JMaW5lKC10LC1lLHIpLGg9UW4uY29tcHV0ZVNlZ21lbnRGb3JMaW5lKC1lLHQsaSksYz1Rbi5jb21wdXRlU2VnbWVudEZvckxpbmUoLWUsdCxuKSxmPWgubGluZUludGVyc2VjdGlvbih1KSx1PWMubGluZUludGVyc2VjdGlvbih1KSxjPWMubGluZUludGVyc2VjdGlvbihsKSxsPWgubGluZUludGVyc2VjdGlvbihsKSxmPXRoaXMuaW5wdXRHZW9tLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKFtmLHUsYyxsLGZdKTtyZXR1cm4gdGhpcy5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvbHlnb24oZixudWxsKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUW59fSksUW4ubmV4dEluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuKytlPj10Lmxlbmd0aCYmKGU9MCksZX0sUW4uY29tcHV0ZUM9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0Km4ueS1lKm4ueH0sUW4uZ2V0TWluaW11bURpYW1ldGVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUW4odCkuZ2V0RGlhbWV0ZXIoKX0sUW4uZ2V0TWluaW11bVJlY3RhbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFFuKHQpLmdldE1pbmltdW1SZWN0YW5nbGUoKX0sUW4uY29tcHV0ZVNlZ21lbnRGb3JMaW5lPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1udWxsLHI9bnVsbCxyPU1hdGguYWJzKGUpPk1hdGguYWJzKHQpPyhpPW5ldyBkKDAsbi9lKSxuZXcgZCgxLG4vZS10L2UpKTooaT1uZXcgZChuL3QsMCksbmV3IGQobi90LWUvdCwxKSk7cmV0dXJuIG5ldyBKdChpLHIpfTt2YXIgSnM9T2JqZWN0LmZyZWV6ZSh7Q2VudHJvaWQ6JHQsQ0dBbGdvcml0aG1zOlp0LENvbnZleEh1bGw6aWUsSW50ZXJpb3JQb2ludEFyZWE6WG4sSW50ZXJpb3JQb2ludExpbmU6V24sSW50ZXJpb3JQb2ludFBvaW50OmpuLFJvYnVzdExpbmVJbnRlcnNlY3RvcjpXdCxNaW5pbXVtQm91bmRpbmdDaXJjbGU6Sm4sTWluaW11bURpYW1ldGVyOlFufSk7ZSgkbi5wcm90b3R5cGUse2dldFJlc3VsdEdlb21ldHJ5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aSh0aGlzLmRpc3RhbmNlVG9sZXJhbmNlKS50cmFuc2Zvcm0odGhpcy5pbnB1dEdlb20pfSxzZXREaXN0YW5jZVRvbGVyYW5jZTpmdW5jdGlvbih0KXtpZih0PD0wKXRocm93IG5ldyBjO3RoaXMuZGlzdGFuY2VUb2xlcmFuY2U9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJG59fSksJG4uZGVuc2lmeVBvaW50cz1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPW5ldyBKdCxyPW5ldyBOLHM9MDtzPHQubGVuZ3RoLTE7cysrKXtpLnAwPXRbc10saS5wMT10W3MrMV0sci5hZGQoaS5wMCwhMSk7dmFyIG89aS5nZXRMZW5ndGgoKSxhPU1hdGgudHJ1bmMoby9lKSsxO2lmKDE8YSlmb3IodmFyIHU9by9hLGw9MTtsPGE7bCsrKXt2YXIgaD1sKnUvbyxoPWkucG9pbnRBbG9uZyhoKTtuLm1ha2VQcmVjaXNlKGgpLHIuYWRkKGgsITEpfX1yZXR1cm4gci5hZGQodFt0Lmxlbmd0aC0xXSwhMSksci50b0Nvb3JkaW5hdGVBcnJheSgpfSwkbi5kZW5zaWZ5PWZ1bmN0aW9uKHQsZSl7dD1uZXcgJG4odCk7cmV0dXJuIHQuc2V0RGlzdGFuY2VUb2xlcmFuY2UoZSksdC5nZXRSZXN1bHRHZW9tZXRyeSgpfSxhKHRpLHNlKSxlKHRpLnByb3RvdHlwZSx7dHJhbnNmb3JtTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQsZSl7ZT1zZS5wcm90b3R5cGUudHJhbnNmb3JtTXVsdGlQb2x5Z29uLmNhbGwodGhpcyx0LGUpO3JldHVybiB0aGlzLmNyZWF0ZVZhbGlkQXJlYShlKX0sdHJhbnNmb3JtUG9seWdvbjpmdW5jdGlvbih0LGUpe3Q9c2UucHJvdG90eXBlLnRyYW5zZm9ybVBvbHlnb24uY2FsbCh0aGlzLHQsZSk7cmV0dXJuIGUgaW5zdGFuY2VvZiBidD90OnRoaXMuY3JlYXRlVmFsaWRBcmVhKHQpfSx0cmFuc2Zvcm1Db29yZGluYXRlczpmdW5jdGlvbih0LGUpe3Q9dC50b0Nvb3JkaW5hdGVBcnJheSgpLHQ9JG4uZGVuc2lmeVBvaW50cyh0LHRoaXMuZGlzdGFuY2VUb2xlcmFuY2UsZS5nZXRQcmVjaXNpb25Nb2RlbCgpKTtyZXR1cm4gZSBpbnN0YW5jZW9mIEN0JiYxPT09dC5sZW5ndGgmJih0PW5ldyBBcnJheSgwKS5maWxsKG51bGwpKSx0aGlzLmZhY3RvcnkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZSh0KX0sY3JlYXRlVmFsaWRBcmVhOmZ1bmN0aW9uKHQpe3JldHVybiB0LmJ1ZmZlcigwKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGl9fSksJG4uRGVuc2lmeVRyYW5zZm9ybWVyPXRpO3ZhciBRcz1PYmplY3QuZnJlZXplKHtEZW5zaWZpZXI6JG59KTtlKGVpLnByb3RvdHlwZSx7ZmluZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2Rve2lmKG51bGw9PT1lKXJldHVybiBudWxsO2lmKGUuZGVzdCgpLmVxdWFsczJEKHQpKXJldHVybiBlfXdoaWxlKChlPWUub05leHQoKSkhPT10aGlzKTtyZXR1cm4gbnVsbH0sZGVzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW0uX29yaWd9LG9OZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bS5fbmV4dH0saW5zZXJ0OmZ1bmN0aW9uKHQpe2lmKHRoaXMub05leHQoKT09PXRoaXMpcmV0dXJuIHRoaXMuaW5zZXJ0QWZ0ZXIodCksbnVsbDt2YXIgZT10aGlzLmNvbXBhcmVUbyh0KSxuPXRoaXM7ZG97dmFyIGk9bi5vTmV4dCgpO2lmKGkuY29tcGFyZVRvKHQpIT09ZXx8aT09PXRoaXMpcmV0dXJuIG4uaW5zZXJ0QWZ0ZXIodCksbnVsbH13aGlsZSgobj1pKSE9PXRoaXMpO2wuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKX0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24odCl7bC5lcXVhbHModGhpcy5fb3JpZyx0Lm9yaWcoKSk7dmFyIGU9dGhpcy5vTmV4dCgpO3RoaXMuX3N5bS5zZXROZXh0KHQpLHQuc3ltKCkuc2V0TmV4dChlKX0sZGVncmVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzO3QrKywoZT1lLm9OZXh0KCkpIT09dGhpczspO3JldHVybiB0fSxlcXVhbHM6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLl9vcmlnLmVxdWFsczJEKHQpJiZ0aGlzLl9zeW0uX29yaWcuZXF1YWxzKGUpfX0sZGVsdGFZOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bS5fb3JpZy55LXRoaXMuX29yaWcueX0sc3ltOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bX0scHJldjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW0ubmV4dCgpLl9zeW19LGNvbXBhcmVBbmd1bGFyRGlyZWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZGVsdGFYKCksbj10aGlzLmRlbHRhWSgpLGk9dC5kZWx0YVgoKSxyPXQuZGVsdGFZKCk7aWYoZT09PWkmJm49PT1yKXJldHVybiAwO249R2UucXVhZHJhbnQoZSxuKSxyPUdlLnF1YWRyYW50KGkscik7cmV0dXJuIHI8bj8xOm48cj8tMTpadC5jb21wdXRlT3JpZW50YXRpb24odC5fb3JpZyx0LmRlc3QoKSx0aGlzLmRlc3QoKSl9LHByZXZOb2RlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXM7Mj09PXQuZGVncmVlKCk7KWlmKCh0PXQucHJldigpKT09PXRoaXMpcmV0dXJuIG51bGw7cmV0dXJuIHR9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wYXJlQW5ndWxhckRpcmVjdGlvbih0KX0sbmV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZXh0fSxzZXRTeW06ZnVuY3Rpb24odCl7dGhpcy5fc3ltPXR9LG9yaWc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZ30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIkhFKFwiK3RoaXMuX29yaWcueCtcIiBcIit0aGlzLl9vcmlnLnkrXCIsIFwiK3RoaXMuX3N5bS5fb3JpZy54K1wiIFwiK3RoaXMuX3N5bS5fb3JpZy55K1wiKVwifSxzZXROZXh0OmZ1bmN0aW9uKHQpe3RoaXMuX25leHQ9dH0saW5pdDpmdW5jdGlvbih0KXt0aGlzLnNldFN5bSh0KSx0LnNldFN5bSh0aGlzKSx0aGlzLnNldE5leHQodCksdC5zZXROZXh0KHRoaXMpfSxkZWx0YVg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3ltLl9vcmlnLngtdGhpcy5fb3JpZy54fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBlaX19KSxlaS5pbml0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9PXQuX3N5bXx8bnVsbCE9PWUuX3N5bXx8bnVsbCE9PXQuX25leHR8fG51bGwhPT1lLl9uZXh0KXRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJFZGdlcyBhcmUgYWxyZWFkeSBpbml0aWFsaXplZFwiKTtyZXR1cm4gdC5pbml0KGUpLHR9LGVpLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3Q9bmV3IGVpKHQpLGU9bmV3IGVpKGUpO3JldHVybiB0LmluaXQoZSksdH0sYShuaSxlaSksZShuaS5wcm90b3R5cGUse21hcms6ZnVuY3Rpb24oKXt0aGlzLl9pc01hcmtlZD0hMH0sc2V0TWFyazpmdW5jdGlvbih0KXt0aGlzLl9pc01hcmtlZD10fSxpc01hcmtlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc01hcmtlZH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbml9fSksbmkuc2V0TWFya0JvdGg9ZnVuY3Rpb24odCxlKXt0LnNldE1hcmsoZSksdC5zeW0oKS5zZXRNYXJrKGUpfSxuaS5pc01hcmtlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc01hcmtlZCgpfSxuaS5zZXRNYXJrPWZ1bmN0aW9uKHQsZSl7dC5zZXRNYXJrKGUpfSxuaS5tYXJrQm90aD1mdW5jdGlvbih0KXt0Lm1hcmsoKSx0LnN5bSgpLm1hcmsoKX0sbmkubWFyaz1mdW5jdGlvbih0KXt0Lm1hcmsoKX0sZShpaS5wcm90b3R5cGUse2luc2VydDpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5jcmVhdGUodCxlKTtudWxsIT09bj9uLmluc2VydChpKTp0aGlzLnZlcnRleE1hcC5wdXQodCxpKTt0PXRoaXMudmVydGV4TWFwLmdldChlKTtyZXR1cm4gbnVsbCE9PXQ/dC5pbnNlcnQoaS5zeW0oKSk6dGhpcy52ZXJ0ZXhNYXAucHV0KGUsaS5zeW0oKSksaX0sY3JlYXRlOmZ1bmN0aW9uKHQsZSl7dD10aGlzLmNyZWF0ZUVkZ2UodCksZT10aGlzLmNyZWF0ZUVkZ2UoZSk7cmV0dXJuIGVpLmluaXQodCxlKSx0fSxjcmVhdGVFZGdlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZWkodCl9LGFkZEVkZ2U6ZnVuY3Rpb24odCxlKXtpZighaWkuaXNWYWxpZEVkZ2UodCxlKSlyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnZlcnRleE1hcC5nZXQodCksaT1udWxsO3JldHVybiBudWxsIT09biYmKGk9bi5maW5kKGUpKSxudWxsIT09aT9pOnRoaXMuaW5zZXJ0KHQsZSxuKX0sZ2V0VmVydGV4RWRnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZXJ0ZXhNYXAudmFsdWVzKCl9LGZpbmRFZGdlOmZ1bmN0aW9uKHQsZSl7dD10aGlzLnZlcnRleE1hcC5nZXQodCk7cmV0dXJuIG51bGw9PT10P251bGw6dC5maW5kKGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBpaX19KSxpaS5pc1ZhbGlkRWRnZT1mdW5jdGlvbih0LGUpe3JldHVybiAwIT09ZS5jb21wYXJlVG8odCl9LGEocmksbmkpLGUocmkucHJvdG90eXBlLHtzZXRTdGFydDpmdW5jdGlvbigpe3RoaXMuX2lzU3RhcnQ9ITB9LGlzU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTdGFydH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcml9fSksYShzaSxpaSksZShzaS5wcm90b3R5cGUse2NyZWF0ZUVkZ2U6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByaSh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gc2l9fSksZShvaS5wcm90b3R5cGUse2FkZExpbmU6ZnVuY3Rpb24odCl7dGhpcy5saW5lcy5hZGQodGhpcy5mYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodC50b0Nvb3JkaW5hdGVBcnJheSgpKSl9LHVwZGF0ZVJpbmdTdGFydEVkZ2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNTdGFydCgpfHwodD10LnN5bSgpKS5pc1N0YXJ0KCk/bnVsbD09PXRoaXMucmluZ1N0YXJ0RWRnZT8odGhpcy5yaW5nU3RhcnRFZGdlPXQsbnVsbCk6dm9pZCh0Lm9yaWcoKS5jb21wYXJlVG8odGhpcy5yaW5nU3RhcnRFZGdlLm9yaWcoKSk8MCYmKHRoaXMucmluZ1N0YXJ0RWRnZT10KSk6bnVsbH0sZ2V0UmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnJlc3VsdCYmdGhpcy5jb21wdXRlUmVzdWx0KCksdGhpcy5yZXN1bHR9LHByb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIGU9dC5wcmV2Tm9kZSgpO251bGw9PT1lJiYoZT10KSx0aGlzLnN0YWNrRWRnZXMoZSksdGhpcy5idWlsZExpbmVzKCl9LGJ1aWxkUmluZzpmdW5jdGlvbih0KXt2YXIgZT1uZXcgTixuPXQ7Zm9yKGUuYWRkKG4ub3JpZygpLmNvcHkoKSwhMSk7Mj09PW4uc3ltKCkuZGVncmVlKCk7KXt2YXIgaT1uLm5leHQoKTtpZihpPT09dClicmVhaztlLmFkZChpLm9yaWcoKS5jb3B5KCksITEpLG49aX1lLmFkZChuLmRlc3QoKS5jb3B5KCksITEpLHRoaXMuYWRkTGluZShlKX0sYnVpbGRMaW5lOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBOLG49dDtmb3IodGhpcy5yaW5nU3RhcnRFZGdlPW51bGwsbmkubWFya0JvdGgobiksZS5hZGQobi5vcmlnKCkuY29weSgpLCExKTsyPT09bi5zeW0oKS5kZWdyZWUoKTspe3RoaXMudXBkYXRlUmluZ1N0YXJ0RWRnZShuKTt2YXIgaT1uLm5leHQoKTtpZihpPT09dClyZXR1cm4gdGhpcy5idWlsZFJpbmcodGhpcy5yaW5nU3RhcnRFZGdlKSxudWxsO2UuYWRkKGkub3JpZygpLmNvcHkoKSwhMSksbmkubWFya0JvdGgobj1pKX1lLmFkZChuLmRlc3QoKS5jb3B5KCksITEpLHRoaXMuc3RhY2tFZGdlcyhuLnN5bSgpKSx0aGlzLmFkZExpbmUoZSl9LHN0YWNrRWRnZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQ7bmkuaXNNYXJrZWQoZSl8fHRoaXMubm9kZUVkZ2VTdGFjay5hZGQoZSksKGU9ZS5vTmV4dCgpKSE9PXQ7KTt9LGNvbXB1dGVSZXN1bHQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ncmFwaC5nZXRWZXJ0ZXhFZGdlcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTtuaS5pc01hcmtlZChlKXx8dGhpcy5wcm9jZXNzKGUpfXRoaXMucmVzdWx0PXRoaXMuZmFjdG9yeS5idWlsZEdlb21ldHJ5KHRoaXMubGluZXMpfSxidWlsZExpbmVzOmZ1bmN0aW9uKCl7Zm9yKDshdGhpcy5ub2RlRWRnZVN0YWNrLmVtcHR5KCk7KXt2YXIgdD10aGlzLm5vZGVFZGdlU3RhY2sucG9wKCk7bmkuaXNNYXJrZWQodCl8fHRoaXMuYnVpbGRMaW5lKHQpfX0sYWRkOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCKWFyZ3VtZW50c1swXS5hcHBseSh7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bcV19LGZpbHRlcjpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQ3QmJnRoaXMuYWRkKHQpfX0pO2Vsc2UgaWYoUihhcmd1bWVudHNbMF0sbSkpZm9yKHZhciB0PWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5hZGQoZSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEN0KXt2YXIgbj1hcmd1bWVudHNbMF07bnVsbD09PXRoaXMuZmFjdG9yeSYmKHRoaXMuZmFjdG9yeT1uLmdldEZhY3RvcnkoKSk7Zm9yKHZhciBpPW4uZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkscj0hMSx0PTE7dDxpLnNpemUoKTt0Kyspe3ZhciBzPXRoaXMuZ3JhcGguYWRkRWRnZShpLmdldENvb3JkaW5hdGUodC0xKSxpLmdldENvb3JkaW5hdGUodCkpO251bGwhPT1zJiYocnx8KHMuc2V0U3RhcnQoKSxyPSEwKSl9fX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gb2l9fSksb2kuZGlzc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG9pO3JldHVybiBlLmFkZCh0KSxlLmdldFJlc3VsdCgpfTt2YXIgJHM9T2JqZWN0LmZyZWV6ZSh7TGluZURpc3NvbHZlcjpvaX0pO2UoYWkucHJvdG90eXBlLHtoYXNDaGlsZHJlbjpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8NDt0KyspaWYobnVsbCE9PXRoaXMuc3Vibm9kZVt0XSlyZXR1cm4hMDtyZXR1cm4hMX0saXNQcnVuYWJsZTpmdW5jdGlvbigpe3JldHVybiEodGhpcy5oYXNDaGlsZHJlbigpfHx0aGlzLmhhc0l0ZW1zKCkpfSxhZGRBbGxJdGVtczpmdW5jdGlvbih0KXt0LmFkZEFsbCh0aGlzLml0ZW1zKTtmb3IodmFyIGU9MDtlPDQ7ZSsrKW51bGwhPT10aGlzLnN1Ym5vZGVbZV0mJnRoaXMuc3Vibm9kZVtlXS5hZGRBbGxJdGVtcyh0KTtyZXR1cm4gdH0sZ2V0Tm9kZUNvdW50OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8NDtlKyspbnVsbCE9PXRoaXMuc3Vibm9kZVtlXSYmKHQrPXRoaXMuc3Vibm9kZVtlXS5zaXplKCkpO3JldHVybiB0KzF9LHNpemU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTw0O2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiYodCs9dGhpcy5zdWJub2RlW2VdLnNpemUoKSk7cmV0dXJuIHQrdGhpcy5pdGVtcy5zaXplKCl9LGFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nOmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaCh0KSlyZXR1cm4gbnVsbDtlLmFkZEFsbCh0aGlzLml0ZW1zKTtmb3IodmFyIG49MDtuPDQ7bisrKW51bGwhPT10aGlzLnN1Ym5vZGVbbl0mJnRoaXMuc3Vibm9kZVtuXS5hZGRBbGxJdGVtc0Zyb21PdmVybGFwcGluZyh0LGUpfSx2aXNpdEl0ZW1zOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuaXRlbXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspZS52aXNpdEl0ZW0obi5uZXh0KCkpfSxoYXNJdGVtczpmdW5jdGlvbigpe3JldHVybiF0aGlzLml0ZW1zLmlzRW1wdHkoKX0scmVtb3ZlOmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaCh0KSlyZXR1cm4hMTtmb3IodmFyIG49ITEsaT0wO2k8NDtpKyspaWYobnVsbCE9PXRoaXMuc3Vibm9kZVtpXSYmKG49dGhpcy5zdWJub2RlW2ldLnJlbW92ZSh0LGUpKSl7dGhpcy5zdWJub2RlW2ldLmlzUHJ1bmFibGUoKSYmKHRoaXMuc3Vibm9kZVtpXT1udWxsKTticmVha31yZXR1cm4gbj1ufHx0aGlzLml0ZW1zLnJlbW92ZShlKX0sdmlzaXQ6ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc1NlYXJjaE1hdGNoKHQpKXJldHVybiBudWxsO3RoaXMudmlzaXRJdGVtcyh0LGUpO2Zvcih2YXIgbj0wO248NDtuKyspbnVsbCE9PXRoaXMuc3Vibm9kZVtuXSYmdGhpcy5zdWJub2RlW25dLnZpc2l0KHQsZSl9LGdldEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXN9LGRlcHRoOmZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9MCxuPTA7bjw0O24rKyl7bnVsbD09PXRoaXMuc3Vibm9kZVtuXXx8ZTwodD10aGlzLnN1Ym5vZGVbbl0uZGVwdGgoKSkmJihlPXQpfXJldHVybiBlKzF9LGlzRW1wdHk6ZnVuY3Rpb24oKXt2YXIgdD0hMDt0aGlzLml0ZW1zLmlzRW1wdHkoKXx8KHQ9ITEpO2Zvcih2YXIgZT0wO2U8NDtlKyspbnVsbCE9PXRoaXMuc3Vibm9kZVtlXSYmKHRoaXMuc3Vibm9kZVtlXS5pc0VtcHR5KCl8fCh0PSExKSk7cmV0dXJuIHR9LGFkZDpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZCh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGFpfX0pLGFpLmdldFN1Ym5vZGVJbmRleD1mdW5jdGlvbih0LGUsbil7dmFyIGk9LTE7cmV0dXJuIHQuZ2V0TWluWCgpPj1lJiYodC5nZXRNaW5ZKCk+PW4mJihpPTMpLHQuZ2V0TWF4WSgpPD1uJiYoaT0xKSksdC5nZXRNYXhYKCk8PWUmJih0LmdldE1pblkoKT49biYmKGk9MiksdC5nZXRNYXhZKCk8PW4mJihpPTApKSxpfSx1aS5leHBvbmVudD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbixpLHIscyxvPXszMjo4LDY0OjExfVt0XTtpZihzfHwobj1lPDB8fDEvZTwwLGlzRmluaXRlKGUpfHwocz17MzI6e2Q6MTI3LGM6MTI4LGI6MCxhOjB9LDY0OntkOjMyNzUyLGM6MCxiOjAsYTowfX1bdF0sbiYmKHMuZCs9MTw8dC80LTEpLGk9TWF0aC5wb3coMixvKS0xLHI9MCkpLCFzKXtmb3IoaT17MzI6MTI3LDY0OjEwMjN9W3RdLHI9TWF0aC5hYnMoZSk7Mjw9cjspaSsrLHIvPTI7Zm9yKDtyPDEmJjA8aTspaS0tLHIqPTI7aTw9MCYmKHIvPTIpLDMyPT09dCYmMjU0PGkmJihzPXtkOm4/MjU1OjEyNyxjOjEyOCxiOjAsYTowfSxpPU1hdGgucG93KDIsbyktMSxyPTApfXJldHVybiBpfSg2NCx0KS0xMDIzfSx1aS5wb3dlck9mMj1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMix0KX0sZShsaS5wcm90b3R5cGUse2dldExldmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGV2ZWx9LGNvbXB1dGVLZXk6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO2Zvcih0aGlzLmxldmVsPWxpLmNvbXB1dGVRdWFkTGV2ZWwodCksdGhpcy5lbnY9bmV3IEMsdGhpcy5jb21wdXRlS2V5KHRoaXMubGV2ZWwsdCk7IXRoaXMuZW52LmNvbnRhaW5zKHQpOyl0aGlzLmxldmVsKz0xLHRoaXMuY29tcHV0ZUtleSh0aGlzLmxldmVsLHQpfWVsc2V7dmFyIGUsbjsyPT09YXJndW1lbnRzLmxlbmd0aCYmKGU9YXJndW1lbnRzWzFdLG49dWkucG93ZXJPZjIoYXJndW1lbnRzWzBdKSx0aGlzLnB0Lng9TWF0aC5mbG9vcihlLmdldE1pblgoKS9uKSpuLHRoaXMucHQueT1NYXRoLmZsb29yKGUuZ2V0TWluWSgpL24pKm4sdGhpcy5lbnYuaW5pdCh0aGlzLnB0LngsdGhpcy5wdC54K24sdGhpcy5wdC55LHRoaXMucHQueStuKSl9fSxnZXRFbnZlbG9wZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVudn0sZ2V0Q2VudHJlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKCh0aGlzLmVudi5nZXRNaW5YKCkrdGhpcy5lbnYuZ2V0TWF4WCgpKS8yLCh0aGlzLmVudi5nZXRNaW5ZKCkrdGhpcy5lbnYuZ2V0TWF4WSgpKS8yKX0sZ2V0UG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbGl9fSksbGkuY29tcHV0ZVF1YWRMZXZlbD1mdW5jdGlvbih0KXt2YXIgZT10LmdldFdpZHRoKCksdD10LmdldEhlaWdodCgpO3JldHVybiB1aS5leHBvbmVudCh0PGU/ZTp0KSsxfSxhKGhpLGFpKSxlKGhpLnByb3RvdHlwZSx7ZmluZDpmdW5jdGlvbih0KXt2YXIgZT1haS5nZXRTdWJub2RlSW5kZXgodCx0aGlzLmNlbnRyZXgsdGhpcy5jZW50cmV5KTtyZXR1cm4tMT09PWV8fG51bGw9PT10aGlzLnN1Ym5vZGVbZV0/dGhpczp0aGlzLnN1Ym5vZGVbZV0uZmluZCh0KX0saXNTZWFyY2hNYXRjaDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnYuaW50ZXJzZWN0cyh0KX0sZ2V0U3Vibm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09PXRoaXMuc3Vibm9kZVt0XSYmKHRoaXMuc3Vibm9kZVt0XT10aGlzLmNyZWF0ZVN1Ym5vZGUodCkpLHRoaXMuc3Vibm9kZVt0XX0sZ2V0RW52ZWxvcGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbnZ9LGdldE5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9YWkuZ2V0U3Vibm9kZUluZGV4KHQsdGhpcy5jZW50cmV4LHRoaXMuY2VudHJleSk7cmV0dXJuLTE9PT1lP3RoaXM6dGhpcy5nZXRTdWJub2RlKGUpLmdldE5vZGUodCl9LGNyZWF0ZVN1Ym5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9MCxuPTAsaT0wLHI9MDtzd2l0Y2godCl7Y2FzZSAwOmU9dGhpcy5lbnYuZ2V0TWluWCgpLG49dGhpcy5jZW50cmV4LGk9dGhpcy5lbnYuZ2V0TWluWSgpLHI9dGhpcy5jZW50cmV5O2JyZWFrO2Nhc2UgMTplPXRoaXMuY2VudHJleCxuPXRoaXMuZW52LmdldE1heFgoKSxpPXRoaXMuZW52LmdldE1pblkoKSxyPXRoaXMuY2VudHJleTticmVhaztjYXNlIDI6ZT10aGlzLmVudi5nZXRNaW5YKCksbj10aGlzLmNlbnRyZXgsaT10aGlzLmNlbnRyZXkscj10aGlzLmVudi5nZXRNYXhZKCk7YnJlYWs7Y2FzZSAzOmU9dGhpcy5jZW50cmV4LG49dGhpcy5lbnYuZ2V0TWF4WCgpLGk9dGhpcy5jZW50cmV5LHI9dGhpcy5lbnYuZ2V0TWF4WSgpfXJldHVybiBuZXcgaGkobmV3IEMoZSxuLGksciksdGhpcy5sZXZlbC0xKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbih0KXtsLmlzVHJ1ZShudWxsPT09dGhpcy5lbnZ8fHRoaXMuZW52LmNvbnRhaW5zKHQuZW52KSk7dmFyIGUsbj1haS5nZXRTdWJub2RlSW5kZXgodC5lbnYsdGhpcy5jZW50cmV4LHRoaXMuY2VudHJleSk7dC5sZXZlbD09PXRoaXMubGV2ZWwtMT90aGlzLnN1Ym5vZGVbbl09dDooKGU9dGhpcy5jcmVhdGVTdWJub2RlKG4pKS5pbnNlcnROb2RlKHQpLHRoaXMuc3Vibm9kZVtuXT1lKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gaGl9fSksaGkuY3JlYXRlTm9kZT1mdW5jdGlvbih0KXt0PW5ldyBsaSh0KTtyZXR1cm4gbmV3IGhpKHQuZ2V0RW52ZWxvcGUoKSx0LmdldExldmVsKCkpfSxoaS5jcmVhdGVFeHBhbmRlZD1mdW5jdGlvbih0LGUpe2U9bmV3IEMoZSk7bnVsbCE9PXQmJmUuZXhwYW5kVG9JbmNsdWRlKHQuZW52KTtlPWhpLmNyZWF0ZU5vZGUoZSk7cmV0dXJuIG51bGwhPT10JiZlLmluc2VydE5vZGUodCksZX0sZShjaS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGNpfX0pLGNpLmlzWmVyb1dpZHRoPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS10O2lmKDA9PW4pcmV0dXJuITA7ZT1NYXRoLm1heChNYXRoLmFicyh0KSxNYXRoLmFicyhlKSk7cmV0dXJuIHVpLmV4cG9uZW50KG4vZSk8PWNpLk1JTl9CSU5BUllfRVhQT05FTlR9LGNpLk1JTl9CSU5BUllfRVhQT05FTlQ9LTUwLGEoZmksYWkpLGUoZmkucHJvdG90eXBlLHtpbnNlcnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1haS5nZXRTdWJub2RlSW5kZXgodCxmaS5vcmlnaW4ueCxmaS5vcmlnaW4ueSk7aWYoLTE9PT1uKXJldHVybiB0aGlzLmFkZChlKSxudWxsO3ZhciBpPXRoaXMuc3Vibm9kZVtuXTtudWxsIT09aSYmaS5nZXRFbnZlbG9wZSgpLmNvbnRhaW5zKHQpfHwoaT1oaS5jcmVhdGVFeHBhbmRlZChpLHQpLHRoaXMuc3Vibm9kZVtuXT1pKSx0aGlzLmluc2VydENvbnRhaW5lZCh0aGlzLnN1Ym5vZGVbbl0sdCxlKX0saXNTZWFyY2hNYXRjaDpmdW5jdGlvbih0KXtyZXR1cm4hMH0saW5zZXJ0Q29udGFpbmVkOmZ1bmN0aW9uKHQsZSxuKXtsLmlzVHJ1ZSh0LmdldEVudmVsb3BlKCkuY29udGFpbnMoZSkpO3ZhciBpPWNpLmlzWmVyb1dpZHRoKGUuZ2V0TWluWCgpLGUuZ2V0TWF4WCgpKSxyPWNpLmlzWmVyb1dpZHRoKGUuZ2V0TWluWSgpLGUuZ2V0TWF4WSgpKTsoaXx8cj90LmZpbmQoZSk6dC5nZXROb2RlKGUpKS5hZGQobil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGZpfX0pLGZpLm9yaWdpbj1uZXcgZCgwLDApLGUoZ2kucHJvdG90eXBlLHtzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnJvb3Q/dGhpcy5yb290LnNpemUoKTowfSxpbnNlcnQ6ZnVuY3Rpb24odCxlKXt0aGlzLmNvbGxlY3RTdGF0cyh0KTt0PWdpLmVuc3VyZUV4dGVudCh0LHRoaXMubWluRXh0ZW50KTt0aGlzLnJvb3QuaW5zZXJ0KHQsZSl9LHF1ZXJ5OmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBUbjtyZXR1cm4gdGhpcy5xdWVyeSh0LGUpLGUuZ2V0SXRlbXMoKX0yPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLHRoaXMucm9vdC52aXNpdCh0LGUpKX0scXVlcnlBbGw6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgSTtyZXR1cm4gdGhpcy5yb290LmFkZEFsbEl0ZW1zKHQpLHR9LHJlbW92ZTpmdW5jdGlvbih0LGUpe3Q9Z2kuZW5zdXJlRXh0ZW50KHQsdGhpcy5taW5FeHRlbnQpO3JldHVybiB0aGlzLnJvb3QucmVtb3ZlKHQsZSl9LGNvbGxlY3RTdGF0czpmdW5jdGlvbih0KXt2YXIgZT10LmdldFdpZHRoKCk7ZTx0aGlzLm1pbkV4dGVudCYmMDxlJiYodGhpcy5taW5FeHRlbnQ9ZSk7dD10LmdldEhlaWdodCgpO3Q8dGhpcy5taW5FeHRlbnQmJjA8dCYmKHRoaXMubWluRXh0ZW50PXQpfSxkZXB0aDpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5yb290P3RoaXMucm9vdC5kZXB0aCgpOjB9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMucm9vdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bTmUsb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGdpfX0pLGdpLmVuc3VyZUV4dGVudD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TWluWCgpLGk9dC5nZXRNYXhYKCkscj10LmdldE1pblkoKSxzPXQuZ2V0TWF4WSgpO3JldHVybiBuIT09aSYmciE9PXM/dDoobj09PWkmJihpPShuLT1lLzIpK2UvMikscj09PXMmJihzPShyLT1lLzIpK2UvMiksbmV3IEMobixpLHIscykpfSxnaS5zZXJpYWxWZXJzaW9uVUlEPS0weDY3OGI2MGM5NjdhMjU0MDA7dmFyIHRvPU9iamVjdC5mcmVlemUoe1F1YWR0cmVlOmdpfSksZW89T2JqZWN0LmZyZWV6ZSh7U1RSdHJlZTpSZX0pLG5vPU9iamVjdC5mcmVlemUoe3F1YWR0cmVlOnRvLHN0cnRyZWU6ZW99KSxpbz1bXCJQb2ludFwiLFwiTXVsdGlQb2ludFwiLFwiTGluZVN0cmluZ1wiLFwiTXVsdGlMaW5lU3RyaW5nXCIsXCJQb2x5Z29uXCIsXCJNdWx0aVBvbHlnb25cIl07ZShkaS5wcm90b3R5cGUse3JlYWQ6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLHQ9KGU9XCJzdHJpbmdcIj09dHlwZW9mIHQ/SlNPTi5wYXJzZSh0KTp0KS50eXBlO2lmKCFyb1t0XSl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIEdlb0pTT04gdHlwZTogXCIrZS50eXBlKTtyZXR1cm4tMSE9PWlvLmluZGV4T2YodCk/cm9bdF0uYXBwbHkodGhpcyxbZS5jb29yZGluYXRlc10pOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PT10P3JvW3RdLmFwcGx5KHRoaXMsW2UuZ2VvbWV0cmllc10pOnJvW3RdLmFwcGx5KHRoaXMsW2VdKX0sd3JpdGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRHZW9tZXRyeVR5cGUoKTtpZighc29bZV0pdGhyb3cgbmV3IEVycm9yKFwiR2VvbWV0cnkgaXMgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4gc29bZV0uYXBwbHkodGhpcyxbdF0pfX0pO3ZhciBybz17RmVhdHVyZTpmdW5jdGlvbih0KXt2YXIgZSxuPXt9O2ZvcihlIGluIHQpbltlXT10W2VdO2lmKHQuZ2VvbWV0cnkpe3ZhciBpPXQuZ2VvbWV0cnkudHlwZTtpZighcm9baV0pdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBHZW9KU09OIHR5cGU6IFwiK3QudHlwZSk7bi5nZW9tZXRyeT10aGlzLnJlYWQodC5nZW9tZXRyeSl9cmV0dXJuIHQuYmJveCYmKG4uYmJveD1yby5iYm94LmFwcGx5KHRoaXMsW3QuYmJveF0pKSxufSxGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbih0KXt2YXIgZT17fTtpZih0LmZlYXR1cmVzKXtlLmZlYXR1cmVzPVtdO2Zvcih2YXIgbj0wO248dC5mZWF0dXJlcy5sZW5ndGg7KytuKWUuZmVhdHVyZXMucHVzaCh0aGlzLnJlYWQodC5mZWF0dXJlc1tuXSkpfXJldHVybiB0LmJib3gmJihlLmJib3g9dGhpcy5wYXJzZS5iYm94LmFwcGx5KHRoaXMsW3QuYmJveF0pKSxlfSxjb29yZGluYXRlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7KytuKXt2YXIgaT10W25dO2UucHVzaChuZXcgZChpWzBdLGlbMV0pKX1yZXR1cm4gZX0sYmJveDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhbbmV3IGQodFswXSx0WzFdKSxuZXcgZCh0WzJdLHRbMV0pLG5ldyBkKHRbMl0sdFszXSksbmV3IGQodFswXSx0WzNdKSxuZXcgZCh0WzBdLHRbMV0pXSl9LFBvaW50OmZ1bmN0aW9uKHQpe3Q9bmV3IGQodFswXSx0WzFdKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9pbnQodCl9LE11bHRpUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoOysrbillLnB1c2gocm8uUG9pbnQuYXBwbHkodGhpcyxbdFtuXV0pKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2ludChlKX0sTGluZVN0cmluZzpmdW5jdGlvbih0KXt0PXJvLmNvb3JkaW5hdGVzLmFwcGx5KHRoaXMsW3RdKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyh0KX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDsrK24pZS5wdXNoKHJvLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbdFtuXV0pKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGUpfSxQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1yby5jb29yZGluYXRlcy5hcHBseSh0aGlzLFt0WzBdXSksZT10aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKGUpLG49W10saT0xO2k8dC5sZW5ndGg7KytpKXt2YXIgcj10W2ldLHI9cm8uY29vcmRpbmF0ZXMuYXBwbHkodGhpcyxbcl0pLHI9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhyKTtuLnB1c2gocil9cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvbHlnb24oZSxuKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDsrK24pe3ZhciBpPXRbbl07ZS5wdXNoKHJvLlBvbHlnb24uYXBwbHkodGhpcyxbaV0pKX1yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKGUpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoOysrbil7dmFyIGk9dFtuXTtlLnB1c2godGhpcy5yZWFkKGkpKX1yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKGUpfX0sc289e2Nvb3JkaW5hdGU6ZnVuY3Rpb24odCl7cmV0dXJuW3QueCx0LnldfSxQb2ludDpmdW5jdGlvbih0KXtyZXR1cm57dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6c28uY29vcmRpbmF0ZS5hcHBseSh0aGlzLFt0LmdldENvb3JkaW5hdGUoKV0pfX0sTXVsdGlQb2ludDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuZ2VvbWV0cmllc1tuXSxpPXNvLlBvaW50LmFwcGx5KHRoaXMsW2ldKTtlLnB1c2goaS5jb29yZGluYXRlcyl9cmV0dXJue3R5cGU6XCJNdWx0aVBvaW50XCIsY29vcmRpbmF0ZXM6ZX19LExpbmVTdHJpbmc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49dC5nZXRDb29yZGluYXRlcygpLGk9MDtpPG4ubGVuZ3RoOysraSl7dmFyIHI9bltpXTtlLnB1c2goc28uY29vcmRpbmF0ZS5hcHBseSh0aGlzLFtyXSkpfXJldHVybnt0eXBlOlwiTGluZVN0cmluZ1wiLGNvb3JkaW5hdGVzOmV9fSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQuZ2VvbWV0cmllcy5sZW5ndGg7KytuKXt2YXIgaT10Lmdlb21ldHJpZXNbbl0saT1zby5MaW5lU3RyaW5nLmFwcGx5KHRoaXMsW2ldKTtlLnB1c2goaS5jb29yZGluYXRlcyl9cmV0dXJue3R5cGU6XCJNdWx0aUxpbmVTdHJpbmdcIixjb29yZGluYXRlczplfX0sUG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT1bXSxuPXNvLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbdC5zaGVsbF0pO2UucHVzaChuLmNvb3JkaW5hdGVzKTtmb3IodmFyIGk9MDtpPHQuaG9sZXMubGVuZ3RoOysraSl7dmFyIHI9dC5ob2xlc1tpXSxyPXNvLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbcl0pO2UucHVzaChyLmNvb3JkaW5hdGVzKX1yZXR1cm57dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczplfX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmdlb21ldHJpZXMubGVuZ3RoOysrbil7dmFyIGk9dC5nZW9tZXRyaWVzW25dLGk9c28uUG9seWdvbi5hcHBseSh0aGlzLFtpXSk7ZS5wdXNoKGkuY29vcmRpbmF0ZXMpfXJldHVybnt0eXBlOlwiTXVsdGlQb2x5Z29uXCIsY29vcmRpbmF0ZXM6ZX19LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuZ2VvbWV0cmllc1tuXSxyPWkuZ2V0R2VvbWV0cnlUeXBlKCk7ZS5wdXNoKHNvW3JdLmFwcGx5KHRoaXMsW2ldKSl9cmV0dXJue3R5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIixnZW9tZXRyaWVzOmV9fX07ZShwaS5wcm90b3R5cGUse3JlYWQ6ZnVuY3Rpb24odCl7dD10aGlzLnBhcnNlci5yZWFkKHQpO3JldHVybiB0aGlzLnByZWNpc2lvbk1vZGVsLmdldFR5cGUoKT09PVZ0LkZJWEVEJiZ0aGlzLnJlZHVjZVByZWNpc2lvbih0KSx0fSxyZWR1Y2VQcmVjaXNpb246ZnVuY3Rpb24odCl7dmFyIGUsbjtpZih0LmNvb3JkaW5hdGUpdGhpcy5wcmVjaXNpb25Nb2RlbC5tYWtlUHJlY2lzZSh0LmNvb3JkaW5hdGUpO2Vsc2UgaWYodC5wb2ludHMpZm9yKGU9MCxuPXQucG9pbnRzLmxlbmd0aDtlPG47ZSsrKXRoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UodC5wb2ludHNbZV0pO2Vsc2UgaWYodC5nZW9tZXRyaWVzKWZvcihlPTAsbj10Lmdlb21ldHJpZXMubGVuZ3RoO2U8bjtlKyspdGhpcy5yZWR1Y2VQcmVjaXNpb24odC5nZW9tZXRyaWVzW2VdKX19KSxlKG1pLnByb3RvdHlwZSx7d3JpdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyc2VyLndyaXRlKHQpfX0pLGUoeWkucHJvdG90eXBlLHtyZWFkOmZ1bmN0aW9uKHQpe3Q9dGhpcy5wYXJzZXIucmVhZCh0KTtyZXR1cm4gdGhpcy5wcmVjaXNpb25Nb2RlbC5nZXRUeXBlKCk9PT1WdC5GSVhFRCYmdGhpcy5yZWR1Y2VQcmVjaXNpb24odCksdH0scmVkdWNlUHJlY2lzaW9uOmZ1bmN0aW9uKHQpe2lmKHQuY29vcmRpbmF0ZSl0aGlzLnByZWNpc2lvbk1vZGVsLm1ha2VQcmVjaXNlKHQuY29vcmRpbmF0ZSk7ZWxzZSBpZih0LnBvaW50cylmb3IodmFyIGU9MCxuPXQucG9pbnRzLmNvb3JkaW5hdGVzLmxlbmd0aDtlPG47ZSsrKXRoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UodC5wb2ludHMuY29vcmRpbmF0ZXNbZV0pO2Vsc2UgaWYodC5nZW9tZXRyaWVzKWZvcih2YXIgaT0wLHI9dC5nZW9tZXRyaWVzLmxlbmd0aDtpPHI7aSsrKXRoaXMucmVkdWNlUHJlY2lzaW9uKHQuZ2VvbWV0cmllc1tpXSl9fSksZSh4aS5wcm90b3R5cGUse3JlYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBvbC5nZW9tLlBvaW50P3RoaXMuY29udmVydEZyb21Qb2ludCh0KTp0IGluc3RhbmNlb2Ygb2wuZ2VvbS5MaW5lU3RyaW5nP3RoaXMuY29udmVydEZyb21MaW5lU3RyaW5nKHQpOnQgaW5zdGFuY2VvZiBvbC5nZW9tLkxpbmVhclJpbmc/dGhpcy5jb252ZXJ0RnJvbUxpbmVhclJpbmcodCk6dCBpbnN0YW5jZW9mIG9sLmdlb20uUG9seWdvbj90aGlzLmNvbnZlcnRGcm9tUG9seWdvbih0KTp0IGluc3RhbmNlb2Ygb2wuZ2VvbS5NdWx0aVBvaW50P3RoaXMuY29udmVydEZyb21NdWx0aVBvaW50KHQpOnQgaW5zdGFuY2VvZiBvbC5nZW9tLk11bHRpTGluZVN0cmluZz90aGlzLmNvbnZlcnRGcm9tTXVsdGlMaW5lU3RyaW5nKHQpOnQgaW5zdGFuY2VvZiBvbC5nZW9tLk11bHRpUG9seWdvbj90aGlzLmNvbnZlcnRGcm9tTXVsdGlQb2x5Z29uKHQpOnQgaW5zdGFuY2VvZiBvbC5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbj90aGlzLmNvbnZlcnRGcm9tQ29sbGVjdGlvbih0KTp2b2lkIDB9LGNvbnZlcnRGcm9tUG9pbnQ6ZnVuY3Rpb24odCl7dD10LmdldENvb3JkaW5hdGVzKCk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvaW50KG5ldyBkKHRbMF0sdFsxXSkpfSxjb252ZXJ0RnJvbUxpbmVTdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodC5nZXRDb29yZGluYXRlcygpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGQodFswXSx0WzFdKX0pKX0sY29udmVydEZyb21MaW5lYXJSaW5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKHQuZ2V0Q29vcmRpbmF0ZXMoKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBkKHRbMF0sdFsxXSl9KSl9LGNvbnZlcnRGcm9tUG9seWdvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRMaW5lYXJSaW5ncygpLG49bnVsbCxpPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIHM9dGhpcy5jb252ZXJ0RnJvbUxpbmVhclJpbmcoZVtyXSk7MD09PXI/bj1zOmkucHVzaChzKX1yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9seWdvbihuLGkpfSxjb252ZXJ0RnJvbU11bHRpUG9pbnQ6ZnVuY3Rpb24odCl7dD10LmdldFBvaW50cygpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb252ZXJ0RnJvbVBvaW50KHQpfSx0aGlzKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2ludCh0KX0sY29udmVydEZyb21NdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24odCl7dD10LmdldExpbmVTdHJpbmdzKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnZlcnRGcm9tTGluZVN0cmluZyh0KX0sdGhpcyk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyh0KX0sY29udmVydEZyb21NdWx0aVBvbHlnb246ZnVuY3Rpb24odCl7dD10LmdldFBvbHlnb25zKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnZlcnRGcm9tUG9seWdvbih0KX0sdGhpcyk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9seWdvbih0KX0sY29udmVydEZyb21Db2xsZWN0aW9uOmZ1bmN0aW9uKHQpe3Q9dC5nZXRHZW9tZXRyaWVzKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlYWQodCl9LHRoaXMpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24odCl9LHdyaXRlOmZ1bmN0aW9uKHQpe3JldHVyblwiUG9pbnRcIj09PXQuZ2V0R2VvbWV0cnlUeXBlKCk/dGhpcy5jb252ZXJ0VG9Qb2ludCh0LmdldENvb3JkaW5hdGUoKSk6XCJMaW5lU3RyaW5nXCI9PT10LmdldEdlb21ldHJ5VHlwZSgpP3RoaXMuY29udmVydFRvTGluZVN0cmluZyh0KTpcIkxpbmVhclJpbmdcIj09PXQuZ2V0R2VvbWV0cnlUeXBlKCk/dGhpcy5jb252ZXJ0VG9MaW5lYXJSaW5nKHQpOlwiUG9seWdvblwiPT09dC5nZXRHZW9tZXRyeVR5cGUoKT90aGlzLmNvbnZlcnRUb1BvbHlnb24odCk6XCJNdWx0aVBvaW50XCI9PT10LmdldEdlb21ldHJ5VHlwZSgpP3RoaXMuY29udmVydFRvTXVsdGlQb2ludCh0KTpcIk11bHRpTGluZVN0cmluZ1wiPT09dC5nZXRHZW9tZXRyeVR5cGUoKT90aGlzLmNvbnZlcnRUb011bHRpTGluZVN0cmluZyh0KTpcIk11bHRpUG9seWdvblwiPT09dC5nZXRHZW9tZXRyeVR5cGUoKT90aGlzLmNvbnZlcnRUb011bHRpUG9seWdvbih0KTpcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT09dC5nZXRHZW9tZXRyeVR5cGUoKT90aGlzLmNvbnZlcnRUb0NvbGxlY3Rpb24odCk6dm9pZCAwfSxjb252ZXJ0VG9Qb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG9sLmdlb20uUG9pbnQoW3QueCx0LnldKX0sY29udmVydFRvTGluZVN0cmluZzpmdW5jdGlvbih0KXt0PXQucG9pbnRzLmNvb3JkaW5hdGVzLm1hcCh2aSk7cmV0dXJuIG5ldyBvbC5nZW9tLkxpbmVTdHJpbmcodCl9LGNvbnZlcnRUb0xpbmVhclJpbmc6ZnVuY3Rpb24odCl7dD10LnBvaW50cy5jb29yZGluYXRlcy5tYXAodmkpO3JldHVybiBuZXcgb2wuZ2VvbS5MaW5lYXJSaW5nKHQpfSxjb252ZXJ0VG9Qb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bdC5zaGVsbC5wb2ludHMuY29vcmRpbmF0ZXMubWFwKHZpKV0sbj0wO248dC5ob2xlcy5sZW5ndGg7bisrKWUucHVzaCh0LmhvbGVzW25dLnBvaW50cy5jb29yZGluYXRlcy5tYXAodmkpKTtyZXR1cm4gbmV3IG9sLmdlb20uUG9seWdvbihlKX0sY29udmVydFRvTXVsdGlQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG9sLmdlb20uTXVsdGlQb2ludCh0LmdldENvb3JkaW5hdGVzKCkubWFwKHZpKSl9LGNvbnZlcnRUb011bHRpTGluZVN0cmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZW9tZXRyaWVzLmxlbmd0aDtuKyspZS5wdXNoKHRoaXMuY29udmVydFRvTGluZVN0cmluZyh0Lmdlb21ldHJpZXNbbl0pLmdldENvb3JkaW5hdGVzKCkpO3JldHVybiBuZXcgb2wuZ2VvbS5NdWx0aUxpbmVTdHJpbmcoZSl9LGNvbnZlcnRUb011bHRpUG9seWdvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZW9tZXRyaWVzLmxlbmd0aDtuKyspZS5wdXNoKHRoaXMuY29udmVydFRvUG9seWdvbih0Lmdlb21ldHJpZXNbbl0pLmdldENvb3JkaW5hdGVzKCkpO3JldHVybiBuZXcgb2wuZ2VvbS5NdWx0aVBvbHlnb24oZSl9LGNvbnZlcnRUb0NvbGxlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQuZ2VvbWV0cmllcy5sZW5ndGg7bisrKXt2YXIgaT10Lmdlb21ldHJpZXNbbl07ZS5wdXNoKHRoaXMud3JpdGUoaSkpfXJldHVybiBuZXcgb2wuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24oZSl9fSk7dmFyIG9vPU9iamVjdC5mcmVlemUoe0dlb0pTT05SZWFkZXI6cGksR2VvSlNPTldyaXRlcjptaSxPTDNQYXJzZXI6eGksV0tUUmVhZGVyOnlpLFdLVFdyaXRlcjpYdH0pO2UoRWkucHJvdG90eXBlLHtyZXNjYWxlOmZ1bmN0aW9uKCl7aWYoUihhcmd1bWVudHNbMF0sbSkpZm9yKHZhciB0PWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5yZXNjYWxlKGUuZ2V0Q29vcmRpbmF0ZXMoKSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgbj1hcmd1bWVudHNbMF07Mj09PW4ubGVuZ3RoJiYobmV3IGQoblswXSksbmV3IGQoblsxXSkpO2Zvcih0PTA7dDxuLmxlbmd0aDt0Kyspblt0XS54PW5bdF0ueC90aGlzLnNjYWxlRmFjdG9yK3RoaXMub2Zmc2V0WCxuW3RdLnk9blt0XS55L3RoaXMuc2NhbGVGYWN0b3IrdGhpcy5vZmZzZXRZOzI9PT1uLmxlbmd0aCYmblswXS5lcXVhbHMyRChuWzFdKSYmQS5vdXQucHJpbnRsbihuKX19LHNjYWxlOmZ1bmN0aW9uKCl7aWYoUihhcmd1bWVudHNbMF0sbSkpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgSSxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuYWRkKG5ldyBEZSh0aGlzLnNjYWxlKGkuZ2V0Q29vcmRpbmF0ZXMoKSksaS5nZXREYXRhKCkpKX1yZXR1cm4gZX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIHI9YXJndW1lbnRzWzBdLHM9bmV3IEFycmF5KHIubGVuZ3RoKS5maWxsKG51bGwpLG49MDtuPHIubGVuZ3RoO24rKylzW25dPW5ldyBkKE1hdGgucm91bmQoKHJbbl0ueC10aGlzLm9mZnNldFgpKnRoaXMuc2NhbGVGYWN0b3IpLE1hdGgucm91bmQoKHJbbl0ueS10aGlzLm9mZnNldFkpKnRoaXMuc2NhbGVGYWN0b3IpLHJbbl0ueik7cmV0dXJuIEgucmVtb3ZlUmVwZWF0ZWRQb2ludHMocyl9fSxpc0ludGVnZXJQcmVjaXNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuc2NhbGVGYWN0b3J9LGdldE5vZGVkU3Vic3RyaW5nczpmdW5jdGlvbigpe3ZhciB0PXRoaXMubm9kZXIuZ2V0Tm9kZWRTdWJzdHJpbmdzKCk7cmV0dXJuIHRoaXMuaXNTY2FsZWQmJnRoaXMucmVzY2FsZSh0KSx0fSxjb21wdXRlTm9kZXM6ZnVuY3Rpb24odCl7dmFyIGU9dDt0aGlzLmlzU2NhbGVkJiYoZT10aGlzLnNjYWxlKHQpKSx0aGlzLm5vZGVyLmNvbXB1dGVOb2RlcyhlKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bQmVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBFaX19KTt2YXIgYW89T2JqZWN0LmZyZWV6ZSh7TUNJbmRleE5vZGVyOlZlLFNjYWxlZE5vZGVyOkVpLFNlZ21lbnRTdHJpbmc6bWV9KTtlKElpLnByb3RvdHlwZSx7aXNTaW1wbGVNdWx0aVBvaW50OmZ1bmN0aW9uKHQpe2lmKHQuaXNFbXB0eSgpKXJldHVybiEwO2Zvcih2YXIgZT1uZXcgYXQsbj0wO248dC5nZXROdW1HZW9tZXRyaWVzKCk7bisrKXt2YXIgaT10LmdldEdlb21ldHJ5TihuKS5nZXRDb29yZGluYXRlKCk7aWYoZS5jb250YWlucyhpKSlyZXR1cm4gdGhpcy5ub25TaW1wbGVMb2NhdGlvbj1pLCExO2UuYWRkKGkpfXJldHVybiEwfSxpc1NpbXBsZVBvbHlnb25hbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9Um4uZ2V0TGluZXModCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO2lmKCF0aGlzLmlzU2ltcGxlTGluZWFyR2VvbWV0cnkobikpcmV0dXJuITF9cmV0dXJuITB9LGhhc0Nsb3NlZEVuZHBvaW50SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgcnQsbj10LmdldEVkZ2VJdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCkscj0oaS5nZXRNYXhpbXVtU2VnbWVudEluZGV4KCksaS5pc0Nsb3NlZCgpKSxzPWkuZ2V0Q29vcmRpbmF0ZSgwKTt0aGlzLmFkZEVuZHBvaW50KGUscyxyKTtpPWkuZ2V0Q29vcmRpbmF0ZShpLmdldE51bVBvaW50cygpLTEpO3RoaXMuYWRkRW5kcG9pbnQoZSxpLHIpfWZvcihuPWUudmFsdWVzKCkuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBvPW4ubmV4dCgpO2lmKG8uaXNDbG9zZWQmJjIhPT1vLmRlZ3JlZSlyZXR1cm4gdGhpcy5ub25TaW1wbGVMb2NhdGlvbj1vLmdldENvb3JkaW5hdGUoKSwhMH1yZXR1cm4hMX0sZ2V0Tm9uU2ltcGxlTG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub25TaW1wbGVMb2NhdGlvbn0saXNTaW1wbGVMaW5lYXJHZW9tZXRyeTpmdW5jdGlvbih0KXtpZih0LmlzRW1wdHkoKSlyZXR1cm4hMDt2YXIgZT1uZXcgcW4oMCx0KSx0PW5ldyBXdCx0PWUuY29tcHV0ZVNlbGZOb2Rlcyh0LCEwKTtyZXR1cm4hdC5oYXNJbnRlcnNlY3Rpb24oKXx8KHQuaGFzUHJvcGVySW50ZXJzZWN0aW9uKCk/KHRoaXMubm9uU2ltcGxlTG9jYXRpb249dC5nZXRQcm9wZXJJbnRlcnNlY3Rpb25Qb2ludCgpLCExKTohdGhpcy5oYXNOb25FbmRwb2ludEludGVyc2VjdGlvbihlKSYmKCF0aGlzLmlzQ2xvc2VkRW5kcG9pbnRzSW5JbnRlcmlvcnx8IXRoaXMuaGFzQ2xvc2VkRW5kcG9pbnRJbnRlcnNlY3Rpb24oZSkpKX0saGFzTm9uRW5kcG9pbnRJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuZ2V0RWRnZUl0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TWF4aW11bVNlZ21lbnRJbmRleCgpLHI9bi5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1yLm5leHQoKTtpZighcy5pc0VuZFBvaW50KGkpKXJldHVybiB0aGlzLm5vblNpbXBsZUxvY2F0aW9uPXMuZ2V0Q29vcmRpbmF0ZSgpLCEwfXJldHVybiExfSxhZGRFbmRwb2ludDpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXQoZSk7bnVsbD09PWkmJihpPW5ldyBOaShlKSx0LnB1dChlLGkpKSxpLmFkZEVuZHBvaW50KG4pfSxjb21wdXRlU2ltcGxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vblNpbXBsZUxvY2F0aW9uPW51bGwsISF0LmlzRW1wdHkoKXx8KHQgaW5zdGFuY2VvZiBDdHx8dCBpbnN0YW5jZW9mIGd0P3RoaXMuaXNTaW1wbGVMaW5lYXJHZW9tZXRyeSh0KTp0IGluc3RhbmNlb2YgVHQ/dGhpcy5pc1NpbXBsZU11bHRpUG9pbnQodCk6Uih0LEx0KT90aGlzLmlzU2ltcGxlUG9seWdvbmFsKHQpOiEodCBpbnN0YW5jZW9mIGZ0KXx8dGhpcy5pc1NpbXBsZUdlb21ldHJ5Q29sbGVjdGlvbih0KSl9LGlzU2ltcGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9uU2ltcGxlTG9jYXRpb249bnVsbCx0aGlzLmNvbXB1dGVTaW1wbGUodGhpcy5pbnB1dEdlb20pfSxpc1NpbXBsZUdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7aWYoIXRoaXMuY29tcHV0ZVNpbXBsZShuKSlyZXR1cm4hMX1yZXR1cm4hMH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSWl9fSksZShOaS5wcm90b3R5cGUse2FkZEVuZHBvaW50OmZ1bmN0aW9uKHQpe3RoaXMuZGVncmVlKyssdGhpcy5pc0Nsb3NlZHw9dH0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBOaX19KSxJaS5FbmRwb2ludEluZm89TmksZShDaS5wcm90b3R5cGUse2dldEVuZENhcFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kQ2FwU3R5bGV9LGlzU2luZ2xlU2lkZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTaW5nbGVTaWRlZH0sc2V0UXVhZHJhbnRTZWdtZW50czpmdW5jdGlvbih0KXt0aGlzLnF1YWRyYW50U2VnbWVudHM9dCwwPT09dGhpcy5xdWFkcmFudFNlZ21lbnRzJiYodGhpcy5qb2luU3R5bGU9Q2kuSk9JTl9CRVZFTCksdGhpcy5xdWFkcmFudFNlZ21lbnRzPDAmJih0aGlzLmpvaW5TdHlsZT1DaS5KT0lOX01JVFJFLHRoaXMubWl0cmVMaW1pdD1NYXRoLmFicyh0aGlzLnF1YWRyYW50U2VnbWVudHMpKSx0PD0wJiYodGhpcy5xdWFkcmFudFNlZ21lbnRzPTEpLHRoaXMuam9pblN0eWxlIT09Q2kuSk9JTl9ST1VORCYmKHRoaXMucXVhZHJhbnRTZWdtZW50cz1DaS5ERUZBVUxUX1FVQURSQU5UX1NFR01FTlRTKX0sZ2V0Sm9pblN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuam9pblN0eWxlfSxzZXRKb2luU3R5bGU6ZnVuY3Rpb24odCl7dGhpcy5qb2luU3R5bGU9dH0sc2V0U2ltcGxpZnlGYWN0b3I6ZnVuY3Rpb24odCl7dGhpcy5zaW1wbGlmeUZhY3Rvcj10PDA/MDp0fSxnZXRTaW1wbGlmeUZhY3RvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpbXBsaWZ5RmFjdG9yfSxnZXRRdWFkcmFudFNlZ21lbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVhZHJhbnRTZWdtZW50c30sc2V0RW5kQ2FwU3R5bGU6ZnVuY3Rpb24odCl7dGhpcy5lbmRDYXBTdHlsZT10fSxnZXRNaXRyZUxpbWl0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWl0cmVMaW1pdH0sc2V0TWl0cmVMaW1pdDpmdW5jdGlvbih0KXt0aGlzLm1pdHJlTGltaXQ9dH0sc2V0U2luZ2xlU2lkZWQ6ZnVuY3Rpb24odCl7dGhpcy5faXNTaW5nbGVTaWRlZD10fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDaX19KSxDaS5idWZmZXJEaXN0YW5jZUVycm9yPWZ1bmN0aW9uKHQpe3Q9TWF0aC5QSS8yL3Q7cmV0dXJuIDEtTWF0aC5jb3ModC8yKX0sQ2kuQ0FQX1JPVU5EPTEsQ2kuQ0FQX0ZMQVQ9MixDaS5DQVBfU1FVQVJFPTMsQ2kuSk9JTl9ST1VORD0xLENpLkpPSU5fTUlUUkU9MixDaS5KT0lOX0JFVkVMPTMsQ2kuREVGQVVMVF9RVUFEUkFOVF9TRUdNRU5UUz04LENpLkRFRkFVTFRfTUlUUkVfTElNSVQ9NSxDaS5ERUZBVUxUX1NJTVBMSUZZX0ZBQ1RPUj0uMDEsZShTaS5wcm90b3R5cGUse2dldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW5Db29yZH0sZ2V0UmlnaHRtb3N0U2lkZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0UmlnaHRtb3N0U2lkZU9mU2VnbWVudCh0LGUpO3JldHVybiBuPDAmJihuPXRoaXMuZ2V0UmlnaHRtb3N0U2lkZU9mU2VnbWVudCh0LGUtMSkpLG48MCYmKHRoaXMubWluQ29vcmQ9bnVsbCx0aGlzLmNoZWNrRm9yUmlnaHRtb3N0Q29vcmRpbmF0ZSh0KSksbn0sZmluZFJpZ2h0bW9zdEVkZ2VBdFZlcnRleDpmdW5jdGlvbigpe3ZhciB0PXRoaXMubWluRGUuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCk7bC5pc1RydWUoMDx0aGlzLm1pbkluZGV4JiZ0aGlzLm1pbkluZGV4PHQubGVuZ3RoLFwicmlnaHRtb3N0IHBvaW50IGV4cGVjdGVkIHRvIGJlIGludGVyaW9yIHZlcnRleCBvZiBlZGdlXCIpO3ZhciBlPXRbdGhpcy5taW5JbmRleC0xXSxuPXRbdGhpcy5taW5JbmRleCsxXSxpPVp0LmNvbXB1dGVPcmllbnRhdGlvbih0aGlzLm1pbkNvb3JkLG4sZSksdD0hMTsoZS55PHRoaXMubWluQ29vcmQueSYmbi55PHRoaXMubWluQ29vcmQueSYmaT09PVp0LkNPVU5URVJDTE9DS1dJU0V8fGUueT50aGlzLm1pbkNvb3JkLnkmJm4ueT50aGlzLm1pbkNvb3JkLnkmJmk9PT1adC5DTE9DS1dJU0UpJiYodD0hMCksdCYmKHRoaXMubWluSW5kZXg9dGhpcy5taW5JbmRleC0xKX0sZ2V0UmlnaHRtb3N0U2lkZU9mU2VnbWVudDpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCk7aWYoZTwwfHxlKzE+PW4ubGVuZ3RoKXJldHVybi0xO2lmKG5bZV0ueT09PW5bZSsxXS55KXJldHVybi0xO3Q9S2UuTEVGVDtyZXR1cm4gbltlXS55PG5bZSsxXS55JiYodD1LZS5SSUdIVCksdH0sZ2V0RWRnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWVudGVkRGV9LGNoZWNrRm9yUmlnaHRtb3N0Q29vcmRpbmF0ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKSxuPTA7bjxlLmxlbmd0aC0xO24rKykobnVsbD09PXRoaXMubWluQ29vcmR8fGVbbl0ueD50aGlzLm1pbkNvb3JkLngpJiYodGhpcy5taW5EZT10LHRoaXMubWluSW5kZXg9bix0aGlzLm1pbkNvb3JkPWVbbl0pfSxmaW5kUmlnaHRtb3N0RWRnZUF0Tm9kZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMubWluRGUuZ2V0Tm9kZSgpLmdldEVkZ2VzKCk7dGhpcy5taW5EZT10LmdldFJpZ2h0bW9zdEVkZ2UoKSx0aGlzLm1pbkRlLmlzRm9yd2FyZCgpfHwodGhpcy5taW5EZT10aGlzLm1pbkRlLmdldFN5bSgpLHRoaXMubWluSW5kZXg9dGhpcy5taW5EZS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKS5sZW5ndGgtMSl9LGZpbmRFZGdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtuLmlzRm9yd2FyZCgpJiZ0aGlzLmNoZWNrRm9yUmlnaHRtb3N0Q29vcmRpbmF0ZShuKX1sLmlzVHJ1ZSgwIT09dGhpcy5taW5JbmRleHx8dGhpcy5taW5Db29yZC5lcXVhbHModGhpcy5taW5EZS5nZXRDb29yZGluYXRlKCkpLFwiaW5jb25zaXN0ZW5jeSBpbiByaWdodG1vc3QgcHJvY2Vzc2luZ1wiKSwwPT09dGhpcy5taW5JbmRleD90aGlzLmZpbmRSaWdodG1vc3RFZGdlQXROb2RlKCk6dGhpcy5maW5kUmlnaHRtb3N0RWRnZUF0VmVydGV4KCksdGhpcy5vcmllbnRlZERlPXRoaXMubWluRGUsdGhpcy5nZXRSaWdodG1vc3RTaWRlKHRoaXMubWluRGUsdGhpcy5taW5JbmRleCk9PT1LZS5MRUZUJiYodGhpcy5vcmllbnRlZERlPXRoaXMubWluRGUuZ2V0U3ltKCkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBTaX19KSx3aS5wcm90b3R5cGUuYWRkTGFzdD1mdW5jdGlvbih0KXt0aGlzLmFycmF5Xy5wdXNoKHQpfSx3aS5wcm90b3R5cGUucmVtb3ZlRmlyc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnJheV8uc2hpZnQoKX0sd2kucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sZShMaS5wcm90b3R5cGUse2NsZWFyVmlzaXRlZEVkZ2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZGlyRWRnZUxpc3QuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3QubmV4dCgpLnNldFZpc2l0ZWQoITEpfX0sZ2V0UmlnaHRtb3N0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0TW9zdENvb3JkfSxjb21wdXRlTm9kZURlcHRoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dC5nZXRFZGdlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXtpZigoaT1uLm5leHQoKSkuaXNWaXNpdGVkKCl8fGkuZ2V0U3ltKCkuaXNWaXNpdGVkKCkpe2U9aTticmVha319aWYobnVsbD09PWUpdGhyb3cgbmV3IFllKFwidW5hYmxlIHRvIGZpbmQgZWRnZSB0byBjb21wdXRlIGRlcHRocyBhdCBcIit0LmdldENvb3JkaW5hdGUoKSk7dC5nZXRFZGdlcygpLmNvbXB1dGVEZXB0aHMoZSk7Zm9yKHZhciBpLG49dC5nZXRFZGdlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXsoaT1uLm5leHQoKSkuc2V0VmlzaXRlZCghMCksdGhpcy5jb3B5U3ltRGVwdGhzKGkpfX0sY29tcHV0ZURlcHRoOmZ1bmN0aW9uKHQpe3RoaXMuY2xlYXJWaXNpdGVkRWRnZXMoKTt2YXIgZT10aGlzLmZpbmRlci5nZXRFZGdlKCk7ZS5nZXROb2RlKCksZS5nZXRMYWJlbCgpLGUuc2V0RWRnZURlcHRocyhLZS5SSUdIVCx0KSx0aGlzLmNvcHlTeW1EZXB0aHMoZSksdGhpcy5jb21wdXRlRGVwdGhzKGUpfSxjcmVhdGU6ZnVuY3Rpb24odCl7dGhpcy5hZGRSZWFjaGFibGUodCksdGhpcy5maW5kZXIuZmluZEVkZ2UodGhpcy5kaXJFZGdlTGlzdCksdGhpcy5yaWdodE1vc3RDb29yZD10aGlzLmZpbmRlci5nZXRDb29yZGluYXRlKCl9LGZpbmRSZXN1bHRFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRpckVkZ2VMaXN0Lml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTsxPD1lLmdldERlcHRoKEtlLlJJR0hUKSYmZS5nZXREZXB0aChLZS5MRUZUKTw9MCYmIWUuaXNJbnRlcmlvckFyZWFFZGdlKCkmJmUuc2V0SW5SZXN1bHQoITApfX0sY29tcHV0ZURlcHRoczpmdW5jdGlvbih0KXt2YXIgZT1uZXcgUSxuPW5ldyB3aSxpPXQuZ2V0Tm9kZSgpO2ZvcihuLmFkZExhc3QoaSksZS5hZGQoaSksdC5zZXRWaXNpdGVkKCEwKTshbi5pc0VtcHR5KCk7KXt2YXIgcj1uLnJlbW92ZUZpcnN0KCk7ZS5hZGQociksdGhpcy5jb21wdXRlTm9kZURlcHRoKHIpO2Zvcih2YXIgcz1yLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtzLmhhc05leHQoKTspe3ZhciBvPXMubmV4dCgpLmdldFN5bSgpO28uaXNWaXNpdGVkKCl8fChvPW8uZ2V0Tm9kZSgpLGUuY29udGFpbnMobyl8fChuLmFkZExhc3QobyksZS5hZGQobykpKX19fSxjb21wYXJlVG86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmlnaHRNb3N0Q29vcmQueDx0LnJpZ2h0TW9zdENvb3JkLng/LTE6dGhpcy5yaWdodE1vc3RDb29yZC54PnQucmlnaHRNb3N0Q29vcmQueD8xOjB9LGdldEVudmVsb3BlOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuZW52KXtmb3IodmFyIHQ9bmV3IEMsZT10aGlzLmRpckVkZ2VMaXN0Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKSxpPTA7aTxuLmxlbmd0aC0xO2krKyl0LmV4cGFuZFRvSW5jbHVkZShuW2ldKTt0aGlzLmVudj10fXJldHVybiB0aGlzLmVudn0sYWRkUmVhY2hhYmxlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBlZTtmb3IoZS5hZGQodCk7IWUuZW1wdHkoKTspe3ZhciBuPWUucG9wKCk7dGhpcy5hZGQobixlKX19LGNvcHlTeW1EZXB0aHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRTeW0oKTtlLnNldERlcHRoKEtlLkxFRlQsdC5nZXREZXB0aChLZS5SSUdIVCkpLGUuc2V0RGVwdGgoS2UuUklHSFQsdC5nZXREZXB0aChLZS5MRUZUKSl9LGFkZDpmdW5jdGlvbih0LGUpe3Quc2V0VmlzaXRlZCghMCksdGhpcy5ub2Rlcy5hZGQodCk7Zm9yKHZhciBuPXQuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7dGhpcy5kaXJFZGdlTGlzdC5hZGQoaSk7aT1pLmdldFN5bSgpLmdldE5vZGUoKTtpLmlzVmlzaXRlZCgpfHxlLnB1c2goaSl9fSxnZXROb2RlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzfSxnZXREaXJlY3RlZEVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyRWRnZUxpc3R9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBMaX19KSxlKFJpLnByb3RvdHlwZSx7aXNEZWxldGFibGU6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dGhpcy5pbnB1dExpbmVbdF0scz10aGlzLmlucHV0TGluZVtlXSxlPXRoaXMuaW5wdXRMaW5lW25dO3JldHVybiEoIXRoaXMuaXNDb25jYXZlKHIscyxlKXx8IXRoaXMuaXNTaGFsbG93KHIscyxlLGkpKSYmdGhpcy5pc1NoYWxsb3dTYW1wbGVkKHIscyx0LG4saSl9LGRlbGV0ZVNoYWxsb3dDb25jYXZpdGllczpmdW5jdGlvbigpe2Zvcih2YXIgdD0xLGU9KHRoaXMuaW5wdXRMaW5lLmxlbmd0aCx0aGlzLmZpbmROZXh0Tm9uRGVsZXRlZEluZGV4KHQpKSxuPXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgoZSksaT0hMTtuPHRoaXMuaW5wdXRMaW5lLmxlbmd0aDspe3ZhciByPSExO3RoaXMuaXNEZWxldGFibGUodCxlLG4sdGhpcy5kaXN0YW5jZVRvbCkmJih0aGlzLmlzRGVsZXRlZFtlXT1SaS5ERUxFVEUsaT1yPSEwKSx0PXI/bjplLGU9dGhpcy5maW5kTmV4dE5vbkRlbGV0ZWRJbmRleCh0KSxuPXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgoZSl9cmV0dXJuIGl9LGlzU2hhbGxvd0NvbmNhdml0eTpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gWnQuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKT09PXRoaXMuYW5nbGVPcmllbnRhdGlvbiYmWnQuZGlzdGFuY2VQb2ludExpbmUoZSx0LG4pPGl9LGlzU2hhbGxvd1NhbXBsZWQ6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgcz1NYXRoLnRydW5jKChpLW4pL1JpLk5VTV9QVFNfVE9fQ0hFQ0spO3M8PTAmJihzPTEpO2Zvcih2YXIgbz1uO288aTtvKz1zKWlmKCF0aGlzLmlzU2hhbGxvdyh0LGUsdGhpcy5pbnB1dExpbmVbb10scikpcmV0dXJuITE7cmV0dXJuITB9LGlzQ29uY2F2ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9WnQuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKT09PXRoaXMuYW5nbGVPcmllbnRhdGlvbjtyZXR1cm4gaX0sc2ltcGxpZnk6ZnVuY3Rpb24odCl7dGhpcy5kaXN0YW5jZVRvbD1NYXRoLmFicyh0KSx0PDAmJih0aGlzLmFuZ2xlT3JpZW50YXRpb249WnQuQ0xPQ0tXSVNFKSx0aGlzLmlzRGVsZXRlZD1uZXcgQXJyYXkodGhpcy5pbnB1dExpbmUubGVuZ3RoKS5maWxsKG51bGwpO2Zvcig7dGhpcy5kZWxldGVTaGFsbG93Q29uY2F2aXRpZXMoKTspO3JldHVybiB0aGlzLmNvbGxhcHNlTGluZSgpfSxmaW5kTmV4dE5vbkRlbGV0ZWRJbmRleDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dCsxO2U8dGhpcy5pbnB1dExpbmUubGVuZ3RoJiZ0aGlzLmlzRGVsZXRlZFtlXT09PVJpLkRFTEVURTspZSsrO3JldHVybiBlfSxpc1NoYWxsb3c6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIFp0LmRpc3RhbmNlUG9pbnRMaW5lKGUsdCxuKTxpfSxjb2xsYXBzZUxpbmU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IE4sZT0wO2U8dGhpcy5pbnB1dExpbmUubGVuZ3RoO2UrKyl0aGlzLmlzRGVsZXRlZFtlXSE9PVJpLkRFTEVURSYmdC5hZGQodGhpcy5pbnB1dExpbmVbZV0pO3JldHVybiB0LnRvQ29vcmRpbmF0ZUFycmF5KCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFJpfX0pLFJpLnNpbXBsaWZ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBSaSh0KS5zaW1wbGlmeShlKX0sUmkuSU5JVD0wLFJpLkRFTEVURT0xLFJpLktFRVA9MSxSaS5OVU1fUFRTX1RPX0NIRUNLPTEwLGUoVGkucHJvdG90eXBlLHtnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0TGlzdC50b0FycmF5KFRpLkNPT1JESU5BVEVfQVJSQVlfVFlQRSl9LHNldFByZWNpc2lvbk1vZGVsOmZ1bmN0aW9uKHQpe3RoaXMucHJlY2lzaW9uTW9kZWw9dH0sYWRkUHQ6ZnVuY3Rpb24odCl7dD1uZXcgZCh0KTtyZXR1cm4gdGhpcy5wcmVjaXNpb25Nb2RlbC5tYWtlUHJlY2lzZSh0KSx0aGlzLmlzUmVkdW5kYW50KHQpP251bGw6dm9pZCB0aGlzLnB0TGlzdC5hZGQodCl9LHJldmVyc2U6ZnVuY3Rpb24oKXt9LGFkZFB0czpmdW5jdGlvbih0LGUpe2lmKGUpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5hZGRQdCh0W25dKTtlbHNlIGZvcihuPXQubGVuZ3RoLTE7MDw9bjtuLS0pdGhpcy5hZGRQdCh0W25dKX0saXNSZWR1bmRhbnQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wdExpc3Quc2l6ZSgpPDEpcmV0dXJuITE7dmFyIGU9dGhpcy5wdExpc3QuZ2V0KHRoaXMucHRMaXN0LnNpemUoKS0xKTtyZXR1cm4gdC5kaXN0YW5jZShlKTx0aGlzLm1pbmltaW1WZXJ0ZXhEaXN0YW5jZX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFl0KS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMuZ2V0Q29vcmRpbmF0ZXMoKSkudG9TdHJpbmcoKX0sY2xvc2VSaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5wdExpc3Quc2l6ZSgpPDEpcmV0dXJuIG51bGw7dmFyIHQ9bmV3IGQodGhpcy5wdExpc3QuZ2V0KDApKSxlPXRoaXMucHRMaXN0LmdldCh0aGlzLnB0TGlzdC5zaXplKCktMSk7cmV0dXJuIDI8PXRoaXMucHRMaXN0LnNpemUoKSYmdGhpcy5wdExpc3QuZ2V0KHRoaXMucHRMaXN0LnNpemUoKS0yKSx0LmVxdWFscyhlKT9udWxsOnZvaWQgdGhpcy5wdExpc3QuYWRkKHQpfSxzZXRNaW5pbXVtVmVydGV4RGlzdGFuY2U6ZnVuY3Rpb24odCl7dGhpcy5taW5pbWltVmVydGV4RGlzdGFuY2U9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVGl9fSksVGkuQ09PUkRJTkFURV9BUlJBWV9UWVBFPW5ldyBBcnJheSgwKS5maWxsKG51bGwpLGUoUGkucHJvdG90eXBlLHthZGROZXh0U2VnbWVudDpmdW5jdGlvbih0LGUpe2lmKHRoaXMuczA9dGhpcy5zMSx0aGlzLnMxPXRoaXMuczIsdGhpcy5zMj10LHRoaXMuc2VnMC5zZXRDb29yZGluYXRlcyh0aGlzLnMwLHRoaXMuczEpLHRoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQodGhpcy5zZWcwLHRoaXMuc2lkZSx0aGlzLmRpc3RhbmNlLHRoaXMub2Zmc2V0MCksdGhpcy5zZWcxLnNldENvb3JkaW5hdGVzKHRoaXMuczEsdGhpcy5zMiksdGhpcy5jb21wdXRlT2Zmc2V0U2VnbWVudCh0aGlzLnNlZzEsdGhpcy5zaWRlLHRoaXMuZGlzdGFuY2UsdGhpcy5vZmZzZXQxKSx0aGlzLnMxLmVxdWFscyh0aGlzLnMyKSlyZXR1cm4gbnVsbDt2YXIgbj1adC5jb21wdXRlT3JpZW50YXRpb24odGhpcy5zMCx0aGlzLnMxLHRoaXMuczIpLHQ9bj09PVp0LkNMT0NLV0lTRSYmdGhpcy5zaWRlPT09S2UuTEVGVHx8bj09PVp0LkNPVU5URVJDTE9DS1dJU0UmJnRoaXMuc2lkZT09PUtlLlJJR0hUOzA9PT1uP3RoaXMuYWRkQ29sbGluZWFyKGUpOnQ/dGhpcy5hZGRPdXRzaWRlVHVybihuLGUpOnRoaXMuYWRkSW5zaWRlVHVybihuLGUpfSxhZGRMaW5lRW5kQ2FwOmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEp0KHQsZSksaT1uZXcgSnQ7dGhpcy5jb21wdXRlT2Zmc2V0U2VnbWVudChuLEtlLkxFRlQsdGhpcy5kaXN0YW5jZSxpKTt2YXIgcj1uZXcgSnQ7dGhpcy5jb21wdXRlT2Zmc2V0U2VnbWVudChuLEtlLlJJR0hULHRoaXMuZGlzdGFuY2Uscik7bj1lLngtdC54LHQ9ZS55LXQueSxuPU1hdGguYXRhbjIodCxuKTtzd2l0Y2godGhpcy5idWZQYXJhbXMuZ2V0RW5kQ2FwU3R5bGUoKSl7Y2FzZSBDaS5DQVBfUk9VTkQ6dGhpcy5zZWdMaXN0LmFkZFB0KGkucDEpLHRoaXMuYWRkRmlsbGV0QXJjKGUsbitNYXRoLlBJLzIsbi1NYXRoLlBJLzIsWnQuQ0xPQ0tXSVNFLHRoaXMuZGlzdGFuY2UpLHRoaXMuc2VnTGlzdC5hZGRQdChyLnAxKTticmVhaztjYXNlIENpLkNBUF9GTEFUOnRoaXMuc2VnTGlzdC5hZGRQdChpLnAxKSx0aGlzLnNlZ0xpc3QuYWRkUHQoci5wMSk7YnJlYWs7Y2FzZSBDaS5DQVBfU1FVQVJFOmU9bmV3IGQ7ZS54PU1hdGguYWJzKHRoaXMuZGlzdGFuY2UpKk1hdGguY29zKG4pLGUueT1NYXRoLmFicyh0aGlzLmRpc3RhbmNlKSpNYXRoLnNpbihuKTtpPW5ldyBkKGkucDEueCtlLngsaS5wMS55K2UueSksZT1uZXcgZChyLnAxLngrZS54LHIucDEueStlLnkpO3RoaXMuc2VnTGlzdC5hZGRQdChpKSx0aGlzLnNlZ0xpc3QuYWRkUHQoZSl9fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ0xpc3QuZ2V0Q29vcmRpbmF0ZXMoKX0sYWRkTWl0cmVKb2luOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPSEwLHM9bnVsbDt0cnl7cz1GLmludGVyc2VjdGlvbihlLnAwLGUucDEsbi5wMCxuLnAxKTsoaTw9MD8xOnMuZGlzdGFuY2UodCkvTWF0aC5hYnMoaSkpPnRoaXMuYnVmUGFyYW1zLmdldE1pdHJlTGltaXQoKSYmKHI9ITEpfWNhdGNoKHQpe2lmKCEodCBpbnN0YW5jZW9mIHcpKXRocm93IHQ7cz1uZXcgZCgwLDApLHI9ITF9cj90aGlzLnNlZ0xpc3QuYWRkUHQocyk6dGhpcy5hZGRMaW1pdGVkTWl0cmVKb2luKGUsbixpLHRoaXMuYnVmUGFyYW1zLmdldE1pdHJlTGltaXQoKSl9LGFkZEZpbGxldENvcm5lcjpmdW5jdGlvbih0LGUsbixpLHIpe3ZhciBzPWUueC10Lngsbz1lLnktdC55LGE9TWF0aC5hdGFuMihvLHMpLG89bi54LXQueCxzPW4ueS10Lnksbz1NYXRoLmF0YW4yKHMsbyk7aT09PVp0LkNMT0NLV0lTRT9hPD1vJiYoYSs9MipNYXRoLlBJKTpvPD1hJiYoYS09MipNYXRoLlBJKSx0aGlzLnNlZ0xpc3QuYWRkUHQoZSksdGhpcy5hZGRGaWxsZXRBcmModCxhLG8saSxyKSx0aGlzLnNlZ0xpc3QuYWRkUHQobil9LGFkZE91dHNpZGVUdXJuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMub2Zmc2V0MC5wMS5kaXN0YW5jZSh0aGlzLm9mZnNldDEucDApPHRoaXMuZGlzdGFuY2UqUGkuT0ZGU0VUX1NFR01FTlRfU0VQQVJBVElPTl9GQUNUT1I/KHRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDAucDEpLG51bGwpOnZvaWQodGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1DaS5KT0lOX01JVFJFP3RoaXMuYWRkTWl0cmVKb2luKHRoaXMuczEsdGhpcy5vZmZzZXQwLHRoaXMub2Zmc2V0MSx0aGlzLmRpc3RhbmNlKTp0aGlzLmJ1ZlBhcmFtcy5nZXRKb2luU3R5bGUoKT09PUNpLkpPSU5fQkVWRUw/dGhpcy5hZGRCZXZlbEpvaW4odGhpcy5vZmZzZXQwLHRoaXMub2Zmc2V0MSk6KGUmJnRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDAucDEpLHRoaXMuYWRkRmlsbGV0Q29ybmVyKHRoaXMuczEsdGhpcy5vZmZzZXQwLnAxLHRoaXMub2Zmc2V0MS5wMCx0LHRoaXMuZGlzdGFuY2UpLHRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDEucDApKSl9LGNyZWF0ZVNxdWFyZTpmdW5jdGlvbih0KXt0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGQodC54K3RoaXMuZGlzdGFuY2UsdC55K3RoaXMuZGlzdGFuY2UpKSx0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGQodC54K3RoaXMuZGlzdGFuY2UsdC55LXRoaXMuZGlzdGFuY2UpKSx0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGQodC54LXRoaXMuZGlzdGFuY2UsdC55LXRoaXMuZGlzdGFuY2UpKSx0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGQodC54LXRoaXMuZGlzdGFuY2UsdC55K3RoaXMuZGlzdGFuY2UpKSx0aGlzLnNlZ0xpc3QuY2xvc2VSaW5nKCl9LGFkZFNlZ21lbnRzOmZ1bmN0aW9uKHQsZSl7dGhpcy5zZWdMaXN0LmFkZFB0cyh0LGUpfSxhZGRGaXJzdFNlZ21lbnQ6ZnVuY3Rpb24oKXt0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAwKX0sYWRkTGFzdFNlZ21lbnQ6ZnVuY3Rpb24oKXt0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAxKX0saW5pdFNpZGVTZWdtZW50czpmdW5jdGlvbih0LGUsbil7dGhpcy5zMT10LHRoaXMuczI9ZSx0aGlzLnNpZGU9bix0aGlzLnNlZzEuc2V0Q29vcmRpbmF0ZXModCxlKSx0aGlzLmNvbXB1dGVPZmZzZXRTZWdtZW50KHRoaXMuc2VnMSxuLHRoaXMuZGlzdGFuY2UsdGhpcy5vZmZzZXQxKX0sYWRkTGltaXRlZE1pdHJlSm9pbjpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLnNlZzAucDEscz1Lbi5hbmdsZShyLHRoaXMuc2VnMC5wMCksbz0oS24uYW5nbGUocix0aGlzLnNlZzEucDEpLEtuLmFuZ2xlQmV0d2Vlbk9yaWVudGVkKHRoaXMuc2VnMC5wMCxyLHRoaXMuc2VnMS5wMSkpLzIscz1Lbi5ub3JtYWxpemUocytvKSxzPUtuLm5vcm1hbGl6ZShzK01hdGguUEkpLGk9aSpuLG89bi1pKk1hdGguYWJzKE1hdGguc2luKG8pKSxpPW5ldyBKdChyLG5ldyBkKHIueCtpKk1hdGguY29zKHMpLHIueStpKk1hdGguc2luKHMpKSkscz1pLnBvaW50QWxvbmdPZmZzZXQoMSxvKSxvPWkucG9pbnRBbG9uZ09mZnNldCgxLC1vKTt0aGlzLnNpZGU9PT1LZS5MRUZUPyh0aGlzLnNlZ0xpc3QuYWRkUHQocyksdGhpcy5zZWdMaXN0LmFkZFB0KG8pKToodGhpcy5zZWdMaXN0LmFkZFB0KG8pLHRoaXMuc2VnTGlzdC5hZGRQdChzKSl9LGNvbXB1dGVPZmZzZXRTZWdtZW50OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWU9PT1LZS5MRUZUPzE6LTEscz10LnAxLngtdC5wMC54LG89dC5wMS55LXQucDAueSxlPU1hdGguc3FydChzKnMrbypvKSxzPXIqbipzL2UsZT1yKm4qby9lO2kucDAueD10LnAwLngtZSxpLnAwLnk9dC5wMC55K3MsaS5wMS54PXQucDEueC1lLGkucDEueT10LnAxLnkrc30sYWRkRmlsbGV0QXJjOmZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIHM9aT09PVp0LkNMT0NLV0lTRT8tMToxLG89TWF0aC5hYnMoZS1uKSxuPU1hdGgudHJ1bmMoby90aGlzLmZpbGxldEFuZ2xlUXVhbnR1bSsuNSk7aWYobjwxKXJldHVybiBudWxsO2Zvcih2YXIgYT1vL24sdT0wLGw9bmV3IGQ7dTxvOyl7dmFyIGg9ZStzKnU7bC54PXQueCtyKk1hdGguY29zKGgpLGwueT10LnkrcipNYXRoLnNpbihoKSx0aGlzLnNlZ0xpc3QuYWRkUHQobCksdSs9YX19LGFkZEluc2lkZVR1cm46ZnVuY3Rpb24odCxlKXt2YXIgbjt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24odGhpcy5vZmZzZXQwLnAwLHRoaXMub2Zmc2V0MC5wMSx0aGlzLm9mZnNldDEucDAsdGhpcy5vZmZzZXQxLnAxKSx0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpP3RoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLmxpLmdldEludGVyc2VjdGlvbigwKSk6KHRoaXMuX2hhc05hcnJvd0NvbmNhdmVBbmdsZT0hMCx0aGlzLm9mZnNldDAucDEuZGlzdGFuY2UodGhpcy5vZmZzZXQxLnAwKTx0aGlzLmRpc3RhbmNlKlBpLklOU0lERV9UVVJOX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUj90aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQwLnAxKToodGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MC5wMSksMDx0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3I/KG49bmV3IGQoKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcip0aGlzLm9mZnNldDAucDEueCt0aGlzLnMxLngpLyh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IrMSksKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcip0aGlzLm9mZnNldDAucDEueSt0aGlzLnMxLnkpLyh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IrMSkpLHRoaXMuc2VnTGlzdC5hZGRQdChuKSxuPW5ldyBkKCh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IqdGhpcy5vZmZzZXQxLnAwLngrdGhpcy5zMS54KS8odGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKzEpLCh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IqdGhpcy5vZmZzZXQxLnAwLnkrdGhpcy5zMS55KS8odGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKzEpKSx0aGlzLnNlZ0xpc3QuYWRkUHQobikpOnRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLnMxKSx0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAwKSkpfSxjcmVhdGVDaXJjbGU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGQodC54K3RoaXMuZGlzdGFuY2UsdC55KTt0aGlzLnNlZ0xpc3QuYWRkUHQoZSksdGhpcy5hZGRGaWxsZXRBcmModCwwLDIqTWF0aC5QSSwtMSx0aGlzLmRpc3RhbmNlKSx0aGlzLnNlZ0xpc3QuY2xvc2VSaW5nKCl9LGFkZEJldmVsSm9pbjpmdW5jdGlvbih0LGUpe3RoaXMuc2VnTGlzdC5hZGRQdCh0LnAxKSx0aGlzLnNlZ0xpc3QuYWRkUHQoZS5wMCl9LGluaXQ6ZnVuY3Rpb24odCl7dGhpcy5kaXN0YW5jZT10LHRoaXMubWF4Q3VydmVTZWdtZW50RXJyb3I9dCooMS1NYXRoLmNvcyh0aGlzLmZpbGxldEFuZ2xlUXVhbnR1bS8yKSksdGhpcy5zZWdMaXN0PW5ldyBUaSx0aGlzLnNlZ0xpc3Quc2V0UHJlY2lzaW9uTW9kZWwodGhpcy5wcmVjaXNpb25Nb2RlbCksdGhpcy5zZWdMaXN0LnNldE1pbmltdW1WZXJ0ZXhEaXN0YW5jZSh0KlBpLkNVUlZFX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUil9LGFkZENvbGxpbmVhcjpmdW5jdGlvbih0KXt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24odGhpcy5zMCx0aGlzLnMxLHRoaXMuczEsdGhpcy5zMiksMjw9dGhpcy5saS5nZXRJbnRlcnNlY3Rpb25OdW0oKSYmKHRoaXMuYnVmUGFyYW1zLmdldEpvaW5TdHlsZSgpPT09Q2kuSk9JTl9CRVZFTHx8dGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1DaS5KT0lOX01JVFJFPyh0JiZ0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQwLnAxKSx0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAwKSk6dGhpcy5hZGRGaWxsZXRDb3JuZXIodGhpcy5zMSx0aGlzLm9mZnNldDAucDEsdGhpcy5vZmZzZXQxLnAwLFp0LkNMT0NLV0lTRSx0aGlzLmRpc3RhbmNlKSl9LGNsb3NlUmluZzpmdW5jdGlvbigpe3RoaXMuc2VnTGlzdC5jbG9zZVJpbmcoKX0saGFzTmFycm93Q29uY2F2ZUFuZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc05hcnJvd0NvbmNhdmVBbmdsZX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUGl9fSksUGkuT0ZGU0VUX1NFR01FTlRfU0VQQVJBVElPTl9GQUNUT1I9LjAwMSxQaS5JTlNJREVfVFVSTl9WRVJURVhfU05BUF9ESVNUQU5DRV9GQUNUT1I9LjAwMSxQaS5DVVJWRV9WRVJURVhfU05BUF9ESVNUQU5DRV9GQUNUT1I9MWUtNixQaS5NQVhfQ0xPU0lOR19TRUdfTEVOX0ZBQ1RPUj04MCxlKGJpLnByb3RvdHlwZSx7Z2V0T2Zmc2V0Q3VydmU6ZnVuY3Rpb24odCxlKXtpZigwPT09KHRoaXMuZGlzdGFuY2U9ZSkpcmV0dXJuIG51bGw7dmFyIG49ZTwwLGU9TWF0aC5hYnMoZSksZT10aGlzLmdldFNlZ0dlbihlKTt0Lmxlbmd0aDw9MT90aGlzLmNvbXB1dGVQb2ludEN1cnZlKHRbMF0sZSk6dGhpcy5jb21wdXRlT2Zmc2V0Q3VydmUodCxuLGUpO2U9ZS5nZXRDb29yZGluYXRlcygpO3JldHVybiBuJiZILnJldmVyc2UoZSksZX0sY29tcHV0ZVNpbmdsZVNpZGVkQnVmZmVyQ3VydmU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSk7aWYoZSl7bi5hZGRTZWdtZW50cyh0LCEwKTt2YXIgcj1SaS5zaW1wbGlmeSh0LC1pKSxlPXIubGVuZ3RoLTE7bi5pbml0U2lkZVNlZ21lbnRzKHJbZV0scltlLTFdLEtlLkxFRlQpLG4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHZhciBzPWUtMjswPD1zO3MtLSluLmFkZE5leHRTZWdtZW50KHJbc10sITApfWVsc2V7bi5hZGRTZWdtZW50cyh0LCExKTt2YXIgbz1SaS5zaW1wbGlmeSh0LGkpLGE9by5sZW5ndGgtMTtuLmluaXRTaWRlU2VnbWVudHMob1swXSxvWzFdLEtlLkxFRlQpLG4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHM9MjtzPD1hO3MrKyluLmFkZE5leHRTZWdtZW50KG9bc10sITApfW4uYWRkTGFzdFNlZ21lbnQoKSxuLmNsb3NlUmluZygpfSxjb21wdXRlUmluZ0J1ZmZlckN1cnZlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnNpbXBsaWZ5VG9sZXJhbmNlKHRoaXMuZGlzdGFuY2UpO2U9PT1LZS5SSUdIVCYmKGk9LWkpO3ZhciByPVJpLnNpbXBsaWZ5KHQsaSkscz1yLmxlbmd0aC0xO24uaW5pdFNpZGVTZWdtZW50cyhyW3MtMV0sclswXSxlKTtmb3IodmFyIG89MTtvPD1zO28rKyl7dmFyIGE9MSE9PW87bi5hZGROZXh0U2VnbWVudChyW29dLGEpfW4uY2xvc2VSaW5nKCl9LGNvbXB1dGVMaW5lQnVmZmVyQ3VydmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnNpbXBsaWZ5VG9sZXJhbmNlKHRoaXMuZGlzdGFuY2UpLGk9Umkuc2ltcGxpZnkodCxuKSxyPWkubGVuZ3RoLTE7ZS5pbml0U2lkZVNlZ21lbnRzKGlbMF0saVsxXSxLZS5MRUZUKTtmb3IodmFyIHM9MjtzPD1yO3MrKyllLmFkZE5leHRTZWdtZW50KGlbc10sITApO2UuYWRkTGFzdFNlZ21lbnQoKSxlLmFkZExpbmVFbmRDYXAoaVtyLTFdLGlbcl0pO3ZhciBvPVJpLnNpbXBsaWZ5KHQsLW4pLG49by5sZW5ndGgtMTtlLmluaXRTaWRlU2VnbWVudHMob1tuXSxvW24tMV0sS2UuTEVGVCk7Zm9yKHM9bi0yOzA8PXM7cy0tKWUuYWRkTmV4dFNlZ21lbnQob1tzXSwhMCk7ZS5hZGRMYXN0U2VnbWVudCgpLGUuYWRkTGluZUVuZENhcChvWzFdLG9bMF0pLGUuY2xvc2VSaW5nKCl9LGNvbXB1dGVQb2ludEN1cnZlOmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHRoaXMuYnVmUGFyYW1zLmdldEVuZENhcFN0eWxlKCkpe2Nhc2UgQ2kuQ0FQX1JPVU5EOmUuY3JlYXRlQ2lyY2xlKHQpO2JyZWFrO2Nhc2UgQ2kuQ0FQX1NRVUFSRTplLmNyZWF0ZVNxdWFyZSh0KX19LGdldExpbmVDdXJ2ZTpmdW5jdGlvbih0LGUpe2lmKCh0aGlzLmRpc3RhbmNlPWUpPDAmJiF0aGlzLmJ1ZlBhcmFtcy5pc1NpbmdsZVNpZGVkKCkpcmV0dXJuIG51bGw7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIG49TWF0aC5hYnMoZSksbj10aGlzLmdldFNlZ0dlbihuKTtyZXR1cm4gdC5sZW5ndGg8PTE/dGhpcy5jb21wdXRlUG9pbnRDdXJ2ZSh0WzBdLG4pOnRoaXMuYnVmUGFyYW1zLmlzU2luZ2xlU2lkZWQoKT8oZT1lPDAsdGhpcy5jb21wdXRlU2luZ2xlU2lkZWRCdWZmZXJDdXJ2ZSh0LGUsbikpOnRoaXMuY29tcHV0ZUxpbmVCdWZmZXJDdXJ2ZSh0LG4pLG4uZ2V0Q29vcmRpbmF0ZXMoKX0sZ2V0QnVmZmVyUGFyYW1ldGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZlBhcmFtc30sc2ltcGxpZnlUb2xlcmFuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdGhpcy5idWZQYXJhbXMuZ2V0U2ltcGxpZnlGYWN0b3IoKX0sZ2V0UmluZ0N1cnZlOmZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmRpc3RhbmNlPW4sdC5sZW5ndGg8PTIpcmV0dXJuIHRoaXMuZ2V0TGluZUN1cnZlKHQsbik7aWYoMD09PW4pcmV0dXJuIGJpLmNvcHlDb29yZGluYXRlcyh0KTtuPXRoaXMuZ2V0U2VnR2VuKG4pO3JldHVybiB0aGlzLmNvbXB1dGVSaW5nQnVmZmVyQ3VydmUodCxlLG4pLG4uZ2V0Q29vcmRpbmF0ZXMoKX0sY29tcHV0ZU9mZnNldEN1cnZlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnNpbXBsaWZ5VG9sZXJhbmNlKHRoaXMuZGlzdGFuY2UpO2lmKGUpe3ZhciByPVJpLnNpbXBsaWZ5KHQsLWkpLGU9ci5sZW5ndGgtMTtuLmluaXRTaWRlU2VnbWVudHMocltlXSxyW2UtMV0sS2UuTEVGVCksbi5hZGRGaXJzdFNlZ21lbnQoKTtmb3IodmFyIHM9ZS0yOzA8PXM7cy0tKW4uYWRkTmV4dFNlZ21lbnQocltzXSwhMCl9ZWxzZXt2YXIgbz1SaS5zaW1wbGlmeSh0LGkpLGE9by5sZW5ndGgtMTtuLmluaXRTaWRlU2VnbWVudHMob1swXSxvWzFdLEtlLkxFRlQpLG4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHM9MjtzPD1hO3MrKyluLmFkZE5leHRTZWdtZW50KG9bc10sITApfW4uYWRkTGFzdFNlZ21lbnQoKX0sZ2V0U2VnR2VuOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUGkodGhpcy5wcmVjaXNpb25Nb2RlbCx0aGlzLmJ1ZlBhcmFtcyx0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYml9fSksYmkuY29weUNvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodC5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248ZS5sZW5ndGg7bisrKWVbbl09bmV3IGQodFtuXSk7cmV0dXJuIGV9LGUoT2kucHJvdG90eXBlLHtmaW5kU3RhYmJlZFNlZ21lbnRzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgSSxuPXRoaXMuc3ViZ3JhcGhzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0RW52ZWxvcGUoKTt0Lnk8ci5nZXRNaW5ZKCl8fHQueT5yLmdldE1heFkoKXx8dGhpcy5maW5kU3RhYmJlZFNlZ21lbnRzKHQsaS5nZXREaXJlY3RlZEVkZ2VzKCksZSl9cmV0dXJuIGV9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpaWYoUihhcmd1bWVudHNbMl0sdikmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgZCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBvbilmb3IodmFyIHM9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdLHU9by5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKSxuPTA7bjx1Lmxlbmd0aC0xO24rKyl7dmFyIGw7dGhpcy5zZWcucDA9dVtuXSx0aGlzLnNlZy5wMT11W24rMV0sdGhpcy5zZWcucDAueT50aGlzLnNlZy5wMS55JiZ0aGlzLnNlZy5yZXZlcnNlKCksTWF0aC5tYXgodGhpcy5zZWcucDAueCx0aGlzLnNlZy5wMS54KTxzLnh8fHRoaXMuc2VnLmlzSG9yaXpvbnRhbCgpfHxzLnk8dGhpcy5zZWcucDAueXx8cy55PnRoaXMuc2VnLnAxLnl8fFp0LmNvbXB1dGVPcmllbnRhdGlvbih0aGlzLnNlZy5wMCx0aGlzLnNlZy5wMSxzKT09PVp0LlJJR0hUfHwobD1vLmdldERlcHRoKEtlLkxFRlQpLHRoaXMuc2VnLnAwLmVxdWFscyh1W25dKXx8KGw9by5nZXREZXB0aChLZS5SSUdIVCkpLGw9bmV3IF9pKHRoaXMuc2VnLGwpLGEuYWRkKGwpKX1lbHNlIGlmKFIoYXJndW1lbnRzWzJdLHYpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQmJlIoYXJndW1lbnRzWzFdLHYpKWZvcih2YXIgaD1hcmd1bWVudHNbMF0sYz1hcmd1bWVudHNbMl0sbj1hcmd1bWVudHNbMV0uaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBmPW4ubmV4dCgpO2YuaXNGb3J3YXJkKCkmJnRoaXMuZmluZFN0YWJiZWRTZWdtZW50cyhoLGYsYyl9fSxnZXREZXB0aDpmdW5jdGlvbih0KXt0PXRoaXMuZmluZFN0YWJiZWRTZWdtZW50cyh0KTtyZXR1cm4gMD09PXQuc2l6ZSgpPzA6WnMubWluKHQpLmxlZnREZXB0aH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gT2l9fSksZShfaS5wcm90b3R5cGUse2NvbXBhcmVUbzpmdW5jdGlvbih0KXt2YXIgZT10O2lmKHRoaXMudXB3YXJkU2VnLm1pblgoKT49ZS51cHdhcmRTZWcubWF4WCgpKXJldHVybiAxO2lmKHRoaXMudXB3YXJkU2VnLm1heFgoKTw9ZS51cHdhcmRTZWcubWluWCgpKXJldHVybi0xO3Q9dGhpcy51cHdhcmRTZWcub3JpZW50YXRpb25JbmRleChlLnVwd2FyZFNlZyk7cmV0dXJuIDAhPT10P3Q6MCE9PSh0PS0xKmUudXB3YXJkU2VnLm9yaWVudGF0aW9uSW5kZXgodGhpcy51cHdhcmRTZWcpKT90OnRoaXMudXB3YXJkU2VnLmNvbXBhcmVUbyhlLnVwd2FyZFNlZyl9LGNvbXBhcmVYOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wMC5jb21wYXJlVG8oZS5wMCk7cmV0dXJuIDAhPT1uP246dC5wMS5jb21wYXJlVG8oZS5wMSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXB3YXJkU2VnLnRvU3RyaW5nKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBfaX19KSxPaS5EZXB0aFNlZ21lbnQ9X2ksZShNaS5wcm90b3R5cGUse2FkZFBvaW50OmZ1bmN0aW9uKHQpe2lmKHRoaXMuZGlzdGFuY2U8PTApcmV0dXJuIG51bGw7dD10LmdldENvb3JkaW5hdGVzKCksdD10aGlzLmN1cnZlQnVpbGRlci5nZXRMaW5lQ3VydmUodCx0aGlzLmRpc3RhbmNlKTt0aGlzLmFkZEN1cnZlKHQsTC5FWFRFUklPUixMLklOVEVSSU9SKX0sYWRkUG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmRpc3RhbmNlLG49S2UuTEVGVDt0aGlzLmRpc3RhbmNlPDAmJihlPS10aGlzLmRpc3RhbmNlLG49S2UuUklHSFQpO3ZhciBpPXQuZ2V0RXh0ZXJpb3JSaW5nKCkscj1ILnJlbW92ZVJlcGVhdGVkUG9pbnRzKGkuZ2V0Q29vcmRpbmF0ZXMoKSk7aWYodGhpcy5kaXN0YW5jZTwwJiZ0aGlzLmlzRXJvZGVkQ29tcGxldGVseShpLHRoaXMuZGlzdGFuY2UpKXJldHVybiBudWxsO2lmKHRoaXMuZGlzdGFuY2U8PTAmJnIubGVuZ3RoPDMpcmV0dXJuIG51bGw7dGhpcy5hZGRQb2x5Z29uUmluZyhyLGUsbixMLkVYVEVSSU9SLEwuSU5URVJJT1IpO2Zvcih2YXIgcz0wO3M8dC5nZXROdW1JbnRlcmlvclJpbmcoKTtzKyspe3ZhciBvPXQuZ2V0SW50ZXJpb3JSaW5nTihzKSxhPUgucmVtb3ZlUmVwZWF0ZWRQb2ludHMoby5nZXRDb29yZGluYXRlcygpKTswPHRoaXMuZGlzdGFuY2UmJnRoaXMuaXNFcm9kZWRDb21wbGV0ZWx5KG8sLXRoaXMuZGlzdGFuY2UpfHx0aGlzLmFkZFBvbHlnb25SaW5nKGEsZSxLZS5vcHBvc2l0ZShuKSxMLklOVEVSSU9SLEwuRVhURVJJT1IpfX0saXNUcmlhbmdsZUVyb2RlZENvbXBsZXRlbHk6ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgWm4odFswXSx0WzFdLHRbMl0pLHQ9bi5pbkNlbnRyZSgpO3JldHVybiBadC5kaXN0YW5jZVBvaW50TGluZSh0LG4ucDAsbi5wMSk8TWF0aC5hYnMoZSl9LGFkZExpbmVTdHJpbmc6ZnVuY3Rpb24odCl7aWYodGhpcy5kaXN0YW5jZTw9MCYmIXRoaXMuY3VydmVCdWlsZGVyLmdldEJ1ZmZlclBhcmFtZXRlcnMoKS5pc1NpbmdsZVNpZGVkKCkpcmV0dXJuIG51bGw7dD1ILnJlbW92ZVJlcGVhdGVkUG9pbnRzKHQuZ2V0Q29vcmRpbmF0ZXMoKSksdD10aGlzLmN1cnZlQnVpbGRlci5nZXRMaW5lQ3VydmUodCx0aGlzLmRpc3RhbmNlKTt0aGlzLmFkZEN1cnZlKHQsTC5FWFRFUklPUixMLklOVEVSSU9SKX0sYWRkQ3VydmU6ZnVuY3Rpb24odCxlLG4pe2lmKG51bGw9PT10fHx0Lmxlbmd0aDwyKXJldHVybiBudWxsO249bmV3IERlKHQsbmV3IEplKDAsTC5CT1VOREFSWSxlLG4pKTt0aGlzLmN1cnZlTGlzdC5hZGQobil9LGdldEN1cnZlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZCh0aGlzLmlucHV0R2VvbSksdGhpcy5jdXJ2ZUxpc3R9LGFkZFBvbHlnb25SaW5nOmZ1bmN0aW9uKHQsZSxuLGkscil7aWYoMD09PWUmJnQubGVuZ3RoPFB0Lk1JTklNVU1fVkFMSURfU0laRSlyZXR1cm4gbnVsbDt2YXIgcz1pLG89cjt0Lmxlbmd0aD49UHQuTUlOSU1VTV9WQUxJRF9TSVpFJiZadC5pc0NDVyh0KSYmKHM9cixvPWksbj1LZS5vcHBvc2l0ZShuKSk7ZT10aGlzLmN1cnZlQnVpbGRlci5nZXRSaW5nQ3VydmUodCxuLGUpO3RoaXMuYWRkQ3VydmUoZSxzLG8pfSxhZGQ6ZnVuY3Rpb24odCl7aWYodC5pc0VtcHR5KCkpcmV0dXJuIG51bGw7aWYodCBpbnN0YW5jZW9mIFJ0KXRoaXMuYWRkUG9seWdvbih0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBDdCl0aGlzLmFkZExpbmVTdHJpbmcodCk7ZWxzZSBpZih0IGluc3RhbmNlb2Ygd3QpdGhpcy5hZGRQb2ludCh0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBUdCl0aGlzLmFkZENvbGxlY3Rpb24odCk7ZWxzZSBpZih0IGluc3RhbmNlb2YgZ3QpdGhpcy5hZGRDb2xsZWN0aW9uKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGJ0KXRoaXMuYWRkQ29sbGVjdGlvbih0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIGZ0KSl0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24odC5nZXRDbGFzcygpLmdldE5hbWUoKSk7dGhpcy5hZGRDb2xsZWN0aW9uKHQpfX0saXNFcm9kZWRDb21wbGV0ZWx5OmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRDb29yZGluYXRlcygpO2lmKG4ubGVuZ3RoPDQpcmV0dXJuIGU8MDtpZig0PT09bi5sZW5ndGgpcmV0dXJuIHRoaXMuaXNUcmlhbmdsZUVyb2RlZENvbXBsZXRlbHkobixlKTt0PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLHQ9TWF0aC5taW4odC5nZXRIZWlnaHQoKSx0LmdldFdpZHRoKCkpO3JldHVybiBlPDAmJjIqTWF0aC5hYnMoZSk+dH0sYWRkQ29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7dGhpcy5hZGQobil9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBNaX19KSxlKERpLnByb3RvdHlwZSx7aXNUcml2aWFsSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1uJiYxPT09dGhpcy5saS5nZXRJbnRlcnNlY3Rpb25OdW0oKSl7aWYoRGkuaXNBZGphY2VudFNlZ21lbnRzKGUsaSkpcmV0dXJuITA7aWYodC5pc0Nsb3NlZCgpKXt0PXQuc2l6ZSgpLTE7aWYoMD09PWUmJmk9PT10fHwwPT09aSYmZT09PXQpcmV0dXJuITB9fXJldHVybiExfSxnZXRQcm9wZXJJbnRlcnNlY3Rpb25Qb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BlckludGVyc2VjdGlvblBvaW50fSxoYXNQcm9wZXJJbnRlcmlvckludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc1Byb3BlckludGVyaW9yfSxnZXRMaW5lSW50ZXJzZWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saX0saGFzUHJvcGVySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzUHJvcGVyfSxwcm9jZXNzSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0LGUsbixpKXtpZih0PT09biYmZT09PWkpcmV0dXJuIG51bGw7dGhpcy5udW1UZXN0cysrO3ZhciByPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlXSxzPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlKzFdLG89bi5nZXRDb29yZGluYXRlcygpW2ldLGE9bi5nZXRDb29yZGluYXRlcygpW2krMV07dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHIscyxvLGEpLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJih0aGlzLm51bUludGVyc2VjdGlvbnMrKyx0aGlzLmxpLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oKSYmKHRoaXMubnVtSW50ZXJpb3JJbnRlcnNlY3Rpb25zKyssdGhpcy5oYXNJbnRlcmlvcj0hMCksdGhpcy5pc1RyaXZpYWxJbnRlcnNlY3Rpb24odCxlLG4saSl8fCh0aGlzLl9oYXNJbnRlcnNlY3Rpb249ITAsdC5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksZSwwKSxuLmFkZEludGVyc2VjdGlvbnModGhpcy5saSxpLDEpLHRoaXMubGkuaXNQcm9wZXIoKSYmKHRoaXMubnVtUHJvcGVySW50ZXJzZWN0aW9ucysrLHRoaXMuaGFzUHJvcGVyPSEwLHRoaXMuaGFzUHJvcGVySW50ZXJpb3I9ITApKSl9LGhhc0ludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNJbnRlcnNlY3Rpb259LGlzRG9uZTpmdW5jdGlvbigpe3JldHVybiExfSxoYXNJbnRlcmlvckludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyaW9yfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltVZV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIERpfX0pLERpLmlzQWRqYWNlbnRTZWdtZW50cz1mdW5jdGlvbih0LGUpe3JldHVybiAxPT09TWF0aC5hYnModC1lKX0sZShBaS5wcm90b3R5cGUse3NldFdvcmtpbmdQcmVjaXNpb25Nb2RlbDpmdW5jdGlvbih0KXt0aGlzLndvcmtpbmdQcmVjaXNpb25Nb2RlbD10fSxpbnNlcnRVbmlxdWVFZGdlOmZ1bmN0aW9uKHQpe3ZhciBlLG4saT10aGlzLmVkZ2VMaXN0LmZpbmRFcXVhbEVkZ2UodCk7bnVsbCE9PWk/KGU9aS5nZXRMYWJlbCgpLG49dC5nZXRMYWJlbCgpLGkuaXNQb2ludHdpc2VFcXVhbCh0KXx8KG49bmV3IEplKHQuZ2V0TGFiZWwoKSkpLmZsaXAoKSxlLm1lcmdlKG4pLG49QWkuZGVwdGhEZWx0YShuKSxuPWkuZ2V0RGVwdGhEZWx0YSgpK24saS5zZXREZXB0aERlbHRhKG4pKToodGhpcy5lZGdlTGlzdC5hZGQodCksdC5zZXREZXB0aERlbHRhKEFpLmRlcHRoRGVsdGEodC5nZXRMYWJlbCgpKSkpfSxidWlsZFN1YmdyYXBoczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgSSxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpLHM9ci5nZXRSaWdodG1vc3RDb29yZGluYXRlKCkscz1uZXcgT2kobikuZ2V0RGVwdGgocyk7ci5jb21wdXRlRGVwdGgocyksci5maW5kUmVzdWx0RWRnZXMoKSxuLmFkZChyKSxlLmFkZChyLmdldERpcmVjdGVkRWRnZXMoKSxyLmdldE5vZGVzKCkpfX0sY3JlYXRlU3ViZ3JhcGhzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPXQuZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGkscj1uLm5leHQoKTtyLmlzVmlzaXRlZCgpfHwoKGk9bmV3IExpKS5jcmVhdGUociksZS5hZGQoaSkpfXJldHVybiBacy5zb3J0KGUsWnMucmV2ZXJzZU9yZGVyKCkpLGV9LGNyZWF0ZUVtcHR5UmVzdWx0R2VvbWV0cnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZW9tRmFjdC5jcmVhdGVQb2x5Z29uKCl9LGdldE5vZGVyOmZ1bmN0aW9uKHQpe2lmKG51bGwhPT10aGlzLndvcmtpbmdOb2RlcilyZXR1cm4gdGhpcy53b3JraW5nTm9kZXI7dmFyIGU9bmV3IFZlLG49bmV3IFd0O3JldHVybiBuLnNldFByZWNpc2lvbk1vZGVsKHQpLGUuc2V0U2VnbWVudEludGVyc2VjdG9yKG5ldyBEaShuKSksZX0sYnVmZmVyOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy53b3JraW5nUHJlY2lzaW9uTW9kZWw7bnVsbD09PW4mJihuPXQuZ2V0UHJlY2lzaW9uTW9kZWwoKSksdGhpcy5nZW9tRmFjdD10LmdldEZhY3RvcnkoKTtlPW5ldyBNaSh0LGUsbmV3IGJpKG4sdGhpcy5idWZQYXJhbXMpKS5nZXRDdXJ2ZXMoKTtpZihlLnNpemUoKTw9MClyZXR1cm4gdGhpcy5jcmVhdGVFbXB0eVJlc3VsdEdlb21ldHJ5KCk7dGhpcy5jb21wdXRlTm9kZWRFZGdlcyhlLG4pLHRoaXMuZ3JhcGg9bmV3IHVuKG5ldyBtbiksdGhpcy5ncmFwaC5hZGRFZGdlcyh0aGlzLmVkZ2VMaXN0LmdldEVkZ2VzKCkpO2U9dGhpcy5jcmVhdGVTdWJncmFwaHModGhpcy5ncmFwaCksbj1uZXcgbG4odGhpcy5nZW9tRmFjdCk7dGhpcy5idWlsZFN1YmdyYXBocyhlLG4pO249bi5nZXRQb2x5Z29ucygpO3JldHVybiBuLnNpemUoKTw9MD90aGlzLmNyZWF0ZUVtcHR5UmVzdWx0R2VvbWV0cnkoKTp0aGlzLmdlb21GYWN0LmJ1aWxkR2VvbWV0cnkobil9LGNvbXB1dGVOb2RlZEVkZ2VzOmZ1bmN0aW9uKHQsZSl7ZT10aGlzLmdldE5vZGVyKGUpO2UuY29tcHV0ZU5vZGVzKHQpO2Zvcih2YXIgbj1lLmdldE5vZGVkU3Vic3RyaW5ncygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0Q29vcmRpbmF0ZXMoKTsyPT09ci5sZW5ndGgmJnJbMF0uZXF1YWxzMkQoclsxXSl8fChyPWkuZ2V0RGF0YSgpLHI9bmV3IEduKGkuZ2V0Q29vcmRpbmF0ZXMoKSxuZXcgSmUocikpLHRoaXMuaW5zZXJ0VW5pcXVlRWRnZShyKSl9fSxzZXROb2RlcjpmdW5jdGlvbih0KXt0aGlzLndvcmtpbmdOb2Rlcj10fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBBaX19KSxBaS5kZXB0aERlbHRhPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0TG9jYXRpb24oMCxLZS5MRUZUKSx0PXQuZ2V0TG9jYXRpb24oMCxLZS5SSUdIVCk7cmV0dXJuIGU9PT1MLklOVEVSSU9SJiZ0PT09TC5FWFRFUklPUj8xOmU9PT1MLkVYVEVSSU9SJiZ0PT09TC5JTlRFUklPUj8tMTowfSxBaS5jb252ZXJ0U2VnU3RyaW5ncz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFl0LG49bmV3IEk7dC5oYXNOZXh0KCk7KXt2YXIgaT10Lm5leHQoKSxpPWUuY3JlYXRlTGluZVN0cmluZyhpLmdldENvb3JkaW5hdGVzKCkpO24uYWRkKGkpfXJldHVybiBlLmJ1aWxkR2VvbWV0cnkobil9LGUoRmkucHJvdG90eXBlLHtjaGVja0VuZFB0VmVydGV4SW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgdD10aGlzLnNlZ1N0cmluZ3MuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpLmdldENvb3JkaW5hdGVzKCk7dGhpcy5jaGVja0VuZFB0VmVydGV4SW50ZXJzZWN0aW9ucyhlWzBdLHRoaXMuc2VnU3RyaW5ncyksdGhpcy5jaGVja0VuZFB0VmVydGV4SW50ZXJzZWN0aW9ucyhlW2UubGVuZ3RoLTFdLHRoaXMuc2VnU3RyaW5ncyl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIG49YXJndW1lbnRzWzBdLHQ9YXJndW1lbnRzWzFdLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KWZvcih2YXIgZT10Lm5leHQoKS5nZXRDb29yZGluYXRlcygpLGk9MTtpPGUubGVuZ3RoLTE7aSsrKWlmKGVbaV0uZXF1YWxzKG4pKXRocm93IG5ldyBwKFwiZm91bmQgZW5kcHQvaW50ZXJpb3IgcHQgaW50ZXJzZWN0aW9uIGF0IGluZGV4IFwiK2krXCIgOnB0IFwiK24pfSxjaGVja0ludGVyaW9ySW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgdD10aGlzLnNlZ1N0cmluZ3MuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspZm9yKHZhciBlPXQubmV4dCgpLG49dGhpcy5zZWdTdHJpbmdzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTt0aGlzLmNoZWNrSW50ZXJpb3JJbnRlcnNlY3Rpb25zKGUsaSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHI9YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLG89ci5nZXRDb29yZGluYXRlcygpLGE9cy5nZXRDb29yZGluYXRlcygpLHU9MDt1PG8ubGVuZ3RoLTE7dSsrKWZvcih2YXIgbD0wO2w8YS5sZW5ndGgtMTtsKyspdGhpcy5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucyhyLHUscyxsKTtlbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaD1hcmd1bWVudHNbMF0sYz1hcmd1bWVudHNbMV0sZj1hcmd1bWVudHNbMl0sZz1hcmd1bWVudHNbM107aWYoaD09PWYmJmM9PT1nKXJldHVybiBudWxsO3ZhciBkPWguZ2V0Q29vcmRpbmF0ZXMoKVtjXSxoPWguZ2V0Q29vcmRpbmF0ZXMoKVtjKzFdLGM9Zi5nZXRDb29yZGluYXRlcygpW2ddLGc9Zi5nZXRDb29yZGluYXRlcygpW2crMV07aWYodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKGQsaCxjLGcpLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJih0aGlzLmxpLmlzUHJvcGVyKCl8fHRoaXMuaGFzSW50ZXJpb3JJbnRlcnNlY3Rpb24odGhpcy5saSxkLGgpfHx0aGlzLmhhc0ludGVyaW9ySW50ZXJzZWN0aW9uKHRoaXMubGksYyxnKSkpdGhyb3cgbmV3IHAoXCJmb3VuZCBub24tbm9kZWQgaW50ZXJzZWN0aW9uIGF0IFwiK2QrXCItXCIraCtcIiBhbmQgXCIrYytcIi1cIitnKX19LGNoZWNrVmFsaWQ6ZnVuY3Rpb24oKXt0aGlzLmNoZWNrRW5kUHRWZXJ0ZXhJbnRlcnNlY3Rpb25zKCksdGhpcy5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucygpLHRoaXMuY2hlY2tDb2xsYXBzZXMoKX0sY2hlY2tDb2xsYXBzZXM6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHQ9dGhpcy5zZWdTdHJpbmdzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTt0aGlzLmNoZWNrQ29sbGFwc2VzKGUpfWVsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBuPWFyZ3VtZW50c1swXS5nZXRDb29yZGluYXRlcygpLHQ9MDt0PG4ubGVuZ3RoLTI7dCsrKXRoaXMuY2hlY2tDb2xsYXBzZShuW3RdLG5bdCsxXSxuW3QrMl0pfSxoYXNJbnRlcmlvckludGVyc2VjdGlvbjpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPTA7aTx0LmdldEludGVyc2VjdGlvbk51bSgpO2krKyl7dmFyIHI9dC5nZXRJbnRlcnNlY3Rpb24oaSk7aWYoIXIuZXF1YWxzKGUpJiYhci5lcXVhbHMobikpcmV0dXJuITB9cmV0dXJuITF9LGNoZWNrQ29sbGFwc2U6ZnVuY3Rpb24odCxlLG4pe2lmKHQuZXF1YWxzKG4pKXRocm93IG5ldyBwKFwiZm91bmQgbm9uLW5vZGVkIGNvbGxhcHNlIGF0IFwiK0ZpLmZhY3QuY3JlYXRlTGluZVN0cmluZyhbdCxlLG5dKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEZpfX0pLEZpLmZhY3Q9bmV3IFl0LGUoR2kucHJvdG90eXBlLHtpbnRlcnNlY3RzU2NhbGVkOmZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5taW4odC54LGUueCksaT1NYXRoLm1heCh0LngsZS54KSxyPU1hdGgubWluKHQueSxlLnkpLHM9TWF0aC5tYXgodC55LGUueSkscz10aGlzLm1heHg8bnx8dGhpcy5taW54Pml8fHRoaXMubWF4eTxyfHx0aGlzLm1pbnk+cztpZihzKXJldHVybiExO2U9dGhpcy5pbnRlcnNlY3RzVG9sZXJhbmNlU3F1YXJlKHQsZSk7cmV0dXJuIGwuaXNUcnVlKCEocyYmZSksXCJGb3VuZCBiYWQgZW52ZWxvcGUgdGVzdFwiKSxlfSxpbml0Q29ybmVyczpmdW5jdGlvbih0KXt0aGlzLm1pbng9dC54LS41LHRoaXMubWF4eD10LngrLjUsdGhpcy5taW55PXQueS0uNSx0aGlzLm1heHk9dC55Ky41LHRoaXMuY29ybmVyWzBdPW5ldyBkKHRoaXMubWF4eCx0aGlzLm1heHkpLHRoaXMuY29ybmVyWzFdPW5ldyBkKHRoaXMubWlueCx0aGlzLm1heHkpLHRoaXMuY29ybmVyWzJdPW5ldyBkKHRoaXMubWlueCx0aGlzLm1pbnkpLHRoaXMuY29ybmVyWzNdPW5ldyBkKHRoaXMubWF4eCx0aGlzLm1pbnkpfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDE9PT10aGlzLnNjYWxlRmFjdG9yP3RoaXMuaW50ZXJzZWN0c1NjYWxlZCh0LGUpOih0aGlzLmNvcHlTY2FsZWQodCx0aGlzLnAwU2NhbGVkKSx0aGlzLmNvcHlTY2FsZWQoZSx0aGlzLnAxU2NhbGVkKSx0aGlzLmludGVyc2VjdHNTY2FsZWQodGhpcy5wMFNjYWxlZCx0aGlzLnAxU2NhbGVkKSl9LHNjYWxlOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQqdGhpcy5zY2FsZUZhY3Rvcil9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW5hbFB0fSxjb3B5U2NhbGVkOmZ1bmN0aW9uKHQsZSl7ZS54PXRoaXMuc2NhbGUodC54KSxlLnk9dGhpcy5zY2FsZSh0LnkpfSxnZXRTYWZlRW52ZWxvcGU6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gbnVsbD09PXRoaXMuc2FmZUVudiYmKHQ9R2kuU0FGRV9FTlZfRVhQQU5TSU9OX0ZBQ1RPUi90aGlzLnNjYWxlRmFjdG9yLHRoaXMuc2FmZUVudj1uZXcgQyh0aGlzLm9yaWdpbmFsUHQueC10LHRoaXMub3JpZ2luYWxQdC54K3QsdGhpcy5vcmlnaW5hbFB0LnktdCx0aGlzLm9yaWdpbmFsUHQueSt0KSksdGhpcy5zYWZlRW52fSxpbnRlcnNlY3RzUGl4ZWxDbG9zdXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbMF0sdGhpcy5jb3JuZXJbMV0pLCEhdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKXx8KHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbMV0sdGhpcy5jb3JuZXJbMl0pLCEhdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKXx8KHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbMl0sdGhpcy5jb3JuZXJbM10pLCEhdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKXx8KHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbM10sdGhpcy5jb3JuZXJbMF0pLCEhdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKSkpKX0saW50ZXJzZWN0c1RvbGVyYW5jZVNxdWFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPSExLGk9ITE7cmV0dXJuIHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbMF0sdGhpcy5jb3JuZXJbMV0pLCEhdGhpcy5saS5pc1Byb3BlcigpfHwodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmNvcm5lclsxXSx0aGlzLmNvcm5lclsyXSksISF0aGlzLmxpLmlzUHJvcGVyKCl8fCh0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpJiYobj0hMCksdGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmNvcm5lclsyXSx0aGlzLmNvcm5lclszXSksISF0aGlzLmxpLmlzUHJvcGVyKCl8fCh0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpJiYoaT0hMCksdGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmNvcm5lclszXSx0aGlzLmNvcm5lclswXSksISF0aGlzLmxpLmlzUHJvcGVyKCl8fCghKCFufHwhaSl8fCghIXQuZXF1YWxzKHRoaXMucHQpfHwhIWUuZXF1YWxzKHRoaXMucHQpKSkpKSl9LGFkZFNuYXBwZWROb2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRDb29yZGluYXRlKGUpLGk9dC5nZXRDb29yZGluYXRlKGUrMSk7cmV0dXJuISF0aGlzLmludGVyc2VjdHMobixpKSYmKHQuYWRkSW50ZXJzZWN0aW9uKHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLGUpLCEwKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gR2l9fSksR2kuU0FGRV9FTlZfRVhQQU5TSU9OX0ZBQ1RPUj0uNzUsZShxaS5wcm90b3R5cGUse3NlbGVjdDpmdW5jdGlvbigpe3ZhciB0OzE9PT1hcmd1bWVudHMubGVuZ3RofHwyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzFdLGFyZ3VtZW50c1swXS5nZXRMaW5lU2VnbWVudCh0LHRoaXMuc2VsZWN0ZWRTZWdtZW50KSx0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkU2VnbWVudCkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBxaX19KSxlKEJpLnByb3RvdHlwZSx7c25hcDpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuc25hcCh0LG51bGwsLTEpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sdD1hcmd1bWVudHNbMl0saT1lLmdldFNhZmVFbnZlbG9wZSgpLHI9bmV3IHppKGUsbix0KTtyZXR1cm4gdGhpcy5pbmRleC5xdWVyeShpLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltJZV19LHZpc2l0SXRlbTpmdW5jdGlvbih0KXt0LnNlbGVjdChpLHIpfX0pLHIuaXNOb2RlQWRkZWQoKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEJpfX0pLGEoemkscWkpLGUoemkucHJvdG90eXBlLHtpc05vZGVBZGRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc05vZGVBZGRlZH0sc2VsZWN0OmZ1bmN0aW9uKCl7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHFpLnByb3RvdHlwZS5zZWxlY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1sxXSxlPWFyZ3VtZW50c1swXS5nZXRDb250ZXh0KCk7cmV0dXJuIG51bGwhPT10aGlzLnBhcmVudEVkZ2UmJmU9PT10aGlzLnBhcmVudEVkZ2UmJnQ9PT10aGlzLmhvdFBpeGVsVmVydGV4SW5kZXg/bnVsbDp2b2lkKHRoaXMuX2lzTm9kZUFkZGVkPXRoaXMuaG90UGl4ZWwuYWRkU25hcHBlZE5vZGUoZSx0KSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHppfX0pLEJpLkhvdFBpeGVsU25hcEFjdGlvbj16aSxlKFZpLnByb3RvdHlwZSx7cHJvY2Vzc0ludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4saSl7aWYodD09PW4mJmU9PT1pKXJldHVybiBudWxsO3ZhciByPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlXSxzPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlKzFdLG89bi5nZXRDb29yZGluYXRlcygpW2ldLGE9bi5nZXRDb29yZGluYXRlcygpW2krMV07aWYodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHIscyxvLGEpLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJnRoaXMubGkuaXNJbnRlcmlvckludGVyc2VjdGlvbigpKXtmb3IodmFyIHU9MDt1PHRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uTnVtKCk7dSsrKXRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb25zLmFkZCh0aGlzLmxpLmdldEludGVyc2VjdGlvbih1KSk7dC5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksZSwwKSxuLmFkZEludGVyc2VjdGlvbnModGhpcy5saSxpLDEpfX0saXNEb25lOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGdldEludGVyaW9ySW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uc30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bVWVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBWaX19KSxlKGtpLnByb3RvdHlwZSx7Y2hlY2tDb3JyZWN0bmVzczpmdW5jdGlvbih0KXt2YXIgZT1uZXcgRmkoRGUuZ2V0Tm9kZWRTdWJzdHJpbmdzKHQpKTt0cnl7ZS5jaGVja1ZhbGlkKCl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgUykpdGhyb3cgdDt0LnByaW50U3RhY2tUcmFjZSgpfX0sZ2V0Tm9kZWRTdWJzdHJpbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIERlLmdldE5vZGVkU3Vic3RyaW5ncyh0aGlzLm5vZGVkU2VnU3RyaW5ncyl9LHNuYXBSb3VuZDpmdW5jdGlvbih0LGUpe2U9dGhpcy5maW5kSW50ZXJpb3JJbnRlcnNlY3Rpb25zKHQsZSk7dGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uU25hcHMoZSksdGhpcy5jb21wdXRlVmVydGV4U25hcHModCl9LGZpbmRJbnRlcmlvckludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlKXtlPW5ldyBWaShlKTtyZXR1cm4gdGhpcy5ub2Rlci5zZXRTZWdtZW50SW50ZXJzZWN0b3IoZSksdGhpcy5ub2Rlci5jb21wdXRlTm9kZXModCksZS5nZXRJbnRlcmlvckludGVyc2VjdGlvbnMoKX0sY29tcHV0ZVZlcnRleFNuYXBzOmZ1bmN0aW9uKCl7aWYoUihhcmd1bWVudHNbMF0sbSkpZm9yKHZhciB0PWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5jb21wdXRlVmVydGV4U25hcHMoZSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIERlKWZvcih2YXIgbj1hcmd1bWVudHNbMF0saT1uLmdldENvb3JkaW5hdGVzKCkscj0wO3I8aS5sZW5ndGg7cisrKXt2YXIgcz1uZXcgR2koaVtyXSx0aGlzLnNjYWxlRmFjdG9yLHRoaXMubGkpO3RoaXMucG9pbnRTbmFwcGVyLnNuYXAocyxuLHIpJiZuLmFkZEludGVyc2VjdGlvbihpW3JdLHIpfX0sY29tcHV0ZU5vZGVzOmZ1bmN0aW9uKHQpe3RoaXMubm9kZWRTZWdTdHJpbmdzPXQsdGhpcy5ub2Rlcj1uZXcgVmUsdGhpcy5wb2ludFNuYXBwZXI9bmV3IEJpKHRoaXMubm9kZXIuZ2V0SW5kZXgoKSksdGhpcy5zbmFwUm91bmQodCx0aGlzLmxpKX0sY29tcHV0ZUludGVyc2VjdGlvblNuYXBzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1uZXcgR2koZS5uZXh0KCksdGhpcy5zY2FsZUZhY3Rvcix0aGlzLmxpKTt0aGlzLnBvaW50U25hcHBlci5zbmFwKG4pfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bQmVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBraX19KSxlKFlpLnByb3RvdHlwZSx7YnVmZmVyRml4ZWRQcmVjaXNpb246ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEVpKG5ldyBraShuZXcgVnQoMSkpLHQuZ2V0U2NhbGUoKSksbj1uZXcgQWkodGhpcy5idWZQYXJhbXMpO24uc2V0V29ya2luZ1ByZWNpc2lvbk1vZGVsKHQpLG4uc2V0Tm9kZXIoZSksdGhpcy5yZXN1bHRHZW9tZXRyeT1uLmJ1ZmZlcih0aGlzLmFyZ0dlb20sdGhpcy5kaXN0YW5jZSl9LGJ1ZmZlclJlZHVjZWRQcmVjaXNpb246ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PVlpLk1BWF9QUkVDSVNJT05fRElHSVRTOzA8PXQ7dC0tKXt0cnl7dGhpcy5idWZmZXJSZWR1Y2VkUHJlY2lzaW9uKHQpfWNhdGNoKHQpe2lmKCEodCBpbnN0YW5jZW9mIFllKSl0aHJvdyB0O3RoaXMuc2F2ZUV4Y2VwdGlvbj10fWlmKG51bGwhPT10aGlzLnJlc3VsdEdlb21ldHJ5KXJldHVybiBudWxsfXRocm93IHRoaXMuc2F2ZUV4Y2VwdGlvbn12YXIgZTsxPT09YXJndW1lbnRzLmxlbmd0aCYmKGU9YXJndW1lbnRzWzBdLGU9bmV3IFZ0KFlpLnByZWNpc2lvblNjYWxlRmFjdG9yKHRoaXMuYXJnR2VvbSx0aGlzLmRpc3RhbmNlLGUpKSx0aGlzLmJ1ZmZlckZpeGVkUHJlY2lzaW9uKGUpKX0sY29tcHV0ZUdlb21ldHJ5OmZ1bmN0aW9uKCl7aWYodGhpcy5idWZmZXJPcmlnaW5hbFByZWNpc2lvbigpLG51bGwhPT10aGlzLnJlc3VsdEdlb21ldHJ5KXJldHVybiBudWxsO3ZhciB0PXRoaXMuYXJnR2VvbS5nZXRGYWN0b3J5KCkuZ2V0UHJlY2lzaW9uTW9kZWwoKTt0LmdldFR5cGUoKT09PVZ0LkZJWEVEP3RoaXMuYnVmZmVyRml4ZWRQcmVjaXNpb24odCk6dGhpcy5idWZmZXJSZWR1Y2VkUHJlY2lzaW9uKCl9LHNldFF1YWRyYW50U2VnbWVudHM6ZnVuY3Rpb24odCl7dGhpcy5idWZQYXJhbXMuc2V0UXVhZHJhbnRTZWdtZW50cyh0KX0sYnVmZmVyT3JpZ2luYWxQcmVjaXNpb246ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bmV3IEFpKHRoaXMuYnVmUGFyYW1zKTt0aGlzLnJlc3VsdEdlb21ldHJ5PXQuYnVmZmVyKHRoaXMuYXJnR2VvbSx0aGlzLmRpc3RhbmNlKX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiBwKSl0aHJvdyB0O3RoaXMuc2F2ZUV4Y2VwdGlvbj10fX0sZ2V0UmVzdWx0R2VvbWV0cnk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlzdGFuY2U9dCx0aGlzLmNvbXB1dGVHZW9tZXRyeSgpLHRoaXMucmVzdWx0R2VvbWV0cnl9LHNldEVuZENhcFN0eWxlOmZ1bmN0aW9uKHQpe3RoaXMuYnVmUGFyYW1zLnNldEVuZENhcFN0eWxlKHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBZaX19KSxZaS5idWZmZXJPcD1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMV07cmV0dXJuIG5ldyBZaShhcmd1bWVudHNbMF0pLmdldFJlc3VsdEdlb21ldHJ5KHQpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1syXSkmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgQiYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3JldHVybihyPW5ldyBZaShhcmd1bWVudHNbMF0pKS5zZXRRdWFkcmFudFNlZ21lbnRzKG4pLHIuZ2V0UmVzdWx0R2VvbWV0cnkoZSl9aWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBDaSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgaT1hcmd1bWVudHNbMV07cmV0dXJuKHI9bmV3IFlpKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMl0pKS5nZXRSZXN1bHRHZW9tZXRyeShpKX19ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHIsbj1hcmd1bWVudHNbMV0sZT1hcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM107cmV0dXJuKHI9bmV3IFlpKGFyZ3VtZW50c1swXSkpLnNldFF1YWRyYW50U2VnbWVudHMoZSksci5zZXRFbmRDYXBTdHlsZShpKSxyLmdldFJlc3VsdEdlb21ldHJ5KG4pfX0sWWkucHJlY2lzaW9uU2NhbGVGYWN0b3I9ZnVuY3Rpb24odCxlLG4pe3Q9dC5nZXRFbnZlbG9wZUludGVybmFsKCksZT1ULm1heChNYXRoLmFicyh0LmdldE1heFgoKSksTWF0aC5hYnModC5nZXRNYXhZKCkpLE1hdGguYWJzKHQuZ2V0TWluWCgpKSxNYXRoLmFicyh0LmdldE1pblkoKSkpKzIqKDA8ZT9lOjApLGU9bi1NYXRoLnRydW5jKE1hdGgubG9nKGUpL01hdGgubG9nKDEwKSsxKTtyZXR1cm4gTWF0aC5wb3coMTAsZSl9LFlpLkNBUF9ST1VORD1DaS5DQVBfUk9VTkQsWWkuQ0FQX0JVVFQ9Q2kuQ0FQX0ZMQVQsWWkuQ0FQX0ZMQVQ9Q2kuQ0FQX0ZMQVQsWWkuQ0FQX1NRVUFSRT1DaS5DQVBfU1FVQVJFLFlpLk1BWF9QUkVDSVNJT05fRElHSVRTPTEyO3ZhciB1bz1PYmplY3QuZnJlZXplKHtCdWZmZXJPcDpZaSxCdWZmZXJQYXJhbWV0ZXJzOkNpfSk7ZShVaS5wcm90b3R5cGUse2ZpbHRlcjpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgUnQmJnRoaXMuY29tcHMuYWRkKHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltodF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFVpfX0pLFVpLmdldFBvbHlnb25zPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIFVpLmdldFBvbHlnb25zKGFyZ3VtZW50c1swXSxuZXcgSSk7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4gdCBpbnN0YW5jZW9mIFJ0P2UuYWRkKHQpOnQgaW5zdGFuY2VvZiBmdCYmdC5hcHBseShuZXcgVWkoZSkpLGV9fSxlKFhpLnByb3RvdHlwZSx7aXNJbnNpZGVBcmVhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnSW5kZXg9PT1YaS5JTlNJREVfQVJFQX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSxnZXRHZW9tZXRyeUNvbXBvbmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBvbmVudH0sZ2V0U2VnbWVudEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnSW5kZXh9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFhpfX0pLFhpLklOU0lERV9BUkVBPS0xLGUoSGkucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIHd0JiZ0aGlzLnB0cy5hZGQodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2h0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSGl9fSksSGkuZ2V0UG9pbnRzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdCBpbnN0YW5jZW9mIHd0P1pzLnNpbmdsZXRvbkxpc3QodCk6SGkuZ2V0UG9pbnRzKHQsbmV3IEkpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sdD1hcmd1bWVudHNbMV07cmV0dXJuIGUgaW5zdGFuY2VvZiB3dD90LmFkZChlKTplIGluc3RhbmNlb2YgZnQmJmUuYXBwbHkobmV3IEhpKHQpKSx0fX0sZShXaS5wcm90b3R5cGUse2ZpbHRlcjpmdW5jdGlvbih0KXsodCBpbnN0YW5jZW9mIHd0fHx0IGluc3RhbmNlb2YgQ3R8fHQgaW5zdGFuY2VvZiBSdCkmJnRoaXMubG9jYXRpb25zLmFkZChuZXcgWGkodCwwLHQuZ2V0Q29vcmRpbmF0ZSgpKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2h0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gV2l9fSksV2kuZ2V0TG9jYXRpb25zPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBJO3JldHVybiB0LmFwcGx5KG5ldyBXaShlKSksZX0sZShqaS5wcm90b3R5cGUse2NvbXB1dGVDb250YWlubWVudERpc3RhbmNlOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PW5ldyBBcnJheSgyKS5maWxsKG51bGwpO2lmKHRoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoMCx0KSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsO3RoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoMSx0KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT0xLWUscj1VaS5nZXRQb2x5Z29ucyh0aGlzLmdlb21bZV0pO2lmKDA8ci5zaXplKCkpe3Q9V2kuZ2V0TG9jYXRpb25zKHRoaXMuZ2VvbVtpXSk7aWYodGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZSh0LHIsbiksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gdGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uW2ldPW5bMF0sdGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uW2VdPW5bMV0sbnVsbH19ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aClpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIEFycmF5JiZSKGFyZ3VtZW50c1swXSx2KSYmUihhcmd1bWVudHNbMV0sdikpe2Zvcih2YXIgcz1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl0sdT0wO3U8cy5zaXplKCk7dSsrKWZvcih2YXIgbD1zLmdldCh1KSxoPTA7aDxvLnNpemUoKTtoKyspaWYodGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZShsLG8uZ2V0KGgpLGEpLHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9ZWxzZSBpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIEFycmF5JiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFhpJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIFJ0KXtyPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxlPWFyZ3VtZW50c1syXSxuPXIuZ2V0Q29vcmRpbmF0ZSgpO2lmKEwuRVhURVJJT1IhPT10aGlzLnB0TG9jYXRvci5sb2NhdGUobixpKSlyZXR1cm4gZVt0aGlzLm1pbkRpc3RhbmNlPTBdPXIsZVsxXT1uZXcgWGkoaSxuKSxudWxsfX0sY29tcHV0ZU1pbkRpc3RhbmNlTGluZXNQb2ludHM6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT0wO2k8dC5zaXplKCk7aSsrKWZvcih2YXIgcj10LmdldChpKSxzPTA7czxlLnNpemUoKTtzKyspe3ZhciBvPWUuZ2V0KHMpO2lmKHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlKHIsbyxuKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsfX0sY29tcHV0ZUZhY2V0RGlzdGFuY2U6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQXJyYXkoMikuZmlsbChudWxsKSxlPVJuLmdldExpbmVzKHRoaXMuZ2VvbVswXSksbj1Sbi5nZXRMaW5lcyh0aGlzLmdlb21bMV0pLGk9SGkuZ2V0UG9pbnRzKHRoaXMuZ2VvbVswXSkscj1IaS5nZXRQb2ludHModGhpcy5nZW9tWzFdKTtyZXR1cm4gdGhpcy5jb21wdXRlTWluRGlzdGFuY2VMaW5lcyhlLG4sdCksdGhpcy51cGRhdGVNaW5EaXN0YW5jZSh0LCExKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlP251bGw6KHRbMF09bnVsbCx0WzFdPW51bGwsdGhpcy5jb21wdXRlTWluRGlzdGFuY2VMaW5lc1BvaW50cyhlLHIsdCksdGhpcy51cGRhdGVNaW5EaXN0YW5jZSh0LCExKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlP251bGw6KHRbMF09bnVsbCx0WzFdPW51bGwsdGhpcy5jb21wdXRlTWluRGlzdGFuY2VMaW5lc1BvaW50cyhuLGksdCksdGhpcy51cGRhdGVNaW5EaXN0YW5jZSh0LCEwKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlP251bGw6KHRbMF09bnVsbCx0WzFdPW51bGwsdGhpcy5jb21wdXRlTWluRGlzdGFuY2VQb2ludHMoaSxyLHQpLHZvaWQgdGhpcy51cGRhdGVNaW5EaXN0YW5jZSh0LCExKSkpKX0sbmVhcmVzdExvY2F0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZSgpLHRoaXMubWluRGlzdGFuY2VMb2NhdGlvbn0sdXBkYXRlTWluRGlzdGFuY2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09PXRbMF0/bnVsbDp2b2lkKGU/KHRoaXMubWluRGlzdGFuY2VMb2NhdGlvblswXT10WzFdLHRoaXMubWluRGlzdGFuY2VMb2NhdGlvblsxXT10WzBdKToodGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uWzBdPXRbMF0sdGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uWzFdPXRbMV0pKX0sbmVhcmVzdFBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZSgpLFt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMF0uZ2V0Q29vcmRpbmF0ZSgpLHRoaXMubWluRGlzdGFuY2VMb2NhdGlvblsxXS5nZXRDb29yZGluYXRlKCldfSxjb21wdXRlTWluRGlzdGFuY2U6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbnVsbCE9PXRoaXMubWluRGlzdGFuY2VMb2NhdGlvbj9udWxsOih0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb249bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZSgpLHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2U/bnVsbDp2b2lkIHRoaXMuY29tcHV0ZUZhY2V0RGlzdGFuY2UoKSk7aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiB3dCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO2lmKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKT50aGlzLm1pbkRpc3RhbmNlKXJldHVybiBudWxsO2Zvcih2YXIgaSxyPXQuZ2V0Q29vcmRpbmF0ZXMoKSxzPWUuZ2V0Q29vcmRpbmF0ZSgpLG89MDtvPHIubGVuZ3RoLTE7bysrKXtpZigoaD1adC5kaXN0YW5jZVBvaW50TGluZShzLHJbb10scltvKzFdKSk8dGhpcy5taW5EaXN0YW5jZSYmKHRoaXMubWluRGlzdGFuY2U9aCxpPW5ldyBKdChyW29dLHJbbysxXSkuY2xvc2VzdFBvaW50KHMpLG5bMF09bmV3IFhpKHQsbyxpKSxuWzFdPW5ldyBYaShlLDAscykpLHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fWVsc2UgaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDdCl7dmFyIGE9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzFdLGw9YXJndW1lbnRzWzJdO2lmKGEuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKHUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKT50aGlzLm1pbkRpc3RhbmNlKXJldHVybiBudWxsO2Zvcih2YXIgaCxjLGYscj1hLmdldENvb3JkaW5hdGVzKCksZz11LmdldENvb3JkaW5hdGVzKCksbz0wO288ci5sZW5ndGgtMTtvKyspZm9yKHZhciBkPTA7ZDxnLmxlbmd0aC0xO2QrKyl7aWYoKGg9WnQuZGlzdGFuY2VMaW5lTGluZShyW29dLHJbbysxXSxnW2RdLGdbZCsxXSkpPHRoaXMubWluRGlzdGFuY2UmJih0aGlzLm1pbkRpc3RhbmNlPWgsYz1uZXcgSnQocltvXSxyW28rMV0pLGY9bmV3IEp0KGdbZF0sZ1tkKzFdKSxmPWMuY2xvc2VzdFBvaW50cyhmKSxsWzBdPW5ldyBYaShhLG8sZlswXSksbFsxXT1uZXcgWGkodSxkLGZbMV0pKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsfX19LGNvbXB1dGVNaW5EaXN0YW5jZVBvaW50czpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPTA7aTx0LnNpemUoKTtpKyspZm9yKHZhciByPXQuZ2V0KGkpLHM9MDtzPGUuc2l6ZSgpO3MrKyl7dmFyIG89ZS5nZXQocyksYT1yLmdldENvb3JkaW5hdGUoKS5kaXN0YW5jZShvLmdldENvb3JkaW5hdGUoKSk7aWYoYTx0aGlzLm1pbkRpc3RhbmNlJiYodGhpcy5taW5EaXN0YW5jZT1hLG5bMF09bmV3IFhpKHIsMCxyLmdldENvb3JkaW5hdGUoKSksblsxXT1uZXcgWGkobywwLG8uZ2V0Q29vcmRpbmF0ZSgpKSksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gbnVsbH19LGRpc3RhbmNlOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuZ2VvbVswXXx8bnVsbD09PXRoaXMuZ2VvbVsxXSl0aHJvdyBuZXcgYztyZXR1cm4gdGhpcy5nZW9tWzBdLmlzRW1wdHkoKXx8dGhpcy5nZW9tWzFdLmlzRW1wdHkoKT8wOih0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZSgpLHRoaXMubWluRGlzdGFuY2UpfSxjb21wdXRlTWluRGlzdGFuY2VMaW5lczpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPTA7aTx0LnNpemUoKTtpKyspZm9yKHZhciByPXQuZ2V0KGkpLHM9MDtzPGUuc2l6ZSgpO3MrKyl7dmFyIG89ZS5nZXQocyk7aWYodGhpcy5jb21wdXRlTWluRGlzdGFuY2UocixvLG4pLHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBqaX19KSxqaS5kaXN0YW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgamkodCxlKS5kaXN0YW5jZSgpfSxqaS5pc1dpdGhpbkRpc3RhbmNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IGppKHQsZSxuKS5kaXN0YW5jZSgpPD1ufSxqaS5uZWFyZXN0UG9pbnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBqaSh0LGUpLm5lYXJlc3RQb2ludHMoKX07dmFyIGxvPU9iamVjdC5mcmVlemUoe0Rpc3RhbmNlT3A6aml9KTtlKEtpLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5jb29yZGluYXRlcyl7Zm9yKHZhciB0PTAsZT0wLG49bmV3IE4saT10aGlzLmRpcmVjdGVkRWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO3IuZ2V0RWRnZURpcmVjdGlvbigpP3QrKzplKyssbi5hZGQoci5nZXRFZGdlKCkuZ2V0TGluZSgpLmdldENvb3JkaW5hdGVzKCksITEsci5nZXRFZGdlRGlyZWN0aW9uKCkpfXRoaXMuY29vcmRpbmF0ZXM9bi50b0Nvb3JkaW5hdGVBcnJheSgpLHQ8ZSYmSC5yZXZlcnNlKHRoaXMuY29vcmRpbmF0ZXMpfXJldHVybiB0aGlzLmNvb3JkaW5hdGVzfSx0b0xpbmVTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodGhpcy5nZXRDb29yZGluYXRlcygpKX0sYWRkOmZ1bmN0aW9uKHQpe3RoaXMuZGlyZWN0ZWRFZGdlcy5hZGQodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEtpfX0pLGUoWmkucHJvdG90eXBlLHtzZXRWaXNpdGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmlzaXRlZD10fSxpc01hcmtlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc01hcmtlZH0sc2V0RGF0YTpmdW5jdGlvbih0KXt0aGlzLmRhdGE9dH0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LHNldE1hcmtlZDpmdW5jdGlvbih0KXt0aGlzLl9pc01hcmtlZD10fSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX0saXNWaXNpdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmlzaXRlZH0sc2V0Q29udGV4dDpmdW5jdGlvbih0KXt0aGlzLmRhdGE9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWml9fSksWmkuZ2V0Q29tcG9uZW50V2l0aFZpc2l0ZWRTdGF0ZT1mdW5jdGlvbih0LGUpe2Zvcig7dC5oYXNOZXh0KCk7KXt2YXIgbj10Lm5leHQoKTtpZihuLmlzVmlzaXRlZCgpPT09ZSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sWmkuc2V0VmlzaXRlZD1mdW5jdGlvbih0LGUpe2Zvcig7dC5oYXNOZXh0KCk7KXt0Lm5leHQoKS5zZXRWaXNpdGVkKGUpfX0sWmkuc2V0TWFya2VkPWZ1bmN0aW9uKHQsZSl7Zm9yKDt0Lmhhc05leHQoKTspe3QubmV4dCgpLnNldE1hcmtlZChlKX19LGEoSmksWmkpLGUoSmkucHJvdG90eXBlLHtpc1JlbW92ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMucGFyZW50RWRnZX0sY29tcGFyZURpcmVjdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5xdWFkcmFudD50LnF1YWRyYW50PzE6dGhpcy5xdWFkcmFudDx0LnF1YWRyYW50Py0xOlp0LmNvbXB1dGVPcmllbnRhdGlvbih0LnAwLHQucDEsdGhpcy5wMSl9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcm9tLmdldENvb3JkaW5hdGUoKX0scHJpbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRDbGFzcygpLmdldE5hbWUoKSxuPWUubGFzdEluZGV4T2YoXCIuXCIpLG49ZS5zdWJzdHJpbmcobisxKTt0LnByaW50KFwiICBcIituK1wiOiBcIit0aGlzLnAwK1wiIC0gXCIrdGhpcy5wMStcIiBcIit0aGlzLnF1YWRyYW50K1wiOlwiK3RoaXMuYW5nbGUpfSxnZXREaXJlY3Rpb25QdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnAxfSxnZXRBbmdsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFuZ2xlfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29tcGFyZURpcmVjdGlvbih0KX0sZ2V0RnJvbU5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcm9tfSxnZXRTeW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zeW19LHNldEVkZ2U6ZnVuY3Rpb24odCl7dGhpcy5wYXJlbnRFZGdlPXR9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuc3ltPW51bGwsdGhpcy5wYXJlbnRFZGdlPW51bGx9LGdldEVkZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnRFZGdlfSxnZXRRdWFkcmFudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1YWRyYW50fSxzZXRTeW06ZnVuY3Rpb24odCl7dGhpcy5zeW09dH0sZ2V0VG9Ob2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG99LGdldEVkZ2VEaXJlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlRGlyZWN0aW9ufSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltpXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSml9fSksSmkudG9FZGdlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEksbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KWUuYWRkKG4ubmV4dCgpLnBhcmVudEVkZ2UpO3JldHVybiBlfSxhKFFpLEppKSxlKFFpLnByb3RvdHlwZSx7Z2V0TmV4dDpmdW5jdGlvbigpe3JldHVybiAyIT09dGhpcy5nZXRUb05vZGUoKS5nZXREZWdyZWUoKT9udWxsOnRoaXMuZ2V0VG9Ob2RlKCkuZ2V0T3V0RWRnZXMoKS5nZXRFZGdlcygpLmdldCgwKT09PXRoaXMuZ2V0U3ltKCk/dGhpcy5nZXRUb05vZGUoKS5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkuZ2V0KDEpOihsLmlzVHJ1ZSh0aGlzLmdldFRvTm9kZSgpLmdldE91dEVkZ2VzKCkuZ2V0RWRnZXMoKS5nZXQoMSk9PT10aGlzLmdldFN5bSgpKSx0aGlzLmdldFRvTm9kZSgpLmdldE91dEVkZ2VzKCkuZ2V0RWRnZXMoKS5nZXQoMCkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBRaX19KSxhKCRpLFppKSxlKCRpLnByb3RvdHlwZSx7aXNSZW1vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmRpckVkZ2V9LHNldERpcmVjdGVkRWRnZXM6ZnVuY3Rpb24odCxlKXt0aGlzLmRpckVkZ2U9W3QsZV0sdC5zZXRFZGdlKHRoaXMpLGUuc2V0RWRnZSh0aGlzKSx0LnNldFN5bShlKSxlLnNldFN5bSh0KSx0LmdldEZyb21Ob2RlKCkuYWRkT3V0RWRnZSh0KSxlLmdldEZyb21Ob2RlKCkuYWRkT3V0RWRnZShlKX0sZ2V0RGlyRWRnZTpmdW5jdGlvbigpe2lmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRpckVkZ2VbdF19aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBlcil7dD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZGlyRWRnZVswXS5nZXRGcm9tTm9kZSgpPT09dD90aGlzLmRpckVkZ2VbMF06dGhpcy5kaXJFZGdlWzFdLmdldEZyb21Ob2RlKCk9PT10P3RoaXMuZGlyRWRnZVsxXTpudWxsfX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5kaXJFZGdlPW51bGx9LGdldE9wcG9zaXRlTm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXJFZGdlWzBdLmdldEZyb21Ob2RlKCk9PT10P3RoaXMuZGlyRWRnZVswXS5nZXRUb05vZGUoKTp0aGlzLmRpckVkZ2VbMV0uZ2V0RnJvbU5vZGUoKT09PXQ/dGhpcy5kaXJFZGdlWzFdLmdldFRvTm9kZSgpOm51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuICRpfX0pLGUodHIucHJvdG90eXBlLHtnZXROZXh0RWRnZTpmdW5jdGlvbih0KXt0PXRoaXMuZ2V0SW5kZXgodCk7cmV0dXJuIHRoaXMub3V0RWRnZXMuZ2V0KHRoaXMuZ2V0SW5kZXgodCsxKSl9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLml0ZXJhdG9yKCk7cmV0dXJuIHQuaGFzTmV4dCgpP3QubmV4dCgpLmdldENvb3JkaW5hdGUoKTpudWxsfSxpdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvcnRFZGdlcygpLHRoaXMub3V0RWRnZXMuaXRlcmF0b3IoKX0sc29ydEVkZ2VzOmZ1bmN0aW9uKCl7dGhpcy5zb3J0ZWR8fChacy5zb3J0KHRoaXMub3V0RWRnZXMpLHRoaXMuc29ydGVkPSEwKX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMub3V0RWRnZXMucmVtb3ZlKHQpfSxnZXRFZGdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvcnRFZGdlcygpLHRoaXMub3V0RWRnZXN9LGdldE5leHRDV0VkZ2U6ZnVuY3Rpb24odCl7dD10aGlzLmdldEluZGV4KHQpO3JldHVybiB0aGlzLm91dEVkZ2VzLmdldCh0aGlzLmdldEluZGV4KHQtMSkpfSxnZXRJbmRleDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgJGkpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNvcnRFZGdlcygpO2Zvcih2YXIgZT0wO2U8dGhpcy5vdXRFZGdlcy5zaXplKCk7ZSsrKXtpZih0aGlzLm91dEVkZ2VzLmdldChlKS5nZXRFZGdlKCk9PT10KXJldHVybiBlfXJldHVybi0xfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgSmkpe3ZhciBuPWFyZ3VtZW50c1swXTt0aGlzLnNvcnRFZGdlcygpO2ZvcihlPTA7ZTx0aGlzLm91dEVkZ2VzLnNpemUoKTtlKyspe2lmKHRoaXMub3V0RWRnZXMuZ2V0KGUpPT09bilyZXR1cm4gZX1yZXR1cm4tMX1pZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1swXSkpe3ZhciBpPWFyZ3VtZW50c1swXSV0aGlzLm91dEVkZ2VzLnNpemUoKTtyZXR1cm4gaTwwJiYoaSs9dGhpcy5vdXRFZGdlcy5zaXplKCkpLGl9fSxhZGQ6ZnVuY3Rpb24odCl7dGhpcy5vdXRFZGdlcy5hZGQodCksdGhpcy5zb3J0ZWQ9ITF9LGdldERlZ3JlZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm91dEVkZ2VzLnNpemUoKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ9fSksYShlcixaaSksZShlci5wcm90b3R5cGUse2lzUmVtb3ZlZDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5wdH0sYWRkT3V0RWRnZTpmdW5jdGlvbih0KXt0aGlzLmRlU3Rhci5hZGQodCl9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdH0sZ2V0T3V0RWRnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZVN0YXJ9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciB0OzA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMucHQ9bnVsbDoxPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLHRoaXMuZGVTdGFyLnJlbW92ZSh0KSl9LGdldEluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlU3Rhci5nZXRJbmRleCh0KX0sZ2V0RGVncmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVTdGFyLmdldERlZ3JlZSgpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBlcn19KSxlci5nZXRFZGdlc0JldHdlZW49ZnVuY3Rpb24odCxlKXt0PW5ldyBRKEppLnRvRWRnZXModC5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkpKSxlPUppLnRvRWRnZXMoZS5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkpO3JldHVybiB0LnJldGFpbkFsbChlKSx0fSxhKG5yLCRpKSxlKG5yLnByb3RvdHlwZSx7Z2V0TGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmV9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG5yfX0pLGUoaXIucHJvdG90eXBlLHtmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vZGVNYXAuZ2V0KHQpfSxpdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vZGVNYXAucmVtb3ZlKHQpfSx2YWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlTWFwLnZhbHVlcygpfSxhZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubm9kZU1hcC5wdXQodC5nZXRDb29yZGluYXRlKCksdCksdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gaXJ9fSksZShyci5wcm90b3R5cGUse2ZpbmROb2Rlc09mRGVncmVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPXRoaXMubm9kZUl0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpLmdldERlZ3JlZSgpPT09dCYmZS5hZGQoaSl9cmV0dXJuIGV9LGRpckVkZ2VJdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpckVkZ2VzLml0ZXJhdG9yKCl9LGVkZ2VJdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzLml0ZXJhdG9yKCl9LHJlbW92ZTpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgJGkpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnJlbW92ZSh0LmdldERpckVkZ2UoMCkpLHRoaXMucmVtb3ZlKHQuZ2V0RGlyRWRnZSgxKSksdGhpcy5lZGdlcy5yZW1vdmUodCksdC5yZW1vdmUoKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgSmkpe3ZhciBlPWFyZ3VtZW50c1swXTtudWxsIT09KGk9ZS5nZXRTeW0oKSkmJmkuc2V0U3ltKG51bGwpLGUuZ2V0RnJvbU5vZGUoKS5yZW1vdmUoZSksZS5yZW1vdmUoKSx0aGlzLmRpckVkZ2VzLnJlbW92ZShlKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZXIpe2Zvcih2YXIgZT1hcmd1bWVudHNbMF0sbj1lLmdldE91dEVkZ2VzKCkuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGkscj1uLm5leHQoKTtudWxsIT09KGk9ci5nZXRTeW0oKSkmJnRoaXMucmVtb3ZlKGkpLHRoaXMuZGlyRWRnZXMucmVtb3ZlKHIpO3I9ci5nZXRFZGdlKCk7bnVsbCE9PXImJnRoaXMuZWRnZXMucmVtb3ZlKHIpfXRoaXMubm9kZU1hcC5yZW1vdmUoZS5nZXRDb29yZGluYXRlKCkpLGUucmVtb3ZlKCl9fSxmaW5kTm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub2RlTWFwLmZpbmQodCl9LGdldEVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXN9LG5vZGVJdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAuaXRlcmF0b3IoKX0sY29udGFpbnM6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mICRpKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZWRnZXMuY29udGFpbnModCl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBKaSl7dD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZGlyRWRnZXMuY29udGFpbnModCl9fSxhZGQ6ZnVuY3Rpb24oKXt2YXIgdCxlO2FyZ3VtZW50c1swXWluc3RhbmNlb2YgZXI/KHQ9YXJndW1lbnRzWzBdLHRoaXMubm9kZU1hcC5hZGQodCkpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgJGk/KGU9YXJndW1lbnRzWzBdLHRoaXMuZWRnZXMuYWRkKGUpLHRoaXMuYWRkKGUuZ2V0RGlyRWRnZSgwKSksdGhpcy5hZGQoZS5nZXREaXJFZGdlKDEpKSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBKaSYmKGU9YXJndW1lbnRzWzBdLHRoaXMuZGlyRWRnZXMuYWRkKGUpKX0sZ2V0Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlTWFwLnZhbHVlcygpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBycn19KSxhKHNyLHJyKSxlKHNyLnByb3RvdHlwZSx7YWRkRWRnZTpmdW5jdGlvbih0KXtpZih0LmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt2YXIgZT1ILnJlbW92ZVJlcGVhdGVkUG9pbnRzKHQuZ2V0Q29vcmRpbmF0ZXMoKSk7aWYoZS5sZW5ndGg8PTEpcmV0dXJuIG51bGw7dmFyIG49ZVswXSxpPWVbZS5sZW5ndGgtMV0scj10aGlzLmdldE5vZGUobiksbj10aGlzLmdldE5vZGUoaSksaT1uZXcgUWkocixuLGVbMV0sITApLGU9bmV3IFFpKG4scixlW2UubGVuZ3RoLTJdLCExKSx0PW5ldyBucih0KTt0LnNldERpcmVjdGVkRWRnZXMoaSxlKSx0aGlzLmFkZCh0KX0sZ2V0Tm9kZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbmROb2RlKHQpO3JldHVybiBudWxsPT09ZSYmKGU9bmV3IGVyKHQpLHRoaXMuYWRkKGUpKSxlfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBzcn19KSxlKG9yLnByb3RvdHlwZSx7YnVpbGRFZGdlU3RyaW5nc0ZvclVucHJvY2Vzc2VkTm9kZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ncmFwaC5nZXROb2RlcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTtlLmlzTWFya2VkKCl8fChsLmlzVHJ1ZSgyPT09ZS5nZXREZWdyZWUoKSksdGhpcy5idWlsZEVkZ2VTdHJpbmdzU3RhcnRpbmdBdChlKSxlLnNldE1hcmtlZCghMCkpfX0sYnVpbGRFZGdlU3RyaW5nc0Zvck5vbkRlZ3JlZTJOb2RlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpOzIhPT1lLmdldERlZ3JlZSgpJiYodGhpcy5idWlsZEVkZ2VTdHJpbmdzU3RhcnRpbmdBdChlKSxlLnNldE1hcmtlZCghMCkpfX0sYnVpbGRFZGdlU3RyaW5nc0Zvck9idmlvdXNTdGFydE5vZGVzOmZ1bmN0aW9uKCl7dGhpcy5idWlsZEVkZ2VTdHJpbmdzRm9yTm9uRGVncmVlMk5vZGVzKCl9LGdldE1lcmdlZExpbmVTdHJpbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVyZ2UoKSx0aGlzLm1lcmdlZExpbmVTdHJpbmdzfSxidWlsZEVkZ2VTdHJpbmdzU3RhcnRpbmdBdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRPdXRFZGdlcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtuLmdldEVkZ2UoKS5pc01hcmtlZCgpfHx0aGlzLmVkZ2VTdHJpbmdzLmFkZCh0aGlzLmJ1aWxkRWRnZVN0cmluZ1N0YXJ0aW5nV2l0aChuKSl9fSxtZXJnZTpmdW5jdGlvbigpe2lmKG51bGwhPT10aGlzLm1lcmdlZExpbmVTdHJpbmdzKXJldHVybiBudWxsO1ppLnNldE1hcmtlZCh0aGlzLmdyYXBoLm5vZGVJdGVyYXRvcigpLCExKSxaaS5zZXRNYXJrZWQodGhpcy5ncmFwaC5lZGdlSXRlcmF0b3IoKSwhMSksdGhpcy5lZGdlU3RyaW5ncz1uZXcgSSx0aGlzLmJ1aWxkRWRnZVN0cmluZ3NGb3JPYnZpb3VzU3RhcnROb2RlcygpLHRoaXMuYnVpbGRFZGdlU3RyaW5nc0Zvcklzb2xhdGVkTG9vcHMoKSx0aGlzLm1lcmdlZExpbmVTdHJpbmdzPW5ldyBJO2Zvcih2YXIgdD10aGlzLmVkZ2VTdHJpbmdzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTt0aGlzLm1lcmdlZExpbmVTdHJpbmdzLmFkZChlLnRvTGluZVN0cmluZygpKX19LGJ1aWxkRWRnZVN0cmluZ1N0YXJ0aW5nV2l0aDpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEtpKHRoaXMuZmFjdG9yeSksbj10O2UuYWRkKG4pLG4uZ2V0RWRnZSgpLnNldE1hcmtlZCghMCksbnVsbCE9PShuPW4uZ2V0TmV4dCgpKSYmbiE9PXQ7KTtyZXR1cm4gZX0sYWRkOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCKWFyZ3VtZW50c1swXS5hcHBseSh7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bcV19LGZpbHRlcjpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQ3QmJnRoaXMuYWRkKHQpfX0pO2Vsc2UgaWYoUihhcmd1bWVudHNbMF0sbSkpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm1lcmdlZExpbmVTdHJpbmdzPW51bGw7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuYWRkKG4pfX1lbHNle2FyZ3VtZW50c1swXWluc3RhbmNlb2YgQ3QmJih0PWFyZ3VtZW50c1swXSxudWxsPT09dGhpcy5mYWN0b3J5JiYodGhpcy5mYWN0b3J5PXQuZ2V0RmFjdG9yeSgpKSx0aGlzLmdyYXBoLmFkZEVkZ2UodCkpfX0sYnVpbGRFZGdlU3RyaW5nc0Zvcklzb2xhdGVkTG9vcHM6ZnVuY3Rpb24oKXt0aGlzLmJ1aWxkRWRnZVN0cmluZ3NGb3JVbnByb2Nlc3NlZE5vZGVzKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG9yfX0pO3ZhciBobz1PYmplY3QuZnJlZXplKHtMaW5lTWVyZ2VyOm9yfSksY289T2JqZWN0LmZyZWV6ZSh7T3ZlcmxheU9wOmtufSk7YShhcixKaSksZShhci5wcm90b3R5cGUse2dldE5leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0fSxpc0luUmluZzpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5lZGdlUmluZ30sc2V0UmluZzpmdW5jdGlvbih0KXt0aGlzLmVkZ2VSaW5nPXR9LHNldExhYmVsOmZ1bmN0aW9uKHQpe3RoaXMubGFiZWw9dH0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sc2V0TmV4dDpmdW5jdGlvbih0KXt0aGlzLm5leHQ9dH0sZ2V0UmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VSaW5nfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBhcn19KSxhKHVyLCRpKSxlKHVyLnByb3RvdHlwZSx7Z2V0TGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmV9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHVyfX0pLGUobHIucHJvdG90eXBlLHtpc0luY2x1ZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSW5jbHVkZWR9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMucmluZ1B0cyl7Zm9yKHZhciB0PW5ldyBOLGU9dGhpcy5kZUxpc3QuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bi5nZXRFZGdlKCk7bHIuYWRkRWRnZShpLmdldExpbmUoKS5nZXRDb29yZGluYXRlcygpLG4uZ2V0RWRnZURpcmVjdGlvbigpLHQpfXRoaXMucmluZ1B0cz10LnRvQ29vcmRpbmF0ZUFycmF5KCl9cmV0dXJuIHRoaXMucmluZ1B0c30saXNJbmNsdWRlZFNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luY2x1ZGVkU2V0fSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZXMoKSwhKHRoaXMucmluZ1B0cy5sZW5ndGg8PTMpJiYodGhpcy5nZXRSaW5nKCksdGhpcy5yaW5nLmlzVmFsaWQoKSl9LGJ1aWxkOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10O3RoaXMuYWRkKGUpLGUuc2V0UmluZyh0aGlzKSxlPWUuZ2V0TmV4dCgpLGwuaXNUcnVlKG51bGwhPT1lLFwiZm91bmQgbnVsbCBERSBpbiByaW5nXCIpLGwuaXNUcnVlKGU9PT10fHwhZS5pc0luUmluZygpLFwiZm91bmQgREUgYWxyZWFkeSBpbiByaW5nXCIpLGUhPT10Oyk7fSxpc091dGVySG9sZTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5faXNIb2xlJiYhdGhpcy5oYXNTaGVsbCgpfSxnZXRQb2x5Z29uOmZ1bmN0aW9uKCl7dmFyIHQ9bnVsbDtpZihudWxsIT09dGhpcy5ob2xlcyl7dD1uZXcgQXJyYXkodGhpcy5ob2xlcy5zaXplKCkpLmZpbGwobnVsbCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmhvbGVzLnNpemUoKTtlKyspdFtlXT10aGlzLmhvbGVzLmdldChlKX1yZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24odGhpcy5yaW5nLHQpfSxpc0hvbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNIb2xlfSxpc1Byb2Nlc3NlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1Byb2Nlc3NlZH0sYWRkSG9sZTpmdW5jdGlvbigpe3ZhciB0O2FyZ3VtZW50c1swXWluc3RhbmNlb2YgUHQ/KHQ9YXJndW1lbnRzWzBdLG51bGw9PT10aGlzLmhvbGVzJiYodGhpcy5ob2xlcz1uZXcgSSksdGhpcy5ob2xlcy5hZGQodCkpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgbHImJigodD1hcmd1bWVudHNbMF0pLnNldFNoZWxsKHRoaXMpLHQ9dC5nZXRSaW5nKCksbnVsbD09PXRoaXMuaG9sZXMmJih0aGlzLmhvbGVzPW5ldyBJKSx0aGlzLmhvbGVzLmFkZCh0KSl9LHNldEluY2x1ZGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzSW5jbHVkZWQ9dCx0aGlzLl9pc0luY2x1ZGVkU2V0PSEwfSxnZXRPdXRlckhvbGU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzSG9sZSgpKXJldHVybiBudWxsO2Zvcih2YXIgdD0wO3Q8dGhpcy5kZUxpc3Quc2l6ZSgpO3QrKyl7dmFyIGU9dGhpcy5kZUxpc3QuZ2V0KHQpLmdldFN5bSgpLmdldFJpbmcoKTtpZihlLmlzT3V0ZXJIb2xlKCkpcmV0dXJuIGV9cmV0dXJuIG51bGx9LGNvbXB1dGVIb2xlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRSaW5nKCk7dGhpcy5faXNIb2xlPVp0LmlzQ0NXKHQuZ2V0Q29vcmRpbmF0ZXMoKSl9LGhhc1NoZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnNoZWxsfSxpc091dGVyU2hlbGw6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuZ2V0T3V0ZXJIb2xlKCl9LGdldExpbmVTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlcygpLHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMucmluZ1B0cyl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFh0LnRvTGluZVN0cmluZyhuZXcgRnQodGhpcy5nZXRDb29yZGluYXRlcygpKSl9LGdldFNoZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNIb2xlKCk/dGhpcy5zaGVsbDp0aGlzfSxhZGQ6ZnVuY3Rpb24odCl7dGhpcy5kZUxpc3QuYWRkKHQpfSxnZXRSaW5nOmZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMucmluZylyZXR1cm4gdGhpcy5yaW5nO3RoaXMuZ2V0Q29vcmRpbmF0ZXMoKSx0aGlzLnJpbmdQdHMubGVuZ3RoPDMmJkEub3V0LnByaW50bG4odGhpcy5yaW5nUHRzKTt0cnl7dGhpcy5yaW5nPXRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKHRoaXMucmluZ1B0cyl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgUykpdGhyb3cgdDtBLm91dC5wcmludGxuKHRoaXMucmluZ1B0cyl9cmV0dXJuIHRoaXMucmluZ30sdXBkYXRlSW5jbHVkZWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzSG9sZSgpKXJldHVybiBudWxsO2Zvcih2YXIgdD0wO3Q8dGhpcy5kZUxpc3Quc2l6ZSgpO3QrKyl7dmFyIGU9dGhpcy5kZUxpc3QuZ2V0KHQpLmdldFN5bSgpLmdldFJpbmcoKS5nZXRTaGVsbCgpO2lmKG51bGwhPT1lJiZlLmlzSW5jbHVkZWRTZXQoKSlyZXR1cm4gdGhpcy5zZXRJbmNsdWRlZCghZS5pc0luY2x1ZGVkKCkpLG51bGx9fSxzZXRTaGVsbDpmdW5jdGlvbih0KXt0aGlzLnNoZWxsPXR9LHNldFByb2Nlc3NlZDpmdW5jdGlvbih0KXt0aGlzLl9pc1Byb2Nlc3NlZD10fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBscn19KSxsci5maW5kRGlyRWRnZXNJblJpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQsbj1uZXcgSTtuLmFkZChlKSxlPWUuZ2V0TmV4dCgpLGwuaXNUcnVlKG51bGwhPT1lLFwiZm91bmQgbnVsbCBERSBpbiByaW5nXCIpLGwuaXNUcnVlKGU9PT10fHwhZS5pc0luUmluZygpLFwiZm91bmQgREUgYWxyZWFkeSBpbiByaW5nXCIpLGUhPT10Oyk7cmV0dXJuIG59LGxyLmFkZEVkZ2U9ZnVuY3Rpb24odCxlLG4pe2lmKGUpZm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspbi5hZGQodFtpXSwhMSk7ZWxzZSBmb3IoaT10Lmxlbmd0aC0xOzA8PWk7aS0tKW4uYWRkKHRbaV0sITEpfSxsci5maW5kRWRnZVJpbmdDb250YWluaW5nPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuZ2V0UmluZygpLGk9bi5nZXRFbnZlbG9wZUludGVybmFsKCkscj1uLmdldENvb3JkaW5hdGVOKDApLHM9bnVsbCxvPW51bGwsYT1lLml0ZXJhdG9yKCk7YS5oYXNOZXh0KCk7KXt2YXIgdSxsPWEubmV4dCgpLGg9bC5nZXRSaW5nKCksYz1oLmdldEVudmVsb3BlSW50ZXJuYWwoKTshYy5lcXVhbHMoaSkmJmMuY29udGFpbnMoaSkmJihyPUgucHROb3RJbkxpc3Qobi5nZXRDb29yZGluYXRlcygpLGguZ2V0Q29vcmRpbmF0ZXMoKSksdT0hMSxadC5pc1BvaW50SW5SaW5nKHIsaC5nZXRDb29yZGluYXRlcygpKSYmKHU9ITApLHUmJihudWxsPT09c3x8by5jb250YWlucyhjKSkmJihvPShzPWwpLmdldFJpbmcoKS5nZXRFbnZlbG9wZUludGVybmFsKCkpKX1yZXR1cm4gc30sZShoci5wcm90b3R5cGUse2NvbXBhcmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5nZXRSaW5nKCkuZ2V0RW52ZWxvcGUoKS5jb21wYXJlVG8oZS5nZXRSaW5nKCkuZ2V0RW52ZWxvcGUoKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3NdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBocn19KSxsci5FbnZlbG9wZUNvbXBhcmF0b3I9aHIsYShjcixyciksZShjci5wcm90b3R5cGUse2ZpbmRFZGdlUmluZzpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbHIodGhpcy5mYWN0b3J5KTtyZXR1cm4gZS5idWlsZCh0KSxlfSxjb21wdXRlRGVwdGhQYXJpdHk6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOzspe3JldHVybiBudWxsfX0sY29tcHV0ZU5leHRDV0VkZ2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubm9kZUl0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTtjci5jb21wdXRlTmV4dENXRWRnZXMoZSl9fSxhZGRFZGdlOmZ1bmN0aW9uKHQpe2lmKHQuaXNFbXB0eSgpKXJldHVybiBudWxsO3ZhciBlPUgucmVtb3ZlUmVwZWF0ZWRQb2ludHModC5nZXRDb29yZGluYXRlcygpKTtpZihlLmxlbmd0aDwyKXJldHVybiBudWxsO3ZhciBuPWVbMF0saT1lW2UubGVuZ3RoLTFdLHI9dGhpcy5nZXROb2RlKG4pLG49dGhpcy5nZXROb2RlKGkpLGk9bmV3IGFyKHIsbixlWzFdLCEwKSxlPW5ldyBhcihuLHIsZVtlLmxlbmd0aC0yXSwhMSksdD1uZXcgdXIodCk7dC5zZXREaXJlY3RlZEVkZ2VzKGksZSksdGhpcy5hZGQodCl9LGRlbGV0ZUN1dEVkZ2VzOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlTmV4dENXRWRnZXMoKSxjci5maW5kTGFiZWxlZEVkZ2VSaW5ncyh0aGlzLmRpckVkZ2VzKTtmb3IodmFyIHQ9bmV3IEksZT10aGlzLmRpckVkZ2VzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbixpPWUubmV4dCgpO2kuaXNNYXJrZWQoKXx8KG49aS5nZXRTeW0oKSxpLmdldExhYmVsKCk9PT1uLmdldExhYmVsKCkmJihpLnNldE1hcmtlZCghMCksbi5zZXRNYXJrZWQoITApLGk9aS5nZXRFZGdlKCksdC5hZGQoaS5nZXRMaW5lKCkpKSl9cmV0dXJuIHR9LGdldEVkZ2VSaW5nczpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZU5leHRDV0VkZ2VzKCksY3IubGFiZWwodGhpcy5kaXJFZGdlcywtMSk7dmFyIHQ9Y3IuZmluZExhYmVsZWRFZGdlUmluZ3ModGhpcy5kaXJFZGdlcyk7dGhpcy5jb252ZXJ0TWF4aW1hbFRvTWluaW1hbEVkZ2VSaW5ncyh0KTtmb3IodmFyIGU9bmV3IEksbj10aGlzLmRpckVkZ2VzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpLmlzTWFya2VkKCl8fGkuaXNJblJpbmcoKXx8KGk9dGhpcy5maW5kRWRnZVJpbmcoaSksZS5hZGQoaSkpfXJldHVybiBlfSxnZXROb2RlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZmluZE5vZGUodCk7cmV0dXJuIG51bGw9PT1lJiYoZT1uZXcgZXIodCksdGhpcy5hZGQoZSkpLGV9LGNvbnZlcnRNYXhpbWFsVG9NaW5pbWFsRWRnZVJpbmdzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKSxuPWNyLmZpbmRJbnRlcnNlY3Rpb25Ob2RlcyhuLGkpO2lmKG51bGwhPT1uKWZvcih2YXIgcj1uLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1yLm5leHQoKTtjci5jb21wdXRlTmV4dENDV0VkZ2VzKHMsaSl9fX0sZGVsZXRlRGFuZ2xlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmZpbmROb2Rlc09mRGVncmVlKDEpLGU9bmV3IFEsbj1uZXcgZWUsaT10Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KW4ucHVzaChpLm5leHQoKSk7Zm9yKDshbi5pc0VtcHR5KCk7KXt2YXIgcj1uLnBvcCgpO2NyLmRlbGV0ZUFsbEVkZ2VzKHIpO2ZvcihpPXIuZ2V0T3V0RWRnZXMoKS5nZXRFZGdlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcz1pLm5leHQoKTtzLnNldE1hcmtlZCghMCk7dmFyIG89cy5nZXRTeW0oKTtudWxsIT09byYmby5zZXRNYXJrZWQoITApO289cy5nZXRFZGdlKCk7ZS5hZGQoby5nZXRMaW5lKCkpO3M9cy5nZXRUb05vZGUoKTsxPT09Y3IuZ2V0RGVncmVlTm9uRGVsZXRlZChzKSYmbi5wdXNoKHMpfX1yZXR1cm4gZX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gY3J9fSksY3IuZmluZExhYmVsZWRFZGdlUmluZ3M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJLG49MSxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO3IuaXNNYXJrZWQoKXx8MDw9ci5nZXRMYWJlbCgpfHwoZS5hZGQocikscj1sci5maW5kRGlyRWRnZXNJblJpbmcociksY3IubGFiZWwocixuKSxuKyspfXJldHVybiBlfSxjci5nZXREZWdyZWVOb25EZWxldGVkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dC5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe24ubmV4dCgpLmlzTWFya2VkKCl8fGUrK31yZXR1cm4gZX0sY3IuZGVsZXRlQWxsRWRnZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuZ2V0T3V0RWRnZXMoKS5nZXRFZGdlcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtuLnNldE1hcmtlZCghMCk7bj1uLmdldFN5bSgpO251bGwhPT1uJiZuLnNldE1hcmtlZCghMCl9fSxjci5sYWJlbD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXtuLm5leHQoKS5zZXRMYWJlbChlKX19LGNyLmNvbXB1dGVOZXh0Q1dFZGdlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPW51bGwsaT10LmdldE91dEVkZ2VzKCkuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7ci5pc01hcmtlZCgpfHwobnVsbD09PWUmJihlPXIpLG51bGwhPT1uJiZuLmdldFN5bSgpLnNldE5leHQociksbj1yKX1udWxsIT09biYmbi5nZXRTeW0oKS5zZXROZXh0KGUpfSxjci5jb21wdXRlTmV4dENDV0VkZ2VzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW51bGwsaT1udWxsLHI9dC5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkscz1yLnNpemUoKS0xOzA8PXM7cy0tKXt2YXIgbz1yLmdldChzKSxhPW8uZ2V0U3ltKCksdT1udWxsO28uZ2V0TGFiZWwoKT09PWUmJih1PW8pO289bnVsbDthLmdldExhYmVsKCk9PT1lJiYobz1hKSxudWxsPT09dSYmbnVsbD09PW98fChudWxsIT09byYmKGk9byksbnVsbCE9PXUmJihudWxsIT09aSYmKGkuc2V0TmV4dCh1KSxpPW51bGwpLG51bGw9PT1uJiYobj11KSkpfW51bGwhPT1pJiYobC5pc1RydWUobnVsbCE9PW4pLGkuc2V0TmV4dChuKSl9LGNyLmdldERlZ3JlZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLGk9dC5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe2kubmV4dCgpLmdldExhYmVsKCk9PT1lJiZuKyt9cmV0dXJuIG59LGNyLmZpbmRJbnRlcnNlY3Rpb25Ob2Rlcz1mdW5jdGlvbih0LGUpe3ZhciBuPXQsaT1udWxsO2Rve3ZhciByPW4uZ2V0RnJvbU5vZGUoKX13aGlsZSgxPGNyLmdldERlZ3JlZShyLGUpJiYobnVsbD09PWkmJihpPW5ldyBJKSxpLmFkZChyKSksbj1uLmdldE5leHQoKSxsLmlzVHJ1ZShudWxsIT09bixcImZvdW5kIG51bGwgREUgaW4gcmluZ1wiKSxsLmlzVHJ1ZShuPT09dHx8IW4uaXNJblJpbmcoKSxcImZvdW5kIERFIGFscmVhZHkgaW4gcmluZ1wiKSxuIT09dCk7cmV0dXJuIGl9LGUoZnIucHJvdG90eXBlLHtnZXRHZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5nZW9tRmFjdG9yeSYmKHRoaXMuZ2VvbUZhY3Rvcnk9bmV3IFl0KSx0aGlzLnBvbHlnb25pemUoKSx0aGlzLmV4dHJhY3RPbmx5UG9seWdvbmFsP3RoaXMuZ2VvbUZhY3RvcnkuYnVpbGRHZW9tZXRyeSh0aGlzLnBvbHlMaXN0KTp0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihZdC50b0dlb21ldHJ5QXJyYXkodGhpcy5wb2x5TGlzdCkpfSxnZXRJbnZhbGlkUmluZ0xpbmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9seWdvbml6ZSgpLHRoaXMuaW52YWxpZFJpbmdMaW5lc30sZmluZFZhbGlkUmluZ3M6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT10Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtyLmlzVmFsaWQoKT9lLmFkZChyKTpuLmFkZChyLmdldExpbmVTdHJpbmcoKSl9fSxwb2x5Z29uaXplOmZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMucG9seUxpc3QpcmV0dXJuIG51bGw7aWYodGhpcy5wb2x5TGlzdD1uZXcgSSxudWxsPT09dGhpcy5ncmFwaClyZXR1cm4gbnVsbDt0aGlzLmRhbmdsZXM9dGhpcy5ncmFwaC5kZWxldGVEYW5nbGVzKCksdGhpcy5jdXRFZGdlcz10aGlzLmdyYXBoLmRlbGV0ZUN1dEVkZ2VzKCk7dmFyIHQ9dGhpcy5ncmFwaC5nZXRFZGdlUmluZ3MoKSxlPW5ldyBJO3RoaXMuaW52YWxpZFJpbmdMaW5lcz1uZXcgSSx0aGlzLmlzQ2hlY2tpbmdSaW5nc1ZhbGlkP3RoaXMuZmluZFZhbGlkUmluZ3ModCxlLHRoaXMuaW52YWxpZFJpbmdMaW5lcyk6ZT10LHRoaXMuZmluZFNoZWxsc0FuZEhvbGVzKGUpLGZyLmFzc2lnbkhvbGVzVG9TaGVsbHModGhpcy5ob2xlTGlzdCx0aGlzLnNoZWxsTGlzdCksWnMuc29ydCh0aGlzLnNoZWxsTGlzdCxuZXcgbHIuRW52ZWxvcGVDb21wYXJhdG9yKTtlPSEwO3RoaXMuZXh0cmFjdE9ubHlQb2x5Z29uYWwmJihmci5maW5kRGlzam9pbnRTaGVsbHModGhpcy5zaGVsbExpc3QpLGU9ITEpLHRoaXMucG9seUxpc3Q9ZnIuZXh0cmFjdFBvbHlnb25zKHRoaXMuc2hlbGxMaXN0LGUpfSxnZXREYW5nbGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9seWdvbml6ZSgpLHRoaXMuZGFuZ2xlc30sZ2V0Q3V0RWRnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb2x5Z29uaXplKCksdGhpcy5jdXRFZGdlc30sZ2V0UG9seWdvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb2x5Z29uaXplKCksdGhpcy5wb2x5TGlzdH0sYWRkOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoUihhcmd1bWVudHNbMF0sbSkpZm9yKHZhciBlPWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5hZGQobil9ZWxzZSBhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEN0Pyh0PWFyZ3VtZW50c1swXSx0aGlzLmdlb21GYWN0b3J5PXQuZ2V0RmFjdG9yeSgpLG51bGw9PT10aGlzLmdyYXBoJiYodGhpcy5ncmFwaD1uZXcgY3IodGhpcy5nZW9tRmFjdG9yeSkpLHRoaXMuZ3JhcGguYWRkRWRnZSh0KSk6YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCJiZhcmd1bWVudHNbMF0uYXBwbHkodGhpcy5saW5lU3RyaW5nQWRkZXIpfSxzZXRDaGVja1JpbmdzVmFsaWQ6ZnVuY3Rpb24odCl7dGhpcy5pc0NoZWNraW5nUmluZ3NWYWxpZD10fSxmaW5kU2hlbGxzQW5kSG9sZXM6ZnVuY3Rpb24odCl7dGhpcy5ob2xlTGlzdD1uZXcgSSx0aGlzLnNoZWxsTGlzdD1uZXcgSTtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5jb21wdXRlSG9sZSgpLChuLmlzSG9sZSgpP3RoaXMuaG9sZUxpc3Q6dGhpcy5zaGVsbExpc3QpLmFkZChuKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGZyfX0pLGZyLmZpbmRPdXRlclNoZWxscz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCksaT1uLmdldE91dGVySG9sZSgpO251bGw9PT1pfHxpLmlzUHJvY2Vzc2VkKCl8fChuLnNldEluY2x1ZGVkKCEwKSxpLnNldFByb2Nlc3NlZCghMCkpfX0sZnIuZXh0cmFjdFBvbHlnb25zPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBJLGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7KGV8fHIuaXNJbmNsdWRlZCgpKSYmbi5hZGQoci5nZXRQb2x5Z29uKCkpfXJldHVybiBufSxmci5hc3NpZ25Ib2xlc1RvU2hlbGxzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2ZyLmFzc2lnbkhvbGVUb1NoZWxsKGksZSl9fSxmci5hc3NpZ25Ib2xlVG9TaGVsbD1mdW5jdGlvbih0LGUpe2U9bHIuZmluZEVkZ2VSaW5nQ29udGFpbmluZyh0LGUpO251bGwhPT1lJiZlLmFkZEhvbGUodCl9LGZyLmZpbmREaXNqb2ludFNoZWxscz1mdW5jdGlvbih0KXtmci5maW5kT3V0ZXJTaGVsbHModCk7dmFyIGU9bnVsbDtkb3tlPSExO2Zvcih2YXIgbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpLmlzSW5jbHVkZWRTZXQoKXx8KGkudXBkYXRlSW5jbHVkZWQoKSxpLmlzSW5jbHVkZWRTZXQoKXx8KGU9ITApKX19d2hpbGUoZSl9LGUoZ3IucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEN0JiZ0aGlzLnAuYWRkKHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltxXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZ3J9fSksZnIuTGluZVN0cmluZ0FkZGVyPWdyO3ZhciBmbz1PYmplY3QuZnJlZXplKHtQb2x5Z29uaXplcjpmcn0pO2UoZHIucHJvdG90eXBlLHtjcmVhdGVFZGdlRW5kRm9yTmV4dDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1uLnNlZ21lbnRJbmRleCsxO2lmKHI+PXQuZ2V0TnVtUG9pbnRzKCkmJm51bGw9PT1pKXJldHVybiBudWxsO3I9dC5nZXRDb29yZGluYXRlKHIpO251bGwhPT1pJiZpLnNlZ21lbnRJbmRleD09PW4uc2VnbWVudEluZGV4JiYocj1pLmNvb3JkKTt0PW5ldyBzbih0LG4uY29vcmQscixuZXcgSmUodC5nZXRMYWJlbCgpKSk7ZS5hZGQodCl9LGNyZWF0ZUVkZ2VFbmRGb3JQcmV2OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW4uc2VnbWVudEluZGV4O2lmKDA9PT1uLmRpc3Qpe2lmKDA9PT1yKXJldHVybiBudWxsO3ItLX12YXIgcz10LmdldENvb3JkaW5hdGUocik7bnVsbCE9PWkmJmkuc2VnbWVudEluZGV4Pj1yJiYocz1pLmNvb3JkKTtpPW5ldyBKZSh0LmdldExhYmVsKCkpO2kuZmxpcCgpO2k9bmV3IHNuKHQsbi5jb29yZCxzLGkpO2UuYWRkKGkpfSxjb21wdXRlRWRnZUVuZHM6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBJLG49dDtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO3RoaXMuY29tcHV0ZUVkZ2VFbmRzKGksZSl9cmV0dXJuIGV9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxzPWFyZ3VtZW50c1sxXSx0PXIuZ2V0RWRnZUludGVyc2VjdGlvbkxpc3QoKTt0LmFkZEVuZHBvaW50cygpO3ZhciBvLGE9dC5pdGVyYXRvcigpLHU9bnVsbDtpZighYS5oYXNOZXh0KCkpcmV0dXJuIG51bGw7Zm9yKHZhciBsPWEubmV4dCgpO289dSx1PWwsbD1udWxsLGEuaGFzTmV4dCgpJiYobD1hLm5leHQoKSksbnVsbCE9PXUmJih0aGlzLmNyZWF0ZUVkZ2VFbmRGb3JQcmV2KHIscyx1LG8pLHRoaXMuY3JlYXRlRWRnZUVuZEZvck5leHQocixzLHUsbCkpLG51bGwhPT11Oyk7fX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZHJ9fSksYShwcixzbiksZShwci5wcm90b3R5cGUse2luc2VydDpmdW5jdGlvbih0KXt0aGlzLmVkZ2VFbmRzLmFkZCh0KX0scHJpbnQ6ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiRWRnZUVuZEJ1bmRsZS0tXFx4M2UgTGFiZWw6IFwiK3RoaXMubGFiZWwpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5wcmludCh0KSx0LnByaW50bG4oKX19LGl0ZXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZUVuZHMuaXRlcmF0b3IoKX0sZ2V0RWRnZUVuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlRW5kc30sY29tcHV0ZUxhYmVsT246ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxpPSExLHI9dGhpcy5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7KHM9ci5uZXh0KCkuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KSk9PT1MLkJPVU5EQVJZJiZuKysscz09PUwuSU5URVJJT1ImJihpPSEwKX12YXIgcz1pP0wuSU5URVJJT1I6TC5OT05FOzA8biYmKHM9cW4uZGV0ZXJtaW5lQm91bmRhcnkoZSxuKSksdGhpcy5sYWJlbC5zZXRMb2NhdGlvbih0LHMpfSxjb21wdXRlTGFiZWxTaWRlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKGkuZ2V0TGFiZWwoKS5pc0FyZWEoKSl7aT1pLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCxlKTtpZihpPT09TC5JTlRFUklPUilyZXR1cm4gdGhpcy5sYWJlbC5zZXRMb2NhdGlvbih0LGUsTC5JTlRFUklPUiksbnVsbDtpPT09TC5FWFRFUklPUiYmdGhpcy5sYWJlbC5zZXRMb2NhdGlvbih0LGUsTC5FWFRFUklPUil9fX0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sY29tcHV0ZUxhYmVsU2lkZXM6ZnVuY3Rpb24odCl7dGhpcy5jb21wdXRlTGFiZWxTaWRlKHQsS2UuTEVGVCksdGhpcy5jb21wdXRlTGFiZWxTaWRlKHQsS2UuUklHSFQpfSx1cGRhdGVJTTpmdW5jdGlvbih0KXtHbi51cGRhdGVJTSh0aGlzLmxhYmVsLHQpfSxjb21wdXRlTGFiZWw6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSExLG49dGhpcy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7bi5uZXh0KCkuZ2V0TGFiZWwoKS5pc0FyZWEoKSYmKGU9ITApfXRoaXMubGFiZWw9ZT9uZXcgSmUoTC5OT05FLEwuTk9ORSxMLk5PTkUpOm5ldyBKZShMLk5PTkUpO2Zvcih2YXIgaT0wO2k8MjtpKyspdGhpcy5jb21wdXRlTGFiZWxPbihpLHQpLGUmJnRoaXMuY29tcHV0ZUxhYmVsU2lkZXMoaSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHByfX0pLGEobXIsZG4pLGUobXIucHJvdG90eXBlLHt1cGRhdGVJTTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkudXBkYXRlSU0odCl9fSxpbnNlcnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lZGdlTWFwLmdldCh0KTtudWxsPT09ZT8oZT1uZXcgcHIodCksdGhpcy5pbnNlcnRFZGdlRW5kKHQsZSkpOmUuaW5zZXJ0KHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBtcn19KSxhKHlyLG5uKSxlKHlyLnByb3RvdHlwZSx7dXBkYXRlSU1Gcm9tRWRnZXM6ZnVuY3Rpb24odCl7dGhpcy5lZGdlcy51cGRhdGVJTSh0KX0sY29tcHV0ZUlNOmZ1bmN0aW9uKHQpe3Quc2V0QXRMZWFzdElmVmFsaWQodGhpcy5sYWJlbC5nZXRMb2NhdGlvbigwKSx0aGlzLmxhYmVsLmdldExvY2F0aW9uKDEpLDApfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB5cn19KSxhKHZyLGFuKSxlKHZyLnByb3RvdHlwZSx7Y3JlYXRlTm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHlyKHQsbmV3IG1yKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdnJ9fSksZSh4ci5wcm90b3R5cGUse2luc2VydEVkZ2VFbmRzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLm5vZGVzLmFkZChuKX19LGNvbXB1dGVQcm9wZXJJbnRlcnNlY3Rpb25JTTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYXJnWzBdLmdldEdlb21ldHJ5KCkuZ2V0RGltZW5zaW9uKCksaT10aGlzLmFyZ1sxXS5nZXRHZW9tZXRyeSgpLmdldERpbWVuc2lvbigpLHI9dC5oYXNQcm9wZXJJbnRlcnNlY3Rpb24oKSx0PXQuaGFzUHJvcGVySW50ZXJpb3JJbnRlcnNlY3Rpb24oKTsyPT09biYmMj09PWk/ciYmZS5zZXRBdExlYXN0KFwiMjEyMTAxMjEyXCIpOjI9PT1uJiYxPT09aT8ociYmZS5zZXRBdExlYXN0KFwiRkZGMEZGRkYyXCIpLHQmJmUuc2V0QXRMZWFzdChcIjFGRkZGRjFGRlwiKSk6MT09PW4mJjI9PT1pPyhyJiZlLnNldEF0TGVhc3QoXCJGMEZGRkZGRjJcIiksdCYmZS5zZXRBdExlYXN0KFwiMUYxRkZGRkZGXCIpKToxPT09biYmMT09PWkmJnQmJmUuc2V0QXRMZWFzdChcIjBGRkZGRkZGRlwiKX0sbGFiZWxJc29sYXRlZEVkZ2VzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuYXJnW3RdLmdldEVkZ2VJdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aS5pc0lzb2xhdGVkKCkmJih0aGlzLmxhYmVsSXNvbGF0ZWRFZGdlKGksZSx0aGlzLmFyZ1tlXS5nZXRHZW9tZXRyeSgpKSx0aGlzLmlzb2xhdGVkRWRnZXMuYWRkKGkpKX19LGxhYmVsSXNvbGF0ZWRFZGdlOmZ1bmN0aW9uKHQsZSxuKXswPG4uZ2V0RGltZW5zaW9uKCk/KG49dGhpcy5wdExvY2F0b3IubG9jYXRlKHQuZ2V0Q29vcmRpbmF0ZSgpLG4pLHQuZ2V0TGFiZWwoKS5zZXRBbGxMb2NhdGlvbnMoZSxuKSk6dC5nZXRMYWJlbCgpLnNldEFsbExvY2F0aW9ucyhlLEwuRVhURVJJT1IpfSxjb21wdXRlSU06ZnVuY3Rpb24oKXt2YXIgdD1uZXcgUXQ7aWYodC5zZXQoTC5FWFRFUklPUixMLkVYVEVSSU9SLDIpLCF0aGlzLmFyZ1swXS5nZXRHZW9tZXRyeSgpLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHRoaXMuYXJnWzFdLmdldEdlb21ldHJ5KCkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSlyZXR1cm4gdGhpcy5jb21wdXRlRGlzam9pbnRJTSh0KSx0O3RoaXMuYXJnWzBdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSwhMSksdGhpcy5hcmdbMV0uY29tcHV0ZVNlbGZOb2Rlcyh0aGlzLmxpLCExKTt2YXIgZT10aGlzLmFyZ1swXS5jb21wdXRlRWRnZUludGVyc2VjdGlvbnModGhpcy5hcmdbMV0sdGhpcy5saSwhMSk7dGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uTm9kZXMoMCksdGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uTm9kZXMoMSksdGhpcy5jb3B5Tm9kZXNBbmRMYWJlbHMoMCksdGhpcy5jb3B5Tm9kZXNBbmRMYWJlbHMoMSksdGhpcy5sYWJlbElzb2xhdGVkTm9kZXMoKSx0aGlzLmNvbXB1dGVQcm9wZXJJbnRlcnNlY3Rpb25JTShlLHQpO3ZhciBuPW5ldyBkcixlPW4uY29tcHV0ZUVkZ2VFbmRzKHRoaXMuYXJnWzBdLmdldEVkZ2VJdGVyYXRvcigpKTt0aGlzLmluc2VydEVkZ2VFbmRzKGUpO249bi5jb21wdXRlRWRnZUVuZHModGhpcy5hcmdbMV0uZ2V0RWRnZUl0ZXJhdG9yKCkpO3JldHVybiB0aGlzLmluc2VydEVkZ2VFbmRzKG4pLHRoaXMubGFiZWxOb2RlRWRnZXMoKSx0aGlzLmxhYmVsSXNvbGF0ZWRFZGdlcygwLDEpLHRoaXMubGFiZWxJc29sYXRlZEVkZ2VzKDEsMCksdGhpcy51cGRhdGVJTSh0KSx0fSxsYWJlbE5vZGVFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5vZGVzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt0Lm5leHQoKS5nZXRFZGdlcygpLmNvbXB1dGVMYWJlbGxpbmcodGhpcy5hcmcpfX0sY29weU5vZGVzQW5kTGFiZWxzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFyZ1t0XS5nZXROb2RlSXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMubm9kZXMuYWRkTm9kZShuLmdldENvb3JkaW5hdGUoKSkuc2V0TGFiZWwodCxuLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCkpfX0sbGFiZWxJbnRlcnNlY3Rpb25Ob2RlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5hcmdbdF0uZ2V0RWRnZUl0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KSxyPW4uZ2V0RWRnZUludGVyc2VjdGlvbkxpc3QoKS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHM9ci5uZXh0KCkscz10aGlzLm5vZGVzLmZpbmQocy5jb29yZCk7cy5nZXRMYWJlbCgpLmlzTnVsbCh0KSYmKGk9PT1MLkJPVU5EQVJZP3Muc2V0TGFiZWxCb3VuZGFyeSh0KTpzLnNldExhYmVsKHQsTC5JTlRFUklPUikpfX0sbGFiZWxJc29sYXRlZE5vZGU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnB0TG9jYXRvci5sb2NhdGUodC5nZXRDb29yZGluYXRlKCksdGhpcy5hcmdbZV0uZ2V0R2VvbWV0cnkoKSk7dC5nZXRMYWJlbCgpLnNldEFsbExvY2F0aW9ucyhlLG4pfSxjb21wdXRlSW50ZXJzZWN0aW9uTm9kZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuYXJnW3RdLmdldEVkZ2VJdGVyYXRvcigpO2UuaGFzTmV4dCgpOylmb3IodmFyIG49ZS5uZXh0KCksaT1uLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCkscj1uLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCkuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBzPXIubmV4dCgpLHM9dGhpcy5ub2Rlcy5hZGROb2RlKHMuY29vcmQpO2k9PT1MLkJPVU5EQVJZP3Muc2V0TGFiZWxCb3VuZGFyeSh0KTpzLmdldExhYmVsKCkuaXNOdWxsKHQpJiZzLnNldExhYmVsKHQsTC5JTlRFUklPUil9fSxsYWJlbElzb2xhdGVkTm9kZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ub2Rlcy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCksbj1lLmdldExhYmVsKCk7bC5pc1RydWUoMDxuLmdldEdlb21ldHJ5Q291bnQoKSxcIm5vZGUgd2l0aCBlbXB0eSBsYWJlbCBmb3VuZFwiKSxlLmlzSXNvbGF0ZWQoKSYmKG4uaXNOdWxsKDApP3RoaXMubGFiZWxJc29sYXRlZE5vZGUoZSwwKTp0aGlzLmxhYmVsSXNvbGF0ZWROb2RlKGUsMSkpfX0sdXBkYXRlSU06ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaXNvbGF0ZWRFZGdlcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkudXBkYXRlSU0odCl9Zm9yKHZhciBuPXRoaXMubm9kZXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kudXBkYXRlSU0odCksaS51cGRhdGVJTUZyb21FZGdlcyh0KX19LGNvbXB1dGVEaXNqb2ludElNOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYXJnWzBdLmdldEdlb21ldHJ5KCk7ZS5pc0VtcHR5KCl8fCh0LnNldChMLklOVEVSSU9SLEwuRVhURVJJT1IsZS5nZXREaW1lbnNpb24oKSksdC5zZXQoTC5CT1VOREFSWSxMLkVYVEVSSU9SLGUuZ2V0Qm91bmRhcnlEaW1lbnNpb24oKSkpO2U9dGhpcy5hcmdbMV0uZ2V0R2VvbWV0cnkoKTtlLmlzRW1wdHkoKXx8KHQuc2V0KEwuRVhURVJJT1IsTC5JTlRFUklPUixlLmdldERpbWVuc2lvbigpKSx0LnNldChMLkVYVEVSSU9SLEwuQk9VTkRBUlksZS5nZXRCb3VuZGFyeURpbWVuc2lvbigpKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHhyfX0pLGUoRXIucHJvdG90eXBlLHtpc0NvbnRhaW5lZEluQm91bmRhcnk6ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIFJ0KXJldHVybiExO2lmKHQgaW5zdGFuY2VvZiB3dClyZXR1cm4gdGhpcy5pc1BvaW50Q29udGFpbmVkSW5Cb3VuZGFyeSh0KTtpZih0IGluc3RhbmNlb2YgQ3QpcmV0dXJuIHRoaXMuaXNMaW5lU3RyaW5nQ29udGFpbmVkSW5Cb3VuZGFyeSh0KTtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7aWYoIXRoaXMuaXNDb250YWluZWRJbkJvdW5kYXJ5KG4pKXJldHVybiExfXJldHVybiEwfSxpc0xpbmVTZWdtZW50Q29udGFpbmVkSW5Cb3VuZGFyeTpmdW5jdGlvbih0LGUpe2lmKHQuZXF1YWxzKGUpKXJldHVybiB0aGlzLmlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5KHQpO2lmKHQueD09PWUueCl7aWYodC54PT09dGhpcy5yZWN0RW52LmdldE1pblgoKXx8dC54PT09dGhpcy5yZWN0RW52LmdldE1heFgoKSlyZXR1cm4hMH1lbHNlIGlmKHQueT09PWUueSYmKHQueT09PXRoaXMucmVjdEVudi5nZXRNaW5ZKCl8fHQueT09PXRoaXMucmVjdEVudi5nZXRNYXhZKCkpKXJldHVybiEwO3JldHVybiExfSxpc0xpbmVTdHJpbmdDb250YWluZWRJbkJvdW5kYXJ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLG49bmV3IGQsaT1uZXcgZCxyPTA7cjxlLnNpemUoKS0xO3IrKylpZihlLmdldENvb3JkaW5hdGUocixuKSxlLmdldENvb3JkaW5hdGUocisxLGkpLCF0aGlzLmlzTGluZVNlZ21lbnRDb250YWluZWRJbkJvdW5kYXJ5KG4saSkpcmV0dXJuITE7cmV0dXJuITB9LGlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5OmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB3dCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5KHQuZ2V0Q29vcmRpbmF0ZSgpKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQpe3Q9YXJndW1lbnRzWzBdO3JldHVybiB0Lng9PT10aGlzLnJlY3RFbnYuZ2V0TWluWCgpfHx0Lng9PT10aGlzLnJlY3RFbnYuZ2V0TWF4WCgpfHx0Lnk9PT10aGlzLnJlY3RFbnYuZ2V0TWluWSgpfHx0Lnk9PT10aGlzLnJlY3RFbnYuZ2V0TWF4WSgpfX0sY29udGFpbnM6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnJlY3RFbnYuY29udGFpbnModC5nZXRFbnZlbG9wZUludGVybmFsKCkpJiYhdGhpcy5pc0NvbnRhaW5lZEluQm91bmRhcnkodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEVyfX0pLEVyLmNvbnRhaW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBFcih0KS5jb250YWlucyhlKX0sZShJci5wcm90b3R5cGUse2ludGVyc2VjdHM6ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgQyh0LGUpO2lmKCF0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyhuKSlyZXR1cm4hMTtpZih0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyh0KSlyZXR1cm4hMDtpZih0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyhlKSlyZXR1cm4hMDswPHQuY29tcGFyZVRvKGUpJiYoaT10LHQ9ZSxlPWkpO3ZhciBpPSExO3JldHVybiBlLnk+dC55JiYoaT0hMCksaT90aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuZGlhZ0Rvd24wLHRoaXMuZGlhZ0Rvd24xKTp0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuZGlhZ1VwMCx0aGlzLmRpYWdVcDEpLCEhdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSXJ9fSksZShOci5wcm90b3R5cGUse2FwcGx5VG86ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmdldE51bUdlb21ldHJpZXMoKSYmIXRoaXMuX2lzRG9uZTtlKyspe3ZhciBuPXQuZ2V0R2VvbWV0cnlOKGUpO2lmKG4gaW5zdGFuY2VvZiBmdCl0aGlzLmFwcGx5VG8obik7ZWxzZSBpZih0aGlzLnZpc2l0KG4pLHRoaXMuaXNEb25lKCkpcmV0dXJuIHRoaXMuX2lzRG9uZT0hMCxudWxsfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTnJ9fSksZShDci5wcm90b3R5cGUse2ludGVyc2VjdHM6ZnVuY3Rpb24odCl7aWYoIXRoaXMucmVjdEVudi5pbnRlcnNlY3RzKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSlyZXR1cm4hMTt2YXIgZT1uZXcgU3IodGhpcy5yZWN0RW52KTtpZihlLmFwcGx5VG8odCksZS5pbnRlcnNlY3RzKCkpcmV0dXJuITA7ZT1uZXcgd3IodGhpcy5yZWN0YW5nbGUpO2lmKGUuYXBwbHlUbyh0KSxlLmNvbnRhaW5zUG9pbnQoKSlyZXR1cm4hMDtlPW5ldyBMcih0aGlzLnJlY3RhbmdsZSk7cmV0dXJuIGUuYXBwbHlUbyh0KSwhIWUuaW50ZXJzZWN0cygpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDcn19KSxDci5pbnRlcnNlY3RzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBDcih0KS5pbnRlcnNlY3RzKGUpfSxhKFNyLE5yKSxlKFNyLnByb3RvdHlwZSx7aXNEb25lOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLl9pbnRlcnNlY3RzfSx2aXNpdDpmdW5jdGlvbih0KXt0PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3JldHVybiB0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyh0KT90aGlzLnJlY3RFbnYuY29udGFpbnModCl8fHQuZ2V0TWluWCgpPj10aGlzLnJlY3RFbnYuZ2V0TWluWCgpJiZ0LmdldE1heFgoKTw9dGhpcy5yZWN0RW52LmdldE1heFgoKXx8dC5nZXRNaW5ZKCk+PXRoaXMucmVjdEVudi5nZXRNaW5ZKCkmJnQuZ2V0TWF4WSgpPD10aGlzLnJlY3RFbnYuZ2V0TWF4WSgpPyh0aGlzLl9pbnRlcnNlY3RzPSEwLG51bGwpOnZvaWQgMDpudWxsfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludGVyc2VjdHN9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFNyfX0pLGEod3IsTnIpLGUod3IucHJvdG90eXBlLHtpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuX2NvbnRhaW5zUG9pbnR9LHZpc2l0OmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIFJ0KSlyZXR1cm4gbnVsbDt2YXIgZT10LmdldEVudmVsb3BlSW50ZXJuYWwoKTtpZighdGhpcy5yZWN0RW52LmludGVyc2VjdHMoZSkpcmV0dXJuIG51bGw7Zm9yKHZhciBuPW5ldyBkLGk9MDtpPDQ7aSsrKWlmKHRoaXMucmVjdFNlcS5nZXRDb29yZGluYXRlKGksbiksZS5jb250YWlucyhuKSYmZ24uY29udGFpbnNQb2ludEluUG9seWdvbihuLHQpKXJldHVybiB0aGlzLl9jb250YWluc1BvaW50PSEwLG51bGx9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbnNQb2ludH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gd3J9fSksYShMcixOciksZShMci5wcm90b3R5cGUse2ludGVyc2VjdHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcnNlY3Rpb259LGlzRG9uZTpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5oYXNJbnRlcnNlY3Rpb259LHZpc2l0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO2lmKCF0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyhlKSlyZXR1cm4gbnVsbDt0PVJuLmdldExpbmVzKHQpO3RoaXMuY2hlY2tJbnRlcnNlY3Rpb25XaXRoTGluZVN0cmluZ3ModCl9LGNoZWNrSW50ZXJzZWN0aW9uV2l0aExpbmVTdHJpbmdzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtpZih0aGlzLmNoZWNrSW50ZXJzZWN0aW9uV2l0aFNlZ21lbnRzKG4pLHRoaXMuaGFzSW50ZXJzZWN0aW9uKXJldHVybiBudWxsfX0sY2hlY2tJbnRlcnNlY3Rpb25XaXRoU2VnbWVudHM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksbj0xO248ZS5zaXplKCk7bisrKWlmKGUuZ2V0Q29vcmRpbmF0ZShuLTEsdGhpcy5wMCksZS5nZXRDb29yZGluYXRlKG4sdGhpcy5wMSksdGhpcy5yZWN0SW50ZXJzZWN0b3IuaW50ZXJzZWN0cyh0aGlzLnAwLHRoaXMucDEpKXJldHVybiB0aGlzLmhhc0ludGVyc2VjdGlvbj0hMCxudWxsfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBMcn19KSxhKFJyLEJuKSxlKFJyLnByb3RvdHlwZSx7Z2V0SW50ZXJzZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbGF0ZS5jb21wdXRlSU0oKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUnJ9fSksUnIuY292ZXJzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0LmdldEVudmVsb3BlSW50ZXJuYWwoKS5jb3ZlcnMoZS5nZXRFbnZlbG9wZUludGVybmFsKCkpJiYoISF0LmlzUmVjdGFuZ2xlKCl8fFJyLnJlbGF0ZSh0LGUpLmlzQ292ZXJzKCkpfSxSci5pbnRlcnNlY3RzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0LmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSYmKHQuaXNSZWN0YW5nbGUoKT9Dci5pbnRlcnNlY3RzKHQsZSk6ZS5pc1JlY3RhbmdsZSgpP0NyLmludGVyc2VjdHMoZSx0KTpSci5yZWxhdGUodCxlKS5pc0ludGVyc2VjdHMoKSl9LFJyLnRvdWNoZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHMoZS5nZXRFbnZlbG9wZUludGVybmFsKCkpJiZSci5yZWxhdGUodCxlKS5pc1RvdWNoZXModC5nZXREaW1lbnNpb24oKSxlLmdldERpbWVuc2lvbigpKX0sUnIud2l0aGluPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuY29udGFpbnModCl9LFJyLmNvdmVyZWRCeT1mdW5jdGlvbih0LGUpe3JldHVybiBSci5jb3ZlcnMoZSx0KX0sUnIucmVsYXRlPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG5ldyBScihhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKS5nZXRJbnRlcnNlY3Rpb25NYXRyaXgoKTtpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEIpe3ZhciB0PWFyZ3VtZW50c1syXTtyZXR1cm4gUnIucmVsYXRlV2l0aENoZWNrKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pLm1hdGNoZXModCl9aWYoUihhcmd1bWVudHNbMl0sVikmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgQiYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBCKXJldHVybiBuZXcgUnIoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pLmdldEludGVyc2VjdGlvbk1hdHJpeCgpfX0sUnIub3ZlcmxhcHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHMoZS5nZXRFbnZlbG9wZUludGVybmFsKCkpJiZSci5yZWxhdGUodCxlKS5pc092ZXJsYXBzKHQuZ2V0RGltZW5zaW9uKCksZS5nZXREaW1lbnNpb24oKSl9LFJyLmRpc2pvaW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIXQuaW50ZXJzZWN0cyhlKX0sUnIucmVsYXRlV2l0aENoZWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksdC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbihlKSxSci5yZWxhdGUodCxlKX0sUnIuY3Jvc3Nlcz1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhlLmdldEVudmVsb3BlSW50ZXJuYWwoKSkmJlJyLnJlbGF0ZSh0LGUpLmlzQ3Jvc3Nlcyh0LmdldERpbWVuc2lvbigpLGUuZ2V0RGltZW5zaW9uKCkpfSxSci5jb250YWlucz1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5nZXRFbnZlbG9wZUludGVybmFsKCkuY29udGFpbnMoZS5nZXRFbnZlbG9wZUludGVybmFsKCkpJiYodC5pc1JlY3RhbmdsZSgpP0VyLmNvbnRhaW5zKHQsZSk6UnIucmVsYXRlKHQsZSkuaXNDb250YWlucygpKX07WXM9T2JqZWN0LmZyZWV6ZSh7UmVsYXRlT3A6UnJ9KTtlKFRyLnByb3RvdHlwZSx7ZXh0cmFjdEVsZW1lbnRzOmZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7Zm9yKHZhciBuPTA7bjx0LmdldE51bUdlb21ldHJpZXMoKTtuKyspe3ZhciBpPXQuZ2V0R2VvbWV0cnlOKG4pO3RoaXMuc2tpcEVtcHR5JiZpLmlzRW1wdHkoKXx8ZS5hZGQoaSl9fSxjb21iaW5lOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBJLGU9dGhpcy5pbnB1dEdlb21zLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLmV4dHJhY3RFbGVtZW50cyhuLHQpfXJldHVybiAwPT09dC5zaXplKCk/bnVsbCE9PXRoaXMuZ2VvbUZhY3Rvcnk/dGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCk6bnVsbDp0aGlzLmdlb21GYWN0b3J5LmJ1aWxkR2VvbWV0cnkodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFRyfX0pLFRyLmNvbWJpbmU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbmV3IFRyKGFyZ3VtZW50c1swXSkuY29tYmluZSgpO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIG5ldyBUcihUci5jcmVhdGVMaXN0KHQsZSkpLmNvbWJpbmUoKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLHQ9YXJndW1lbnRzWzFdLGU9YXJndW1lbnRzWzJdO3JldHVybiBuZXcgVHIoVHIuY3JlYXRlTGlzdChuLHQsZSkpLmNvbWJpbmUoKX19LFRyLmV4dHJhY3RGYWN0b3J5PWZ1bmN0aW9uKHQpe3JldHVybiB0LmlzRW1wdHkoKT9udWxsOnQuaXRlcmF0b3IoKS5uZXh0KCkuZ2V0RmFjdG9yeSgpfSxUci5jcmVhdGVMaXN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4obj1uZXcgSSkuYWRkKHQpLG4uYWRkKGUpLG59aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuLGk9YXJndW1lbnRzWzBdLHQ9YXJndW1lbnRzWzFdLGU9YXJndW1lbnRzWzJdO3JldHVybihuPW5ldyBJKS5hZGQoaSksbi5hZGQodCksbi5hZGQoZSksbn19LGUoUHIucHJvdG90eXBlLHt1bmlvbjpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgZGUsZT1uZXcgYXQsbj0wO248dGhpcy5wb2ludEdlb20uZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dGhpcy5wb2ludEdlb20uZ2V0R2VvbWV0cnlOKG4pLmdldENvb3JkaW5hdGUoKTt0LmxvY2F0ZShpLHRoaXMub3RoZXJHZW9tKT09PUwuRVhURVJJT1ImJmUuYWRkKGkpfWlmKDA9PT1lLnNpemUoKSlyZXR1cm4gdGhpcy5vdGhlckdlb207dmFyIHI9SC50b0Nvb3JkaW5hdGVBcnJheShlKSxzPTE9PT1yLmxlbmd0aD90aGlzLmdlb21GYWN0LmNyZWF0ZVBvaW50KHJbMF0pOnRoaXMuZ2VvbUZhY3QuY3JlYXRlTXVsdGlQb2ludEZyb21Db29yZHMocik7cmV0dXJuIFRyLmNvbWJpbmUocyx0aGlzLm90aGVyR2VvbSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFByfX0pLFByLnVuaW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBQcih0LGUpLnVuaW9uKCl9LGUoYnIucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7LTEhPT10aGlzLnNvcnRJbmRleCYmdC5nZXRTb3J0SW5kZXgoKSE9PXRoaXMuc29ydEluZGV4fHx0aGlzLmNvbXBzLmFkZCh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5baHRdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBicn19KSxici5leHRyYWN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGJyLmV4dHJhY3QoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxuZXcgSSk7aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gdC5nZXRTb3J0SW5kZXgoKT09PWU/bi5hZGQodCk6dCBpbnN0YW5jZW9mIGZ0JiZ0LmFwcGx5KG5ldyBicihlLG4pKSxufX0sZShPci5wcm90b3R5cGUse3JlZHVjZVRvR2VvbWV0cmllczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEksbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPW51bGw7UihpLHYpP3I9dGhpcy51bmlvblRyZWUoaSk6aSBpbnN0YW5jZW9mIEImJihyPWkpLGUuYWRkKHIpfXJldHVybiBlfSxleHRyYWN0QnlFbnZlbG9wZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPW5ldyBJLHI9MDtyPGUuZ2V0TnVtR2VvbWV0cmllcygpO3IrKyl7dmFyIHM9ZS5nZXRHZW9tZXRyeU4ocik7KHMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHModCk/aTpuKS5hZGQocyl9cmV0dXJuIHRoaXMuZ2VvbUZhY3RvcnkuYnVpbGRHZW9tZXRyeShpKX0sdW5pb25PcHRpbWl6ZWQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldEVudmVsb3BlSW50ZXJuYWwoKSxpPWUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO2lmKCFuLmludGVyc2VjdHMoaSkpcmV0dXJuIFRyLmNvbWJpbmUodCxlKTtpZih0LmdldE51bUdlb21ldHJpZXMoKTw9MSYmZS5nZXROdW1HZW9tZXRyaWVzKCk8PTEpcmV0dXJuIHRoaXMudW5pb25BY3R1YWwodCxlKTtpPW4uaW50ZXJzZWN0aW9uKGkpO3JldHVybiB0aGlzLnVuaW9uVXNpbmdFbnZlbG9wZUludGVyc2VjdGlvbih0LGUsaSl9LHVuaW9uOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuaW5wdXRQb2x5cyl0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwidW5pb24oKSBtZXRob2QgY2Fubm90IGJlIGNhbGxlZCB0d2ljZVwiKTtpZih0aGlzLmlucHV0UG9seXMuaXNFbXB0eSgpKXJldHVybiBudWxsO3RoaXMuZ2VvbUZhY3Rvcnk9dGhpcy5pbnB1dFBvbHlzLml0ZXJhdG9yKCkubmV4dCgpLmdldEZhY3RvcnkoKTtmb3IodmFyIHQ9bmV3IFJlKE9yLlNUUlRSRUVfTk9ERV9DQVBBQ0lUWSksZT10aGlzLmlucHV0UG9seXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3QuaW5zZXJ0KG4uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLG4pfXRoaXMuaW5wdXRQb2x5cz1udWxsO3ZhciBpPXQuaXRlbXNUcmVlKCk7cmV0dXJuIHRoaXMudW5pb25UcmVlKGkpfSxiaW5hcnlVbmlvbjpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuYmluYXJ5VW5pb24odCwwLHQuc2l6ZSgpKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdO2lmKGktbjw9MSl7dmFyIHI9T3IuZ2V0R2VvbWV0cnkoZSxuKTtyZXR1cm4gdGhpcy51bmlvblNhZmUocixudWxsKX1pZihpLW49PTIpcmV0dXJuIHRoaXMudW5pb25TYWZlKE9yLmdldEdlb21ldHJ5KGUsbiksT3IuZ2V0R2VvbWV0cnkoZSxuKzEpKTt0PU1hdGgudHJ1bmMoKGkrbikvMikscj10aGlzLmJpbmFyeVVuaW9uKGUsbix0KSxpPXRoaXMuYmluYXJ5VW5pb24oZSx0LGkpO3JldHVybiB0aGlzLnVuaW9uU2FmZShyLGkpfX0scmVwZWF0ZWRVbmlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspdmFyIGk9bi5uZXh0KCksZT1udWxsPT09ZT9pLmNvcHkoKTplLnVuaW9uKGkpO3JldHVybiBlfSx1bmlvblNhZmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09PXQmJm51bGw9PT1lP251bGw6bnVsbD09PXQ/ZS5jb3B5KCk6bnVsbD09PWU/dC5jb3B5KCk6dGhpcy51bmlvbk9wdGltaXplZCh0LGUpfSx1bmlvbkFjdHVhbDpmdW5jdGlvbih0LGUpe3JldHVybiBPci5yZXN0cmljdFRvUG9seWdvbnModC51bmlvbihlKSl9LHVuaW9uVHJlZTpmdW5jdGlvbih0KXt0PXRoaXMucmVkdWNlVG9HZW9tZXRyaWVzKHQpO3JldHVybiB0aGlzLmJpbmFyeVVuaW9uKHQpfSx1bmlvblVzaW5nRW52ZWxvcGVJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBJLHQ9dGhpcy5leHRyYWN0QnlFbnZlbG9wZShuLHQsaSksZT10aGlzLmV4dHJhY3RCeUVudmVsb3BlKG4sZSxpKSxlPXRoaXMudW5pb25BY3R1YWwodCxlKTtyZXR1cm4gaS5hZGQoZSksVHIuY29tYmluZShpKX0sYnVmZmVyVW5pb246ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0LmdldCgwKS5nZXRGYWN0b3J5KCkuYnVpbGRHZW9tZXRyeSh0KS5idWZmZXIoMCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXTtyZXR1cm4gZS5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKFtlLHRdKS5idWZmZXIoMCl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPcn19KSxPci5yZXN0cmljdFRvUG9seWdvbnM9ZnVuY3Rpb24odCl7aWYoUih0LEx0KSlyZXR1cm4gdDt2YXIgZT1VaS5nZXRQb2x5Z29ucyh0KTtyZXR1cm4gMT09PWUuc2l6ZSgpP2UuZ2V0KDApOnQuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpUG9seWdvbihZdC50b1BvbHlnb25BcnJheShlKSl9LE9yLmdldEdlb21ldHJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU+PXQuc2l6ZSgpP251bGw6dC5nZXQoZSl9LE9yLnVuaW9uPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgT3IodCkudW5pb24oKX0sT3IuU1RSVFJFRV9OT0RFX0NBUEFDSVRZPTQsZShfci5wcm90b3R5cGUse3VuaW9uTm9PcHQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZW9tRmFjdC5jcmVhdGVQb2ludCgpO3JldHVybiBVbi5vdmVybGF5T3AodCxlLGtuLlVOSU9OKX0sdW5pb25XaXRoTnVsbDpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT09dCYmbnVsbD09PWU/bnVsbDpudWxsPT09ZT90Om51bGw9PT10P2U6dC51bmlvbihlKX0sZXh0cmFjdDpmdW5jdGlvbigpe3ZhciB0O2lmKFIoYXJndW1lbnRzWzBdLG0pKWZvcih2YXIgZT1hcmd1bWVudHNbMF0uaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuZXh0cmFjdChuKX1lbHNlIGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQiYmKHQ9YXJndW1lbnRzWzBdLG51bGw9PT10aGlzLmdlb21GYWN0JiYodGhpcy5nZW9tRmFjdD10LmdldEZhY3RvcnkoKSksYnIuZXh0cmFjdCh0LEIuU09SVElOREVYX1BPTFlHT04sdGhpcy5wb2x5Z29ucyksYnIuZXh0cmFjdCh0LEIuU09SVElOREVYX0xJTkVTVFJJTkcsdGhpcy5saW5lcyksYnIuZXh0cmFjdCh0LEIuU09SVElOREVYX1BPSU5ULHRoaXMucG9pbnRzKSl9LHVuaW9uOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuZ2VvbUZhY3QpcmV0dXJuIG51bGw7dmFyIHQ9bnVsbDswPHRoaXMucG9pbnRzLnNpemUoKSYmKGU9dGhpcy5nZW9tRmFjdC5idWlsZEdlb21ldHJ5KHRoaXMucG9pbnRzKSx0PXRoaXMudW5pb25Ob09wdChlKSk7dmFyIGU9bnVsbDswPHRoaXMubGluZXMuc2l6ZSgpJiYobj10aGlzLmdlb21GYWN0LmJ1aWxkR2VvbWV0cnkodGhpcy5saW5lcyksZT10aGlzLnVuaW9uTm9PcHQobikpO3ZhciBuPW51bGw7MDx0aGlzLnBvbHlnb25zLnNpemUoKSYmKG49T3IudW5pb24odGhpcy5wb2x5Z29ucykpO3ZhciBuPXRoaXMudW5pb25XaXRoTnVsbChlLG4pLGk9bnVsbDtyZXR1cm4gaT1udWxsPT09dD9uOm51bGw9PT1uP3Q6UHIudW5pb24odCxuKSxudWxsPT09aT90aGlzLmdlb21GYWN0LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbigpOml9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIF9yfX0pLF9yLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP1IoYXJndW1lbnRzWzBdLG0pfHxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEI/bmV3IF9yKGFyZ3VtZW50c1swXSkudW5pb24oKTp2b2lkIDA6Mj09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IF9yKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pLnVuaW9uKCk6dm9pZCAwfTt0bz1PYmplY3QuZnJlZXplKHtVbmFyeVVuaW9uT3A6X3J9KTtlKE1yLnByb3RvdHlwZSx7dmlzaXRJbnRlcmlvclJpbmc6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldENvb3JkaW5hdGVzKCksdD1uWzBdLG49TXIuZmluZERpZmZlcmVudFBvaW50KG4sdCksbj1lLmZpbmRFZGdlSW5TYW1lRGlyZWN0aW9uKHQsbiksZT1lLmZpbmRFZGdlRW5kKG4pLG49bnVsbDtlLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxLZS5SSUdIVCk9PT1MLklOVEVSSU9SP249ZTplLmdldFN5bSgpLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxLZS5SSUdIVCk9PT1MLklOVEVSSU9SJiYobj1lLmdldFN5bSgpKSxsLmlzVHJ1ZShudWxsIT09bixcInVuYWJsZSB0byBmaW5kIGRpckVkZ2Ugd2l0aCBJbnRlcmlvciBvbiBSSFNcIiksdGhpcy52aXNpdExpbmtlZERpcmVjdGVkRWRnZXMobil9LHZpc2l0U2hlbGxJbnRlcmlvcnM6ZnVuY3Rpb24odCxlKXtpZih0IGluc3RhbmNlb2YgUnQmJihyPXQsdGhpcy52aXNpdEludGVyaW9yUmluZyhyLmdldEV4dGVyaW9yUmluZygpLGUpKSx0IGluc3RhbmNlb2YgYnQpZm9yKHZhciBuPXQsaT0wO2k8bi5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj1uLmdldEdlb21ldHJ5TihpKTt0aGlzLnZpc2l0SW50ZXJpb3JSaW5nKHIuZ2V0RXh0ZXJpb3JSaW5nKCksZSl9fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzY29ubmVjdGVkUmluZ2Nvb3JkfSxzZXRJbnRlcmlvckVkZ2VzSW5SZXN1bHQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5nZXRMYWJlbCgpLmdldExvY2F0aW9uKDAsS2UuUklHSFQpPT09TC5JTlRFUklPUiYmbi5zZXRJblJlc3VsdCghMCl9fSx2aXNpdExpbmtlZERpcmVjdGVkRWRnZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQsbj10O2wuaXNUcnVlKG51bGwhPT1uLFwiZm91bmQgbnVsbCBEaXJlY3RlZCBFZGdlXCIpLG4uc2V0VmlzaXRlZCghMCksKG49bi5nZXROZXh0KCkpIT09ZTspO30sYnVpbGRFZGdlUmluZ3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJLG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aS5pc0luUmVzdWx0KCkmJm51bGw9PT1pLmdldEVkZ2VSaW5nKCkmJigoaT1uZXcgdG4oaSx0aGlzLmdlb21ldHJ5RmFjdG9yeSkpLmxpbmtEaXJlY3RlZEVkZ2VzRm9yTWluaW1hbEVkZ2VSaW5ncygpLGk9aS5idWlsZE1pbmltYWxSaW5ncygpLGUuYWRkQWxsKGkpKX1yZXR1cm4gZX0saGFzVW52aXNpdGVkU2hlbGxFZGdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5zaXplKCk7ZSsrKXt2YXIgbj10LmdldChlKTtpZighbi5pc0hvbGUoKSl7dmFyIGk9bi5nZXRFZGdlcygpLHI9aS5nZXQoMCk7aWYoci5nZXRMYWJlbCgpLmdldExvY2F0aW9uKDAsS2UuUklHSFQpPT09TC5JTlRFUklPUilmb3IodmFyIHM9MDtzPGkuc2l6ZSgpO3MrKylpZighKHI9aS5nZXQocykpLmlzVmlzaXRlZCgpKXJldHVybiB0aGlzLmRpc2Nvbm5lY3RlZFJpbmdjb29yZD1yLmdldENvb3JkaW5hdGUoKSwhMH19cmV0dXJuITF9LGlzSW50ZXJpb3JzQ29ubmVjdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEk7dGhpcy5nZW9tR3JhcGguY29tcHV0ZVNwbGl0RWRnZXModCk7dmFyIGU9bmV3IHVuKG5ldyBtbik7ZS5hZGRFZGdlcyh0KSx0aGlzLnNldEludGVyaW9yRWRnZXNJblJlc3VsdChlKSxlLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCk7dD10aGlzLmJ1aWxkRWRnZVJpbmdzKGUuZ2V0RWRnZUVuZHMoKSk7cmV0dXJuIHRoaXMudmlzaXRTaGVsbEludGVyaW9ycyh0aGlzLmdlb21HcmFwaC5nZXRHZW9tZXRyeSgpLGUpLCF0aGlzLmhhc1VudmlzaXRlZFNoZWxsRWRnZSh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTXJ9fSksTXIuZmluZERpZmZlcmVudFBvaW50PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXF1YWxzKGUpKXJldHVybiB0W25dO3JldHVybiBudWxsfSxlKERyLnByb3RvdHlwZSx7aGFzQ2hpbGRyZW46ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PDI7dCsrKWlmKG51bGwhPT10aGlzLnN1Ym5vZGVbdF0pcmV0dXJuITA7cmV0dXJuITF9LGlzUHJ1bmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuaGFzQ2hpbGRyZW4oKXx8dGhpcy5oYXNJdGVtcygpKX0sYWRkQWxsSXRlbXM6ZnVuY3Rpb24odCl7dC5hZGRBbGwodGhpcy5pdGVtcyk7Zm9yKHZhciBlPTA7ZTwyO2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiZ0aGlzLnN1Ym5vZGVbZV0uYWRkQWxsSXRlbXModCk7cmV0dXJuIHR9LHNpemU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTwyO2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiYodCs9dGhpcy5zdWJub2RlW2VdLnNpemUoKSk7cmV0dXJuIHQrdGhpcy5pdGVtcy5zaXplKCl9LGFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PT10fHx0aGlzLmlzU2VhcmNoTWF0Y2godCk/KGUuYWRkQWxsKHRoaXMuaXRlbXMpLG51bGwhPT10aGlzLnN1Ym5vZGVbMF0mJnRoaXMuc3Vibm9kZVswXS5hZGRBbGxJdGVtc0Zyb21PdmVybGFwcGluZyh0LGUpLHZvaWQobnVsbCE9PXRoaXMuc3Vibm9kZVsxXSYmdGhpcy5zdWJub2RlWzFdLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKHQsZSkpKTpudWxsfSxoYXNJdGVtczpmdW5jdGlvbigpe3JldHVybiF0aGlzLml0ZW1zLmlzRW1wdHkoKX0scmVtb3ZlOmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaCh0KSlyZXR1cm4hMTtmb3IodmFyIG49ITEsaT0wO2k8MjtpKyspaWYobnVsbCE9PXRoaXMuc3Vibm9kZVtpXSYmKG49dGhpcy5zdWJub2RlW2ldLnJlbW92ZSh0LGUpKSl7dGhpcy5zdWJub2RlW2ldLmlzUHJ1bmFibGUoKSYmKHRoaXMuc3Vibm9kZVtpXT1udWxsKTticmVha31yZXR1cm4gbj1ufHx0aGlzLml0ZW1zLnJlbW92ZShlKX0sZ2V0SXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtc30sZGVwdGg6ZnVuY3Rpb24oKXtmb3IodmFyIHQsZT0wLG49MDtuPDI7bisrKXtudWxsPT09dGhpcy5zdWJub2RlW25dfHxlPCh0PXRoaXMuc3Vibm9kZVtuXS5kZXB0aCgpKSYmKGU9dCl9cmV0dXJuIGUrMX0sbm9kZVNpemU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTwyO2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiYodCs9dGhpcy5zdWJub2RlW2VdLm5vZGVTaXplKCkpO3JldHVybiB0KzF9LGFkZDpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZCh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRHJ9fSksRHIuZ2V0U3Vibm9kZUluZGV4PWZ1bmN0aW9uKHQsZSl7dmFyIG49LTE7cmV0dXJuIHQubWluPj1lJiYobj0xKSx0Lm1heDw9ZSYmKG49MCksbn0sZShBci5wcm90b3R5cGUse2V4cGFuZFRvSW5jbHVkZTpmdW5jdGlvbih0KXt0Lm1heD50aGlzLm1heCYmKHRoaXMubWF4PXQubWF4KSx0Lm1pbjx0aGlzLm1pbiYmKHRoaXMubWluPXQubWluKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgtdGhpcy5taW59LG92ZXJsYXBzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5vdmVybGFwcyh0Lm1pbix0Lm1heCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXTtyZXR1cm4hKHRoaXMubWluPnR8fHRoaXMubWF4PGUpfX0sZ2V0TWluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWlufSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiW1wiK3RoaXMubWluK1wiLCBcIit0aGlzLm1heCtcIl1cIn0sY29udGFpbnM6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcil7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNvbnRhaW5zKHQubWluLHQubWF4KX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIGU+PXRoaXMubWluJiZlPD10aGlzLm1heH19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7ZT1hcmd1bWVudHNbMV07cmV0dXJuIGFyZ3VtZW50c1swXT49dGhpcy5taW4mJmU8PXRoaXMubWF4fX0saW5pdDpmdW5jdGlvbih0LGUpe3RoaXMubWluPXQsKHRoaXMubWF4PWUpPHQmJih0aGlzLm1pbj1lLHRoaXMubWF4PXQpfSxnZXRNYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEFyfX0pLGUoRnIucHJvdG90eXBlLHtnZXRJbnRlcnZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVydmFsfSxnZXRMZXZlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxldmVsfSxjb21wdXRlS2V5OmZ1bmN0aW9uKHQpe2Zvcih0aGlzLmxldmVsPUZyLmNvbXB1dGVMZXZlbCh0KSx0aGlzLmludGVydmFsPW5ldyBBcix0aGlzLmNvbXB1dGVJbnRlcnZhbCh0aGlzLmxldmVsLHQpOyF0aGlzLmludGVydmFsLmNvbnRhaW5zKHQpOyl0aGlzLmxldmVsKz0xLHRoaXMuY29tcHV0ZUludGVydmFsKHRoaXMubGV2ZWwsdCl9LGNvbXB1dGVJbnRlcnZhbDpmdW5jdGlvbih0LGUpe3Q9dWkucG93ZXJPZjIodCk7dGhpcy5wdD1NYXRoLmZsb29yKGUuZ2V0TWluKCkvdCkqdCx0aGlzLmludGVydmFsLmluaXQodGhpcy5wdCx0aGlzLnB0K3QpfSxnZXRQb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBGcn19KSxGci5jb21wdXRlTGV2ZWw9ZnVuY3Rpb24odCl7dD10LmdldFdpZHRoKCk7cmV0dXJuIHVpLmV4cG9uZW50KHQpKzF9LGEoR3IsRHIpLGUoR3IucHJvdG90eXBlLHtnZXRJbnRlcnZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVydmFsfSxmaW5kOmZ1bmN0aW9uKHQpe3ZhciBlPURyLmdldFN1Ym5vZGVJbmRleCh0LHRoaXMuY2VudHJlKTtyZXR1cm4tMT09PWV8fG51bGw9PT10aGlzLnN1Ym5vZGVbZV0/dGhpczp0aGlzLnN1Ym5vZGVbZV0uZmluZCh0KX0saW5zZXJ0OmZ1bmN0aW9uKHQpe2wuaXNUcnVlKG51bGw9PT10aGlzLmludGVydmFsfHx0aGlzLmludGVydmFsLmNvbnRhaW5zKHQuaW50ZXJ2YWwpKTt2YXIgZSxuPURyLmdldFN1Ym5vZGVJbmRleCh0LmludGVydmFsLHRoaXMuY2VudHJlKTt0LmxldmVsPT09dGhpcy5sZXZlbC0xP3RoaXMuc3Vibm9kZVtuXT10OigoZT10aGlzLmNyZWF0ZVN1Ym5vZGUobikpLmluc2VydCh0KSx0aGlzLnN1Ym5vZGVbbl09ZSl9LGlzU2VhcmNoTWF0Y2g6ZnVuY3Rpb24odCl7cmV0dXJuIHQub3ZlcmxhcHModGhpcy5pbnRlcnZhbCl9LGdldFN1Ym5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10aGlzLnN1Ym5vZGVbdF0mJih0aGlzLnN1Ym5vZGVbdF09dGhpcy5jcmVhdGVTdWJub2RlKHQpKSx0aGlzLnN1Ym5vZGVbdF19LGdldE5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9RHIuZ2V0U3Vibm9kZUluZGV4KHQsdGhpcy5jZW50cmUpO3JldHVybi0xPT09ZT90aGlzOnRoaXMuZ2V0U3Vibm9kZShlKS5nZXROb2RlKHQpfSxjcmVhdGVTdWJub2RlOmZ1bmN0aW9uKHQpe3ZhciBlPTAsbj0wO3N3aXRjaCh0KXtjYXNlIDA6ZT10aGlzLmludGVydmFsLmdldE1pbigpLG49dGhpcy5jZW50cmU7YnJlYWs7Y2FzZSAxOmU9dGhpcy5jZW50cmUsbj10aGlzLmludGVydmFsLmdldE1heCgpfXJldHVybiBuZXcgR3IobmV3IEFyKGUsbiksdGhpcy5sZXZlbC0xKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gR3J9fSksR3IuY3JlYXRlTm9kZT1mdW5jdGlvbih0KXt0PW5ldyBGcih0KTtyZXR1cm4gbmV3IEdyKHQuZ2V0SW50ZXJ2YWwoKSx0LmdldExldmVsKCkpfSxHci5jcmVhdGVFeHBhbmRlZD1mdW5jdGlvbih0LGUpe2U9bmV3IEFyKGUpO251bGwhPT10JiZlLmV4cGFuZFRvSW5jbHVkZSh0LmludGVydmFsKTtlPUdyLmNyZWF0ZU5vZGUoZSk7cmV0dXJuIG51bGwhPT10JiZlLmluc2VydCh0KSxlfSxhKHFyLERyKSxlKHFyLnByb3RvdHlwZSx7aW5zZXJ0OmZ1bmN0aW9uKHQsZSl7dmFyIG49RHIuZ2V0U3Vibm9kZUluZGV4KHQscXIub3JpZ2luKTtpZigtMT09PW4pcmV0dXJuIHRoaXMuYWRkKGUpLG51bGw7dmFyIGk9dGhpcy5zdWJub2RlW25dO251bGwhPT1pJiZpLmdldEludGVydmFsKCkuY29udGFpbnModCl8fChpPUdyLmNyZWF0ZUV4cGFuZGVkKGksdCksdGhpcy5zdWJub2RlW25dPWkpLHRoaXMuaW5zZXJ0Q29udGFpbmVkKHRoaXMuc3Vibm9kZVtuXSx0LGUpfSxpc1NlYXJjaE1hdGNoOmZ1bmN0aW9uKHQpe3JldHVybiEwfSxpbnNlcnRDb250YWluZWQ6ZnVuY3Rpb24odCxlLG4pe2wuaXNUcnVlKHQuZ2V0SW50ZXJ2YWwoKS5jb250YWlucyhlKSk7KGNpLmlzWmVyb1dpZHRoKGUuZ2V0TWluKCksZS5nZXRNYXgoKSk/dC5maW5kKGUpOnQuZ2V0Tm9kZShlKSkuYWRkKG4pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBxcn19KSxxci5vcmlnaW49MCxlKEJyLnByb3RvdHlwZSx7c2l6ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5yb290P3RoaXMucm9vdC5zaXplKCk6MH0saW5zZXJ0OmZ1bmN0aW9uKHQsZSl7dGhpcy5jb2xsZWN0U3RhdHModCk7dD1Cci5lbnN1cmVFeHRlbnQodCx0aGlzLm1pbkV4dGVudCk7dGhpcy5yb290Lmluc2VydCh0LGUpfSxxdWVyeTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMucXVlcnkobmV3IEFyKHQsdCkpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXIpe3ZhciBlPWFyZ3VtZW50c1swXSxuPW5ldyBJO3JldHVybiB0aGlzLnF1ZXJ5KGUsbiksbn19ZWxzZXsyPT09YXJndW1lbnRzLmxlbmd0aCYmKGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLHRoaXMucm9vdC5hZGRBbGxJdGVtc0Zyb21PdmVybGFwcGluZyhlLG4pKX19LGl0ZXJhdG9yOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEk7cmV0dXJuIHRoaXMucm9vdC5hZGRBbGxJdGVtcyh0KSx0Lml0ZXJhdG9yKCl9LHJlbW92ZTpmdW5jdGlvbih0LGUpe3Q9QnIuZW5zdXJlRXh0ZW50KHQsdGhpcy5taW5FeHRlbnQpO3JldHVybiB0aGlzLnJvb3QucmVtb3ZlKHQsZSl9LGNvbGxlY3RTdGF0czpmdW5jdGlvbih0KXt0PXQuZ2V0V2lkdGgoKTt0PHRoaXMubWluRXh0ZW50JiYwPHQmJih0aGlzLm1pbkV4dGVudD10KX0sZGVwdGg6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucm9vdD90aGlzLnJvb3QuZGVwdGgoKTowfSxub2RlU2l6ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5yb290P3RoaXMucm9vdC5ub2RlU2l6ZSgpOjB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEJyfX0pLEJyLmVuc3VyZUV4dGVudD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TWluKCksaT10LmdldE1heCgpO3JldHVybiBuIT09aT90OihuPT09aSYmKGk9KG4tPWUvMikrZS8yKSxuZXcgQXIobixpKSl9LGUoenIucHJvdG90eXBlLHtpc0luc2lkZTpmdW5jdGlvbih0KXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHpyfX0pLGUoVnIucHJvdG90eXBlLHt0ZXN0TGluZVNlZ21lbnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLnAwLGU9ZS5wMSxpPW4ueC10Lngscj1uLnktdC55LHM9ZS54LXQueCxvPWUueS10Lnk7ISgwPHImJm88PTB8fDA8byYmcjw9MCl8fDA8anQuc2lnbk9mRGV0MngyKGkscixzLG8pLyhvLXIpJiZ0aGlzLmNyb3NzaW5ncysrfSxidWlsZEluZGV4OmZ1bmN0aW9uKCl7dGhpcy50cmVlPW5ldyBCcjtmb3IodmFyIHQ9SC5yZW1vdmVSZXBlYXRlZFBvaW50cyh0aGlzLnJpbmcuZ2V0Q29vcmRpbmF0ZXMoKSksZT1xZS5nZXRDaGFpbnModCksbj0wO248ZS5zaXplKCk7bisrKXt2YXIgaT1lLmdldChuKSxyPWkuZ2V0RW52ZWxvcGUoKTt0aGlzLmludGVydmFsLm1pbj1yLmdldE1pblkoKSx0aGlzLmludGVydmFsLm1heD1yLmdldE1heFkoKSx0aGlzLnRyZWUuaW5zZXJ0KHRoaXMuaW50ZXJ2YWwsaSl9fSx0ZXN0TW9ub3RvbmVDaGFpbjpmdW5jdGlvbih0LGUsbil7bi5zZWxlY3QodCxlKX0saXNJbnNpZGU6ZnVuY3Rpb24odCl7dGhpcy5jcm9zc2luZ3M9MDt2YXIgZT1uZXcgQyhnLk5FR0FUSVZFX0lORklOSVRZLGcuUE9TSVRJVkVfSU5GSU5JVFksdC55LHQueSk7dGhpcy5pbnRlcnZhbC5taW49dC55LHRoaXMuaW50ZXJ2YWwubWF4PXQueTtmb3IodmFyIG49dGhpcy50cmVlLnF1ZXJ5KHRoaXMuaW50ZXJ2YWwpLGk9bmV3IGtyKHRoaXMsdCkscj1uLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1yLm5leHQoKTt0aGlzLnRlc3RNb25vdG9uZUNoYWluKGUsaSxzKX1yZXR1cm4gdGhpcy5jcm9zc2luZ3MlMj09MX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5benJdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBWcn19KSxhKGtyLHFpKSxlKGtyLnByb3RvdHlwZSx7c2VsZWN0OmZ1bmN0aW9uKCl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHFpLnByb3RvdHlwZS5zZWxlY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm1jcC50ZXN0TGluZVNlZ21lbnQodGhpcy5wLHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBrcn19KSxWci5NQ1NlbGVjdGVyPWtyLGUoWXIucHJvdG90eXBlLHtpbnNlcnRFZGdlRW5kczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5ub2Rlcy5hZGQobil9fSxnZXROb2RlSXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy5pdGVyYXRvcigpfSxjb3B5Tm9kZXNBbmRMYWJlbHM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5nZXROb2RlSXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO3RoaXMubm9kZXMuYWRkTm9kZShpLmdldENvb3JkaW5hdGUoKSkuc2V0TGFiZWwoZSxpLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oZSkpfX0sYnVpbGQ6ZnVuY3Rpb24odCl7dGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uTm9kZXModCwwKSx0aGlzLmNvcHlOb2Rlc0FuZExhYmVscyh0LDApO3Q9KG5ldyBkcikuY29tcHV0ZUVkZ2VFbmRzKHQuZ2V0RWRnZUl0ZXJhdG9yKCkpO3RoaXMuaW5zZXJ0RWRnZUVuZHModCl9LGNvbXB1dGVJbnRlcnNlY3Rpb25Ob2RlczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmdldEVkZ2VJdGVyYXRvcigpO24uaGFzTmV4dCgpOylmb3IodmFyIGk9bi5uZXh0KCkscj1pLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oZSkscz1pLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCkuaXRlcmF0b3IoKTtzLmhhc05leHQoKTspe3ZhciBvPXMubmV4dCgpLG89dGhpcy5ub2Rlcy5hZGROb2RlKG8uY29vcmQpO3I9PT1MLkJPVU5EQVJZP28uc2V0TGFiZWxCb3VuZGFyeShlKTpvLmdldExhYmVsKCkuaXNOdWxsKGUpJiZvLnNldExhYmVsKGUsTC5JTlRFUklPUil9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBZcn19KSxlKFVyLnByb3RvdHlwZSx7aXNOb2RlRWRnZUFyZWFMYWJlbHNDb25zaXN0ZW50OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubm9kZUdyYXBoLmdldE5vZGVJdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7aWYoIWUuZ2V0RWRnZXMoKS5pc0FyZWFMYWJlbHNDb25zaXN0ZW50KHRoaXMuZ2VvbUdyYXBoKSlyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnQ9ZS5nZXRDb29yZGluYXRlKCkuY29weSgpLCExfXJldHVybiEwfSxnZXRJbnZhbGlkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnR9LGhhc0R1cGxpY2F0ZVJpbmdzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubm9kZUdyYXBoLmdldE5vZGVJdGVyYXRvcigpO3QuaGFzTmV4dCgpOylmb3IodmFyIGU9dC5uZXh0KCkuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7aWYoMTxuLmdldEVkZ2VFbmRzKCkuc2l6ZSgpKXJldHVybiB0aGlzLmludmFsaWRQb2ludD1uLmdldEVkZ2UoKS5nZXRDb29yZGluYXRlKDApLCEwfXJldHVybiExfSxpc05vZGVDb25zaXN0ZW50QXJlYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2VvbUdyYXBoLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSwhMCwhMCk7cmV0dXJuIHQuaGFzUHJvcGVySW50ZXJzZWN0aW9uKCk/KHRoaXMuaW52YWxpZFBvaW50PXQuZ2V0UHJvcGVySW50ZXJzZWN0aW9uUG9pbnQoKSwhMSk6KHRoaXMubm9kZUdyYXBoLmJ1aWxkKHRoaXMuZ2VvbUdyYXBoKSx0aGlzLmlzTm9kZUVkZ2VBcmVhTGFiZWxzQ29uc2lzdGVudCgpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVXJ9fSksZShYci5wcm90b3R5cGUse2J1aWxkSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLmluZGV4PW5ldyBSZTtmb3IodmFyIHQ9MDt0PHRoaXMucmluZ3Muc2l6ZSgpO3QrKyl7dmFyIGU9dGhpcy5yaW5ncy5nZXQodCksbj1lLmdldEVudmVsb3BlSW50ZXJuYWwoKTt0aGlzLmluZGV4Lmluc2VydChuLGUpfX0sZ2V0TmVzdGVkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXN0ZWRQdH0saXNOb25OZXN0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmJ1aWxkSW5kZXgoKTtmb3IodmFyIHQ9MDt0PHRoaXMucmluZ3Muc2l6ZSgpO3QrKylmb3IodmFyIGU9dGhpcy5yaW5ncy5nZXQodCksbj1lLmdldENvb3JkaW5hdGVzKCksaT10aGlzLmluZGV4LnF1ZXJ5KGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSxyPTA7cjxpLnNpemUoKTtyKyspe3ZhciBzPWkuZ2V0KHIpLG89cy5nZXRDb29yZGluYXRlcygpO2lmKGUhPT1zJiZlLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7cz1Xci5maW5kUHROb3ROb2RlKG4scyx0aGlzLmdyYXBoKTtpZihudWxsIT09cylpZihadC5pc1BvaW50SW5SaW5nKHMsbykpcmV0dXJuIHRoaXMubmVzdGVkUHQ9cywhMX19cmV0dXJuITB9LGFkZDpmdW5jdGlvbih0KXt0aGlzLnJpbmdzLmFkZCh0KSx0aGlzLnRvdGFsRW52LmV4cGFuZFRvSW5jbHVkZSh0LmdldEVudmVsb3BlSW50ZXJuYWwoKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFhyfX0pLGUoSHIucHJvdG90eXBlLHtnZXRFcnJvclR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcnJvclR5cGV9LGdldE1lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gSHIuZXJyTXNnW3RoaXMuZXJyb3JUeXBlXX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PVwiXCI7cmV0dXJuIG51bGwhPT10aGlzLnB0JiYodD1cIiBhdCBvciBuZWFyIHBvaW50IFwiK3RoaXMucHQpLHRoaXMuZ2V0TWVzc2FnZSgpK3R9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEhyfX0pLEhyLkVSUk9SPTAsSHIuUkVQRUFURURfUE9JTlQ9MSxIci5IT0xFX09VVFNJREVfU0hFTEw9MixIci5ORVNURURfSE9MRVM9MyxIci5ESVNDT05ORUNURURfSU5URVJJT1I9NCxIci5TRUxGX0lOVEVSU0VDVElPTj01LEhyLlJJTkdfU0VMRl9JTlRFUlNFQ1RJT049NixIci5ORVNURURfU0hFTExTPTcsSHIuRFVQTElDQVRFX1JJTkdTPTgsSHIuVE9PX0ZFV19QT0lOVFM9OSxIci5JTlZBTElEX0NPT1JESU5BVEU9MTAsSHIuUklOR19OT1RfQ0xPU0VEPTExLEhyLmVyck1zZz1bXCJUb3BvbG9neSBWYWxpZGF0aW9uIEVycm9yXCIsXCJSZXBlYXRlZCBQb2ludFwiLFwiSG9sZSBsaWVzIG91dHNpZGUgc2hlbGxcIixcIkhvbGVzIGFyZSBuZXN0ZWRcIixcIkludGVyaW9yIGlzIGRpc2Nvbm5lY3RlZFwiLFwiU2VsZi1pbnRlcnNlY3Rpb25cIixcIlJpbmcgU2VsZi1pbnRlcnNlY3Rpb25cIixcIk5lc3RlZCBzaGVsbHNcIixcIkR1cGxpY2F0ZSBSaW5nc1wiLFwiVG9vIGZldyBkaXN0aW5jdCBwb2ludHMgaW4gZ2VvbWV0cnkgY29tcG9uZW50XCIsXCJJbnZhbGlkIENvb3JkaW5hdGVcIixcIlJpbmcgaXMgbm90IGNsb3NlZFwiXSxlKFdyLnByb3RvdHlwZSx7Y2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHQubGVuZ3RoO2UrKylpZighV3IuaXNWYWxpZCh0W2VdKSlyZXR1cm4gdGhpcy52YWxpZEVycj1uZXcgSHIoSHIuSU5WQUxJRF9DT09SRElOQVRFLHRbZV0pLG51bGx9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFJ0KXt2YXIgbj1hcmd1bWVudHNbMF07aWYodGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyhuLmdldEV4dGVyaW9yUmluZygpLmdldENvb3JkaW5hdGVzKCkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO2ZvcihlPTA7ZTxuLmdldE51bUludGVyaW9yUmluZygpO2UrKylpZih0aGlzLmNoZWNrSW52YWxpZENvb3JkaW5hdGVzKG4uZ2V0SW50ZXJpb3JSaW5nTihlKS5nZXRDb29yZGluYXRlcygpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbH19LGNoZWNrSG9sZXNOb3ROZXN0ZWQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IFhyKGUpLGk9MDtpPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7aSsrKXt2YXIgcj10LmdldEludGVyaW9yUmluZ04oaSk7bi5hZGQocil9bi5pc05vbk5lc3RlZCgpfHwodGhpcy52YWxpZEVycj1uZXcgSHIoSHIuTkVTVEVEX0hPTEVTLG4uZ2V0TmVzdGVkUG9pbnQoKSkpfSxjaGVja0NvbnNpc3RlbnRBcmVhOmZ1bmN0aW9uKHQpe3Q9bmV3IFVyKHQpO3JldHVybiB0LmlzTm9kZUNvbnNpc3RlbnRBcmVhKCk/dm9pZCh0Lmhhc0R1cGxpY2F0ZVJpbmdzKCkmJih0aGlzLnZhbGlkRXJyPW5ldyBIcihIci5EVVBMSUNBVEVfUklOR1MsdC5nZXRJbnZhbGlkUG9pbnQoKSkpKToodGhpcy52YWxpZEVycj1uZXcgSHIoSHIuU0VMRl9JTlRFUlNFQ1RJT04sdC5nZXRJbnZhbGlkUG9pbnQoKSksbnVsbCl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja1ZhbGlkKHRoaXMucGFyZW50R2VvbWV0cnkpLG51bGw9PT10aGlzLnZhbGlkRXJyfSxjaGVja1NoZWxsSW5zaWRlSG9sZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRDb29yZGluYXRlcygpLHI9ZS5nZXRDb29yZGluYXRlcygpLGU9V3IuZmluZFB0Tm90Tm9kZShpLGUsbik7aWYobnVsbCE9PWUmJiFadC5pc1BvaW50SW5SaW5nKGUscikpcmV0dXJuIGU7bj1Xci5maW5kUHROb3ROb2RlKHIsdCxuKTtyZXR1cm4gbnVsbD09PW4/KGwuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoXCJwb2ludHMgaW4gc2hlbGwgYW5kIGhvbGUgYXBwZWFyIHRvIGJlIGVxdWFsXCIpLG51bGwpOlp0LmlzUG9pbnRJblJpbmcobixpKT9uOm51bGx9LGNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuZ2V0RWRnZUl0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtpZih0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZyhuLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfX0sY2hlY2tDb25uZWN0ZWRJbnRlcmlvcnM6ZnVuY3Rpb24odCl7dD1uZXcgTXIodCk7dC5pc0ludGVyaW9yc0Nvbm5lY3RlZCgpfHwodGhpcy52YWxpZEVycj1uZXcgSHIoSHIuRElTQ09OTkVDVEVEX0lOVEVSSU9SLHQuZ2V0Q29vcmRpbmF0ZSgpKSl9LGNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IGF0LG49ITAsaT10Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtpZihuKW49ITE7ZWxzZXtpZihlLmNvbnRhaW5zKHIuY29vcmQpKXJldHVybiB0aGlzLnZhbGlkRXJyPW5ldyBIcihIci5SSU5HX1NFTEZfSU5URVJTRUNUSU9OLHIuY29vcmQpLG51bGw7ZS5hZGQoci5jb29yZCl9fX0sY2hlY2tIb2xlc0luU2hlbGw6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5nZXRFeHRlcmlvclJpbmcoKSxpPW5ldyBWcihuKSxyPTA7cjx0LmdldE51bUludGVyaW9yUmluZygpO3IrKyl7dmFyIHM9dC5nZXRJbnRlcmlvclJpbmdOKHIpLHM9V3IuZmluZFB0Tm90Tm9kZShzLmdldENvb3JkaW5hdGVzKCksbixlKTtpZihudWxsPT09cylyZXR1cm4gbnVsbDtpZighaS5pc0luc2lkZShzKSlyZXR1cm4gdGhpcy52YWxpZEVycj1uZXcgSHIoSHIuSE9MRV9PVVRTSURFX1NIRUxMLHMpLG51bGx9fSxjaGVja1Rvb0Zld1BvaW50czpmdW5jdGlvbih0KXtyZXR1cm4gdC5oYXNUb29GZXdQb2ludHMoKT8odGhpcy52YWxpZEVycj1uZXcgSHIoSHIuVE9PX0ZFV19QT0lOVFMsdC5nZXRJbnZhbGlkUG9pbnQoKSksbnVsbCk6dm9pZCAwfSxnZXRWYWxpZGF0aW9uRXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja1ZhbGlkKHRoaXMucGFyZW50R2VvbWV0cnkpLHRoaXMudmFsaWRFcnJ9LGNoZWNrVmFsaWQ6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHd0KXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVzKCkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBUdCl7dD1hcmd1bWVudHNbMF07dGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVzKCkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBQdCl7dmFyIGU9YXJndW1lbnRzWzBdO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMoZS5nZXRDb29yZGluYXRlcygpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDtpZih0aGlzLmNoZWNrQ2xvc2VkUmluZyhlKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDt2YXIgbj1uZXcgcW4oMCxlKTtpZih0aGlzLmNoZWNrVG9vRmV3UG9pbnRzKG4pLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO2U9bmV3IFd0O24uY29tcHV0ZVNlbGZOb2RlcyhlLCEwLCEwKSx0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3Mobil9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEN0KXtlPWFyZ3VtZW50c1swXTtpZih0aGlzLmNoZWNrSW52YWxpZENvb3JkaW5hdGVzKGUuZ2V0Q29vcmRpbmF0ZXMoKSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7bj1uZXcgcW4oMCxlKTt0aGlzLmNoZWNrVG9vRmV3UG9pbnRzKG4pfWVsc2V7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBSdCl7dmFyIGk9YXJndW1lbnRzWzBdO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMoaSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7aWYodGhpcy5jaGVja0Nsb3NlZFJpbmdzKGkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO249bmV3IHFuKDAsaSk7cmV0dXJuKHRoaXMuY2hlY2tUb29GZXdQb2ludHMobiksbnVsbCE9PXRoaXMudmFsaWRFcnIpP251bGw6KHRoaXMuY2hlY2tDb25zaXN0ZW50QXJlYShuKSxudWxsPT09dGhpcy52YWxpZEVyciYmKHRoaXMuaXNTZWxmVG91Y2hpbmdSaW5nRm9ybWluZ0hvbGVWYWxpZHx8KHRoaXMuY2hlY2tOb1NlbGZJbnRlcnNlY3RpbmdSaW5ncyhuKSxudWxsPT09dGhpcy52YWxpZEVycikpPyh0aGlzLmNoZWNrSG9sZXNJblNoZWxsKGksbiksbnVsbCE9PXRoaXMudmFsaWRFcnI/bnVsbDoodGhpcy5jaGVja0hvbGVzTm90TmVzdGVkKGksbiksbnVsbCE9PXRoaXMudmFsaWRFcnI/bnVsbDp2b2lkIHRoaXMuY2hlY2tDb25uZWN0ZWRJbnRlcmlvcnMobikpKTpudWxsKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGJ0KXtmb3IodmFyIHI9YXJndW1lbnRzWzBdLHM9MDtzPHIuZ2V0TnVtR2VvbWV0cmllcygpO3MrKyl7dmFyIG89ci5nZXRHZW9tZXRyeU4ocyk7aWYodGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyhvKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDtpZih0aGlzLmNoZWNrQ2xvc2VkUmluZ3MobyksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGx9bj1uZXcgcW4oMCxyKTtpZih0aGlzLmNoZWNrVG9vRmV3UG9pbnRzKG4pLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO2lmKHRoaXMuY2hlY2tDb25zaXN0ZW50QXJlYShuKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDtpZighdGhpcy5pc1NlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkJiYodGhpcy5jaGVja05vU2VsZkludGVyc2VjdGluZ1JpbmdzKG4pLG51bGwhPT10aGlzLnZhbGlkRXJyKSlyZXR1cm4gbnVsbDtmb3Iocz0wO3M8ci5nZXROdW1HZW9tZXRyaWVzKCk7cysrKXtvPXIuZ2V0R2VvbWV0cnlOKHMpO2lmKHRoaXMuY2hlY2tIb2xlc0luU2hlbGwobyxuKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbH1mb3Iocz0wO3M8ci5nZXROdW1HZW9tZXRyaWVzKCk7cysrKXtvPXIuZ2V0R2VvbWV0cnlOKHMpO2lmKHRoaXMuY2hlY2tIb2xlc05vdE5lc3RlZChvLG4pLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfWlmKHRoaXMuY2hlY2tTaGVsbHNOb3ROZXN0ZWQocixuKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDt0aGlzLmNoZWNrQ29ubmVjdGVkSW50ZXJpb3JzKG4pfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBmdClmb3IodmFyIGE9YXJndW1lbnRzWzBdLHM9MDtzPGEuZ2V0TnVtR2VvbWV0cmllcygpO3MrKyl7dmFyIHU9YS5nZXRHZW9tZXRyeU4ocyk7aWYodGhpcy5jaGVja1ZhbGlkKHUpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCKXtpPWFyZ3VtZW50c1swXTtpZih0aGlzLnZhbGlkRXJyPW51bGwsaS5pc0VtcHR5KCkpcmV0dXJuIG51bGw7aWYoaSBpbnN0YW5jZW9mIHd0KXRoaXMuY2hlY2tWYWxpZChpKTtlbHNlIGlmKGkgaW5zdGFuY2VvZiBUdCl0aGlzLmNoZWNrVmFsaWQoaSk7ZWxzZSBpZihpIGluc3RhbmNlb2YgUHQpdGhpcy5jaGVja1ZhbGlkKGkpO2Vsc2UgaWYoaSBpbnN0YW5jZW9mIEN0KXRoaXMuY2hlY2tWYWxpZChpKTtlbHNlIGlmKGkgaW5zdGFuY2VvZiBSdCl0aGlzLmNoZWNrVmFsaWQoaSk7ZWxzZSBpZihpIGluc3RhbmNlb2YgYnQpdGhpcy5jaGVja1ZhbGlkKGkpO2Vsc2V7aWYoIShpIGluc3RhbmNlb2YgZnQpKXRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihpLmdldENsYXNzKCkuZ2V0TmFtZSgpKTt0aGlzLmNoZWNrVmFsaWQoaSl9fX19LHNldFNlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkOmZ1bmN0aW9uKHQpe3RoaXMuaXNTZWxmVG91Y2hpbmdSaW5nRm9ybWluZ0hvbGVWYWxpZD10fSxjaGVja1NoZWxsTm90TmVzdGVkOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldENvb3JkaW5hdGVzKCkscj1lLmdldEV4dGVyaW9yUmluZygpLHM9ci5nZXRDb29yZGluYXRlcygpLHI9V3IuZmluZFB0Tm90Tm9kZShpLHIsbik7aWYobnVsbD09PXIpcmV0dXJuIG51bGw7aWYoIVp0LmlzUG9pbnRJblJpbmcocixzKSlyZXR1cm4gbnVsbDtpZihlLmdldE51bUludGVyaW9yUmluZygpPD0wKXJldHVybiB0aGlzLnZhbGlkRXJyPW5ldyBIcihIci5ORVNURURfU0hFTExTLHIpLG51bGw7Zm9yKHZhciBvPW51bGwsYT0wO2E8ZS5nZXROdW1JbnRlcmlvclJpbmcoKTthKyspe3ZhciB1PWUuZ2V0SW50ZXJpb3JSaW5nTihhKTtpZihudWxsPT09KG89dGhpcy5jaGVja1NoZWxsSW5zaWRlSG9sZSh0LHUsbikpKXJldHVybiBudWxsfXRoaXMudmFsaWRFcnI9bmV3IEhyKEhyLk5FU1RFRF9TSEVMTFMsbyl9LGNoZWNrQ2xvc2VkUmluZ3M6ZnVuY3Rpb24odCl7aWYodGhpcy5jaGVja0Nsb3NlZFJpbmcodC5nZXRFeHRlcmlvclJpbmcoKSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7Zm9yKHZhciBlPTA7ZTx0LmdldE51bUludGVyaW9yUmluZygpO2UrKylpZih0aGlzLmNoZWNrQ2xvc2VkUmluZyh0LmdldEludGVyaW9yUmluZ04oZSkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfSxjaGVja0Nsb3NlZFJpbmc6ZnVuY3Rpb24odCl7dmFyIGU7dC5pc0Nsb3NlZCgpfHwoZT1udWxsLDE8PXQuZ2V0TnVtUG9pbnRzKCkmJihlPXQuZ2V0Q29vcmRpbmF0ZU4oMCkpLHRoaXMudmFsaWRFcnI9bmV3IEhyKEhyLlJJTkdfTk9UX0NMT1NFRCxlKSl9LGNoZWNrU2hlbGxzTm90TmVzdGVkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0LmdldE51bUdlb21ldHJpZXMoKTtuKyspZm9yKHZhciBpPXQuZ2V0R2VvbWV0cnlOKG4pLmdldEV4dGVyaW9yUmluZygpLHI9MDtyPHQuZ2V0TnVtR2VvbWV0cmllcygpO3IrKylpZihuIT09cil7dmFyIHM9dC5nZXRHZW9tZXRyeU4ocik7aWYodGhpcy5jaGVja1NoZWxsTm90TmVzdGVkKGkscyxlKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbH19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFdyfX0pLFdyLmZpbmRQdE5vdE5vZGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1uLmZpbmRFZGdlKGUpLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCkscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgcz10W3JdO2lmKCFpLmlzSW50ZXJzZWN0aW9uKHMpKXJldHVybiBzfXJldHVybiBudWxsfSxXci5pc1ZhbGlkPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCKXJldHVybiBuZXcgV3IoYXJndW1lbnRzWzBdKS5pc1ZhbGlkKCk7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIWcuaXNOYU4odC54KSYmKCFnLmlzSW5maW5pdGUodC54KSYmKCFnLmlzTmFOKHQueSkmJiFnLmlzSW5maW5pdGUodC55KSkpfX07ZW89T2JqZWN0LmZyZWV6ZSh7SXNWYWxpZE9wOldyfSksZm89T2JqZWN0LmZyZWV6ZSh7Qm91bmRhcnlPcDpkdCxJc1NpbXBsZU9wOklpLGJ1ZmZlcjp1byxkaXN0YW5jZTpsbyxsaW5lbWVyZ2U6aG8sb3ZlcmxheTpjbyxwb2x5Z29uaXplOmZvLHJlbGF0ZTpZcyx1bmlvbjp0byx2YWxpZDplb30pO2EoanIsT3QuQ29vcmRpbmF0ZU9wZXJhdGlvbiksZShqci5wcm90b3R5cGUse2VkaXRDb29yZGluYXRlczpmdW5jdGlvbih0LGUpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gbnVsbDtmb3IodmFyIG49bmV3IEFycmF5KHQubGVuZ3RoKS5maWxsKG51bGwpLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIHI9bmV3IGQodFtpXSk7dGhpcy50YXJnZXRQTS5tYWtlUHJlY2lzZShyKSxuW2ldPXJ9dmFyIHM9bmV3IE4obiwhMSkudG9Db29yZGluYXRlQXJyYXkoKSxvPWUgaW5zdGFuY2VvZiBQdD80OmUgaW5zdGFuY2VvZiBDdD8yOjAsZT1uO3JldHVybiB0aGlzLnJlbW92ZUNvbGxhcHNlZCYmKGU9bnVsbCkscy5sZW5ndGg8bz9lOnN9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGpyfX0pLGUoS3IucHJvdG90eXBlLHtmaXhQb2x5Z29uYWxUb3BvbG9neTpmdW5jdGlvbih0KXt2YXIgZT10O3RoaXMuY2hhbmdlUHJlY2lzaW9uTW9kZWx8fChlPXRoaXMuY2hhbmdlUE0odCx0aGlzLnRhcmdldFBNKSk7dmFyIG49ZS5idWZmZXIoMCksZT1uO3JldHVybiB0aGlzLmNoYW5nZVByZWNpc2lvbk1vZGVsfHwoZT10LmdldEZhY3RvcnkoKS5jcmVhdGVHZW9tZXRyeShuKSksZX0scmVkdWNlUG9pbnR3aXNlOmZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7ZT10aGlzLmNoYW5nZVByZWNpc2lvbk1vZGVsP25ldyBPdCh0aGlzLmNyZWF0ZUZhY3RvcnkodC5nZXRGYWN0b3J5KCksdGhpcy50YXJnZXRQTSkpOm5ldyBPdDt2YXIgbj10aGlzLnJlbW92ZUNvbGxhcHNlZDtyZXR1cm4gMjw9dC5nZXREaW1lbnNpb24oKSYmKG49ITApLGUuZWRpdCh0LG5ldyBqcih0aGlzLnRhcmdldFBNLG4pKX0sY2hhbmdlUE06ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jcmVhdGVFZGl0b3IodC5nZXRGYWN0b3J5KCksZSkuZWRpdCh0LG5ldyBPdC5Ob09wR2VvbWV0cnlPcGVyYXRpb24pfSxzZXRSZW1vdmVDb2xsYXBzZWRDb21wb25lbnRzOmZ1bmN0aW9uKHQpe3RoaXMucmVtb3ZlQ29sbGFwc2VkPXR9LGNyZWF0ZUZhY3Rvcnk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFl0KGUsdC5nZXRTUklEKCksdC5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkpfSxzZXRDaGFuZ2VQcmVjaXNpb25Nb2RlbDpmdW5jdGlvbih0KXt0aGlzLmNoYW5nZVByZWNpc2lvbk1vZGVsPXR9LHJlZHVjZTpmdW5jdGlvbih0KXt0PXRoaXMucmVkdWNlUG9pbnR3aXNlKHQpO3JldHVybiB0aGlzLmlzUG9pbnR3aXNlfHwhUih0LEx0KXx8dC5pc1ZhbGlkKCk/dDp0aGlzLmZpeFBvbHlnb25hbFRvcG9sb2d5KHQpfSxzZXRQb2ludHdpc2U6ZnVuY3Rpb24odCl7dGhpcy5pc1BvaW50d2lzZT10fSxjcmVhdGVFZGl0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5nZXRQcmVjaXNpb25Nb2RlbCgpPT09ZT9uZXcgT3Q6bmV3IE90KHRoaXMuY3JlYXRlRmFjdG9yeSh0LGUpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gS3J9fSksS3IucmVkdWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBLcihlKS5yZWR1Y2UodCl9LEtyLnJlZHVjZVBvaW50d2lzZT1mdW5jdGlvbih0LGUpe2U9bmV3IEtyKGUpO3JldHVybiBlLnNldFBvaW50d2lzZSghMCksZS5yZWR1Y2UodCl9O1lzPU9iamVjdC5mcmVlemUoe0dlb21ldHJ5UHJlY2lzaW9uUmVkdWNlcjpLcn0pO2UoWnIucHJvdG90eXBlLHtzaW1wbGlmeVNlY3Rpb246ZnVuY3Rpb24odCxlKXtpZih0KzE9PT1lKXJldHVybiBudWxsO3RoaXMuc2VnLnAwPXRoaXMucHRzW3RdLHRoaXMuc2VnLnAxPXRoaXMucHRzW2VdO2Zvcih2YXIgbj0tMSxpPXQscj10KzE7cjxlO3IrKyl7dmFyIHM9dGhpcy5zZWcuZGlzdGFuY2UodGhpcy5wdHNbcl0pO248cyYmKG49cyxpPXIpfWlmKG48PXRoaXMuZGlzdGFuY2VUb2xlcmFuY2UpZm9yKHI9dCsxO3I8ZTtyKyspdGhpcy51c2VQdFtyXT0hMTtlbHNlIHRoaXMuc2ltcGxpZnlTZWN0aW9uKHQsaSksdGhpcy5zaW1wbGlmeVNlY3Rpb24oaSxlKX0sc2V0RGlzdGFuY2VUb2xlcmFuY2U6ZnVuY3Rpb24odCl7dGhpcy5kaXN0YW5jZVRvbGVyYW5jZT10fSxzaW1wbGlmeTpmdW5jdGlvbigpe3RoaXMudXNlUHQ9bmV3IEFycmF5KHRoaXMucHRzLmxlbmd0aCkuZmlsbChudWxsKTtmb3IodmFyIHQ9MDt0PHRoaXMucHRzLmxlbmd0aDt0KyspdGhpcy51c2VQdFt0XT0hMDt0aGlzLnNpbXBsaWZ5U2VjdGlvbigwLHRoaXMucHRzLmxlbmd0aC0xKTtmb3IodmFyIGU9bmV3IE4sdD0wO3Q8dGhpcy5wdHMubGVuZ3RoO3QrKyl0aGlzLnVzZVB0W3RdJiZlLmFkZChuZXcgZCh0aGlzLnB0c1t0XSkpO3JldHVybiBlLnRvQ29vcmRpbmF0ZUFycmF5KCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFpyfX0pLFpyLnNpbXBsaWZ5PWZ1bmN0aW9uKHQsZSl7dD1uZXcgWnIodCk7cmV0dXJuIHQuc2V0RGlzdGFuY2VUb2xlcmFuY2UoZSksdC5zaW1wbGlmeSgpfSxlKEpyLnByb3RvdHlwZSx7c2V0RW5zdXJlVmFsaWQ6ZnVuY3Rpb24odCl7dGhpcy5pc0Vuc3VyZVZhbGlkVG9wb2xvZ3k9dH0sZ2V0UmVzdWx0R2VvbWV0cnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dEdlb20uaXNFbXB0eSgpP3RoaXMuaW5wdXRHZW9tLmNvcHkoKTpuZXcgUXIodGhpcy5pc0Vuc3VyZVZhbGlkVG9wb2xvZ3ksdGhpcy5kaXN0YW5jZVRvbGVyYW5jZSkudHJhbnNmb3JtKHRoaXMuaW5wdXRHZW9tKX0sc2V0RGlzdGFuY2VUb2xlcmFuY2U6ZnVuY3Rpb24odCl7aWYodDwwKXRocm93IG5ldyBjO3RoaXMuZGlzdGFuY2VUb2xlcmFuY2U9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSnJ9fSksSnIuc2ltcGxpZnk9ZnVuY3Rpb24odCxlKXt0PW5ldyBKcih0KTtyZXR1cm4gdC5zZXREaXN0YW5jZVRvbGVyYW5jZShlKSx0LmdldFJlc3VsdEdlb21ldHJ5KCl9LGEoUXIsc2UpLGUoUXIucHJvdG90eXBlLHt0cmFuc2Zvcm1Qb2x5Z29uOmZ1bmN0aW9uKHQsZSl7aWYodC5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dD1zZS5wcm90b3R5cGUudHJhbnNmb3JtUG9seWdvbi5jYWxsKHRoaXMsdCxlKTtyZXR1cm4gZSBpbnN0YW5jZW9mIGJ0P3Q6dGhpcy5jcmVhdGVWYWxpZEFyZWEodCl9LGNyZWF0ZVZhbGlkQXJlYTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0Vuc3VyZVZhbGlkVG9wb2xvZ3k/dC5idWZmZXIoMCk6dH0sdHJhbnNmb3JtQ29vcmRpbmF0ZXM6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnRvQ29vcmRpbmF0ZUFycmF5KCksdD1udWxsLHQ9MD09PW4ubGVuZ3RoP25ldyBBcnJheSgwKS5maWxsKG51bGwpOlpyLnNpbXBsaWZ5KG4sdGhpcy5kaXN0YW5jZVRvbGVyYW5jZSk7cmV0dXJuIHRoaXMuZmFjdG9yeS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpfSx0cmFuc2Zvcm1NdWx0aVBvbHlnb246ZnVuY3Rpb24odCxlKXtlPXNlLnByb3RvdHlwZS50cmFuc2Zvcm1NdWx0aVBvbHlnb24uY2FsbCh0aGlzLHQsZSk7cmV0dXJuIHRoaXMuY3JlYXRlVmFsaWRBcmVhKGUpfSx0cmFuc2Zvcm1MaW5lYXJSaW5nOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZSBpbnN0YW5jZW9mIFJ0LGU9c2UucHJvdG90eXBlLnRyYW5zZm9ybUxpbmVhclJpbmcuY2FsbCh0aGlzLHQsZSk7cmV0dXJuIW58fGUgaW5zdGFuY2VvZiBQdD9lOm51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFFyfX0pLEpyLkRQVHJhbnNmb3JtZXI9UXIsYSgkcixKdCksZSgkci5wcm90b3R5cGUse2dldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXh9LGdldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJHJ9fSksZSh0cy5wcm90b3R5cGUse2FkZFRvUmVzdWx0OmZ1bmN0aW9uKHQpe3RoaXMucmVzdWx0U2Vncy5hZGQodCl9LGFzTGluZVN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudExpbmUuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVTdHJpbmcodHMuZXh0cmFjdENvb3JkaW5hdGVzKHRoaXMucmVzdWx0U2VncykpfSxnZXRSZXN1bHRTaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZXN1bHRTZWdzLnNpemUoKTtyZXR1cm4gMD09PXQ/MDp0KzF9LGdldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudExpbmV9LGdldFNlZ21lbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2Vnc1t0XX0sZ2V0UGFyZW50Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnRMaW5lLmdldENvb3JkaW5hdGVzKCl9LGdldE1pbmltdW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluaW11bVNpemV9LGFzTGluZWFyUmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudExpbmUuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVhclJpbmcodHMuZXh0cmFjdENvb3JkaW5hdGVzKHRoaXMucmVzdWx0U2VncykpfSxnZXRTZWdtZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ3N9LGluaXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudExpbmUuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLnNlZ3M9bmV3IEFycmF5KHQubGVuZ3RoLTEpLmZpbGwobnVsbCk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aC0xO2UrKyl7dmFyIG49bmV3ICRyKHRbZV0sdFtlKzFdLHRoaXMucGFyZW50TGluZSxlKTt0aGlzLnNlZ3NbZV09bn19LGdldFJlc3VsdENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRzLmV4dHJhY3RDb29yZGluYXRlcyh0aGlzLnJlc3VsdFNlZ3MpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB0c319KSx0cy5leHRyYWN0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0LnNpemUoKSsxKS5maWxsKG51bGwpLG49bnVsbCxpPTA7aTx0LnNpemUoKTtpKyspbj10LmdldChpKSxlW2ldPW4ucDA7cmV0dXJuIGVbZS5sZW5ndGgtMV09bi5wMSxlfSxlKGVzLnByb3RvdHlwZSx7cmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuaW5kZXgucmVtb3ZlKG5ldyBDKHQucDAsdC5wMSksdCl9LGFkZDpmdW5jdGlvbigpe3ZhciB0O2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgdHMpZm9yKHZhciBlPWFyZ3VtZW50c1swXS5nZXRTZWdtZW50cygpLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTt0aGlzLmFkZChpKX1lbHNlIGFyZ3VtZW50c1swXWluc3RhbmNlb2YgSnQmJih0PWFyZ3VtZW50c1swXSx0aGlzLmluZGV4Lmluc2VydChuZXcgQyh0LnAwLHQucDEpLHQpKX0scXVlcnk6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEModC5wMCx0LnAxKSx0PW5ldyBucyh0KTtyZXR1cm4gdGhpcy5pbmRleC5xdWVyeShlLHQpLHQuZ2V0SXRlbXMoKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZXN9fSksZShucy5wcm90b3R5cGUse3Zpc2l0SXRlbTpmdW5jdGlvbih0KXtDLmludGVyc2VjdHModC5wMCx0LnAxLHRoaXMucXVlcnlTZWcucDAsdGhpcy5xdWVyeVNlZy5wMSkmJnRoaXMuaXRlbXMuYWRkKHQpfSxnZXRJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltJZV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG5zfX0pLGUoaXMucHJvdG90eXBlLHtmbGF0dGVuOmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEp0KHRoaXMubGluZVB0c1t0XSx0aGlzLmxpbmVQdHNbZV0pO3JldHVybiB0aGlzLnJlbW92ZSh0aGlzLmxpbmUsdCxlKSx0aGlzLm91dHB1dEluZGV4LmFkZChuKSxufSxoYXNCYWRJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4pe3JldHVybiEhdGhpcy5oYXNCYWRPdXRwdXRJbnRlcnNlY3Rpb24obil8fCEhdGhpcy5oYXNCYWRJbnB1dEludGVyc2VjdGlvbih0LGUsbil9LHNldERpc3RhbmNlVG9sZXJhbmNlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzdGFuY2VUb2xlcmFuY2U9dH0sc2ltcGxpZnlTZWN0aW9uOmZ1bmN0aW9uKHQsZSxuKXtuKz0xO3ZhciBpPW5ldyBBcnJheSgyKS5maWxsKG51bGwpO2lmKHQrMT09PWUpe3ZhciByPXRoaXMubGluZS5nZXRTZWdtZW50KHQpO3JldHVybiB0aGlzLmxpbmUuYWRkVG9SZXN1bHQociksbnVsbH12YXIgcz0hMDt0aGlzLmxpbmUuZ2V0UmVzdWx0U2l6ZSgpPHRoaXMubGluZS5nZXRNaW5pbXVtU2l6ZSgpJiZuKzE8dGhpcy5saW5lLmdldE1pbmltdW1TaXplKCkmJihzPSExKTt2YXIgbz1uZXcgQXJyYXkoMSkuZmlsbChudWxsKSxhPXRoaXMuZmluZEZ1cnRoZXN0UG9pbnQodGhpcy5saW5lUHRzLHQsZSxvKTtvWzBdPnRoaXMuZGlzdGFuY2VUb2xlcmFuY2UmJihzPSExKTtvPW5ldyBKdDtpZihvLnAwPXRoaXMubGluZVB0c1t0XSxvLnAxPXRoaXMubGluZVB0c1tlXSxpWzBdPXQsaVsxXT1lLHRoaXMuaGFzQmFkSW50ZXJzZWN0aW9uKHRoaXMubGluZSxpLG8pJiYocz0hMSkscyl7cj10aGlzLmZsYXR0ZW4odCxlKTtyZXR1cm4gdGhpcy5saW5lLmFkZFRvUmVzdWx0KHIpLG51bGx9dGhpcy5zaW1wbGlmeVNlY3Rpb24odCxhLG4pLHRoaXMuc2ltcGxpZnlTZWN0aW9uKGEsZSxuKX0saGFzQmFkT3V0cHV0SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLm91dHB1dEluZGV4LnF1ZXJ5KHQpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtpZih0aGlzLmhhc0ludGVyaW9ySW50ZXJzZWN0aW9uKG4sdCkpcmV0dXJuITB9cmV0dXJuITF9LGZpbmRGdXJ0aGVzdFBvaW50OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW5ldyBKdDtyLnAwPXRbZV0sci5wMT10W25dO2Zvcih2YXIgcz0tMSxvPWUsYT1lKzE7YTxuO2ErKyl7dmFyIHU9dFthXSx1PXIuZGlzdGFuY2UodSk7czx1JiYocz11LG89YSl9cmV0dXJuIGlbMF09cyxvfSxzaW1wbGlmeTpmdW5jdGlvbih0KXt0aGlzLmxpbmU9dCx0aGlzLmxpbmVQdHM9dC5nZXRQYXJlbnRDb29yZGluYXRlcygpLHRoaXMuc2ltcGxpZnlTZWN0aW9uKDAsdGhpcy5saW5lUHRzLmxlbmd0aC0xLDApfSxyZW1vdmU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1lO2k8bjtpKyspe3ZhciByPXQuZ2V0U2VnbWVudChpKTt0aGlzLmlucHV0SW5kZXgucmVtb3ZlKHIpfX0saGFzSW50ZXJpb3JJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQucDAsdC5wMSxlLnAwLGUucDEpLHRoaXMubGkuaXNJbnRlcmlvckludGVyc2VjdGlvbigpfSxoYXNCYWRJbnB1dEludGVyc2VjdGlvbjpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPXRoaXMuaW5wdXRJbmRleC5xdWVyeShuKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7aWYodGhpcy5oYXNJbnRlcmlvckludGVyc2VjdGlvbihyLG4pJiYhaXMuaXNJbkxpbmVTZWN0aW9uKHQsZSxyKSlyZXR1cm4hMH1yZXR1cm4hMX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gaXN9fSksaXMuaXNJbkxpbmVTZWN0aW9uPWZ1bmN0aW9uKHQsZSxuKXtpZihuLmdldFBhcmVudCgpIT09dC5nZXRQYXJlbnQoKSlyZXR1cm4hMTtuPW4uZ2V0SW5kZXgoKTtyZXR1cm4gbj49ZVswXSYmbjxlWzFdfSxlKHJzLnByb3RvdHlwZSx7c2V0RGlzdGFuY2VUb2xlcmFuY2U6ZnVuY3Rpb24odCl7dGhpcy5kaXN0YW5jZVRvbGVyYW5jZT10fSxzaW1wbGlmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmlucHV0SW5kZXguYWRkKGUubmV4dCgpKTtmb3IoZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1uZXcgaXModGhpcy5pbnB1dEluZGV4LHRoaXMub3V0cHV0SW5kZXgpO24uc2V0RGlzdGFuY2VUb2xlcmFuY2UodGhpcy5kaXN0YW5jZVRvbGVyYW5jZSksbi5zaW1wbGlmeShlLm5leHQoKSl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiByc319KSxlKHNzLnByb3RvdHlwZSx7Z2V0UmVzdWx0R2VvbWV0cnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dEdlb20uaXNFbXB0eSgpP3RoaXMuaW5wdXRHZW9tLmNvcHkoKToodGhpcy5saW5lc3RyaW5nTWFwPW5ldyB6dCx0aGlzLmlucHV0R2VvbS5hcHBseShuZXcgYXModGhpcykpLHRoaXMubGluZVNpbXBsaWZpZXIuc2ltcGxpZnkodGhpcy5saW5lc3RyaW5nTWFwLnZhbHVlcygpKSxuZXcgb3ModGhpcy5saW5lc3RyaW5nTWFwKS50cmFuc2Zvcm0odGhpcy5pbnB1dEdlb20pKX0sc2V0RGlzdGFuY2VUb2xlcmFuY2U6ZnVuY3Rpb24odCl7aWYodDwwKXRocm93IG5ldyBjO3RoaXMubGluZVNpbXBsaWZpZXIuc2V0RGlzdGFuY2VUb2xlcmFuY2UodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHNzfX0pLHNzLnNpbXBsaWZ5PWZ1bmN0aW9uKHQsZSl7dD1uZXcgc3ModCk7cmV0dXJuIHQuc2V0RGlzdGFuY2VUb2xlcmFuY2UoZSksdC5nZXRSZXN1bHRHZW9tZXRyeSgpfSxhKG9zLHNlKSxlKG9zLnByb3RvdHlwZSx7dHJhbnNmb3JtQ29vcmRpbmF0ZXM6ZnVuY3Rpb24odCxlKXtpZigwPT09dC5zaXplKCkpcmV0dXJuIG51bGw7aWYoZSBpbnN0YW5jZW9mIEN0KXt2YXIgbj10aGlzLmxpbmVzdHJpbmdNYXAuZ2V0KGUpO3JldHVybiB0aGlzLmNyZWF0ZUNvb3JkaW5hdGVTZXF1ZW5jZShuLmdldFJlc3VsdENvb3JkaW5hdGVzKCkpfXJldHVybiBzZS5wcm90b3R5cGUudHJhbnNmb3JtQ29vcmRpbmF0ZXMuY2FsbCh0aGlzLHQsZSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG9zfX0pLGUoYXMucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEN0KXt2YXIgZT10O2lmKGUuaXNFbXB0eSgpKXJldHVybiBudWxsO3Q9ZS5pc0Nsb3NlZCgpPzQ6Mix0PW5ldyB0cyhlLHQpO3RoaXMudHBzLmxpbmVzdHJpbmdNYXAucHV0KGUsdCl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltxXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYXN9fSksc3MuTGluZVN0cmluZ1RyYW5zZm9ybWVyPW9zLHNzLkxpbmVTdHJpbmdNYXBCdWlsZGVyRmlsdGVyPWFzO3RvPU9iamVjdC5mcmVlemUoe0RvdWdsYXNQZXVja2VyU2ltcGxpZmllcjpKcixUb3BvbG9neVByZXNlcnZpbmdTaW1wbGlmaWVyOnNzfSk7ZSh1cy5wcm90b3R5cGUse3NwbGl0QXQ6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dGhpcy5taW5pbXVtTGVuL3RoaXMuc2VnTGVuO3JldHVybiB0LmRpc3RhbmNlKHRoaXMuc2VnLnAwKTx0aGlzLm1pbmltdW1MZW4/KHRoaXMuc3BsaXRQdD10aGlzLnNlZy5wb2ludEFsb25nKGUpLG51bGwpOnQuZGlzdGFuY2UodGhpcy5zZWcucDEpPHRoaXMubWluaW11bUxlbj8odGhpcy5zcGxpdFB0PXVzLnBvaW50QWxvbmdSZXZlcnNlKHRoaXMuc2VnLGUpLG51bGwpOnZvaWQodGhpcy5zcGxpdFB0PXQpfTI9PT1hcmd1bWVudHMubGVuZ3RoJiYoZT1hcmd1bWVudHNbMF0sdD1hcmd1bWVudHNbMV0sZT10aGlzLmdldENvbnN0cmFpbmVkTGVuZ3RoKGUpL3RoaXMuc2VnTGVuLHQuZXF1YWxzMkQodGhpcy5zZWcucDApP3RoaXMuc3BsaXRQdD10aGlzLnNlZy5wb2ludEFsb25nKGUpOnRoaXMuc3BsaXRQdD11cy5wb2ludEFsb25nUmV2ZXJzZSh0aGlzLnNlZyxlKSl9LHNldE1pbmltdW1MZW5ndGg6ZnVuY3Rpb24odCl7dGhpcy5taW5pbXVtTGVuPXR9LGdldENvbnN0cmFpbmVkTGVuZ3RoOmZ1bmN0aW9uKHQpe3JldHVybiB0PHRoaXMubWluaW11bUxlbj90aGlzLm1pbmltdW1MZW46dH0sZ2V0U3BsaXRQb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGl0UHR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHVzfX0pLHVzLnBvaW50QWxvbmdSZXZlcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IGQ7cmV0dXJuIG4ueD10LnAxLngtZSoodC5wMS54LXQucDAueCksbi55PXQucDEueS1lKih0LnAxLnktdC5wMC55KSxufSxlKGxzLnByb3RvdHlwZSx7ZmluZFNwbGl0UG9pbnQ6ZnVuY3Rpb24odCxlKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGxzfX0pLGUoaHMucHJvdG90eXBlLHtmaW5kU3BsaXRQb2ludDpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TGluZVNlZ21lbnQoKSxpPW4uZ2V0TGVuZ3RoKCkvMixuPW5ldyB1cyhuKSx0PWhzLnByb2plY3RlZFNwbGl0UG9pbnQodCxlKSxlPTIqdC5kaXN0YW5jZShlKSouODtyZXR1cm4gaTxlJiYoZT1pKSxuLnNldE1pbmltdW1MZW5ndGgoZSksbi5zcGxpdEF0KHQpLG4uZ2V0U3BsaXRQb2ludCgpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltsc119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGhzfX0pLGhzLnByb2plY3RlZFNwbGl0UG9pbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5nZXRMaW5lU2VnbWVudCgpLnByb2plY3QoZSl9LGUoY3MucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBjc319KSxjcy50cmlBcmVhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oZS54LXQueCkqKG4ueS10LnkpLShlLnktdC55KSoobi54LXQueCl9LGNzLmlzSW5DaXJjbGVERE5vcm1hbGl6ZWQ9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9Xy52YWx1ZU9mKHQueCkuc2VsZlN1YnRyYWN0KGkueCkscz1fLnZhbHVlT2YodC55KS5zZWxmU3VidHJhY3QoaS55KSxvPV8udmFsdWVPZihlLngpLnNlbGZTdWJ0cmFjdChpLngpLGE9Xy52YWx1ZU9mKGUueSkuc2VsZlN1YnRyYWN0KGkueSksdT1fLnZhbHVlT2Yobi54KS5zZWxmU3VidHJhY3QoaS54KSx0PV8udmFsdWVPZihuLnkpLnNlbGZTdWJ0cmFjdChpLnkpLGU9ci5tdWx0aXBseShhKS5zZWxmU3VidHJhY3Qoby5tdWx0aXBseShzKSksbj1vLm11bHRpcGx5KHQpLnNlbGZTdWJ0cmFjdCh1Lm11bHRpcGx5KGEpKSxpPXUubXVsdGlwbHkocykuc2VsZlN1YnRyYWN0KHIubXVsdGlwbHkodCkpLHM9ci5tdWx0aXBseShyKS5zZWxmQWRkKHMubXVsdGlwbHkocykpLGE9by5tdWx0aXBseShvKS5zZWxmQWRkKGEubXVsdGlwbHkoYSkpLHQ9dS5tdWx0aXBseSh1KS5zZWxmQWRkKHQubXVsdGlwbHkodCkpO3JldHVybiAwPHMuc2VsZk11bHRpcGx5KG4pLnNlbGZBZGQoYS5zZWxmTXVsdGlwbHkoaSkpLnNlbGZBZGQodC5zZWxmTXVsdGlwbHkoZSkpLmRvdWJsZVZhbHVlKCl9LGNzLmNoZWNrUm9idXN0SW5DaXJjbGU9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9Y3MuaXNJbkNpcmNsZU5vblJvYnVzdCh0LGUsbixpKSxzPWNzLmlzSW5DaXJjbGVERFNsb3codCxlLG4saSksbz1jcy5pc0luQ2lyY2xlQ0ModCxlLG4saSksYT1abi5jaXJjdW1jZW50cmUodCxlLG4pO0Eub3V0LnByaW50bG4oXCJwIHJhZGl1cyBkaWZmIGEgPSBcIitNYXRoLmFicyhpLmRpc3RhbmNlKGEpLXQuZGlzdGFuY2UoYSkpL3QuZGlzdGFuY2UoYSkpLHI9PT1zJiZyPT09b3x8KEEub3V0LnByaW50bG4oXCJpbkNpcmNsZSByb2J1c3RuZXNzIGZhaWx1cmUgKGRvdWJsZSByZXN1bHQgPSBcIityK1wiLCBERCByZXN1bHQgPSBcIitzK1wiLCBDQyByZXN1bHQgPSBcIitvK1wiKVwiKSxBLm91dC5wcmludGxuKFh0LnRvTGluZVN0cmluZyhuZXcgRnQoW3QsZSxuLGldKSkpLEEub3V0LnByaW50bG4oXCJDaXJjdW1jZW50cmUgPSBcIitYdC50b1BvaW50KGEpK1wiIHJhZGl1cyA9IFwiK3QuZGlzdGFuY2UoYSkpLEEub3V0LnByaW50bG4oXCJwIHJhZGl1cyBkaWZmIGEgPSBcIitNYXRoLmFicyhpLmRpc3RhbmNlKGEpL3QuZGlzdGFuY2UoYSktMSkpLEEub3V0LnByaW50bG4oXCJwIHJhZGl1cyBkaWZmIGIgPSBcIitNYXRoLmFicyhpLmRpc3RhbmNlKGEpL2UuZGlzdGFuY2UoYSktMSkpLEEub3V0LnByaW50bG4oXCJwIHJhZGl1cyBkaWZmIGMgPSBcIitNYXRoLmFicyhpLmRpc3RhbmNlKGEpL24uZGlzdGFuY2UoYSktMSkpLEEub3V0LnByaW50bG4oKSl9LGNzLmlzSW5DaXJjbGVEREZhc3Q9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9Xy5zcXIodC54KS5zZWxmQWRkKF8uc3FyKHQueSkpLnNlbGZNdWx0aXBseShjcy50cmlBcmVhRERGYXN0KGUsbixpKSkscz1fLnNxcihlLngpLnNlbGZBZGQoXy5zcXIoZS55KSkuc2VsZk11bHRpcGx5KGNzLnRyaUFyZWFEREZhc3QodCxuLGkpKSxvPV8uc3FyKG4ueCkuc2VsZkFkZChfLnNxcihuLnkpKS5zZWxmTXVsdGlwbHkoY3MudHJpQXJlYURERmFzdCh0LGUsaSkpLG49Xy5zcXIoaS54KS5zZWxmQWRkKF8uc3FyKGkueSkpLnNlbGZNdWx0aXBseShjcy50cmlBcmVhRERGYXN0KHQsZSxuKSk7cmV0dXJuIDA8ci5zZWxmU3VidHJhY3Qocykuc2VsZkFkZChvKS5zZWxmU3VidHJhY3QobikuZG91YmxlVmFsdWUoKX0sY3MuaXNJbkNpcmNsZUNDPWZ1bmN0aW9uKHQsZSxuLGkpe249Wm4uY2lyY3VtY2VudHJlKHQsZSxuKSx0PXQuZGlzdGFuY2Uobik7cmV0dXJuIGkuZGlzdGFuY2UobiktdDw9MH0sY3MuaXNJbkNpcmNsZU5vcm1hbGl6ZWQ9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dC54LWkueCxzPXQueS1pLnksbz1lLngtaS54LHQ9ZS55LWkueSxlPW4ueC1pLngsaT1uLnktaS55O3JldHVybiAwPChyKnIrcypzKSoobyppLWUqdCkrKG8qbyt0KnQpKihlKnMtcippKSsoZSplK2kqaSkqKHIqdC1vKnMpfSxjcy5pc0luQ2lyY2xlRERTbG93PWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPV8udmFsdWVPZihpLngpLHM9Xy52YWx1ZU9mKGkueSksbz1fLnZhbHVlT2YodC54KSxhPV8udmFsdWVPZih0LnkpLHU9Xy52YWx1ZU9mKGUueCksbD1fLnZhbHVlT2YoZS55KSxoPV8udmFsdWVPZihuLngpLGk9Xy52YWx1ZU9mKG4ueSksdD1vLm11bHRpcGx5KG8pLmFkZChhLm11bHRpcGx5KGEpKS5tdWx0aXBseShjcy50cmlBcmVhRERTbG93KHUsbCxoLGkscixzKSksZT11Lm11bHRpcGx5KHUpLmFkZChsLm11bHRpcGx5KGwpKS5tdWx0aXBseShjcy50cmlBcmVhRERTbG93KG8sYSxoLGkscixzKSksbj1oLm11bHRpcGx5KGgpLmFkZChpLm11bHRpcGx5KGkpKS5tdWx0aXBseShjcy50cmlBcmVhRERTbG93KG8sYSx1LGwscixzKSksaT1yLm11bHRpcGx5KHIpLmFkZChzLm11bHRpcGx5KHMpKS5tdWx0aXBseShjcy50cmlBcmVhRERTbG93KG8sYSx1LGwsaCxpKSk7cmV0dXJuIDA8dC5zdWJ0cmFjdChlKS5hZGQobikuc3VidHJhY3QoaSkuZG91YmxlVmFsdWUoKX0sY3MuaXNJbkNpcmNsZU5vblJvYnVzdD1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gMDwodC54KnQueCt0LnkqdC55KSpjcy50cmlBcmVhKGUsbixpKS0oZS54KmUueCtlLnkqZS55KSpjcy50cmlBcmVhKHQsbixpKSsobi54Km4ueCtuLnkqbi55KSpjcy50cmlBcmVhKHQsZSxpKS0oaS54KmkueCtpLnkqaS55KSpjcy50cmlBcmVhKHQsZSxuKX0sY3MuaXNJbkNpcmNsZVJvYnVzdD1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gY3MuaXNJbkNpcmNsZU5vcm1hbGl6ZWQodCxlLG4saSl9LGNzLnRyaUFyZWFERFNsb3c9ZnVuY3Rpb24odCxlLG4saSxyLHMpe3JldHVybiBuLnN1YnRyYWN0KHQpLm11bHRpcGx5KHMuc3VidHJhY3QoZSkpLnN1YnRyYWN0KGkuc3VidHJhY3QoZSkubXVsdGlwbHkoci5zdWJ0cmFjdCh0KSkpfSxjcy50cmlBcmVhRERGYXN0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1fLnZhbHVlT2YoZS54KS5zZWxmU3VidHJhY3QodC54KS5zZWxmTXVsdGlwbHkoXy52YWx1ZU9mKG4ueSkuc2VsZlN1YnRyYWN0KHQueSkpLHQ9Xy52YWx1ZU9mKGUueSkuc2VsZlN1YnRyYWN0KHQueSkuc2VsZk11bHRpcGx5KF8udmFsdWVPZihuLngpLnNlbGZTdWJ0cmFjdCh0LngpKTtyZXR1cm4gaS5zZWxmU3VidHJhY3QodCl9LGUoZnMucHJvdG90eXBlLHtjaXJjbGVDZW50ZXI6ZnVuY3Rpb24oZSxuKXt2YXIgaT1uZXcgZnModGhpcy5nZXRYKCksdGhpcy5nZXRZKCkpLHQ9bmV3IEYodGhpcy5iaXNlY3RvcihpLGUpLHRoaXMuYmlzZWN0b3IoZSxuKSkscj1udWxsO3RyeXtyPW5ldyBmcyh0LmdldFgoKSx0LmdldFkoKSl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgdykpdGhyb3cgdDtBLmVyci5wcmludGxuKFwiYTogXCIraStcIiAgYjogXCIrZStcIiAgYzogXCIrbiksQS5lcnIucHJpbnRsbih0KX1yZXR1cm4gcn0sZG90OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnAueCp0LmdldFgoKSt0aGlzLnAueSp0LmdldFkoKX0sbWFnbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy5wLngqdGhpcy5wLngrdGhpcy5wLnkqdGhpcy5wLnkpfSxnZXRaOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucC56fSxiaXNlY3RvcjpmdW5jdGlvbih0LGUpe3ZhciBuPWUuZ2V0WCgpLXQuZ2V0WCgpLGk9ZS5nZXRZKCktdC5nZXRZKCksZT1uZXcgRih0LmdldFgoKStuLzIsdC5nZXRZKCkraS8yLDEpLGk9bmV3IEYodC5nZXRYKCktaStuLzIsdC5nZXRZKCkrbitpLzIsMSk7cmV0dXJuIG5ldyBGKGUsaSl9LGVxdWFsczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMucC54PT09dC5nZXRYKCkmJnRoaXMucC55PT09dC5nZXRZKCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5wLmRpc3RhbmNlKGUuZ2V0Q29vcmRpbmF0ZSgpKTx0fX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB9LGlzSW5DaXJjbGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBjcy5pc0luQ2lyY2xlUm9idXN0KHQucCxlLnAsbi5wLHRoaXMucCl9LGludGVycG9sYXRlWlZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldFgoKSxyPXQuZ2V0WSgpLHM9ZS5nZXRYKCktaSxvPW4uZ2V0WCgpLWksYT1lLmdldFkoKS1yLHU9bi5nZXRZKCktcixsPXMqdS1vKmEsaT10aGlzLmdldFgoKS1pLHI9dGhpcy5nZXRZKCktcixvPSh1KmktbypyKS9sLGw9KC1hKmkrcypyKS9sO3JldHVybiB0LmdldFooKStvKihlLmdldFooKS10LmdldFooKSkrbCoobi5nZXRaKCktdC5nZXRaKCkpfSxtaWRQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGZzKCh0aGlzLnAueCt0LmdldFgoKSkvMiwodGhpcy5wLnkrdC5nZXRZKCkpLzIsKHRoaXMucC56K3QuZ2V0WigpKS8yKX0scmlnaHRPZjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0NDVyh0LmRlc3QoKSx0Lm9yaWcoKSl9LGlzQ0NXOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA8KHQucC54LXRoaXMucC54KSooZS5wLnktdGhpcy5wLnkpLSh0LnAueS10aGlzLnAueSkqKGUucC54LXRoaXMucC54KX0sZ2V0WDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnAueH0sY3Jvc3NQcm9kdWN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnAueCp0LmdldFkoKS10aGlzLnAueSp0LmdldFgoKX0sc2V0WjpmdW5jdGlvbih0KXt0aGlzLnAuej10fSx0aW1lczpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGZzKHQqdGhpcy5wLngsdCp0aGlzLnAueSl9LGNyb3NzOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmcyh0aGlzLnAueSwtdGhpcy5wLngpfSxsZWZ0T2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXNDQ1codC5vcmlnKCksdC5kZXN0KCkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiUE9JTlQgKFwiK3RoaXMucC54K1wiIFwiK3RoaXMucC55K1wiKVwifSxzdWI6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBmcyh0aGlzLnAueC10LmdldFgoKSx0aGlzLnAueS10LmdldFkoKSl9LGdldFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wLnl9LGNsYXNzaWZ5OmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5zdWIodCksaT10aGlzLnN1Yih0KSxyPW4uY3Jvc3NQcm9kdWN0KGkpO3JldHVybiAwPHI/ZnMuTEVGVDpyPDA/ZnMuUklHSFQ6bi5nZXRYKCkqaS5nZXRYKCk8MHx8bi5nZXRZKCkqaS5nZXRZKCk8MD9mcy5CRUhJTkQ6bi5tYWduKCk8aS5tYWduKCk/ZnMuQkVZT05EOnQuZXF1YWxzKHRoaXMpP2ZzLk9SSUdJTjplLmVxdWFscyh0aGlzKT9mcy5ERVNUSU5BVElPTjpmcy5CRVRXRUVOfSxzdW06ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBmcyh0aGlzLnAueCt0LmdldFgoKSx0aGlzLnAueSt0LmdldFkoKSl9LGRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhlLmdldFgoKS10LmdldFgoKSwyKStNYXRoLnBvdyhlLmdldFkoKS10LmdldFkoKSwyKSl9LGNpcmN1bVJhZGl1c1JhdGlvOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jaXJjbGVDZW50ZXIodCxlKSxpPXRoaXMuZGlzdGFuY2Uobix0KSxuPXRoaXMuZGlzdGFuY2UodGhpcyx0KSx0PXRoaXMuZGlzdGFuY2UodCxlKTtyZXR1cm4gdDxuJiYobj10KSwodD10aGlzLmRpc3RhbmNlKGUsdGhpcykpPG4mJihuPXQpLGkvbn0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZnN9fSksZnMuaW50ZXJwb2xhdGVaPWZ1bmN0aW9uKCl7aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPWUuZGlzdGFuY2Uobikscj10LmRpc3RhbmNlKGUpLHM9bi56LWUuejtyZXR1cm4gZS56K3IvaSpzfWlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV0sdT1hcmd1bWVudHNbMl0sbD1hcmd1bWVudHNbM10saD1hLngsdD1hLnksbj11LngtaCxlPWwueC1oLHI9dS55LXQsaT1sLnktdCxzPW4qaS1lKnIsaD1vLngtaCx0PW8ueS10LGU9KGkqaC1lKnQpL3Mscz0oLXIqaCtuKnQpL3M7cmV0dXJuIGEueitlKih1LnotYS56KStzKihsLnotYS56KX19LGZzLkxFRlQ9MCxmcy5SSUdIVD0xLGZzLkJFWU9ORD0yLGZzLkJFSElORD0zLGZzLkJFVFdFRU49NCxmcy5PUklHSU49NSxmcy5ERVNUSU5BVElPTj02LGEoZ3MsZnMpLGUoZ3MucHJvdG90eXBlLHtnZXRDb25zdHJhaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RyYWludH0sc2V0T25Db25zdHJhaW50OmZ1bmN0aW9uKHQpe3RoaXMuX2lzT25Db25zdHJhaW50PXR9LG1lcmdlOmZ1bmN0aW9uKHQpe3QuX2lzT25Db25zdHJhaW50JiYodGhpcy5faXNPbkNvbnN0cmFpbnQ9ITAsdGhpcy5jb25zdHJhaW50PXQuY29uc3RyYWludCl9LGlzT25Db25zdHJhaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzT25Db25zdHJhaW50fSxzZXRDb25zdHJhaW50OmZ1bmN0aW9uKHQpe3RoaXMuX2lzT25Db25zdHJhaW50PSEwLHRoaXMuY29uc3RyYWludD10fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBnc319KSxlKGRzLnByb3RvdHlwZSx7ZXF1YWxzTm9uT3JpZW50ZWQ6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmVxdWFsc09yaWVudGVkKHQpfHwhIXRoaXMuZXF1YWxzT3JpZW50ZWQodC5zeW0oKSl9LHRvTGluZVNlZ21lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEp0KHRoaXMudmVydGV4LmdldENvb3JkaW5hdGUoKSx0aGlzLmRlc3QoKS5nZXRDb29yZGluYXRlKCkpfSxkZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3ltKCkub3JpZygpfSxvTmV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHR9LGVxdWFsc09yaWVudGVkOmZ1bmN0aW9uKHQpe3JldHVybiEoIXRoaXMub3JpZygpLmdldENvb3JkaW5hdGUoKS5lcXVhbHMyRCh0Lm9yaWcoKS5nZXRDb29yZGluYXRlKCkpfHwhdGhpcy5kZXN0KCkuZ2V0Q29vcmRpbmF0ZSgpLmVxdWFsczJEKHQuZGVzdCgpLmdldENvb3JkaW5hdGUoKSkpfSxkTmV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN5bSgpLm9OZXh0KCkuc3ltKCl9LGxQcmV2OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5zeW0oKX0sclByZXY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zeW0oKS5vTmV4dCgpfSxyb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm90fSxvUHJldjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb3QubmV4dC5fcm90fSxzeW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm90Ll9yb3R9LHNldE9yaWc6ZnVuY3Rpb24odCl7dGhpcy52ZXJ0ZXg9dH0sbE5leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZSb3QoKS5vTmV4dCgpLnJvdCgpfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnKCkuZ2V0Q29vcmRpbmF0ZSgpLmRpc3RhbmNlKHRoaXMuZGVzdCgpLmdldENvb3JkaW5hdGUoKSl9LGludlJvdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb3Quc3ltKCl9LHNldERlc3Q6ZnVuY3Rpb24odCl7dGhpcy5zeW0oKS5zZXRPcmlnKHQpfSxzZXREYXRhOmZ1bmN0aW9uKHQpe3RoaXMuZGF0YT10fSxnZXREYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX0sZGVsZXRlOmZ1bmN0aW9uKCl7dGhpcy5fcm90PW51bGx9LG9yaWc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZXJ0ZXh9LHJOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdC5uZXh0LmludlJvdCgpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PXRoaXMudmVydGV4LmdldENvb3JkaW5hdGUoKSxlPXRoaXMuZGVzdCgpLmdldENvb3JkaW5hdGUoKTtyZXR1cm4gWHQudG9MaW5lU3RyaW5nKHQsZSl9LGlzTGl2ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5fcm90fSxnZXRQcmltYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZygpLmdldENvb3JkaW5hdGUoKS5jb21wYXJlVG8odGhpcy5kZXN0KCkuZ2V0Q29vcmRpbmF0ZSgpKTw9MD90aGlzOnRoaXMuc3ltKCl9LGRQcmV2OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52Um90KCkub05leHQoKS5pbnZSb3QoKX0sc2V0TmV4dDpmdW5jdGlvbih0KXt0aGlzLm5leHQ9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZHN9fSksZHMubWFrZUVkZ2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgZHMsaT1uZXcgZHMscj1uZXcgZHMscz1uZXcgZHM7KCgoKG4uX3JvdD1pKS5fcm90PXIpLl9yb3Q9cykuX3JvdD1uKS5zZXROZXh0KG4pLGkuc2V0TmV4dChzKSxyLnNldE5leHQocikscy5zZXROZXh0KGkpO3JldHVybiBuLnNldE9yaWcodCksbi5zZXREZXN0KGUpLG59LGRzLnN3YXA9ZnVuY3Rpb24odCl7dmFyIGU9dC5vUHJldigpLG49dC5zeW0oKS5vUHJldigpO2RzLnNwbGljZSh0LGUpLGRzLnNwbGljZSh0LnN5bSgpLG4pLGRzLnNwbGljZSh0LGUubE5leHQoKSksZHMuc3BsaWNlKHQuc3ltKCksbi5sTmV4dCgpKSx0LnNldE9yaWcoZS5kZXN0KCkpLHQuc2V0RGVzdChuLmRlc3QoKSl9LGRzLnNwbGljZT1mdW5jdGlvbih0LGUpe3ZhciBuPXQub05leHQoKS5yb3QoKSxpPWUub05leHQoKS5yb3QoKSxyPWUub05leHQoKSxzPXQub05leHQoKSxvPWkub05leHQoKSxhPW4ub05leHQoKTt0LnNldE5leHQociksZS5zZXROZXh0KHMpLG4uc2V0TmV4dChvKSxpLnNldE5leHQoYSl9LGRzLmNvbm5lY3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj1kcy5tYWtlRWRnZSh0LmRlc3QoKSxlLm9yaWcoKSk7cmV0dXJuIGRzLnNwbGljZShuLHQubE5leHQoKSksZHMuc3BsaWNlKG4uc3ltKCksZSksbn0sZShwcy5wcm90b3R5cGUse2luc2VydFNpdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdWJkaXYubG9jYXRlKHQpO2lmKHRoaXMuc3ViZGl2LmlzVmVydGV4T2ZFZGdlKGUsdCkpcmV0dXJuIGU7dGhpcy5zdWJkaXYuaXNPbkVkZ2UoZSx0LmdldENvb3JkaW5hdGUoKSkmJihlPWUub1ByZXYoKSx0aGlzLnN1YmRpdi5kZWxldGUoZS5vTmV4dCgpKSk7dmFyIG49dGhpcy5zdWJkaXYubWFrZUVkZ2UoZS5vcmlnKCksdCk7ZHMuc3BsaWNlKG4sZSk7Zm9yKHZhciBpPW47KGU9KG49dGhpcy5zdWJkaXYuY29ubmVjdChlLG4uc3ltKCkpKS5vUHJldigpKS5sTmV4dCgpIT09aTspO2Zvcig7Oyl7dmFyIHI9ZS5vUHJldigpO2lmKHIuZGVzdCgpLnJpZ2h0T2YoZSkmJnQuaXNJbkNpcmNsZShlLm9yaWcoKSxyLmRlc3QoKSxlLmRlc3QoKSkpZHMuc3dhcChlKSxlPWUub1ByZXYoKTtlbHNle2lmKGUub05leHQoKT09PWkpcmV0dXJuIG47ZT1lLm9OZXh0KCkubFByZXYoKX19fSxpbnNlcnRTaXRlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5pbnNlcnRTaXRlKG4pfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcHN9fSksZShtcy5wcm90b3R5cGUse2xvY2F0ZTpmdW5jdGlvbih0KXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG1zfX0pLGUoeXMucHJvdG90eXBlLHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5sYXN0RWRnZT10aGlzLmZpbmRFZGdlKCl9LGxvY2F0ZTpmdW5jdGlvbih0KXt0aGlzLmxhc3RFZGdlLmlzTGl2ZSgpfHx0aGlzLmluaXQoKTt0PXRoaXMuc3ViZGl2LmxvY2F0ZUZyb21FZGdlKHQsdGhpcy5sYXN0RWRnZSk7cmV0dXJuIHRoaXMubGFzdEVkZ2U9dH0sZmluZEVkZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdWJkaXYuZ2V0RWRnZXMoKS5pdGVyYXRvcigpLm5leHQoKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bbXNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB5c319KSxhKHZzLHApLGUodnMucHJvdG90eXBlLHtnZXRTZWdtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB2c319KSx2cy5tc2dXaXRoU3BhdGlhbD1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT09ZT90K1wiIFsgXCIrZStcIiBdXCI6dH0sZSh4cy5wcm90b3R5cGUse3Zpc2l0OmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4geHN9fSksZShFcy5wcm90b3R5cGUse2dldFRyaWFuZ2xlVmVydGljZXM6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IENzO3JldHVybiB0aGlzLnZpc2l0VHJpYW5nbGVzKGUsdCksZS5nZXRUcmlhbmdsZVZlcnRpY2VzKCl9LGlzRnJhbWVWZXJ0ZXg6ZnVuY3Rpb24odCl7cmV0dXJuISF0LmVxdWFscyh0aGlzLmZyYW1lVmVydGV4WzBdKXx8KCEhdC5lcXVhbHModGhpcy5mcmFtZVZlcnRleFsxXSl8fCEhdC5lcXVhbHModGhpcy5mcmFtZVZlcnRleFsyXSkpfSxpc1ZlcnRleE9mRWRnZTpmdW5jdGlvbih0LGUpe3JldHVybiEoIWUuZXF1YWxzKHQub3JpZygpLHRoaXMudG9sZXJhbmNlKSYmIWUuZXF1YWxzKHQuZGVzdCgpLHRoaXMudG9sZXJhbmNlKSl9LGNvbm5lY3Q6ZnVuY3Rpb24odCxlKXtlPWRzLmNvbm5lY3QodCxlKTtyZXR1cm4gdGhpcy5xdWFkRWRnZXMuYWRkKGUpLGV9LGdldFZvcm9ub2lDZWxsUG9seWdvbjpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBJLGk9dDtkb3t2YXIgcj10LnJvdCgpLm9yaWcoKS5nZXRDb29yZGluYXRlKCl9d2hpbGUobi5hZGQociksKHQ9dC5vUHJldigpKSE9PWkpO3ZhciBzPW5ldyBOO3MuYWRkQWxsKG4sITEpLHMuY2xvc2VSaW5nKCkscy5zaXplKCk8NCYmKEEub3V0LnByaW50bG4ocykscy5hZGQocy5nZXQocy5zaXplKCktMSksITApKTtzPXMudG9Db29yZGluYXRlQXJyYXkoKSxlPWUuY3JlYXRlUG9seWdvbihlLmNyZWF0ZUxpbmVhclJpbmcocyksbnVsbCkscz1pLm9yaWcoKTtyZXR1cm4gZS5zZXRVc2VyRGF0YShzLmdldENvb3JkaW5hdGUoKSksZX0sc2V0TG9jYXRvcjpmdW5jdGlvbih0KXt0aGlzLmxvY2F0b3I9dH0saW5pdFN1YmRpdjpmdW5jdGlvbigpe3ZhciB0PXRoaXMubWFrZUVkZ2UodGhpcy5mcmFtZVZlcnRleFswXSx0aGlzLmZyYW1lVmVydGV4WzFdKSxlPXRoaXMubWFrZUVkZ2UodGhpcy5mcmFtZVZlcnRleFsxXSx0aGlzLmZyYW1lVmVydGV4WzJdKTtkcy5zcGxpY2UodC5zeW0oKSxlKTt2YXIgbj10aGlzLm1ha2VFZGdlKHRoaXMuZnJhbWVWZXJ0ZXhbMl0sdGhpcy5mcmFtZVZlcnRleFswXSk7cmV0dXJuIGRzLnNwbGljZShlLnN5bSgpLG4pLGRzLnNwbGljZShuLnN5bSgpLHQpLHR9LGlzRnJhbWVCb3JkZXJFZGdlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSgzKS5maWxsKG51bGwpO0VzLmdldFRyaWFuZ2xlRWRnZXModCxlKTtlPW5ldyBBcnJheSgzKS5maWxsKG51bGwpO0VzLmdldFRyaWFuZ2xlRWRnZXModC5zeW0oKSxlKTtlPXQubE5leHQoKS5kZXN0KCk7aWYodGhpcy5pc0ZyYW1lVmVydGV4KGUpKXJldHVybiEwO3Q9dC5zeW0oKS5sTmV4dCgpLmRlc3QoKTtyZXR1cm4hIXRoaXMuaXNGcmFtZVZlcnRleCh0KX0sbWFrZUVkZ2U6ZnVuY3Rpb24odCxlKXtlPWRzLm1ha2VFZGdlKHQsZSk7cmV0dXJuIHRoaXMucXVhZEVkZ2VzLmFkZChlKSxlfSx2aXNpdFRyaWFuZ2xlczpmdW5jdGlvbih0LGUpe3RoaXMudmlzaXRlZEtleSsrO3ZhciBuPW5ldyBlZTtuLnB1c2godGhpcy5zdGFydGluZ0VkZ2UpO2Zvcih2YXIgaT1uZXcgUTshbi5lbXB0eSgpOyl7dmFyIHI9bi5wb3AoKTtpLmNvbnRhaW5zKHIpfHxudWxsIT09KHI9dGhpcy5mZXRjaFRyaWFuZ2xlVG9WaXNpdChyLG4sZSxpKSkmJnQudmlzaXQocil9fSxpc0ZyYW1lRWRnZTpmdW5jdGlvbih0KXtyZXR1cm4hKCF0aGlzLmlzRnJhbWVWZXJ0ZXgodC5vcmlnKCkpJiYhdGhpcy5pc0ZyYW1lVmVydGV4KHQuZGVzdCgpKSl9LGlzT25FZGdlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2VnLnNldENvb3JkaW5hdGVzKHQub3JpZygpLmdldENvb3JkaW5hdGUoKSx0LmRlc3QoKS5nZXRDb29yZGluYXRlKCkpLHRoaXMuc2VnLmRpc3RhbmNlKGUpPHRoaXMuZWRnZUNvaW5jaWRlbmNlVG9sZXJhbmNlfSxnZXRFbnZlbG9wZTpmdW5jdGlvbigpe3JldHVybiBuZXcgQyh0aGlzLmZyYW1lRW52KX0sY3JlYXRlRnJhbWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRXaWR0aCgpLG49dC5nZXRIZWlnaHQoKSxpPW48ZT8xMCplOjEwKm47dGhpcy5mcmFtZVZlcnRleFswXT1uZXcgZnMoKHQuZ2V0TWF4WCgpK3QuZ2V0TWluWCgpKS8yLHQuZ2V0TWF4WSgpK2kpLHRoaXMuZnJhbWVWZXJ0ZXhbMV09bmV3IGZzKHQuZ2V0TWluWCgpLWksdC5nZXRNaW5ZKCktaSksdGhpcy5mcmFtZVZlcnRleFsyXT1uZXcgZnModC5nZXRNYXhYKCkraSx0LmdldE1pblkoKS1pKSx0aGlzLmZyYW1lRW52PW5ldyBDKHRoaXMuZnJhbWVWZXJ0ZXhbMF0uZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuZnJhbWVWZXJ0ZXhbMV0uZ2V0Q29vcmRpbmF0ZSgpKSx0aGlzLmZyYW1lRW52LmV4cGFuZFRvSW5jbHVkZSh0aGlzLmZyYW1lVmVydGV4WzJdLmdldENvb3JkaW5hdGUoKSl9LGdldFRyaWFuZ2xlQ29vcmRpbmF0ZXM6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFNzO3JldHVybiB0aGlzLnZpc2l0VHJpYW5nbGVzKGUsdCksZS5nZXRUcmlhbmdsZXMoKX0sZ2V0VmVydGljZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBRLG49dGhpcy5xdWFkRWRnZXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpLHI9aS5vcmlnKCk7IXQmJnRoaXMuaXNGcmFtZVZlcnRleChyKXx8ZS5hZGQocik7aT1pLmRlc3QoKTshdCYmdGhpcy5pc0ZyYW1lVmVydGV4KGkpfHxlLmFkZChpKX1yZXR1cm4gZX0sZmV0Y2hUcmlhbmdsZVRvVmlzaXQ6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dCxzPTAsbz0hMTtkb3t0aGlzLnRyaUVkZ2VzW3NdPXIsdGhpcy5pc0ZyYW1lRWRnZShyKSYmKG89ITApO3ZhciBhPXIuc3ltKCl9d2hpbGUoaS5jb250YWlucyhhKXx8ZS5wdXNoKGEpLGkuYWRkKHIpLHMrKywocj1yLmxOZXh0KCkpIT09dCk7cmV0dXJuIG8mJiFuP251bGw6dGhpcy50cmlFZGdlc30sZ2V0RWRnZXM6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5xdWFkRWRnZXM7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLmdldFByaW1hcnlFZGdlcyghMSksbj1uZXcgQXJyYXkoZS5zaXplKCkpLmZpbGwobnVsbCksaT0wLHI9ZS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHM9ci5uZXh0KCk7bltpKytdPXQuY3JlYXRlTGluZVN0cmluZyhbcy5vcmlnKCkuZ2V0Q29vcmRpbmF0ZSgpLHMuZGVzdCgpLmdldENvb3JkaW5hdGUoKV0pfXJldHVybiB0LmNyZWF0ZU11bHRpTGluZVN0cmluZyhuKX19LGdldFZlcnRleFVuaXF1ZUVkZ2VzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPW5ldyBRLGk9dGhpcy5xdWFkRWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpLHM9ci5vcmlnKCk7bi5jb250YWlucyhzKXx8KG4uYWRkKHMpLCF0JiZ0aGlzLmlzRnJhbWVWZXJ0ZXgocyl8fGUuYWRkKHIpKTtzPXIuc3ltKCkscj1zLm9yaWcoKTtuLmNvbnRhaW5zKHIpfHwobi5hZGQociksIXQmJnRoaXMuaXNGcmFtZVZlcnRleChyKXx8ZS5hZGQocykpfXJldHVybiBlfSxnZXRUcmlhbmdsZUVkZ2VzOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBOcztyZXR1cm4gdGhpcy52aXNpdFRyaWFuZ2xlcyhlLHQpLGUuZ2V0VHJpYW5nbGVFZGdlcygpfSxnZXRQcmltYXJ5RWRnZXM6ZnVuY3Rpb24odCl7dGhpcy52aXNpdGVkS2V5Kys7dmFyIGU9bmV3IEksbj1uZXcgZWU7bi5wdXNoKHRoaXMuc3RhcnRpbmdFZGdlKTtmb3IodmFyIGk9bmV3IFE7IW4uZW1wdHkoKTspe3ZhciByLHM9bi5wb3AoKTtpLmNvbnRhaW5zKHMpfHwocj1zLmdldFByaW1hcnkoKSwhdCYmdGhpcy5pc0ZyYW1lRWRnZShyKXx8ZS5hZGQociksbi5wdXNoKHMub05leHQoKSksbi5wdXNoKHMuc3ltKCkub05leHQoKSksaS5hZGQocyksaS5hZGQocy5zeW0oKSkpfXJldHVybiBlfSxkZWxldGU6ZnVuY3Rpb24odCl7ZHMuc3BsaWNlKHQsdC5vUHJldigpKSxkcy5zcGxpY2UodC5zeW0oKSx0LnN5bSgpLm9QcmV2KCkpO3ZhciBlPXQuc3ltKCksbj10LnJvdCgpLGk9dC5yb3QoKS5zeW0oKTt0aGlzLnF1YWRFZGdlcy5yZW1vdmUodCksdGhpcy5xdWFkRWRnZXMucmVtb3ZlKGUpLHRoaXMucXVhZEVkZ2VzLnJlbW92ZShuKSx0aGlzLnF1YWRFZGdlcy5yZW1vdmUoaSksdC5kZWxldGUoKSxlLmRlbGV0ZSgpLG4uZGVsZXRlKCksaS5kZWxldGUoKX0sbG9jYXRlRnJvbUVkZ2U6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxpPXRoaXMucXVhZEVkZ2VzLnNpemUoKSxyPWU7Oyl7aWYoaTwrK24pdGhyb3cgbmV3IHZzKHIudG9MaW5lU2VnbWVudCgpKTtpZih0LmVxdWFscyhyLm9yaWcoKSl8fHQuZXF1YWxzKHIuZGVzdCgpKSlicmVhaztpZih0LnJpZ2h0T2Yocikpcj1yLnN5bSgpO2Vsc2UgaWYodC5yaWdodE9mKHIub05leHQoKSkpe2lmKHQucmlnaHRPZihyLmRQcmV2KCkpKWJyZWFrO3I9ci5kUHJldigpfWVsc2Ugcj1yLm9OZXh0KCl9cmV0dXJuIHJ9LGdldFRvbGVyYW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvbGVyYW5jZX0sZ2V0Vm9yb25vaUNlbGxQb2x5Z29uczpmdW5jdGlvbih0KXt0aGlzLnZpc2l0VHJpYW5nbGVzKG5ldyBJcywhMCk7Zm9yKHZhciBlPW5ldyBJLG49dGhpcy5nZXRWZXJ0ZXhVbmlxdWVFZGdlcyghMSkuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuYWRkKHRoaXMuZ2V0Vm9yb25vaUNlbGxQb2x5Z29uKGksdCkpfXJldHVybiBlfSxnZXRWb3Jvbm9pRGlhZ3JhbTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFZvcm9ub2lDZWxsUG9seWdvbnModCk7cmV0dXJuIHQuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKFl0LnRvR2VvbWV0cnlBcnJheShlKSl9LGdldFRyaWFuZ2xlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5nZXRUcmlhbmdsZUNvb3JkaW5hdGVzKCExKSxuPW5ldyBBcnJheShlLnNpemUoKSkuZmlsbChudWxsKSxpPTAscj1lLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgcz1yLm5leHQoKTtuW2krK109dC5jcmVhdGVQb2x5Z29uKHQuY3JlYXRlTGluZWFyUmluZyhzKSxudWxsKX1yZXR1cm4gdC5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obil9LGluc2VydFNpdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sb2NhdGUodCk7aWYodC5lcXVhbHMoZS5vcmlnKCksdGhpcy50b2xlcmFuY2UpfHx0LmVxdWFscyhlLmRlc3QoKSx0aGlzLnRvbGVyYW5jZSkpcmV0dXJuIGU7dmFyIG49dGhpcy5tYWtlRWRnZShlLm9yaWcoKSx0KTtkcy5zcGxpY2UobixlKTtmb3IodmFyIGk9bjsoZT0obj10aGlzLmNvbm5lY3QoZSxuLnN5bSgpKSkub1ByZXYoKSkubE5leHQoKSE9PWk7KTtyZXR1cm4gaX0sbG9jYXRlOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZnMpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5sb2NhdG9yLmxvY2F0ZSh0KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5sb2NhdG9yLmxvY2F0ZShuZXcgZnMoZSkpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sZT10aGlzLmxvY2F0b3IubG9jYXRlKG5ldyBmcyh0KSk7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7dmFyIGk9ZTtlLmRlc3QoKS5nZXRDb29yZGluYXRlKCkuZXF1YWxzMkQodCkmJihpPWUuc3ltKCkpO3ZhciByPWk7ZG97aWYoci5kZXN0KCkuZ2V0Q29vcmRpbmF0ZSgpLmVxdWFsczJEKG4pKXJldHVybiByfXdoaWxlKChyPXIub05leHQoKSkhPT1pKTtyZXR1cm4gbnVsbH19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEVzfX0pLEVzLmdldFRyaWFuZ2xlRWRnZXM9ZnVuY3Rpb24odCxlKXtpZihlWzBdPXQsZVsxXT1lWzBdLmxOZXh0KCksZVsyXT1lWzFdLmxOZXh0KCksZVsyXS5sTmV4dCgpIT09ZVswXSl0aHJvdyBuZXcgY30sZShJcy5wcm90b3R5cGUse3Zpc2l0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10WzBdLm9yaWcoKS5nZXRDb29yZGluYXRlKCksbj10WzFdLm9yaWcoKS5nZXRDb29yZGluYXRlKCksaT10WzJdLm9yaWcoKS5nZXRDb29yZGluYXRlKCkscj1uZXcgZnMoWm4uY2lyY3VtY2VudHJlKGUsbixpKSkscz0wO3M8MztzKyspdFtzXS5yb3QoKS5zZXRPcmlnKHIpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblt4c119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIElzfX0pLGUoTnMucHJvdG90eXBlLHtnZXRUcmlhbmdsZUVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpTGlzdH0sdmlzaXQ6ZnVuY3Rpb24odCl7dGhpcy50cmlMaXN0LmFkZCh0LmNsb25lKCkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblt4c119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE5zfX0pLGUoQ3MucHJvdG90eXBlLHt2aXNpdDpmdW5jdGlvbih0KXt0aGlzLnRyaUxpc3QuYWRkKFt0WzBdLm9yaWcoKSx0WzFdLm9yaWcoKSx0WzJdLm9yaWcoKV0pfSxnZXRUcmlhbmdsZVZlcnRpY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpTGlzdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5beHNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDc319KSxlKFNzLnByb3RvdHlwZSx7Y2hlY2tUcmlhbmdsZVNpemU6ZnVuY3Rpb24odCl7Mjw9dC5sZW5ndGg/WHQudG9MaW5lU3RyaW5nKHRbMF0sdFsxXSk6MTw9dC5sZW5ndGgmJlh0LnRvUG9pbnQodFswXSl9LHZpc2l0OmZ1bmN0aW9uKHQpe3RoaXMuY29vcmRMaXN0LmNsZWFyKCk7Zm9yKHZhciBlPTA7ZTwzO2UrKyl7dmFyIG49dFtlXS5vcmlnKCk7dGhpcy5jb29yZExpc3QuYWRkKG4uZ2V0Q29vcmRpbmF0ZSgpKX1pZigwPHRoaXMuY29vcmRMaXN0LnNpemUoKSl7dGhpcy5jb29yZExpc3QuY2xvc2VSaW5nKCk7dmFyIGk9dGhpcy5jb29yZExpc3QudG9Db29yZGluYXRlQXJyYXkoKTtpZig0IT09aS5sZW5ndGgpcmV0dXJuIG51bGw7dGhpcy50cmlDb29yZHMuYWRkKGkpfX0sZ2V0VHJpYW5nbGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpQ29vcmRzfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblt4c119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFNzfX0pLEVzLlRyaWFuZ2xlQ2lyY3VtY2VudHJlVmlzaXRvcj1JcyxFcy5UcmlhbmdsZUVkZ2VzTGlzdFZpc2l0b3I9TnMsRXMuVHJpYW5nbGVWZXJ0ZXhMaXN0VmlzaXRvcj1DcyxFcy5UcmlhbmdsZUNvb3JkaW5hdGVzVmlzaXRvcj1TcyxFcy5FREdFX0NPSU5DSURFTkNFX1RPTF9GQUNUT1I9MWUzLGUod3MucHJvdG90eXBlLHtnZXRMaW5lU2VnbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxzfSxnZXRFbmRaOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubHMuZ2V0Q29vcmRpbmF0ZSgxKS56fSxnZXRTdGFydFo6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5scy5nZXRDb29yZGluYXRlKDApLnp9LGludGVyc2VjdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5scy5pbnRlcnNlY3Rpb24odC5nZXRMaW5lU2VnbWVudCgpKX0sZ2V0U3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5scy5nZXRDb29yZGluYXRlKDApfSxnZXRFbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5scy5nZXRDb29yZGluYXRlKDEpfSxnZXRFbmRZOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubHMuZ2V0Q29vcmRpbmF0ZSgxKS55fSxnZXRTdGFydFg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5scy5nZXRDb29yZGluYXRlKDApLnh9LGVxdWFsc1RvcG86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubHMuZXF1YWxzVG9wbyh0LmdldExpbmVTZWdtZW50KCkpfSxnZXRTdGFydFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5scy5nZXRDb29yZGluYXRlKDApLnl9LHNldERhdGE6ZnVuY3Rpb24odCl7dGhpcy5kYXRhPXR9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxnZXRFbmRYOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubHMuZ2V0Q29vcmRpbmF0ZSgxKS54fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxzLnRvU3RyaW5nKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHdzfX0pLGUoTHMucHJvdG90eXBlLHt2aXNpdDpmdW5jdGlvbih0KXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIExzfX0pLGUoUnMucHJvdG90eXBlLHtpc1JlcGVhdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIDE8dGhpcy5jb3VudH0sZ2V0UmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yaWdodH0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB9LHNldExlZnQ6ZnVuY3Rpb24odCl7dGhpcy5sZWZ0PXR9LGdldFg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wLnh9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvdW50fSxnZXRMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdH0sZ2V0WTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnAueX0saW5jcmVtZW50OmZ1bmN0aW9uKCl7dGhpcy5jb3VudD10aGlzLmNvdW50KzF9LHNldFJpZ2h0OmZ1bmN0aW9uKHQpe3RoaXMucmlnaHQ9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUnN9fSksZShUcy5wcm90b3R5cGUse2luc2VydDpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaW5zZXJ0KHQsbnVsbCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtpZihudWxsPT09dGhpcy5yb290KXJldHVybiB0aGlzLnJvb3Q9bmV3IFJzKGUsbiksdGhpcy5yb290O2lmKDA8dGhpcy50b2xlcmFuY2Upe3Q9dGhpcy5maW5kQmVzdE1hdGNoTm9kZShlKTtpZihudWxsIT09dClyZXR1cm4gdC5pbmNyZW1lbnQoKSx0fXJldHVybiB0aGlzLmluc2VydEV4YWN0KGUsbil9fSxxdWVyeTpmdW5jdGlvbigpe3ZhciB0LGUsbj1hcmd1bWVudHMsaT10aGlzO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0scz1uZXcgSTtyZXR1cm4gdGhpcy5xdWVyeShyLHMpLHN9Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMmJlIoYXJndW1lbnRzWzFdLHYpPyh0PW5bMF0sZT1uWzFdLGkucXVlcnlOb2RlKGkucm9vdCx0LCEwLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltMc119LHZpc2l0OmZ1bmN0aW9uKHQpe2UuYWRkKHQpfX0pKTphcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMmJlIoYXJndW1lbnRzWzFdLExzKSYmKGk9YXJndW1lbnRzWzBdLHQ9YXJndW1lbnRzWzFdLHRoaXMucXVlcnlOb2RlKHRoaXMucm9vdCxpLCEwLHQpKSl9LHF1ZXJ5Tm9kZTpmdW5jdGlvbih0LGUsbixpKXtpZihudWxsPT09dClyZXR1cm4gbnVsbDt2YXIgcj1udWxsLHM9bnVsbCxvPW51bGwscz0obz1uPyhyPWUuZ2V0TWluWCgpLHM9ZS5nZXRNYXhYKCksdC5nZXRYKCkpOihyPWUuZ2V0TWluWSgpLHM9ZS5nZXRNYXhZKCksdC5nZXRZKCkpKTw9cztyPG8mJnRoaXMucXVlcnlOb2RlKHQuZ2V0TGVmdCgpLGUsIW4saSksZS5jb250YWlucyh0LmdldENvb3JkaW5hdGUoKSkmJmkudmlzaXQodCkscyYmdGhpcy5xdWVyeU5vZGUodC5nZXRSaWdodCgpLGUsIW4saSl9LGZpbmRCZXN0TWF0Y2hOb2RlOmZ1bmN0aW9uKHQpe3Q9bmV3IFBzKHQsdGhpcy50b2xlcmFuY2UpO3JldHVybiB0aGlzLnF1ZXJ5KHQucXVlcnlFbnZlbG9wZSgpLHQpLHQuZ2V0Tm9kZSgpfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnJvb3R9LGluc2VydEV4YWN0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMucm9vdCxpPXRoaXMucm9vdCxyPSEwLHM9ITA7bnVsbCE9PW47KXtpZihudWxsIT09bilpZih0LmRpc3RhbmNlKG4uZ2V0Q29vcmRpbmF0ZSgpKTw9dGhpcy50b2xlcmFuY2UpcmV0dXJuIG4uaW5jcmVtZW50KCksbjtzPXI/dC54PG4uZ2V0WCgpOnQueTxuLmdldFkoKSxpPW4sbj1zP24uZ2V0TGVmdCgpOm4uZ2V0UmlnaHQoKSxyPSFyfXRoaXMubnVtYmVyT2ZOb2Rlcz10aGlzLm51bWJlck9mTm9kZXMrMTtlPW5ldyBScyh0LGUpO3JldHVybiBzP2kuc2V0TGVmdChlKTppLnNldFJpZ2h0KGUpLGV9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFRzfX0pLFRzLnRvQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBUcy50b0Nvb3JkaW5hdGVzKHQsITEpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49bmV3IE4saT10Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KWZvcih2YXIgcj1pLm5leHQoKSxzPWU/ci5nZXRDb3VudCgpOjEsbz0wO288cztvKyspbi5hZGQoci5nZXRDb29yZGluYXRlKCksITApO3JldHVybiBuLnRvQ29vcmRpbmF0ZUFycmF5KCl9fSxlKFBzLnByb3RvdHlwZSx7dmlzaXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wLmRpc3RhbmNlKHQuZ2V0Q29vcmRpbmF0ZSgpKTtpZighKGU8PXRoaXMudG9sZXJhbmNlKSlyZXR1cm4gbnVsbDt2YXIgbj0hMTsobnVsbD09PXRoaXMubWF0Y2hOb2RlfHxlPHRoaXMubWF0Y2hEaXN0fHxudWxsIT09dGhpcy5tYXRjaE5vZGUmJmU9PT10aGlzLm1hdGNoRGlzdCYmdC5nZXRDb29yZGluYXRlKCkuY29tcGFyZVRvKHRoaXMubWF0Y2hOb2RlLmdldENvb3JkaW5hdGUoKSk8MSkmJihuPSEwKSxuJiYodGhpcy5tYXRjaE5vZGU9dCx0aGlzLm1hdGNoRGlzdD1lKX0scXVlcnlFbnZlbG9wZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBDKHRoaXMucCk7cmV0dXJuIHQuZXhwYW5kQnkodGhpcy50b2xlcmFuY2UpLHR9LGdldE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXRjaE5vZGV9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0xzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUHN9fSksVHMuQmVzdE1hdGNoVmlzaXRvcj1QcyxlKGJzLnByb3RvdHlwZSx7Z2V0SW5pdGlhbFZlcnRpY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbFZlcnRpY2VzfSxnZXRLRFQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZHR9LGVuZm9yY2VDb25zdHJhaW50czpmdW5jdGlvbigpe3RoaXMuYWRkQ29uc3RyYWludFZlcnRpY2VzKCk7Zm9yKHZhciB0PTA7dCsrLDA8dGhpcy5lbmZvcmNlR2FicmllbCh0aGlzLnNlZ21lbnRzKSYmdDxicy5NQVhfU1BMSVRfSVRFUjspO30saW5zZXJ0U2l0ZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuaW5zZXJ0U2l0ZShuKX19LGdldFZlcnRleEZhY3Rvcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZXJ0ZXhGYWN0b3J5fSxnZXRQb2ludEFycmF5OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSh0aGlzLmluaXRpYWxWZXJ0aWNlcy5zaXplKCkrdGhpcy5zZWdWZXJ0aWNlcy5zaXplKCkpLmZpbGwobnVsbCksZT0wLG49dGhpcy5pbml0aWFsVmVydGljZXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO3RbZSsrXT1pLmdldENvb3JkaW5hdGUoKX1mb3IodmFyIHI9dGhpcy5zZWdWZXJ0aWNlcy5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7aT1yLm5leHQoKTt0W2UrK109aS5nZXRDb29yZGluYXRlKCl9cmV0dXJuIHR9LHNldENvbnN0cmFpbnRzOmZ1bmN0aW9uKHQsZSl7dGhpcy5zZWdtZW50cz10LHRoaXMuc2VnVmVydGljZXM9ZX0sY29tcHV0ZUNvbnZleEh1bGw6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgWXQsdD1uZXcgaWUodGhpcy5nZXRQb2ludEFycmF5KCksdCk7dGhpcy5jb252ZXhIdWxsPXQuZ2V0Q29udmV4SHVsbCgpfSxhZGRDb25zdHJhaW50VmVydGljZXM6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVDb252ZXhIdWxsKCksdGhpcy5pbnNlcnRTaXRlcyh0aGlzLnNlZ1ZlcnRpY2VzKX0sZmluZE5vbkdhYnJpZWxQb2ludDpmdW5jdGlvbih0KXt2YXIgZT10LmdldFN0YXJ0KCksbj10LmdldEVuZCgpLGk9bmV3IGQoKGUueCtuLngpLzIsKGUueStuLnkpLzIpLHI9ZS5kaXN0YW5jZShpKSx0PW5ldyBDKGkpO3QuZXhwYW5kQnkocik7Zm9yKHZhciB0PXRoaXMua2R0LnF1ZXJ5KHQpLHM9bnVsbCxvPWcuTUFYX1ZBTFVFLGE9dC5pdGVyYXRvcigpO2EuaGFzTmV4dCgpOyl7dmFyIHUsbD1hLm5leHQoKS5nZXRDb29yZGluYXRlKCk7bC5lcXVhbHMyRChlKXx8bC5lcXVhbHMyRChuKXx8KHU9aS5kaXN0YW5jZShsKSk8ciYmKG51bGw9PT1zfHx1PG8pJiYocz1sLG89dSl9cmV0dXJuIHN9LGdldENvbnN0cmFpbnRTZWdtZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ21lbnRzfSxzZXRTcGxpdFBvaW50RmluZGVyOmZ1bmN0aW9uKHQpe3RoaXMuc3BsaXRGaW5kZXI9dH0sZ2V0Q29udmV4SHVsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnZleEh1bGx9LGdldFRvbGVyYW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvbGVyYW5jZX0sZW5mb3JjZUdhYnJpZWw6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJLG49MCxpPW5ldyBJLHI9dC5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIHMsbz1yLm5leHQoKSxhPXRoaXMuZmluZE5vbkdhYnJpZWxQb2ludChvKTtudWxsIT09YSYmKHRoaXMuc3BsaXRQdD10aGlzLnNwbGl0RmluZGVyLmZpbmRTcGxpdFBvaW50KG8sYSkscz10aGlzLmNyZWF0ZVZlcnRleCh0aGlzLnNwbGl0UHQsbyksdGhpcy5pbnNlcnRTaXRlKHMpLGE9bmV3IHdzKG8uZ2V0U3RhcnRYKCksby5nZXRTdGFydFkoKSxvLmdldFN0YXJ0WigpLHMuZ2V0WCgpLHMuZ2V0WSgpLHMuZ2V0WigpLG8uZ2V0RGF0YSgpKSxzPW5ldyB3cyhzLmdldFgoKSxzLmdldFkoKSxzLmdldFooKSxvLmdldEVuZFgoKSxvLmdldEVuZFkoKSxvLmdldEVuZFooKSxvLmdldERhdGEoKSksZS5hZGQoYSksZS5hZGQocyksaS5hZGQobyksbis9MSl9cmV0dXJuIHQucmVtb3ZlQWxsKGkpLHQuYWRkQWxsKGUpLG59LGNyZWF0ZVZlcnRleDpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1udWxsO3JldHVybiBudWxsIT09dGhpcy52ZXJ0ZXhGYWN0b3J5P3RoaXMudmVydGV4RmFjdG9yeS5jcmVhdGVWZXJ0ZXgodCxudWxsKTpuZXcgZ3ModCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSx0PWFyZ3VtZW50c1sxXSxlPW51bGw7cmV0dXJuKGU9bnVsbCE9PXRoaXMudmVydGV4RmFjdG9yeT90aGlzLnZlcnRleEZhY3RvcnkuY3JlYXRlVmVydGV4KG4sdCk6bmV3IGdzKG4pKS5zZXRPbkNvbnN0cmFpbnQoITApLGV9fSxnZXRTdWJkaXZpc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN1YmRpdn0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7dmFyIHQ9YnMuY29tcHV0ZVZlcnRleEVudmVsb3BlKHRoaXMuaW5pdGlhbFZlcnRpY2VzKSxlPWJzLmNvbXB1dGVWZXJ0ZXhFbnZlbG9wZSh0aGlzLnNlZ1ZlcnRpY2VzKSxuPW5ldyBDKHQpO24uZXhwYW5kVG9JbmNsdWRlKGUpO3Q9LjIqbi5nZXRXaWR0aCgpLGU9LjIqbi5nZXRIZWlnaHQoKSxlPU1hdGgubWF4KHQsZSk7dGhpcy5jb21wdXRlQXJlYUVudj1uZXcgQyhuKSx0aGlzLmNvbXB1dGVBcmVhRW52LmV4cGFuZEJ5KGUpfSxzZXRWZXJ0ZXhGYWN0b3J5OmZ1bmN0aW9uKHQpe3RoaXMudmVydGV4RmFjdG9yeT10fSxmb3JtSW5pdGlhbERlbGF1bmF5OmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKSx0aGlzLnN1YmRpdj1uZXcgRXModGhpcy5jb21wdXRlQXJlYUVudix0aGlzLnRvbGVyYW5jZSksdGhpcy5zdWJkaXYuc2V0TG9jYXRvcihuZXcgeXModGhpcy5zdWJkaXYpKSx0aGlzLmluY0RlbD1uZXcgcHModGhpcy5zdWJkaXYpLHRoaXMuaW5zZXJ0U2l0ZXModGhpcy5pbml0aWFsVmVydGljZXMpfSxpbnNlcnRTaXRlOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBncyl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dGhpcy5rZHQuaW5zZXJ0KHQuZ2V0Q29vcmRpbmF0ZSgpLHQpO2lmKGUuaXNSZXBlYXRlZCgpKXtlPWUuZ2V0RGF0YSgpO3JldHVybiBlLm1lcmdlKHQpLGV9cmV0dXJuIHRoaXMuaW5jRGVsLmluc2VydFNpdGUodCksdH1hcmd1bWVudHNbMF1pbnN0YW5jZW9mIGQmJih0PWFyZ3VtZW50c1swXSx0aGlzLmluc2VydFNpdGUodGhpcy5jcmVhdGVWZXJ0ZXgodCkpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYnN9fSksYnMuY29tcHV0ZVZlcnRleEVudmVsb3BlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQyxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuZXhwYW5kVG9JbmNsdWRlKGkuZ2V0Q29vcmRpbmF0ZSgpKX1yZXR1cm4gZX0sYnMuTUFYX1NQTElUX0lURVI9OTksZShPcy5wcm90b3R5cGUse2NyZWF0ZTpmdW5jdGlvbigpe2lmKG51bGwhPT10aGlzLnN1YmRpdilyZXR1cm4gbnVsbDt2YXIgdD1Pcy5lbnZlbG9wZSh0aGlzLnNpdGVDb29yZHMpLGU9T3MudG9WZXJ0aWNlcyh0aGlzLnNpdGVDb29yZHMpO3RoaXMuc3ViZGl2PW5ldyBFcyh0LHRoaXMudG9sZXJhbmNlKSxuZXcgcHModGhpcy5zdWJkaXYpLmluc2VydFNpdGVzKGUpfSxzZXRUb2xlcmFuY2U6ZnVuY3Rpb24odCl7dGhpcy50b2xlcmFuY2U9dH0sc2V0U2l0ZXM6ZnVuY3Rpb24oKXt2YXIgdDthcmd1bWVudHNbMF1pbnN0YW5jZW9mIEI/KHQ9YXJndW1lbnRzWzBdLHRoaXMuc2l0ZUNvb3Jkcz1Pcy5leHRyYWN0VW5pcXVlQ29vcmRpbmF0ZXModCkpOlIoYXJndW1lbnRzWzBdLG0pJiYodD1hcmd1bWVudHNbMF0sdGhpcy5zaXRlQ29vcmRzPU9zLnVuaXF1ZShILnRvQ29vcmRpbmF0ZUFycmF5KHQpKSl9LGdldEVkZ2VzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNyZWF0ZSgpLHRoaXMuc3ViZGl2LmdldEVkZ2VzKHQpfSxnZXRTdWJkaXZpc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNyZWF0ZSgpLHRoaXMuc3ViZGl2fSxnZXRUcmlhbmdsZXM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3JlYXRlKCksdGhpcy5zdWJkaXYuZ2V0VHJpYW5nbGVzKHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPc319KSxPcy5leHRyYWN0VW5pcXVlQ29vcmRpbmF0ZXM9ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIG5ldyBOO3Q9dC5nZXRDb29yZGluYXRlcygpO3JldHVybiBPcy51bmlxdWUodCl9LE9zLmVudmVsb3BlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQyxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuZXhwYW5kVG9JbmNsdWRlKGkpfXJldHVybiBlfSxPcy51bmlxdWU9ZnVuY3Rpb24odCl7dD1ILmNvcHlEZWVwKHQpO3JldHVybiB1dC5zb3J0KHQpLG5ldyBOKHQsITEpfSxPcy50b1ZlcnRpY2VzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSSxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuYWRkKG5ldyBmcyhpKSl9cmV0dXJuIGV9LGUoX3MucHJvdG90eXBlLHtjcmVhdGVTaXRlVmVydGljZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJLG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7dGhpcy5jb25zdHJhaW50VmVydGV4TWFwLmNvbnRhaW5zS2V5KGkpfHxlLmFkZChuZXcgZ3MoaSkpfXJldHVybiBlfSxjcmVhdGU6ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5zdWJkaXYpcmV0dXJuIG51bGw7dmFyIHQ9T3MuZW52ZWxvcGUodGhpcy5zaXRlQ29vcmRzKSxlPW5ldyBJO251bGwhPT10aGlzLmNvbnN0cmFpbnRMaW5lcyYmKHQuZXhwYW5kVG9JbmNsdWRlKHRoaXMuY29uc3RyYWludExpbmVzLmdldEVudmVsb3BlSW50ZXJuYWwoKSksdGhpcy5jcmVhdGVWZXJ0aWNlcyh0aGlzLmNvbnN0cmFpbnRMaW5lcyksZT1fcy5jcmVhdGVDb25zdHJhaW50U2VnbWVudHModGhpcy5jb25zdHJhaW50TGluZXMpKTt0PW5ldyBicyh0aGlzLmNyZWF0ZVNpdGVWZXJ0aWNlcyh0aGlzLnNpdGVDb29yZHMpLHRoaXMudG9sZXJhbmNlKTt0LnNldENvbnN0cmFpbnRzKGUsbmV3IEkodGhpcy5jb25zdHJhaW50VmVydGV4TWFwLnZhbHVlcygpKSksdC5mb3JtSW5pdGlhbERlbGF1bmF5KCksdC5lbmZvcmNlQ29uc3RyYWludHMoKSx0aGlzLnN1YmRpdj10LmdldFN1YmRpdmlzaW9uKCl9LHNldFRvbGVyYW5jZTpmdW5jdGlvbih0KXt0aGlzLnRvbGVyYW5jZT10fSxzZXRDb25zdHJhaW50czpmdW5jdGlvbih0KXt0aGlzLmNvbnN0cmFpbnRMaW5lcz10fSxzZXRTaXRlczpmdW5jdGlvbih0KXt0aGlzLnNpdGVDb29yZHM9T3MuZXh0cmFjdFVuaXF1ZUNvb3JkaW5hdGVzKHQpfSxnZXRFZGdlczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jcmVhdGUoKSx0aGlzLnN1YmRpdi5nZXRFZGdlcyh0KX0sZ2V0U3ViZGl2aXNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jcmVhdGUoKSx0aGlzLnN1YmRpdn0sZ2V0VHJpYW5nbGVzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNyZWF0ZSgpLHRoaXMuc3ViZGl2LmdldFRyaWFuZ2xlcyh0KX0sY3JlYXRlVmVydGljZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuZ2V0Q29vcmRpbmF0ZXMoKSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPW5ldyBncyhlW25dKTt0aGlzLmNvbnN0cmFpbnRWZXJ0ZXhNYXAucHV0KGVbbl0saSl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBfc319KSxfcy5jcmVhdGVDb25zdHJhaW50U2VnbWVudHM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PVJuLmdldExpbmVzKGFyZ3VtZW50c1swXSksZT1uZXcgSSxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO19zLmNyZWF0ZUNvbnN0cmFpbnRTZWdtZW50cyhpLGUpfXJldHVybiBlfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgcj1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMF0uZ2V0Q29vcmRpbmF0ZXMoKSxuPTE7bjxzLmxlbmd0aDtuKyspci5hZGQobmV3IHdzKHNbbi0xXSxzW25dKSl9LGUoTXMucHJvdG90eXBlLHtjcmVhdGU6ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5zdWJkaXYpcmV0dXJuIG51bGw7dmFyIHQ9T3MuZW52ZWxvcGUodGhpcy5zaXRlQ29vcmRzKTt0aGlzLmRpYWdyYW1FbnY9dDt2YXIgZT1NYXRoLm1heCh0aGlzLmRpYWdyYW1FbnYuZ2V0V2lkdGgoKSx0aGlzLmRpYWdyYW1FbnYuZ2V0SGVpZ2h0KCkpO3RoaXMuZGlhZ3JhbUVudi5leHBhbmRCeShlKSxudWxsIT09dGhpcy5jbGlwRW52JiZ0aGlzLmRpYWdyYW1FbnYuZXhwYW5kVG9JbmNsdWRlKHRoaXMuY2xpcEVudik7ZT1Pcy50b1ZlcnRpY2VzKHRoaXMuc2l0ZUNvb3Jkcyk7dGhpcy5zdWJkaXY9bmV3IEVzKHQsdGhpcy50b2xlcmFuY2UpLG5ldyBwcyh0aGlzLnN1YmRpdikuaW5zZXJ0U2l0ZXMoZSl9LGdldERpYWdyYW06ZnVuY3Rpb24odCl7dGhpcy5jcmVhdGUoKTt0PXRoaXMuc3ViZGl2LmdldFZvcm9ub2lEaWFncmFtKHQpO3JldHVybiBNcy5jbGlwR2VvbWV0cnlDb2xsZWN0aW9uKHQsdGhpcy5kaWFncmFtRW52KX0sc2V0VG9sZXJhbmNlOmZ1bmN0aW9uKHQpe3RoaXMudG9sZXJhbmNlPXR9LHNldFNpdGVzOmZ1bmN0aW9uKCl7dmFyIHQ7YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBCPyh0PWFyZ3VtZW50c1swXSx0aGlzLnNpdGVDb29yZHM9T3MuZXh0cmFjdFVuaXF1ZUNvb3JkaW5hdGVzKHQpKTpSKGFyZ3VtZW50c1swXSxtKSYmKHQ9YXJndW1lbnRzWzBdLHRoaXMuc2l0ZUNvb3Jkcz1Pcy51bmlxdWUoSC50b0Nvb3JkaW5hdGVBcnJheSh0KSkpfSxzZXRDbGlwRW52ZWxvcGU6ZnVuY3Rpb24odCl7dGhpcy5jbGlwRW52PXR9LGdldFN1YmRpdmlzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3JlYXRlKCksdGhpcy5zdWJkaXZ9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE1zfX0pLE1zLmNsaXBHZW9tZXRyeUNvbGxlY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5nZXRGYWN0b3J5KCkudG9HZW9tZXRyeShlKSxpPW5ldyBJLHI9MDtyPHQuZ2V0TnVtR2VvbWV0cmllcygpO3IrKyl7dmFyIHM9dC5nZXRHZW9tZXRyeU4ociksbz1udWxsO2UuY29udGFpbnMocy5nZXRFbnZlbG9wZUludGVybmFsKCkpP289czplLmludGVyc2VjdHMocy5nZXRFbnZlbG9wZUludGVybmFsKCkpJiYobz1uLmludGVyc2VjdGlvbihzKSkuc2V0VXNlckRhdGEocy5nZXRVc2VyRGF0YSgpKSxudWxsPT09b3x8by5pc0VtcHR5KCl8fGkuYWRkKG8pfXJldHVybiB0LmdldEZhY3RvcnkoKS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oWXQudG9HZW9tZXRyeUFycmF5KGkpKX07ZW89T2JqZWN0LmZyZWV6ZSh7Q29uZm9ybWluZ0RlbGF1bmF5VHJpYW5ndWxhdGlvbkJ1aWxkZXI6X3MsRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlcjpPcyxWb3Jvbm9pRGlhZ3JhbUJ1aWxkZXI6TXN9KTtlKERzLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRHN9fSksRHMudW5pb249ZnVuY3Rpb24odCxlKXtpZih0LmlzRW1wdHkoKXx8ZS5pc0VtcHR5KCkpe2lmKHQuaXNFbXB0eSgpJiZlLmlzRW1wdHkoKSlyZXR1cm4ga24uY3JlYXRlRW1wdHlSZXN1bHQoa24uVU5JT04sdCxlLHQuZ2V0RmFjdG9yeSgpKTtpZih0LmlzRW1wdHkoKSlyZXR1cm4gZS5jb3B5KCk7aWYoZS5pc0VtcHR5KCkpcmV0dXJuIHQuY29weSgpfXJldHVybiB0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksVW4ub3ZlcmxheU9wKHQsZSxrbi5VTklPTil9LGUoQi5wcm90b3R5cGUse2VxdWFsc1RvcG86ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKS5lcXVhbHModC5nZXRFbnZlbG9wZUludGVybmFsKCkpJiZSci5yZWxhdGUodGhpcyx0KS5pc0VxdWFscyh0aGlzLmdldERpbWVuc2lvbigpLHQuZ2V0RGltZW5zaW9uKCkpfSx1bmlvbjpmdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9fci51bmlvbih0aGlzKToxPT09YXJndW1lbnRzLmxlbmd0aD9Ecy51bmlvbih0aGlzLGFyZ3VtZW50c1swXSk6dm9pZCAwfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIFdyLmlzVmFsaWQodGhpcyl9LGludGVyc2VjdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLmlzRW1wdHkoKXx8dC5pc0VtcHR5KCkpcmV0dXJuIGtuLmNyZWF0ZUVtcHR5UmVzdWx0KGtuLklOVEVSU0VDVElPTix0aGlzLHQsdGhpcy5mYWN0b3J5KTtpZih0aGlzLmlzR2VvbWV0cnlDb2xsZWN0aW9uKCkpe3ZhciBlPXQ7cmV0dXJuIGplLm1hcCh0aGlzLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltNYXBPcF19LG1hcDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnRlcnNlY3Rpb24oZSl9fSl9cmV0dXJuIHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odGhpcyksdGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0KSxVbi5vdmVybGF5T3AodGhpcyx0LGtuLklOVEVSU0VDVElPTil9LGNvdmVyczpmdW5jdGlvbih0KXtyZXR1cm4gUnIuY292ZXJzKHRoaXMsdCl9LGNvdmVyZWRCeTpmdW5jdGlvbih0KXtyZXR1cm4gUnIuY292ZXJlZEJ5KHRoaXMsdCl9LHRvdWNoZXM6ZnVuY3Rpb24odCl7cmV0dXJuIFJyLnRvdWNoZXModGhpcyx0KX0saW50ZXJzZWN0czpmdW5jdGlvbih0KXtyZXR1cm4gUnIuaW50ZXJzZWN0cyh0aGlzLHQpfSx3aXRoaW46ZnVuY3Rpb24odCl7cmV0dXJuIFJyLndpdGhpbih0aGlzLHQpfSxvdmVybGFwczpmdW5jdGlvbih0KXtyZXR1cm4gUnIub3ZlcmxhcHModGhpcyx0KX0sZGlzam9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIFJyLmRpc2pvaW50KHRoaXMsdCl9LGNyb3NzZXM6ZnVuY3Rpb24odCl7cmV0dXJuIFJyLmNyb3NzZXModGhpcyx0KX0sYnVmZmVyOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP1lpLmJ1ZmZlck9wKHRoaXMsYXJndW1lbnRzWzBdKToyPT09YXJndW1lbnRzLmxlbmd0aD9ZaS5idWZmZXJPcCh0aGlzLGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pOjM9PT1hcmd1bWVudHMubGVuZ3RoP1lpLmJ1ZmZlck9wKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pOnZvaWQgMH0sY29udmV4SHVsbDpmdW5jdGlvbigpe3JldHVybiBuZXcgaWUodGhpcykuZ2V0Q29udmV4SHVsbCgpfSxyZWxhdGU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO3JldHVybiBSci5yZWxhdGUuYXBwbHkoUnIsW3RoaXNdLmNvbmNhdChlKSl9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVQb2ludCgpO3ZhciB0PSR0LmdldENlbnRyb2lkKHRoaXMpO3JldHVybiB0aGlzLmNyZWF0ZVBvaW50RnJvbUludGVybmFsQ29vcmQodCx0aGlzKX0sZ2V0SW50ZXJpb3JQb2ludDpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlUG9pbnQoKTt2YXIgdD1udWxsLGU9dGhpcy5nZXREaW1lbnNpb24oKTtyZXR1cm4gdD1uZXcoMD09PWU/am46MT09PWU/V246WG4pKHRoaXMpLmdldEludGVyaW9yUG9pbnQoKSx0aGlzLmNyZWF0ZVBvaW50RnJvbUludGVybmFsQ29vcmQodCx0aGlzKX0sc3ltRGlmZmVyZW5jZTpmdW5jdGlvbih0KXtpZih0aGlzLmlzRW1wdHkoKXx8dC5pc0VtcHR5KCkpe2lmKHRoaXMuaXNFbXB0eSgpJiZ0LmlzRW1wdHkoKSlyZXR1cm4ga24uY3JlYXRlRW1wdHlSZXN1bHQoa24uU1lNRElGRkVSRU5DRSx0aGlzLHQsdGhpcy5mYWN0b3J5KTtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdC5jb3B5KCk7aWYodC5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuY29weSgpfXJldHVybiB0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpLHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksVW4ub3ZlcmxheU9wKHRoaXMsdCxrbi5TWU1ESUZGRVJFTkNFKX0sY3JlYXRlUG9pbnRGcm9tSW50ZXJuYWxDb29yZDpmdW5jdGlvbih0LGUpe3JldHVybiBlLmdldFByZWNpc2lvbk1vZGVsKCkubWFrZVByZWNpc2UodCksZS5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQodCl9LHRvVGV4dDpmdW5jdGlvbigpe3JldHVybihuZXcgWHQpLndyaXRlKHRoaXMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3RoaXMudG9UZXh0KCl9LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3JldHVybiBSci5jb250YWlucyh0aGlzLHQpfSxkaWZmZXJlbmNlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9rbi5jcmVhdGVFbXB0eVJlc3VsdChrbi5ESUZGRVJFTkNFLHRoaXMsdCx0aGlzLmZhY3RvcnkpOnQuaXNFbXB0eSgpP3RoaXMuY29weSgpOih0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpLHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksVW4ub3ZlcmxheU9wKHRoaXMsdCxrbi5ESUZGRVJFTkNFKSl9LGlzU2ltcGxlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBJaSh0aGlzKS5pc1NpbXBsZSgpfSxpc1dpdGhpbkRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIShlPHRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSkmJmppLmlzV2l0aGluRGlzdGFuY2UodGhpcyx0LGUpfSxkaXN0YW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gamkuZGlzdGFuY2UodGhpcyx0KX0saXNFcXVpdmFsZW50Q2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0Q2xhc3MoKT09PXQuZ2V0Q2xhc3MoKX19KTt0LnZlcnNpb249XCIxLjEuMiAoMjQ4ZGFiOClcIix0LmFsZ29yaXRobT1Kcyx0LmRlbnNpZnk9UXMsdC5kaXNzb2x2ZT0kcyx0Lmdlb209S3MsdC5pbmRleD1ubyx0LmlvPW9vLHQubm9kaW5nPWFvLHQub3BlcmF0aW9uPWZvLHQucHJlY2lzaW9uPVlzLHQuc2ltcGxpZnk9dG8sdC50cmlhbmd1bGF0ZT1lb30sXCJvYmplY3RcIj09dHlwZW9mIG4mJnZvaWQgMCE9PWU/cihuKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0scik6cihpLmpzdHM9aS5qc3RzfHx7fSl9LHt9XSw0OltmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0LGUpe3ZhciBuPXQubGVuZ3RoLTEsaT1bdFswXV07cmV0dXJuIGZ1bmN0aW9uIHQoZSxuLGkscixzKXtmb3IodmFyIG8sYSx1LGwsaCxjLGYsZz1yLGQ9bisxO2Q8aTtkKyspe3ZhciBwPShhPWVbZF0sdT1lW25dLGw9ZVtpXSxwPWY9Yz1oPXZvaWQgMCxoPXUueCxjPXUueSxmPWwueC1oLHA9bC55LWMsMD09PWYmJjA9PT1wfHwoMTwodT0oKGEueC1oKSpmKyhhLnktYykqcCkvKGYqZitwKnApKT8oaD1sLngsYz1sLnkpOjA8dSYmKGgrPWYqdSxjKz1wKnUpKSwoZj1hLngtaCkqZisocD1hLnktYykqcCk7ZzxwJiYobz1kLGc9cCl9cjxnJiYoMTxvLW4mJnQoZSxuLG8scixzKSxzLnB1c2goZVtvXSksMTxpLW8mJnQoZSxvLGkscixzKSl9KHQsMCxuLGUsaSksaS5wdXNoKHRbbl0pLGl9ZnVuY3Rpb24gdCh0LGUsbil7aWYodC5sZW5ndGg8PTIpcmV0dXJuIHQ7ZT12b2lkIDAhPT1lP2UqZToxO3JldHVybiB0PWkodD1uP3Q6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4saSxyLHMsbz10WzBdLGE9W29dLHU9MSxsPXQubGVuZ3RoO3U8bDt1Kyspbj10W3VdLHI9byxzPXZvaWQgMCxzPShpPW4pLngtci54LHI9aS55LXIueSxlPHMqcytyKnImJihhLnB1c2gobiksbz1uKTtyZXR1cm4gbyE9PW4mJmEucHVzaChuKSxhfSh0LGUpLGUpfVwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gdH0pOnZvaWQgMCE9PWU/KGUuZXhwb3J0cz10LGUuZXhwb3J0cy5kZWZhdWx0PXQpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGYuc2ltcGxpZnk9dDp3aW5kb3cuc2ltcGxpZnk9dH0oKX0se31dLDU6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgdT10KFwidHVyZi1kaXN0YW5jZVwiKSxsPXQoXCJ0dXJmLWhlbHBlcnNcIikucG9pbnQsaD10KFwidHVyZi1iZWFyaW5nXCIpLGM9dChcInR1cmYtZGVzdGluYXRpb25cIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaTtpZihcIkZlYXR1cmVcIj09PXQudHlwZSlpPXQuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7ZWxzZXtpZihcIkxpbmVTdHJpbmdcIiE9PXQudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJpbnB1dCBtdXN0IGJlIGEgTGluZVN0cmluZyBGZWF0dXJlIG9yIEdlb21ldHJ5XCIpO2k9dC5jb29yZGluYXRlc31mb3IodmFyIHI9MCxzPTA7czxpLmxlbmd0aCYmIShyPD1lJiZzPT09aS5sZW5ndGgtMSk7cysrKXtpZihlPD1yKXt2YXIgbz1lLXI7aWYobyl7dmFyIGE9aChpW3NdLGlbcy0xXSktMTgwO3JldHVybiBjKGlbc10sbyxhLG4pfXJldHVybiBsKGlbc10pfXIrPXUoaVtzXSxpW3MrMV0sbil9cmV0dXJuIGwoaVtpLmxlbmd0aC0xXSl9fSx7XCJ0dXJmLWJlYXJpbmdcIjo4LFwidHVyZi1kZXN0aW5hdGlvblwiOjE0LFwidHVyZi1kaXN0YW5jZVwiOjE1LFwidHVyZi1oZWxwZXJzXCI6MTh9XSw2OltmdW5jdGlvbih0LGUsbil7dmFyIHI9dChcInR1cmYtaGVscGVyc1wiKS5wb2x5Z29uO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1bdFswXSx0WzFdXSxuPVt0WzBdLHRbM11dLGk9W3RbMl0sdFszXV0sdD1bdFsyXSx0WzFdXTtyZXR1cm4gcihbW2UsdCxpLG4sZV1dKX19LHtcInR1cmYtaGVscGVyc1wiOjE4fV0sNzpbZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQoXCJ0dXJmLW1ldGFcIikuY29vcmRFYWNoO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1bMS8wLDEvMCwtMS8wLC0xLzBdO3JldHVybiBpKHQsZnVuY3Rpb24odCl7ZVswXT50WzBdJiYoZVswXT10WzBdKSxlWzFdPnRbMV0mJihlWzFdPXRbMV0pLGVbMl08dFswXSYmKGVbMl09dFswXSksZVszXTx0WzFdJiYoZVszXT10WzFdKX0pLGV9fSx7XCJ0dXJmLW1ldGFcIjoyMX1dLDg6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgbz10KFwidHVyZi1pbnZhcmlhbnRcIikuZ2V0Q29vcmQ7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5QSS8xODAsaT0xODAvTWF0aC5QSSxyPW8odCkscz1vKGUpLHQ9bipyWzBdLGU9bipzWzBdLHI9bipyWzFdLG49bipzWzFdLHM9TWF0aC5zaW4oZS10KSpNYXRoLmNvcyhuKSx0PU1hdGguY29zKHIpKk1hdGguc2luKG4pLU1hdGguc2luKHIpKk1hdGguY29zKG4pKk1hdGguY29zKGUtdCk7cmV0dXJuIGkqTWF0aC5hdGFuMihzLHQpfX0se1widHVyZi1pbnZhcmlhbnRcIjoyMH1dLDk6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgYT10KFwidHVyZi1oZWxwZXJzXCIpLmxpbmVTdHJpbmcsdT10KFwiLi9zcGxpbmUuanNcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1hKFtdKTtpLnByb3BlcnRpZXM9dC5wcm9wZXJ0aWVzO2Zvcih2YXIgcj1uZXcgdSh7cG9pbnRzOnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybnt4OnRbMF0seTp0WzFdfX0pLGR1cmF0aW9uOmUsc2hhcnBuZXNzOm59KSxzPTA7czxyLmR1cmF0aW9uO3MrPTEwKXt2YXIgbz1yLnBvcyhzKTtNYXRoLmZsb29yKHMvMTAwKSUyPT0wJiZpLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnB1c2goW28ueCxvLnldKX1yZXR1cm4gaX19LHtcIi4vc3BsaW5lLmpzXCI6MTAsXCJ0dXJmLWhlbHBlcnNcIjoxOH1dLDEwOltmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXt0aGlzLnBvaW50cz10LnBvaW50c3x8W10sdGhpcy5kdXJhdGlvbj10LmR1cmF0aW9ufHwxZTQsdGhpcy5zaGFycG5lc3M9dC5zaGFycG5lc3N8fC44NSx0aGlzLmNlbnRlcnM9W10sdGhpcy5jb250cm9scz1bXSx0aGlzLnN0ZXBMZW5ndGg9dC5zdGVwTGVuZ3RofHw2MCx0aGlzLmxlbmd0aD10aGlzLnBvaW50cy5sZW5ndGg7Zm9yKHZhciBlPXRoaXMuZGVsYXk9MDtlPHRoaXMubGVuZ3RoO2UrKyl0aGlzLnBvaW50c1tlXS56PXRoaXMucG9pbnRzW2VdLnp8fDA7Zm9yKGU9MDtlPHRoaXMubGVuZ3RoLTE7ZSsrKXt2YXIgbj10aGlzLnBvaW50c1tlXSxpPXRoaXMucG9pbnRzW2UrMV07dGhpcy5jZW50ZXJzLnB1c2goe3g6KG4ueCtpLngpLzIseToobi55K2kueSkvMix6OihuLnoraS56KS8yfSl9Zm9yKHRoaXMuY29udHJvbHMucHVzaChbdGhpcy5wb2ludHNbMF0sdGhpcy5wb2ludHNbMF1dKSxlPTA7ZTx0aGlzLmNlbnRlcnMubGVuZ3RoLTE7ZSsrKXt2YXIgbj10aGlzLmNlbnRlcnNbZV0saT10aGlzLmNlbnRlcnNbZSsxXSxyPXRoaXMucG9pbnRzW2UrMV0ueC0odGhpcy5jZW50ZXJzW2VdLngrdGhpcy5jZW50ZXJzW2UrMV0ueCkvMixzPXRoaXMucG9pbnRzW2UrMV0ueS0odGhpcy5jZW50ZXJzW2VdLnkrdGhpcy5jZW50ZXJzW2UrMV0ueSkvMixvPXRoaXMucG9pbnRzW2UrMV0uei0odGhpcy5jZW50ZXJzW2VdLnkrdGhpcy5jZW50ZXJzW2UrMV0ueikvMjt0aGlzLmNvbnRyb2xzLnB1c2goW3t4OigxLXRoaXMuc2hhcnBuZXNzKSp0aGlzLnBvaW50c1tlKzFdLngrdGhpcy5zaGFycG5lc3MqKHRoaXMuY2VudGVyc1tlXS54K3IpLHk6KDEtdGhpcy5zaGFycG5lc3MpKnRoaXMucG9pbnRzW2UrMV0ueSt0aGlzLnNoYXJwbmVzcyoodGhpcy5jZW50ZXJzW2VdLnkrcyksejooMS10aGlzLnNoYXJwbmVzcykqdGhpcy5wb2ludHNbZSsxXS56K3RoaXMuc2hhcnBuZXNzKih0aGlzLmNlbnRlcnNbZV0ueitvKX0se3g6KDEtdGhpcy5zaGFycG5lc3MpKnRoaXMucG9pbnRzW2UrMV0ueCt0aGlzLnNoYXJwbmVzcyoodGhpcy5jZW50ZXJzW2UrMV0ueCtyKSx5OigxLXRoaXMuc2hhcnBuZXNzKSp0aGlzLnBvaW50c1tlKzFdLnkrdGhpcy5zaGFycG5lc3MqKHRoaXMuY2VudGVyc1tlKzFdLnkrcyksejooMS10aGlzLnNoYXJwbmVzcykqdGhpcy5wb2ludHNbZSsxXS56K3RoaXMuc2hhcnBuZXNzKih0aGlzLmNlbnRlcnNbZSsxXS56K28pfV0pfXJldHVybiB0aGlzLmNvbnRyb2xzLnB1c2goW3RoaXMucG9pbnRzW3RoaXMubGVuZ3RoLTFdLHRoaXMucG9pbnRzW3RoaXMubGVuZ3RoLTFdXSksdGhpcy5zdGVwcz10aGlzLmNhY2hlU3RlcHModGhpcy5zdGVwTGVuZ3RoKSx0aGlzfWkucHJvdG90eXBlLmNhY2hlU3RlcHM9ZnVuY3Rpb24odCl7dmFyIGU9W10sbj10aGlzLnBvcygwKTtlLnB1c2goMCk7Zm9yKHZhciBpPTA7aTx0aGlzLmR1cmF0aW9uO2krPTEwKXt2YXIgcj10aGlzLnBvcyhpKTt0PE1hdGguc3FydCgoci54LW4ueCkqKHIueC1uLngpKyhyLnktbi55KSooci55LW4ueSkrKHIuei1uLnopKihyLnotbi56KSkmJihlLnB1c2goaSksbj1yKX1yZXR1cm4gZX0saS5wcm90b3R5cGUudmVjdG9yPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9zKHQrMTApLHQ9dGhpcy5wb3ModC0xMCk7cmV0dXJue2FuZ2xlOjE4MCpNYXRoLmF0YW4yKGUueS10LnksZS54LXQueCkvMy4xNCxzcGVlZDpNYXRoLnNxcnQoKHQueC1lLngpKih0LngtZS54KSsodC55LWUueSkqKHQueS1lLnkpKyh0LnotZS56KSoodC56LWUueikpfX0saS5wcm90b3R5cGUucG9zPWZ1bmN0aW9uKHQpe3ZhciBlPXQtdGhpcy5kZWxheTtlPDAmJihlPTApLGU+dGhpcy5kdXJhdGlvbiYmKGU9dGhpcy5kdXJhdGlvbi0xKTt0PWUvdGhpcy5kdXJhdGlvbjtpZigxPD10KXJldHVybiB0aGlzLnBvaW50c1t0aGlzLmxlbmd0aC0xXTt2YXIgbixpLHIscyxvLGEsZT1NYXRoLmZsb29yKCh0aGlzLnBvaW50cy5sZW5ndGgtMSkqdCksdD0odGhpcy5sZW5ndGgtMSkqdC1lO3JldHVybiBuPXQsaT10aGlzLnBvaW50c1tlXSxyPXRoaXMuY29udHJvbHNbZV1bMV0scz10aGlzLmNvbnRyb2xzW2UrMV1bMF0sbz10aGlzLnBvaW50c1tlKzFdLGE9WyhuPShhPW4pKmEpKmEsMypuKigxLWEpLDMqYSooMS1hKSooMS1hKSwoMS1hKSooMS1hKSooMS1hKV0se3g6by54KmFbMF0rcy54KmFbMV0rci54KmFbMl0raS54KmFbM10seTpvLnkqYVswXStzLnkqYVsxXStyLnkqYVsyXStpLnkqYVszXSx6Om8ueiphWzBdK3MueiphWzFdK3IueiphWzJdK2kueiphWzNdfX0sZS5leHBvcnRzPWl9LHt9XSwxMTpbZnVuY3Rpb24odCxlLG4pe3ZhciByPXQoXCJ0dXJmLWhlbHBlcnNcIikscz1yLmZlYXR1cmVDb2xsZWN0aW9uLG89dChcImpzdHNcIiksYT10KFwiZ2VvanNvbi1ub3JtYWxpemVcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1yLmRpc3RhbmNlVG9EZWdyZWVzKGUsbiksdD1hKHQpLHQ9YShzKHQuZmVhdHVyZXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0LGUpe3Q9KG5ldyBvLmlvLkdlb0pTT05SZWFkZXIpLnJlYWQodC5nZW9tZXRyeSkuYnVmZmVyKGUpLGU9bmV3IG8uaW8uR2VvSlNPTldyaXRlcjtyZXR1cm57dHlwZTpcIkZlYXR1cmVcIixnZW9tZXRyeTp0PWUud3JpdGUodCkscHJvcGVydGllczp7fX19KHQsaSl9KSkpO3JldHVybiAxPHQuZmVhdHVyZXMubGVuZ3RoP3Q6MT09PXQuZmVhdHVyZXMubGVuZ3RoP3QuZmVhdHVyZXNbMF06dm9pZCAwfX0se1wiZ2VvanNvbi1ub3JtYWxpemVcIjoyLGpzdHM6MyxcInR1cmYtaGVscGVyc1wiOjE4fV0sMTI6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgaT10KFwidHVyZi1iYm94XCIpLHI9dChcInR1cmYtaGVscGVyc1wiKS5wb2ludDtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9aSh0KSx0PShlWzBdK2VbMl0pLzIsZT0oZVsxXStlWzNdKS8yO3JldHVybiByKFt0LGVdKX19LHtcInR1cmYtYmJveFwiOjcsXCJ0dXJmLWhlbHBlcnNcIjoxOH1dLDEzOltmdW5jdGlvbih0LGUsbil7dmFyIHI9dChcInR1cmYtbWV0YVwiKS5jb29yZEVhY2gscz10KFwidHVyZi1oZWxwZXJzXCIpLnBvaW50O2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT0wLG49MCxpPTA7cmV0dXJuIHIodCxmdW5jdGlvbih0KXtlKz10WzBdLG4rPXRbMV0saSsrfSwhMCkscyhbZS9pLG4vaV0pfX0se1widHVyZi1oZWxwZXJzXCI6MTgsXCJ0dXJmLW1ldGFcIjoyMX1dLDE0OltmdW5jdGlvbih0LGUsbil7dmFyIGE9dChcInR1cmYtaW52YXJpYW50XCIpLmdldENvb3JkLHQ9dChcInR1cmYtaGVscGVyc1wiKSx1PXQucG9pbnQsbD10LmRpc3RhbmNlVG9SYWRpYW5zO2UuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1NYXRoLlBJLzE4MCxzPTE4MC9NYXRoLlBJLG89YSh0KSx0PXIqb1swXSxvPXIqb1sxXSxuPXIqbixlPWwoZSxpKSxpPU1hdGguYXNpbihNYXRoLnNpbihvKSpNYXRoLmNvcyhlKStNYXRoLmNvcyhvKSpNYXRoLnNpbihlKSpNYXRoLmNvcyhuKSksbz10K01hdGguYXRhbjIoTWF0aC5zaW4obikqTWF0aC5zaW4oZSkqTWF0aC5jb3MobyksTWF0aC5jb3MoZSktTWF0aC5zaW4obykqTWF0aC5zaW4oaSkpO3JldHVybiB1KFtzKm8scyppXSl9fSx7XCJ0dXJmLWhlbHBlcnNcIjoxOCxcInR1cmYtaW52YXJpYW50XCI6MjB9XSwxNTpbZnVuY3Rpb24odCxlLG4pe3ZhciBvPXQoXCJ0dXJmLWludmFyaWFudFwiKS5nZXRDb29yZCxhPXQoXCJ0dXJmLWhlbHBlcnNcIikucmFkaWFuc1RvRGlzdGFuY2U7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1NYXRoLlBJLzE4MCxyPW8odCkscz1vKGUpLHQ9aSooc1sxXS1yWzFdKSxlPWkqKHNbMF0tclswXSkscj1pKnJbMV0scz1pKnNbMV0scz1NYXRoLnBvdyhNYXRoLnNpbih0LzIpLDIpK01hdGgucG93KE1hdGguc2luKGUvMiksMikqTWF0aC5jb3MocikqTWF0aC5jb3Mocyk7cmV0dXJuIGEoMipNYXRoLmF0YW4yKE1hdGguc3FydChzKSxNYXRoLnNxcnQoMS1zKSksbil9fSx7XCJ0dXJmLWhlbHBlcnNcIjoxOCxcInR1cmYtaW52YXJpYW50XCI6MjB9XSwxNjpbZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQoXCJ0dXJmLWJib3hcIikscj10KFwidHVyZi1iYm94LXBvbHlnb25cIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByKGkodCkpfX0se1widHVyZi1iYm94XCI6NyxcInR1cmYtYmJveC1wb2x5Z29uXCI6Nn1dLDE3OltmdW5jdGlvbih0LGUsbil7dmFyIGk9dChcInR1cmYtaGVscGVyc1wiKS5mZWF0dXJlQ29sbGVjdGlvbixyPXQoXCJ0dXJmLW1ldGFcIikuY29vcmRFYWNoLHM9dChcInR1cmYtaGVscGVyc1wiKS5wb2ludDtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHIodCxmdW5jdGlvbih0KXtlLnB1c2gocyh0KSl9KSxpKGUpfX0se1widHVyZi1oZWxwZXJzXCI6MTgsXCJ0dXJmLW1ldGFcIjoyMX1dLDE4OltmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcyh0LGUpe3JldHVybnt0eXBlOlwiRmVhdHVyZVwiLHByb3BlcnRpZXM6ZXx8e30sZ2VvbWV0cnk6dH19ZS5leHBvcnRzLmZlYXR1cmU9cyxlLmV4cG9ydHMucG9pbnQ9ZnVuY3Rpb24odCxlKXtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5XCIpO2lmKHQubGVuZ3RoPDIpdGhyb3cgbmV3IEVycm9yKFwiQ29vcmRpbmF0ZXMgbXVzdCBiZSBhdCBsZWFzdCAyIG51bWJlcnMgbG9uZ1wiKTtyZXR1cm4gcyh7dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6dC5zbGljZSgpfSxlKX0sZS5leHBvcnRzLnBvbHlnb249ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJObyBjb29yZGluYXRlcyBwYXNzZWRcIik7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aWYoaS5sZW5ndGg8NCl0aHJvdyBuZXcgRXJyb3IoXCJFYWNoIExpbmVhclJpbmcgb2YgYSBQb2x5Z29uIG11c3QgaGF2ZSA0IG9yIG1vcmUgUG9zaXRpb25zLlwiKTtmb3IodmFyIHI9MDtyPGlbaS5sZW5ndGgtMV0ubGVuZ3RoO3IrKylpZihpW2kubGVuZ3RoLTFdW3JdIT09aVswXVtyXSl0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBhbmQgbGFzdCBQb3NpdGlvbiBhcmUgbm90IGVxdWl2YWxlbnQuXCIpfXJldHVybiBzKHt0eXBlOlwiUG9seWdvblwiLGNvb3JkaW5hdGVzOnR9LGUpfSxlLmV4cG9ydHMubGluZVN0cmluZz1mdW5jdGlvbih0LGUpe2lmKCF0KXRocm93IG5ldyBFcnJvcihcIk5vIGNvb3JkaW5hdGVzIHBhc3NlZFwiKTtyZXR1cm4gcyh7dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczp0fSxlKX0sZS5leHBvcnRzLmZlYXR1cmVDb2xsZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczp0fX0sZS5leHBvcnRzLm11bHRpTGluZVN0cmluZz1mdW5jdGlvbih0LGUpe2lmKCF0KXRocm93IG5ldyBFcnJvcihcIk5vIGNvb3JkaW5hdGVzIHBhc3NlZFwiKTtyZXR1cm4gcyh7dHlwZTpcIk11bHRpTGluZVN0cmluZ1wiLGNvb3JkaW5hdGVzOnR9LGUpfSxlLmV4cG9ydHMubXVsdGlQb2ludD1mdW5jdGlvbih0LGUpe2lmKCF0KXRocm93IG5ldyBFcnJvcihcIk5vIGNvb3JkaW5hdGVzIHBhc3NlZFwiKTtyZXR1cm4gcyh7dHlwZTpcIk11bHRpUG9pbnRcIixjb29yZGluYXRlczp0fSxlKX0sZS5leHBvcnRzLm11bHRpUG9seWdvbj1mdW5jdGlvbih0LGUpe2lmKCF0KXRocm93IG5ldyBFcnJvcihcIk5vIGNvb3JkaW5hdGVzIHBhc3NlZFwiKTtyZXR1cm4gcyh7dHlwZTpcIk11bHRpUG9seWdvblwiLGNvb3JkaW5hdGVzOnR9LGUpfSxlLmV4cG9ydHMuZ2VvbWV0cnlDb2xsZWN0aW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHMoe3R5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIixnZW9tZXRyaWVzOnR9LGUpfTt2YXIgaT17bWlsZXM6Mzk2MCxuYXV0aWNhbG1pbGVzOjM0NDEuMTQ1LGRlZ3JlZXM6NTcuMjk1Nzc5NSxyYWRpYW5zOjEsaW5jaGVzOjI1MDkwNTYwMCx5YXJkczo2OTY5NjAwLG1ldGVyczo2MzczZTMsbWV0cmVzOjYzNzNlMyxraWxvbWV0ZXJzOjYzNzMsa2lsb21ldHJlczo2MzczfTtlLmV4cG9ydHMucmFkaWFuc1RvRGlzdGFuY2U9ZnVuY3Rpb24odCxlKXtlPWlbZXx8XCJraWxvbWV0ZXJzXCJdO2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1bml0XCIpO3JldHVybiB0KmV9LGUuZXhwb3J0cy5kaXN0YW5jZVRvUmFkaWFucz1mdW5jdGlvbih0LGUpe2U9aVtlfHxcImtpbG9tZXRlcnNcIl07aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVuaXRcIik7cmV0dXJuIHQvZX0sZS5leHBvcnRzLmRpc3RhbmNlVG9EZWdyZWVzPWZ1bmN0aW9uKHQsZSl7ZT1pW2V8fFwia2lsb21ldGVyc1wiXTtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdW5pdFwiKTtyZXR1cm4gdC9lKjU3LjI5NTh9fSx7fV0sMTk6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgdT10KFwidHVyZi1pbnZhcmlhbnRcIik7ZnVuY3Rpb24gbCh0LGUpe2Zvcih2YXIgbj0hMSxpPTAscj1lLmxlbmd0aC0xO2k8ZS5sZW5ndGg7cj1pKyspe3ZhciBzPWVbaV1bMF0sbz1lW2ldWzFdLGE9ZVtyXVswXSx1PWVbcl1bMV07bz50WzFdIT11PnRbMV0mJnRbMF08KGEtcykqKHRbMV0tbykvKHUtbykrcyYmKG49IW4pfXJldHVybiBufWUuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPXUuZ2V0Q29vcmQodCksaT1lLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1wiUG9seWdvblwiPT09ZS5nZW9tZXRyeS50eXBlJiYoaT1baV0pO2Zvcih2YXIgcj0wLHM9ITE7cjxpLmxlbmd0aCYmIXM7cisrKWlmKGwobixpW3JdWzBdKSl7Zm9yKHZhciBvPSExLGE9MTthPGlbcl0ubGVuZ3RoJiYhbzspbChuLGlbcl1bYV0pJiYobz0hMCksYSsrO298fChzPSEwKX1yZXR1cm4gc319LHtcInR1cmYtaW52YXJpYW50XCI6MjB9XSwyMDpbZnVuY3Rpb24odCxlLG4pe2UuZXhwb3J0cy5nZW9qc29uVHlwZT1mdW5jdGlvbih0LGUsbil7aWYoIWV8fCFuKXRocm93IG5ldyBFcnJvcihcInR5cGUgYW5kIG5hbWUgcmVxdWlyZWRcIik7aWYoIXR8fHQudHlwZSE9PWUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCB0byBcIituK1wiOiBtdXN0IGJlIGEgXCIrZStcIiwgZ2l2ZW4gXCIrdC50eXBlKX0sZS5leHBvcnRzLmNvbGxlY3Rpb25PZj1mdW5jdGlvbih0LGUsbil7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiLmNvbGxlY3Rpb25PZigpIHJlcXVpcmVzIGEgbmFtZVwiKTtpZighdHx8XCJGZWF0dXJlQ29sbGVjdGlvblwiIT09dC50eXBlKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gXCIrbitcIiwgRmVhdHVyZUNvbGxlY3Rpb24gcmVxdWlyZWRcIik7Zm9yKHZhciBpPTA7aTx0LmZlYXR1cmVzLmxlbmd0aDtpKyspe3ZhciByPXQuZmVhdHVyZXNbaV07aWYoIXJ8fFwiRmVhdHVyZVwiIT09ci50eXBlfHwhci5nZW9tZXRyeSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IHRvIFwiK24rXCIsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZFwiKTtpZighci5nZW9tZXRyeXx8ci5nZW9tZXRyeS50eXBlIT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IHRvIFwiK24rXCI6IG11c3QgYmUgYSBcIitlK1wiLCBnaXZlbiBcIityLmdlb21ldHJ5LnR5cGUpfX0sZS5leHBvcnRzLmZlYXR1cmVPZj1mdW5jdGlvbih0LGUsbil7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiLmZlYXR1cmVPZigpIHJlcXVpcmVzIGEgbmFtZVwiKTtpZighdHx8XCJGZWF0dXJlXCIhPT10LnR5cGV8fCF0Lmdlb21ldHJ5KXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gXCIrbitcIiwgRmVhdHVyZSB3aXRoIGdlb21ldHJ5IHJlcXVpcmVkXCIpO2lmKCF0Lmdlb21ldHJ5fHx0Lmdlb21ldHJ5LnR5cGUhPT1lKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gXCIrbitcIjogbXVzdCBiZSBhIFwiK2UrXCIsIGdpdmVuIFwiK3QuZ2VvbWV0cnkudHlwZSl9LGUuZXhwb3J0cy5nZXRDb29yZD1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpJiZcIm51bWJlclwiPT10eXBlb2YgdFswXSYmXCJudW1iZXJcIj09dHlwZW9mIHRbMV0pcmV0dXJuIHQ7aWYodCl7aWYoXCJGZWF0dXJlXCI9PT10LnR5cGUmJnQuZ2VvbWV0cnkmJlwiUG9pbnRcIj09PXQuZ2VvbWV0cnkudHlwZSYmQXJyYXkuaXNBcnJheSh0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzKSlyZXR1cm4gdC5nZW9tZXRyeS5jb29yZGluYXRlcztpZihcIlBvaW50XCI9PT10LnR5cGUmJkFycmF5LmlzQXJyYXkodC5jb29yZGluYXRlcykpcmV0dXJuIHQuY29vcmRpbmF0ZXN9dGhyb3cgbmV3IEVycm9yKFwiQSBjb29yZGluYXRlLCBmZWF0dXJlLCBvciBwb2ludCBnZW9tZXRyeSBpcyByZXF1aXJlZFwiKX19LHt9XSwyMTpbZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIHIodCxlLG4pe2Zvcih2YXIgaSxyLHMsbyxhLHUsbCxoLGMsZixnPVwiRmVhdHVyZUNvbGxlY3Rpb25cIj09PXQudHlwZSxkPVwiRmVhdHVyZVwiPT09dC50eXBlLHA9Zz90LmZlYXR1cmVzLmxlbmd0aDoxLG09MDttPHA7bSsrKWZvcih1PShmPVwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PT0oaD1nP3QuZmVhdHVyZXNbbV0uZ2VvbWV0cnk6ZD90Lmdlb21ldHJ5OnQpLnR5cGUpP2guZ2VvbWV0cmllcy5sZW5ndGg6MSxzPTA7czx1O3MrKylpZihsPShhPWY/aC5nZW9tZXRyaWVzW3NdOmgpLmNvb3JkaW5hdGVzLGM9IW58fFwiUG9seWdvblwiIT09YS50eXBlJiZcIk11bHRpUG9seWdvblwiIT09YS50eXBlPzA6MSxcIlBvaW50XCI9PT1hLnR5cGUpZShsKTtlbHNlIGlmKFwiTGluZVN0cmluZ1wiPT09YS50eXBlfHxcIk11bHRpUG9pbnRcIj09PWEudHlwZSlmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKWUobFtpXSk7ZWxzZSBpZihcIlBvbHlnb25cIj09PWEudHlwZXx8XCJNdWx0aUxpbmVTdHJpbmdcIj09PWEudHlwZSlmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKWZvcihyPTA7cjxsW2ldLmxlbmd0aC1jO3IrKyllKGxbaV1bcl0pO2Vsc2V7aWYoXCJNdWx0aVBvbHlnb25cIiE9PWEudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIEdlb21ldHJ5IFR5cGVcIik7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKylmb3Iocj0wO3I8bFtpXS5sZW5ndGg7cisrKWZvcihvPTA7bzxsW2ldW3JdLmxlbmd0aC1jO28rKyllKGxbaV1bcl1bb10pfX1mdW5jdGlvbiBpKHQsZSl7dmFyIG47c3dpdGNoKHQudHlwZSl7Y2FzZVwiRmVhdHVyZUNvbGxlY3Rpb25cIjpmb3Iobj0wO248dC5mZWF0dXJlcy5sZW5ndGg7bisrKWUodC5mZWF0dXJlc1tuXS5wcm9wZXJ0aWVzKTticmVhaztjYXNlXCJGZWF0dXJlXCI6ZSh0LnByb3BlcnRpZXMpfX1lLmV4cG9ydHMuY29vcmRFYWNoPXIsZS5leHBvcnRzLmNvb3JkUmVkdWNlPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiByKHQsZnVuY3Rpb24odCl7bj1lKG4sdCl9LGkpLG59LGUuZXhwb3J0cy5wcm9wRWFjaD1pLGUuZXhwb3J0cy5wcm9wUmVkdWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gaSh0LGZ1bmN0aW9uKHQpe249ZShuLHQpfSksbn0sZS5leHBvcnRzLmZlYXR1cmVFYWNoPWZ1bmN0aW9uKHQsZSl7aWYoXCJGZWF0dXJlXCI9PT10LnR5cGUpZSh0KTtlbHNlIGlmKFwiRmVhdHVyZUNvbGxlY3Rpb25cIj09PXQudHlwZSlmb3IodmFyIG49MDtuPHQuZmVhdHVyZXMubGVuZ3RoO24rKyllKHQuZmVhdHVyZXNbbl0pfSxlLmV4cG9ydHMuY29vcmRBbGw9ZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHIodCxmdW5jdGlvbih0KXtlLnB1c2godCl9KSxlfX0se31dLDIyOltmdW5jdGlvbih0LGUsbil7dmFyIGk9dChcInR1cmYtYmVhcmluZ1wiKSxyPXQoXCJ0dXJmLWRlc3RpbmF0aW9uXCIpLHM9dChcInR1cmYtZGlzdGFuY2VcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49cyh0LGUsXCJtaWxlc1wiKSxlPWkodCxlKTtyZXR1cm4gcih0LG4vMixlLFwibWlsZXNcIil9fSx7XCJ0dXJmLWJlYXJpbmdcIjo4LFwidHVyZi1kZXN0aW5hdGlvblwiOjE0LFwidHVyZi1kaXN0YW5jZVwiOjE1fV0sMjM6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgaT10KFwidHVyZi1oZWxwZXJzXCIpLmZlYXR1cmVDb2xsZWN0aW9uO2UuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBpKGZ1bmN0aW9uKHQsZSl7dmFyIG4saSxyPXQuc2xpY2UoMCkscz10Lmxlbmd0aCxvPXMtZTtmb3IoO3MtLSA+bzspaT1NYXRoLmZsb29yKChzKzEpKk1hdGgucmFuZG9tKCkpLG49cltpXSxyW2ldPXJbc10scltzXT1uO3JldHVybiByLnNsaWNlKG8pfSh0LmZlYXR1cmVzLGUpKX19LHtcInR1cmYtaGVscGVyc1wiOjE4fV0sMjQ6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgbz10KFwic2ltcGxpZnktanNcIikscj1bXCJMaW5lU3RyaW5nXCIsXCJNdWx0aUxpbmVTdHJpbmdcIixcIlBvbHlnb25cIixcIk11bHRpUG9seWdvblwiXTtmdW5jdGlvbiBzKHQsZSxuKXtyZXR1cm5cIkxpbmVTdHJpbmdcIj09PXQuZ2VvbWV0cnkudHlwZT97dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczppKHQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMsZSxuKX06XCJNdWx0aUxpbmVTdHJpbmdcIj09PXQuZ2VvbWV0cnkudHlwZT97dHlwZTpcIk11bHRpTGluZVN0cmluZ1wiLGNvb3JkaW5hdGVzOnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBpKHQsZSxuKX0pfTpcIlBvbHlnb25cIj09PXQuZ2VvbWV0cnkudHlwZT97dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczp1KHQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMsZSxuKX06XCJNdWx0aVBvbHlnb25cIj09PXQuZ2VvbWV0cnkudHlwZT97dHlwZTpcIk11bHRpUG9seWdvblwiLGNvb3JkaW5hdGVzOnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB1KHQsZSxuKX0pfTp0fWZ1bmN0aW9uIGEodCxlKXtyZXR1cm57dHlwZTpcIkZlYXR1cmVcIixnZW9tZXRyeTp0LHByb3BlcnRpZXM6ZX19ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIG8odC5tYXAoZnVuY3Rpb24odCl7cmV0dXJue3g6dFswXSx5OnRbMV19fSksZSxuKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuW3QueCx0LnldfSl9ZnVuY3Rpb24gdSh0LHIscyl7cmV0dXJuIHQubWFwKGZ1bmN0aW9uKHQpe3ZhciBlPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybnt4OnRbMF0seTp0WzFdfX0pO2lmKGUubGVuZ3RoPDQpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb2x5Z29uXCIpO2Zvcih2YXIgbixpPW8oZSxyLHMpLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdC54LHQueV19KTsobj1pKS5sZW5ndGg8M3x8Mz09PW4ubGVuZ3RoJiZuWzJdWzBdPT09blswXVswXSYmblsyXVsxXT09PW5bMF1bMV07KWk9byhlLHItPS4wMSpyLHMpLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdC54LHQueV19KTtyZXR1cm4gaVtpLmxlbmd0aC0xXVswXT09PWlbMF1bMF0mJmlbaS5sZW5ndGgtMV1bMV09PT1pWzBdWzFdfHxpLnB1c2goaVswXSksaX0pfWUuZXhwb3J0cz1mdW5jdGlvbih0LG4saSl7cmV0dXJuXCJGZWF0dXJlXCI9PT10LnR5cGU/YShzKHQsbixpKSx0LnByb3BlcnRpZXMpOlwiRmVhdHVyZUNvbGxlY3Rpb25cIj09PXQudHlwZT97dHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsZmVhdHVyZXM6dC5mZWF0dXJlcy5tYXAoZnVuY3Rpb24odCl7dmFyIGU9cyh0LG4saSk7cmV0dXJuLTE8ci5pbmRleE9mKGUudHlwZSk/YShlLHQucHJvcGVydGllcyk6ZX0pfTpcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT09dC50eXBlP3t0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsZ2VvbWV0cmllczp0Lmdlb21ldHJpZXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybi0xPHIuaW5kZXhPZih0LnR5cGUpP3Moe3R5cGU6XCJGZWF0dXJlXCIsZ2VvbWV0cnk6dH0sbixpKTp0fSl9OnR9fSx7XCJzaW1wbGlmeS1qc1wiOjR9XSwyNTpbZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQoXCJ0dXJmLWhlbHBlcnNcIikucG9seWdvbixyPXQoXCJ0dXJmLWhlbHBlcnNcIikuZmVhdHVyZUNvbGxlY3Rpb247ZnVuY3Rpb24gcCh0LGUsbil7dGhpcy5hPXQsdGhpcy5iPWUsdGhpcy5jPW47dmFyIGkscixzLG8sYT1lLngtdC54LHU9ZS55LXQueSxsPW4ueC10LngsaD1uLnktdC55LGM9YSoodC54K2UueCkrdSoodC55K2UueSksZj1sKih0Lngrbi54KStoKih0Lnkrbi55KSxnPTIqKGEqKG4ueS1lLnkpLXUqKG4ueC1lLngpKTtNYXRoLmFicyhnKTwxZS02PyhpPU1hdGgubWluKHQueCxlLngsbi54KSxyPU1hdGgubWluKHQueSxlLnksbi55KSxzPS41KihNYXRoLm1heCh0LngsZS54LG4ueCktaSksbz0uNSooTWF0aC5tYXgodC55LGUueSxuLnkpLXIpLHRoaXMueD1pK3MsdGhpcy55PXIrbyk6KHRoaXMueD0oaCpjLXUqZikvZyx0aGlzLnk9KGEqZi1sKmMpL2cscz10aGlzLngtdC54LG89dGhpcy55LXQueSksdGhpcy5yPXMqcytvKm99ZnVuY3Rpb24gbSh0LGUpe3JldHVybiBlLngtdC54fWUuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybiByKGZ1bmN0aW9uKHQpe2lmKHQubGVuZ3RoPDMpcmV0dXJuW107dC5zb3J0KG0pO3ZhciBlPXQubGVuZ3RoLTEsbj10W2VdLngsaT10WzBdLngscj10W2VdLnkscz1yO2Zvcig7ZS0tOyl0W2VdLnk8ciYmKHI9dFtlXS55KSx0W2VdLnk+cyYmKHM9dFtlXS55KTt2YXIgbyxhLHUsbD1pLW4saD1zLXIsYz1oPGw/bDpoLGk9LjUqKGkrbiksbj0uNSoocytyKSxmPVtuZXcgcCh7eDppLTIwKmMseTpuLWMsX19zZW50aW5lbDohMH0se3g6aSx5Om4rMjAqYyxfX3NlbnRpbmVsOiEwfSx7eDppKzIwKmMseTpuLWMsX19zZW50aW5lbDohMH0pXSxnPVtdLGQ9W107ZT10Lmxlbmd0aDtmb3IoO2UtLTspe2ZvcihkLmxlbmd0aD0wLG89Zi5sZW5ndGg7by0tOykwPChsPXRbZV0ueC1mW29dLngpJiZsKmw+ZltvXS5yPyhnLnB1c2goZltvXSksZi5zcGxpY2UobywxKSk6KGg9dFtlXS55LWZbb10ueSxsKmwraCpoPmZbb10ucnx8KGQucHVzaChmW29dLmEsZltvXS5iLGZbb10uYixmW29dLmMsZltvXS5jLGZbb10uYSksZi5zcGxpY2UobywxKSkpO2ZvcighZnVuY3Rpb24odCl7dmFyIGUsbixpLHIscyxvPXQubGVuZ3RoO3Q6Zm9yKDtvOylmb3Iobj10Wy0tb10sZT10Wy0tb10saT1vO2k7KWlmKHM9dFstLWldLHI9dFstLWldLGU9PT1yJiZuPT09c3x8ZT09PXMmJm49PT1yKXt0LnNwbGljZShvLDIpLHQuc3BsaWNlKGksMiksby09Mjtjb250aW51ZSB0fX0oZCksbz1kLmxlbmd0aDtvOyl1PWRbLS1vXSxhPWRbLS1vXSxmLnB1c2gobmV3IHAoYSx1LHRbZV0pKX1BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShnLGYpLGU9Zy5sZW5ndGg7Zm9yKDtlLS07KShnW2VdLmEuX19zZW50aW5lbHx8Z1tlXS5iLl9fc2VudGluZWx8fGdbZV0uYy5fX3NlbnRpbmVsKSYmZy5zcGxpY2UoZSwxKTtyZXR1cm4gZ30odC5mZWF0dXJlcy5tYXAoZnVuY3Rpb24odCl7dmFyIGU9e3g6dC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSx5OnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV19O3JldHVybiBuJiYoZS56PXQucHJvcGVydGllc1tuXSksZX0pKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGkoW1tbdC5hLngsdC5hLnldLFt0LmIueCx0LmIueV0sW3QuYy54LHQuYy55XSxbdC5hLngsdC5hLnldXV0se2E6dC5hLnosYjp0LmIueixjOnQuYy56fSl9KSl9fSx7XCJ0dXJmLWhlbHBlcnNcIjoxOH1dLDI2OltmdW5jdGlvbih0LGUsbil7dmFyIHI9dChcImpzdHNcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IHIuaW8uR2VvSlNPTlJlYWRlcixpPW4ucmVhZChKU09OLnN0cmluZ2lmeSh0Lmdlb21ldHJ5KSksZT1uLnJlYWQoSlNPTi5zdHJpbmdpZnkoZS5nZW9tZXRyeSkpLGU9aS51bmlvbihlKTtyZXR1cm57dHlwZTpcIkZlYXR1cmVcIixnZW9tZXRyeTplPShuZXcgci5pby5HZW9KU09OV3JpdGVyKS53cml0ZShlKSxwcm9wZXJ0aWVzOnQucHJvcGVydGllc319fSx7anN0czozfV0sMjc6W2Z1bmN0aW9uKHQsZSxuKXt2YXIgcz10KFwidHVyZi1pbnNpZGVcIiksbz10KFwidHVyZi1oZWxwZXJzXCIpLmZlYXR1cmVDb2xsZWN0aW9uO2UuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1vKFtdKSxpPTA7aTxlLmZlYXR1cmVzLmxlbmd0aDtpKyspZm9yKHZhciByPTA7cjx0LmZlYXR1cmVzLmxlbmd0aDtyKyspe3ModC5mZWF0dXJlc1tyXSxlLmZlYXR1cmVzW2ldKSYmbi5mZWF0dXJlcy5wdXNoKHQuZmVhdHVyZXNbcl0pfXJldHVybiBufX0se1widHVyZi1oZWxwZXJzXCI6MTgsXCJ0dXJmLWluc2lkZVwiOjE5fV19LHt9LFsxXSk7IiwiIWZ1bmN0aW9uIGUobyxpLGEpe2Z1bmN0aW9uIHUodCxuKXtpZighaVt0XSl7aWYoIW9bdF0pe3ZhciByPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIW4mJnIpcmV0dXJuIHIodCwhMCk7aWYoYylyZXR1cm4gYyh0LCEwKTt0aHJvdyhyPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrdCtcIidcIikpLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIscn1yPWlbdF09e2V4cG9ydHM6e319LG9bdF1bMF0uY2FsbChyLmV4cG9ydHMsZnVuY3Rpb24obil7cmV0dXJuIHUob1t0XVsxXVtuXXx8bil9LHIsci5leHBvcnRzLGUsbyxpLGEpfXJldHVybiBpW3RdLmV4cG9ydHN9Zm9yKHZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsbj0wO248YS5sZW5ndGg7bisrKXUoYVtuXSk7cmV0dXJuIHV9KHsxOltmdW5jdGlvbihuLHQscil7d2luZG93LnRvcG9qc29uPXt0b3BvbG9neTpuKFwiLi4vbm9kZV9tb2R1bGVzL3RvcG9qc29uL2xpYi90b3BvanNvbi90b3BvbG9neVwiKSxjbGllbnQ6bihcIi4uL25vZGVfbW9kdWxlcy90b3BvanNvbi9idWlsZC90b3BvanNvbi5qc1wiKX19LHtcIi4uL25vZGVfbW9kdWxlcy90b3BvanNvbi9idWlsZC90b3BvanNvbi5qc1wiOjMsXCIuLi9ub2RlX21vZHVsZXMvdG9wb2pzb24vbGliL3RvcG9qc29uL3RvcG9sb2d5XCI6MTV9XSwyOltmdW5jdGlvbihuLHQscil7dmFyIGUsbyx0PXQuZXhwb3J0cz17fTtmdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBhKCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIHUodCl7aWYoZT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQodCwwKTtpZigoZT09PWl8fCFlKSYmc2V0VGltZW91dClyZXR1cm4gZT1zZXRUaW1lb3V0LHNldFRpbWVvdXQodCwwKTt0cnl7cmV0dXJuIGUodCwwKX1jYXRjaChuKXt0cnl7cmV0dXJuIGUuY2FsbChudWxsLHQsMCl9Y2F0Y2gobil7cmV0dXJuIGUuY2FsbCh0aGlzLHQsMCl9fX0hZnVuY3Rpb24oKXt0cnl7ZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRUaW1lb3V0P3NldFRpbWVvdXQ6aX1jYXRjaChuKXtlPWl9dHJ5e289XCJmdW5jdGlvblwiPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDphfWNhdGNoKG4pe289YX19KCk7dmFyIGMsZj1bXSxzPSExLGw9LTE7ZnVuY3Rpb24gaCgpe3MmJmMmJihzPSExLGMubGVuZ3RoP2Y9Yy5jb25jYXQoZik6bD0tMSxmLmxlbmd0aCYmcCgpKX1mdW5jdGlvbiBwKCl7aWYoIXMpe3ZhciBuPXUoaCk7cz0hMDtmb3IodmFyIHQ9Zi5sZW5ndGg7dDspe2ZvcihjPWYsZj1bXTsrK2w8dDspYyYmY1tsXS5ydW4oKTtsPS0xLHQ9Zi5sZW5ndGh9Yz1udWxsLHM9ITEsZnVuY3Rpb24odCl7aWYobz09PWNsZWFyVGltZW91dClyZXR1cm4gY2xlYXJUaW1lb3V0KHQpO2lmKChvPT09YXx8IW8pJiZjbGVhclRpbWVvdXQpcmV0dXJuIG89Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dCh0KTt0cnl7byh0KX1jYXRjaChuKXt0cnl7cmV0dXJuIG8uY2FsbChudWxsLHQpfWNhdGNoKG4pe3JldHVybiBvLmNhbGwodGhpcyx0KX19fShuKX19ZnVuY3Rpb24gZyhuLHQpe3RoaXMuZnVuPW4sdGhpcy5hcnJheT10fWZ1bmN0aW9uIGQoKXt9dC5uZXh0VGljaz1mdW5jdGlvbihuKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZigxPGFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO2YucHVzaChuZXcgZyhuLHQpKSwxIT09Zi5sZW5ndGh8fHN8fHUocCl9LGcucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LHQudGl0bGU9XCJicm93c2VyXCIsdC5icm93c2VyPSEwLHQuZW52PXt9LHQuYXJndj1bXSx0LnZlcnNpb249XCJcIix0LnZlcnNpb25zPXt9LHQub249ZCx0LmFkZExpc3RlbmVyPWQsdC5vbmNlPWQsdC5vZmY9ZCx0LnJlbW92ZUxpc3RlbmVyPWQsdC5yZW1vdmVBbGxMaXN0ZW5lcnM9ZCx0LmVtaXQ9ZCx0LnByZXBlbmRMaXN0ZW5lcj1kLHQucHJlcGVuZE9uY2VMaXN0ZW5lcj1kLHQubGlzdGVuZXJzPWZ1bmN0aW9uKG4pe3JldHVybltdfSx0LmJpbmRpbmc9ZnVuY3Rpb24obil7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHQuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LHQuY2hkaXI9ZnVuY3Rpb24obil7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSx0LnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSx7fV0sMzpbZnVuY3Rpb24obix0LHIpe3ZhciBlLG87ZT10aGlzLG89ZnVuY3Rpb24obil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZygpe31mdW5jdGlvbiBkKG4pe2lmKCFuKXJldHVybiBnO3ZhciByLGUsbz1uLnNjYWxlWzBdLGk9bi5zY2FsZVsxXSxhPW4udHJhbnNsYXRlWzBdLHU9bi50cmFuc2xhdGVbMV07cmV0dXJuIGZ1bmN0aW9uKG4sdCl7dHx8KHI9ZT0wKSxuWzBdPShyKz1uWzBdKSpvK2EsblsxXT0oZSs9blsxXSkqaSt1fX1mdW5jdGlvbiB2KG4sdCl7Zm9yKHZhciByPTAsZT1uLmxlbmd0aDtyPGU7KXt2YXIgbz1yK2U+Pj4xO25bb108dD9yPTErbzplPW99cmV0dXJuIHJ9ZnVuY3Rpb24gcihuLHQpe249e3R5cGU6XCJGZWF0dXJlXCIsaWQ6dC5pZCxwcm9wZXJ0aWVzOnQucHJvcGVydGllc3x8e30sZ2VvbWV0cnk6byhuLHQpfTtyZXR1cm4gbnVsbD09dC5pZCYmZGVsZXRlIG4uaWQsbn1mdW5jdGlvbiBvKG4sdCl7dmFyIGE9ZChuLnRyYW5zZm9ybSksdT1uLmFyY3M7ZnVuY3Rpb24gbyhuLHQpe3QubGVuZ3RoJiZ0LnBvcCgpO2Zvcih2YXIgcixlPXVbbjwwP35uOm5dLG89MCxpPWUubGVuZ3RoO288aTsrK28pdC5wdXNoKHI9ZVtvXS5zbGljZSgpKSxhKHIsbyk7bjwwJiZmdW5jdGlvbihuLHQpe2Zvcih2YXIgcixlPW4ubGVuZ3RoLG89ZS10O288LS1lOylyPW5bb10sbltvKytdPW5bZV0sbltlXT1yfSh0LGkpfWZ1bmN0aW9uIHIobil7cmV0dXJuIG49bi5zbGljZSgpLGEobiwwKSxufWZ1bmN0aW9uIGUobil7Zm9yKHZhciB0PVtdLHI9MCxlPW4ubGVuZ3RoO3I8ZTsrK3IpbyhuW3JdLHQpO3JldHVybiB0Lmxlbmd0aDwyJiZ0LnB1c2godFswXS5zbGljZSgpKSx0fWZ1bmN0aW9uIGkobil7Zm9yKHZhciB0PWUobik7dC5sZW5ndGg8NDspdC5wdXNoKHRbMF0uc2xpY2UoKSk7cmV0dXJuIHR9ZnVuY3Rpb24gYyhuKXtyZXR1cm4gbi5tYXAoaSl9dmFyIGY9e1BvaW50OmZ1bmN0aW9uKG4pe3JldHVybiByKG4uY29vcmRpbmF0ZXMpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKG4pe3JldHVybiBuLmNvb3JkaW5hdGVzLm1hcChyKX0sTGluZVN0cmluZzpmdW5jdGlvbihuKXtyZXR1cm4gZShuLmFyY3MpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24obil7cmV0dXJuIG4uYXJjcy5tYXAoZSl9LFBvbHlnb246ZnVuY3Rpb24obil7cmV0dXJuIGMobi5hcmNzKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKG4pe3JldHVybiBuLmFyY3MubWFwKGMpfX07cmV0dXJuIGZ1bmN0aW9uIG4odCl7dmFyIHI9dC50eXBlO3JldHVyblwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PT1yP3t0eXBlOnIsZ2VvbWV0cmllczp0Lmdlb21ldHJpZXMubWFwKG4pfTpyIGluIGY/e3R5cGU6cixjb29yZGluYXRlczpmW3JdKHQpfTpudWxsfSh0KX1mdW5jdGlvbiBoKGEsZSl7dmFyIG89e30sdT17fSxjPXt9LGk9W10sZj0tMTtmdW5jdGlvbiBuKG4sdCl7Zm9yKHZhciByIGluIG4pe3ZhciBlPW5bcl07ZGVsZXRlIHRbZS5zdGFydF0sZGVsZXRlIGUuc3RhcnQsZGVsZXRlIGUuZW5kLGUuZm9yRWFjaChmdW5jdGlvbihuKXtvW248MD9+bjpuXT0xfSksaS5wdXNoKGUpfX1yZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKG4sdCl7dmFyIHI9YS5hcmNzW248MD9+bjpuXTtyLmxlbmd0aDwzJiYhclsxXVswXSYmIXJbMV1bMV0mJihyPWVbKytmXSxlW2ZdPW4sZVt0XT1yKX0pLGUuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgdCxyLGU9ZnVuY3Rpb24obil7dmFyIHQscj1hLmFyY3NbbjwwP35uOm5dLGU9clswXTthLnRyYW5zZm9ybT8odD1bMCwwXSxyLmZvckVhY2goZnVuY3Rpb24obil7dFswXSs9blswXSx0WzFdKz1uWzFdfSkpOnQ9cltyLmxlbmd0aC0xXTtyZXR1cm4gbjwwP1t0LGVdOltlLHRdfShuKSxvPWVbMF0saT1lWzFdOyhlPWNbb10pPyhkZWxldGUgY1tlLmVuZF0sZS5wdXNoKG4pLGUuZW5kPWksKHQ9dVtpXSk/KGRlbGV0ZSB1W3Quc3RhcnRdLHI9dD09PWU/ZTplLmNvbmNhdCh0KSx1W3Iuc3RhcnQ9ZS5zdGFydF09Y1tyLmVuZD10LmVuZF09cik6dVtlLnN0YXJ0XT1jW2UuZW5kXT1lKTooZT11W2ldKT8oZGVsZXRlIHVbZS5zdGFydF0sZS51bnNoaWZ0KG4pLGUuc3RhcnQ9bywodD1jW29dKT8oZGVsZXRlIGNbdC5lbmRdLHI9dD09PWU/ZTp0LmNvbmNhdChlKSx1W3Iuc3RhcnQ9dC5zdGFydF09Y1tyLmVuZD1lLmVuZF09cik6dVtlLnN0YXJ0XT1jW2UuZW5kXT1lKTp1WyhlPVtuXSkuc3RhcnQ9b109Y1tlLmVuZD1pXT1lfSksbihjLHUpLG4odSxjKSxlLmZvckVhY2goZnVuY3Rpb24obil7b1tuPDA/fm46bl18fGkucHVzaChbbl0pfSksaX1mdW5jdGlvbiB0KG4sdCxyKXt2YXIgZT1bXTtmdW5jdGlvbiBvKG4pe3ZhciB0PW48MD9+bjpuOyhjW3RdfHwoY1t0XT1bXSkpLnB1c2goe2k6bixnOnV9KX1mdW5jdGlvbiBpKG4pe24uZm9yRWFjaChvKX1mdW5jdGlvbiBhKG4pe24uZm9yRWFjaChpKX1pZigxPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciB1LGM9W10sZj17TGluZVN0cmluZzppLE11bHRpTGluZVN0cmluZzphLFBvbHlnb246YSxNdWx0aVBvbHlnb246ZnVuY3Rpb24obil7bi5mb3JFYWNoKGEpfX07IWZ1bmN0aW9uIG4odCl7XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PXQudHlwZT90Lmdlb21ldHJpZXMuZm9yRWFjaChuKTp0LnR5cGUgaW4gZiYmZlsodT10KS50eXBlXSh0LmFyY3MpfSh0KSxjLmZvckVhY2goYXJndW1lbnRzLmxlbmd0aDwzP2Z1bmN0aW9uKG4pe2UucHVzaChuWzBdLmkpfTpmdW5jdGlvbihuKXtyKG5bMF0uZyxuW24ubGVuZ3RoLTFdLmcpJiZlLnB1c2goblswXS5pKX0pfWVsc2UgZm9yKHZhciBzPTAsbD1uLmFyY3MubGVuZ3RoO3M8bDsrK3MpZS5wdXNoKHMpO3JldHVybnt0eXBlOlwiTXVsdGlMaW5lU3RyaW5nXCIsYXJjczpoKG4sZSl9fWZ1bmN0aW9uIGkobil7dmFyIHQ9blswXSxyPW5bMV0sbj1uWzJdO3JldHVybiBNYXRoLmFicygodFswXS1uWzBdKSooclsxXS10WzFdKS0odFswXS1yWzBdKSooblsxXS10WzFdKSl9ZnVuY3Rpb24gZSh1LG4pe3ZhciBjPXt9LHI9W10sZT1bXTtmdW5jdGlvbiB0KHQpe3QuZm9yRWFjaChmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7KGNbbj1uPDA/fm46bl18fChjW25dPVtdKSkucHVzaCh0KX0pfSksci5wdXNoKHQpfWZ1bmN0aW9uIGYobil7cmV0dXJuIE1hdGguYWJzKGZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyPS0xLGU9bi5sZW5ndGgsbz1uW2UtMV0saT0wOysrcjxlOyl0PW8sbz1uW3JdLGkrPXRbMF0qb1sxXS10WzFdKm9bMF07cmV0dXJuIGkvMn0obyh1LHt0eXBlOlwiUG9seWdvblwiLGFyY3M6W25dfSkuY29vcmRpbmF0ZXNbMF0pKX1yZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKG4pe1wiUG9seWdvblwiPT09bi50eXBlP3Qobi5hcmNzKTpcIk11bHRpUG9seWdvblwiPT09bi50eXBlJiZuLmFyY3MuZm9yRWFjaCh0KX0pLHIuZm9yRWFjaChmdW5jdGlvbihuKXtpZighbi5fKXt2YXIgdD1bXSxyPVtuXTtmb3Iobi5fPTEsZS5wdXNoKHQpO249ci5wb3AoKTspdC5wdXNoKG4pLG4uZm9yRWFjaChmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7Y1tuPDA/fm46bl0uZm9yRWFjaChmdW5jdGlvbihuKXtuLl98fChuLl89MSxyLnB1c2gobikpfSl9KX0pfX0pLHIuZm9yRWFjaChmdW5jdGlvbihuKXtkZWxldGUgbi5ffSkse3R5cGU6XCJNdWx0aVBvbHlnb25cIixhcmNzOmUubWFwKGZ1bmN0aW9uKG4pe3ZhciB0LHI9W107aWYobi5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7Y1tuPDA/fm46bl0ubGVuZ3RoPDImJnIucHVzaChuKX0pfSl9KSwxPCh0PShyPWgodSxyKSkubGVuZ3RoKSlmb3IodmFyIGUsbyxpPTEsYT1mKHJbMF0pO2k8dDsrK2kpKGU9ZihyW2ldKSk+YSYmKG89clswXSxyWzBdPXJbaV0scltpXT1vLGE9ZSk7cmV0dXJuIHJ9KX19ZnVuY3Rpb24gYyhuLHQpe3JldHVybiBuWzFdWzJdLXRbMV1bMl19bi52ZXJzaW9uPVwiMS42LjI3XCIsbi5tZXNoPWZ1bmN0aW9uKG4pe3JldHVybiBvKG4sdC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxuLm1lc2hBcmNzPXQsbi5tZXJnZT1mdW5jdGlvbihuKXtyZXR1cm4gbyhuLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sbi5tZXJnZUFyY3M9ZSxuLmZlYXR1cmU9ZnVuY3Rpb24odCxuKXtyZXR1cm5cIkdlb21ldHJ5Q29sbGVjdGlvblwiPT09bi50eXBlP3t0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczpuLmdlb21ldHJpZXMubWFwKGZ1bmN0aW9uKG4pe3JldHVybiByKHQsbil9KX06cih0LG4pfSxuLm5laWdoYm9ycz1mdW5jdGlvbihuKXt2YXIgZT17fSx0PW4ubWFwKGZ1bmN0aW9uKCl7cmV0dXJuW119KTtmdW5jdGlvbiByKG4scil7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe248MCYmKG49fm4pO3ZhciB0PWVbbl07dD90LnB1c2gocik6ZVtuXT1bcl19KX1mdW5jdGlvbiBvKG4sdCl7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Iobix0KX0pfXZhciBpLGE9e0xpbmVTdHJpbmc6cixNdWx0aUxpbmVTdHJpbmc6byxQb2x5Z29uOm8sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKG4sdCl7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe28obix0KX0pfX07Zm9yKGkgaW4gbi5mb3JFYWNoKGZ1bmN0aW9uIHQobixyKXtcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT09bi50eXBlP24uZ2VvbWV0cmllcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe3QobixyKX0pOm4udHlwZSBpbiBhJiZhW24udHlwZV0obi5hcmNzLHIpfSksZSlmb3IodmFyIHU9ZVtpXSxjPXUubGVuZ3RoLGY9MDtmPGM7KytmKWZvcih2YXIgcz1mKzE7czxjOysrcyl7dmFyIGwsaD11W2ZdLHA9dVtzXTsobD10W2hdKVtpPXYobCxwKV0hPT1wJiZsLnNwbGljZShpLDAscCksKGw9dFtwXSlbaT12KGwsaCldIT09aCYmbC5zcGxpY2UoaSwwLGgpfXJldHVybiB0fSxuLnByZXNpbXBsaWZ5PWZ1bmN0aW9uKG4sZil7dmFyIHQsYSx1LHM9ZChuLnRyYW5zZm9ybSksbD1mdW5jdGlvbihuKXtpZighbilyZXR1cm4gZzt2YXIgZSxvLGk9bi5zY2FsZVswXSxhPW4uc2NhbGVbMV0sdT1uLnRyYW5zbGF0ZVswXSxjPW4udHJhbnNsYXRlWzFdO3JldHVybiBmdW5jdGlvbihuLHQpe3R8fChlPW89MCk7dmFyIHI9TWF0aC5yb3VuZCgoblswXS11KS9pKSx0PU1hdGgucm91bmQoKG5bMV0tYykvYSk7blswXT1yLWUsblsxXT10LW8sZT1yLG89dH19KG4udHJhbnNmb3JtKSxoPShhPVtdLHU9MCwodD17fSkucHVzaD1mdW5jdGlvbihuKXtyZXR1cm4gZShhW24uXz11XT1uLHUrKyksdX0sdC5wb3A9ZnVuY3Rpb24oKXtpZighKHU8PTApKXt2YXIgbix0PWFbMF07cmV0dXJuIDA8LS11JiYobj1hW3VdLG8oYVtuLl89MF09biwwKSksdH19LHQucmVtb3ZlPWZ1bmN0aW9uKG4pe3ZhciB0LHI9bi5fO2lmKGFbcl09PT1uKXJldHVybiByIT09LS11JiYoYyh0PWFbdV0sbik8MD9lOm8pKGFbdC5fPXJdPXQscikscn0sdCk7ZnVuY3Rpb24gZShuLHQpe2Zvcig7MDx0Oyl7dmFyIHI9KHQrMT4+MSktMSxlPWFbcl07aWYoMDw9YyhuLGUpKWJyZWFrO2FbZS5fPXRdPWUsYVtuLl89dD1yXT1ufX1mdW5jdGlvbiBvKG4sdCl7Zm9yKDs7KXt2YXIgcj10KzE8PDEsZT1yLTEsbz10LGk9YVtvXTtpZihlPHUmJmMoYVtlXSxpKTwwJiYoaT1hW289ZV0pLHI8dSYmYyhhW3JdLGkpPDAmJihpPWFbbz1yXSksbz09PXQpYnJlYWs7YVtpLl89dF09aSxhW24uXz10PW9dPW59fWZ1bmN0aW9uIHAobil7aC5yZW1vdmUobiksblsxXVsyXT1mKG4pLGgucHVzaChuKX1yZXR1cm4gZj1mfHxpLG4uYXJjcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyLGU9W10sbz0wLGk9MCxhPW4ubGVuZ3RoO2k8YTsrK2kpcj1uW2ldLHMobltpXT1bclswXSxyWzFdLDEvMF0saSk7Zm9yKGk9MSxhPW4ubGVuZ3RoLTE7aTxhOysraSkodD1uLnNsaWNlKGktMSxpKzIpKVsxXVsyXT1mKHQpLGUucHVzaCh0KSxoLnB1c2godCk7Zm9yKGk9MCxhPWUubGVuZ3RoO2k8YTsrK2kpKHQ9ZVtpXSkucHJldmlvdXM9ZVtpLTFdLHQubmV4dD1lW2krMV07Zm9yKDt0PWgucG9wKCk7KXt2YXIgdT10LnByZXZpb3VzLGM9dC5uZXh0O3RbMV1bMl08bz90WzFdWzJdPW86bz10WzFdWzJdLHUmJih1Lm5leHQ9Yyx1WzJdPXRbMl0scCh1KSksYyYmKGMucHJldmlvdXM9dSxjWzBdPXRbMF0scChjKSl9bi5mb3JFYWNoKGwpfSksbn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LFwib2JqZWN0XCI9PXR5cGVvZiByJiZ2b2lkIDAhPT10P28ocik6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLG8pOm8oZS50b3BvanNvbj1lLnRvcG9qc29ufHx7fSl9LHt9XSw0OltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKG4pe3ZhciByPTEvMCxlPTEvMCxvPS0xLzAsaT0tMS8wO2Z1bmN0aW9uIHQobil7biYmdS5oYXNPd25Qcm9wZXJ0eShuLnR5cGUpJiZ1W24udHlwZV0obil9dmFyIGEsdT17R2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKG4pe24uZ2VvbWV0cmllcy5mb3JFYWNoKHQpfSxQb2ludDpmdW5jdGlvbihuKXtjKG4uY29vcmRpbmF0ZXMpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKG4pe24uY29vcmRpbmF0ZXMuZm9yRWFjaChjKX0sTGluZVN0cmluZzpmdW5jdGlvbihuKXtmKG4uY29vcmRpbmF0ZXMpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24obil7bi5jb29yZGluYXRlcy5mb3JFYWNoKGYpfSxQb2x5Z29uOmZ1bmN0aW9uKG4pe24uY29vcmRpbmF0ZXMuZm9yRWFjaChmKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKG4pe24uY29vcmRpbmF0ZXMuZm9yRWFjaChzKX19O2Z1bmN0aW9uIGMobil7dmFyIHQ9blswXSxuPW5bMV07dDxyJiYocj10KSxvPHQmJihvPXQpLG48ZSYmKGU9biksaTxuJiYoaT1uKX1mdW5jdGlvbiBmKG4pe24uZm9yRWFjaChjKX1mdW5jdGlvbiBzKG4pe24uZm9yRWFjaChmKX1mb3IoYSBpbiBuKXQoblthXSk7cmV0dXJuW3IsZSxvLGldfX0se31dLDU6W2Z1bmN0aW9uKG4sdCxyKXtyLm5hbWU9XCJjYXJ0ZXNpYW5cIixyLmZvcm1hdERpc3RhbmNlPWZ1bmN0aW9uKG4pe3JldHVybiBuLnRvU3RyaW5nKCl9LHIucmluZ0FyZWE9ZnVuY3Rpb24obil7dmFyIHQscj0tMSxlPW4ubGVuZ3RoLG89bltlLTFdLGk9MDtmb3IoOysrcjxlOyl0PW8sbz1uW3JdLGkrPXRbMF0qb1sxXS10WzFdKm9bMF07cmV0dXJuLjUqaX0sci5hYnNvbHV0ZUFyZWE9TWF0aC5hYnMsci50cmlhbmdsZUFyZWE9ZnVuY3Rpb24obil7cmV0dXJuIE1hdGguYWJzKChuWzBdWzBdLW5bMl1bMF0pKihuWzFdWzFdLW5bMF1bMV0pLShuWzBdWzBdLW5bMV1bMF0pKihuWzJdWzFdLW5bMF1bMV0pKX0sci5kaXN0YW5jZT1mdW5jdGlvbihuLHQscixlKXtyPW4tcixlPXQtZTtyZXR1cm4gTWF0aC5zcXJ0KHIqcitlKmUpfX0se31dLDY6W2Z1bmN0aW9uKG4sdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24obixyKXtmdW5jdGlvbiB0KG4pe3ZhciB0PXIobik7bnVsbD09dD9kZWxldGUgbi5pZDpuLmlkPXR9YXJndW1lbnRzLmxlbmd0aDwyJiYocj1mdW5jdGlvbihuKXtyZXR1cm4gbi5pZH0pO3ZhciBlLG8saT17RmVhdHVyZTp0LEZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKG4pe24uZmVhdHVyZXMuZm9yRWFjaCh0KX19O2ZvcihlIGluIG4pKG89bltlXSkmJmkuaGFzT3duUHJvcGVydHkoby50eXBlKSYmaVtvLnR5cGVdKG8pO3JldHVybiBufX0se31dLDc6W2Z1bmN0aW9uKG4sdCxyKXt0LmV4cG9ydHM9e2NhcnRlc2lhbjpuKFwiLi9jYXJ0ZXNpYW5cIiksc3BoZXJpY2FsOm4oXCIuL3NwaGVyaWNhbFwiKX19LHtcIi4vY2FydGVzaWFuXCI6NSxcIi4vc3BoZXJpY2FsXCI6MTN9XSw4OltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmFyY3Mscj0tMSxlPXQubGVuZ3RoOysrcjxlOylmb3IodmFyIG8saSxhPXRbcl0sdT0wLGM9YS5sZW5ndGgsZj1hWzBdLHM9ZlswXSxsPWZbMV07Kyt1PGM7KW89KGY9YVt1XSlbMF0saT1mWzFdLGFbdV09W28tcyxpLWxdLHM9byxsPWk7cmV0dXJuIG59fSx7fV0sOTpbZnVuY3Rpb24obix0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihuKXtmdW5jdGlvbiB0KG4pe3ZhciB0PW4uZ2VvbWV0cnk7cmV0dXJuIG51bGw9PXQ/bi50eXBlPW51bGw6KG8odCksbi50eXBlPXQudHlwZSx0Lmdlb21ldHJpZXM/bi5nZW9tZXRyaWVzPXQuZ2VvbWV0cmllczp0LmNvb3JkaW5hdGVzJiYobi5jb29yZGluYXRlcz10LmNvb3JkaW5hdGVzKSksZGVsZXRlIG4uZ2VvbWV0cnksbn1mdW5jdGlvbiBvKG4pe3JldHVybiBuPyhhLmhhc093blByb3BlcnR5KG4udHlwZSkmJmFbbi50eXBlXShuKSxuKTp7dHlwZTpudWxsfX12YXIgcixlLGk9e0ZlYXR1cmU6dCxGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbihuKXtyZXR1cm4gbi50eXBlPVwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsbi5nZW9tZXRyaWVzPW4uZmVhdHVyZXMsbi5mZWF0dXJlcy5mb3JFYWNoKHQpLGRlbGV0ZSBuLmZlYXR1cmVzLG59fSxhPXtHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24obil7Zm9yKHZhciB0PW4uZ2VvbWV0cmllcyxyPS0xLGU9dC5sZW5ndGg7KytyPGU7KXRbcl09byh0W3JdKX0sTXVsdGlQb2ludDpmdW5jdGlvbihuKXtuLmNvb3JkaW5hdGVzLmxlbmd0aD9uLmNvb3JkaW5hdGVzLmxlbmd0aDwyJiYobi50eXBlPVwiUG9pbnRcIixuLmNvb3JkaW5hdGVzPW4uY29vcmRpbmF0ZXNbMF0pOihuLnR5cGU9bnVsbCxkZWxldGUgbi5jb29yZGluYXRlcyl9LExpbmVTdHJpbmc6ZnVuY3Rpb24obil7bi5jb29yZGluYXRlcy5sZW5ndGh8fChuLnR5cGU9bnVsbCxkZWxldGUgbi5jb29yZGluYXRlcyl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihuKXtmb3IodmFyIHQ9bi5jb29yZGluYXRlcyxyPTAsZT0wLG89dC5sZW5ndGg7cjxvOysrcil7dmFyIGk9dFtyXTtpLmxlbmd0aCYmKHRbZSsrXT1pKX1lP2U8Mj8obi50eXBlPVwiTGluZVN0cmluZ1wiLG4uY29vcmRpbmF0ZXM9dFswXSk6bi5jb29yZGluYXRlcy5sZW5ndGg9ZToobi50eXBlPW51bGwsZGVsZXRlIG4uY29vcmRpbmF0ZXMpfSxQb2x5Z29uOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmNvb3JkaW5hdGVzLHI9MCxlPTAsbz10Lmxlbmd0aDtyPG87KytyKXt2YXIgaT10W3JdO2kubGVuZ3RoJiYodFtlKytdPWkpfWU/bi5jb29yZGluYXRlcy5sZW5ndGg9ZToobi50eXBlPW51bGwsZGVsZXRlIG4uY29vcmRpbmF0ZXMpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24obil7Zm9yKHZhciB0PW4uY29vcmRpbmF0ZXMscj0wLGU9MCxvPXQubGVuZ3RoO3I8bzsrK3Ipe2Zvcih2YXIgaT10W3JdLGE9MCx1PTAsYz1pLmxlbmd0aDthPGM7KythKXt2YXIgZj1pW2FdO2YubGVuZ3RoJiYoaVt1KytdPWYpfXUmJihpLmxlbmd0aD11LHRbZSsrXT1pKX1lP2U8Mj8obi50eXBlPVwiUG9seWdvblwiLG4uY29vcmRpbmF0ZXM9dFswXSk6dC5sZW5ndGg9ZToobi50eXBlPW51bGwsZGVsZXRlIG4uY29vcmRpbmF0ZXMpfX07Zm9yKHIgaW4gbiluW3JdPSgoZT1uW3JdKSYmaS5oYXNPd25Qcm9wZXJ0eShlLnR5cGUpP2lbZS50eXBlXTpvKShlKTtyZXR1cm4gbn19LHt9XSwxMDpbZnVuY3Rpb24obix0LHIpe3ZhciBzPW4oXCIuL3F1YW50aXplXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihuLHQscil7aWYodCl7aWYocj09PXR8fCFuLmJib3guZXZlcnkoaXNGaW5pdGUpKXJldHVybiBuO3ZhciBlPXIvdCxvPXMoMCwwLGUsZSk7bi50cmFuc2Zvcm0uc2NhbGVbMF0vPWUsbi50cmFuc2Zvcm0uc2NhbGVbMV0vPWV9ZWxzZXt2YXIgaT1uLmJib3gsYT1pc0Zpbml0ZShpWzBdKT9pWzBdOjAsdD1pc0Zpbml0ZShpWzFdKT9pWzFdOjAsZT1pc0Zpbml0ZShpWzJdKT9pWzJdOjAsaT1pc0Zpbml0ZShpWzNdKT9pWzNdOjAsbz1zKC1hLC10LGUtYT8oci0xKS8oZS1hKToxLGktdD8oci0xKS8oaS10KToxKTtuLnRyYW5zZm9ybT1vLnRyYW5zZm9ybX1mdW5jdGlvbiB1KG4pe24mJmYuaGFzT3duUHJvcGVydHkobi50eXBlKSYmZltuLnR5cGVdKG4pfXZhciBjLGY9e0dlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihuKXtuLmdlb21ldHJpZXMuZm9yRWFjaCh1KX0sUG9pbnQ6ZnVuY3Rpb24obil7by5wb2ludChuLmNvb3JkaW5hdGVzKX0sTXVsdGlQb2ludDpmdW5jdGlvbihuKXtuLmNvb3JkaW5hdGVzLmZvckVhY2goby5wb2ludCl9fTtmb3IoYyBpbiBuLm9iamVjdHMpdShuLm9iamVjdHNbY10pO3JldHVybiBuLmFyY3M9bi5hcmNzLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gby5saW5lKG49bi5tYXAoZnVuY3Rpb24obil7cmV0dXJuIG4uc2xpY2UoKX0pKSxuLmxlbmd0aDwyJiZuLnB1c2goblswXSksbn0pLG59fSx7XCIuL3F1YW50aXplXCI6MTJ9XSwxMTpbZnVuY3Rpb24obix0LHIpe3ZhciBoPW4oXCIuL3F1YW50aXplXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihuLHQscixlKXthcmd1bWVudHMubGVuZ3RoPDQmJihlPXIpO3ZhciBvPWlzRmluaXRlKHRbMF0pP3RbMF06MCxpPWlzRmluaXRlKHRbMV0pP3RbMV06MCxhPWlzRmluaXRlKHRbMl0pP3RbMl06MCx1PWlzRmluaXRlKHRbM10pP3RbM106MCxjPWgoLW8sLWksYS1vPyhlLTEpLyhhLW8pKnIvZToxLHUtaT8oZS0xKS8odS1pKSpyL2U6MSk7ZnVuY3Rpb24gZihuKXtuJiZsLmhhc093blByb3BlcnR5KG4udHlwZSkmJmxbbi50eXBlXShuKX12YXIgcyxsPXtHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24obil7bi5nZW9tZXRyaWVzLmZvckVhY2goZil9LFBvaW50OmZ1bmN0aW9uKG4pe2MucG9pbnQobi5jb29yZGluYXRlcyl9LE11bHRpUG9pbnQ6ZnVuY3Rpb24obil7bi5jb29yZGluYXRlcy5mb3JFYWNoKGMucG9pbnQpfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKG4pe249bi5jb29yZGluYXRlcztjLmxpbmUobiksbi5sZW5ndGg8MiYmKG5bMV09blswXSl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihuKXtmb3IodmFyIHQ9bi5jb29yZGluYXRlcyxyPTAsZT10Lmxlbmd0aDtyPGU7KytyKXt2YXIgbz10W3JdO2MubGluZShvKSxvLmxlbmd0aDwyJiYob1sxXT1vWzBdKX19LFBvbHlnb246ZnVuY3Rpb24obil7Zm9yKHZhciB0PW4uY29vcmRpbmF0ZXMscj0wLGU9dC5sZW5ndGg7cjxlOysrcil7dmFyIG89dFtyXTtmb3IoYy5saW5lKG8pO28ubGVuZ3RoPDQ7KW8ucHVzaChvWzBdKX19LE11bHRpUG9seWdvbjpmdW5jdGlvbihuKXtmb3IodmFyIHQ9bi5jb29yZGluYXRlcyxyPTAsZT10Lmxlbmd0aDtyPGU7KytyKWZvcih2YXIgbz10W3JdLGk9MCxhPW8ubGVuZ3RoO2k8YTsrK2kpe3ZhciB1PW9baV07Zm9yKGMubGluZSh1KTt1Lmxlbmd0aDw0Oyl1LnB1c2godVswXSl9fX07Zm9yKHMgaW4gbilmKG5bc10pO3JldHVybiBjLnRyYW5zZm9ybX19LHtcIi4vcXVhbnRpemVcIjoxMn1dLDEyOltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLG8pe2Z1bmN0aW9uIHMobil7cmV0dXJuIG5bMF09TWF0aC5yb3VuZCgoblswXSt0KSplKSxuWzFdPU1hdGgucm91bmQoKG5bMV0rcikqbyksbn1yZXR1cm57cG9pbnQ6cyxsaW5lOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyLGUsbz0wLGk9MSxhPW4ubGVuZ3RoLHU9cyhuWzBdKSxjPXVbMF0sZj11WzFdOysrbzxhOylyPSh1PXMobltvXSkpWzBdLGU9dVsxXSxyPT09YyYmZT09PWZ8fCgodD1uW2krK10pWzBdPWM9cix0WzFdPWY9ZSk7bi5sZW5ndGg9aX0sdHJhbnNmb3JtOntzY2FsZTpbMS9lLDEvb10sdHJhbnNsYXRlOlstdCwtcl19fX19LHt9XSwxMzpbZnVuY3Rpb24obix0LHIpe3ZhciBkPU1hdGguUEksdj1kLzQseT1kLzE4MDtmdW5jdGlvbiBvKG4sdCl7dmFyIHI9KHRbMF0tblswXSkqeSxlPU1hdGguc2luKHIpLG89TWF0aC5jb3MociksaT1NYXRoLnNpbihuWzFdKnkpLHI9TWF0aC5jb3MoblsxXSp5KSxuPU1hdGguc2luKHRbMV0qeSksdD1NYXRoLmNvcyh0WzFdKnkpO3JldHVybiBNYXRoLmF0YW4yKE1hdGguc3FydCgoZT10KmUpKmUrKGU9cipuLWkqdCpvKSplKSxpKm4rcip0Km8pfWZ1bmN0aW9uIGkobil7cmV0dXJuKG49TWF0aC5zaW4obi8yKSkqbn1yLm5hbWU9XCJzcGhlcmljYWxcIixyLmZvcm1hdERpc3RhbmNlPWZ1bmN0aW9uKG4pe3ZhciB0PW4qeSo2MzcxO3JldHVybigxPHQ/dC50b0ZpeGVkKDMpK1wia21cIjooMWUzKnQpLnRvUHJlY2lzaW9uKDMpK1wibVwiKStcIiAoXCIrbi50b1ByZWNpc2lvbigzKStcIsKwKVwifSxyLnJpbmdBcmVhPWZ1bmN0aW9uKG4pe2lmKCFuLmxlbmd0aClyZXR1cm4gMDtmb3IodmFyIHQ9MCxyPW5bMF0sZT1yWzBdKnksbz1yWzFdKnkvMit2LGk9ZSxhPU1hdGguY29zKG8pLHU9TWF0aC5zaW4obyksYz0xLGY9bi5sZW5ndGg7YzxmOysrYyl7cj1uW2NdLGU9clswXSp5LG89clsxXSp5LzIrdjt2YXIgcz1lLWksbD1NYXRoLmNvcyhvKSxoPU1hdGguc2luKG8pLHA9dSpoLGc9YSpsK3AqTWF0aC5jb3Mocykscz1wKk1hdGguc2luKHMpO3QrPU1hdGguYXRhbjIocyxnKSxpPWUsYT1sLHU9aH1yZXR1cm4gMiooZDx0P3QtMipkOnQ8LWQ/dCsyKmQ6dCl9LHIuYWJzb2x1dGVBcmVhPWZ1bmN0aW9uKG4pe3JldHVybiBuPDA/bis0KmQ6bn0sci50cmlhbmdsZUFyZWE9ZnVuY3Rpb24obil7dmFyIHQ9byhuWzBdLG5bMV0pLHI9byhuWzFdLG5bMl0pLGU9byhuWzJdLG5bMF0pLG49KHQrcitlKS8yO3JldHVybiA0Kk1hdGguYXRhbihNYXRoLnNxcnQoTWF0aC5tYXgoMCxNYXRoLnRhbihuLzIpKk1hdGgudGFuKChuLXQpLzIpKk1hdGgudGFuKChuLXIpLzIpKk1hdGgudGFuKChuLWUpLzIpKSkpfSxyLmRpc3RhbmNlPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiBuKj15LHQqPXkscio9eSxlKj15LDIqTWF0aC5hc2luKE1hdGguc3FydChpKGUtdCkrTWF0aC5jb3ModCkqTWF0aC5jb3MoZSkqaShyLW4pKSl9fSx7fV0sMTQ6W2Z1bmN0aW9uKG4sdCxyKXt2YXIgbD1uKFwiLi90eXBlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihuLHQpe3ZhciByLGUsbyxpPS0xODAsUD1pKy4wMSx4PTE3OS45OSxhPS05MCxiPWErLjAxLHU9OTAscT11LS4wMTtmdW5jdGlvbiBMKG4pe3JldHVybiBuPD1iP1swLGFdOnE8PW4/WzAsdV06W2ksbl19ZnVuY3Rpb24gYyhuKXtmb3IodmFyIHQ9W10scj0wLGU9bi5sZW5ndGg7cjxlOysrcil7Zm9yKHZhciBvPW5bcl0saT0wLGE9by5sZW5ndGg7aTxhOysraSl7dmFyIHU9b1tpXTt1LnBvbHlnb249byx0LnB1c2godSk7Zm9yKHZhciBjPTAsZj11Lmxlbmd0aDtjPGY7KytjKXt2YXIgcz11W2NdLGw9c1swXSxzPXNbMV07aWYobDw9UHx8eDw9bHx8czw9Ynx8cTw9cyl7Zm9yKHZhciBoPWMrMTtoPGY7KytoKXt2YXIgcD11W2hdLGc9cFswXSxwPXBbMV07aWYoUDxnJiZnPHgmJmI8cCYmcDxxKWJyZWFrfWlmKGghPT1jKzEpe2lmKGM/KChsPXUuc2xpY2UoMCxjKzEpKS5wb2x5Z29uPW8sbFtsLmxlbmd0aC0xXT1MKHMpLHRbdC5sZW5ndGgtMV09bCk6dC5wb3AoKSxmPD1oKWJyZWFrO3QucHVzaCh1PXUuc2xpY2UoaC0xKSksdVswXT1MKHVbMF1bMV0pLHUucG9seWdvbj1vLGM9LTEsZj11Lmxlbmd0aH19fX1vLmxlbmd0aD0wfWZvcih2YXIgZD17fSx2PXt9LGM9MCxmPXQubGVuZ3RoO2M8ZjsrK2Mpe3ZhciB5PShNPXRbY10pWzBdLG09TVtNLmxlbmd0aC0xXTt5WzBdIT09bVswXXx8eVsxXSE9PW1bMV0/KE0uaW5kZXg9YyxkW3ldPXZbbV09TSk6KE0ucG9seWdvbi5wdXNoKE0pLHRbY109bnVsbCl9Zm9yKHZhciBNLHcsRSxjPTA7YzxmOysrYyl7KE09dFtjXSkmJih5PU1bMF0sbT1NW00ubGVuZ3RoLTFdLHc9dlt5XSxFPWRbbV0sZGVsZXRlIGRbeV0sZGVsZXRlIHZbbV0seVswXSE9PW1bMF18fHlbMV0hPT1tWzFdP3c/KGRlbGV0ZSB2W3ldLGRlbGV0ZSBkW3dbMF1dLHcucG9wKCksdFt3LmluZGV4XT1udWxsLChNPXcuY29uY2F0KE0pKS5wb2x5Z29uPXcucG9seWdvbix3PT09RT9NLnBvbHlnb24ucHVzaChNKTooTS5pbmRleD1mKyssdC5wdXNoKGRbTVswXV09dltNW00ubGVuZ3RoLTFdXT1NKSkpOkU/KGRlbGV0ZSBkW21dLGRlbGV0ZSB2W0VbRS5sZW5ndGgtMV1dLE0ucG9wKCksKE09TS5jb25jYXQoRSkpLnBvbHlnb249RS5wb2x5Z29uLE0uaW5kZXg9ZisrLHRbRS5pbmRleF09bnVsbCx0LnB1c2goZFtNWzBdXT12W01bTS5sZW5ndGgtMV1dPU0pKTooTS5wdXNoKE1bMF0pLE0ucG9seWdvbi5wdXNoKE0pKTpNLnBvbHlnb24ucHVzaChNKSl9fXQmJihyPXQuc2NhbGVbMF0sZT10LnNjYWxlWzFdLG89dC50cmFuc2xhdGVbMF0sdD10LnRyYW5zbGF0ZVsxXSxpPU1hdGgucm91bmQoKGktbykvciksTWF0aC5yb3VuZCgoMTgwLW8pL3IpLGE9TWF0aC5yb3VuZCgoYS10KS9lKSx1PU1hdGgucm91bmQoKHUtdCkvZSksUD1NYXRoLnJvdW5kKChQLW8pL3IpLHg9TWF0aC5yb3VuZCgoeC1vKS9yKSxiPU1hdGgucm91bmQoKGItdCkvZSkscT1NYXRoLnJvdW5kKChxLXQpL2UpKTt2YXIgZixzPWwoe1BvbHlnb246ZnVuY3Rpb24obil7Yyhbbi5jb29yZGluYXRlc10pfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24obil7YyhuLmNvb3JkaW5hdGVzKX19KTtmb3IoZiBpbiBuKXMub2JqZWN0KG5bZl0pfX0se1wiLi90eXBlXCI6MjZ9XSwxNTpbZnVuY3Rpb24obix0LHIpeyhmdW5jdGlvbihFKXsoZnVuY3Rpb24oKXtuKFwiLi90eXBlXCIpO3ZhciBzPW4oXCIuL3N0aXRjaFwiKSxsPW4oXCIuL2Nvb3JkaW5hdGUtc3lzdGVtc1wiKSxoPW4oXCIuL3RvcG9sb2d5L2luZGV4XCIpLHA9bihcIi4vZGVsdGFcIiksZz1uKFwiLi9nZW9taWZ5XCIpLGQ9bihcIi4vcHJlLXF1YW50aXplXCIpLHY9bihcIi4vcG9zdC1xdWFudGl6ZVwiKSx5PW4oXCIuL2JvdW5kc1wiKSxtPW4oXCIuL2NvbXB1dGUtaWRcIiksTT1uKFwiLi90cmFuc2Zvcm0tcHJvcGVydGllc1wiKSx3PTFlLTY7dC5leHBvcnRzPWZ1bmN0aW9uKG4sdCl7dmFyIHIsZT0xZTQsbz0xZTQsaT1mdW5jdGlvbihuKXtyZXR1cm4gbi5pZH0sYT1mdW5jdGlvbigpe30sdT0hMCxjPSExLGY9bnVsbDtpZih0JiYoXCJ2ZXJib3NlXCJpbiB0JiYoYz0hIXQudmVyYm9zZSksXCJzdGl0Y2gtcG9sZXNcImluIHQmJih1PSEhdFtcInN0aXRjaC1wb2xlc1wiXSksXCJjb29yZGluYXRlLXN5c3RlbVwiaW4gdCYmKGY9bFt0W1wiY29vcmRpbmF0ZS1zeXN0ZW1cIl1dKSxcIm1pbmltdW0tYXJlYVwiaW4gdCYmdFtcIm1pbmltdW0tYXJlYVwiXSxcInF1YW50aXphdGlvblwiaW4gdCYmKGU9bz0rdC5xdWFudGl6YXRpb24pLFwicHJlLXF1YW50aXphdGlvblwiaW4gdCYmKGU9K3RbXCJwcmUtcXVhbnRpemF0aW9uXCJdKSxcInBvc3QtcXVhbnRpemF0aW9uXCJpbiB0JiYobz0rdFtcInBvc3QtcXVhbnRpemF0aW9uXCJdKSxcImlkXCJpbiB0JiYoaT10LmlkKSxcInByb3BlcnR5LXRyYW5zZm9ybVwiaW4gdCYmKGE9dFtcInByb3BlcnR5LXRyYW5zZm9ybVwiXSkpLGUvbyUxKXRocm93IG5ldyBFcnJvcihcInBvc3QtcXVhbnRpemF0aW9uIGlzIG5vdCBhIGRpdmlzb3Igb2YgcHJlLXF1YW50aXphdGlvblwiKTtpZihlJiYhbyl0aHJvdyBuZXcgRXJyb3IoXCJwb3N0LXF1YW50aXphdGlvbiBpcyByZXF1aXJlZCB3aGVuIGlucHV0IGlzIGFscmVhZHkgcXVhbnRpemVkXCIpO20obixpKSxNKG4sYSksZyhuKTtpPXkobiksYT1pWzBdPC0xODAtd3x8aVsxXTwtOTAtd3x8aVsyXT4xODArd3x8aVszXT45MCt3O2lmKGZ8fChmPWxbYT9cImNhcnRlc2lhblwiOlwic3BoZXJpY2FsXCJdLHQmJih0W1wiY29vcmRpbmF0ZS1zeXN0ZW1cIl09Zi5uYW1lKSksZj09PWwuc3BoZXJpY2FsKXtpZihhKXRocm93IG5ldyBFcnJvcihcInNwaGVyaWNhbCBjb29yZGluYXRlcyBvdXRzaWRlIG9mIFvCsTE4MMKwLCDCsTkwwrBdXCIpO2lbMF08dy0xODAmJihpWzBdPS0xODApLGlbMV08dy05MCYmKGlbMV09LTkwKSxpWzJdPjE4MC13JiYoaVsyXT0xODApLGlbM10+OTAtdyYmKGlbM109OTApfWMmJkUuc3RkZXJyLndyaXRlKFwiYm91bmRzOiBcIitpLmpvaW4oXCIgXCIpK1wiIChcIitmLm5hbWUrXCIpXFxuXCIpLGUmJihyPWQobixpLGUsbyksYyYmRS5zdGRlcnIud3JpdGUoXCJwcmUtcXVhbnRpemF0aW9uOiBcIityLnNjYWxlLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gZi5mb3JtYXREaXN0YW5jZShuKX0pLmpvaW4oXCIgXCIpK1wiXFxuXCIpKSxmPT09bC5zcGhlcmljYWwmJnUmJnMobixyKTtuPWgobik7cmV0dXJuIGUmJihuLnRyYW5zZm9ybT1yKSxuLmJib3g9aSxjJiZFLnN0ZGVyci53cml0ZShcInRvcG9sb2d5OiBcIituLmFyY3MubGVuZ3RoK1wiIGFyY3MsIFwiK24uYXJjcy5yZWR1Y2UoZnVuY3Rpb24obix0KXtyZXR1cm4gbit0Lmxlbmd0aH0sMCkrXCIgcG9pbnRzXFxuXCIpLG8mJm8hPT1lJiYodihuLGUsbykscj1uLnRyYW5zZm9ybSxjJiZFLnN0ZGVyci53cml0ZShcInBvc3QtcXVhbnRpemF0aW9uOiBcIityLnNjYWxlLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gZi5mb3JtYXREaXN0YW5jZShuKX0pLmpvaW4oXCIgXCIpK1wiXFxuXCIpKSxvJiZwKG4pLG59fSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyxuKFwiX3Byb2Nlc3NcIikpfSx7XCIuL2JvdW5kc1wiOjQsXCIuL2NvbXB1dGUtaWRcIjo2LFwiLi9jb29yZGluYXRlLXN5c3RlbXNcIjo3LFwiLi9kZWx0YVwiOjgsXCIuL2dlb21pZnlcIjo5LFwiLi9wb3N0LXF1YW50aXplXCI6MTAsXCIuL3ByZS1xdWFudGl6ZVwiOjExLFwiLi9zdGl0Y2hcIjoxNCxcIi4vdG9wb2xvZ3kvaW5kZXhcIjoyMSxcIi4vdHJhbnNmb3JtLXByb3BlcnRpZXNcIjoyNSxcIi4vdHlwZVwiOjI2LF9wcm9jZXNzOjJ9XSwxNjpbZnVuY3Rpb24obix0LHIpe3ZhciB3PW4oXCIuL2pvaW5cIik7ZnVuY3Rpb24gRShuLHQscil7Zm9yKHZhciBlLG89dCsoci0tLXQ+PjEpO3Q8bzsrK3QsLS1yKWU9blt0XSxuW3RdPW5bcl0sbltyXT1lfXQuZXhwb3J0cz1mdW5jdGlvbihuKXtmb3IodmFyIHQ9dyhuKSxyPW4uY29vcmRpbmF0ZXMsZT1uLmxpbmVzLG89bi5yaW5ncyxpPTAsYT1lLmxlbmd0aDtpPGE7KytpKWZvcih2YXIgdT1lW2ldLGM9dVswXSxmPXVbMV07KytjPGY7KXt0LmhhcyhyW2NdKSYmKGc9ezA6YywxOnVbMV19LHVbMV09Yyx1PXUubmV4dD1nKX1mb3IodmFyIHMsbCxoLHAsaT0wLGE9by5sZW5ndGg7aTxhOysraSlmb3IodmFyIGcsZD1vW2ldLHY9ZFswXSx5PXYsbT1kWzFdLE09dC5oYXMoclt2XSk7Kyt5PG07KXt0LmhhcyhyW3ldKSYmKE0/KGc9ezA6eSwxOmRbMV19LGRbMV09eSxkPWQubmV4dD1nKToocD0oaD1tKS15LEUocz1yLGw9dixoKSxFKHMsbCxsK3ApLEUocyxsK3AsaCksclttXT1yW3ZdLE09ITAseT12KSl9cmV0dXJuIG59fSx7XCIuL2pvaW5cIjoyMn1dLDE3OltmdW5jdGlvbihuLHQscil7bihcIi4vam9pblwiKTt2YXIgZD1uKFwiLi9oYXNobWFwXCIpLHY9bihcIi4vcG9pbnQtaGFzaFwiKSx5PW4oXCIuL3BvaW50LWVxdWFsXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihuKXt2YXIgcz1uLmNvb3JkaW5hdGVzLHQ9bi5saW5lcyxyPW4ucmluZ3MsZT10Lmxlbmd0aCtyLmxlbmd0aDtkZWxldGUgbi5saW5lcyxkZWxldGUgbi5yaW5ncztmb3IodmFyIG89MCxpPXQubGVuZ3RoO288aTsrK28pZm9yKHZhciBhPXRbb107YT1hLm5leHQ7KSsrZTtmb3Iobz0wLGk9ci5sZW5ndGg7bzxpOysrbylmb3IodmFyIHU9cltvXTt1PXUubmV4dDspKytlO2Zvcih2YXIgZj1kKDIqZSoxLjQsdix5KSxsPW4uYXJjcz1bXSxvPTAsaT10Lmxlbmd0aDtvPGk7KytvKWZvcihhPXRbb107YyhhKSxhPWEubmV4dDspO2ZvcihvPTAsaT1yLmxlbmd0aDtvPGk7KytvKXtpZigodT1yW29dKS5uZXh0KWZvcig7Yyh1KSx1PXUubmV4dDspO2Vsc2UhZnVuY3Rpb24obil7dmFyIHQscjtpZihyPWYuZ2V0KHQ9c1tuWzBdXSkpZm9yKHZhciBlPTAsbz1yLmxlbmd0aDtlPG87KytlKXtpZihoKGk9cltlXSxuKSlyZXR1cm4gblswXT1pWzBdLG5bMV09aVsxXTtpZihwKGksbikpcmV0dXJuIG5bMF09aVsxXSxuWzFdPWlbMF19aWYocj1mLmdldCh0PXNbblswXStnKG4pXSkpZm9yKHZhciBpLGU9MCxvPXIubGVuZ3RoO2U8bzsrK2Upe2lmKGgoaT1yW2VdLG4pKXJldHVybiBuWzBdPWlbMF0sblsxXT1pWzFdO2lmKHAoaSxuKSlyZXR1cm4gblswXT1pWzFdLG5bMV09aVswXX1yP3IucHVzaChuKTpmLnNldCh0LFtuXSk7bC5wdXNoKG4pfSh1KX1mdW5jdGlvbiBjKG4pe3ZhciB0LHIsZSxvO2lmKGU9Zi5nZXQodD1zW25bMF1dKSlmb3IodmFyIGk9MCxhPWUubGVuZ3RoO2k8YTsrK2kpe3ZhciB1PWVbaV07aWYoZnVuY3Rpb24obix0KXt2YXIgcj1uWzBdLGU9dFswXSxvPW5bMV0sdD10WzFdO2lmKHItbyE9ZS10KXJldHVybiExO2Zvcig7cjw9bzsrK3IsKytlKWlmKCF5KHNbcl0sc1tlXSkpcmV0dXJuITE7cmV0dXJuITB9KHUsbikpcmV0dXJuIG5bMF09dVswXSx2b2lkKG5bMV09dVsxXSl9aWYobz1mLmdldChyPXNbblsxXV0pKWZvcihpPTAsYT1vLmxlbmd0aDtpPGE7KytpKXt2YXIgYz1vW2ldO2lmKGZ1bmN0aW9uKG4sdCl7dmFyIHI9blswXSxlPXRbMF0sbz1uWzFdLGk9dFsxXTtpZihyLW8hPWUtaSlyZXR1cm4hMTtmb3IoO3I8PW87KytyLC0taSlpZigheShzW3JdLHNbaV0pKXJldHVybiExO3JldHVybiEwfShjLG4pKXJldHVybiBuWzFdPWNbMF0sdm9pZChuWzBdPWNbMV0pfWU/ZS5wdXNoKG4pOmYuc2V0KHQsW25dKSxvP28ucHVzaChuKTpmLnNldChyLFtuXSksbC5wdXNoKG4pfWZ1bmN0aW9uIGgobix0KXt2YXIgcj1uWzBdLGU9dFswXSxvPW5bMV0tcjtpZihvPT10WzFdLWUpe2Zvcih2YXIgaT1nKG4pLGE9Zyh0KSx1PTA7dTxvOysrdSlpZigheShzW3IrKHUraSklb10sc1tlKyh1K2EpJW9dKSlyZXR1cm47cmV0dXJuIDF9fWZ1bmN0aW9uIHAobix0KXt2YXIgcj1uWzBdLGU9dFswXSxvPW5bMV0saT10WzFdLGE9by1yO2lmKGE9PWktZSl7Zm9yKHZhciB1PWcobiksYz1hLWcodCksZj0wO2Y8YTsrK2YpaWYoIXkoc1tyKyhmK3UpJWFdLHNbaS0oZitjKSVhXSkpcmV0dXJuO3JldHVybiAxfX1mdW5jdGlvbiBnKG4pe2Zvcih2YXIgdD1uWzBdLHI9blsxXSxlPXQsbz1lLGk9c1tlXTsrK2U8cjspe3ZhciBhPXNbZV07KGFbMF08aVswXXx8YVswXT09PWlbMF0mJmFbMV08aVsxXSkmJihvPWUsaT1hKX1yZXR1cm4gby10fXJldHVybiBufX0se1wiLi9oYXNobWFwXCI6MTksXCIuL2pvaW5cIjoyMixcIi4vcG9pbnQtZXF1YWxcIjoyMyxcIi4vcG9pbnQtaGFzaFwiOjI0fV0sMTg6W2Z1bmN0aW9uKG4sdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24obil7dmFyIG89LTEsaT1bXSxhPVtdLHU9W107ZnVuY3Rpb24gdChuKXtuJiZlLmhhc093blByb3BlcnR5KG4udHlwZSkmJmVbbi50eXBlXShuKX12YXIgcixlPXtHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24obil7bi5nZW9tZXRyaWVzLmZvckVhY2godCl9LExpbmVTdHJpbmc6ZnVuY3Rpb24obil7bi5hcmNzPWMobi5jb29yZGluYXRlcyksZGVsZXRlIG4uY29vcmRpbmF0ZXN9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihuKXtuLmFyY3M9bi5jb29yZGluYXRlcy5tYXAoYyksZGVsZXRlIG4uY29vcmRpbmF0ZXN9LFBvbHlnb246ZnVuY3Rpb24obil7bi5hcmNzPW4uY29vcmRpbmF0ZXMubWFwKGYpLGRlbGV0ZSBuLmNvb3JkaW5hdGVzfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24obil7bi5hcmNzPW4uY29vcmRpbmF0ZXMubWFwKHMpLGRlbGV0ZSBuLmNvb3JkaW5hdGVzfX07ZnVuY3Rpb24gYyhuKXtmb3IodmFyIHQ9MCxyPW4ubGVuZ3RoO3Q8cjsrK3QpdVsrK29dPW5bdF07dmFyIGU9ezA6by1yKzEsMTpvfTtyZXR1cm4gaS5wdXNoKGUpLGV9ZnVuY3Rpb24gZihuKXtmb3IodmFyIHQ9MCxyPW4ubGVuZ3RoO3Q8cjsrK3QpdVsrK29dPW5bdF07dmFyIGU9ezA6by1yKzEsMTpvfTtyZXR1cm4gYS5wdXNoKGUpLGV9ZnVuY3Rpb24gcyhuKXtyZXR1cm4gbi5tYXAoZil9Zm9yKHIgaW4gbil0KG5bcl0pO3JldHVybnt0eXBlOlwiVG9wb2xvZ3lcIixjb29yZGluYXRlczp1LGxpbmVzOmkscmluZ3M6YSxvYmplY3RzOm59fX0se31dLDE5OltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGksYSx1LG4sYyx0KXszPT09YXJndW1lbnRzLmxlbmd0aCYmKG49dD1BcnJheSxjPW51bGwpO2Zvcih2YXIgZj1uZXcgbihpPTE8PE1hdGgubWF4KDQsTWF0aC5jZWlsKE1hdGgubG9nKGkpL01hdGguTE4yKSkpLHM9bmV3IHQoaSksbD1pLTEscj0wO3I8aTsrK3IpZltyXT1jO3JldHVybntzZXQ6ZnVuY3Rpb24obix0KXtmb3IodmFyIHI9YShuKSZsLGU9ZltyXSxvPTA7ZSE9Yzspe2lmKHUoZSxuKSlyZXR1cm4gc1tyXT10O2lmKCsrbz49aSl0aHJvdyBuZXcgRXJyb3IoXCJmdWxsIGhhc2htYXBcIik7ZT1mW3I9cisxJmxdfXJldHVybiBmW3JdPW4sc1tyXT10LHR9LG1heWJlU2V0OmZ1bmN0aW9uKG4sdCl7Zm9yKHZhciByPWEobikmbCxlPWZbcl0sbz0wO2UhPWM7KXtpZih1KGUsbikpcmV0dXJuIHNbcl07aWYoKytvPj1pKXRocm93IG5ldyBFcnJvcihcImZ1bGwgaGFzaG1hcFwiKTtlPWZbcj1yKzEmbF19cmV0dXJuIGZbcl09bixzW3JdPXQsdH0sZ2V0OmZ1bmN0aW9uKG4sdCl7Zm9yKHZhciByPWEobikmbCxlPWZbcl0sbz0wO2UhPWM7KXtpZih1KGUsbikpcmV0dXJuIHNbcl07aWYoKytvPj1pKWJyZWFrO2U9ZltyPXIrMSZsXX1yZXR1cm4gdH0sa2V5czpmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTAscj1mLmxlbmd0aDt0PHI7Kyt0KXt2YXIgZT1mW3RdO2UhPWMmJm4ucHVzaChlKX1yZXR1cm4gbn19fX0se31dLDIwOltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKG8saSxhLG4sdSl7Mz09PWFyZ3VtZW50cy5sZW5ndGgmJihuPUFycmF5LHU9bnVsbCk7Zm9yKHZhciBjPW5ldyBuKG89MTw8TWF0aC5tYXgoNCxNYXRoLmNlaWwoTWF0aC5sb2cobykvTWF0aC5MTjIpKSksZj1vLTEsdD0wO3Q8bzsrK3QpY1t0XT11O3JldHVybnthZGQ6ZnVuY3Rpb24obil7Zm9yKHZhciB0PWkobikmZixyPWNbdF0sZT0wO3IhPXU7KXtpZihhKHIsbikpcmV0dXJuITA7aWYoKytlPj1vKXRocm93IG5ldyBFcnJvcihcImZ1bGwgaGFzaHNldFwiKTtyPWNbdD10KzEmZl19cmV0dXJuIGNbdF09biwhMH0saGFzOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1pKG4pJmYscj1jW3RdLGU9MDtyIT11Oyl7aWYoYShyLG4pKXJldHVybiEwO2lmKCsrZT49bylicmVhaztyPWNbdD10KzEmZl19cmV0dXJuITF9LHZhbHVlczpmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTAscj1jLmxlbmd0aDt0PHI7Kyt0KXt2YXIgZT1jW3RdO2UhPXUmJm4ucHVzaChlKX1yZXR1cm4gbn19fX0se31dLDIxOltmdW5jdGlvbihuLHQscil7dmFyIGY9bihcIi4vaGFzaG1hcFwiKSxzPW4oXCIuL2V4dHJhY3RcIiksbD1uKFwiLi9jdXRcIiksaD1uKFwiLi9kZWR1cFwiKTtmdW5jdGlvbiBwKG4pe3ZhciB0PW5bMF0scj1uWzFdO3JldHVybiByPHQmJihuPXQsdD1yLHI9biksdCszMSpyfWZ1bmN0aW9uIGcobix0KXt2YXIgcixlPW5bMF0sbz1uWzFdLG49dFswXSx0PXRbMV07cmV0dXJuIG88ZSYmKHI9ZSxlPW8sbz1yKSx0PG4mJihyPW4sbj10LHQ9ciksZT09PW4mJm89PT10fXQuZXhwb3J0cz1mdW5jdGlvbihuKXt2YXIgdD1oKGwocyhuKSkpLHI9dC5jb29yZGluYXRlcyxlPWYoMS40KnQuYXJjcy5sZW5ndGgscCxnKTtmdW5jdGlvbiBvKG4pe24mJmEuaGFzT3duUHJvcGVydHkobi50eXBlKSYmYVtuLnR5cGVdKG4pfW49dC5vYmplY3RzLHQuYXJjcz10LmFyY3MubWFwKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIGUuc2V0KG4sdCksci5zbGljZShuWzBdLG5bMV0rMSl9KSxkZWxldGUgdC5jb29yZGluYXRlcyxyPW51bGw7dmFyIGksYT17R2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKG4pe24uZ2VvbWV0cmllcy5mb3JFYWNoKG8pfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKG4pe24uYXJjcz11KG4uYXJjcyl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihuKXtuLmFyY3M9bi5hcmNzLm1hcCh1KX0sUG9seWdvbjpmdW5jdGlvbihuKXtuLmFyY3M9bi5hcmNzLm1hcCh1KX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKG4pe24uYXJjcz1uLmFyY3MubWFwKGMpfX07ZnVuY3Rpb24gdShuKXt2YXIgdD1bXTtkb3t2YXIgcj1lLmdldChuKX13aGlsZSh0LnB1c2goblswXTxuWzFdP3I6fnIpLG49bi5uZXh0KTtyZXR1cm4gdH1mdW5jdGlvbiBjKG4pe3JldHVybiBuLm1hcCh1KX1mb3IoaSBpbiBuKW8obltpXSk7cmV0dXJuIHR9fSx7XCIuL2N1dFwiOjE2LFwiLi9kZWR1cFwiOjE3LFwiLi9leHRyYWN0XCI6MTgsXCIuL2hhc2htYXBcIjoxOX1dLDIyOltmdW5jdGlvbihuLHQscil7dmFyIHE9bihcIi4vaGFzaHNldFwiKSxMPW4oXCIuL2hhc2htYXBcIiksaj1uKFwiLi9wb2ludC1oYXNoXCIpLEY9bihcIi4vcG9pbnQtZXF1YWxcIik7dC5leHBvcnRzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgbz1uLmNvb3JkaW5hdGVzLHQ9bi5saW5lcyxyPW4ucmluZ3MsZT1mdW5jdGlvbigpe2Zvcih2YXIgbj1MKDEuNCpvLmxlbmd0aCxFLFAsSW50MzJBcnJheSwtMSxJbnQzMkFycmF5KSx0PW5ldyBJbnQzMkFycmF5KG8ubGVuZ3RoKSxyPTAsZT1vLmxlbmd0aDtyPGU7KytyKXRbcl09bi5tYXliZVNldChyLHIpO3JldHVybiB0fSgpLGk9bmV3IEludDMyQXJyYXkoby5sZW5ndGgpLGE9bmV3IEludDMyQXJyYXkoby5sZW5ndGgpLHU9bmV3IEludDMyQXJyYXkoby5sZW5ndGgpLGM9bmV3IEludDhBcnJheShvLmxlbmd0aCksZj0wLHM9MCxsPW8ubGVuZ3RoO3M8bDsrK3MpaVtzXT1hW3NdPXVbc109LTE7Zm9yKHM9MCxsPXQubGVuZ3RoO3M8bDsrK3Mpe3ZhciBoPXRbc10scD1oWzBdLGc9aFsxXSxkPWVbcF0sdj1lWysrcF07Zm9yKCsrZixjW2RdPTE7KytwPD1nOyl3KHMsZCxkPXYsdj1lW3BdKTsrK2YsY1t2XT0xfWZvcihzPTAsbD1vLmxlbmd0aDtzPGw7KytzKWlbc109LTE7Zm9yKHM9MCxsPXIubGVuZ3RoO3M8bDsrK3Mpe3ZhciB5PXJbc10sbT15WzBdKzEsTT15WzFdO2Zvcih3KHMsZVtNLTFdLGQ9ZVttLTFdLHY9ZVttXSk7KyttPD1NOyl3KHMsZCxkPXYsdj1lW21dKX1mdW5jdGlvbiB3KG4sdCxyLGUpe3ZhciBvO2lbcl0hPT1uJiYoaVtyXT1uLDA8PShvPWFbcl0pPyhuPXVbcl0sbz09PXQmJm49PT1lfHxvPT09ZSYmbj09PXR8fCgrK2YsY1tyXT0xKSk6KGFbcl09dCx1W3JdPWUpKX1mdW5jdGlvbiBFKG4pe3JldHVybiBqKG9bbl0pfWZ1bmN0aW9uIFAobix0KXtyZXR1cm4gRihvW25dLG9bdF0pfWk9YT11PW51bGw7Zm9yKHZhciB4LGI9cSgxLjQqZixqLEYpLHM9MCxsPW8ubGVuZ3RoO3M8bDsrK3MpY1t4PWVbc11dJiZiLmFkZChvW3hdKTtyZXR1cm4gYn19LHtcIi4vaGFzaG1hcFwiOjE5LFwiLi9oYXNoc2V0XCI6MjAsXCIuL3BvaW50LWVxdWFsXCI6MjMsXCIuL3BvaW50LWhhc2hcIjoyNH1dLDIzOltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG5bMF09PT10WzBdJiZuWzFdPT09dFsxXX19LHt9XSwyNDpbZnVuY3Rpb24obix0LHIpe3ZhciBlPW5ldyBBcnJheUJ1ZmZlcigxNiksbz1uZXcgRmxvYXQ2NEFycmF5KGUpLGk9bmV3IFVpbnQzMkFycmF5KGUpO3QuZXhwb3J0cz1mdW5jdGlvbihuKXtvWzBdPW5bMF0sb1sxXT1uWzFdO249aVswXV5pWzFdO3JldHVybiAyMTQ3NDgzNjQ3JihuPW48PDVebj4+N15pWzJdXmlbM10pfX0se31dLDI1OltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKG4sZSl7ZnVuY3Rpb24gdChuKXtudWxsPT1uLnByb3BlcnRpZXMmJihuLnByb3BlcnRpZXM9e30pO3ZhciB0PW4ucHJvcGVydGllcz1lKG4pO2lmKHQpZm9yKHZhciByIGluIHQpcmV0dXJuO2RlbGV0ZSBuLnByb3BlcnRpZXN9YXJndW1lbnRzLmxlbmd0aDwyJiYoZT1mdW5jdGlvbigpe30pO3ZhciByLG8saT17RmVhdHVyZTp0LEZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKG4pe24uZmVhdHVyZXMuZm9yRWFjaCh0KX19O2ZvcihyIGluIG4pKG89bltyXSkmJmkuaGFzT3duUHJvcGVydHkoby50eXBlKSYmaVtvLnR5cGVdKG8pO3JldHVybiBufX0se31dLDI2OltmdW5jdGlvbihuLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCBpbiBlKXQgaW4gbnx8KG5bdF09ZVt0XSk7cmV0dXJuIG4uZGVmYXVsdHM9ZSxufTt2YXIgZT17RmVhdHVyZTpmdW5jdGlvbihuKXtuLmdlb21ldHJ5JiZ0aGlzLmdlb21ldHJ5KG4uZ2VvbWV0cnkpfSxGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbihuKXtmb3IodmFyIHQ9bi5mZWF0dXJlcyxyPS0xLGU9dC5sZW5ndGg7KytyPGU7KXRoaXMuRmVhdHVyZSh0W3JdKX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmdlb21ldHJpZXMscj0tMSxlPXQubGVuZ3RoOysrcjxlOyl0aGlzLmdlb21ldHJ5KHRbcl0pfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKG4pe3RoaXMubGluZShuLmNvb3JkaW5hdGVzKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmNvb3JkaW5hdGVzLHI9LTEsZT10Lmxlbmd0aDsrK3I8ZTspdGhpcy5saW5lKHRbcl0pfSxNdWx0aVBvaW50OmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmNvb3JkaW5hdGVzLHI9LTEsZT10Lmxlbmd0aDsrK3I8ZTspdGhpcy5wb2ludCh0W3JdKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmNvb3JkaW5hdGVzLHI9LTEsZT10Lmxlbmd0aDsrK3I8ZTspdGhpcy5wb2x5Z29uKHRbcl0pfSxQb2ludDpmdW5jdGlvbihuKXt0aGlzLnBvaW50KG4uY29vcmRpbmF0ZXMpfSxQb2x5Z29uOmZ1bmN0aW9uKG4pe3RoaXMucG9seWdvbihuLmNvb3JkaW5hdGVzKX0sb2JqZWN0OmZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT1uP251bGw6aS5oYXNPd25Qcm9wZXJ0eShuLnR5cGUpP3RoaXNbbi50eXBlXShuKTp0aGlzLmdlb21ldHJ5KG4pfSxnZW9tZXRyeTpmdW5jdGlvbihuKXtyZXR1cm4gbnVsbCE9biYmby5oYXNPd25Qcm9wZXJ0eShuLnR5cGUpP3RoaXNbbi50eXBlXShuKTpudWxsfSxwb2ludDpmdW5jdGlvbigpe30sbGluZTpmdW5jdGlvbihuKXtmb3IodmFyIHQ9LTEscj1uLmxlbmd0aDsrK3Q8cjspdGhpcy5wb2ludChuW3RdKX0scG9seWdvbjpmdW5jdGlvbihuKXtmb3IodmFyIHQ9LTEscj1uLmxlbmd0aDsrK3Q8cjspdGhpcy5saW5lKG5bdF0pfX0sbz17TGluZVN0cmluZzoxLE11bHRpTGluZVN0cmluZzoxLE11bHRpUG9pbnQ6MSxNdWx0aVBvbHlnb246MSxQb2ludDoxLFBvbHlnb246MSxHZW9tZXRyeUNvbGxlY3Rpb246MX0saT17RmVhdHVyZToxLEZlYXR1cmVDb2xsZWN0aW9uOjF9fSx7fV19LHt9LFsxXSk7IiwiIWZ1bmN0aW9uKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMpLm92ZXJwYXNzV2l6YXJkPWUoKX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gbihhLHUsaSl7ZnVuY3Rpb24gbyhyLGUpe2lmKCF1W3JdKXtpZighYVtyXSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZSYmdClyZXR1cm4gdChyLCEwKTtpZihzKXJldHVybiBzKHIsITApO3Rocm93KHQ9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIityK1wiJ1wiKSkuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIix0fXQ9dVtyXT17ZXhwb3J0czp7fX0sYVtyXVswXS5jYWxsKHQuZXhwb3J0cyxmdW5jdGlvbihlKXtyZXR1cm4gbyhhW3JdWzFdW2VdfHxlKX0sdCx0LmV4cG9ydHMsbixhLHUsaSl9cmV0dXJuIHVbcl0uZXhwb3J0c31mb3IodmFyIHM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxlPTA7ZTxpLmxlbmd0aDtlKyspbyhpW2VdKTtyZXR1cm4gb30oezE6W2Z1bmN0aW9uKGUscix0KXtyLmV4cG9ydHM9ZnVuY3Rpb24odSl7dmFyIGU9e307aWYoISh1PXV8fHt9KSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mICQpcmV0dXJuITE7dmFyIHI9XCJkYXRhL2lEX3ByZXNldHMuanNvblwiO3RyeXskLmFqYXgocix7YXN5bmM6ITEsZGF0YVR5cGU6XCJqc29uXCJ9KS5zdWNjZXNzKGZ1bmN0aW9uKGUpe3U9ZX0pLmVycm9yKGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yfSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcImZhaWxlZCB0byBsb2FkIHByZXNldHMgZmlsZVwiLHIsZSl9fXJldHVybiBPYmplY3Qua2V5cyh1KS5tYXAoZnVuY3Rpb24oZSl7ZT11W2VdO2UubmFtZUNhc2VkPWUubmFtZSxlLm5hbWU9ZS5uYW1lLnRvTG93ZXJDYXNlKCksZS50ZXJtcz1lLnRlcm1zP2UudGVybXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvTG93ZXJDYXNlKCl9KTpbXX0pLGZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mICQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBpMThuKXt2YXIgZT1pMThuLmdldExhbmd1YWdlKCk7aWYoXCJlblwiIT1lKXt2YXIgcj1cImRhdGEvaURfcHJlc2V0c19cIitlK1wiLmpzb25cIjt0cnl7JC5hamF4KHIse2FzeW5jOiExLGRhdGFUeXBlOlwianNvblwifSkuc3VjY2VzcyhmdW5jdGlvbihuKXtPYmplY3Qua2V5cyhuKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHI9bltlXTsoZT11W2VdKS50cmFuc2xhdGVkPSEwO3ZhciB0PWUubmFtZTtlLm5hbWVDYXNlZD1yLm5hbWUsZS5uYW1lPXIubmFtZS50b0xvd2VyQ2FzZSgpLHIudGVybXMmJihlLnRlcm1zPXIudGVybXMuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCkudG9Mb3dlckNhc2UoKX0pLmNvbmNhdChlLnRlcm1zKSksZS50ZXJtcy51bnNoaWZ0KHQpfSl9KS5lcnJvcihmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcn0pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gbG9hZCBwcmVzZXQgdHJhbnNsYXRpb25zIGZpbGU6IFwiK3IpfX19fSgpLGUuZ2V0X3F1ZXJ5X2NsYXVzZT1mdW5jdGlvbihlKXt2YXIgdD1lLmZyZWUudG9Mb3dlckNhc2UoKSxlPU9iamVjdC5rZXlzKHUpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdVtlXX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWUuc2VhcmNoYWJsZSYmKGUubmFtZT09PXR8fChlLl90ZXJtc0luZGV4PWUudGVybXMuaW5kZXhPZih0KSwtMSE9ZS5fdGVybXNJbmRleCkpfSk7aWYoMD09PWUubGVuZ3RoKXJldHVybiExO2Uuc29ydChmdW5jdGlvbihlLHIpe3JldHVybiBlLm5hbWU9PT10Py0xOnIubmFtZT09PXQ/MTplLl90ZXJtc0luZGV4LXIuX3Rlcm1zSW5kZXh9KTt2YXIgbj1lWzBdLHI9W107cmV0dXJuIG4uZ2VvbWV0cnkuZm9yRWFjaChmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZVwicG9pbnRcIjpjYXNlXCJ2ZXJ0ZXhcIjpyLnB1c2goXCJub2RlXCIpO2JyZWFrO2Nhc2VcImxpbmVcIjpyLnB1c2goXCJ3YXlcIik7YnJlYWs7Y2FzZVwiYXJlYVwiOnIucHVzaChcIndheVwiKSxyLnB1c2goXCJyZWxhdGlvblwiKTticmVhaztjYXNlXCJyZWxhdGlvblwiOnIucHVzaChcInJlbGF0aW9uXCIpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcihcInVua25vd24gZ2VvbWV0cnkgdHlwZSBcIitlK1wiIG9mIHByZXNldCBcIituLm5hbWUpfX0pLHt0eXBlczpyLmZpbHRlcihmdW5jdGlvbihlLHIsdCl7cmV0dXJuIHQuaW5kZXhPZihlKT09PXJ9KSxjb25kaXRpb25zOk9iamVjdC5rZXlzKG4udGFncykubWFwKGZ1bmN0aW9uKGUpe3ZhciByPW4udGFnc1tlXTtyZXR1cm57cXVlcnk6XCIqXCI9PT1yP1wia2V5XCI6XCJlcVwiLGtleTplLHZhbDpyfX0pfX0sZS5mdXp6eV9zZWFyY2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mcmVlLnRvTG93ZXJDYXNlKCkscj0yK01hdGguZmxvb3IodC5sZW5ndGgvNyk7ZnVuY3Rpb24gbihlKXtyZXR1cm4gbGV2ZW5zaHRlaW5EaXN0YW5jZShlLHQpPD1yfWU9T2JqZWN0LmtleXModSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1W2VdfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiExIT09ZS5zZWFyY2hhYmxlJiYoISFuKGUubmFtZSl8fGUudGVybXMuc29tZShuKSl9KTtyZXR1cm4gMCE9PWUubGVuZ3RoJiYoZS5zb3J0KGZ1bmN0aW9uKGUscil7cmV0dXJuIGEoZSktYShyKX0pLGVbMF0ubmFtZUNhc2VkKTtmdW5jdGlvbiBhKGUpe3JldHVybltlLm5hbWVdLmNvbmNhdChlLnRlcm1zKS5tYXAoZnVuY3Rpb24oZSxyKXtyZXR1cm4gbGV2ZW5zaHRlaW5EaXN0YW5jZShlLHQpfSkucmVkdWNlKGZ1bmN0aW9uKGUscil7cmV0dXJuIGU8PXI/ZTpyfSl9fSxlfX0se31dLDI6W2Z1bmN0aW9uKGssZSxyKXt2YXIgcSx4PWsoXCIuL3BhcnNlci5qc1wiKTtmdW5jdGlvbiB3KGUpe3ZhciByPXtsb2dpY2FsOlwib3JcIixxdWVyaWVzOltdfTtyZXR1cm4gci5xdWVyaWVzPWZ1bmN0aW9uIGUocil7aWYoIXIubG9naWNhbClyZXR1cm5be2xvZ2ljYWw6XCJhbmRcIixxdWVyaWVzOltyXX1dO2lmKFwiYW5kXCI9PT1yLmxvZ2ljYWwpe2Zvcih2YXIgdD1lKHIucXVlcmllc1swXSksbj1lKHIucXVlcmllc1sxXSksYT1bXSx1PTA7dTx0Lmxlbmd0aDt1KyspZm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspYS5wdXNoKHtsb2dpY2FsOlwiYW5kXCIscXVlcmllczp0W3VdLnF1ZXJpZXMuY29uY2F0KG5baV0ucXVlcmllcyl9KTtyZXR1cm4gYX1pZihcIm9yXCI9PT1yLmxvZ2ljYWwpcmV0dXJuIHQ9ZShyLnF1ZXJpZXNbMF0pLG49ZShyLnF1ZXJpZXNbMV0pLFtdLmNvbmNhdCh0LG4pO2NvbnNvbGUuZXJyb3IoXCJ1bnN1cHBvcnRlZCBib29sZWFuIG9wZXJhdG9yOiBcIityLmxvZ2ljYWwpfShlKSxyfWUuZXhwb3J0cz1mdW5jdGlvbihlLHIpe3ZhciB0LG4sYT17Y29tbWVudDohMCxvdXRwdXRNb2RlOlwiZ2VvbVwiLGdsb2JhbEJib3g6ITAsdGltZW91dDoyNSxtYXhzaXplOnZvaWQgMCxvdXRwdXRGb3JtYXQ6XCJqc29uXCIsYXJvdW5kUmFkaXVzOjFlMyxmcmVlRm9ybVByZXNldHM6dm9pZCAwfTtmb3IodCBpbiByKWFbdF09clt0XTtmdW5jdGlvbiB1KGUpe3JldHVybiBlLnJlcGxhY2UoL1xcKlxcLy9nLFwiW+KApl1cIikucmVwbGFjZSgvXFxuL2csXCJcXFxcblwiKX1yPWE7dHJ5e249eC5wYXJzZShlKX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcImNvdWxkbid0IHBhcnNlIHdpemFyZCBpbnB1dFwiKSwhMX12YXIgaSxvPVtdO3N3aXRjaCghMD09PXIuY29tbWVudD8oby5wdXNoKFwiLypcIiksby5wdXNoKFwiVGhpcyBoYXMgYmVlbiBnZW5lcmF0ZWQgYnkgdGhlIG92ZXJwYXNzLXR1cmJvIHdpemFyZC5cIiksby5wdXNoKFwiVGhlIG9yaWdpbmFsIHNlYXJjaCB3YXM6XCIpLG8ucHVzaChcIuKAnFwiK3UoZSkrXCLigJ1cIiksby5wdXNoKFwiKi9cIikpOlwic3RyaW5nXCI9PXR5cGVvZiByLmNvbW1lbnQmJihvLnB1c2goXCIvKlwiKSxvLnB1c2goci5jb21tZW50KSxvLnB1c2goXCIqL1wiKSxjb21tZW50PSEwKSxvLnB1c2goXCJbb3V0OlwiK3Iub3V0cHV0Rm9ybWF0K1wiXVt0aW1lb3V0OlwiK3IudGltZW91dCtcIl1cIisodm9pZCAwIT09ci5tYXhzaXplP1wiW21heHNpemU6XCIrci5tYXhzaXplK1wiXVwiOlwiXCIpKyhyLmdsb2JhbEJib3gmJlwiYmJveFwiPT09bi5ib3VuZHM/XCJbYmJveDp7e2Jib3h9fV1cIjpcIlwiKStcIjtcIiksbi5ib3VuZHMpe2Nhc2VcImFyZWFcIjpyLmNvbW1lbnQmJm8ucHVzaChcIi8vIGZldGNoIGFyZWEg4oCcXCIrbi5hcmVhK1wi4oCdIHRvIHNlYXJjaCBpblwiKSxvLnB1c2goXCJ7e2dlb2NvZGVBcmVhOlwiK24uYXJlYStcIn19LT4uc2VhcmNoQXJlYTtcIiksaT1cIihhcmVhLnNlYXJjaEFyZWEpXCI7YnJlYWs7Y2FzZVwiYXJvdW5kXCI6ci5jb21tZW50JiZvLnB1c2goXCIvLyBhZGp1c3QgdGhlIHNlYXJjaCByYWRpdXMgKGluIG1ldGVycykgaGVyZVwiKSxvLnB1c2goXCJ7e3JhZGl1cz1cIityLmFyb3VuZFJhZGl1cytcIn19XCIpLGk9XCIoYXJvdW5kOnt7cmFkaXVzfX0se3tnZW9jb2RlQ29vcmRzOlwiK24uYXJlYStcIn19KVwiO2JyZWFrO2Nhc2VcImJib3hcIjppPXIuZ2xvYmFsQmJveD9cIlwiOlwiKHt7YmJveH19KVwiO2JyZWFrO2Nhc2VcImdsb2JhbFwiOmk9dm9pZCAwO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ1bmtub3duIGJvdW5kcyBjb25kaXRpb246IFwiK24uYm91bmRzKSwhMX1mdW5jdGlvbiBzKGUpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUucmVwbGFjZSgvKFsoKVt7KisuJF5cXFxcfD9dKS9nLFwiXFxcXCQxXCIpfWZ1bmN0aW9uIHQoZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIGUucmVwbGFjZSgvXFxcXC9nLFwiXFxcXFxcXFxcIikucmVwbGFjZSgvXCIvZywnXFxcXFwiJykucmVwbGFjZSgvXFx0L2csXCJcXFxcdFwiKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpfXZhciBuPXQoZS5rZXkpLGE9dChlLnZhbCk7c3dpdGNoKFwic3Vic3RyXCI9PT1lLnF1ZXJ5JiYoZS5xdWVyeT1cImxpa2VcIixlLnZhbD17cmVnZXg6cihlLnZhbCl9KSxcIlwiPT09YSYmKFwiZXFcIj09PWUucXVlcnk/KGUucXVlcnk9XCJsaWtlXCIsZS52YWw9e3JlZ2V4OlwiXiRcIn0pOlwibmVxXCI9PT1lLnF1ZXJ5JiYoZS5xdWVyeT1cIm5vdGxpa2VcIixlLnZhbD17cmVnZXg6XCJeJFwifSkpLFwiXCI9PT1uJiYoXCJrZXlcIj09PWUucXVlcnk/KGUucXVlcnk9XCJsaWtlbGlrZVwiLG49XCJeJFwiLGUudmFsPXtyZWdleDpcIi4qXCJ9KTpcImVxXCI9PT1lLnF1ZXJ5PyhlLnF1ZXJ5PVwibGlrZWxpa2VcIixuPVwiXiRcIixlLnZhbD17cmVnZXg6XCJeXCIrcihlLnZhbCkrXCIkXCJ9KTpcImxpa2VcIj09PWUucXVlcnkmJihlLnF1ZXJ5PVwibGlrZWxpa2VcIixuPVwiXiRcIikpLGUucXVlcnkpe2Nhc2VcImtleVwiOnJldHVybidbXCInK24rJ1wiXSc7Y2FzZVwibm9rZXlcIjpyZXR1cm4nW1wiJytuKydcIiF+XCIuKlwiXSc7Y2FzZVwiZXFcIjpyZXR1cm4nW1wiJytuKydcIj1cIicrYSsnXCJdJztjYXNlXCJuZXFcIjpyZXR1cm4nW1wiJytuKydcIiE9XCInK2ErJ1wiXSc7Y2FzZVwibGlrZVwiOnJldHVybidbXCInK24rJ1wiflwiJyt0KGUudmFsLnJlZ2V4KSsnXCInKyhcImlcIj09PWUudmFsLm1vZGlmaWVyP1wiLGlcIjpcIlwiKStcIl1cIjtjYXNlXCJsaWtlbGlrZVwiOnJldHVybidbflwiJytuKydcIn5cIicrdChlLnZhbC5yZWdleCkrJ1wiJysoXCJpXCI9PT1lLnZhbC5tb2RpZmllcj9cIixpXCI6XCJcIikrXCJdXCI7Y2FzZVwibm90bGlrZVwiOnJldHVybidbXCInK24rJ1wiIX5cIicrdChlLnZhbC5yZWdleCkrJ1wiJysoXCJpXCI9PT1lLnZhbC5tb2RpZmllcj9cIixpXCI6XCJcIikrXCJdXCI7Y2FzZVwibWV0YVwiOnN3aXRjaChlLm1ldGEpe2Nhc2VcImlkXCI6cmV0dXJuXCIoXCIrYStcIilcIjtjYXNlXCJuZXdlclwiOnJldHVybiBlLnZhbC5tYXRjaCgvXi0/XFxkKyA/KHNlY29uZHM/fG1pbnV0ZXM/fGhvdXJzP3xkYXlzP3x3ZWVrcz98bW9udGhzP3x5ZWFycz8pPyQvKT8nKG5ld2VyOlwie3tkYXRlOicrYSsnfX1cIiknOicobmV3ZXI6XCInK2ErJ1wiKSc7Y2FzZVwidXNlclwiOnJldHVybicodXNlcjpcIicrYSsnXCIpJztjYXNlXCJ1aWRcIjpyZXR1cm5cIih1aWQ6XCIrYStcIilcIjtkZWZhdWx0OnJldHVybiBjb25zb2xlLmVycm9yKFwidW5rbm93biBxdWVyeSB0eXBlOiBtZXRhL1wiK2UubWV0YSksITF9Y2FzZVwiZnJlZSBmb3JtXCI6ZGVmYXVsdDpyZXR1cm4gY29uc29sZS5lcnJvcihcInVua25vd24gcXVlcnkgdHlwZTogXCIrZS5xdWVyeSksITF9fWZ1bmN0aW9uIGwoZSl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gbnVsbD09PWUubWF0Y2goL15bYS16QS1aMC05X10rJC8pPydcIicrZS5yZXBsYWNlKC9cIi9nLCdcXFxcXCInKSsnXCInOmV9ZnVuY3Rpb24gdChlKXtyZXR1cm4gbnVsbD09PWUucmVnZXgubWF0Y2goL15bYS16QS1aMC05X10rJC8pfHxlLm1vZGlmaWVyP1wiL1wiK2UucmVnZXgucmVwbGFjZSgvXFwvL2csXCJcXFxcL1wiKStcIi9cIisoZS5tb2RpZmllcnx8XCJcIik6ZS5yZWdleH1zd2l0Y2goZS5xdWVyeSl7Y2FzZVwia2V5XCI6cmV0dXJuIHUocihlLmtleSkrXCI9KlwiKTtjYXNlXCJub2tleVwiOnJldHVybiB1KHIoZS5rZXkpK1wiIT0qXCIpO2Nhc2VcImVxXCI6cmV0dXJuIHUocihlLmtleSkrXCI9XCIrcihlLnZhbCkpO2Nhc2VcIm5lcVwiOnJldHVybiB1KHIoZS5rZXkpK1wiIT1cIityKGUudmFsKSk7Y2FzZVwibGlrZVwiOnJldHVybiB1KHIoZS5rZXkpK1wiflwiK3QoZS52YWwpKTtjYXNlXCJsaWtlbGlrZVwiOnJldHVybiB1KFwiflwiK3IoZS5rZXkpK1wiflwiK3QoZS52YWwpKTtjYXNlXCJub3RsaWtlXCI6cmV0dXJuIHUocihlLmtleSkrXCIhflwiK3QoZS52YWwpKTtjYXNlXCJzdWJzdHJcIjpyZXR1cm4gdShyKGUua2V5KStcIjpcIityKGUudmFsKSk7Y2FzZVwibWV0YVwiOnN3aXRjaChlLm1ldGEpe2Nhc2VcImlkXCI6cmV0dXJuIHUoXCJpZDpcIityKGUudmFsKSk7Y2FzZVwibmV3ZXJcIjpyZXR1cm4gdShcIm5ld2VyOlwiK3IoZS52YWwpKTtjYXNlXCJ1c2VyXCI6cmV0dXJuIHUoXCJ1c2VyOlwiK3IoZS52YWwpKTtjYXNlXCJ1aWRcIjpyZXR1cm4gdShcInVpZDpcIityKGUudmFsKSk7ZGVmYXVsdDpyZXR1cm5cIlwifWNhc2VcImZyZWUgZm9ybVwiOnJldHVybiB1KHIoZS5mcmVlKSk7ZGVmYXVsdDpyZXR1cm5cIlwifX1uLnF1ZXJ5PXcobi5xdWVyeSksci5jb21tZW50JiZvLnB1c2goXCIvLyBnYXRoZXIgcmVzdWx0c1wiKSxvLnB1c2goXCIoXCIpO2Zvcih2YXIgYz0wO2M8bi5xdWVyeS5xdWVyaWVzLmxlbmd0aDtjKyspe2Zvcih2YXIgcD1uLnF1ZXJ5LnF1ZXJpZXNbY10sZj1bXCJub2RlXCIsXCJ3YXlcIixcInJlbGF0aW9uXCJdLGQ9W10sJD1bXSx5PTA7eTxwLnF1ZXJpZXMubGVuZ3RoO3krKyl7dmFyIGg9cC5xdWVyaWVzW3ldO2lmKFwiZnJlZSBmb3JtXCI9PT1oLnF1ZXJ5KXt2YXIgdj0ocT1xfHxrKFwiLi9mcmVlXCIpKHIuZnJlZUZvcm1QcmVzZXRzKSkuZ2V0X3F1ZXJ5X2NsYXVzZShoKTtpZighMT09PXYpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBmaW5kIHByZXNldCBmb3IgZnJlZSBmb3JtIGlucHV0OiBcIitoLmZyZWUpLCExO2Y9Zi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPXYudHlwZXMuaW5kZXhPZihlKX0pLHIuY29tbWVudCYmJC5wdXNoKGwoaCkpLGQ9ZC5jb25jYXQodi5jb25kaXRpb25zLm1hcChzKSl9ZWxzZSBpZihcInR5cGVcIj09PWgucXVlcnkpZj0tMSE9Zi5pbmRleE9mKGgudHlwZSk/W2gudHlwZV06W107ZWxzZXtyLmNvbW1lbnQmJiQucHVzaChsKGgpKTtoPXMoaCk7aWYoITE9PT1oKXJldHVybiExO2QucHVzaChoKX19JD0kLmpvaW4oXCIgYW5kIFwiKSxyLmNvbW1lbnQmJm8ucHVzaChcIiAgLy8gcXVlcnkgcGFydCBmb3I6IOKAnFwiKyQrXCLigJ1cIik7Zm9yKHZhciBtPTA7bTxmLmxlbmd0aDttKyspe2Zvcih2YXIgZz1cIiAgXCIrZlttXSxiPTA7YjxkLmxlbmd0aDtiKyspZys9ZFtiXTtpJiYoZys9aSksZys9XCI7XCIsby5wdXNoKGcpfX1yZXR1cm4gby5wdXNoKFwiKTtcIiksci5jb21tZW50JiZvLnB1c2goXCIvLyBwcmludCByZXN1bHRzXCIpLFwicmVjdXJzaXZlXCI9PT1yLm91dHB1dE1vZGU/KG8ucHVzaChcIm91dCBib2R5O1wiKSxvLnB1c2goXCI+O1wiKSxvLnB1c2goXCJvdXQgc2tlbCBxdDtcIikpOm8ucHVzaChcIm91dCBcIityLm91dHB1dE1vZGUrXCI7XCIpLG8uam9pbihcIlxcblwiKX19LHtcIi4vZnJlZVwiOjEsXCIuL3BhcnNlci5qc1wiOjN9XSwzOltmdW5jdGlvbihlLHIsdCl7ci5leHBvcnRzPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdihlLHIsdCxuKXt0aGlzLm1lc3NhZ2U9ZSx0aGlzLmV4cGVjdGVkPXIsdGhpcy5mb3VuZD10LHRoaXMubG9jYXRpb249bix0aGlzLm5hbWU9XCJTeW50YXhFcnJvclwiLFwiZnVuY3Rpb25cIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHYpfWZ1bmN0aW9uIGUoKXt0aGlzLmNvbnN0cnVjdG9yPXJ9dmFyIHIsdDtyZXR1cm4gcj12LHQ9RXJyb3IsZS5wcm90b3R5cGU9dC5wcm90b3R5cGUsci5wcm90b3R5cGU9bmV3IGUse1N5bnRheEVycm9yOnYscGFyc2U6ZnVuY3Rpb24oYyl7dmFyIGU9MTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp7fSxwPXt9LHI9e3N0YXJ0OjB9LHQ9MCxmPVtmdW5jdGlvbihlKXtyZXR1cm4gZX0sXCJpbiBiYm94XCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJpbiBiYm94XCIsZGVzY3JpcHRpb246J1wiaW4gYmJveFwiJ30sXCJJTiBCQk9YXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJJTiBCQk9YXCIsZGVzY3JpcHRpb246J1wiSU4gQkJPWFwiJ30sZnVuY3Rpb24oZSl7cmV0dXJue2JvdW5kczpcImJib3hcIixxdWVyeTplfX0sXCJpblwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiaW5cIixkZXNjcmlwdGlvbjonXCJpblwiJ30sXCJJTlwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiSU5cIixkZXNjcmlwdGlvbjonXCJJTlwiJ30sZnVuY3Rpb24oZSxyKXtyZXR1cm57Ym91bmRzOlwiYXJlYVwiLHF1ZXJ5OmUsYXJlYTpyfX0sXCJhcm91bmRcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcImFyb3VuZFwiLGRlc2NyaXB0aW9uOidcImFyb3VuZFwiJ30sXCJBUk9VTkRcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIkFST1VORFwiLGRlc2NyaXB0aW9uOidcIkFST1VORFwiJ30sZnVuY3Rpb24oZSxyKXtyZXR1cm57Ym91bmRzOlwiYXJvdW5kXCIscXVlcnk6ZSxhcmVhOnJ9fSxcImdsb2JhbFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiZ2xvYmFsXCIsZGVzY3JpcHRpb246J1wiZ2xvYmFsXCInfSxcIkdMT0JBTFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiR0xPQkFMXCIsZGVzY3JpcHRpb246J1wiR0xPQkFMXCInfSxmdW5jdGlvbihlKXtyZXR1cm57Ym91bmRzOlwiZ2xvYmFsXCIscXVlcnk6ZX19LFwib3JcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIm9yXCIsZGVzY3JpcHRpb246J1wib3JcIid9LFwiT1JcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIk9SXCIsZGVzY3JpcHRpb246J1wiT1JcIid9LFwifHxcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcInx8XCIsZGVzY3JpcHRpb246J1wifHxcIid9LFwifFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwifFwiLGRlc2NyaXB0aW9uOidcInxcIid9LGZ1bmN0aW9uKGUscil7cmV0dXJue2xvZ2ljYWw6XCJvclwiLHF1ZXJpZXM6W2Uscl19fSxcImFuZFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiYW5kXCIsZGVzY3JpcHRpb246J1wiYW5kXCInfSxcIkFORFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiQU5EXCIsZGVzY3JpcHRpb246J1wiQU5EXCInfSxcIiYmXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCImJlwiLGRlc2NyaXB0aW9uOidcIiYmXCInfSxcIiZcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIiZcIixkZXNjcmlwdGlvbjonXCImXCInfSxmdW5jdGlvbihlLHIpe3JldHVybntsb2dpY2FsOlwiYW5kXCIscXVlcmllczpbZSxyXX19LFwiKFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiKFwiLGRlc2NyaXB0aW9uOidcIihcIid9LFwiKVwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiKVwiLGRlc2NyaXB0aW9uOidcIilcIid9LGZ1bmN0aW9uKGUpe3JldHVybiBlfSxcIj1cIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIj1cIixkZXNjcmlwdGlvbjonXCI9XCInfSxcIj09XCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCI9PVwiLGRlc2NyaXB0aW9uOidcIj09XCInfSxmdW5jdGlvbihlLHIpe3JldHVybntxdWVyeTpcImVxXCIsa2V5OmUsdmFsOnJ9fSxcIiE9XCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCIhPVwiLGRlc2NyaXB0aW9uOidcIiE9XCInfSxcIjw+XCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCI8PlwiLGRlc2NyaXB0aW9uOidcIjw+XCInfSxmdW5jdGlvbihlLHIpe3JldHVybntxdWVyeTpcIm5lcVwiLGtleTplLHZhbDpyfX0sXCIqXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCIqXCIsZGVzY3JpcHRpb246J1wiKlwiJ30sZnVuY3Rpb24oZSl7cmV0dXJue3F1ZXJ5Olwia2V5XCIsa2V5OmV9fSxcImlzXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJpc1wiLGRlc2NyaXB0aW9uOidcImlzXCInfSxcIm5vdFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwibm90XCIsZGVzY3JpcHRpb246J1wibm90XCInfSxcIm51bGxcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIm51bGxcIixkZXNjcmlwdGlvbjonXCJudWxsXCInfSxcIklTXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJJU1wiLGRlc2NyaXB0aW9uOidcIklTXCInfSxcIk5PVFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiTk9UXCIsZGVzY3JpcHRpb246J1wiTk9UXCInfSxcIk5VTExcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIk5VTExcIixkZXNjcmlwdGlvbjonXCJOVUxMXCInfSxmdW5jdGlvbihlKXtyZXR1cm57cXVlcnk6XCJub2tleVwiLGtleTplfX0sXCJ+PVwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwifj1cIixkZXNjcmlwdGlvbjonXCJ+PVwiJ30sXCJ+XCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJ+XCIsZGVzY3JpcHRpb246J1wiflwiJ30sXCI9flwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiPX5cIixkZXNjcmlwdGlvbjonXCI9flwiJ30sZnVuY3Rpb24oZSxyKXtyZXR1cm57cXVlcnk6XCJsaWtlXCIsa2V5OmUsdmFsOnIucmVnZXg/cjp7cmVnZXg6cn19fSxcImxpa2VcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcImxpa2VcIixkZXNjcmlwdGlvbjonXCJsaWtlXCInfSxcIkxJS0VcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIkxJS0VcIixkZXNjcmlwdGlvbjonXCJMSUtFXCInfSxmdW5jdGlvbihlLHIpe3JldHVybntxdWVyeTpcImxpa2VsaWtlXCIsa2V5OmUsdmFsOnIucmVnZXg/cjp7cmVnZXg6cn19fSxcIiF+XCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCIhflwiLGRlc2NyaXB0aW9uOidcIiF+XCInfSxmdW5jdGlvbihlLHIpe3JldHVybntxdWVyeTpcIm5vdGxpa2VcIixrZXk6ZSx2YWw6ci5yZWdleD9yOntyZWdleDpyfX19LFwiOlwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiOlwiLGRlc2NyaXB0aW9uOidcIjpcIid9LGZ1bmN0aW9uKGUscil7cmV0dXJue3F1ZXJ5Olwic3Vic3RyXCIsa2V5OmUsdmFsOnJ9fSxcInR5cGVcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcInR5cGVcIixkZXNjcmlwdGlvbjonXCJ0eXBlXCInfSxmdW5jdGlvbihlKXtyZXR1cm57cXVlcnk6XCJ0eXBlXCIsdHlwZTplfX0sXCJ1c2VyXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJ1c2VyXCIsZGVzY3JpcHRpb246J1widXNlclwiJ30sXCJ1aWRcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcInVpZFwiLGRlc2NyaXB0aW9uOidcInVpZFwiJ30sXCJuZXdlclwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwibmV3ZXJcIixkZXNjcmlwdGlvbjonXCJuZXdlclwiJ30sXCJpZFwiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiaWRcIixkZXNjcmlwdGlvbjonXCJpZFwiJ30sZnVuY3Rpb24oZSxyKXtyZXR1cm57cXVlcnk6XCJtZXRhXCIsbWV0YTplLHZhbDpyfX0sZnVuY3Rpb24oZSl7cmV0dXJue3F1ZXJ5OlwiZnJlZSBmb3JtXCIsZnJlZTplfX0se3R5cGU6XCJvdGhlclwiLGRlc2NyaXB0aW9uOlwiS2V5XCJ9LC9eW2EtekEtWjAtOV86XFwtXS8se3R5cGU6XCJjbGFzc1wiLHZhbHVlOlwiW2EtekEtWjAtOV86LV1cIixkZXNjcmlwdGlvbjpcIlthLXpBLVowLTlfOi1dXCJ9LGZ1bmN0aW9uKGUpe3JldHVybiBlLmpvaW4oXCJcIil9LCdcIicse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6J1wiJyxkZXNjcmlwdGlvbjonXCJcXFxcXCJcIid9LFwiJ1wiLHt0eXBlOlwibGl0ZXJhbFwiLHZhbHVlOlwiJ1wiLGRlc2NyaXB0aW9uOidcIlxcJ1wiJ30sZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV19LHt0eXBlOlwib3RoZXJcIixkZXNjcmlwdGlvbjpcInN0cmluZ1wifSwvXlteJ1wiICgpfj0hKlxcLzo8PiZ8W1xcXXt9IytAJCU/XFxeLixdLyx7dHlwZTpcImNsYXNzXCIsdmFsdWU6XCJbXidcXFwiICgpfj0hKi86PD4mfFtcXFxcXXt9IytAJCU/Xi4sXVwiLGRlc2NyaXB0aW9uOlwiW14nXFxcIiAoKX49ISovOjw+JnxbXFxcXF17fSMrQCQlP14uLF1cIn0sZnVuY3Rpb24oZSl7cmV0dXJuIGUuam9pbihcIlwiKX0sXCJcXFxcXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJcXFxcXCIsZGVzY3JpcHRpb246J1wiXFxcXFxcXFxcIid9LHt0eXBlOlwiYW55XCIsZGVzY3JpcHRpb246XCJhbnkgY2hhcmFjdGVyXCJ9LGZ1bmN0aW9uKGUpe3JldHVybiBlfSxmdW5jdGlvbihlKXtyZXR1cm4gZX0sL15bJ1wiXFxcXGJmbnJ0dl0vLHt0eXBlOlwiY2xhc3NcIix2YWx1ZTpcIlsnXFxcIlxcXFxcXFxcYmZucnR2XVwiLGRlc2NyaXB0aW9uOlwiWydcXFwiXFxcXFxcXFxiZm5ydHZdXCJ9LGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoXCJiXCIsXCJcXGJcIikucmVwbGFjZShcImZcIixcIlxcZlwiKS5yZXBsYWNlKFwiblwiLFwiXFxuXCIpLnJlcGxhY2UoXCJyXCIsXCJcXHJcIikucmVwbGFjZShcInRcIixcIlxcdFwiKS5yZXBsYWNlKFwidlwiLFwiXFx2XCIpfSxcIi9cIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcIi9cIixkZXNjcmlwdGlvbjonXCIvXCInfSxcImlcIix7dHlwZTpcImxpdGVyYWxcIix2YWx1ZTpcImlcIixkZXNjcmlwdGlvbjonXCJpXCInfSxcIlwiLGZ1bmN0aW9uKGUpe3JldHVybntyZWdleDplWzFdLG1vZGlmaWVyOmVbM119fSxcIlxcXFwvXCIse3R5cGU6XCJsaXRlcmFsXCIsdmFsdWU6XCJcXFxcL1wiLGRlc2NyaXB0aW9uOidcIlxcXFxcXFxcL1wiJ30sZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0se3R5cGU6XCJvdGhlclwiLGRlc2NyaXB0aW9uOlwid2hpdGVzcGFjZVwifSwvXlsgXFx0XFxuXFxyXS8se3R5cGU6XCJjbGFzc1wiLHZhbHVlOlwiWyBcXFxcdFxcXFxuXFxcXHJdXCIsZGVzY3JpcHRpb246XCJbIFxcXFx0XFxcXG5cXFxccl1cIn1dLGQ9W2woXCIlOzsvOiM7IS8xJDs7LygkOCM6ICMhISkoIycjKFxcXCInIyYnI1wiKSxsKCclO1wiL1kjJDs8LyYjMCMqOzwmJiYjL0MkMiFcIlwiNiE3XCIuKSAmMiNcIlwiNiM3JC8oJDgjOiUjIVwiKSgjXFwnIyhcIlxcJyMmXFwnIy7FgSAmJTtcIi95IyQ7PC8mIzAjKjs8JiYmIy9jJDImXCJcIjYmN1xcJy4pICYyKFwiXCI2KDcpL0gkJDs8LyYjMCMqOzwmJiYjLzIkOzIvKSQ4JToqJVwiJCApKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLsObICYlO1wiL3kjJDs8LyYjMCMqOzwmJiYjL2MkMitcIlwiNis3LC4pICYyLVwiXCI2LTcuL0gkJDs8LyYjMCMqOzwmJiYjLzIkOzIvKSQ4JTovJVwiJCApKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLnUgJiU7XCIvWSMkOzwvJiMwIyo7PCYmJiMvQyQyMFwiXCI2MDcxLikgJjIyXCJcIjYyNzMvKCQ4Izo0IyFcIikoI1xcJyMoXCJcXCcjJlxcJyMuLyAmJTtcIi9cXCcgOCE6JSEhICknKSxsKCclOyMvwpEjJDs8LyYjMCMqOzwmJiYjL3skMjVcIlwiNjU3Ni5BICYyN1wiXCI2Nzc4LjUgJjI5XCJcIjY5NzouKSAmMjtcIlwiNjs3PC9IJCQ7PC8mIzAjKjs8JiYmIy8yJDtcIi8pJDglOj0lXCIkICkoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMuIyAmOyMnKSxsKCclOyQvwpEjJDs8LyYjMCMqOzwmJiYjL3skMj5cIlwiNj43Py5BICYyQFwiXCI2QDdBLjUgJjJCXCJcIjZCN0MuKSAmMkRcIlwiNkQ3RS9IJCQ7PC8mIzAjKjs8JiYmIy8yJDsjLykkOCU6RiVcIiQgKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy4jICY7JCcpLGwoJzslLmIgJiUyR1wiXCI2RzdIL1IjOzsvSSQ7XCIvQCQ7Oy83JDJJXCJcIjZJN0ovKCQ4JTpLJSFcIikoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMnKSxsKFwiOy4uWSAmOy8uUyAmOyYuTSAmOycuRyAmOyguQSAmOykuOyAmOyouNSAmOysuLyAmOywuKSAmOy0uIyAmOzBcIiksbCgnJTsxL18jOzsvViQyTFwiXCI2TDdNLikgJjJOXCJcIjZON08vOyQ7Oy8yJDsyLykkOCU6UCVcIiQgKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyU7MS9fIzs7L1YkMlFcIlwiNlE3Ui4pICYyU1wiXCI2UzdULzskOzsvMiQ7Mi8pJDglOlUlXCIkICkoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMnKSxsKCclOzEvZCM7Oy9bJDJMXCJcIjZMN00uKSAmMk5cIlwiNk43Ty9AJDs7LzckMlZcIlwiNlY3Vy8oJDglOlglISQpKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLsSLICYlOzIvxIEjJDs8LyYjMCMqOzwmJiYjL8OrJCUyWVwiXCI2WTdaL20jJDs8LyYjMCMqOzwmJiYjL1ckMltcIlwiNls3XFxcXC9IJCQ7PC8mIzAjKjs8JiYmIy8yJDJdXCJcIjZdN14vIyQrJSkoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMufSAmJTJfXCJcIjZfN2AvbSMkOzwvJiMwIyo7PCYmJiMvVyQyYVwiXCI2YTdiL0gkJDs8LyYjMCMqOzwmJiYjLzIkMmNcIlwiNmM3ZC8jJCslKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy8oJDgjOlgjIVwiKSgjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyU7MS9kIzs7L1skMlFcIlwiNlE3Ui4pICYyU1wiXCI2UzdUL0AkOzsvNyQyVlwiXCI2VjdXLygkOCU6ZSUhJCkoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMuw4EgJiU7Mi/CtyMkOzwvJiMwIyo7PCYmJiMvwqEkJTJZXCJcIjZZN1ovSCMkOzwvJiMwIyo7PCYmJiMvMiQyXVwiXCI2XTdeLyMkKyMpKCNcXCcjKFwiXFwnIyZcXCcjLlggJiUyX1wiXCI2XzdgL0gjJDs8LyYjMCMqOzwmJiYjLzIkMmNcIlwiNmM3ZC8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIy8oJDgjOmUjIVwiKSgjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyU7MS9xIzs7L2gkMmZcIlwiNmY3Zy41ICYyaFwiXCI2aDdpLikgJjJqXCJcIjZqN2svQSQ7Oy84JDsyLiMgJjs4LykkOCU6bCVcIiQgKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy7CiSAmJTsyL38jJDs8LyYjMCMqOzwmJiYjL2kkMm1cIlwiNm03bi4pICYyb1wiXCI2bzdwL04kJDs8LyYjMCMqOzwmJiYjLzgkOzIuIyAmOzgvKSQ4JTpsJVwiJCApKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjJyksbChcIiUyaFxcXCJcXFwiNmg3aS/CgyM7Oy96JDsyL3EkOzsvaCQyZlxcXCJcXFwiNmY3Zy41ICYyaFxcXCJcXFwiNmg3aS4pICYyalxcXCJcXFwiNmo3ay9BJDs7LzgkOzIuIyAmOzgvKSQ4JzpxJ1xcXCIkICkoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksbChcIiU7MS9ZIzs7L1AkMnJcXFwiXFxcIjZyN3MvQSQ7Oy84JDsyLiMgJjs4LykkOCU6dCVcXFwiJCApKCUnIygkJyMoIycjKFxcXCInIyYnIy7DpyAmJTsyL8OdIyQ7PC8mIzAjKjs8JiYmIy/DhyQlMltcXFwiXFxcIjZbN1xcXFwvSCMkOzwvJiMwIyo7PCYmJiMvMiQybVxcXCJcXFwiNm03bi8jJCsjKSgjJyMoXFxcIicjJicjLlggJiUyYVxcXCJcXFwiNmE3Yi9IIyQ7PC8mIzAjKjs8JiYmIy8yJDJvXFxcIlxcXCI2bzdwLyMkKyMpKCMnIyhcXFwiJyMmJyMvTiQkOzwvJiMwIyo7PCYmJiMvOCQ7Mi4jICY7OC8pJDglOnQlXFxcIiQgKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksbChcIiU7Mi9TIzs7L0okMnVcXFwiXFxcIjZ1N3YvOyQ7Oy8yJDsyLykkOCU6dyVcXFwiJCApKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxsKFwiJTJ4XFxcIlxcXCI2eDd5L1IjOzsvSSQydVxcXCJcXFwiNnU3di86JDs7LzEkOzIvKCQ4JTp6JSEgKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksbCgnJTJ7XCJcIjZ7N3wuQSAmMn1cIlwiNn03fi41ICYyf1wiXCI2fzfCgC4pICYywoFcIlwiNsKBN8KCL1MjOzsvSiQydVwiXCI2dTd2LzskOzsvMiQ7Mi8pJDglOsKDJVwiJCApKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjJyksbChcIiU7Mi8nIDghOsKEISEgKVwiKSxsKCc8JSQ0woZcIlwiNSE3wocvLCMwKSo0woZcIlwiNSE3wocmJiYjL1xcJyA4ITrCiCEhICkuwoUgJiUlMsKJXCJcIjbCiTfCii87IzszLzIkMsKJXCJcIjbCiTfCii8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIy5LICYlMsKLXCJcIjbCizfCjC87Izs0LzIkMsKLXCJcIjbCizfCjC8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIy9cXCcgOCE6wo0hISApPS5cIiA3woUnKSxsKCc8JSQ0wo9cIlwiNSE3wpAvLCMwKSo0wo9cIlwiNSE3wpAmJiYjL1xcJyA4ITrCiCEhICkuwoUgJiUlMsKJXCJcIjbCiTfCii87IzszLzIkMsKJXCJcIjbCiTfCii8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIy5LICYlMsKLXCJcIjbCizfCjC87Izs0LzIkMsKLXCJcIjbCizfCjC8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIy9cXCcgOCE6wo0hISApPS5cIiA3wo4nKSxsKFwiJSQ7NTAjKjs1Ji8nIDghOsKRISEgKVwiKSxsKFwiJSQ7NjAjKjs2Ji8nIDghOsKRISEgKVwiKSxsKCclJTwywolcIlwiNsKJN8KKLikgJjLCklwiXCI2wpI3wpM9LiMjJiYhJlxcJyMvNiMxXCJcIjUhN8KULygkOFwiOsKVXCIhICkoXCJcXCcjJlxcJyMuQSAmJTLCklwiXCI2wpI3wpMvMSM7Ny8oJDhcIjrCllwiISApKFwiXFwnIyZcXCcjJyksbCgnJSU8MsKLXCJcIjbCizfCjC4pICYywpJcIlwiNsKSN8KTPS4jIyYmISZcXCcjLzYjMVwiXCI1ITfClC8oJDhcIjrClVwiISApKFwiXFwnIyZcXCcjLkEgJiUywpJcIlwiNsKSN8KTLzEjOzcvKCQ4XCI6wpZcIiEgKShcIlxcJyMmXFwnIycpLGwoJyU0wpdcIlwiNSE3wpgvXFwnIDghOsKZISEgKScpLGwoJzwlJTLCmlwiXCI2wpo3wpsvVSM7OS9MJDLCmlwiXCI2wpo3wpsvPSQywpxcIlwiNsKcN8KdLiMgJiDCni5cIiAmXCIvIyQrJCkoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMvXFwnIDghOsKfISEgKT0uXCIgN8KOJyksbChcIiUkOzovJiMwIyo7OiYmJiMvJyA4ITrCkSEhIClcIiksbCgnJSU8MsKaXCJcIjbCmjfCmy4pICYywqBcIlwiNsKgN8KhPS4jIyYmISZcXCcjLzYjMVwiXCI1ITfClC8oJDhcIjrClVwiISApKFwiXFwnIyZcXCcjLjQgJiUywqBcIlwiNsKgN8KhLyYgOCE6wqIhICknKSxsKCc8JDs8MCMqOzwmPS5cIiA3wqMnKSxsKCc8NMKkXCJcIjUhN8KlPS5cIiA3wqMnKV0sJD0wLGE9W3tsaW5lOjEsY29sdW1uOjEsc2VlbkNSOiExfV0sbj0wLHU9W10seT0wO2lmKFwic3RhcnRSdWxlXCJpbiBlKXtpZighKGUuc3RhcnRSdWxlIGluIHIpKXRocm93IG5ldyBFcnJvcihcIkNhbid0IHN0YXJ0IHBhcnNpbmcgZnJvbSBydWxlIFxcXCJcIitlLnN0YXJ0UnVsZSsnXCIuJyk7dD1yW2Uuc3RhcnRSdWxlXX1mdW5jdGlvbiBpKGUpe3ZhciByLHQsbj1hW2VdO2lmKG4pcmV0dXJuIG47Zm9yKHI9ZS0xOyFhW3JdOylyLS07Zm9yKG49e2xpbmU6KG49YVtyXSkubGluZSxjb2x1bW46bi5jb2x1bW4sc2VlbkNSOm4uc2VlbkNSfTtyPGU7KVwiXFxuXCI9PT0odD1jLmNoYXJBdChyKSk/KG4uc2VlbkNSfHxuLmxpbmUrKyxuLmNvbHVtbj0xLG4uc2VlbkNSPSExKTpcIlxcclwiPT09dHx8XCJcXHUyMDI4XCI9PT10fHxcIlxcdTIwMjlcIj09PXQ/KG4ubGluZSsrLG4uY29sdW1uPTEsbi5zZWVuQ1I9ITApOihuLmNvbHVtbisrLG4uc2VlbkNSPSExKSxyKys7cmV0dXJuIGFbZV09bn1mdW5jdGlvbiBvKGUscil7dmFyIHQ9aShlKSxuPWkocik7cmV0dXJue3N0YXJ0OntvZmZzZXQ6ZSxsaW5lOnQubGluZSxjb2x1bW46dC5jb2x1bW59LGVuZDp7b2Zmc2V0OnIsbGluZTpuLmxpbmUsY29sdW1uOm4uY29sdW1ufX19ZnVuY3Rpb24gaChlKXskPG58fChuPCQmJihuPSQsdT1bXSksdS5wdXNoKGUpKX1mdW5jdGlvbiBzKGUscix0LG4pe3JldHVybiBudWxsIT09ciYmZnVuY3Rpb24oZSl7dmFyIHI9MTtmb3IoZS5zb3J0KGZ1bmN0aW9uKGUscil7cmV0dXJuIGUuZGVzY3JpcHRpb248ci5kZXNjcmlwdGlvbj8tMTplLmRlc2NyaXB0aW9uPnIuZGVzY3JpcHRpb24/MTowfSk7cjxlLmxlbmd0aDspZVtyLTFdPT09ZVtyXT9lLnNwbGljZShyLDEpOnIrK30ociksbmV3IHYobnVsbCE9PWU/ZTpmdW5jdGlvbihlLHIpe2Zvcih2YXIgdD1uZXcgQXJyYXkoZS5sZW5ndGgpLG49MDtuPGUubGVuZ3RoO24rKyl0W25dPWVbbl0uZGVzY3JpcHRpb247ZnVuY3Rpb24gYShlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfXJldHVyblwiRXhwZWN0ZWQgXCIrKDE8ZS5sZW5ndGg/dC5zbGljZSgwLC0xKS5qb2luKFwiLCBcIikrXCIgb3IgXCIrdFtlLmxlbmd0aC0xXTp0WzBdKStcIiBidXQgXCIrKHI/J1wiJytyLnJlcGxhY2UoL1xcXFwvZyxcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL1wiL2csJ1xcXFxcIicpLnJlcGxhY2UoL1xceDA4L2csXCJcXFxcYlwiKS5yZXBsYWNlKC9cXHQvZyxcIlxcXFx0XCIpLnJlcGxhY2UoL1xcbi9nLFwiXFxcXG5cIikucmVwbGFjZSgvXFxmL2csXCJcXFxcZlwiKS5yZXBsYWNlKC9cXHIvZyxcIlxcXFxyXCIpLnJlcGxhY2UoL1tcXHgwMC1cXHgwN1xceDBCXFx4MEVcXHgwRl0vZyxmdW5jdGlvbihlKXtyZXR1cm5cIlxcXFx4MFwiK2EoZSl9KS5yZXBsYWNlKC9bXFx4MTAtXFx4MUZcXHg4MC1cXHhGRl0vZyxmdW5jdGlvbihlKXtyZXR1cm5cIlxcXFx4XCIrYShlKX0pLnJlcGxhY2UoL1tcXHUwMTAwLVxcdTBGRkZdL2csZnVuY3Rpb24oZSl7cmV0dXJuXCJcXFxcdTBcIithKGUpfSkucmVwbGFjZSgvW1xcdTEwMDAtXFx1RkZGRl0vZyxmdW5jdGlvbihlKXtyZXR1cm5cIlxcXFx1XCIrYShlKX0pKydcIic6XCJlbmQgb2YgaW5wdXRcIikrXCIgZm91bmQuXCJ9KHIsdCkscix0LG4pfWZ1bmN0aW9uIGwoZSl7Zm9yKHZhciByPW5ldyBBcnJheShlLmxlbmd0aCksdD0wO3Q8ZS5sZW5ndGg7dCsrKXJbdF09ZS5jaGFyQ29kZUF0KHQpLTMyO3JldHVybiByfWlmKCh0PWZ1bmN0aW9uIGUocil7Zm9yKHZhciB0LG4sYT1kW3JdLHU9MCxpPVtdLG89YS5sZW5ndGgscz1bXSxsPVtdOzspe2Zvcig7dTxvOylzd2l0Y2goYVt1XSl7Y2FzZSAwOmwucHVzaChmW2FbdSsxXV0pLHUrPTI7YnJlYWs7Y2FzZSAxOmwucHVzaCh2b2lkIDApLHUrKzticmVhaztjYXNlIDI6bC5wdXNoKG51bGwpLHUrKzticmVhaztjYXNlIDM6bC5wdXNoKHApLHUrKzticmVhaztjYXNlIDQ6bC5wdXNoKFtdKSx1Kys7YnJlYWs7Y2FzZSA1OmwucHVzaCgkKSx1Kys7YnJlYWs7Y2FzZSA2OmwucG9wKCksdSsrO2JyZWFrO2Nhc2UgNzokPWwucG9wKCksdSsrO2JyZWFrO2Nhc2UgODpsLmxlbmd0aC09YVt1KzFdLHUrPTI7YnJlYWs7Y2FzZSA5Omwuc3BsaWNlKC0yLDEpLHUrKzticmVhaztjYXNlIDEwOmxbbC5sZW5ndGgtMl0ucHVzaChsLnBvcCgpKSx1Kys7YnJlYWs7Y2FzZSAxMTpsLnB1c2gobC5zcGxpY2UobC5sZW5ndGgtYVt1KzFdLGFbdSsxXSkpLHUrPTI7YnJlYWs7Y2FzZSAxMjpsLnB1c2goYy5zdWJzdHJpbmcobC5wb3AoKSwkKSksdSsrO2JyZWFrO2Nhc2UgMTM6cy5wdXNoKG8pLGkucHVzaCh1KzMrYVt1KzFdK2FbdSsyXSksbFtsLmxlbmd0aC0xXT8obz11KzMrYVt1KzFdLHUrPTMpOihvPXUrMythW3UrMV0rYVt1KzJdLHUrPTMrYVt1KzFdKTticmVhaztjYXNlIDE0OnMucHVzaChvKSxpLnB1c2godSszK2FbdSsxXSthW3UrMl0pLGxbbC5sZW5ndGgtMV09PT1wPyhvPXUrMythW3UrMV0sdSs9Myk6KG89dSszK2FbdSsxXSthW3UrMl0sdSs9MythW3UrMV0pO2JyZWFrO2Nhc2UgMTU6cy5wdXNoKG8pLGkucHVzaCh1KzMrYVt1KzFdK2FbdSsyXSksbFtsLmxlbmd0aC0xXSE9PXA/KG89dSszK2FbdSsxXSx1Kz0zKToobz11KzMrYVt1KzFdK2FbdSsyXSx1Kz0zK2FbdSsxXSk7YnJlYWs7Y2FzZSAxNjpsW2wubGVuZ3RoLTFdIT09cD8ocy5wdXNoKG8pLGkucHVzaCh1KSxvPXUrMithW3UrMV0sdSs9Mik6dSs9MithW3UrMV07YnJlYWs7Y2FzZSAxNzpzLnB1c2gobyksaS5wdXNoKHUrMythW3UrMV0rYVt1KzJdKSxjLmxlbmd0aD4kPyhvPXUrMythW3UrMV0sdSs9Myk6KG89dSszK2FbdSsxXSthW3UrMl0sdSs9MythW3UrMV0pO2JyZWFrO2Nhc2UgMTg6cy5wdXNoKG8pLGkucHVzaCh1KzQrYVt1KzJdK2FbdSszXSksYy5zdWJzdHIoJCxmW2FbdSsxXV0ubGVuZ3RoKT09PWZbYVt1KzFdXT8obz11KzQrYVt1KzJdLHUrPTQpOihvPXUrNCthW3UrMl0rYVt1KzNdLHUrPTQrYVt1KzJdKTticmVhaztjYXNlIDE5OnMucHVzaChvKSxpLnB1c2godSs0K2FbdSsyXSthW3UrM10pLGMuc3Vic3RyKCQsZlthW3UrMV1dLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09PWZbYVt1KzFdXT8obz11KzQrYVt1KzJdLHUrPTQpOihvPXUrNCthW3UrMl0rYVt1KzNdLHUrPTQrYVt1KzJdKTticmVhaztjYXNlIDIwOnMucHVzaChvKSxpLnB1c2godSs0K2FbdSsyXSthW3UrM10pLGZbYVt1KzFdXS50ZXN0KGMuY2hhckF0KCQpKT8obz11KzQrYVt1KzJdLHUrPTQpOihvPXUrNCthW3UrMl0rYVt1KzNdLHUrPTQrYVt1KzJdKTticmVhaztjYXNlIDIxOmwucHVzaChjLnN1YnN0cigkLGFbdSsxXSkpLCQrPWFbdSsxXSx1Kz0yO2JyZWFrO2Nhc2UgMjI6bC5wdXNoKGZbYVt1KzFdXSksJCs9ZlthW3UrMV1dLmxlbmd0aCx1Kz0yO2JyZWFrO2Nhc2UgMjM6bC5wdXNoKHApLDA9PT15JiZoKGZbYVt1KzFdXSksdSs9MjticmVhaztjYXNlIDI0OmxbbC5sZW5ndGgtMS1hW3UrMV1dLHUrPTI7YnJlYWs7Y2FzZSAyNTp1Kys7YnJlYWs7Y2FzZSAyNjpmb3IodD1hLnNsaWNlKHUrNCx1KzQrYVt1KzNdKSxuPTA7bjxhW3UrM107bisrKXRbbl09bFtsLmxlbmd0aC0xLXRbbl1dO2wuc3BsaWNlKGwubGVuZ3RoLWFbdSsyXSxhW3UrMl0sZlthW3UrMV1dLmFwcGx5KG51bGwsdCkpLHUrPTQrYVt1KzNdO2JyZWFrO2Nhc2UgMjc6bC5wdXNoKGUoYVt1KzFdKSksdSs9MjticmVhaztjYXNlIDI4OnkrKyx1Kys7YnJlYWs7Y2FzZSAyOTp5LS0sdSsrO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGNvZGU6IFwiK2FbdV0rXCIuXCIpfWlmKCEoMDxzLmxlbmd0aCkpYnJlYWs7bz1zLnBvcCgpLHU9aS5wb3AoKX1yZXR1cm4gbFswXX0odCkpIT09cCYmJD09PWMubGVuZ3RoKXJldHVybiB0O3Rocm93IHQhPT1wJiYkPGMubGVuZ3RoJiZoKHt0eXBlOlwiZW5kXCIsZGVzY3JpcHRpb246XCJlbmQgb2YgaW5wdXRcIn0pLHMobnVsbCx1LG48Yy5sZW5ndGg/Yy5jaGFyQXQobik6bnVsbCxuPGMubGVuZ3RoP28obixuKzEpOm8obixuKSl9fX0oKX0se31dfSx7fSxbMl0pKDIpfSk7IiwiIWZ1bmN0aW9uKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMpLm92ZXJwYXNzV2l6YXJkRXhwYW5kPWUoKX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gcihvLGksdSl7ZnVuY3Rpb24gcyh0LGUpe2lmKCFpW3RdKXtpZighb1t0XSl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZSYmbilyZXR1cm4gbih0LCEwKTtpZihjKXJldHVybiBjKHQsITApO3Rocm93KG49bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIit0K1wiJ1wiKSkuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixufW49aVt0XT17ZXhwb3J0czp7fX0sb1t0XVswXS5jYWxsKG4uZXhwb3J0cyxmdW5jdGlvbihlKXtyZXR1cm4gcyhvW3RdWzFdW2VdfHxlKX0sbixuLmV4cG9ydHMscixvLGksdSl9cmV0dXJuIGlbdF0uZXhwb3J0c31mb3IodmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxlPTA7ZTx1Lmxlbmd0aDtlKyspcyh1W2VdKTtyZXR1cm4gc30oezE6W2Z1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9yYXdcIiksbz1bXSxpPVtdLHU9ci5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoZnVuY3Rpb24oKXtpZihpLmxlbmd0aCl0aHJvdyBpLnNoaWZ0KCl9KTtmdW5jdGlvbiBzKGUpe3ZhciB0PW8ubGVuZ3RoP28ucG9wKCk6bmV3IGM7dC50YXNrPWUscih0KX1mdW5jdGlvbiBjKCl7dGhpcy50YXNrPW51bGx9dC5leHBvcnRzPXMsYy5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbigpe3RyeXt0aGlzLnRhc2suY2FsbCgpfWNhdGNoKGUpe3Mub25lcnJvcj9zLm9uZXJyb3IoZSk6KGkucHVzaChlKSx1KCkpfWZpbmFsbHl7dGhpcy50YXNrPW51bGwsb1tvLmxlbmd0aF09dGhpc319fSx7XCIuL3Jhd1wiOjJ9XSwyOltmdW5jdGlvbihlLHAsdCl7KGZ1bmN0aW9uKGwpeyhmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7ci5sZW5ndGh8fCh0KCksMCkscltyLmxlbmd0aF09ZX1wLmV4cG9ydHM9ZTt2YXIgdCxyPVtdLG89MDtmdW5jdGlvbiBuKCl7Zm9yKDtvPHIubGVuZ3RoOyl7dmFyIGU9bztpZihvKz0xLHJbZV0uY2FsbCgpLDEwMjQ8byl7Zm9yKHZhciB0PTAsbj1yLmxlbmd0aC1vO3Q8bjt0Kyspclt0XT1yW3Qrb107ci5sZW5ndGgtPW8sbz0wfX1yLmxlbmd0aD0wLG89MCwwfXZhciBpLHUscyxjPXZvaWQgMCE9PWw/bDpzZWxmLGY9Yy5NdXRhdGlvbk9ic2VydmVyfHxjLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7ZnVuY3Rpb24gYShyKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1zZXRUaW1lb3V0KG4sMCksdD1zZXRJbnRlcnZhbChuLDUwKTtmdW5jdGlvbiBuKCl7Y2xlYXJUaW1lb3V0KGUpLGNsZWFySW50ZXJ2YWwodCkscigpfX19dD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBmPyh1PTEsaT1uZXcgZihpPW4pLHM9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIiksaS5vYnNlcnZlKHMse2NoYXJhY3RlckRhdGE6ITB9KSxmdW5jdGlvbigpe3U9LXUscy5kYXRhPXV9KTphKG4pLGUucmVxdWVzdEZsdXNoPXQsZS5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXI9YX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwzOltmdW5jdGlvbihlLHQsbil7fSx7fV0sNDpbZnVuY3Rpb24oZSx0LG4pe3ZhciB1PWUoXCJwcm9taXNlXCIpLG89ZShcInJlcXVlc3QtcHJvbWlzZVwiKTtmdW5jdGlvbiByKHQsbil7dmFyIHIsZT1cImh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9mb3JtYXQ9anNvbiZxPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSxlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdD8ocj1lLG5ldyB1KGZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IFhNTEh0dHBSZXF1ZXN0O24ub3BlbihcIkdFVFwiLHIpLG4ub25sb2FkPWZ1bmN0aW9uKCl7MjAwPT1uLnN0YXR1cz9lKG4ucmVzcG9uc2UpOnQoRXJyb3IoXCJYTUxIdHRwUmVxdWVzdCBFcnJvcjogXCIrbi5zdGF0dXNUZXh0KSl9LG4ub25lcnJvcj1mdW5jdGlvbigpe3QoRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKX0sbi5zZW5kKCl9KS50aGVuKEpTT04ucGFyc2UpKTpvKHt1cmw6ZSxtZXRob2Q6XCJHRVRcIixoZWFkZXJzOntcIlVzZXItQWdlbnRcIjpcIm92ZXJwYXNzLXdpemFyZFwifSxqc29uOiEwfSk7cmV0dXJuIGUudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbiYmKGU9ZS5maWx0ZXIobikpLDA9PT1lLmxlbmd0aD91LnJlamVjdChuZXcgRXJyb3IoXCJObyByZXN1bHQgZm91bmQgZm9yIGdlb2NvZGluZyBzZWFyY2g6IFwiK3QpKTplWzBdfSl9dmFyIHM9e2RhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1EYXRlLm5vdygpO2lmKG51bGw9PT0oZT1lLnRvTG93ZXJDYXNlKCkubWF0Y2goLygtP1swLTldKykgPyhzZWNvbmRzP3xtaW51dGVzP3xob3Vycz98ZGF5cz98d2Vla3M/fG1vbnRocz98eWVhcnM/KT8vKSkpcmV0dXJuIHUucmVqZWN0KG5ldyBFcnJvcihcInVuYWJsZSB0byBleHBhbmQgZGF0ZSBzaG9ydGN1dC5cIikpO3ZhciByPXBhcnNlSW50KGVbMV0pO3N3aXRjaChlWzJdKXtjYXNlXCJzZWNvbmRcIjpjYXNlXCJzZWNvbmRzXCI6bz0xO2JyZWFrO2Nhc2VcIm1pbnV0ZVwiOmNhc2VcIm1pbnV0ZXNcIjpvPTYwO2JyZWFrO2Nhc2VcImhvdXJcIjpjYXNlXCJob3Vyc1wiOm89MzYwMDticmVhaztjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6ZGVmYXVsdDpvPTg2NDAwO2JyZWFrO2Nhc2VcIndlZWtcIjpjYXNlXCJ3ZWVrc1wiOm89NjA0ODAwO2JyZWFrO2Nhc2VcIm1vbnRoXCI6Y2FzZVwibW9udGhzXCI6bz0yNjI4ZTM7YnJlYWs7Y2FzZVwieWVhclwiOmNhc2VcInllYXJzXCI6bz0zMTUzNmUzfXZhciBvPW4tcipvKjFlMztyZXR1cm4gdS5yZXNvbHZlKG5ldyBEYXRlKG8pLnRvSVNPU3RyaW5nKCkpfSxnZW9jb2RlQXJlYTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLGZ1bmN0aW9uKGUpe3JldHVybiBlLm9zbV90eXBlJiZlLm9zbV9pZCYmXCJub2RlXCIhPT1lLm9zbV90eXBlfSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD0rZS5vc21faWQ7cmV0dXJuXCJ3YXlcIj09ZS5vc21fdHlwZSYmKHQrPTI0ZTgpLFwicmVsYXRpb25cIj09ZS5vc21fdHlwZSYmKHQrPTM2ZTgpLGU9XCJhcmVhKFwiK3QrXCIpXCJ9KX0sZ2VvY29kZUNvb3JkczpmdW5jdGlvbihlKXtyZXR1cm4gcihlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlPWUubGF0K1wiLFwiK2UubG9ufSl9fTt0LmV4cG9ydHM9ZnVuY3Rpb24ocixlLHQpe2UmJihyPXIucmVwbGFjZSgve3tiYm94fX0vZyxlKSk7dmFyIG89XCJ7eyhbYS16QS1aMC05X10rKT0oLis/KX19XCI7KHIubWF0Y2gobmV3IFJlZ0V4cChvLFwiZ1wiKSl8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgZT1lLm1hdGNoKG5ldyBSZWdFeHAobykpLHQ9XCJ7e1wiK2VbMV0rXCJ9fVwiLG49ZVsyXTswPD1yLmluZGV4T2YodCk7KXI9ci5yZXBsYWNlKHQsbil9KTt2YXIgbj1cInt7KGRhdGV8Z2VvY29kZUFyZWF8Z2VvY29kZUNvb3Jkcyk6KFtcXFxcc1xcXFxTXSo/KX19XCIsaT1yLm1hdGNoKG5ldyBSZWdFeHAobixcImdcIikpfHxbXTtyZXR1cm4gdS5hbGwoaS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5tYXRjaChuZXcgUmVnRXhwKG4pKSxzW2VbMV1dKGVbMl0pfSkpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlLHQpe3I9ci5yZXBsYWNlKGlbdF0sZSl9KSxyfSkudGhlbihmdW5jdGlvbihlKXt0KHZvaWQgMCxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3QoZSl9KX19LHtwcm9taXNlOjUsXCJyZXF1ZXN0LXByb21pc2VcIjozfV0sNTpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1lKFwiLi9saWJcIil9LHtcIi4vbGliXCI6MTB9XSw2OltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89ZShcImFzYXAvcmF3XCIpO2Z1bmN0aW9uIHUoKXt9dmFyIGk9bnVsbCxzPXt9O2Z1bmN0aW9uIGMoZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ld1wiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcm9taXNlIGNvbnN0cnVjdG9yJ3MgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb25cIik7dGhpcy5fNDA9MCx0aGlzLl82NT0wLHRoaXMuXzU1PW51bGwsdGhpcy5fNzI9bnVsbCxlIT09dSYmaChlLHRoaXMpfWZ1bmN0aW9uIGYoZSx0KXtmb3IoOzM9PT1lLl82NTspZT1lLl81NTtpZihjLl8zNyYmYy5fMzcoZSksMD09PWUuXzY1KXJldHVybiAwPT09ZS5fNDA/KGUuXzQwPTEsdm9pZChlLl83Mj10KSk6MT09PWUuXzQwPyhlLl80MD0yLHZvaWQoZS5fNzI9W2UuXzcyLHRdKSk6dm9pZCBlLl83Mi5wdXNoKHQpO3ZhciBuLHI7bj1lLHI9dCxvKGZ1bmN0aW9uKCl7dmFyIGU9MT09PW4uXzY1P3Iub25GdWxmaWxsZWQ6ci5vblJlamVjdGVkO251bGwhPT1lPyhlPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlKHQpfWNhdGNoKGUpe3JldHVybiBpPWUsc319KGUsbi5fNTUpKT09PXM/bChyLnByb21pc2UsaSk6YShyLnByb21pc2UsZSk6KDE9PT1uLl82NT9hOmwpKHIucHJvbWlzZSxuLl81NSl9KX1mdW5jdGlvbiBhKGUsdCl7aWYodD09PWUpcmV0dXJuIGwoZSxuZXcgVHlwZUVycm9yKFwiQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi5cIikpLDA7aWYodCYmKFwib2JqZWN0XCI9PXR5cGVvZiB0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KSl7dmFyIG49ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBlLnRoZW59Y2F0Y2goZSl7cmV0dXJuIGk9ZSxzfX0odCk7aWYobj09PXMpcmV0dXJuIGwoZSxpKSwwO2lmKG49PT1lLnRoZW4mJnQgaW5zdGFuY2VvZiBjKXJldHVybiBlLl82NT0zLGUuXzU1PXQsdm9pZCByKGUpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIHZvaWQgaChuLmJpbmQodCksZSl9ZS5fNjU9MSxlLl81NT10LHIoZSl9ZnVuY3Rpb24gbChlLHQpe2UuXzY1PTIsZS5fNTU9dCxjLl84NyYmYy5fODcoZSx0KSxyKGUpfWZ1bmN0aW9uIHIoZSl7aWYoMT09PWUuXzQwJiYoZihlLGUuXzcyKSxlLl83Mj1udWxsKSwyPT09ZS5fNDApe2Zvcih2YXIgdD0wO3Q8ZS5fNzIubGVuZ3RoO3QrKylmKGUsZS5fNzJbdF0pO2UuXzcyPW51bGx9fWZ1bmN0aW9uIHAoZSx0LG4pe3RoaXMub25GdWxmaWxsZWQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm51bGwsdGhpcy5vblJlamVjdGVkPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpudWxsLHRoaXMucHJvbWlzZT1ufWZ1bmN0aW9uIGgoZSx0KXt2YXIgbj0hMSxlPWZ1bmN0aW9uKGUsdCxuKXt0cnl7ZSh0LG4pfWNhdGNoKGUpe3JldHVybiBpPWUsc319KGUsZnVuY3Rpb24oZSl7bnx8KG49ITAsYSh0LGUpKX0sZnVuY3Rpb24oZSl7bnx8KG49ITAsbCh0LGUpKX0pO258fGUhPT1zfHwobj0hMCxsKHQsaSkpfSh0LmV4cG9ydHM9YykuXzM3PW51bGwsYy5fODc9bnVsbCxjLl82MT11LGMucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmNvbnN0cnVjdG9yIT09YylyZXR1cm4gbz1lLGk9dCxuZXcocj10aGlzKS5jb25zdHJ1Y3RvcihmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBjKHUpO24udGhlbihlLHQpLGYocixuZXcgcChvLGksbikpfSk7dmFyIHIsbyxpLG49bmV3IGModSk7cmV0dXJuIGYodGhpcyxuZXcgcChlLHQsbikpLG59fSx7XCJhc2FwL3Jhd1wiOjJ9XSw3OltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZT1lKFwiLi9jb3JlLmpzXCIpOyh0LmV4cG9ydHM9ZSkucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oZSx0KXsoYXJndW1lbnRzLmxlbmd0aD90aGlzLnRoZW4uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMpLnRoZW4obnVsbCxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0sMCl9KX19LHtcIi4vY29yZS5qc1wiOjZ9XSw4OltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGM9ZShcIi4vY29yZS5qc1wiKTt0LmV4cG9ydHM9Yzt2YXIgcj1hKCEwKSxvPWEoITEpLGk9YShudWxsKSx1PWEodm9pZCAwKSxzPWEoMCksZj1hKFwiXCIpO2Z1bmN0aW9uIGEoZSl7dmFyIHQ9bmV3IGMoYy5fNjEpO3JldHVybiB0Ll82NT0xLHQuXzU1PWUsdH1jLnJlc29sdmU9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGMpcmV0dXJuIGU7aWYobnVsbD09PWUpcmV0dXJuIGk7aWYodm9pZCAwPT09ZSlyZXR1cm4gdTtpZighMD09PWUpcmV0dXJuIHI7aWYoITE9PT1lKXJldHVybiBvO2lmKDA9PT1lKXJldHVybiBzO2lmKFwiXCI9PT1lKXJldHVybiBmO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXRyeXt2YXIgdD1lLnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdClyZXR1cm4gbmV3IGModC5iaW5kKGUpKX1jYXRjaChuKXtyZXR1cm4gbmV3IGMoZnVuY3Rpb24oZSx0KXt0KG4pfSl9cmV0dXJuIGEoZSl9LGMuYWxsPWZ1bmN0aW9uKGUpe3ZhciBzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpO3JldHVybiBuZXcgYyhmdW5jdGlvbihvLGkpe2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gbyhbXSk7dmFyIHU9cy5sZW5ndGg7Zm9yKHZhciBlPTA7ZTxzLmxlbmd0aDtlKyspIWZ1bmN0aW9uIHQobixlKXtpZihlJiYoXCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpKXtpZihlIGluc3RhbmNlb2YgYyYmZS50aGVuPT09Yy5wcm90b3R5cGUudGhlbil7Zm9yKDszPT09ZS5fNjU7KWU9ZS5fNTU7cmV0dXJuIDE9PT1lLl82NT90KG4sZS5fNTUpOigyPT09ZS5fNjUmJmkoZS5fNTUpLHZvaWQgZS50aGVuKGZ1bmN0aW9uKGUpe3QobixlKX0saSkpfXZhciByPWUudGhlbjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByKXJldHVybiB2b2lkIG5ldyBjKHIuYmluZChlKSkudGhlbihmdW5jdGlvbihlKXt0KG4sZSl9LGkpfXNbbl09ZSwwPT0tLXUmJm8ocyl9KGUsc1tlXSl9KX0sYy5yZWplY3Q9ZnVuY3Rpb24obil7cmV0dXJuIG5ldyBjKGZ1bmN0aW9uKGUsdCl7dChuKX0pfSxjLnJhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBjKGZ1bmN0aW9uKHQsbil7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2MucmVzb2x2ZShlKS50aGVuKHQsbil9KX0pfSxjLnByb3RvdHlwZS5jYXRjaD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsZSl9fSx7XCIuL2NvcmUuanNcIjo2fV0sOTpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuL2NvcmUuanNcIik7KHQuZXhwb3J0cz1yKS5wcm90b3R5cGUuZmluYWxseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByLnJlc29sdmUodCgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX0sZnVuY3Rpb24oZSl7cmV0dXJuIHIucmVzb2x2ZSh0KCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBlfSl9KX19LHtcIi4vY29yZS5qc1wiOjZ9XSwxMDpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1lKFwiLi9jb3JlLmpzXCIpLGUoXCIuL2RvbmUuanNcIiksZShcIi4vZmluYWxseS5qc1wiKSxlKFwiLi9lczYtZXh0ZW5zaW9ucy5qc1wiKSxlKFwiLi9ub2RlLWV4dGVuc2lvbnMuanNcIiksZShcIi4vc3luY2hyb25vdXMuanNcIil9LHtcIi4vY29yZS5qc1wiOjYsXCIuL2RvbmUuanNcIjo3LFwiLi9lczYtZXh0ZW5zaW9ucy5qc1wiOjgsXCIuL2ZpbmFsbHkuanNcIjo5LFwiLi9ub2RlLWV4dGVuc2lvbnMuanNcIjoxMSxcIi4vc3luY2hyb25vdXMuanNcIjoxMn1dLDExOltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZShcIi4vY29yZS5qc1wiKSxvPWUoXCJhc2FwXCIpOyh0LmV4cG9ydHM9aSkuZGVub2RlaWZ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQhPT0xLzA/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10scj0wO3I8dDtyKyspbi5wdXNoKFwiYVwiK3IpO3ZhciBvPVtcInJldHVybiBmdW5jdGlvbiAoXCIrbi5qb2luKFwiLFwiKStcIikge1wiLFwidmFyIHNlbGYgPSB0aGlzO1wiLFwicmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChycywgcmopIHtcIixcInZhciByZXMgPSBmbi5jYWxsKFwiLFtcInNlbGZcIl0uY29uY2F0KG4pLmNvbmNhdChbdV0pLmpvaW4oXCIsXCIpLFwiKTtcIixcImlmIChyZXMgJiZcIiwnKHR5cGVvZiByZXMgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHJlcyA9PT0gXCJmdW5jdGlvblwiKSAmJicsJ3R5cGVvZiByZXMudGhlbiA9PT0gXCJmdW5jdGlvblwiJyxcIikge3JzKHJlcyk7fVwiLFwifSk7XCIsXCJ9O1wiXS5qb2luKFwiXCIpO3JldHVybiBGdW5jdGlvbihbXCJQcm9taXNlXCIsXCJmblwiXSxvKShpLGUpfShlLHQpOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1NYXRoLm1heChlLmxlbmd0aC0xLDMpLG49W10scj0wO3I8dDtyKyspbi5wdXNoKFwiYVwiK3IpO3ZhciBvPVtcInJldHVybiBmdW5jdGlvbiAoXCIrbi5qb2luKFwiLFwiKStcIikge1wiLFwidmFyIHNlbGYgPSB0aGlzO1wiLFwidmFyIGFyZ3M7XCIsXCJ2YXIgYXJnTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcIixcImlmIChhcmd1bWVudHMubGVuZ3RoID4gXCIrdCtcIikge1wiLFwiYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoICsgMSk7XCIsXCJmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1wiLFwiYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcIixcIn1cIixcIn1cIixcInJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocnMsIHJqKSB7XCIsXCJ2YXIgY2IgPSBcIit1K1wiO1wiLFwidmFyIHJlcztcIixcInN3aXRjaCAoYXJnTGVuZ3RoKSB7XCIsbi5jb25jYXQoW1wiZXh0cmFcIl0pLm1hcChmdW5jdGlvbihlLHQpe3JldHVyblwiY2FzZSBcIit0K1wiOnJlcyA9IGZuLmNhbGwoXCIrW1wic2VsZlwiXS5jb25jYXQobi5zbGljZSgwLHQpKS5jb25jYXQoXCJjYlwiKS5qb2luKFwiLFwiKStcIik7YnJlYWs7XCJ9KS5qb2luKFwiXCIpLFwiZGVmYXVsdDpcIixcImFyZ3NbYXJnTGVuZ3RoXSA9IGNiO1wiLFwicmVzID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XCIsXCJ9XCIsXCJpZiAocmVzICYmXCIsJyh0eXBlb2YgcmVzID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiByZXMgPT09IFwiZnVuY3Rpb25cIikgJiYnLCd0eXBlb2YgcmVzLnRoZW4gPT09IFwiZnVuY3Rpb25cIicsXCIpIHtycyhyZXMpO31cIixcIn0pO1wiLFwifTtcIl0uam9pbihcIlwiKTtyZXR1cm4gRnVuY3Rpb24oW1wiUHJvbWlzZVwiLFwiZm5cIl0sbykoaSxlKX0oZSl9O3ZhciB1PVwiZnVuY3Rpb24gKGVyciwgcmVzKSB7aWYgKGVycikgeyByaihlcnIpOyB9IGVsc2UgeyBycyhyZXMpOyB9fVwiO2kubm9kZWlmeT1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZVtlLmxlbmd0aC0xXT9lLnBvcCgpOm51bGwscj10aGlzO3RyeXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cykubm9kZWlmeSh0LHIpfWNhdGNoKG4pe2lmKG51bGw9PXQpcmV0dXJuIG5ldyBpKGZ1bmN0aW9uKGUsdCl7dChuKX0pO28oZnVuY3Rpb24oKXt0LmNhbGwocixuKX0pfX19LGkucHJvdG90eXBlLm5vZGVpZnk9ZnVuY3Rpb24odCxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiB0aGlzO3RoaXMudGhlbihmdW5jdGlvbihlKXtvKGZ1bmN0aW9uKCl7dC5jYWxsKG4sbnVsbCxlKX0pfSxmdW5jdGlvbihlKXtvKGZ1bmN0aW9uKCl7dC5jYWxsKG4sZSl9KX0pfX0se1wiLi9jb3JlLmpzXCI6Nixhc2FwOjF9XSwxMjpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuL2NvcmUuanNcIik7KHQuZXhwb3J0cz1yKS5lbmFibGVTeW5jaHJvbm91cz1mdW5jdGlvbigpe3IucHJvdG90eXBlLmlzUGVuZGluZz1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLmdldFN0YXRlKCl9LHIucHJvdG90eXBlLmlzRnVsZmlsbGVkPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMuZ2V0U3RhdGUoKX0sci5wcm90b3R5cGUuaXNSZWplY3RlZD1mdW5jdGlvbigpe3JldHVybiAyPT10aGlzLmdldFN0YXRlKCl9LHIucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7aWYoMz09PXRoaXMuXzY1KXJldHVybiB0aGlzLl81NS5nZXRWYWx1ZSgpO2lmKCF0aGlzLmlzRnVsZmlsbGVkKCkpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdldCBhIHZhbHVlIG9mIGFuIHVuZnVsZmlsbGVkIHByb21pc2UuXCIpO3JldHVybiB0aGlzLl81NX0sci5wcm90b3R5cGUuZ2V0UmVhc29uPWZ1bmN0aW9uKCl7aWYoMz09PXRoaXMuXzY1KXJldHVybiB0aGlzLl81NS5nZXRSZWFzb24oKTtpZighdGhpcy5pc1JlamVjdGVkKCkpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdldCBhIHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZS5cIik7cmV0dXJuIHRoaXMuXzU1fSxyLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiAzPT09dGhpcy5fNjU/dGhpcy5fNTUuZ2V0U3RhdGUoKTotMT09PXRoaXMuXzY1fHwtMj09PXRoaXMuXzY1PzA6dGhpcy5fNjV9fSxyLmRpc2FibGVTeW5jaHJvbm91cz1mdW5jdGlvbigpe3IucHJvdG90eXBlLmlzUGVuZGluZz12b2lkIDAsci5wcm90b3R5cGUuaXNGdWxmaWxsZWQ9dm9pZCAwLHIucHJvdG90eXBlLmlzUmVqZWN0ZWQ9dm9pZCAwLHIucHJvdG90eXBlLmdldFZhbHVlPXZvaWQgMCxyLnByb3RvdHlwZS5nZXRSZWFzb249dm9pZCAwLHIucHJvdG90eXBlLmdldFN0YXRlPXZvaWQgMH19LHtcIi4vY29yZS5qc1wiOjZ9XX0se30sWzRdKSg0KX0pOyJdfQ==
